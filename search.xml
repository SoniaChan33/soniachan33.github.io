<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>RuståŸºç¡€[part4]_åŸºæœ¬ç±»å‹,æ‰€æœ‰æƒ</title>
      <link href="/2025/07/11/Rust%E5%9F%BA%E7%A1%80%5Bpart4%5D_%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B,%E6%89%80%E6%9C%89%E6%9D%83/"/>
      <url>/2025/07/11/Rust%E5%9F%BA%E7%A1%80%5Bpart4%5D_%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B,%E6%89%80%E6%9C%89%E6%9D%83/</url>
      <cover>https://img.soniachen.com/blog/posts/2025/07/image-20250711222125005.png</cover>
      <date>Fri Jul 11 2025 18:52:46 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>RuståŸºç¡€[part4]_åŸºæœ¬ç±»å‹,æ‰€æœ‰æƒ</h1><h2 id="Rustç±»å‹">Rustç±»å‹</h2><h3 id="æ¦‚è§ˆ">æ¦‚è§ˆ</h3><p>ä»¥ä¸‹æ˜¯æ•´åˆåçš„ Rust ç±»å‹è¯´æ˜è¡¨æ ¼ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>å€¼</th></tr></thead><tbody><tr><td><code>i8</code>ã€<code>i16</code>ã€<code>i32</code>ã€<code>i64</code>ã€<code>i128</code>ã€<code>u8</code>ã€<code>u16</code>ã€<code>u32</code>ã€<code>u64</code>ã€<code>u128</code></td><td>ç»™å®šä½å®½çš„æœ‰ç¬¦å·æ•´æ•°å’Œæ— ç¬¦å·æ•´æ•°</td><td><code>42</code>ã€<code>-5i8</code>ã€<code>0x400u16</code>ã€<code>0o100i16</code>ã€<code>20_922_789_888_000u64</code>ã€<code>b'*'</code>ï¼ˆ<code>u8</code> å­—èŠ‚å­—é¢é‡ï¼‰</td></tr><tr><td><code>isize</code>ã€<code>usize</code></td><td>ä¸æœºå™¨å­—ï¼ˆ32 ä½æˆ– 64 ä½ï¼‰ä¸€æ ·å¤§çš„æœ‰ç¬¦å·æ•´æ•°å’Œæ— ç¬¦å·æ•´æ•°</td><td><code>137</code>ã€<code>-0b0101_0010isize</code>ã€<code>0xffff_fc00usize</code></td></tr><tr><td><code>f32</code>ã€<code>f64</code></td><td>å•ç²¾åº¦ IEEE æµ®ç‚¹æ•°å’ŒåŒç²¾åº¦ IEEE æµ®ç‚¹æ•°</td><td><code>1.61803</code>ã€<code>3.14f32</code>ã€<code>6.0221e23f64</code></td></tr><tr><td><code>bool</code></td><td>å¸ƒå°”å€¼</td><td><code>true</code>ã€<code>false</code></td></tr><tr><td><code>char</code></td><td>Unicode å­—ç¬¦ï¼Œ32 ä½å®½ï¼ˆ4 å­—èŠ‚ï¼‰</td><td><code>'*'</code>ã€<code>'\n'</code>ã€<code>'å­—'</code>ã€<code>'\x7f'</code>ã€<code>'\u&#123;...&#125;'</code>ï¼ˆUnicode è½¬ä¹‰ï¼‰</td></tr><tr><td><code>(char, u8, i32)</code></td><td>å…ƒç»„ï¼Œå…è®¸æ··åˆç±»å‹</td><td><code>('%', 0x7f, -1)</code></td></tr><tr><td><code>()</code></td><td>â€œå•å…ƒâ€ï¼ˆç©ºå…ƒç»„ï¼‰</td><td><code>()</code></td></tr><tr><td><code>struct S &#123; x: f32, y: f32 &#125;</code></td><td>å…·åå­—æ®µå‹ç»“æ„ä½“</td><td><code>S &#123; x: 120.0, y: 209.0 &#125;</code></td></tr><tr><td><code>struct T(i32, char);</code></td><td>å…ƒç»„å‹ç»“æ„ä½“</td><td><code>T (120, 'X')</code></td></tr><tr><td><code>struct E;</code></td><td>å•å…ƒå‹ç»“æ„ä½“ï¼Œæ— å­—æ®µ</td><td><code>E</code></td></tr><tr><td><code>enum Attend &#123; OnTime, Late(u32) &#125;</code></td><td>æšä¸¾ï¼Œæˆ–ä»£æ•°æ•°æ®ç±»å‹</td><td><code>Attend::Late(5)</code>ã€<code>Attend::OnTime</code></td></tr><tr><td><code>Box&lt;Attend&gt;</code></td><td><code>Box</code>ï¼šæŒ‡å‘å †ä¸­å€¼çš„æ‹¥æœ‰å‹æŒ‡é’ˆ</td><td><code>Box::new(Late(15))</code></td></tr><tr><td><code>&amp;i32</code>ã€<code>&amp;mut i32</code></td><td>å…±äº«å¼•ç”¨å’Œå¯å˜å¼•ç”¨ï¼šéæ‹¥æœ‰å‹æŒ‡é’ˆï¼Œå…¶ç”Ÿå‘½å‘¨æœŸä¸èƒ½è¶…å‡ºå¼•ç”¨ç›®æ ‡</td><td><code>&amp;s.y</code>ã€<code>&amp;mut v</code></td></tr><tr><td><code>String</code></td><td>UTF-8 å­—ç¬¦ä¸²ï¼ŒåŠ¨æ€åˆ†é…å¤§å°</td><td><code>&quot; ãƒ©ãƒ¼ãƒ¡ãƒ³ : ramen&quot;.to_string()</code></td></tr><tr><td><code>&amp;str</code></td><td>å¯¹ <code>str</code> çš„å¼•ç”¨ï¼šæŒ‡å‘ UTF-8 æ–‡æœ¬çš„éæ‹¥æœ‰å‹æŒ‡é’ˆ</td><td><code>&quot; ãã° : soba&quot;</code>ã€<code>&amp;s[0..12]</code></td></tr><tr><td><code>[f64; 4]</code>ã€<code>[u8; 256]</code></td><td>æ•°ç»„ï¼Œå›ºå®šé•¿åº¦ï¼Œå…¶å…ƒç´ ç±»å‹éƒ½ç›¸åŒ</td><td><code>[1.0, 0.0, 0.0, 1.0]</code>ã€<code>[b' '; 256]</code></td></tr><tr><td><code>Vec&lt;f64&gt;</code></td><td>å‘é‡ï¼Œå¯å˜é•¿åº¦ï¼Œå…¶å…ƒç´ ç±»å‹éƒ½ç›¸åŒ</td><td><code>vec![0.367, 2.718, 7.389]</code></td></tr><tr><td><code>&amp;[u8]</code>ã€<code>*mut [u8]</code></td><td>å¯¹åˆ‡ç‰‡ï¼ˆæ•°ç»„æˆ–å‘é‡æŸä¸€éƒ¨åˆ†ï¼‰çš„å¼•ç”¨ï¼ŒåŒ…å«æŒ‡é’ˆå’Œé•¿åº¦</td><td><code>&amp;v[10..20]</code>ã€<code>&amp;mut a[..]</code></td></tr><tr><td><code>Option&lt;&amp;str&gt;</code></td><td>å¯é€‰å€¼ï¼šæˆ–è€…ä¸º <code>None</code>ï¼ˆæ— å€¼ï¼‰ï¼Œæˆ–è€…ä¸º <code>Some(v)</code>ï¼ˆæœ‰å€¼ï¼Œå…¶å€¼ä¸º <code>v</code>ï¼‰</td><td><code>Some(&quot;Dr.&quot;)</code>ã€<code>None</code></td></tr><tr><td><code>Result</code></td><td>å¯èƒ½å¤±è´¥çš„æ“ä½œç»“æœï¼šæˆ–è€…ä¸ºæˆåŠŸå€¼ <code>Ok(v)</code>ï¼Œæˆ–è€…ä¸ºé”™è¯¯å€¼ <code>Err(e)</code></td><td><code>Ok(4096)</code>ã€<code>Err(Error::last_os_error())</code></td></tr><tr><td><code>&amp;dyn Any</code>ã€<code>&amp;mut dyn Read</code></td><td>ç‰¹å‹å¯¹è±¡ï¼Œæ˜¯å¯¹ä»»ä½•å®ç°äº†ä¸€ç»„ç»™å®šæ–¹æ³•çš„å€¼çš„å¼•ç”¨</td><td><code>value as &amp;dyn Any</code>ã€<code>&amp;mut file as &amp;mut dyn Read</code></td></tr><tr><td><code>fn(&amp;str) -&gt; bool</code></td><td>å‡½æ•°æŒ‡é’ˆ</td><td><code>str::is_empty</code></td></tr><tr><td>ï¼ˆé—­åŒ…ç±»å‹æ²¡æœ‰æ˜¾å¼ä¹¦å†™å½¢å¼ï¼‰</td><td>é—­åŒ…</td><td>`</td></tr><tr><td><code>x..=y</code></td><td>åºåˆ—</td><td><code>1..=4</code></td></tr></tbody></table><h3 id="æ•´å‹">æ•´å‹</h3><table><thead><tr><th>å¤§å°</th><th>æœ‰ç¬¦å·</th><th>æ— ç¬¦å·</th></tr></thead><tbody><tr><td>8 ä½</td><td>i8</td><td>u8</td></tr><tr><td>16 ä½</td><td>i16</td><td>u16</td></tr><tr><td>32 ä½</td><td>i32</td><td>u32</td></tr><tr><td>64 ä½</td><td>i64</td><td>u64</td></tr><tr><td>128 ä½</td><td>i128</td><td>u128</td></tr><tr><td>è§†æ¶æ„è€Œå®š</td><td>isize</td><td>usize</td></tr></tbody></table><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">print_int_show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> integer<span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token number">2147483647</span><span class="token punctuation">;</span> <span class="token comment">// æœ€å¤§å€¼</span>    <span class="token keyword">let</span> integer<span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2147483648</span><span class="token punctuation">;</span> <span class="token comment">// æœ€å°å€¼</span>    <span class="token keyword">let</span> integer<span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token number">0x1F</span><span class="token punctuation">;</span> <span class="token comment">// åå…­è¿›åˆ¶</span>    <span class="token keyword">let</span> integer<span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token number">0o17</span><span class="token punctuation">;</span> <span class="token comment">// å…«è¿›åˆ¶</span>    <span class="token keyword">let</span> integer<span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token number">0b1111_0000</span><span class="token punctuation">;</span> <span class="token comment">// äºŒè¿›åˆ¶</span>    <span class="token keyword">let</span> integer<span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token number">1_000_000</span><span class="token punctuation">;</span> <span class="token comment">// ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”æ•°å­—</span>    <span class="token keyword">let</span> integer<span class="token punctuation">:</span> <span class="token keyword">u8</span> <span class="token operator">=</span> <span class="token char">b'A'</span><span class="token punctuation">;</span> <span class="token comment">// å­—ç¬¦è½¬æ¢ä¸ºæ•´æ•°</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æµ®ç‚¹å‹">æµ®ç‚¹å‹</h3><p>æµ®ç‚¹ç±»å‹æ•°æ•°å­—ï¼Œå¸¦æœ‰å°æ•°ç‚¹ï¼ŒåŸºæœ¬ä¸¤ç§ç±»å‹æ˜¯ï¼šf32å’Œf64</p><p>é»˜è®¤ä¸ºf64ï¼Œç²¾åº¦æ›´é«˜ï¼Œé€Ÿåº¦åŸºæœ¬å’Œf32ç›¸åŒ</p><p>ä½†æ˜¯ä¸€èˆ¬åœ¨åŒºå—é“¾åº”ç”¨ä¸­ï¼Œä¸€èˆ¬éƒ½ä½¿ç”¨i128ï¼Œ å› ä¸ºç²¾åº¦çš„é—®é¢˜</p><h4 id="ç²¾åº¦é—®é¢˜">ç²¾åº¦é—®é¢˜</h4><p>ç²¾åº¦é—®é¢˜ï¼ŒRust ä½œä¸ºä¸€é—¨æ³¨é‡å†…å­˜å®‰å…¨å’Œæ€§èƒ½çš„ç³»ç»Ÿçº§ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨å¤„ç†æ•°å€¼ç²¾åº¦æ—¶éµå¾ªæ˜ç¡®çš„è§„åˆ™ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›éœ€è¦å¼€å‘è€…æ³¨æ„çš„æ½œåœ¨é™·é˜±ã€‚</p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token macro property">assert_eq!</span><span class="token punctuation">(</span><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æµ®ç‚¹æ•°ç›¸åŠ  è¿™é‡Œä¼šfailed</span></code></pre><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"0.1 + 0.2 = &#123;:x&#125;"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>abc<span class="token number">.0</span> <span class="token operator">+</span> abc<span class="token number">.1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to_bits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"0.3 = &#123;:x&#125;"</span><span class="token punctuation">,</span> abc<span class="token number">.2</span><span class="token punctuation">.</span><span class="token function">to_bits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"0.1 + 0.2 = &#123;:x&#125;"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>xyz<span class="token number">.0</span> <span class="token operator">+</span> xyz<span class="token number">.1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to_bits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"0.3 = &#123;:x&#125;"</span><span class="token punctuation">,</span> xyz<span class="token number">.2</span><span class="token punctuation">.</span><span class="token function">to_bits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç»“æœï¼Œå‘ç°é«˜ç²¾åº¦çš„0.1 + 0.2 çš„ç»“æœå’Œ0.3çš„ç»“æœæ˜¯ä¸åŒçš„ã€‚</p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span> <span class="token operator">=</span> 3e99999a<span class="token number">0.3</span> <span class="token operator">=</span> 3e99999a<span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span> <span class="token operator">=</span> 3fd3333333333334<span class="token number">0.3</span> <span class="token operator">=</span> 3fd3333333333333</code></pre><p>è¿™å°±æ˜¯ç²¾åº¦é—®é¢˜ã€‚</p><h3 id="NAN">NAN</h3><p>NAN(Not a Number) ï¼Œ ç”¨æ¥å®šä¹‰å¦‚ä»¥ä¸‹è¿™ä¸ªå¹³æ–¹æ ¹ï¼Œè¿™ç§æ•°å­¦ä¸Šæœªå®šä¹‰çš„ç»“æœã€‚</p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">nan_example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> nan_value<span class="token punctuation">:</span> <span class="token keyword">f64</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.1_f64</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¡ç®—è´Ÿæ•°çš„å¹³æ–¹æ ¹</span>    <span class="token macro property">assert!</span><span class="token punctuation">(</span>nan_value<span class="token punctuation">.</span><span class="token function">is_nan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ£€æŸ¥æ˜¯å¦ä¸ºNaN</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"NaN: &#123;&#125;"</span><span class="token punctuation">,</span> nan_value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å¸ƒå°”ç±»å‹">å¸ƒå°”ç±»å‹</h3><p>å ä¸€ä¸ªå­—èŠ‚</p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">boolean_example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> f<span class="token punctuation">:</span> <span class="token keyword">bool</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"true: &#123;&#125;, false: &#123;&#125;"</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å­—ç¬¦">å­—ç¬¦</h3><p>å•å¼•å·å»å£°æ˜çš„ï¼Œunicodeå­—ç¬¦ä¹Ÿå¯ä»¥ä½œä¸ºRustçš„å­—ç¬¦ ï¼Œå ç”¨å››ä¸ªå­—èŠ‚</p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">char_example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> c<span class="token punctuation">:</span> <span class="token keyword">char</span> <span class="token operator">=</span> <span class="token char">'A'</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> emoji<span class="token punctuation">:</span> <span class="token keyword">char</span> <span class="token operator">=</span> 'ğŸ˜Š'<span class="token punctuation">;</span><span class="token comment">// unicodeå­—ç¬¦ä¹Ÿå¯ä»¥ä½œä¸ºRustçš„å­—ç¬¦</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"char: &#123;&#125;, emoji: &#123;&#125;"</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> emoji<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="åºåˆ—">åºåˆ—</h3><p>åŒ…å«éœ€è¦åŠ ä¸Š<code>=</code></p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">_sequence_example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> seq <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">..=</span><span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// åŒ…å«5çš„èŒƒå›´</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> seq <span class="token punctuation">&#123;</span>        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Sequence: &#123;&#125;"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="ç±»å‹å¼ºè½¬">ç±»å‹å¼ºè½¬</h3><p>aså…³é”®å­—ç”¨äºåœ¨åŸå§‹ç±»å‹ä¹‹é—´è¿›è¡Œç±»å‹è½¬æ¢ï¼Œä¸é€‚ç”¨äºå¤åˆç±»å‹ï¼Œæ¯”å¦‚Stringæˆ–å…¶ä»–è‡ªå®šä¹‰ç±»å‹</p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">convert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> a<span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> b<span class="token punctuation">:</span> <span class="token keyword">f64</span> <span class="token operator">=</span> a <span class="token keyword">as</span> <span class="token keyword">f64</span><span class="token punctuation">;</span> <span class="token comment">// å°†i32è½¬æ¢ä¸ºf64</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Converted value: &#123;&#125;"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> c<span class="token punctuation">:</span> <span class="token keyword">f64</span> <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> d<span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> c <span class="token keyword">as</span> <span class="token keyword">i32</span><span class="token punctuation">;</span> <span class="token comment">// å°†f64è½¬æ¢ä¸ºi32</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Converted value: &#123;&#125;"</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="æ‰€æœ‰æƒ">æ‰€æœ‰æƒ</h2><blockquote><p>é›¶å¼€é”€å†…å­˜å›æ”¶çš„ä¸€ç§é«˜æ•ˆå®ç°æ–¹å¼</p></blockquote><p>Rustæ˜¯ä¸€ç§ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ï¼Œå…¶è®¾è®¡ç›®çš„æ˜¯ç¡®ä¿å†…å­˜å®‰å…¨å¹¶é˜²æ­¢æ•°æ®ç«äº‰ï¼Œè€Œä¸ä¾èµ–åƒåœ¾å›æ”¶å™¨ã€‚è¿™ç§å†…å­˜å®‰å…¨æ€§ä¸»è¦é€šè¿‡æ‰€æœ‰æƒç³»ç»Ÿæ¥è¿›è¡Œå®ç°ã€‚</p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦æ‰€æœ‰æƒï¼Ÿ">ä¸ºä»€ä¹ˆéœ€è¦æ‰€æœ‰æƒï¼Ÿ</h3><p>åœ¨ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå†…å­˜ç®¡ç†ä¸€ç›´æ˜¯æ ¸å¿ƒæŒ‘æˆ˜ï¼š</p><ul><li><strong>æ‰‹åŠ¨ç®¡ç†ï¼ˆå¦‚ C/C++ï¼‰</strong>ï¼šå¼€å‘è€…éœ€æ‰‹åŠ¨åˆ†é…å’Œé‡Šæ”¾å†…å­˜ï¼Œæ˜“å‡ºç°æ‚¬ç©ºæŒ‡é’ˆã€å†…å­˜æ³„æ¼ç­‰é—®é¢˜ã€‚</li><li><strong>åƒåœ¾å›æ”¶ï¼ˆå¦‚ Java/Goï¼‰</strong>ï¼šè‡ªåŠ¨å›æ”¶ä¸å†ä½¿ç”¨çš„å†…å­˜ï¼Œä½†å¸¦æ¥è¿è¡Œæ—¶å¼€é”€å’Œä¸å¯é¢„æµ‹çš„åœé¡¿ã€‚</li></ul><p>Rust é€šè¿‡<strong>æ‰€æœ‰æƒç³»ç»Ÿ</strong>åœ¨ç¼–è¯‘æœŸè§£å†³å†…å­˜å®‰å…¨é—®é¢˜ï¼Œæ— éœ€åƒåœ¾å›æ”¶ï¼ŒåŒæ—¶ä¿æŒé«˜æ€§èƒ½ã€‚</p><h3 id="åŸºæœ¬è§„åˆ™">åŸºæœ¬è§„åˆ™</h3><ol><li>æ¯ä¸€ä¸ªå€¼éƒ½æœ‰æ‰€æœ‰è€…(owner);</li><li>åœ¨ä»»ä¸€æ—¶åˆ»ï¼Œå€¼éƒ½åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…;</li><li>å½“æ‰€æœ‰è€…ç¦»å¼€ä½œç”¨åŸŸ(scope),å€¼ä¼šè¢«ä¸¢å¼ƒ(drop);</li></ol><h3 id="moveè¯­ä¹‰">moveè¯­ä¹‰</h3><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">_ownership_example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> s1<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> s2<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> s1<span class="token punctuation">;</span> <span class="token comment">// è½¬ç§»æ‰€æœ‰æƒ</span>    <span class="token comment">// println!("&#123;&#125;", s1); // æ­¤å¤„ä¼šæŠ¥é”™ï¼Œå› ä¸ºs1çš„æ‰€æœ‰æƒå·²è½¬ç§»</span>    <span class="token function">drop</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// rustä¸­å¯ä»¥æ‰‹åŠ¨é‡Šæ”¾èµ„æº,ä½†é€šå¸¸ä¸éœ€è¦è¿™æ ·åš,å› ä¸ºRustä¼šåœ¨å˜é‡è¶…å‡ºä½œç”¨åŸŸæ—¶è‡ªåŠ¨é‡Šæ”¾èµ„æº; æ³¨æ„s1è¿™ä¸ªæ—¶å€™å·²ç»æ˜¯ç±»ä¼¼ç©ºæŒ‡é’ˆçš„çŠ¶æ€ï¼Œä¹Ÿä¸éœ€è¦å»é‡Šæ”¾</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125;"</span><span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="copyè¯­ä¹‰">copyè¯­ä¹‰</h3><p>åŸºæœ¬æ•°æ®ç±»å‹</p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> y <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// x çš„å€¼è¢«å¤åˆ¶åˆ° y</span>        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"x = &#123;&#125;, y = &#123;&#125;"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸¤ä¸ªå˜é‡éƒ½æœ‰æ•ˆ</span><span class="token punctuation">&#125;</span></code></pre><h2 id="ç»ƒä¹ ">ç»ƒä¹ </h2><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token comment">// ç”¨ä¸¤ç§æ–¹æ³•æ‰“å°æˆåŠŸs1 å’Œs2çš„å€¼</span>    <span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Hello, Rust!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token namespace">ownership<span class="token punctuation">::</span></span><span class="token function">take_ownership</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//ä»¥ä¸‹ä»£ç ä¸èƒ½ä¿®æ”¹</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125;"</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125;"</span><span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="ç¬¬ä¸€ç§æ–¹æ³•">ç¬¬ä¸€ç§æ–¹æ³•</h3><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token comment">// ç¬¬ä¸€ç§æ–¹æ³•</span>    <span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Hello, Rust!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">take_ownership</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä½¿ç”¨cloneæ–¹æ³•å¤åˆ¶s1</span>    <span class="token comment">//ä»¥ä¸‹ä»£ç ä¸èƒ½ä¿®æ”¹</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125;"</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125;"</span><span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">take_ownership</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">String</span> <span class="token punctuation">&#123;</span>    s <span class="token comment">// è¿”å›çš„æ˜¯ sçš„å…‹éš†</span><span class="token punctuation">&#125;</span></code></pre><h3 id="ç¬¬äºŒç§æ–¹æ³•">ç¬¬äºŒç§æ–¹æ³•</h3><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token comment">// ç¬¬äºŒç§æ–¹æ³•</span>    <span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Hello, Rust!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">take_ownership</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¼ é€’s1çš„å¼•ç”¨</span>    <span class="token comment">//ä»¥ä¸‹ä»£ç ä¸èƒ½ä¿®æ”¹</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125;"</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125;"</span><span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// ä¼ å…¥ç±»å‹æ”¹ä¸ºå¼•ç”¨ç±»å‹</span><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">take_ownership</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">String</span> <span class="token punctuation">&#123;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Taking ownership of: &#123;&#125;"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>    s<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// è¿”å›sçš„å…‹éš†</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Web3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RuståŸºç¡€[part3]_å‡½æ•°ã€æµç¨‹æ§åˆ¶</title>
      <link href="/2025/07/10/Rust%E5%9F%BA%E7%A1%80-part3-%E5%87%BD%E6%95%B0/"/>
      <url>/2025/07/10/Rust%E5%9F%BA%E7%A1%80-part3-%E5%87%BD%E6%95%B0/</url>
      <cover>https://img.soniachen.com/blog/posts/2025/07/image-20250710224443048.png</cover>
      <date>Thu Jul 10 2025 11:44:48 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>RuståŸºç¡€[part3]_å‡½æ•°ã€æµç¨‹æ§åˆ¶</h1><h2 id="å‡½æ•°">å‡½æ•°</h2><h3 id="ç»„æˆå’Œå®šä¹‰">ç»„æˆå’Œå®šä¹‰</h3><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">,</span> j<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">i32</span> <span class="token punctuation">&#123;</span>    i <span class="token operator">+</span> j<span class="token punctuation">&#125;</span></code></pre><ul><li>å£°æ˜å‡½æ•°çš„å…³é”®å­—<code> fn</code></li><li>å‡½æ•°å<code>add()</code></li><li>å‚æ•°iå’Œjå’Œå‚æ•°ç±»å‹ <code>i32</code></li><li>è¿”å›å€¼ç±»å‹`i32``</li><li>å‡½æ•°é¢˜<code>i+j</code></li></ul><h3 id="å‡½æ•°è¿”å›">å‡½æ•°è¿”å›</h3><h4 id="è¿”å›å½¢æ€">è¿”å›å½¢æ€</h4><p><code>i+j</code> å’Œ <code>return i+j;</code></p><p>å¯ä»¥æœ‰ä¸¤ç§å½¢æ€</p><ul><li>return + åˆ†å·</li><li>æ— return + æ— åˆ†å·</li></ul><h4 id="æ— è¿”å›å€¼çš„æƒ…å†µï¼š"><strong>æ— è¿”å›å€¼çš„æƒ…å†µ</strong>ï¼š</h4><p>å°±è¿”å› <code>()</code></p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">,</span> j<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">&#125;</span></code></pre><h4 id="æ°¸ä¸è¿”å›å€¼çš„æƒ…å†µï¼š">æ°¸ä¸è¿”å›å€¼çš„æƒ…å†µï¼š</h4><p><code>!</code>è¡¨ç¤ºå‡½æ•°æ°¸ä¸è¿”å›ï¼Œä¾‹å¦‚<code>panic!</code>å®ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼Œå‡½æ•°ä¸ä¼šè¿”å›ã€‚</p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">add_one</span><span class="token punctuation">(</span>i<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">,</span> j<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">!</span> <span class="token punctuation">&#123;</span>    <span class="token macro property">panic!</span><span class="token punctuation">(</span><span class="token string">"weeee"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>æ­»å¾ªç¯ä¹Ÿä¸ä¼šè¿”å›</p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">infinite_loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">!</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">loop</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// æ°¸è¿œä¸ä¼šè¿”å›</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="æµç¨‹æ§åˆ¶">æµç¨‹æ§åˆ¶</h2><h3 id="ifè¯­æ³•">ifè¯­æ³•</h3><pre class="language-rust" data-language="rust"><code class="language-rust"> <span class="token comment">// if_else();</span>  <span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> number <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token punctuation">&#123;</span>      <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Condition was true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Condition was false"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token comment">// else if</span><span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> number <span class="token operator">%</span> <span class="token number">4</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">&#123;</span>      <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Condition was true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> number <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>      <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Condition was true for number % 3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> number <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>      <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Condition was true for number % 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Condition was false"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span></code></pre><p>let è¯­å¥ä¸­ä½¿ç”¨ifï¼Œéœ€è¦æ³¨æ„åˆ†å·ç»“å°¾ã€‚</p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">let</span> condition <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>   <span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token keyword">if</span> condition <span class="token punctuation">&#123;</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token number">6</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>   <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"The value of number is: &#123;&#125;"</span><span class="token punctuation">,</span> number<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="loopå¾ªç¯">loopå¾ªç¯</h3><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token comment">//loop å¾ªç¯</span>    <span class="token keyword">loop</span> <span class="token punctuation">&#123;</span>        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"This is an infinite loop"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h4 id="breakã€-continue">breakã€ continue</h4><p>ä½¿ç”¨break å…³é”®å­—æ¥å‘Šè¯‰ç¨‹åºåœæ­¢å¾ªç¯ï¼Œä½¿ç”¨continueå…³é”®å­—æ¥å‘Šè¯‰ç¨‹åºç»§ç»­å¾ªç¯ã€‚</p><p>letè¯­å¥ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨loopè¿”å›, éœ€è¦æ³¨æ„åˆ†å·ç»“å°¾ã€‚</p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token comment">// letè¯­å¥ä¸­ä½¿ç”¨loop</span>   <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">loop</span> <span class="token punctuation">&#123;</span>       count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>       <span class="token keyword">if</span> count <span class="token operator">==</span> <span class="token number">10</span> <span class="token punctuation">&#123;</span>           <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Breaking the loop at count: &#123;&#125;"</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token keyword">break</span> count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å›å€¼</span>       <span class="token punctuation">&#125;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h4 id="å¤šå±‚loop">å¤šå±‚loop</h4><p>breaké€€å‡ºå†…å±‚å¾ªç¯ï¼Œå¯ä»¥ä½¿ç”¨å‘½åloopçš„æ–¹æ³•æ¥é€€å‡ºæŒ‡å®šçš„å¾ªç¯ã€‚æ ‡ç­¾çš„è¯­æ³•æ˜¯ä½¿ç”¨å•å¼•å·ï¼ˆ'ï¼‰åè·Ÿä¸€ä¸ªæ ‡è¯†ç¬¦</p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token comment">// å¤šå±‚å¾ªç¯å¯ä»¥ä½¿ç”¨æ ‡ç­¾æ¥æ§åˆ¶è·³å‡ºç‰¹å®šçš„å¾ªç¯å±‚çº§</span>   <span class="token comment">// æ ‡ç­¾å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨å¤šå±‚åµŒå¥—å¾ªç¯ä¸­è·³å‡ºç‰¹å®šçš„å¾ªç¯å±‚çº§</span>   <span class="token comment">// æ ‡ç­¾çš„è¯­æ³•æ˜¯ä½¿ç”¨å•å¼•å·ï¼ˆ'ï¼‰åè·Ÿä¸€ä¸ªæ ‡è¯†ç¬¦</span>   <span class="token keyword">let</span> <span class="token keyword">mut</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token lifetime-annotation symbol">'outerloop</span><span class="token punctuation">:</span> <span class="token keyword">loop</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">loop</span> <span class="token punctuation">&#123;</span>           i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>           <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Inner loop iteration with i: &#123;&#125;"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">2</span> <span class="token punctuation">&#123;</span>               <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Breaking out of the inner loop at i: &#123;&#125;"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// è·³å‡ºå†…å±‚å¾ªç¯</span>           <span class="token punctuation">&#125;</span>           <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">3</span> <span class="token punctuation">&#123;</span>               <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Breaking out of the outer loop at i: &#123;&#125;"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">break</span> <span class="token lifetime-annotation symbol">'outerloop</span><span class="token punctuation">;</span> <span class="token comment">// è·³å‡ºå¤–å±‚å¾ªç¯</span>           <span class="token punctuation">&#125;</span>       <span class="token punctuation">&#125;</span>   <span class="token punctuation">&#125;</span></code></pre><h3 id="while-æ¡ä»¶å¾ªç¯">while æ¡ä»¶å¾ªç¯</h3><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">while_example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> count<span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> count <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token punctuation">&#123;</span>        count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Current count: &#123;&#125;"</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>åœ¨rustä¸­å¦‚æœæ˜¯æ¡ä»¶åˆ¤æ–­çš„å¾ªç¯ï¼Œä½¿ç”¨whileæ˜¯æ¯”è¾ƒä¾¿æ·çš„ï¼Œå¦‚æœéœ€è¦éå†é›†åˆçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨for</p><h3 id="foréå†é›†åˆ">foréå†é›†åˆ</h3><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">for_example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> numbers <span class="token punctuation">&#123;</span>        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Current number: &#123;&#125;"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// ç›´æ¥éå†æ•°å€¼ï¼Œé€†åºä½¿ç”¨rev()</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rev</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Current number in range: &#123;&#125;"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="æ‰€æœ‰æƒè½¬ç§»ä¸å€Ÿç”¨ï¼š">æ‰€æœ‰æƒè½¬ç§»ä¸å€Ÿç”¨ï¼š</h4><p>æ˜¯Rustä¸­çš„å¾ªç¯è®¿é—®è§„åˆ™</p><h5 id="1-æœªå®ç°Copy-traitçš„ç±»å‹ï¼šæ‰€æœ‰æƒä¼šè½¬ç§»ï¼ˆMoveè¯­ä¹‰ï¼‰">1. æœªå®ç°<code>Copy</code> traitçš„ç±»å‹ï¼šæ‰€æœ‰æƒä¼šè½¬ç§»ï¼ˆMoveè¯­ä¹‰ï¼‰</h5><p>åƒ<code>Vec</code>è¿™ç±»é›†åˆç±»å‹<strong>æ²¡æœ‰å®ç°<code>Copy</code> trait</strong>ï¼Œå½“ç›´æ¥ç”¨å®ƒä»¬è¿›è¡Œå¾ªç¯éå†ï¼ˆ<code>for v in vec</code>ï¼‰æ—¶ï¼Œå¾ªç¯ä¼šè·å–<code>vec</code>çš„æ‰€æœ‰æƒï¼ˆå³â€œæ‰€æœ‰æƒè½¬ç§»â€ï¼‰ã€‚</p><ul><li>å¾ªç¯ç»“æŸåï¼Œ<code>vec</code>çš„æ‰€æœ‰æƒå·²è¢«æ¶ˆè€—ï¼Œæ— æ³•å†è¢«è®¿é—®ï¼ˆç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼‰ã€‚</li></ul><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">let</span> <span class="token keyword">mut</span> vec <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// ç›´æ¥éå†vecï¼šæ‰€æœ‰æƒè½¬ç§»ç»™å¾ªç¯å˜é‡v</span><span class="token keyword">for</span> v <span class="token keyword">in</span> vec <span class="token punctuation">&#123;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Current value: &#123;&#125;"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ­¤æ—¶væ˜¯vecä¸­å…ƒç´ çš„æ‰€æœ‰æƒæŒæœ‰è€…</span><span class="token punctuation">&#125;</span><span class="token comment">// âŒ é”™è¯¯ï¼švecçš„æ‰€æœ‰æƒå·²è½¬ç§»ï¼Œæ— æ³•å†ä½¿ç”¨</span><span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Vector after loop: &#123;:?&#125;"</span><span class="token punctuation">,</span> vec<span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre><h5 id="2-è§£å†³åŠæ³•ï¼šç”¨â€œå€Ÿç”¨â€é¿å…æ‰€æœ‰æƒè½¬ç§»">2. è§£å†³åŠæ³•ï¼šç”¨â€œå€Ÿç”¨â€é¿å…æ‰€æœ‰æƒè½¬ç§»</h5><p>è‹¥æƒ³åœ¨å¾ªç¯åç»§ç»­ä½¿ç”¨<code>vec</code>ï¼Œéœ€é€šè¿‡<strong>å¼•ç”¨ï¼ˆ&amp;ï¼‰</strong> è¿›è¡Œâ€œå€Ÿç”¨â€ï¼Œè€Œéç›´æ¥è½¬ç§»æ‰€æœ‰æƒã€‚æ ¹æ®æ˜¯å¦éœ€è¦ä¿®æ”¹å…ƒç´ ï¼Œåˆ†ä¸ºä¸¤ç§å€Ÿç”¨æ–¹å¼ï¼š</p><h6 id="ï¼ˆ1ï¼‰ä¸å¯å˜å€Ÿç”¨ï¼ˆ-vecï¼‰ï¼šä»…è¯»å–ï¼Œä¸ä¿®æ”¹">ï¼ˆ1ï¼‰ä¸å¯å˜å€Ÿç”¨ï¼ˆ<code>&amp;vec</code>ï¼‰ï¼šä»…è¯»å–ï¼Œä¸ä¿®æ”¹</h6><p>ç”¨<code>&amp;vec</code>è¿›è¡Œéå†ï¼Œå¾ªç¯è·å–çš„æ˜¯<code>vec</code>çš„<strong>ä¸å¯å˜å¼•ç”¨</strong>ï¼Œæ‰€æœ‰æƒä»å½’åŸå˜é‡æ‰€æœ‰ã€‚</p><ul><li>å¾ªç¯ä¸­åªèƒ½è¯»å–å…ƒç´ ï¼Œä¸èƒ½ä¿®æ”¹ã€‚</li></ul><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">let</span> vec <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// ä¸å¯å˜å€Ÿç”¨ï¼š&amp;vecè¡¨ç¤ºâ€œä¸´æ—¶å€Ÿç”¨vecçš„è¯»å–æƒâ€</span><span class="token keyword">for</span> v <span class="token keyword">in</span> <span class="token operator">&amp;</span>vec <span class="token punctuation">&#123;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Current value: &#123;&#125;"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// væ˜¯&amp;i32ç±»å‹ï¼ˆä¸å¯å˜å¼•ç”¨ï¼‰</span><span class="token punctuation">&#125;</span><span class="token comment">// âœ… åˆæ³•ï¼švecæ‰€æœ‰æƒæœªè½¬ç§»ï¼Œå¯ç»§ç»­ä½¿ç”¨</span><span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Vector after loop: &#123;:?&#125;"</span><span class="token punctuation">,</span> vec<span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre><h6 id="ï¼ˆ2ï¼‰å¯å˜å€Ÿç”¨ï¼ˆ-mut-vecï¼‰ï¼šéœ€è¦ä¿®æ”¹å…ƒç´ ">ï¼ˆ2ï¼‰å¯å˜å€Ÿç”¨ï¼ˆ<code>&amp;mut vec</code>ï¼‰ï¼šéœ€è¦ä¿®æ”¹å…ƒç´ </h6><p>è‹¥è¦åœ¨å¾ªç¯ä¸­ä¿®æ”¹å…ƒç´ ï¼Œéœ€ç”¨<code>&amp;mut vec</code>è¿›è¡Œ<strong>å¯å˜å€Ÿç”¨</strong>ï¼Œæ­¤æ—¶å¾ªç¯å˜é‡<code>v</code>æ˜¯<code>&amp;mut i32</code>ï¼ˆå¯å˜å¼•ç”¨ï¼‰ã€‚</p><ul><li>ä¿®æ”¹å…ƒç´ æ—¶éœ€ç”¨<code>*v</code>è§£å¼•ç”¨ï¼ˆè·å–å¼•ç”¨æŒ‡å‘çš„å®é™…å€¼ï¼‰ã€‚</li></ul><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">let</span> <span class="token keyword">mut</span> vec <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// å¯å˜å€Ÿç”¨ï¼š&amp;mut vecè¡¨ç¤ºâ€œä¸´æ—¶å€Ÿç”¨vecçš„ä¿®æ”¹æƒâ€</span><span class="token keyword">for</span> v <span class="token keyword">in</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> vec <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token operator">*</span>v <span class="token operator">==</span> <span class="token number">3</span> <span class="token punctuation">&#123;</span>        <span class="token operator">*</span>v <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// âœ… è§£å¼•ç”¨åä¿®æ”¹ï¼š3 â†’ 13</span>    <span class="token punctuation">&#125;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Current value: &#123;&#125;"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// væ˜¯&amp;mut i32ï¼Œæ‰“å°æ—¶è‡ªåŠ¨è§£å¼•ç”¨</span><span class="token punctuation">&#125;</span><span class="token comment">// âœ… åˆæ³•ï¼šæ‰€æœ‰æƒæœªè½¬ç§»ï¼Œä¿®æ”¹åçš„å€¼å·²ä¿ç•™</span><span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Vector after loop: &#123;:?&#125;"</span><span class="token punctuation">,</span> vec<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡º [1, 2, 13, 4, 5]</span></code></pre><h5 id="3-å®ç°Copy-traitçš„ç±»å‹ï¼šæ‰€æœ‰æƒä¸è½¬ç§»ï¼ˆCopyè¯­ä¹‰ï¼‰">3. å®ç°<code>Copy</code> traitçš„ç±»å‹ï¼šæ‰€æœ‰æƒä¸è½¬ç§»ï¼ˆCopyè¯­ä¹‰ï¼‰</h5><p>åƒæ•´æ•°ã€å¸ƒå°”å€¼ç­‰<strong>åŸºæœ¬æ•°æ®ç±»å‹</strong>ï¼Œä»¥åŠç”±å®ƒä»¬ç»„æˆçš„æ•°ç»„ï¼ˆ<code>[i32; n]</code>ï¼‰ï¼Œéƒ½<strong>å®ç°äº†<code>Copy</code> trait</strong>ã€‚</p><ul><li>å¾ªç¯éå†è¿™ç±»ç±»å‹æ—¶ï¼Œä¼šè‡ªåŠ¨å¤åˆ¶å…ƒç´ ï¼ˆè€Œéè½¬ç§»æ‰€æœ‰æƒï¼‰ï¼ŒåŸå˜é‡çš„æ‰€æœ‰æƒä»ä¿ç•™ï¼Œå¾ªç¯åå¯æ­£å¸¸ä½¿ç”¨ã€‚</li></ul><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// æ•°ç»„å…ƒç´ æ˜¯i32ï¼ˆå®ç°äº†Copyï¼‰</span><span class="token comment">// éå†arrï¼šä¼šå¤åˆ¶æ¯ä¸ªå…ƒç´ ç»™vï¼Œè€Œéè½¬ç§»æ‰€æœ‰æƒ</span><span class="token keyword">for</span> v <span class="token keyword">in</span> arr <span class="token punctuation">&#123;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Current value: &#123;&#125;"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// væ˜¯å¤åˆ¶çš„i32å€¼</span><span class="token punctuation">&#125;</span><span class="token comment">// âœ… åˆæ³•ï¼šarrçš„æ‰€æœ‰æƒæœªè½¬ç§»ï¼Œå¯ç»§ç»­ä½¿ç”¨</span><span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Array after loop: &#123;:?&#125;"</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡º [1, 2, 3, 4, 5]</span></code></pre><h5 id="æ ¸å¿ƒåŒºåˆ«æ€»ç»“">æ ¸å¿ƒåŒºåˆ«æ€»ç»“</h5><table><thead><tr><th>ç±»å‹ç‰¹å¾</th><th>å¾ªç¯æ–¹å¼</th><th>æ‰€æœ‰æƒçŠ¶æ€</th><th>å¾ªç¯åèƒ½å¦ä½¿ç”¨åŸå˜é‡</th></tr></thead><tbody><tr><td>æœªå®ç°<code>Copy</code>ï¼ˆå¦‚<code>Vec</code>ï¼‰</td><td><code>for v in vec</code></td><td>æ‰€æœ‰æƒè½¬ç§»ç»™v</td><td>ä¸èƒ½ï¼ˆå·²è¢«æ¶ˆè€—ï¼‰</td></tr><tr><td>æœªå®ç°<code>Copy</code>ï¼ˆå¦‚<code>Vec</code>ï¼‰</td><td><code>for v in &amp;vec</code></td><td>ä»…å€Ÿå‡ºä¸å¯å˜å¼•ç”¨</td><td>èƒ½ï¼ˆæ‰€æœ‰æƒä»ä¿ç•™ï¼‰</td></tr><tr><td>æœªå®ç°<code>Copy</code>ï¼ˆå¦‚<code>Vec</code>ï¼‰</td><td><code>for v in &amp;mut vec</code></td><td>ä»…å€Ÿå‡ºå¯å˜å¼•ç”¨</td><td>èƒ½ï¼ˆæ‰€æœ‰æƒä»ä¿ç•™ï¼‰</td></tr><tr><td>å®ç°<code>Copy</code>ï¼ˆå¦‚<code>[i32; n]</code>ï¼‰</td><td><code>for v in arr</code></td><td>å…ƒç´ è¢«å¤åˆ¶ï¼Œæ‰€æœ‰æƒä¸è½¬ç§»</td><td>èƒ½ï¼ˆåŸå˜é‡æœªè¢«ä¿®æ”¹ï¼‰</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Web3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RuståŸºç¡€[part2]_å˜é‡å’Œå¯å˜ç±»å‹</title>
      <link href="/2025/07/10/Rust%E5%9F%BA%E7%A1%80-part2-%E5%8F%98%E9%87%8F%E5%92%8C%E5%8F%AF%E5%8F%98%E7%B1%BB%E5%9E%8B/"/>
      <url>/2025/07/10/Rust%E5%9F%BA%E7%A1%80-part2-%E5%8F%98%E9%87%8F%E5%92%8C%E5%8F%AF%E5%8F%98%E7%B1%BB%E5%9E%8B/</url>
      <cover>https://img.soniachen.com/blog/posts/2025/07/image-20250710105710174.png</cover>
      <date>Thu Jul 10 2025 10:00:00 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>RuståŸºç¡€[part2]_å˜é‡å’Œå¯å˜ç±»å‹</h1><h2 id="å¯å˜å˜é‡ä¸ä¸å¯å˜å˜é‡">å¯å˜å˜é‡ä¸ä¸å¯å˜å˜é‡</h2><p>å¯ä»¥ä¸æŒ‡å®šæ•°æ®ç±»å‹</p><h3 id="å¯å˜å˜é‡â€”â€”mutable">å¯å˜å˜é‡â€”â€”mutable</h3><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">immutable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"The value of x is: &#123;&#125;"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="ä¸å¯å˜å˜é‡â€”â€”immutable">ä¸å¯å˜å˜é‡â€”â€”immutable</h3><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">mutable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> y <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"The value of y is: &#123;&#125;"</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    y <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"The value of y is now: &#123;&#125;"</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="å¸¸é‡â€”â€”constants">å¸¸é‡â€”â€”constants</h2><ul><li><p>éœ€è¦åˆ¶å®šæ˜ç¡®çš„æ•°æ®ç±»å‹ï¼Œå¹¶ä¸”éœ€è¦ä½¿ç”¨å¤§å†™å­—æ¯</p></li><li><p>éœ€è¦ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼è¿›è¡Œèµ‹å€¼</p></li><li><p>ä¸æ”¯æŒé‡å®šä¹‰ï¼ˆé®è”½ï¼‰<br><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250710101303874.png" alt="image-20250710101303874" style="zoom:33%;" /></p></li></ul><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">const</span> <span class="token constant">NUM</span><span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token constant">THREE_HOURS</span><span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span></code></pre><h2 id="ä¸å¯å˜é‡å’Œå¸¸é‡çš„åŒºåˆ«">ä¸å¯å˜é‡å’Œå¸¸é‡çš„åŒºåˆ«</h2><ul><li>å¸¸é‡åœ¨ç¼–è¯‘æœŸå°±å°±ç¡®å®šäº†å€¼ï¼Œä¸èƒ½åœ¨è¿è¡Œæ—¶è¿›è¡Œæ”¹å˜ï¼› ä¸å¯å˜é‡çŸ¥é“è¿è¡ŒæœŸæ‰èƒ½ç¡®è®¤ä¸‹æ¥ã€‚</li><li>å¸¸é‡ä¸å¯ä¿®æ”¹ï¼Œä¸å¯å˜å˜é‡å¯ä»¥é€šè¿‡shadowingæ¥è¿›è¡Œä¿®æ”¹</li><li>å¸¸é‡å¿…é¡»å£°æ˜ç±»å‹ï¼Œä¸å¯å˜å˜é‡ä¸éœ€è¦å£°æ˜ç±»å‹ã€‚</li><li>å¸¸é‡å¿…é¡»ä½¿ç”¨å¤§å†™å­—æ¯ã€‚</li></ul><h2 id="é™æ€å˜é‡â€”â€”static">é™æ€å˜é‡â€”â€”static</h2><p>éœ€è¦é€šè¿‡<code>mut</code>æ¥æŒ‡å®šå¯å˜ï¼Œ <code>unsafe</code> å—æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºé™æ€å˜é‡åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å¯èƒ½ä¼šå¼•å‘æ•°æ®ç«äº‰é—®é¢˜ã€‚</p><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">static</span> <span class="token keyword">mut</span> <span class="token constant">NUMBER</span><span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">fn</span> <span class="token function-definition function">static_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">unsafe</span> <span class="token punctuation">&#123;</span>        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"static NUMBER: &#123;&#125;"</span><span class="token punctuation">,</span> <span class="token constant">NUMBER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token comment">// è¿™é‡Œå¯ä»¥è®¿é—®é™æ€å˜é‡NUMBER </span><span class="token punctuation">&#125;</span></code></pre><h2 id="ä½œç”¨åŸŸscopeå’Œé®è”½shadowing">ä½œç”¨åŸŸscopeå’Œé®è”½shadowing</h2><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">binding</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ç»‘å®šç”Ÿå­˜äºmainå‡½æ•°ä¸­</span>    <span class="token keyword">let</span> long_lived_binding <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment">// ä»£ç å—ï¼Œ æ¯”mainå‡½æ•°æ‹¥æœ‰æ›´å°çš„ä½œç”¨åŸŸ</span>    <span class="token punctuation">&#123;</span>        <span class="token comment">// ç»‘å®šç”Ÿå­˜äºä»£ç å—ä¸­</span>        <span class="token comment">// è¿™é‡Œçš„short_lived_bindingåªåœ¨è¿™ä¸ªä»£ç å—ä¸­æœ‰æ•ˆ</span>        <span class="token keyword">let</span> short_lived_binding <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"short_lived_binding: &#123;&#125;"</span><span class="token punctuation">,</span> short_lived_binding<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é®è”½ï¼Œåœ¨ä½œç”¨åŸŸä¸­å¯ä»¥é®è”½æˆåŠŸ</span>        <span class="token keyword">let</span> short_lived_binding <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"short_lived_binding after shadowing: &#123;&#125;"</span><span class="token punctuation">,</span> short_lived_binding<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"long_lived_binding: &#123;&#125;"</span><span class="token punctuation">,</span> long_lived_binding<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é®è”½é•¿æœŸç»‘å®šçš„å˜é‡</span>        <span class="token comment">// è¿™é‡Œçš„long_lived_bindingä¼šé®è”½å¤–å±‚çš„åŒåå˜é‡</span>        <span class="token keyword">let</span> long_lived_binding <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"long_lived_binding after shadowing: &#123;&#125;"</span><span class="token punctuation">,</span> long_lived_binding<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"long_lived_binding after block: &#123;&#125;"</span><span class="token punctuation">,</span> long_lived_binding<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// println!("short_lived_binding after block: &#123;&#125;", short_lived_binding); // è¿™é‡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºshort_lived_bindingåœ¨ä»£ç å—å¤–ä¸å¯è§</span>    <span class="token comment">// é®è”½é•¿æœŸç»‘å®šçš„å˜é‡</span>    <span class="token keyword">let</span> long_lived_binding <span class="token operator">=</span> <span class="token number">5_f32</span><span class="token punctuation">;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"long_lived_binding after shadowing: &#123;&#125;"</span><span class="token punctuation">,</span> long_lived_binding<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Web3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RuståŸºç¡€[part1]</title>
      <link href="/2025/07/08/Rust%E5%9F%BA%E7%A1%80-part1/"/>
      <url>/2025/07/08/Rust%E5%9F%BA%E7%A1%80-part1/</url>
      <cover>https://img.soniachen.com/blog/posts/2025/07/image-20250708170114528.png</cover>
      <date>Tue Jul 08 2025 14:22:04 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>RuståŸºç¡€[part1]</h1><h2 id="å®‰è£…">å®‰è£…</h2><pre class="language-bash" data-language="bash"><code class="language-bash">âœ  rust <span class="token function">curl</span> <span class="token parameter variable">--proto</span> <span class="token string">'=https'</span> <span class="token parameter variable">--tlsv1.2</span> https://sh.rustup.rs <span class="token parameter variable">-sSf</span> <span class="token operator">|</span> <span class="token function">sh</span></code></pre><p>å®‰è£…æˆåŠŸ</p><p><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250708143222926.png" alt=""></p><h3 id="éªŒè¯">éªŒè¯</h3><pre class="language-bash" data-language="bash"><code class="language-bash">âœ  rust rustc <span class="token parameter variable">--version</span>zsh: <span class="token builtin class-name">command</span> not found: rustc</code></pre><p>å› ä¸ºæˆ‘æ˜¯ç”¨çš„æ˜¯zshï¼Œæ‰€ä»¥zshé…ç½®æ–‡ä»¶éœ€è¦åŠ å…¥é…ç½®</p><pre class="language-bash" data-language="bash"><code class="language-bash">âœ  rust <span class="token builtin class-name">echo</span> <span class="token string">'export PATH="$HOME/.cargo/bin:$PATH"'</span> <span class="token operator">>></span> ~/.zshrcâœ  rust <span class="token builtin class-name">source</span> ~/.zshrc</code></pre><pre class="language-bash" data-language="bash"><code class="language-bash">âœ  rust rustc <span class="token parameter variable">--version</span>rustc <span class="token number">1.88</span>.0 <span class="token punctuation">(</span>6b00bc388 <span class="token number">2025</span>-06-23<span class="token punctuation">)</span></code></pre><p>å®‰è£…æˆåŠŸï¼</p><p>å…¶ä»–å‘½ä»¤ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">âœ  rust rustup update <span class="token comment"># å®‰è£…</span>âœ  rust rustup self uninstall <span class="token comment"># å¸è½½</span></code></pre><h2 id="VsCodeæ’ä»¶">VsCodeæ’ä»¶</h2><p>rustè¯­è¨€æ”¯æŒï¼š</p><p><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250708144849314.png" alt="image-20250708144849314"></p><p>ruståŒ…æ”¯æŒï¼š</p><p><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250708145332281.png" alt="image-20250708145332281"></p><p>tomlæ”¯æŒï¼š</p><p><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250708145320438.png" alt="image-20250708145320438"></p><h2 id="rustc">rustc</h2><h3 id="åˆ›å»ºç›®å½•">åˆ›å»ºç›®å½•</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> hello-world<span class="token builtin class-name">cd</span> hello-world</code></pre><h3 id="åˆ›å»ºæºæ–‡ä»¶main-rs"><a href="http://xn--main-p85fp0o980al5l0yt.rs">åˆ›å»ºæºæ–‡ä»¶main.rs</a></h3><pre class="language-rust" data-language="rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Hello, world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç»ˆç«¯è¾“å…¥ <code>rustc main.rs</code> ä¼šå¾—åˆ°ä¸€ä¸ªäºŒè¿›åˆ¶çš„æ–‡ä»¶<code>mian</code></p><p>æ‰§è¡Œmian ä¼šå¾—åˆ°è¾“å‡º</p><p><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250708154103948.png" alt="image-20250708154103948"></p><h2 id="cargo">cargo</h2><h3 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h3><ul><li><p>åˆå§‹åŒ–é¡¹ç›® <code>cargo new [é¡¹ç›®å] </code></p></li><li><p>æ„å»º <code>cargo build</code>å¹¶è¿è¡Œ<code>./target/debug/hello_cargo </code>ï¼›æˆ–è€…ç›´æ¥ä½¿ç”¨<code>cargo run</code></p></li></ul><p>å½“é¡¹ç›®æœ€ç»ˆå‡†å¤‡å¥½å‘å¸ƒæ—¶ï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯¹ Rust é¡¹ç›®è¿›è¡Œ<strong>ä¼˜åŒ–ç¼–è¯‘</strong>ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">cargo</span> build <span class="token parameter variable">--release</span>  </code></pre><ul><li><strong>è¾“å‡ºç›®å½•</strong>ï¼šç¼–è¯‘äº§ç‰©ä¼šç”Ÿæˆåœ¨ <code>target/release</code> ç›®å½•ä¸‹ï¼ˆå¼€å‘é˜¶æ®µé»˜è®¤çš„ <code>cargo build</code> ä¼šè¾“å‡ºåˆ° <code>target/debug</code>ï¼‰ã€‚</li><li><strong>ä¼˜åŒ–ç‰¹æ€§</strong>ï¼š<code>--release</code> ä¼šå¯ç”¨ Rust ç¼–è¯‘å™¨çš„æ€§èƒ½ä¼˜åŒ–ï¼ˆå¦‚ä»£ç å†…è”ã€å¾ªç¯å±•å¼€ã€å†—ä½™ä»£ç æ¶ˆé™¤ç­‰ï¼‰ï¼Œä½¿æœ€ç»ˆç¨‹åºçš„è¿è¡Œé€Ÿåº¦æ˜¾è‘—æå‡ã€‚</li></ul><h2 id="ä¾èµ–">ä¾èµ–</h2><p>crateæ˜¯Rustçš„ä¸€ä¸ªä»£ç åº“ï¼Œå¯ä»¥åŒ…å«ä»»æ„èƒ½è¢«å…¶ä»–ç¨‹åºä½¿ç”¨çš„ä»£ç ï¼Œä½†æ˜¯ä¸èƒ½åªæ‰§è¡Œã€‚</p><p><code>cargo.toml</code>ä¸­ <code>[dependencies]</code>  å¢åŠ é…ç½®</p><pre class="language-toml" data-language="toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span><span class="token key property">rand</span><span class="token punctuation">=</span><span class="token string">"0.8.5"</span></code></pre><p>é‡æ–°æ„å»ºæ‰§è¡Œ<code>cargo build</code> ä¼šä»cargo.ioæ‹‰åˆ°æŒ‡å®šçš„ä¾èµ–ç‰ˆæœ¬åˆ°<code>cargo.lock</code>ä¸­ã€‚</p><p>æ‰§è¡Œ<code>cargo update</code>ä¼šå¿½ç•¥<code>cargo.lock</code> çš„ç‰ˆæœ¬ï¼Œä»cargo.ioæ‹‰åˆ°æœ€æ–°çš„ä¾èµ–ç‰ˆæœ¬</p><h3 id="é…ç½®å›½å†…é•œåƒ">é…ç½®å›½å†…é•œåƒ</h3><pre class="language-bash" data-language="bash"><code class="language-bash">âœ  hello_cargo git:<span class="token punctuation">(</span>main<span class="token punctuation">)</span> <span class="token function">touch</span> ~/.cargo/config.tomlâœ  hello_cargo git:<span class="token punctuation">(</span>main<span class="token punctuation">)</span> <span class="token function">vim</span> ~/.cargo/config.toml</code></pre><h5 id="ç¬¬ä¸€ç§é…ç½®ï¼š">ç¬¬ä¸€ç§é…ç½®ï¼š</h5><pre class="language-toml" data-language="toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">registries</span><span class="token punctuation">]</span><span class="token key property">ustc</span> <span class="token punctuation">=</span> <span class="token punctuation">&#123;</span> <span class="token key property">index</span> <span class="token punctuation">=</span> <span class="token string">"sparse+https://mirrors.ustc.edu.cn/crates.io-index/"</span> <span class="token punctuation">&#125;</span></code></pre><p>å‰ç¼€ <code>sparse+</code> å¯ç”¨ç¨€ç–æ¨¡å¼ï¼Œæ¯”ä¼ ç»Ÿå…¨é‡ç´¢å¼•æ›´å¿«</p><p>Cargo.toml æŒ‡å®šé•œåƒåœ°å€</p><pre class="language-toml" data-language="toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span><span class="token key property">rand</span> <span class="token punctuation">=</span> <span class="token punctuation">&#123;</span><span class="token key property">registry</span> <span class="token punctuation">=</span> <span class="token string">"ustc"</span><span class="token punctuation">,</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.8.5"</span><span class="token punctuation">&#125;</span></code></pre><h5 id="ç¬¬äºŒç§é…ç½®">ç¬¬äºŒç§é…ç½®</h5><p><a href="http://xn--cargo-3h8h707g8c6axhaz11o.io">ç›´æ¥è¦†ç›–åŸcargo.io</a> ï¼Œä¸ç”¨æŒ‡å®šé•œåƒåœ°å€äº†</p><pre class="language-toml" data-language="toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">source.crates-io</span><span class="token punctuation">]</span><span class="token key property">replace-with</span> <span class="token punctuation">=</span> <span class="token string">"ustc"</span><span class="token punctuation">[</span><span class="token table class-name">source.ustc</span><span class="token punctuation">]</span><span class="token key property">registry</span> <span class="token punctuation">=</span> <span class="token string">"sparse+https://mirrors.ustc.edu.cn/crates.io-index/"</span></code></pre><p>é‡æ–°buildä¸€é</p>]]></content>
      
      
      <categories>
          
          <category> Web3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WEB3-Day8â€”Foundryæ¡†æ¶[part1]</title>
      <link href="/2025/07/06/WEB3-Day8%E2%80%94Foundry%E6%A1%86%E6%9E%B6-part1/"/>
      <url>/2025/07/06/WEB3-Day8%E2%80%94Foundry%E6%A1%86%E6%9E%B6-part1/</url>
      <cover>https://img.soniachen.com/blog/posts/2025/07/image-20250707180402433.png</cover>
      <date>Sun Jul 06 2025 09:41:44 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>WEB3-Day8â€”Foundryæ¡†æ¶[part1]</h1><h2 id="ç®€ä»‹">ç®€ä»‹</h2><h2 id="Foundry-Fundamentals">Foundry Fundamentals</h2><p>Foundry æ˜¯ä¸€ä¸ªç›¸å¯¹è¾ƒæ–°ä½†å‘å±•è¿…çŒ›çš„æ™ºèƒ½åˆçº¦å¼€å‘æ¡†æ¶ï¼Œä»¥é«˜æ•ˆæ€§å’Œæ¨¡å—åŒ–è®¾è®¡è‘—ç§°ã€‚å…³äºè¿™ä¸ªå¼ºå¤§å·¥å…·çš„æœ€ä½³ç®€ä»‹å¯æŸ¥é˜… <a href="https://book.getfoundry.sh/">ã€ŠFoundry å®˜æ–¹æ‰‹å†Œã€‹</a>ï¼š<br>Foundry å¯ç®¡ç†é¡¹ç›®ä¾èµ–ã€ç¼–è¯‘å·¥ç¨‹ã€è¿è¡Œæµ‹è¯•ã€éƒ¨ç½²åˆçº¦ï¼Œå¹¶æ”¯æŒé€šè¿‡å‘½ä»¤è¡ŒåŠ Solidity è„šæœ¬ä¸åŒºå—é“¾äº¤äº’ã€‚</p><p>è¯·åŠ¡å¿…æ”¶è— <a href="https://book.getfoundry.sh/">ã€ŠFoundry å®˜æ–¹æ‰‹å†Œã€‹</a>â€”â€” å®ƒæ˜¯æœ€å…¨é¢çš„èµ„æºï¼Œå¯è§£ç­”æ‚¨çš„æ‰€æœ‰ç–‘é—®ï¼Œåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ä¼šæŒç»­æä¾›å¸®åŠ©ã€‚</p><h4 id="Foundry-çš„æ ¸å¿ƒä¼˜åŠ¿åŒ…æ‹¬ï¼š">Foundry çš„æ ¸å¿ƒä¼˜åŠ¿åŒ…æ‹¬ï¼š</h4><ul><li><strong>å€ŸåŠ© Rust</strong> è¿›è¡Œç¼–è¯‘ï¼Œç›¸æ¯” Hardhat æˆ– Brownie ç­‰æ¡†æ¶ï¼Œæ„å»ºé€Ÿåº¦æ˜¾è‘—æå‡ï¼›</li><li>å®Œå…¨åŸºäº <strong>Solidity</strong> å¼€å‘ï¼Œæ— éœ€å­¦ä¹ å…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼›</li><li><strong>æ–‡æ¡£ä½“ç³»æä¸ºå®Œå–„</strong>ã€‚</li></ul><h4 id="æ¨èä»£ç ç¼–è¾‘å™¨ï¼šVisual-Studio-Code">æ¨èä»£ç ç¼–è¾‘å™¨ï¼šVisual Studio Code</h4><p>åœ¨æœ¬è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Visual Studio Code å®Œæˆæ™ºèƒ½åˆçº¦çš„ <strong>ç¼–å†™</strong>ã€<strong>æµ‹è¯•</strong>ã€<strong>éƒ¨ç½²</strong> åŠ <strong>äº¤äº’</strong>ã€‚è¿™æ¬¾è½»é‡çº§ä»£ç ç¼–è¾‘å™¨åŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒ Windowsã€macOS å’Œ Linux ç³»ç»Ÿï¼Œå…¶ä¸°å¯Œçš„æ‰©å±•ç”Ÿæ€ç³»ç»Ÿä½¿å…¶æˆä¸ºæ™ºèƒ½åˆçº¦å¼€å‘çš„é¦–é€‰å·¥å…·ä¹‹ä¸€ã€‚</p><h2 id="å®‰è£…Foundry">å®‰è£…Foundry</h2><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-L</span> https://foundry.paradigm.xyz <span class="token operator">|</span> <span class="token function">bash</span><span class="token builtin class-name">source</span> /Users/tinachan/.zshenvfoundryup</code></pre><h2 id="åˆ›å»ºæ–‡ä»¶å¤¹å’Œåˆå§‹åŒ–">åˆ›å»ºæ–‡ä»¶å¤¹å’Œåˆå§‹åŒ–</h2><h3 id="åˆ›å»ºæ–‡ä»¶å¤¹">åˆ›å»ºæ–‡ä»¶å¤¹</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> foundry-f23  <span class="token builtin class-name">cd</span> foundry-f23  </code></pre><p>ç°åœ¨è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> foundry-simple-storage-f23  <span class="token builtin class-name">cd</span> foundry-simple-storage-f23  </code></pre><p><strong>æŠ€å·§</strong>ï¼šè¾“å…¥ç›®æ ‡è·¯å¾„çš„å‰å‡ ä¸ªå­—æ¯åæŒ‰ <code>Tab</code> é”®å¯å¿«é€Ÿè¡¥å…¨ <code>cd</code> å‘½ä»¤â€”â€”<code>Tab</code> é”®èƒ½è‡ªåŠ¨è¡¥å…¨å¤§éƒ¨åˆ†å‘½ä»¤/è·¯å¾„ã€‚</p><p>è‹¥è¾“å…¥ <code>code .</code>ï¼Œå°†æ‰“å¼€æ–°çš„ VS Code å®ä¾‹ï¼Œå¹¶é»˜è®¤ä»¥ <code>foundry-simple-storage-f23</code> ä¸ºå·¥ä½œè·¯å¾„ã€‚</p><p>å¯é€šè¿‡å·¦ä¾§è¾¹æ æŸ¥çœ‹è¯¥æ–‡ä»¶å¤¹å†…å®¹ã€‚å°è¯•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">touch</span> randomFile.txt  </code></pre><p>è¿™å°†åˆ›å»ºä¸€ä¸ª <code>randomFile.txt</code> æ–‡ä»¶ã€‚</p><p>è‹¥éœ€åˆ é™¤è¯¥æ–‡ä»¶ï¼Œè¾“å…¥ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">rm</span> randomFile.txt  </code></pre><p>ç»ˆç«¯åœ¨ç§»åŠ¨/æ‰“å¼€/åˆ›å»ºç›®å½•/æ–‡ä»¶ã€åˆ‡æ¢è·¯å¾„åŠè¿è¡Œç¨‹åºæ–¹é¢éå¸¸ä¾¿æ·ã€‚è‹¥æƒ³æå‡æ“ä½œæ•ˆç‡ï¼Œæ¨èé˜…è¯» <a href="https://ubuntu.com/tutorials/command-line-for-beginners#1-overview">æ­¤æ•™ç¨‹</a>ã€‚</p><h3 id="åˆ›å»ºæ–°é¡¹ç›®">åˆ›å»ºæ–°é¡¹ç›®</h3><p><a href="https://book.getfoundry.sh/projects/creating-a-new-project">åˆ›å»ºæ–°Foundryé¡¹ç›®</a> çš„æ–¹å¼æ˜¯æ‰§è¡Œ <code>forge init</code> å‘½ä»¤ï¼Œè¿™å°†åœ¨å½“å‰å·¥ä½œç›®å½•ç”Ÿæˆä¸€ä¸ªæ–°çš„Foundryé¡¹ç›®ã€‚</p><p>è‹¥å¸Œæœ›Foundryåœ¨æ–°æ–‡ä»¶å¤¹ä¸­åˆ›å»ºé¡¹ç›®ï¼Œè¾“å…¥ï¼š<code>forge init æ–°æ–‡ä»¶å¤¹åç§°</code>ã€‚</p><p><strong>æ³¨æ„</strong>ï¼š<code>forge init</code> é»˜è®¤è¦æ±‚ç›®æ ‡æ–‡ä»¶å¤¹ä¸ºç©ºã€‚è‹¥æ–‡ä»¶å¤¹éç©ºï¼Œéœ€æ‰§è¡Œ <code>forge init --force .</code>ã€‚</p><p>è‹¥é‡åˆ°Gité…ç½®ç›¸å…³é”™è¯¯ï¼Œéœ€å…ˆé…ç½®ç”¨æˆ·åå’Œé‚®ç®±ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">"ä½ çš„é‚®ç®±@æä¾›å•†.com"</span>  <span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">"ä½ çš„ç”¨æˆ·å"</span>  </code></pre><p>å®Œæˆåï¼Œæ–‡ä»¶å¤¹ç»“æ„åº”å¦‚ä¸‹æ‰€ç¤ºï¼š<br><img src="https://img.soniachen.com/blog/posts/2025/07/Image1-20250707153950529.png" alt="Image1"></p><h4 id="å„æ–‡ä»¶å¤¹å«ä¹‰è¯´æ˜ï¼š">å„æ–‡ä»¶å¤¹å«ä¹‰è¯´æ˜ï¼š</h4><ul><li><p><strong>lib</strong>ï¼šå­˜æ”¾æ‰€æœ‰ä¾èµ–é¡¹ï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>forge-std</code>ï¼ˆç”¨äºæµ‹è¯•å’Œè„šæœ¬çš„forgeåº“ï¼‰</li><li><code>openzeppelin-contracts</code>ï¼ˆç»è¿‡å¤§é‡å®è·µéªŒè¯çš„æ™ºèƒ½åˆçº¦åº“ï¼‰</li><li>å…¶ä»–æŒ‰éœ€å®‰è£…çš„ä¾èµ–</li></ul></li><li><p><strong>scripts</strong>ï¼šå­˜æ”¾æ‰€æœ‰è„šæœ¬æ–‡ä»¶</p></li><li><p><strong>src</strong>ï¼šå­˜æ”¾æ‰€æœ‰æ™ºèƒ½åˆçº¦æºæ–‡ä»¶</p></li><li><p><strong>test</strong>ï¼šå­˜æ”¾æ‰€æœ‰æµ‹è¯•æ–‡ä»¶</p></li><li><p><strong>foundry.toml</strong>ï¼šFoundryçš„é…ç½®å‚æ•°æ–‡ä»¶</p></li></ul><p>åç»­å°†è¯¦ç»†ä»‹ç»è¿™äº›æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ã€‚</p><p>ç°åœ¨è¯·å³é”®ç‚¹å‡» <code>src</code> æ–‡ä»¶å¤¹ï¼Œé€‰æ‹© <code>New File</code> å¹¶å‘½åä¸º <code>SimpleStorage.sol</code>ã€‚å°† <a href="https://github.com/Cyfrin/foundry-simple-storage-f23/blob/main/src/SimpleStorage.sol">æ­¤é“¾æ¥</a> ä¸­çš„ä»£ç å¤åˆ¶åˆ°è¯¥æ–‡ä»¶ä¸­ã€‚</p><p><strong>æœ€åä¸€æ­¥</strong>ï¼šè¯·åˆ é™¤ <code>Counter.s.sol</code>ã€<code>Counter.sol</code> å’Œ <code>Counter.t.sol</code>ã€‚è¿™äº›æ˜¯Foundryåˆ›å»ºæ–°é¡¹ç›®æ—¶é»˜è®¤æä¾›çš„åŸºç¡€æ™ºèƒ½åˆçº¦æ–‡ä»¶ã€‚</p><h2 id="VSCodeæ’ä»¶">VSCodeæ’ä»¶</h2><p>åˆšå¼€å§‹ç¼–å†™ä»£ç æ—¶ï¼Œç•Œé¢å¯èƒ½åªæ˜¯ä¸€ç‰‡å•è°ƒã€ç¼ºä¹æ ¼å¼çš„ç™½è‰²æ–‡æœ¬ã€‚</p><p>é€šè¿‡å®‰è£… <code>Solidity</code> æ‰©å±•å¯è½»æ¾è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åœ¨æ‰©å±•é€‰é¡¹å¡ï¼ˆæŒ‰ <code>CTRL/CMD + SHIFT + X</code>ï¼‰ä¸­ï¼Œä»¥ä¸‹å‡ ä¸ª Solidity æ‰©å±•å€¼å¾—å…³æ³¨ï¼š</p><ol><li><a href="https://marketplace.visualstudio.com/items?itemName=JuanBlanco.solidity">Solidity by Juan Blanco</a> â€”â€” æœ€å¸¸ç”¨çš„ Solidity æ‰©å±•ã€‚</li><li><a href="https://marketplace.visualstudio.com/items?itemName=NomicFoundation.hardhat-solidity">Solidity by Nomic Foundation</a> â€”â€” Patrick æœ€æ¨èçš„ Solidity æ‰©å±•ï¼Œæœ¬è¯¾ç¨‹å°†ä½¿ç”¨æ­¤æ‰©å±•æ¼”ç¤ºã€‚</li><li><a href="https://marketplace.visualstudio.com/items?itemName=tintinweb.solidity-visual-auditor">Solidity Visual Developer</a> â€”â€” å¦ä¸€æ¬¾çƒ­é—¨é€‰æ‹©ã€‚</li></ol><p><strong>æ³¨æ„</strong>ï¼šè‹¥å®‰è£…æ‰©å±•åä»£ç ä»æ— é«˜äº®ï¼Œå¯æŒ‰ä»¥ä¸‹æ­¥éª¤è§£å†³ï¼š<br>æŒ‰ä¸‹ <code>Command + Shift + P</code>ï¼ˆmacOSï¼‰æˆ– <code>Control + Shift + P</code>ï¼ˆWindowsï¼‰æ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œè¾“å…¥â€œSettingsâ€å¹¶é€‰æ‹© <strong>â€œPreferences: Open User Settings (JSON)â€</strong>ã€‚</p><p>è‹¥æ–‡ä»¶ä¸ºç©ºï¼Œæ·»åŠ ä»¥ä¸‹è®¾ç½®ï¼š</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"editor.defaultFormatter"</span><span class="token operator">:</span> <span class="token string">"NomicFoundation.hardhat"</span><span class="token punctuation">&#125;</span></code></pre><ul><li>è‹¥ä½¿ç”¨ <strong>Solidity Visual Developer</strong>ï¼Œè®¾ç½®ä¸ºï¼š<br><code>&quot;editor.defaultFormatter&quot;: &quot;tintinweb.solidity-visual-auditor&quot;</code></li><li>è‹¥ä½¿ç”¨ <strong>Solidity by Juan Blanco</strong>ï¼Œè®¾ç½®ä¸ºï¼š<br><code>&quot;editor.defaultFormatter&quot;: &quot;JuanBlanco.solidity&quot;</code></li></ul><h3 id="å…¶ä»–å®ç”¨æ‰©å±•">å…¶ä»–å®ç”¨æ‰©å±•</h3><p>ä¸Šä¸€è¯¾æåˆ°çš„ <code>foundry.toml</code> é…ç½®æ–‡ä»¶ä¹Ÿæœ‰å¯¹åº”çš„æ ¼å¼åŒ–æ‰©å±•ï¼Œæ¨èå®‰è£… <a href="https://marketplace.visualstudio.com/items?itemName=tamasfe.even-better-toml">Even Better TOML</a>ï¼Œæå‡ TOML æ–‡ä»¶çš„å¯è¯»æ€§ã€‚</p><p>å¦ä¸€æ¬¾å¿…å¤‡æ‰©å±•æ˜¯ <a href="https://marketplace.visualstudio.com/items?itemName=tintinweb.vscode-inline-bookmarks">Inline Bookmarks</a>ï¼Œå…¶åŠŸèƒ½å¦‚ä¸‹ï¼š<br>è¯¥æ’ä»¶æ”¯æŒåœ¨ä»£ç ä¸­æ·»åŠ ä¹¦ç­¾ï¼Œé€‚ç”¨äºæ–‡æ¡£è¯„å®¡ã€å®‰å…¨å®¡è®¡ã€æ—¥å¿—åˆ†æåŠè®°å½•å¼€å‘ç¬”è®°å’Œå¾…åŠäº‹é¡¹ã€‚ä¹¦ç­¾ä¼šéšæ–‡ä»¶ä¿å­˜ï¼Œå¯è½»æ¾ä¸ä»–äººå…±äº«ã€‚</p><p>é»˜è®¤é¢„è®¾çš„è§¦å‘æ ‡ç­¾/å…³é”®è¯å¦‚ä¸‹ï¼š</p><ul><li><code>@todo</code>ï¼ˆè“è‰²ï¼‰ï¼šå¸¸è§„å¾…åŠäº‹é¡¹æ ‡è®°</li><li><code>@note</code>ï¼ˆè“è‰²ï¼‰ï¼šå¸¸è§„æ³¨é‡Š</li><li><code>@remind</code>ï¼ˆè“è‰²ï¼‰ï¼šæé†’äº‹é¡¹</li><li><code>@follow-up</code>ï¼ˆè“è‰²ï¼‰ï¼šå¾…è·Ÿè¿›äº‹é¡¹</li><li><code>@audit</code>ï¼ˆçº¢è‰²ï¼‰ï¼šæ½œåœ¨é—®é¢˜æ ‡è®°</li><li><code>@audit-info</code>ï¼ˆè“è‰²ï¼‰ï¼šå¾…åç»­å¤„ç†çš„ä¿¡æ¯æ ‡è®°</li><li><code>@audit-ok</code>ï¼ˆç»¿è‰²ï¼‰ï¼šæ ‡è®°æŸè¡Œä»£ç æ— é—®é¢˜ï¼ˆå³ä½¿çœ‹ä¼¼æœ‰é—®é¢˜ï¼‰</li><li><code>@audit-issue</code>ï¼ˆç´«è‰²ï¼‰ï¼šæ ‡è®°å·²è®°å½•é—®é¢˜çš„ä»£ç ä½ç½®</li></ul><p><strong>æç¤º</strong>ï¼šè¿™äº›æ ‡ç­¾çš„é¢œè‰²å¯å®Œå…¨è‡ªå®šä¹‰ï¼å®ƒä»¬åœ¨å¼€å‘å°¤å…¶æ˜¯é¡¹ç›®å®¡è®¡ä¸­éå¸¸å®ç”¨ï¼Œæ›´å¤šç»†èŠ‚å¯æŸ¥é˜… <a href="https://github.com/tintinweb/vscode-inline-bookmarks">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h2 id="ç¼–è¯‘åˆçº¦">ç¼–è¯‘åˆçº¦</h2><p>å¤åˆ¶ä¹‹å‰SolidityåŸºç¡€è¯¾ç¨‹ä¸­çš„ <code>SimpleStorage.sol</code>åˆçº¦</p><p>ç„¶åæ‰“å¼€æ–°ç»ˆç«¯ã€‚è¾“å…¥ <code>forge build</code> æˆ– <code>forge compile</code> æ¥ç¼–è¯‘é¡¹ç›®ä¸­çš„æ™ºèƒ½åˆçº¦ã€‚</p><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250707155154335.png" alt="image-20250707155154335" style="zoom:33%;" /><h2 id="éƒ¨ç½²åˆçº¦">éƒ¨ç½²åˆçº¦</h2><h3 id="Anvil">Anvil</h3><p>éƒ¨ç½²æ™ºèƒ½åˆçº¦æœ‰å¤šç§æ–¹å¼å’Œå¹³å°ã€‚ä½¿ç”¨Foundryæ¡†æ¶å¼€å‘æ—¶ï¼Œæœ€ç®€å•ä¸”ç°æˆçš„éƒ¨ç½²ç¯å¢ƒæ˜¯Anvilã€‚</p><p>Anvilæ˜¯Foundryè‡ªå¸¦çš„æœ¬åœ°æµ‹è¯•ç½‘ç»œèŠ‚ç‚¹ï¼Œå¯ç”¨äºä»å‰ç«¯æµ‹è¯•åˆçº¦æˆ–é€šè¿‡RPCäº¤äº’ã€‚åœ¨ç»ˆç«¯è¾“å…¥<code>anvil</code>å³å¯è¿è¡Œï¼š</p><p><img src="https://img.soniachen.com/blog/posts/2025/07/Image1-20250707155614146-20250707155742952.png" alt="Image1"></p><p>æ­¤æ—¶ä¼šç”Ÿæˆ10ä¸ªæµ‹è¯•åœ°å€ï¼Œæ¯ä¸ªåœ°å€é¢„å­˜10_000 ETHåŠå¯¹åº”çš„ç§é’¥ã€‚è¯¥æµ‹è¯•èŠ‚ç‚¹é»˜è®¤ç›‘å¬<code>127.0.0.1:8545</code>ï¼Œæ­¤åœ°å€å°†ä½œä¸ºéƒ¨ç½²åˆçº¦æ—¶çš„<code>RPC_URL</code>å‚æ•°ï¼ˆåç»­ä¼šè¯¦ç»†è¯´æ˜ï¼‰ã€‚æ›´å¤šAnvilç›¸å…³ä¿¡æ¯å¯æŸ¥é˜… <a href="https://book.getfoundry.sh/reference/anvil/">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><p>å¦‚éœ€å…³é—­Anvilï¼ŒæŒ‰<code>Ctrl/CMD + C</code>å³å¯ã€‚æœ¬è¯¾ç¨‹å°†å…¨ç¨‹ä½¿ç”¨Anviléƒ¨ç½²å’Œæµ‹è¯•åˆçº¦ï¼Œåœ¨æ­¤ä¹‹å‰å…ˆäº†è§£ä¸€ä¸ªä¸­é—´æ­¥éª¤ã€‚</p><h4 id="Ganache">Ganache</h4><p><em>Ganacheé€šå¸¸æŒ‡ç³•ç‚¹é…±ï¼Œç”±ç­‰é‡å¥¶æ²¹å’Œç¢å·§å…‹åŠ›åŠ çƒ­åˆ¶æˆï¼Œå…ˆæ¸©çƒ­å¥¶æ²¹å†æµ‡åœ¨å·§å…‹åŠ›ä¸Šã€‚</em></p><p>ç­‰ç­‰ï¼Œè¿™é‡Œè¯´çš„ä¸æ˜¯ç³•ç‚¹é…±ï¼å¦ä¸€ä¸ªGanacheï¼š<br>Ganacheæ˜¯ç”¨äºå¿«é€Ÿå¼€å‘ä»¥å¤ªåŠå’ŒFilecoinåˆ†å¸ƒå¼åº”ç”¨çš„ä¸ªäººåŒºå—é“¾ï¼Œå¯åœ¨æ•´ä¸ªå¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­ä½¿ç”¨ï¼Œæ”¯æŒåœ¨å®‰å…¨ä¸”ç¡®å®šçš„ç¯å¢ƒä¸­å¼€å‘ã€éƒ¨ç½²å’Œæµ‹è¯•dAppã€‚</p><p>è¯·ä» <a href="https://archive.trufflesuite.com/ganache/">æ­¤å¤„</a> ä¸‹è½½Ganacheã€‚</p><p>ä½¿ç”¨Windows WSLçš„ç”¨æˆ·è¯·é˜…è¯» <a href="https://github.com/Cyfrin/foundry-simple-storage-f23?tab=readme-ov-file#windows-wsl--ganache">æ­¤æ–‡æ¡£</a>â€”â€”åœ¨è¯¥ç¯å¢ƒä¸­é…ç½®Ganacheå¹¶éæ˜“äº‹ï¼Œä¸”åç»­ä¸ä¼šä½¿ç”¨ï¼Œå› æ­¤é…ç½®å¤±è´¥æ— éœ€æ‹…å¿ƒã€‚</p><p>ç‚¹å‡»<code>Quickstart Ethereum</code>ï¼Œå³å¯ç”Ÿæˆå…¨æ–°åŒºå—é“¾ï¼ŒåŒ…å«å¸¦ä½™é¢çš„åœ°å€å’Œç§é’¥ã€‚</p><h4 id="é…ç½®MetaMask">é…ç½®MetaMask</h4><p>è‹¥éœ€éƒ¨ç½²åˆ°è‡ªå®šä¹‰ç½‘ç»œï¼ˆå¦‚æœ¬åœ°èŠ‚ç‚¹ï¼‰ï¼Œéœ€ä½¿ç”¨MetaMaskâ€”â€”è¿™æ˜¯ä¸€æ¬¾æµè¡Œçš„åŠ å¯†è´§å¸é’±åŒ…å’Œæµè§ˆå™¨æ‰©å±•ï¼Œæ”¯æŒä¸ä»¥å¤ªåŠåŒºå—é“¾åŠå…¶ç”Ÿæ€äº¤äº’ã€‚å°šæœªå®‰è£…è€…å¯ä» <a href="https://metamask.io/download/">æ­¤å¤„</a> ä¸‹è½½ã€‚</p><p>é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>æ‰“å¼€MetaMaskï¼Œç‚¹å‡»ä¸‰ç‚¹å›¾æ ‡å¹¶é€‰æ‹©<code>Expand View</code>ï¼›</li><li>è¿›å…¥<code>Settings</code>â†’<code>Networks</code>ï¼ŒæŸ¥çœ‹ç½‘ç»œåˆ—è¡¨åŠè¯¦æƒ…ï¼Œé‡ç‚¹å…³æ³¨RPC URLï¼›<br><strong>RPC URLæœ¬è´¨ä¸Šæ˜¯å‘é€äº¤æ˜“æ—¶è°ƒç”¨APIçš„ç«¯ç‚¹</strong>ï¼Œæ¯æ¬¡æ‰§è¡ŒåŒºå—é“¾äº¤æ˜“éƒ½ä¼šå‘è¯¥åœ°å€å‘é€APIè¯·æ±‚ã€‚</li></ol><p>æ·»åŠ è‡ªå®šä¹‰åŒºå—é“¾ç½‘ç»œçš„æ­¥éª¤ï¼š</p><ol><li>ç‚¹å‡»<code>Add a Network</code>ï¼Œæ»šåŠ¨è‡³åˆ—è¡¨åº•éƒ¨ï¼›</li><li>é€‰æ‹©<code>Add a Network manually</code>ï¼Œè¾“å…¥æœ¬åœ°ç½‘ç»œä¿¡æ¯ï¼š<ul><li>ç½‘ç»œåç§°ï¼š<code>Localhost</code></li><li>æ–°RPC URLï¼šGanacheä¸º<code>http://127.0.0.1:7545</code>ï¼ŒAnvilä¸º<code>http://127.0.0.1:8545</code>ï¼ˆéœ€ç¡®ä¿æ·»åŠ <code>http://</code>ï¼Œå…·ä½“URLä»¥Ganacheç•Œé¢æˆ–Anvilç»ˆç«¯æ˜¾ç¤ºä¸ºå‡†ï¼‰</li><li>é“¾IDï¼šGanacheé€šå¸¸ä¸º<code>5777</code>ï¼ˆæˆ–<code>1337</code>ï¼‰ï¼ŒAnvilä¸º<code>31337</code>ï¼ˆå…·ä½“IDä»¥å·¥å…·æ˜¾ç¤ºä¸ºå‡†ï¼‰</li><li>è´§å¸ç¬¦å·ï¼šETH</li><li>åŒºå—æµè§ˆå™¨URLï¼šç•™ç©ºï¼ˆæœ¬åœ°åŒºå—é“¾æ— åŒºå—æµè§ˆå™¨ï¼Œå…³é—­VS Code/Ganacheåæ•°æ®é€šå¸¸ä¼šä¸¢å¤±ï¼‰</li></ul></li></ol><p>é…ç½®å®Œæœ¬åœ°ç½‘ç»œåï¼Œéœ€å°†Ganacheæˆ–Anvilä¸­çš„è´¦æˆ·å¯¼å…¥MetaMaskï¼Œæ­¥éª¤å¦‚ä¸‹ <a href="https://support.metamask.io/hc/en-us/articles/360015489331-How-to-import-an-account#h_01G01W07NV7Q94M7P1EBD5BYM4">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</a>ï¼š</p><ol><li>ç‚¹å‡»é’±åŒ…é¡¶éƒ¨çš„è´¦æˆ·é€‰æ‹©å™¨ï¼Œç‚¹å‡»<code>Add account or hardware wallet</code>ï¼›</li><li>é€‰æ‹©<code>Import account</code>ï¼Œç²˜è´´Ganache/Anvilçš„ç§é’¥å¹¶ç‚¹å‡»<code>Import</code>ã€‚</li></ol><p><strong>é‡è¦æç¤ºï¼šæ­¤è´¦æˆ·ä»…é™æœ¬åœ°æµ‹è¯•ä½¿ç”¨ï¼Œåˆ‡å‹¿åœ¨ä¸»ç½‘æˆ–å…¶ä»–çœŸå®åŒºå—é“¾ä¸­ä½¿ç”¨ï¼Œæ‰€æœ‰äººå‡å¯è®¿é—®è¯¥è´¦æˆ·ï¼</strong></p><p>æ¥ä¸‹æ¥å°†è¿›ä¸€æ­¥è®²è§£åœ¨MetaMaskä¸­æ·»åŠ æ–°ç½‘ç»œçš„ç»†èŠ‚ã€‚</p><h3 id="å‘½ä»¤è¡Œéƒ¨ç½²">å‘½ä»¤è¡Œéƒ¨ç½²</h3><pre class="language-bash" data-language="bash"><code class="language-bash">forge create SimpleStorage <span class="token parameter variable">--interactive</span></code></pre><p><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250707161734804.png" alt="image-20250707161734804"></p><h3 id="è„šæœ¬éƒ¨ç½²">è„šæœ¬éƒ¨ç½²</h3><p>é€šè¿‡è„šæœ¬éƒ¨ç½²æ™ºèƒ½åˆçº¦ç‰¹åˆ«å®ç”¨ï¼Œå› ä¸ºå®ƒæä¾›äº†ä¸€è‡´ä¸”å¯é‡å¤çš„å¯é éƒ¨ç½²æ–¹å¼ï¼Œå…¶ç‰¹æ€§è¿˜èƒ½å¢å¼ºå¯¹éƒ¨ç½²æµç¨‹å’Œä»£ç æœ¬èº«çš„æµ‹è¯•ã€‚</p><p>ä½ å¯èƒ½å–œæ¬¢å‘½ä»¤è¡Œæ–¹å¼ï¼Œä½†è„šæœ¬ä¼šä¸°å¯Œæ•´ä¸ªéƒ¨ç½²æµç¨‹ï¼Œå¸¦æ¥æ— å¯æ¯”æ‹Ÿçš„åŠŸèƒ½æ‰©å±•å’Œæ˜“ç”¨æ€§ã€‚</p><p>FoundryåŸºäºSolidityå¼€å‘ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬çš„éƒ¨ç½²è„šæœ¬ä¹Ÿå°†ä½¿ç”¨Solidityç¼–å†™ã€‚å¿…é¡»æ˜ç¡®åŒºåˆ†ä½œä¸ºåˆçº¦è¯­è¨€çš„Solidityå’Œä½œä¸ºè„šæœ¬è¯­è¨€çš„Solidityâ€”â€”Foundryè¿˜æ•´åˆäº†æ‰©å±•åŠŸèƒ½ï¼Œè®©Solidityçš„åº”ç”¨è¶…å‡ºæ™ºèƒ½åˆçº¦èŒƒç•´ã€‚ç°åœ¨å¼€å§‹åˆ›å»ºéƒ¨ç½²ç®€å•å­˜å‚¨åˆçº¦çš„è„šæœ¬ã€‚</p><h4 id="åœ¨Foundryä¸­ï¼Œè„šæœ¬å­˜æ”¾åœ¨scriptæ–‡ä»¶å¤¹ä¸‹">åœ¨Foundryä¸­ï¼Œè„šæœ¬å­˜æ”¾åœ¨<code>script</code>æ–‡ä»¶å¤¹ä¸‹</h4><ol><li>åˆ›å»ºæ–°æ–‡ä»¶<code>DeploySimpleStorage.s.sol</code><ul><li><code>.s.sol</code>æ˜¯Foundryè„šæœ¬çš„å‘½åè§„èŒƒï¼Œåç»­ç¼–å†™æµ‹è¯•æ—¶ä¼šä½¿ç”¨<code>.t.sol</code>åç¼€ã€‚</li><li>æ›´å¤šè„šæœ¬æœ€ä½³å®è·µå¯æŸ¥é˜… <a href="https://book.getfoundry.sh/guides/best-practices#scripts">æ­¤å¤„</a>ã€‚</li></ul></li></ol><h4 id="ç¼–å†™Solidityéƒ¨ç½²è„šæœ¬">ç¼–å†™Solidityéƒ¨ç½²è„šæœ¬</h4><ol><li><p>åˆå§‹ä»£ç æ¡†æ¶ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token number">0.8</span><span class="token number">.19</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">DeploySimpleStorage</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></code></pre><ul><li>å‰ä¸¤è¡Œåˆ†åˆ«å£°æ˜è®¸å¯è¯å’ŒSolidityç‰ˆæœ¬ã€‚</li></ul></li><li><p>å¯¼å…¥ä¾èµ–å¹¶ç»§æ‰¿<code>Script</code>ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token number">0.8</span><span class="token number">.19</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Script<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"forge-std/Script.sol"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>SimpleStorage<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../src/SimpleStorage.sol"</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">DeploySimpleStorage</span> <span class="token keyword">is</span> Script <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></code></pre><ul><li><strong>æ³¨</strong>ï¼š<code>forge-std</code>ï¼ˆForgeæ ‡å‡†åº“ï¼‰åŒ…å«é¢„å†™çš„Solidityåˆçº¦ï¼Œç”¨äºç®€åŒ–å’Œå¢å¼ºFoundryä¸­çš„è„šæœ¬ä¸æµ‹è¯•ã€‚</li></ul></li><li><p>æ·»åŠ <code>run</code>ä¸»å‡½æ•°ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token number">0.8</span><span class="token number">.19</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Script<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"forge-std/Script.sol"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>SimpleStorage<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../src/SimpleStorage.sol"</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">DeploySimpleStorage</span> <span class="token keyword">is</span> Script <span class="token punctuation">&#123;</span>    <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span>SimpleStorage<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        vm<span class="token punctuation">.</span><span class="token function">startBroadcast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        SimpleStorage simpleStorage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        vm<span class="token punctuation">.</span><span class="token function">stopBroadcast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> simpleStorage<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><ul><li><code>vm</code>æ˜¯Foundryçš„â€œä½œå¼Šç â€ï¼ˆcheat codesï¼‰ï¼Œä»…åœ¨Foundryç¯å¢ƒä¸­ç”Ÿæ•ˆï¼š<ul><li><code>vm.startBroadcast()</code>æ ‡è®°å‘é€åˆ°RPC URLçš„äº¤æ˜“å¼€å§‹ï¼›</li><li><code>vm.stopBroadcast()</code>æ ‡è®°äº¤æ˜“ç»“æŸï¼›</li></ul></li><li><code>new SimpleStorage()</code>é€šè¿‡Solidityçš„<code>new</code>å…³é”®å­—åˆ›å»ºåˆçº¦å®ä¾‹ã€‚</li></ul></li></ol><h4 id="æ‰§è¡Œéƒ¨ç½²è„šæœ¬">æ‰§è¡Œéƒ¨ç½²è„šæœ¬</h4><ol><li><p>åœæ­¢æ­£åœ¨è¿è¡Œçš„Anvilï¼ˆæŒ‰<code>CTRL(CMD) + C</code>ï¼‰ï¼Œè¿è¡Œï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">forge script script/DeploySimpleStorage.s.sol</code></pre><ul><li>è‹¥é‡â€œæ–‡ä»¶ä¸­Solidityç‰ˆæœ¬ä¸å…¼å®¹â€é”™è¯¯ï¼Œç¡®ä¿<code>SimpleStorage.sol</code>å’Œéƒ¨ç½²è„šæœ¬å‡ä½¿ç”¨<code>pragma solidity 0.8.19;</code>ã€‚</li></ul></li><li><p>å…¸å‹è¾“å‡ºï¼š</p><pre class="language-text" data-language="text"><code class="language-text">[â †] Compiling...[â ”] Compiling 2 files with 0.8.19[â ’] Solc 0.8.19 finished in 1.08sCompiler run successful!Script ran successfully.Gas used: 338569== Return ==0: contract SimpleStorage 0x90193C961A926261B756D1E5bb255e67ff9498A1</code></pre><ul><li><strong>å…³é”®é—®é¢˜</strong>ï¼šæœªæŒ‡å®šRPC URLæ—¶ï¼ŒFoundryä¼šè‡ªåŠ¨å¯åŠ¨å¹¶ç»ˆæ­¢Anvilå®ä¾‹å®Œæˆéƒ¨ç½²ã€‚</li></ul></li><li><p>æŒ‡å®šRPC URLæ¨¡æ‹Ÿéƒ¨ç½²ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å…ˆå¯åŠ¨Anvil</span>anvil<span class="token comment"># æ–°å¼€ç»ˆç«¯æ‰§è¡Œ</span>forge script script/DeploySimpleStorage.s.sol --rpc-url http://127.0.0.1:8545</code></pre><ul><li>è¾“å‡ºä¸­çš„<code>SIMULATION COMPLETE</code>è¡¨ç¤ºè¿™æ˜¯æ¨¡æ‹Ÿéƒ¨ç½²ï¼Œç”Ÿæˆçš„<code>broadcast</code>æ–‡ä»¶å¤¹è®°å½•è„šæœ¬è¿è¡Œä¿¡æ¯ã€‚</li></ul></li><li><p>å¹¿æ’­éƒ¨ç½²ï¼ˆæ·»åŠ ç§é’¥ï¼‰ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">forge script script/DeploySimpleStorage.s.sol --rpc-url http://127.0.0.1:8545 <span class="token parameter variable">--broadcast</span> --private-key 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80</code></pre><ul><li>Anvilç»ˆç«¯å°†æ˜¾ç¤ºæˆåŠŸéƒ¨ç½²çš„äº¤æ˜“ä¿¡æ¯ï¼š<pre class="language-text" data-language="text"><code class="language-text">Transaction: 0x73eb9fb4ef7b159e03c50d669c42e2ec4eeaa9358bea0a710cb07168e5192570Contract created: 0x5fbdb2315678afecb367f032d93f642f64180aa3Gas used: 357088</code></pre></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Foundry </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WEB3-Day7â€”SolidityåŸºç¡€[part6]</title>
      <link href="/2025/07/04/WEB3-Day7%E2%80%94Solidity%E5%9F%BA%E7%A1%80-part6/"/>
      <url>/2025/07/04/WEB3-Day7%E2%80%94Solidity%E5%9F%BA%E7%A1%80-part6/</url>
      <cover>https://img.soniachen.com/blog/posts/2025/07/image-20250704160915402.png</cover>
      <date>Fri Jul 04 2025 11:01:12 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>WEB3-Day7â€”SolidityåŸºç¡€[part6]</h1><h2 id="å˜é‡ä¼˜åŒ–">å˜é‡ä¼˜åŒ–</h2><p>ä¼˜åŒ–<strong>ä»…è®¾ç½®ä¸€æ¬¡çš„å˜é‡</strong>çš„ç‡ƒæ°”æ¶ˆè€—ï¼ˆgas usageï¼‰</p><p>å˜é‡ <code>owner</code> å’Œ <code>minimumUSD</code> ä»…è®¾ç½®ä¸€æ¬¡ä¸”æ°¸ä¸æ”¹å˜ï¼š<code>owner</code> åœ¨åˆçº¦åˆ›å»ºæ—¶èµ‹å€¼ï¼Œ<code>minimumUSD</code> åœ¨åˆçº¦åˆå§‹åŒ–æ—¶è®¾å®šã€‚</p><h3 id="è¯„ä¼°-FundMe-åˆçº¦">è¯„ä¼° FundMe åˆçº¦</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡éƒ¨ç½²åˆçº¦å¹¶åœ¨ç»ˆç«¯ä¸­è§‚å¯Ÿäº¤æ˜“æ¥è¯„ä¼°åˆ›å»ºåˆçº¦æ‰€éœ€çš„ç‡ƒæ°”é‡ã€‚åœ¨åŸå§‹åˆçº¦é…ç½®ä¸­ï¼Œæˆ‘ä»¬æ¶ˆè€—äº†è¿‘ 859,000 å•ä½ç‡ƒæ°”ã€‚</p><h3 id="å¸¸é‡ï¼ˆConstantï¼‰">å¸¸é‡ï¼ˆConstantï¼‰</h3><p>ä¸ºå‡å°‘ç‡ƒæ°”æ¶ˆè€—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>constant</code> å’Œ <code>immutable</code> å…³é”®å­—ã€‚è¿™äº›å…³é”®å­—ç¡®ä¿å˜é‡å€¼ä¿æŒä¸å˜ã€‚æ›´å¤šä¿¡æ¯å¯å‚è€ƒ <a href="https://solidity.readthedocs.io/">Solidity æ–‡æ¡£</a>ã€‚</p><p>å¯¹äºä»…èµ‹å€¼ä¸€æ¬¡ä¸”æ°¸ä¸æ”¹å˜çš„å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥åº”ç”¨è¿™äº›å…³é”®å­—ã€‚</p><p>å¯¹äº<strong>ç¼–è¯‘æ—¶å·²çŸ¥</strong>çš„å€¼ï¼Œä½¿ç”¨ <code>constant</code> å…³é”®å­—ã€‚å®ƒä¼šé¿å…å˜é‡å ç”¨å­˜å‚¨æ§½ä½ï¼Œä»è€Œä½¿è¯»å–æ›´ä¾¿å®œã€æ›´å¿«é€Ÿã€‚</p><p>ä½¿ç”¨ <code>constant</code> å…³é”®å­—å¯èŠ‚çœçº¦ 19,000 å•ä½ç‡ƒæ°”ï¼Œè¿™æ¥è¿‘åœ¨ä¸¤ä¸ªè´¦æˆ·ä¹‹é—´å‘é€ ETH çš„æˆæœ¬ã€‚</p><blockquote><p>ğŸ“ <strong>æ³¨æ„</strong>ï¼š<br><code>constant</code> å˜é‡çš„å‘½åçº¦å®šä¸ºå…¨å¤§å†™å¹¶ä»¥ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆä¾‹å¦‚ <code>MINIMUM_USD</code>ï¼‰ã€‚</p></blockquote><blockquote><p>âš ï¸ <strong>è­¦å‘Š</strong>ï¼š<br>å°†å½“å‰ ETH ç‡ƒæ°”æˆæœ¬è½¬æ¢ä¸ºç¾å…ƒæ—¶å¯è§ï¼Œå½“ ETH ä»·æ ¼ä¸º 3000 ç¾å…ƒæ—¶ï¼Œå°† <code>MINIMUM_USD</code> å®šä¹‰ä¸ºå¸¸é‡éœ€èŠ±è´¹ 9 ç¾å…ƒï¼Œæ¯”å…¶å…¬å¼€å˜é‡ï¼ˆpublicï¼‰çš„ç­‰æ•ˆå®ç°å¤šè¿‘ 1 ç¾å…ƒã€‚</p></blockquote><h3 id="ä¸å¯å˜ï¼ˆImmutableï¼‰">ä¸å¯å˜ï¼ˆImmutableï¼‰</h3><p><code>constant</code> å˜é‡é€‚ç”¨äºç¼–è¯‘æ—¶å·²çŸ¥çš„å€¼ï¼Œè€Œ <code>immutable</code> é€‚ç”¨äºéƒ¨ç½²æ—¶è®¾ç½®ä¸”ä¸å†æ”¹å˜çš„å˜é‡ã€‚<code>immutable</code> å˜é‡çš„å‘½åçº¦å®šæ˜¯åœ¨å˜é‡åå‰æ·»åŠ å‰ç¼€ <code>i_</code>ï¼ˆä¾‹å¦‚ <code>i_owner</code>ï¼‰ã€‚</p><p>å°† <code>owner</code> è®¾ä¸º <code>immutable</code> å˜é‡åï¼Œè§‚å¯Ÿåˆ°å…¶ç‡ƒæ°”èŠ‚çœæ•ˆæœä¸ <code>constant</code> å…³é”®å­—ç±»ä¼¼ã€‚</p><blockquote><p>ğŸ’¡ <strong>æç¤º</strong>ï¼š<br>åœ¨å­¦ä¹ çš„æ—©æœŸé˜¶æ®µï¼Œä¸å¿…è¿‡äºå…³æ³¨ç‡ƒæ°”ä¼˜åŒ–ã€‚å…ˆä¿è¯åˆçº¦èƒ½å¤Ÿå®Œæ•´å†™å‡ºæ¥å…ˆã€‚</p></blockquote><h2 id="è‡ªå®šä¹‰é”™è¯¯">è‡ªå®šä¹‰é”™è¯¯</h2><h3 id="éœ€æ±‚æ£€æŸ¥ï¼ˆRequireï¼‰">éœ€æ±‚æ£€æŸ¥ï¼ˆRequireï¼‰</h3><p>æå‡ç‡ƒæ°”æ•ˆç‡çš„ä¸€ç§æ–¹å¼æ˜¯ä¼˜åŒ– <code>require</code> è¯­å¥ã€‚å½“å‰ï¼Œ<code>require</code> è¯­å¥å¼ºåˆ¶æˆ‘ä»¬å­˜å‚¨å­—ç¬¦ä¸² <code>'sender is not an owner'</code>ï¼Œè¯¥å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦éƒ½ä¼šå•ç‹¬å­˜å‚¨ï¼Œå¯¼è‡´ç®¡ç†é€»è¾‘å¤æ‚ä¸”æˆæœ¬é«˜æ˜‚ã€‚</p><h3 id="è‡ªå®šä¹‰é”™è¯¯ï¼ˆCustom-Errorsï¼‰">è‡ªå®šä¹‰é”™è¯¯ï¼ˆCustom Errorsï¼‰</h3><p>è‡ª <strong>Solidity 0.8.4</strong> ç‰ˆæœ¬å¼•å…¥çš„è‡ªå®šä¹‰é”™è¯¯å¯ç”¨äº <code>revert</code> è¯­å¥ä¸­ã€‚è¿™äº›é”™è¯¯éœ€åœ¨ä»£ç é¡¶éƒ¨å£°æ˜ï¼Œå¹¶åœ¨ <code>if</code> è¯­å¥ä¸­ä½¿ç”¨ã€‚ç›¸è¾ƒäºä¹‹å‰çš„é”™è¯¯æ¶ˆæ¯å­—ç¬¦ä¸²ï¼Œè°ƒç”¨æ›´è½»é‡çš„é”™è¯¯ä»£ç å¯é™ä½ç‡ƒæ°”æˆæœ¬ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰é”™è¯¯ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity">error <span class="token function">NotOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç„¶åç”¨ <code>if</code> è¯­å¥æ›¿æ¢ <code>require</code> å‡½æ•°ï¼Œå¹¶é€šè¿‡ <code>revert</code> è°ƒç”¨æ–°åˆ›å»ºçš„é”™è¯¯ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">if</span> <span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender <span class="token operator">!=</span> i_owner<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">revert</span> <span class="token function">NotOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>é€šè¿‡å®ç°è‡ªå®šä¹‰é”™è¯¯ï¼Œæˆ‘ä»¬æ—¢èƒ½é™ä½ç‡ƒæ°”æ¶ˆè€—ï¼Œåˆèƒ½ç®€åŒ–æ™ºèƒ½åˆçº¦ä¸­çš„é”™è¯¯å¤„ç†ã€‚</p><h3 id="ç»“è®º">ç»“è®º</h3><p>æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•é€šè¿‡ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯æ›¿ä»£ä¼ ç»Ÿå«å­—ç¬¦ä¸²çš„ require è¯­å¥ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ– Solidity åˆçº¦çš„ç‡ƒæ°”æ•ˆç‡ã€‚</p><h2 id="receiveå’Œfallbackå‡½æ•°">receiveå’Œfallbackå‡½æ•°</h2><p><code>receive</code>å’Œ<code>fallback</code>æ˜¯ç‰¹æ®Šå‡½æ•°ï¼Œå½“ç”¨æˆ·ç›´æ¥å‘åˆçº¦å‘é€ä»¥å¤ªå¸æˆ–è°ƒç”¨ä¸å­˜åœ¨çš„å‡½æ•°æ—¶ä¼šè§¦å‘ã€‚è¿™äº›å‡½æ•°ä¸è¿”å›ä»»ä½•å€¼ï¼Œä¸”å¿…é¡»å£°æ˜ä¸º<code>external</code>ã€‚</p><p>ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„åˆçº¦ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.7</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">FallbackExample</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">uint256</span> <span class="token keyword">public</span> result<span class="token punctuation">;</span>    <span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token punctuation">&#123;</span>        result <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">fallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token punctuation">&#123;</span>        result <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>åœ¨è¿™ä¸ªåˆçº¦ä¸­ï¼Œ<code>result</code>åˆå§‹åŒ–ä¸º0ã€‚å½“ä»¥å¤ªå¸å‘é€åˆ°åˆçº¦æ—¶ï¼Œ<code>receive</code>å‡½æ•°ä¼šè¢«è§¦å‘ï¼Œå°†<code>result</code>è®¾ä¸º1ã€‚å¦‚æœäº¤æ˜“åŒ…å«æ•°æ®ä½†æŒ‡å®šçš„å‡½æ•°ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè§¦å‘<code>fallback</code>å‡½æ•°ï¼Œå°†<code>result</code>è®¾ä¸º2ã€‚</p><p>å¦‚éœ€å…¨é¢è§£é‡Šï¼Œè¯·å‚è€ƒ<a href="https://solidity-by-example.org/">SolidityByExample</a>ã€‚</p><h3 id="å‘é€ä»¥å¤ªå¸çš„é€»è¾‘æµç¨‹">å‘é€ä»¥å¤ªå¸çš„é€»è¾‘æµç¨‹</h3><pre class="language-none"><code class="language-none">å‘åˆçº¦å‘é€ä»¥å¤ªå¸        |        â†“    msg.dataä¸ºç©ºå—ï¼Ÿ      &#x2F;        \     æ˜¯          å¦    &#x2F;            \  receive()å­˜åœ¨ï¼Ÿ   fallback()    &#x2F;      \   æ˜¯        å¦  &#x2F;          \receive()     fallback()</code></pre><h3 id="å‘fundMeåˆçº¦å‘é€ä»¥å¤ªå¸">å‘fundMeåˆçº¦å‘é€ä»¥å¤ªå¸</h3><p>å½“ç”¨æˆ·ç›´æ¥å‘<code>fundMe</code>åˆçº¦å‘é€ä»¥å¤ªå¸è€Œä¸è°ƒç”¨<code>fund</code>å‡½æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>receive</code>å‡½æ•°å°†äº¤æ˜“é‡å®šå‘åˆ°<code>fund</code>å‡½æ•°ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token punctuation">&#123;</span>    <span class="token function">fund</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">fallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token punctuation">&#123;</span>    <span class="token function">fund</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è¦æµ‹è¯•æ­¤åŠŸèƒ½ï¼Œå¯ä½¿ç”¨MetaMaskå‘<code>fundMe</code>åˆçº¦å‘é€ä¸€äº›Sepoliaæµ‹è¯•ç½‘ä»¥å¤ªå¸ã€‚æ­¤æ—¶å¹¶æœªç›´æ¥è°ƒç”¨<code>fund</code>å‡½æ•°ï¼Œä½†<code>receive</code>å‡½æ•°ä¼šè§¦å‘å®ƒã€‚ç¡®è®¤äº¤æ˜“åï¼Œæ£€æŸ¥<code>funders</code>æ•°ç»„ï¼Œä¼šå‘ç°å…¶å·²æ›´æ–°ï¼Œè¡¨æ˜<code>receive</code>å‡½æ•°æˆåŠŸè°ƒç”¨äº†<code>fund</code>å‡½æ•°ã€‚</p><p>è¿™ç§æ–¹æ³•ç¡®ä¿æ‰€æœ‰äº¤æ˜“æŒ‰é¢„æœŸå¤„ç†ã€‚å°½ç®¡ç›´æ¥è°ƒç”¨<code>fund</code>å‡½æ•°æ¶ˆè€—çš„Gasæ›´å°‘ï¼Œä½†æ­¤æ–¹æ³•èƒ½ç¡®ä¿ç”¨æˆ·çš„è´¡çŒ®è¢«æ­£ç¡®ç¡®è®¤å’Œè®°å½•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Web3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Solidity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WEB3-Day6â€”SolidityåŸºç¡€[part5]</title>
      <link href="/2025/07/03/WEB3-Day6%E2%80%94Solidity%E5%9F%BA%E7%A1%80-part5/"/>
      <url>/2025/07/03/WEB3-Day6%E2%80%94Solidity%E5%9F%BA%E7%A1%80-part5/</url>
      <cover>https://img.soniachen.com/blog/posts/2025/07/image-20250703173726505.png</cover>
      <date>Thu Jul 03 2025 15:14:03 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>WEB3-Day6â€”SolidityåŸºç¡€[part5]</h1><blockquote><p>ç»§ç»­å®Œå–„<code>fundMe</code>åˆçº¦ çš„ fund() å’Œ withDraw()</p></blockquote><h2 id="è½¬æ¢ETHä¸ºUSD">è½¬æ¢ETHä¸ºUSD</h2><p>å¦‚æœæˆ‘ä»¬çš„æœ€å°äº¤æ˜“å€¼éœ€è¦ç”¨ç¾å…ƒä¸ºå•ä½ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•å’Œmsg.valueè¿›è¡Œæ¯”è¾ƒï¼Ÿ</p><p>æ–°å»ºä¸€ä¸ªå˜é‡ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token builtin">uint256</span> <span class="token keyword">public</span>  minimumUsd <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">1e18</span><span class="token punctuation">;</span>  <span class="token comment">// è¡¥å…¨ç²¾åº¦</span></code></pre><p>æ–°å»ºä¸¤ä¸ªå‡½æ•°ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// Function to get the price of Ethereum in USD</span><span class="token keyword">function</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token comment">// Function to convert a value based on the price</span><span class="token keyword">function</span> <span class="token function">getConversionRate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></code></pre><ul><li><strong>getPrice()</strong>:è·å–çœŸå®ä¸–ç•Œä¸­ä»¥å¤ªåŠå½“å‰çš„ç¾å…ƒå¸‚åœºä»·æ ¼</li><li><strong>getConversionRate()</strong>ï¼šæ ¹æ®å½“å‰è¾“å…¥ä»·æ ¼è¿›è¡Œè®¡ç®—å’Œè½¬æ¢</li></ul><h3 id="å»ä¸­å¿ƒåŒ–é¢„è¨€æœº">å»ä¸­å¿ƒåŒ–é¢„è¨€æœº</h3><p>ä»¥å¤ªåŠç­‰èµ„äº§çš„ç¾å…ƒä»·æ ¼æ— æ³•ä»…é€šè¿‡åŒºå—é“¾æŠ€æœ¯è·å–ï¼Œè€Œæ˜¯ç”±é‡‘èå¸‚åœºå†³å®šã€‚ä¸ºäº†è·å–æ­£ç¡®çš„<strong>ä»·æ ¼ä¿¡æ¯</strong>ï¼Œå¿…é¡»åœ¨é“¾ä¸‹æ•°æ®ä¸é“¾ä¸Šæ•°æ®ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œè¿™ä¸€éœ€æ±‚ç”±<strong>å»ä¸­å¿ƒåŒ–é¢„è¨€æœºç½‘ç»œ</strong>å®ç°ã€‚</p><p>åŒºå—é“¾å­˜åœ¨è¿™ä¸€å±€é™æ€§ï¼Œæ˜¯å› ä¸ºå…¶<strong>ç¡®å®šæ€§æœ¬è´¨</strong>â€”â€”å®ƒç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹è¾¾æˆå”¯ä¸€å…±è¯†ã€‚è‹¥å°è¯•å°†å¤–éƒ¨æ•°æ®å¼•å…¥åŒºå—é“¾ï¼Œå°†ç ´åè¿™ç§å…±è¯†ï¼Œå¯¼è‡´æ‰€è°“çš„<strong>æ™ºèƒ½åˆçº¦è¿æ¥æ€§é—®é¢˜</strong>æˆ–<strong>é¢„è¨€æœºé—®é¢˜</strong>ã€‚</p><p>è‹¥æƒ³è®©æ™ºèƒ½åˆçº¦æœ‰æ•ˆæ›¿ä»£ä¼ ç»Ÿåè®®ï¼Œå®ƒä»¬å¿…é¡»å…·å¤‡ä¸<strong>ç°å®ä¸–ç•Œæ•°æ®</strong>äº¤äº’çš„èƒ½åŠ›ã€‚</p><p>ä¾èµ–ä¸­å¿ƒåŒ–é¢„è¨€æœºä¼ è¾“æ•°æ®æ˜¯ä¸è¶³çš„ï¼Œå› ä¸ºè¿™ä¼šé‡æ–°å¼•å…¥æ½œåœ¨çš„å•ç‚¹æ•…éšœé£é™©ã€‚ä¸­å¿ƒåŒ–æ•°æ®æºä¼šå‰Šå¼±åŒºå—é“¾åŠŸèƒ½æ‰€å¿…éœ€çš„ä¿¡ä»»å‰æã€‚å› æ­¤ï¼Œä¸­å¿ƒåŒ–èŠ‚ç‚¹æ— æ³•æ»¡è¶³å¤–éƒ¨æ•°æ®æˆ–è®¡ç®—éœ€æ±‚ã€‚<strong>Chainlink</strong>é€šè¿‡æä¾›å»ä¸­å¿ƒåŒ–é¢„è¨€æœºç½‘ç»œï¼Œè§£å†³äº†è¿™äº›ä¸­å¿ƒåŒ–æŒ‘æˆ˜ã€‚</p><h4 id="ChainLinkæ•°æ®æº">ChainLinkæ•°æ®æº</h4><p><a href="https://docs.chain.link/data-feeds/using-data-feeds">Chainlink Data Feed documentation</a> æä¾›å¦‚ä½•ä¸æ•°æ®æºåˆçº¦äº¤äº’çš„æ–‡æ¡£</p><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250703173726505.png" alt="image-20250703173726505" style="zoom: 33%;" /><p><code>AggregatorV3Interface</code>ï¼šæ˜¯ä¸€ä¸ªæ•°æ®æºåœ°å€ä½œä¸ºè¾“å…¥çš„åˆçº¦ã€‚ä¿æŒETH/USDä»·æ ¼å®æ—¶æ›´æ–°ã€‚</p><p>åˆçº¦ä¸­çš„<code>latestRoundData</code> å‡½æ•°è¿”å›æœ€æ–°çš„ä»¥å¤ªåŠä»·æ ¼ã€‚</p><p>ä¸ºäº†ä½¿ç”¨åˆçº¦ï¼Œæˆ‘ä»¬éœ€è¦å®ƒçš„åœ°å€å’ŒABIã€‚è¯¥åœ°å€å¯åœ¨Chainlinkæ–‡æ¡£ä¸­çš„ <a href="https://docs.chain.link/data-feeds/price-feeds/addresses">Price Feed Contract Addresses</a>éƒ¨åˆ†æ‰¾åˆ°ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ETH/USDã€‚</p><p>é¦–å…ˆå¯¼å…¥è¯¥åˆçº¦ï¼Œå¯ä»¥é€šè¿‡githubåœ°å€å¯¼å…¥</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>AggregatorV3Interface<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@chainlink/contracts/src/v0.8/shared/interfaces/AggregatorV3Interface.sol"</span><span class="token punctuation">;</span></code></pre><p>åœ¨chainLinkæ‰¾åˆ°ETH/USDåœ°å€ï¼Œè°ƒç”¨latestRoundDataå‡½æ•°è·å–answerï¼Œä¸ç”¨çš„å‚æ•°å¯ä»¥ç”¨<code>,</code>ç›¸éš”ï¼Œå› ä¸ºè¿”å›çš„answeræ˜¯intç±»å‹éœ€è¦è½¬æ¢uint</p><h3 id="å®Œå–„getPrice">å®Œå–„getPrice() :</h3><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">function</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span>  <span class="token keyword">view</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        AggregatorV3Interface addressToBeFetched <span class="token operator">=</span> <span class="token function">AggregatorV3Interface</span><span class="token punctuation">(</span><span class="token number">0x694AA1769357215DE4FAC081bf1f309aDC325306</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">(</span><span class="token punctuation">,</span> <span class="token builtin">int256</span> answer<span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token operator">=</span> addressToBeFetched<span class="token punctuation">.</span><span class="token function">latestRoundData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ( ,,,, , )  å–å‡ºåœ°å€ï¼Œå€¼ï¼Œé”™è¯¯ç ç­‰</span>        <span class="token keyword">return</span> <span class="token builtin">uint256</span><span class="token punctuation">(</span>answer <span class="token operator">*</span> <span class="token number">1e18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><p><strong>msg.value</strong> æ˜¯ä¸€ä¸ªå…·æœ‰ 18 ä½å°æ•°ç²¾åº¦çš„ uint256 å€¼ã€‚</p><p><strong>answer</strong> æ˜¯ä¸€ä¸ªå…·æœ‰ 8 ä½å°æ•°ç²¾åº¦çš„ int256 å€¼ï¼ˆåŸºäº USD çš„äº¤æ˜“å¯¹ä½¿ç”¨ 8 ä½å°æ•°ï¼Œè€ŒåŸºäº ETH çš„äº¤æ˜“å¯¹ä½¿ç”¨ 18 ä½å°æ•°ï¼‰ã€‚</p><p>è¿™æ„å‘³ç€ä»æˆ‘ä»¬çš„latestRoundDataå‡½æ•°è¿”å›çš„ä»·æ ¼ä¸msg.valueä¸ç›´æ¥å…¼å®¹ã€‚ä¸ºäº†åŒ¹é…å°æ•°ä½æ•°ï¼Œæˆ‘ä»¬å°†ä»·æ ¼ä¹˜ä»¥1e10.</p><blockquote><p>âš ï¸ å§‹ç»ˆå…ˆä¹˜åé™¤ä¿æŒç²¾åº¦é¿å…æˆªæ–­é”™è¯¯ã€‚</p></blockquote><h3 id="å®Œå–„getConversionRate">å®Œå–„getConversionRate():</h3><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">function</span> <span class="token function">getConversionRate</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> ethAmmout<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token builtin">uint256</span> ethPrice <span class="token operator">=</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token punctuation">(</span>ethPrice<span class="token operator">*</span>ethAmmout<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1e18</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span></code></pre><blockquote><p>uint256 ethAmountInUsd = (ethPrice * ethAmount)</p><p>å¾—åˆ°çš„ç»“æœç²¾åº¦ä¸º 1e18 * 1e18 = 1e36ã€‚ä¸ºäº†å°† ethAmountInUsd çš„ç²¾åº¦æ¢å¤åˆ° 1e18ï¼Œæˆ‘ä»¬éœ€è¦å°†ç»“æœé™¤ä»¥ 1e18ã€‚</p></blockquote><h3 id="æ›´æ”¹fund-ï¼š">æ›´æ”¹fund()ï¼š</h3><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token function">getConversionRate</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">>=</span> MINIMUM_USD<span class="token punctuation">,</span> <span class="token string">"You need to spend more ETH!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>éƒ¨ç½²åˆçº¦ï¼Œè°ƒç”¨getPriceå‡½æ•°è·å–å½“å‰ä»¥å¤ªåŠä»·æ ¼ã€‚è¿˜å¯ä»¥å‘è¯¥åˆçº¦å‘é€èµ„é‡‘ï¼Œå¦‚æœETHé‡‘é¢ä½äº5ç¾å…ƒå°±ä¸€ä¼šæŠ¥é”™ã€‚</p><p>å®Œæ•´ä»£ç ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.18</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>AggregatorV3Interface<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@chainlink/contracts/src/v0.8/shared/interfaces/AggregatorV3Interface.sol"</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">FundMe</span><span class="token punctuation">&#123;</span>    <span class="token builtin">uint256</span> <span class="token keyword">public</span>  minimumUsd <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">1e18</span><span class="token punctuation">;</span> <span class="token comment">// è¡¥å…¨ç²¾åº¦</span>        <span class="token keyword">function</span> <span class="token function">fund</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">payable</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token function">getConversionRate</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">></span> minimumUsd<span class="token punctuation">,</span> <span class="token string">"Didn't send enough ETH"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//if the condition is false, revert with the error message    &#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">withDraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è·å–å½“å‰çš„ethå¯¹åº”å®é™…ä¸–ç•Œçš„ç¾å…ƒä»·æ ¼</span>    <span class="token keyword">function</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        AggregatorV3Interface addressToBeFetched <span class="token operator">=</span> <span class="token function">AggregatorV3Interface</span><span class="token punctuation">(</span><span class="token number">0x1b44F3514812d835EB1BDB0acB33d3fA3351Ee43</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">(</span><span class="token punctuation">,</span> <span class="token builtin">int256</span> answer<span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token operator">=</span> addressToBeFetched<span class="token punctuation">.</span><span class="token function">latestRoundData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ( ,,,, , )  å–å‡ºåœ°å€ï¼Œå€¼ï¼Œé”™è¯¯ç ç­‰</span>        <span class="token keyword">return</span> <span class="token builtin">uint256</span><span class="token punctuation">(</span>answer <span class="token operator">*</span> <span class="token number">1e18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">getConversionRate</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> ethAmmout<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token builtin">uint256</span> ethPrice <span class="token operator">=</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>ethPrice<span class="token operator">*</span>ethAmmout<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1e18</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="è¿½è¸ªèµ„é‡‘">è¿½è¸ªèµ„é‡‘</h3><p>ä¸ºäº†è¿½è¸ªå‘åˆçº¦å‘é€èµ„é‡‘çš„åœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸ºfundersçš„åœ°å€arrayè®°å½•ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token builtin">address</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> funders<span class="token punctuation">;</span></code></pre><p>fund()å‡½æ•°ä¸­æ·»åŠ ä»¥ä¸‹é€»è¾‘ï¼Œæ¯å½“æœ‰äººå‘åˆçº¦å‘é€é’±æ—¶ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨pushå‡½æ•°å°†ä»–ä»¬çš„åœ°å€æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity">funders<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="åº“-Libraries">åº“[Libraries]</h3><p>å½“æŸä¸ªåŠŸèƒ½å…·æœ‰é€šç”¨æ€§çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªlibraryåº“æ¥é«˜æ•ˆç®¡ç†é‡å¤ä»£ç ã€‚</p><p>getPrice()å‡½æ•°å’ŒgetConversionRate()è¿™äº›æ–¹æ³•å¯ä»¥è¢«ä»»ä½•ä½¿ç”¨ä»·æ ¼é¢„è¨€æœºçš„åˆçº¦å¤šæ¬¡å¤ç”¨ã€‚</p><p>åœ¨Solidityç¤ºä¾‹ç½‘ç«™ <a href="https://solidity-by-example.org/library/">Solidity by example</a>ä¸Šå¯ä»¥æ‰¾åˆ°ä¼˜ç§€çš„åº“ç¤ºä¾‹ã€‚Solidityçš„åº“ä¸åˆçº¦ç±»ä¼¼ï¼Œä½†ä¸å…è®¸å£°æ˜ä»»ä½•çŠ¶æ€å˜é‡ï¼Œä¹Ÿä¸èƒ½æ¥æ”¶ETHã€‚</p><blockquote><p>ğŸ“¢ åº“ä¸­æ‰€æœ‰çš„å‡½æ•°éƒ½å¿…é¡»å£°æ˜ä¸ºinternalï¼Œå¿…é¡»ç‹¬ç«‹éƒ¨ç½²ä»¥åå†é“¾æ¥åˆ°ä¸»åˆçº¦ã€‚</p></blockquote><p>åˆ›å»ºæ–°æ–‡ä»¶<code>PriceConverter.sol</code>ï¼Œå°†ä¸¤ä¸ªå‡½æ•°çš„é€»è¾‘å‰ªåˆ‡åˆ°è¿™è¾¹ï¼Œæ³¨æ„å£°æ˜internal</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.18</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>AggregatorV3Interface<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@chainlink/contracts/src/v0.8/shared/interfaces/AggregatorV3Interface.sol"</span><span class="token punctuation">;</span><span class="token keyword">library</span> <span class="token class-name">PriceConverter</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">function</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">internal</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        AggregatorV3Interface priceFeed <span class="token operator">=</span> <span class="token function">AggregatorV3Interface</span><span class="token punctuation">(</span><span class="token number">0x694AA1769357215DE4FAC081bf1f309aDC325306</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">(</span><span class="token punctuation">,</span> <span class="token builtin">int256</span> answer<span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token punctuation">)</span> <span class="token operator">=</span> priceFeed<span class="token punctuation">.</span><span class="token function">latestRoundData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token builtin">uint256</span><span class="token punctuation">(</span>answer <span class="token operator">*</span> <span class="token number">10000000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">getConversionRate</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> ethAmount<span class="token punctuation">)</span> <span class="token keyword">internal</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token builtin">uint256</span> ethPrice <span class="token operator">=</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token builtin">uint256</span> ethAmountInUsd <span class="token operator">=</span> <span class="token punctuation">(</span>ethPrice <span class="token operator">*</span> ethAmount<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000000000000000000</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> ethAmountInUsd<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸»åˆçº¦<code>FundMe</code>ä¿®æ”¹ä¸ºï¼š</p><ul><li>importåº“</li><li>using PriceConvertor for uint256 ï¼šè¡¨ç¤ºæ‰€æœ‰uint256ç±»å‹å¯ä»¥è°ƒç”¨è¯¥libraryçš„å‡½æ•°</li><li>msg.value.getConversionRate() ç›´æ¥è°ƒç”¨</li></ul><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.18</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>PriceConvertor<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./PriceConvertor.sol"</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">FundMe</span><span class="token punctuation">&#123;</span>    <span class="token comment">// è¡¨ç¤ºæ‰€æœ‰uint256ç±»å‹å¯ä»¥è°ƒç”¨è¯¥libraryçš„å‡½æ•°</span>    <span class="token keyword">using</span> <span class="token class-name">PriceConvertor</span> <span class="token keyword">for</span> <span class="token builtin">uint256</span><span class="token punctuation">;</span>    <span class="token builtin">address</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> funders<span class="token punctuation">;</span>     <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> funderAddress <span class="token operator">=></span> <span class="token builtin">uint256</span> funderAmount<span class="token punctuation">)</span> <span class="token keyword">public</span> funderAmountMap<span class="token punctuation">;</span>    <span class="token builtin">uint256</span> <span class="token keyword">public</span>  minimumUsd <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">1e18</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">fund</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">payable</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">require</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">getConversionRate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> minimumUsd<span class="token punctuation">,</span> <span class="token string">"Didn't send enough ETH"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//if the condition is false, revert with the error message    &#125;</span>        <span class="token comment">//è®°å½•è¿½è¸ªèµ„é‡‘</span>        funders<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">)</span><span class="token punctuation">;</span>        funderAmountMap<span class="token punctuation">[</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">]</span> <span class="token operator">+=</span> msg<span class="token punctuation">.</span>value<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">withDraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="solidity-0-8åå˜æ›´">solidity 0.8åå˜æ›´</h3><p><code>safeMath</code> ä½œä¸º0.8ç‰ˆæœ¬ä¹‹å‰å¹¿æ³›è¢«ä½¿ç”¨çš„åº“ï¼Œæ›¾æ˜¯æ™ºèƒ½åˆçº¦ä¸­çš„æ ‡é…åŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆå¦‚ä»Šä¸å†ä½¿ç”¨äº†å‘¢ï¼Ÿ</p><p>å¯ä»¥è°ƒæ•´åˆ°ç¼–è¯‘å™¨ç‰ˆæœ¬ä¸º<code>0.6.0</code> ï¼Œæ–°å»ºä¸€ä¸ªåˆçº¦<code>SafeMathTester</code></p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SafeMathTester.sol</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.6.0</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">SafeMathTester</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">uint8</span> <span class="token keyword">public</span> bigNumber <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span>        bigNumber <span class="token operator">=</span> bigNumber <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç¼–è¯‘è°ƒç”¨è¯¥å‡½æ•°ï¼Œ<strong>å‘ç°bigNumberå€¼ä¼šè¢«é‡ç½®ä¸º0</strong>ï¼Œè¿™æ˜¯å› ä¸º0.8ç‰ˆæœ¬ä¹‹å‰ï¼Œæœ‰ç¬¦å·æˆ–è€…æ— ç¬¦å·çš„æ•´æ•°éƒ½æ˜¯æœªæ£€æŸ¥çš„ï¼Œæ„å‘³ç€å¦‚æœä»–ä»¬è¶…è¿‡å˜é‡ç±»å‹èƒ½å¤Ÿå®¹çº³çš„æœ€å¤§å€¼ï¼Œå°±ä¼šé‡ç½®ä¸ºä¸‹é™å€¼ã€‚</p><p>è€Œ<code>safeMath</code>ä¼šæä¾›ä¸€ä¸ªæœºåˆ¶ï¼Œè¾¾åˆ°æœ€å¤§é™åˆ¶æ—¶å›æ»šäº¤æ˜“ï¼Œé¿å…é”™è¯¯è®¡ç®—å’Œæ¼æ´ã€‚</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token builtin">uint</span> a<span class="token punctuation">,</span> <span class="token builtin">uint</span> b<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">uint</span> c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>    <span class="token keyword">require</span><span class="token punctuation">(</span>c <span class="token operator">>=</span> a<span class="token punctuation">,</span> <span class="token string">"SafeMath: addition overflow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> c<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p><code>0.8.0</code>ä»¥åï¼Œsolidityå·²ç»å®ç°è‡ªåŠ¨åŒ–æº¢å‡ºä¸‹æº¢æ£€æŸ¥ï¼Œåœ¨æ–°ç‰ˆæœ¬éƒ¨ç½²<code>SafeMathTester</code> å°†ä¼šæŠ¥é”™è€Œä¸æ˜¯é‡ç½®ä¸º0ï¼›</p><p>åŒæ—¶ï¼Œä¹Ÿå¼•å…¥uncheckedç»“æ„æ¥æé«˜ä»£ç çš„gasæ•ˆç‡ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token builtin">uint8</span> <span class="token keyword">public</span> bigNumber <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span>    unchecked <span class="token punctuation">&#123;</span>        bigNumber <span class="token operator">=</span> bigNumber <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¢«uncheckedåŒ…è£¹çš„ä»£ç å—å°†å¿½ç•¥æº¢å‡ºå’Œä¸‹æº¢æ£€æŸ¥ï¼Œå¦‚æœè¶…å‡ºé™åˆ¶ï¼Œå°±ä¼šé‡ç½®åˆ°0ã€‚</p><h2 id="ä»åˆçº¦å‘é€ETH">ä»åˆçº¦å‘é€ETH</h2><p>æ¥ä¸‹æ¥è¿›è¡Œèµ„é‡‘çš„æå–</p><h3 id="é‡ç½®èµ„é‡‘">é‡ç½®èµ„é‡‘</h3><p>å‹Ÿé›†èµ„é‡‘äº†ä»¥åï¼Œåˆçº¦ä¸­å·²ç»å­˜å‚¨äº†æ‰€æœ‰å‹Ÿé›†çš„èµ„é‡‘ï¼Œæ‰€ä»¥åœ¨èµ„é‡‘æå–è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ¸…ç©ºè¿½è¸ªèµ„é‡‘çš„æ•°ç»„å’Œé›†åˆï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°å¾ªç¯ï¼š</p><p>é¦–å…ˆå°†mapç½®ç©ºï¼Œå†å°†æ•°ç»„ç½®ç©º</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">function</span> <span class="token function">withDraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//  Reset the funder records</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span> funderIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> funderIndex <span class="token operator">&lt;</span> funders<span class="token punctuation">.</span>length<span class="token punctuation">;</span> funderIndex <span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token builtin">address</span> funder <span class="token operator">=</span> funders<span class="token punctuation">[</span>funderIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>        funderAmountMap<span class="token punctuation">[</span>funder<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// reset the array</span>    funders <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">address</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æ„é€ å‡½æ•°">æ„é€ å‡½æ•°</h3><p>ç›®å‰ï¼Œä»»ä½•äººéƒ½å¯ä»¥è°ƒç”¨ææ¬¾å‡½æ•°å¹¶å°†æ‰€æœ‰èµ„é‡‘ä»åˆçº¦ä¸­æèµ°ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å°†ææ¬¾å‡½æ•°é™åˆ¶ä¸ºä»…åˆçº¦æ‰€æœ‰è€…å¯ä»¥è°ƒç”¨ã€‚</p><p>è§£å†³åŠæ³•å°±æ˜¯æ„é€ å‡½æ•°ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></code></pre><p><strong>æ„é€ å‡½æ•°ä¼šåœ¨åˆçº¦éƒ¨ç½²æœŸé—´è‡ªåŠ¨è°ƒç”¨ï¼Œä¸éƒ¨ç½²åˆçº¦çš„äº¤æ˜“åœ¨åŒä¸€ç¬”äº¤æ˜“ä¸­æ‰§è¡Œã€‚</strong></p><p>åœ¨å‡½æ•°é‡Œï¼Œæˆ‘ä»¬å°†çŠ¶æ€å˜é‡æ‰€æœ‰è€…åˆå§‹åŒ–ä¸ºåˆçº¦éƒ¨ç½²è€…çš„åœ°å€ï¼ˆmsg.senderï¼‰ã€‚</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token builtin">address</span> <span class="token keyword">public</span> owner<span class="token punctuation">;</span><span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    owner <span class="token operator">=</span> msg<span class="token punctuation">.</span>sender<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>æ›´æ–°withDrawå‡½æ•°ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">function</span> <span class="token function">withdraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">require</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender <span class="token operator">==</span> owner<span class="token punctuation">,</span> <span class="token string">"must be owner"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// rest of the function here</span><span class="token punctuation">&#125;</span></code></pre><p>é™åˆ¶åªæœ‰åˆçº¦æ‹¥æœ‰è€…æ‰å¯ä»¥è¿›è¡Œæå–ã€‚</p><h4 id="modifyä¼˜åŒ–">modifyä¼˜åŒ–</h4><p>Solidity ä¸­çš„ä¿®é¥°å™¨ï¼ˆModifierï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„åˆçº¦å…ƒç¼–ç¨‹å·¥å…·ï¼Œç”¨äºåœ¨æ‰§è¡Œå‡½æ•°å‰ / åæ³¨å…¥é¢å¤–é€»è¾‘ï¼ˆå¦‚æƒé™æ£€æŸ¥ã€çŠ¶æ€éªŒè¯ç­‰ï¼‰ã€‚åˆç†ä½¿ç”¨ä¿®é¥°å™¨ä¸ä»…èƒ½æé«˜ä»£ç å¤ç”¨æ€§ï¼Œè¿˜èƒ½æ˜¾è‘—ä¼˜åŒ–åˆçº¦æ€§èƒ½ä¸å®‰å…¨æ€§ã€‚</p><p>ä¸Šè¿°çš„æƒé™æ£€æŸ¥å¯ä»¥å•ç‹¬æ‹†å‡ºæ¥ä½œä¸ºmodifyå‡½æ•°</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">modifier</span> onlyOwner <span class="token punctuation">&#123;</span>        <span class="token keyword">require</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender <span class="token operator">==</span> owner<span class="token punctuation">,</span><span class="token string">"Must be the Owner!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">_</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><p>åŸå‡½æ•°æ·»åŠ <code>onlyOwner</code>ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">function</span> <span class="token function">withdraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> onlyOwner <span class="token punctuation">&#123;</span>   <span class="token punctuation">&#125;</span></code></pre><h3 id="è½¬è´¦">è½¬è´¦</h3><h4 id="Transfer">Transfer</h4><p>æ˜¯ä»¥å¤ªå¸è½¬å¸è‡³æ¥æ”¶åœ°å€çš„æœ€ç®€å•æ–¹å¼</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">payable</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// the current contract sends the Ether amount to the msg.sender</span></code></pre><p>ç„¶è€Œï¼Œtransferæœ‰ä¸€ä¸ªæ˜¾è‘—çš„é™åˆ¶ã€‚å®ƒåªèƒ½ä½¿ç”¨æœ€å¤š2300ä¸ªgasï¼Œå¹¶ä¸”å®ƒä¼šå›æ»šä»»ä½•è¶…å‡ºè¿™ä¸ªé™åˆ¶çš„äº¤æ˜“ï¼Œæ­£å¦‚ã€ŠSolidityå®ä¾‹æ•™ç¨‹ã€‹ <a href="https://solidity-by-example.org/sending-ether/">Solidity by Example</a>æ‰€ç¤ºã€‚</p><blockquote><p>ğŸ§ ä¸ºä»€ä¹ˆéœ€è¦<code>payable</code>å…³é”®å­—ï¼Ÿ</p><p>å¿…é¡»å°†æ¥æ”¶è€…åœ°å€è½¬æ¢ä¸ºå¯æ”¯ä»˜åœ°å€ï¼Œä»¥ä¾¿å®ƒèƒ½å¤Ÿæ¥æ”¶ä»¥å¤ªå¸ã€‚å¯ä»¥é€šè¿‡å°†msg.senderç”¨å¯payableå…³é”®å­—åŒ…è£¹æ¥å®ç°ã€‚</p></blockquote><h4 id="Send">Send</h4><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token builtin">bool</span> success <span class="token operator">=</span> <span class="token keyword">payable</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span>balance<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">require</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> <span class="token string">"Send failed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä¸transferç±»ä¼¼ï¼Œsendä¹Ÿæœ‰2300çš„gasé™åˆ¶ã€‚å¦‚æœè¾¾åˆ°gasé™åˆ¶ï¼Œå®ƒä¸ä¼šæ’¤é”€äº¤æ˜“ï¼Œä½†ä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆtrueæˆ–falseï¼‰ä»¥æŒ‡ç¤ºäº¤æ˜“çš„æˆåŠŸæˆ–å¤±è´¥ã€‚å¤„ç†å¤±è´¥æ˜¯å¼€å‘è€…çš„è´£ä»»ï¼Œå¦‚æœsendè¿”å›falseï¼Œè§¦å‘æ’¤é”€æ¡ä»¶æ˜¯ä¸€ç§è‰¯å¥½çš„å®è·µã€‚</p><h4 id="Call">Call</h4><p>callå‡½æ•°éå¸¸çµæ´»å’Œå¼ºå¤§ã€‚å®ƒå¯ä»¥ç”¨æ¥è°ƒç”¨ä»»ä½•å‡½æ•°ï¼Œè€Œä¸éœ€è¦å®ƒçš„ABIã€‚å®ƒæ²¡æœ‰gasé™åˆ¶ï¼Œå¹¶ä¸”åƒsendä¸€æ ·ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè€Œä¸æ˜¯åƒtransferé‚£æ ·å›æ»šã€‚</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token punctuation">(</span><span class="token builtin">bool</span> success<span class="token punctuation">,</span> <span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">payable</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">)</span><span class="token punctuation">.</span>call<span class="token punctuation">&#123;</span>value<span class="token punctuation">:</span> <span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span>balance<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">require</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> <span class="token string">"Call failed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>callå‡½æ•°è¿”å›ä¸¤ä¸ªå˜é‡(bool success, )ï¼šä¸€ä¸ªè¡¨ç¤ºæˆåŠŸæˆ–å¤±è´¥çš„å¸ƒå°”å€¼ï¼Œä»¥åŠä¸€ä¸ªå­˜å‚¨è¿”å›æ•°æ®çš„å­—èŠ‚å¯¹è±¡ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚</p><blockquote><p>â—callæ˜¯å‘é€å’Œæ¥æ”¶ä»¥å¤ªåŠæˆ–å…¶ä»–åŒºå—é“¾åŸç”Ÿä»£å¸çš„æ¨èæ–¹å¼ã€‚</p></blockquote><h2 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </h2><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.18</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>PriceConvertor<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./PriceConvertor.sol"</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">FundMe</span><span class="token punctuation">&#123;</span>    <span class="token builtin">address</span> <span class="token keyword">public</span> owner<span class="token punctuation">;</span>    <span class="token keyword">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        owner <span class="token operator">=</span> msg<span class="token punctuation">.</span>sender<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è¡¨ç¤ºæ‰€æœ‰uint256ç±»å‹å¯ä»¥è°ƒç”¨è¯¥libraryçš„å‡½æ•°</span>    <span class="token keyword">using</span> <span class="token class-name">PriceConvertor</span> <span class="token keyword">for</span> <span class="token builtin">uint256</span><span class="token punctuation">;</span>    <span class="token builtin">address</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> funders<span class="token punctuation">;</span>     <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> funderAddress <span class="token operator">=></span> <span class="token builtin">uint256</span> funderAmount<span class="token punctuation">)</span> <span class="token keyword">public</span> funderAmountMap<span class="token punctuation">;</span>    <span class="token builtin">uint256</span> <span class="token keyword">public</span>  minimumUsd <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">1e18</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">fund</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">payable</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">require</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">getConversionRate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> minimumUsd<span class="token punctuation">,</span> <span class="token string">"Didn't send enough ETH"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//if the condition is false, revert with the error message    &#125;</span>            funders<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">)</span><span class="token punctuation">;</span>        funderAmountMap<span class="token punctuation">[</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">]</span> <span class="token operator">+=</span> msg<span class="token punctuation">.</span>value<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">withDraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> onlyOwner<span class="token punctuation">&#123;</span>        <span class="token comment">//  Reset the funder records</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span> funderIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> funderIndex <span class="token operator">&lt;</span> funders<span class="token punctuation">.</span>length<span class="token punctuation">;</span> funderIndex <span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token builtin">address</span> funder <span class="token operator">=</span> funders<span class="token punctuation">[</span>funderIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>            funderAmountMap<span class="token punctuation">[</span>funder<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// reset the array</span>        funders <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">address</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// send money to msg.sender[three ways]</span>        <span class="token comment">// transfer</span>            <span class="token comment">// payable(msg.sender).transfer(amount); // the current contract sends the Ether amount to the msg.sender</span>        <span class="token comment">// send</span>            <span class="token comment">// bool success = payable(msg.sender).send(address(this).balance); require(success, "Send failed");</span>        <span class="token comment">// call</span>        <span class="token punctuation">(</span><span class="token builtin">bool</span> success<span class="token punctuation">,</span> <span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">payable</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">)</span><span class="token punctuation">.</span>call<span class="token punctuation">&#123;</span>value<span class="token punctuation">:</span> <span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span>balance<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">require</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> <span class="token string">"Call failed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// ä»»ä½•ç”±onlyOwnerä¿®é¥°éƒ½ä¼šå…ˆæ‰§è¡Œè¿™éƒ¨åˆ†ä»£ç ï¼Œâ€œ_;â€ä»£è¡¨è¢«ä¿®é¥°çš„å‡½æ•°çš„ä»£ç ï¼Œæ”¾åœ¨requireä¹‹å‰å°±æ˜¯å…ˆæ‰§è¡Œå®Œå‡½æ•°ä»£ç å†æ‰§è¡Œmodifierä»£ç å—ä¸­å†…å®¹</span>    <span class="token keyword">modifier</span> onlyOwner <span class="token punctuation">&#123;</span>        <span class="token keyword">require</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender <span class="token operator">==</span> owner<span class="token punctuation">,</span><span class="token string">"Must be the Owner!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">_</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Web3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BlockChain </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WEB3-Day5â€”SolidityåŸºç¡€[part4]</title>
      <link href="/2025/07/01/WEB3-Day5%E2%80%94Solidity%E5%9F%BA%E7%A1%80-part4/"/>
      <url>/2025/07/01/WEB3-Day5%E2%80%94Solidity%E5%9F%BA%E7%A1%80-part4/</url>
      <cover>https://img.soniachen.com/blog/posts/2025/07/image-20250702172430218.png</cover>
      <date>Tue Jul 01 2025 18:15:52 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>WEB3-Day5â€”SolidityåŸºç¡€[part4]</h1><h2 id="é€šè¿‡å‡½æ•°å‘é€ETH">é€šè¿‡å‡½æ•°å‘é€ETH</h2><p>æ–°å»ºåˆçº¦ <code>FundMe.sol</code>ï¼Œåœ¨æœ¬åˆçº¦ä¸­ä¼šé€šè¿‡<code>fund()</code>å‡½æ•°å‘æ™ºèƒ½åˆçº¦è½¬ç§»ä»¥å¤ªå¸ã€‚è¯¥å‡½æ•°å°†è¦æ±‚æœ€ä½æ•°é‡çš„ETHç¡®ä¿äº¤æ˜“æ­£å¸¸ã€‚</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.18</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">FundMe</span><span class="token punctuation">&#123;</span>    <span class="token keyword">function</span> <span class="token function">fund</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªWithdrawå‡½æ•°ï¼Œè¿™æ ·åˆçº¦çš„owner(æ‹¥æœ‰è€…)å¯ä»¥æå–ä¸åŒçš„funder å‘é€çš„èµ„é‡‘ã€‚</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.18</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">FundMe</span><span class="token punctuation">&#123;</span>    <span class="token keyword">function</span> <span class="token function">fund</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">withDraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å½“äº¤æ˜“è¢«å‘é€åˆ°åŒºå—é“¾æ—¶ï¼Œäº¤æ˜“æ•°æ®ä¸­å§‹ç»ˆåŒ…å«ä¸€ä¸ªvalueå­—æ®µã€‚è¯¥å­—æ®µè¡¨ç¤ºè¯¥äº¤æ˜“ä¸­è½¬è´¦çš„åŸç”ŸåŠ å¯†è´§å¸æ•°é‡ã€‚</p><p>è¦ä½¿fundå‡½æ•°å¯ä»¥æ¥å—etherï¼Œå¿…é¡»å°†å…¶å£°æ˜ä¸ºpayableã€‚åŒæ—¶åœ¨remixç•Œé¢ä¸­éƒ¨ç½²äº†å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå…³é”®å­—ä¼šä½¿å‡½æ•°æ˜¾ç¤ºä¸ºçº¢è‰²ï¼Œè¡¨ç¤ºå®ƒå¯ä»¥æ¥å—åŠ å¯†è´§å¸ã€‚</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">function</span> <span class="token function">fund</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">payable</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span></code></pre><h3 id="msy-value-å±æ€§">msy.value å±æ€§</h3><p>åœ¨solidityä¸­ï¼Œäº¤æ˜“çš„æ•°å€¼å¯ä»¥é€šè¿‡è¿™ä¸ªå±æ€§è¿›è¡Œè®¿é—®ï¼Œæ˜¯å…¨å±€å¯¹è±¡msgçš„ä¸€éƒ¨åˆ†ï¼Œè¡¨ç¤ºå½“å‰äº¤æ˜“ä¸­ä¼ è¾“çš„Weiçš„æ•°é‡ã€‚ã€Weiæ˜¯ETHçš„æœ€å°å•ä½ã€‘</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">function</span> <span class="token function">fund</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">payable</span> <span class="token punctuation">&#123;</span>        msg<span class="token punctuation">.</span>value<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="äº¤æ˜“å­—æ®µ">äº¤æ˜“å­—æ®µ</h3><p>ä»¥å¤ªåŠä¸Šå‘é€çš„æ¯ç¬”äº¤æ˜“éƒ½åŒ…å«ä¸€äº›å¿…è¦å­—æ®µï¼Œè¿™äº›å­—æ®µåŒ…æ‹¬ï¼š</p><ul><li><strong>Nonce</strong>ï¼šè¿™æ˜¯å‘é€åœ°å€çš„äº¤æ˜“è®¡æ•°å™¨ã€‚å®ƒç¡®ä¿äº¤æ˜“æŒ‰é¡ºåºæ‰§è¡Œï¼Œå¹¶é˜²æ­¢é‡æ’­æ”»å‡»ã€‚</li><li><strong>Gas Price</strong>ï¼šè¿™æ˜¯å‘é€è€…æ„¿æ„æ”¯ä»˜çš„ gas å•ä»·ï¼Œä»¥å¤ªåŠç½‘ç»œä¼šæ ¹æ® gas price å’Œ gas limit æ¥è®¡ç®—æ‰‹ç»­è´¹ã€‚</li><li><strong>Gas Limit</strong>ï¼šè¿™æ˜¯äº¤æ˜“æ‰§è¡Œæ‰€éœ€çš„æœ€å¤§ gas æ•°é‡ã€‚å®ƒå†³å®šäº†äº¤æ˜“çš„å¤æ‚ç¨‹åº¦å’Œæˆæœ¬ã€‚</li><li><strong>To</strong>ï¼šè¿™æ˜¯æ¥æ”¶ä»¥å¤ªå¸æˆ–è€…è°ƒç”¨æ™ºèƒ½åˆçº¦çš„ç›®æ ‡åœ°å€ã€‚</li><li><strong>Value</strong>ï¼šè¿™æ˜¯å‘é€çš„ä»¥å¤ªå¸æ•°é‡ã€‚</li><li><strong>Data</strong>ï¼šè¿™æ˜¯å¯é€‰å­—æ®µï¼Œç”¨äºå‘æ™ºèƒ½åˆçº¦å‘é€æ•°æ®ã€‚</li><li><strong>vã€rã€s</strong>ï¼šè¿™äº›å­—æ®µç”¨äºäº¤æ˜“çš„ç­¾åéªŒè¯ï¼Œç¡®ä¿äº¤æ˜“çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ã€‚</li></ul><p>åœ¨è½¬è´¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å¡«å……å…¶ä¸­ä¸€äº›å­—æ®µï¼Œä¾‹å¦‚ï¼Œgas limitä¸­å¡«å……çš„21,000ï¼Œdataæ˜¯ç©ºçš„ï¼Œç„¶åtoæ˜¯æˆ‘ä»¬æƒ³è¦å°†äº¤æ˜“å‘é€åˆ°çš„åœ°å€ï¼Œåœ¨å‡½æ•°è°ƒç”¨çš„äº¤æ˜“ä¸­ï¼Œä»ç„¶å¯ä»¥ä»¥è¿™ç§æ–¹å¼å¡«å†™toï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶åŒæ—¶è¿›è¡Œè½¬è´¦ã€‚</p><h4 id="Value">Value</h4><p>æ¯å½“æˆ‘ä»¬åœ¨ä»»ä½•ä¸€ä¸ªå…¼å®¹EVMçš„åŒºå—é“¾ä¸Šåˆ›å»ºä¸€ç¬”äº¤æ˜“æ—¶ï¼Œè¿™ä¸ªvalueçš„å€¼ï¼Œä»£è¡¨æˆ‘ä»¬å°†é€šè¿‡è¿™ç¬”äº¤æ˜“å‘é€å¤šå°‘ETHï¼Œå½“æˆ‘ä»¬åœ¨ä¸åŒè´¦æˆ·é—´è½¬ç§»ETHæ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨valueä¸­å¡«å……ä¸åŒçš„ETHæ•°é‡ã€‚</p><p><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250702172430218.png" alt="image-20250702172430218"></p><h3 id="æ’¤é”€äº¤æ˜“-Reverting-Transactions">æ’¤é”€äº¤æ˜“[Reverting Transactions]</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>requires</code>å…³é”®å­—ä½œä¸ºæ£€æŸ¥å™¨ï¼Œå¼ºåˆ¶è¦æ±‚å‡½æ•°æ¥æ”¶è‡³å°‘<code>value</code>ä¸ªå®Œæ•´çš„ä»¥å¤ªå¸, ä¸æ»¡è¶³å°±ä¼šå›æ»šã€‚</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.18</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">FundMe</span><span class="token punctuation">&#123;</span>    <span class="token keyword">function</span> <span class="token function">fund</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">payable</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">require</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>value <span class="token operator">></span> <span class="token number">1</span> ether<span class="token punctuation">,</span> <span class="token string">"Didn't send enough ETH"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//if the condition is false, revert with the error message    &#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">withDraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p><code>msg.value &gt; 1 ether</code>ç­‰åŒäº <code>msg.value &gt; 1e18</code></p><blockquote><p>ğŸ‘€â—æç¤º<br>1 Ether = 1e9 Gwei = 1e18 Wei</p><p>Gweiæ˜¯Gasè´¹ç”¨çš„å•ä½ã€‚</p></blockquote><p>åœ¨çº¿è½¬æ¢å•ä½çš„å·¥å…· ï¼š<a href="https://eth-converter.com/">Ethconverter</a></p><p>å›æ»šæ“ä½œä¼šæ’¤é”€ä¹‹å‰çš„æ‰€æœ‰æ“ä½œï¼Œå¹¶å°†å‰©ä½™gasè´¹è¿”è¿˜ç»™äº¤æ˜“è€…ï¼Œæˆ‘ä»¬åœ¨fundå‡½æ•°ä¸­æ·»åŠ ä¸€äº›é€»è¾‘ï¼š</p><p><code>myvalue  += 2;</code></p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.18</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">FundMe</span><span class="token punctuation">&#123;</span>    <span class="token builtin">uint256</span> <span class="token keyword">public</span>  myvalue <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">fund</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">payable</span> <span class="token punctuation">&#123;</span>        myvalue  <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">require</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>value <span class="token operator">></span> <span class="token number">1</span> ether<span class="token punctuation">,</span> <span class="token string">"Didn't send enough ETH"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//if the condition is false, revert with the error message    &#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">withDraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>éƒ¨ç½²åˆçº¦ï¼Œç‚¹å‡»fundå‡½æ•°ï¼ŒæŠ¥é”™ä¿¡æ¯æˆåŠŸè¿”å›ï¼š</p><p><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250702171556647.png" alt="image-20250702171556647"></p><blockquote><p>âš ï¸ å›æ»šä»¥åäº¤æ˜“æ¶ˆè€—çš„gasè´¹ä¸ä¼šè¿”å›çš„</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Web3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BlockChain </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WEB3 Day4â€”SolidityåŸºç¡€[part3]</title>
      <link href="/2025/07/01/WEB3%20Day4%20%E2%80%94%20Solidity%E5%9F%BA%E7%A1%80%5Bpart3%5D/"/>
      <url>/2025/07/01/WEB3%20Day4%20%E2%80%94%20Solidity%E5%9F%BA%E7%A1%80%5Bpart3%5D/</url>
      <cover>https://img.soniachen.com/blog/posts/2025/07/deploying2-20250701102829448.png</cover>
      <date>Tue Jul 01 2025 10:15:52 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>WEB3 Day4â€”SolidityåŸºç¡€[part3]</h1><h2 id="æ™ºèƒ½åˆçº¦éƒ¨ç½²-Smart-Contracts-Deploying">æ™ºèƒ½åˆçº¦éƒ¨ç½² Smart Contracts Deploying</h2><h3 id="Sepolia-TestNet-deploying">Sepolia TestNet deploying</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿›å…¥éƒ¨ç½²é€‰é¡¹å¡ï¼Œä»æœ¬åœ°è™šæ‹Ÿç¯å¢ƒï¼ˆRemix VMï¼‰åˆ‡æ¢åˆ°æ³¨å…¥çš„æä¾›è€… - MetaMask æ¥å¼€å§‹éƒ¨ç½²è¿‡ç¨‹ã€‚è¿™ä¸€æ“ä½œå°†å…è®¸Remixå‘é€è¯·æ±‚å¹¶ä¸æ‚¨çš„MetaMaskè´¦æˆ·è¿›è¡Œäº¤äº’ã€‚</p><p><img src="https://img.soniachen.com/blog/posts/2025/07/deploying2-20250701102829448.png" alt="img"></p><p>éšåç³»ç»Ÿä¼šæç¤ºä½ å»é€‰æ‹©ä¸€ä¸ªè´¦å·ã€‚ åœ¨ä½ æˆåŠŸè¿æ¥åˆ°remixä¹‹åï¼Œä½ ä¼šçœ‹åˆ°è´¦å·å·²ç»æˆåŠŸé“¾æ¥åˆ°å¹¶ä¸”æ­£åœ¨ä½¿ç”¨sepoliaç½‘ç»œçš„ä¿¡æ¯ã€‚</p><p><img src="https://img.soniachen.com/blog/posts/2025/07/deploying3.png" alt="img"></p><p>æ³¨æ„ï¼Œéœ€è¦ä½ çš„æµ‹è¯•ç½‘ç»œé‡Œé¢å¿…é¡»æœ‰è¶³å¤Ÿçš„ sepolia ETHï¼Œå¦‚æœæ²¡æœ‰éœ€è¦ä»æ°´é¾™å¤´è·å–ï¼Œå…è´¹çš„æ°´é¾™å¤´æˆ‘è¿™è¾¹ä¼šé›†ä¸­æ”¶é›†ä¸€æ¬¡ï¼Œåç»­å¯ç‚¹å‡»è¿™ç¯‡æ–‡ç« ï¼šã€TODO æŒ–ä¸ªå‘ã€‘ï¼›</p><p>æš‚æ—¶å¯ä»¥å»è¿™é‡Œ<a href="https://www.alchemy.com/faucets/ethereum-sepolia">faucet</a>ï¼Œ ä½†æ˜¯è¿˜æ˜¯éœ€è¦ä¸»è´¦æˆ·é‡Œé¢è¦æœ‰etherã€‚</p><p>éšåï¼ŒMetaMaskå°±ä¼šè¦æ±‚ä½ åœ¨æµ‹è¯•ç½‘ç«™ä¸Šç­¾ç½²å‘é€ï¼š</p><p><img src="https://img.soniachen.com/blog/posts/2025/07/deploying4.png" alt="img"></p><p>äº¤æ˜“æ‰§è¡Œä¹‹åï¼Œåˆçº¦åœ°å€ä¼šå°†äº¤æ˜“è¯¦æƒ…ä¸€åŒæ˜¾ç¤ºåœ¨å·²éƒ¨ç½²çš„åˆçº¦åˆ—è¡¨ä¸‹é¢ã€‚è¿™å°±æ˜¯<a href="https://etherscan.io/">Eherscan</a>ä¸Šéƒ¨ç½²äº¤æ˜“çš„æ˜¾ç¤ºæ–¹å¼ã€‚</p><p><img src="https://updraft.cyfrin.io/solidity/remix/lesson-2/deploying/deploying6.png" alt="img"></p><h2 id="åˆçº¦äº¤äº’-Contract-interaction">åˆçº¦äº¤äº’ Contract interaction</h2><p>åˆçº¦éƒ¨ç½²å®Œæˆä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä¹‹äº¤äº’å¹¶æ›´æ–°åŒºå—é“¾ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæƒ³å­˜å‚¨ä¸€ä¸ªæ•°å­—ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡»storeæŒ‰é’®å®ç°ï¼›MetaMaskä¼šè¦æ±‚å†æ¬¡ç¡®è®¤äº¤æ˜“ã€‚ç„¶åæ›´è¡Œæ‚¨è®¾ç½®çš„æ•°å­—ã€‚è¿™äº›äº¤æ˜“éƒ½å¯ä»¥é€šè¿‡éƒ¨ç½²åœ°å€åœ¨etherscanä¸Šé¢æŸ¥è¯¢æŸ¥çœ‹ã€‚</p><h2 id="Zksyncéƒ¨ç½²">Zksyncéƒ¨ç½²</h2><p>ç”±äºä»¥å¤ªåŠä¸»ç½‘åˆçº¦éƒ¨ç½²æˆæœ¬æ¯”è¾ƒé«˜æ˜‚ï¼Œæ‰€ä»¥RollUpå’ŒLayer2ç½‘ç»œç­‰æ‰©å®¹è§£å†³æ–¹æ¡ˆæ›´ä½³ï¼Œéœ€è¦æŒæ¡éƒ¨ç½²åœ¨Zksyncçš„æµç¨‹ã€‚</p><p>é¦–å…ˆéœ€è¦<strong>Zksyncçš„æµ‹è¯•ç½‘åŸºé‡‘</strong>ä»¥åŠ<strong>zkSyncçš„è·¨é“¾æ¡¥</strong></p><p>å¯å‚ç…§ä¹‹å‰çš„ç¬”è®° <a href="https://blog.soniachen.com/2025/06/17/WEB3%20Day2%20%E2%80%94%E2%80%94%20BlockChain%20Basic%202+Solidity%E5%9F%BA%E7%A1%80%5Bpart1%5D/">WEB3 Day2 â€”â€” BlockChain Basic 2</a></p><p>ç„¶åæ­¥éª¤å’Œä¸Šé¢ä¸»ç½‘çš„æµ‹è¯•ç½‘ç»œéƒ¨ç½²ç›¸ä¼¼ï¼Œåªä¸è¿‡éœ€è¦è·¨é“¾</p><ul><li>è¿æ¥é’±åŒ…</li><li>éœ€è¦å°†Sepolia ETHè·¨é“¾åˆ°zkSyncï¼Œ<a href="https://portal.zksync.io/bridge/">Zksync Bridgeåœ°å€</a><ul><li>è¿æ¥é’±åŒ…ï¼Œä¿è¯ç½‘ç»œåœ¨sepolia</li><li>ä»sepoliaæµ‹è¯•ç½‘å‘é€ethåˆ°zksync</li></ul></li></ul><p><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250701110433474.png" alt="image-20250701110433474"></p><p>â€‹<img src="https://img.soniachen.com/blog/posts/2025/07/image-20250701110602186.png" alt="image-20250701110602186"></p><ul><li><p>æœ‰æµ‹è¯•åŸºé‡‘ä»¥åï¼Œéœ€è¦å°†remixIDE ä¸‹è½½zksyncçš„æ’ä»¶<br><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250701111034094.png" alt="image-20250701111034094" style="zoom:33%;" /></p></li><li><p>âš ï¸ zkSyncéƒ¨ç½²ç‰ˆæœ¬è¦æ±‚ â€˜0.8.24â€™ï¼Œå¹¶ä¸”åˆçº¦<code>*.sol</code>æ–‡ä»¶å¿…é¡»æ”¾åœ¨ä¸€ä¸ª<code>contracts</code>æ–‡ä»¶å¤¹ä¸­ï¼Œä¸ç„¶Zksynæ’ä»¶çš„deployæ ‡ç­¾é¡µå¯èƒ½ä¼šæ˜¾ç¤ºç©ºç™½</p></li><li><p>ç¼–è¯‘â€”â€”&gt;è¿æ¥é’±åŒ…â€”â€”&gt; éƒ¨ç½²</p><p><img src="https://img.soniachen.com/blog/posts/2025/07/wallet.png" alt="img"></p></li></ul><h2 id="åˆçº¦ä¹‹é—´å¦‚ä½•ç›¸äº’éƒ¨ç½²ä»¥åŠäº¤äº’">åˆçº¦ä¹‹é—´å¦‚ä½•ç›¸äº’éƒ¨ç½²ä»¥åŠäº¤äº’</h2><p>é€šè¿‡importè¿›è¡Œå¯¼å…¥å¦ä¸€ä¸ªåˆçº¦</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.18</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token string">"./SimpleStorage.sol"</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">StorageFacotory</span> <span class="token punctuation">&#123;</span>    SimpleStorage <span class="token keyword">public</span> simpleStorage<span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">createSimpleStorageContract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span>  <span class="token punctuation">&#123;</span>        simpleStorage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å¦‚æœå¯¼å…¥æ–‡ä»¶æœ‰å¤šä¸ªåˆçº¦ï¼Œä¸€èˆ¬importæœ€å¥½å£°æ˜å…·ä½“çš„åç§°ï¼Œå¯ä»¥ä¸ç”¨å¯¼å…¥è¯¥æ–‡ä»¶çš„æ‰€æœ‰åˆçº¦</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>SimpleStorage<span class="token punctuation">,</span> SimpleStorage2<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./SimpleStorage.sol"</span><span class="token punctuation">;</span></code></pre><h4 id="è°ƒç”¨å¦å¤–ä¸€ä¸ªåˆçº¦çš„ABI-application-binary-interface">è°ƒç”¨å¦å¤–ä¸€ä¸ªåˆçº¦çš„ABI[application binary interface]</h4><p>å¯ä»¥åˆ›é€ ä¸€ä¸ªSimpleStorageçš„æ•°ç»„æ¥å­˜å‚¨æ‰€æœ‰åˆ›å»ºçš„simpleStorageçš„åœ°å€ï¼Œç„¶åé€šè¿‡åœ°å€å»è°ƒç”¨ç‰¹å®šçš„simplestorageçš„å‡½æ•°</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.19</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>SimpleStorage<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./SimpleStorage.sol"</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">StorageFacotory</span> <span class="token punctuation">&#123;</span>    SimpleStorage<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> listOfSimpleStorage<span class="token punctuation">;</span>    <span class="token comment">// åˆ›å»ºéœ€è¦çš„SimpleStorage</span>    <span class="token keyword">function</span> <span class="token function">createSimpleStorageContract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span>  <span class="token punctuation">&#123;</span>        SimpleStorage simpleStorage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        listOfSimpleStorage<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>simpleStorage<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è°ƒç”¨simpleStorageçš„storeå‡½æ•°</span>    <span class="token keyword">function</span> <span class="token function">sfStore</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> _index<span class="token punctuation">,</span> <span class="token builtin">uint256</span> myFavoriteNumber<span class="token punctuation">)</span> <span class="token keyword">public</span><span class="token punctuation">&#123;</span>        listOfSimpleStorage<span class="token punctuation">[</span>_index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span>myFavoriteNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è°ƒç”¨simpleStorageé‡Œé¢çš„reciveå‡½æ•°</span>    <span class="token keyword">function</span> <span class="token function">sfRecive</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> _index<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> listOfSimpleStorage<span class="token punctuation">[</span>_index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">recive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250701154154011.png" alt="image-20250701154154011" style="zoom:33%;" /><h2 id="ç»§æ‰¿å’Œé‡å†™">ç»§æ‰¿å’Œé‡å†™</h2><p>åˆ›å»ºç»§æ‰¿è‡ª <code>SimpleStorage.sol</code> çš„æ–°åˆçº¦ <code>AddFiveStorage.sol</code>ï¼Œå¹¶é€šè¿‡é‡å†™å‡½æ•°å®ç°åŠŸèƒ½æ‰©å±•ã€‚</p><p><code>SimpleStorage.sol</code>ä»£ç </p><ul><li>virtual è¡¨ç¤ºåŸå‡½æ•°å¯ä»¥è¢«ç»§æ‰¿</li></ul><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> favoriteNumber<span class="token punctuation">)</span> <span class="token keyword">public</span> virtual  <span class="token punctuation">&#123;</span><span class="token comment">// å­˜å‚¨</span>     myFavoriteNumber <span class="token operator">=</span> favoriteNumber<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></code></pre><p><code>AddFiveStorage.sol</code>ä»£ç </p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier:MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.18</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>SimpleStorage<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./SimpleStorage.sol"</span><span class="token punctuation">;</span><span class="token keyword">contract</span> <span class="token class-name">AddFiveStorage</span> <span class="token keyword">is</span> SimpleStorage <span class="token punctuation">&#123;</span>    <span class="token comment">// éœ€è¦overrideå…³é”®å­— åŸå‡½æ•°éœ€è¦åŠ ä¸Švirtualå‡½æ•°</span>   <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> favoriteNumber<span class="token punctuation">)</span> <span class="token keyword">public</span> override <span class="token punctuation">&#123;</span><span class="token comment">// å­˜å‚¨</span>        myFavoriteNumber <span class="token operator">=</span> favoriteNumber <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><ul><li>is è¡¨ç¤ºç»§æ‰¿</li><li>override å…³é”®å­—è¡¨ç¤ºé‡å†™</li></ul>]]></content>
      
      
      <categories>
          
          <category> Web3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Solidity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WEB3 Day3-SolidityåŸºç¡€[part2]</title>
      <link href="/2025/06/26/WEB3%20Day3%20%E2%80%94%E2%80%94%20Solidity%E5%9F%BA%E7%A1%80%5Bpart2%5D/"/>
      <url>/2025/06/26/WEB3%20Day3%20%E2%80%94%E2%80%94%20Solidity%E5%9F%BA%E7%A1%80%5Bpart2%5D/</url>
      <cover>https://img.soniachen.com/blog/posts/2025/06/calldata.png</cover>
      <date>Thu Jun 26 2025 16:16:49 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>WEB3 Day3 â€” SolidityåŸºç¡€[part2]</h1><h2 id="å­˜å‚¨ä½ç½®">å­˜å‚¨ä½ç½®</h2><p>solidityé‡Œé¢æœ‰å…­ç§å­˜å‚¨ä½ç½®ã€‚</p><ol><li>Calldata</li><li>Memory</li><li>Storage</li><li>Stack</li><li>Code</li><li>Logs</li></ol><p>calldataå’Œmemoryæ˜¯å‡½æ•°æ‰§è¡ŒæœŸé—´å˜é‡çš„ä¸´æ—¶å­˜å‚¨ä½ç½®ï¼Œcalldataåªè¯»ï¼Œç”¨äºä¸å¯ä¿®æ”¹çš„å‡½æ•°è¾“å…¥ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œmemoryå…è®¸è¯»å†™è®¿é—®ï¼Œä½¿å˜é‡èƒ½åœ¨å‡½æ•°å†…éƒ¨è¢«ä¿®æ”¹ã€‚</p><p>è¦ä¿®æ”¹calldataå˜é‡ï¼Œå¿…é¡»å…ˆè®²å®ƒä»¬åŠ è½½åˆ°memoryä¸­ã€‚</p><h3 id="Calldata">Calldata</h3><p>åªè¯»çš„ï¼Œ æ¯”storageæ›´ç»æµï¼Œä¸»è¦ç”¨äºè¾“å…¥ã€‚</p><p>ä¸‹é¢å‡½æ•°ä¸­_name ç”¨calldataå…³é”®å­—ï¼Œå°±ä¼šæ”¶åˆ°é”™è¯¯æç¤ºï¼Œå› ä¸ºä¸å¯ä¿®æ”¹ã€‚</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/calldata.png" alt="img"></p><h3 id="Memory">Memory</h3><p>å¯è¯»å¯ä¿®æ”¹ï¼Œå¤§å¤šæ•°çš„å˜é‡é»˜è®¤è‡ªåŠ¨ä½¿ç”¨memoryï¼Œä½†æ˜¯å­—ç¬¦ä¸²ä¸èƒ½é»˜è®¤ï¼Œéœ€è¦æ˜ç¡®æŒ‡å®šmemoryæˆ–è€…calldata</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token builtin">string</span> <span class="token keyword">memory</span> variableName <span class="token operator">=</span> <span class="token string">"someValue"</span><span class="token punctuation">;</span></code></pre><p>ä¸‹é¢ä¼šè®²åˆ°ä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆç‰¹æ®Š</p><h3 id="storage">storage</h3><p>å­˜å‚¨åœ¨storageçš„å˜é‡åœ¨åŒºå—é“¾ä¸Šæ˜¯æŒä¹…åŒ–çš„ï¼Œå…¶å€¼åœ¨å‡½æ•°è°ƒç”¨å’Œäº¤æ˜“ä¹‹é—´ä¿æŒä¸å˜ã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™ä¸ªå˜é‡ favoriteNumber ï¼Œå£°æ˜åœ¨å‡½æ•°å¤–éƒ¨ï¼Œä¼šè¢«éšå¼è½¬æ¢ä¸ºå­˜å‚¨å˜é‡ã€‚</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">contract</span> <span class="token class-name">MyContract</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">uint256</span> favoriteNumber<span class="token punctuation">;</span> <span class="token comment">// this is a storage variable</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><blockquote><p>âš ï¸ åŒç†ï¼Œåœ¨å‡½æ•°å†…éƒ¨ä¹Ÿä¸èƒ½ä½¿ç”¨storageï¼Œå› ä¸ºå‡½æ•°ä¸­çš„å˜é‡éƒ½æ˜¯ä¸´æ—¶å­˜åœ¨ã€‚</p></blockquote><h2 id="å­—ç¬¦ä¸²å’ŒåŸºæœ¬ç±»å‹çš„ç‰¹æ®Šå­˜å‚¨">å­—ç¬¦ä¸²å’ŒåŸºæœ¬ç±»å‹çš„ç‰¹æ®Šå­˜å‚¨</h2><p>åœ¨Solidityä¸­ï¼Œstringæ˜¯å­—èŠ‚æ•°æ®ï¼Œarrays of bytesï¼Œåœ¨ä¸Šæ–‡ä¸­æè¿‡éœ€è¦æŒ‡å®šç¡®åˆ‡çš„å­˜å‚¨ä½ç½®ï¼›</p><p>å¦ä¸€æ–¹é¢ï¼Œuint256åŸºæœ¬ç±»å‹æœ‰å†…ç½®æœºåˆ¶ï¼Œç”¨äºè§„å®šå®ƒä»¬çš„å­˜å‚¨ã€è®¿é—®å’Œæ“ä½œæ–¹å¼åŠä½ç½®ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨å‡½æ•°ç»™uint256æŒ‡å®šå…³é”®å­—å°±ä¼šæŠ¥é”™</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/memory-err.png" alt="img"></p><h2 id="mappingç±»å‹">mappingç±»å‹</h2><p>éå†è¿‡äºæ¶ˆè€—èµ„æºï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨mappingç»“æ„</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">mapping</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token operator">=></span> <span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token keyword">public</span> nameToFavoriteNumber<span class="token punctuation">;</span></code></pre><h3 id="ğŸ§‘â€ğŸ’»-Test-yourself">ğŸ§‘â€ğŸ’» Test yourself</h3><ol><li>ğŸ“• How does the Solidity compiler handle primitive types and strings in terms of memory management?</li><li>ğŸ“• Why canâ€™t the storage keyword be used for variables inside a function?</li><li>ğŸ§‘â€ğŸ’» Write a smart contract that uses storage, memory and calldata keywords for its variables.</li></ol>]]></content>
      
      
      <categories>
          
          <category> Web3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Solidity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Twikooè¯„è®ºç³»ç»Ÿçš„Cloudflareéƒ¨ç½²æ–¹æ¡ˆ</title>
      <link href="/2025/06/17/Twikoo%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E7%9A%84Cloudflare%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88/"/>
      <url>/2025/06/17/Twikoo%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E7%9A%84Cloudflare%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88/</url>
      <cover>https://img.soniachen.com/blog/posts/2025/06/image-20250617191350846.png</cover>
      <date>Tue Jun 17 2025 18:39:18 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>Twikooè¯„è®ºç³»ç»Ÿçš„Cloudflareéƒ¨ç½²æ–¹æ¡ˆ</h1><p>Twikooæ˜¯ä¸€æ¬¾ç®€æ´ã€å®‰å…¨ä¸”å…è´¹çš„é™æ€ç½‘ç«™è¯„è®ºç³»ç»Ÿï¼Œåœ¨æå‡ç½‘ç«™äº’åŠ¨æ€§æ–¹é¢è¡¨ç°å‡ºè‰²ã€‚é€šå¸¸ï¼ŒTwikooå¯éƒ¨ç½²åœ¨è¯¸å¦‚è…¾è®¯äº‘å¼€å‘ç¯å¢ƒã€Vercelç­‰å¹³å°ï¼Œä½†å€ŸåŠ©Cloudflareè¿›è¡Œéƒ¨ç½²ï¼Œèƒ½æå¤§æ”¹å–„å†·å¯åŠ¨å»¶è¿Ÿé—®é¢˜ï¼Œå®ç°å¿«é€ŸåŠ è½½ï¼Œä¸ºç”¨æˆ·å¸¦æ¥æ›´æµç•…çš„è¯„è®ºä½“éªŒï¼ŒåŒæ—¶åˆ©ç”¨Cloudflareå¼ºå¤§çš„å…¨çƒç½‘ç»œæå‡è®¿é—®é€Ÿåº¦ã€‚ä»¥ä¸‹ä¸ºè¯¦ç»†çš„Cloudflareéƒ¨ç½²Twikooè¯„è®ºç³»ç»Ÿçš„æ­¥éª¤ä¸è¦ç‚¹ã€‚</p><h2 id="ä¸€ã€å‰æœŸå‡†å¤‡">ä¸€ã€å‰æœŸå‡†å¤‡</h2><p>åœ¨å¼€å§‹éƒ¨ç½²å‰ï¼Œéœ€æå‰å‡†å¤‡å¥½ç›¸å…³å·¥å…·ä¸èµ„æºï¼š</p><ol><li><strong>Cloudflareè´¦æˆ·</strong>ï¼šè‹¥å°šæœªæ³¨å†Œï¼Œå‰å¾€<a href="https://www.cloudflare.com/">Cloudflareå®˜ç½‘</a>å®Œæˆæ³¨å†Œæµç¨‹ã€‚</li><li><strong>Node.jsç¯å¢ƒ</strong>ï¼šç¡®ä¿æœ¬åœ°å¼€å‘ç¯å¢ƒå®‰è£…äº†Node.jsï¼Œå¯é€šè¿‡<a href="https://nodejs.org/">Node.jså®˜ç½‘</a>ä¸‹è½½å¹¶å®‰è£…å¯¹åº”ç³»ç»Ÿçš„æœ€æ–°ç‰ˆæœ¬ï¼Œå®‰è£…å®Œæˆåï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥<code>node -v</code>éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸåŠæŸ¥çœ‹ç‰ˆæœ¬å·ã€‚</li><li><strong>æ–‡æœ¬ç¼–è¾‘å™¨</strong>ï¼šæ¨èä½¿ç”¨Visual Studio Codeã€Sublime Textç­‰ï¼Œæ–¹ä¾¿è¿›è¡Œä»£ç ç¼–è¾‘ä¸é…ç½®æ–‡ä»¶ä¿®æ”¹ã€‚</li></ol><h2 id="äºŒã€å®‰è£…ä¾èµ–åŒ…">äºŒã€å®‰è£…ä¾èµ–åŒ…</h2><ol><li>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ç›®å½•ï¼Œç”¨äºå­˜æ”¾Twikooç›¸å…³ä»£ç ä¸é…ç½®æ–‡ä»¶ï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¿›å…¥è¯¥ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…é¡¹ç›®ä¾èµ–ï¼š</li></ol><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span></code></pre><ol start="2"><li>ç”±äºCloudflare Workersçš„å…è´¹å¥—é¤å¯¹æ†ç»‘åŒ…å¤§å°æœ‰ä¸¥æ ¼çš„1MiBé™åˆ¶ï¼Œéƒ¨åˆ†ä¸Cloudflare Workersçš„Node.jså…¼å®¹æ€§å­˜åœ¨é—®é¢˜çš„åŒ…å³ä¾¿å®‰è£…äº†ä¹Ÿæ— æ³•ä½¿ç”¨ï¼Œä¸ºæ§åˆ¶æ†ç»‘åŒ…å¤§å°ï¼Œéœ€æ‰‹åŠ¨åˆ é™¤è¿™äº›åŒ…ï¼Œåœ¨å‘½ä»¤è¡Œä¸­ä¾æ¬¡æ‰§è¡Œï¼š</li></ol><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">""</span> <span class="token operator">></span> node_modules/jsdom/lib/api.js<span class="token builtin class-name">echo</span> <span class="token string">""</span> <span class="token operator">></span> node_modules/tencentcloud-sdk-nodejs/tencentcloud/index.js<span class="token builtin class-name">echo</span> <span class="token string">""</span> <span class="token operator">></span> node_modules/nodemailer/lib/nodemailer.js</code></pre><p>ä¸Šè¿°å‘½ä»¤ä¼šæ¸…ç©º<code>jsdom</code>ã€<code>tencentcloud-sdk-nodejs</code>ã€<code>nodemailer</code>è¿™ä¸‰ä¸ªåŒ…ä¸­ç‰¹å®šæ–‡ä»¶çš„å†…å®¹ï¼Œä½¿å…¶ä¸å ç”¨æ†ç»‘åŒ…ç©ºé—´ï¼ŒåŒæ—¶è§„é¿å…¼å®¹æ€§é—®é¢˜ã€‚</p><h2 id="ä¸‰ã€ç™»å½•Cloudflareè´¦æˆ·">ä¸‰ã€ç™»å½•Cloudflareè´¦æˆ·</h2><p>é€šè¿‡Wranglerå·¥å…·ç™»å½•Cloudflareè´¦æˆ·ï¼ŒWrangleræ˜¯Cloudflareæä¾›çš„ç”¨äºç®¡ç†Workersã€D1æ•°æ®åº“ç­‰èµ„æºçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œç™»å½•ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">npx wrangler login</code></pre><p>è¿è¡Œè¯¥å‘½ä»¤åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œè·³è½¬åˆ°Cloudflareçš„æˆæƒé¡µé¢ï¼ŒæŒ‰ç…§æç¤ºå®Œæˆæˆæƒæ“ä½œï¼ŒæˆæƒæˆåŠŸåï¼ŒWranglerä¾¿ä¸ä½ çš„Cloudflareè´¦æˆ·å»ºç«‹è¿æ¥ï¼Œåç»­å¯é€šè¿‡å®ƒå¯¹Cloudflareèµ„æºè¿›è¡Œæ“ä½œã€‚</p><h2 id="å››ã€åˆ›å»ºCloudflare-D1æ•°æ®åº“å¹¶è®¾ç½®æ¶æ„">å››ã€åˆ›å»ºCloudflare D1æ•°æ®åº“å¹¶è®¾ç½®æ¶æ„</h2><ol><li>ä½¿ç”¨Wrangleråˆ›å»ºåä¸º<code>twikoo</code>çš„D1æ•°æ®åº“ï¼Œåœ¨å‘½ä»¤è¡Œæ‰§è¡Œï¼š</li></ol><pre class="language-bash" data-language="bash"><code class="language-bash">npx wrangler d1 create twikoo</code></pre><p>æ‰§è¡Œæ­¤å‘½ä»¤åï¼Œç»ˆç«¯ä¼šè¾“å‡ºæ•°æ®åº“çš„ç›¸å…³ä¿¡æ¯ï¼Œå…¶ä¸­<code>database_name</code>å’Œ<code>database_id</code>è¿™ä¸¤è¡Œä¿¡æ¯è‡³å…³é‡è¦ï¼Œéœ€å°†å…¶å¤åˆ¶ä¸‹æ¥ï¼Œç”¨äºåç»­é…ç½®ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">&#123;</span>  <span class="token string">"d1_databases"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>      <span class="token string">"binding"</span><span class="token builtin class-name">:</span> <span class="token string">"DB"</span>,      <span class="token string">"database_name"</span><span class="token builtin class-name">:</span> <span class="token string">"twikoo"</span>,      <span class="token string">"database_id"</span><span class="token builtin class-name">:</span> <span class="token string">"56def18d-b46a-42c8-bc99-0214e58f9a54"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">]</span><span class="token punctuation">&#125;</span></code></pre><ol start="2"><li>æ‰“å¼€é¡¹ç›®ç›®å½•ä¸‹çš„<code>wrangler.toml</code>æ–‡ä»¶ï¼ˆè‹¥ä¸å­˜åœ¨ï¼Œå¯æ‰‹åŠ¨åˆ›å»ºï¼‰ï¼Œå°†åˆšåˆšå¤åˆ¶çš„<code>database_name</code>å’Œ<code>database_id</code>ç²˜è´´è¿›å»ï¼Œæ›¿æ¢åŸæœ‰çš„å¯¹åº”å€¼ï¼Œä½¿é¡¹ç›®ä¸åˆ›å»ºçš„D1æ•°æ®åº“å»ºç«‹å…³è”ã€‚</li><li>ä¸ºD1æ•°æ®åº“è®¾ç½®æ¶æ„ï¼ŒTwikooé¡¹ç›®ä¸­åŒ…å«å®šä¹‰æ•°æ®åº“è¡¨ç»“æ„å’Œåˆå§‹æ•°æ®çš„<code>schema.sql</code>æ–‡ä»¶ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°†è¯¥æ¶æ„åº”ç”¨åˆ°Cloudflare D1æ•°æ®åº“ï¼š</li></ol><pre class="language-bash" data-language="bash"><code class="language-bash">npx wrangler d1 execute twikoo <span class="token parameter variable">--remote</span> <span class="token parameter variable">--file</span><span class="token operator">=</span>./schema.sql</code></pre><p>æ­¤å‘½ä»¤ä¼šè¿œç¨‹è¿æ¥åˆ°ä¹‹å‰åˆ›å»ºçš„<code>twikoo</code>æ•°æ®åº“ï¼Œå¹¶ä¾æ®<code>schema.sql</code>æ–‡ä»¶çš„å†…å®¹åˆ›å»ºç›¸åº”çš„è¡¨ç»“æ„åŠå¯èƒ½çš„åˆå§‹æ•°æ®ï¼Œç¡®ä¿æ•°æ®åº“æ»¡è¶³Twikooè¯„è®ºç³»ç»Ÿçš„å­˜å‚¨éœ€æ±‚ã€‚</p><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617190614918.png" alt="image-20250617190614918" style="zoom:33%;" /><h2 id="äº”ã€åˆ›å»ºCloudflare-R2å­˜å‚¨">äº”ã€åˆ›å»ºCloudflare R2å­˜å‚¨</h2><p>Cloudflare R2å¯ç”¨äºå­˜å‚¨Twikooè¯„è®ºç³»ç»Ÿç›¸å…³çš„æ–‡ä»¶ï¼Œå¦‚ä¸Šä¼ çš„å›¾ç‰‡ç­‰ï¼ˆå°½ç®¡å½“å‰éƒ¨ç½²æ–¹æ¡ˆä¸­å¯¹R2çš„ä½¿ç”¨å­˜åœ¨ä¸€å®šé™åˆ¶ï¼Œä½†åˆ›å»ºæ­¥éª¤ä»éœ€å®Œæˆï¼‰ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ›å»ºåä¸º<code>twikoo</code>çš„R2å­˜å‚¨æ¡¶ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">npx wrangler r2 bucket create twikoo</code></pre><p>åˆ›å»ºå®Œæˆåï¼Œæ‰¾åˆ°<code>wrangler.toml</code>æ–‡ä»¶ä¸­<code>r2_public_url</code>å­—æ®µï¼Œå°†å…¶å€¼æ›´æ–°ä¸ºæ–°åˆ›å»ºçš„R2å­˜å‚¨æ¡¶çš„åŸŸåï¼Œç¡®ä¿é¡¹ç›®èƒ½æ­£ç¡®è®¿é—®R2å­˜å‚¨èµ„æºã€‚</p><p>[vars]<br>R2_PUBLIC_URL = â€œ<a href="https://twikoo.soniachen.com">https://twikoo.soniachen.com</a>â€</p><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617191350846.png" alt="image-20250617191350846" style="zoom:33%;" /><h2 id="å…­ã€éƒ¨ç½²Cloudflare-Worker">å…­ã€éƒ¨ç½²Cloudflare Worker</h2><p>å®Œæˆä¸Šè¿°é…ç½®åï¼Œå³å¯å°†Twikooè¯„è®ºç³»ç»Ÿéƒ¨ç½²åˆ°Cloudflare Workersï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œéƒ¨ç½²ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">npx wrangler deploy <span class="token parameter variable">--minify</span></code></pre><p><code>--minify</code>å‚æ•°ç”¨äºå¯¹ä»£ç è¿›è¡Œå‹ç¼©ï¼Œä»¥è¿›ä¸€æ­¥å‡å°æ†ç»‘åŒ…å¤§å°ï¼Œæå‡éƒ¨ç½²æ•ˆç‡ä¸æ€§èƒ½ã€‚éƒ¨ç½²è¿‡ç¨‹å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼Œå®Œæˆåï¼Œå‘½ä»¤è¡Œä¸­ä¼šè¾“å‡ºç±»ä¼¼<code>https://twikoo-cloudflare.&lt;your username&gt;.workers.dev</code>çš„è®¿é—®åœ°å€ã€‚è‹¥éƒ¨ç½²æˆåŠŸï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®è¯¥åœ°å€ï¼Œåº”èƒ½çœ‹åˆ°ç±»ä¼¼äº<code>&#123;&quot;code&quot;: 100, &quot;message&quot;: &quot;twikooäº‘å‡½æ•°è¿è¡Œæ­£å¸¸ï¼Œè¯·å‚è€ƒhttps://twikoo.js.org/frontend.htmlå®Œæˆå‰ç«¯çš„é…ç½®&quot;, &quot;version&quot;: &quot;1.6.33&quot;&#125;</code>çš„æç¤ºä¿¡æ¯ï¼Œè¿™è¡¨æ˜Twikooçš„åç«¯æœåŠ¡å·²åœ¨Cloudflareä¸ŠæˆåŠŸéƒ¨ç½²ã€‚</p><h2 id="ä¸ƒã€å‰ç«¯é…ç½®">ä¸ƒã€å‰ç«¯é…ç½®</h2><ol><li>åœ¨åšå®¢æˆ–ç½‘ç«™çš„å‰ç«¯ä»£ç ä¸­ï¼Œæ‰¾åˆ°éœ€è¦æ·»åŠ è¯„è®ºåŠŸèƒ½çš„é¡µé¢ã€‚è‹¥ä½¿ç”¨Twikooå®˜æ–¹æä¾›çš„å‰ç«¯åˆå§‹åŒ–ä»£ç ï¼Œéœ€å°†å…¶ä¸­çš„<code>envId</code>å­—æ®µå€¼è®¾ç½®ä¸ºç¬¬å…­æ­¥ä¸­å¾—åˆ°çš„Cloudflare Workerè®¿é—®åœ°å€ï¼ˆåŒ…å«<code>https://</code>å‰ç¼€ï¼‰ã€‚ä¾‹å¦‚ï¼š</li></ol><pre class="language-javascript" data-language="javascript"><code class="language-javascript">twikoo<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">envId</span><span class="token operator">:</span> <span class="token string">"https://twikoo-cloudflare.&lt;your username>.workers.dev"</span><span class="token punctuation">,</span>    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">"#tcomment"</span><span class="token punctuation">,</span>    <span class="token comment">// region: 'ap-guangzhou', // ç¯å¢ƒåœ°åŸŸï¼Œé»˜è®¤ä¸ºap-shanghaiï¼Œå¦‚æœæ‚¨çš„ç¯å¢ƒåœ°åŸŸä¸æ˜¯ä¸Šæµ·ï¼Œéœ€ä¼ æ­¤å‚æ•°</span>    <span class="token comment">// path: 'window.location.pathname', // ç”¨äºåŒºåˆ†ä¸åŒæ–‡ç« çš„è‡ªå®šä¹‰jsè·¯å¾„ï¼Œå¦‚æœæ‚¨çš„æ–‡ç« è·¯å¾„ä¸æ˜¯location.pathnameï¼Œéœ€ä¼ æ­¤å‚æ•°</span>    <span class="token comment">// lang: 'zh-CN', // ç”¨äºæ‰‹åŠ¨è®¾å®šè¯„è®ºåŒºè¯­è¨€ï¼Œæ”¯æŒçš„è¯­è¨€åˆ—è¡¨https://github.com/imaegoo/twikoo/blob/dev/src/js/utils/i18n/index.js</span>    <span class="token comment">// onCommentLoaded: function () &#123;</span>    <span class="token comment">//     console.log("è¯„è®ºåŠ è½½æˆ–è¯„è®ºæˆåŠŸ");</span>    <span class="token comment">// &#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ol start="2"><li>ç¡®ä¿å‰ç«¯é¡µé¢åŒ…å«ç”¨äºæ˜¾ç¤ºè¯„è®ºåŒºçš„HTMLå…ƒç´ ï¼Œå…¶<code>id</code>éœ€ä¸ä¸Šè¿°ä»£ç ä¸­<code>el</code>å­—æ®µæŒ‡å®šçš„å€¼ä¸€è‡´ï¼ˆå¦‚<code>&lt;div id=&quot;tcomment&quot;&gt;&lt;/div&gt;</code>ï¼‰ï¼Œè¿™æ ·Twikooå‰ç«¯è„šæœ¬æ‰èƒ½æ­£ç¡®æ¸²æŸ“è¯„è®ºåŒºã€‚</li></ol><img src="https://img.soniachen.com/blog/posts/2025/07/image-20250617192932097.png" alt="image-20250617192932097" style="zoom:50%;" /><h2 id="å…«ã€é…ç½®é‚®ä»¶é€šçŸ¥ï¼ˆå¯é€‰ï¼‰">å…«ã€é…ç½®é‚®ä»¶é€šçŸ¥ï¼ˆå¯é€‰ï¼‰</h2><p>Twikooæ”¯æŒåœ¨æœ‰æ–°è¯„è®ºæ—¶å‘é€é‚®ä»¶é€šçŸ¥ç®¡ç†å‘˜ï¼Œç”±äº<code>nodemailer</code>åŒ…çš„å…¼å®¹æ€§é—®é¢˜ï¼Œåœ¨Cloudflare Workersç¯å¢ƒä¸­ï¼Œæ— æ³•ç›´æ¥é€šè¿‡SMTPé›†æˆå‘é€é‚®ä»¶ï¼Œè€Œæ˜¯é€šè¿‡SendGridçš„HTTPS APIå®ç°é‚®ä»¶é€šçŸ¥åŠŸèƒ½ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>æ³¨å†Œä¸€ä¸ªå¯ç”¨çš„SendGridè´¦æˆ·ï¼ˆSendGridæä¾›å…è´¹å¥—é¤ï¼Œæ¯å¤©å¯å‘é€å¤šè¾¾100å°é‚®ä»¶ï¼‰æˆ–Mailchannelsè´¦æˆ·ï¼ˆæ¯æœˆå…è´¹3000å°é‚®ä»¶ï¼‰ï¼Œå¹¶åœ¨è´¦æˆ·è®¾ç½®ä¸­åˆ›å»ºä¸€ä¸ªAPI Keyï¼Œç”¨äºåç»­éªŒè¯èº«ä»½ã€‚</li><li>åœ¨Twikooçš„é…ç½®ä¸­è®¾ç½®ç›¸å…³é‚®ä»¶å‚æ•°ï¼Œæ‰¾åˆ°é…ç½®æ–‡ä»¶ä¸­ä¸é‚®ä»¶é€šçŸ¥ç›¸å…³çš„éƒ¨åˆ†ï¼Œè®¾ç½®ä»¥ä¸‹å­—æ®µï¼š</li></ol><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">sender_email</span><span class="token operator">:</span> <span class="token string">"å‘ä»¶äººé‚®ç®±åœ°å€"</span><span class="token punctuation">,</span> <span class="token comment">// éœ€åœ¨SendGridä¸­è¿›è¡ŒéªŒè¯</span><span class="token literal-property property">sender_name</span><span class="token operator">:</span> <span class="token string">"æ˜¾ç¤ºçš„å‘ä»¶äººåç§°"</span><span class="token punctuation">,</span><span class="token literal-property property">smtp_service</span><span class="token operator">:</span> <span class="token string">"sendgrid"</span><span class="token punctuation">,</span><span class="token literal-property property">smtp_user</span><span class="token operator">:</span> <span class="token string">"æä¾›ä»»æ„éç©ºå€¼"</span><span class="token punctuation">,</span><span class="token literal-property property">smtp_pass</span><span class="token operator">:</span> <span class="token string">"ä¹‹å‰åˆ›å»ºçš„SendGrid API Key"</span><span class="token punctuation">,</span></code></pre><p>æ­¤å¤–ï¼Œè¿˜å¯æ ¹æ®éœ€æ±‚è®¾ç½®å…¶ä»–é…ç½®å€¼ï¼Œä»¥è‡ªå®šä¹‰é€šçŸ¥é‚®ä»¶çš„å¤–è§‚å’Œå†…å®¹ã€‚å®Œæˆè®¾ç½®åï¼Œåœ¨é…ç½®é¡µé¢ç‚¹å‡»â€œå‘é€æµ‹è¯•é‚®ä»¶â€æŒ‰é’®ï¼Œæ£€æŸ¥é‚®ä»¶é€šçŸ¥åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œï¼ŒåŒæ—¶éœ€ç¡®ä¿é‚®ä»¶æä¾›å•†ä¸ä¼šå°†æ”¶åˆ°çš„é€šçŸ¥é‚®ä»¶å½’ç±»ä¸ºåƒåœ¾é‚®ä»¶ã€‚</p><h2 id="ä¹ã€å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ³•">ä¹ã€å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ³•</h2><ol><li><strong>æ†ç»‘åŒ…å¤§å°è¶…é™</strong>ï¼šè‹¥åœ¨éƒ¨ç½²æ—¶é‡åˆ°æ†ç»‘åŒ…å¤§å°è¶…è¿‡Cloudflare Workerså…è´¹å¥—é¤1MiBé™åˆ¶çš„é—®é¢˜ï¼Œé™¤äº†å‰æ–‡æåˆ°çš„åˆ é™¤ç‰¹å®šåŒ…æ–‡ä»¶å†…å®¹å¤–ï¼Œè¿˜å¯æ£€æŸ¥é¡¹ç›®ä¸­æ˜¯å¦å¼•å…¥äº†ä¸å¿…è¦çš„å¤§å‹ä¾èµ–ï¼Œç²¾ç®€ä»£ç ï¼Œå‡å°‘ä¸å¿…è¦çš„èµ„æºåŠ è½½ã€‚</li><li><strong>æ•°æ®åº“è¿æ¥é—®é¢˜</strong>ï¼šè‹¥å‡ºç°æ— æ³•è¿æ¥åˆ°Cloudflare D1æ•°æ®åº“çš„æƒ…å†µï¼Œé¦–å…ˆç¡®è®¤<code>wrangler.toml</code>æ–‡ä»¶ä¸­<code>database_name</code>å’Œ<code>database_id</code>æ˜¯å¦å¡«å†™æ­£ç¡®ï¼Œå…¶æ¬¡æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ï¼Œç¡®ä¿èƒ½è®¿é—®Cloudflareçš„æœåŠ¡ã€‚</li><li><strong>å‰ç«¯è¯„è®ºåŒºæ— æ³•æ˜¾ç¤º</strong>ï¼šå‰ç«¯è¯„è®ºåŒºæ— æ³•æ­£å¸¸æ˜¾ç¤ºæ—¶ï¼Œæ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰æŠ¥é”™ä¿¡æ¯ï¼Œå¯èƒ½æ˜¯<code>envId</code>é…ç½®é”™è¯¯ã€å‰ç«¯è„šæœ¬åŠ è½½å¤±è´¥æˆ–HTMLå…ƒç´ <code>id</code>ä¸åŒ¹é…ç­‰åŸå› å¯¼è‡´ï¼Œæ ¹æ®å…·ä½“é”™è¯¯æç¤ºè¿›è¡Œæ’æŸ¥ä¿®å¤ã€‚</li></ol><p>é€šè¿‡ä»¥ä¸Šè¯¦ç»†çš„Cloudflareéƒ¨ç½²æ–¹æ¡ˆï¼Œå¯å°†Twikooè¯„è®ºç³»ç»Ÿé«˜æ•ˆåœ°é›†æˆåˆ°ç½‘ç«™ä¸­ï¼Œåˆ©ç”¨Cloudflareçš„ä¼˜è´¨æœåŠ¡æå‡è¯„è®ºç³»ç»Ÿçš„æ€§èƒ½ä¸ç¨³å®šæ€§ï¼Œä¸ºç½‘ç«™è®¿å®¢æ‰“é€ è‰¯å¥½çš„äº’åŠ¨äº¤æµç¯å¢ƒã€‚</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> CloudFlare </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WEB3 Day2â€”BlockChain Basic 2 + SolidityåŸºç¡€[part1]</title>
      <link href="/2025/06/17/WEB3%20Day2%20%E2%80%94%E2%80%94%20BlockChain%20Basic%202+Solidity%E5%9F%BA%E7%A1%80%5Bpart1%5D/"/>
      <url>/2025/06/17/WEB3%20Day2%20%E2%80%94%E2%80%94%20BlockChain%20Basic%202+Solidity%E5%9F%BA%E7%A1%80%5Bpart1%5D/</url>
      <cover>https://img.soniachen.com/blog/posts/2025/06/image-20250617173555637.png</cover>
      <date>Tue Jun 17 2025 17:39:18 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>WEB3 Day2â€”BlockChain Basic 2 + SolidityåŸºç¡€[part1]</h1><h2 id="Layer1">Layer1</h2><p>â€‹blockChainçš„base layerï¼Œä¾‹å¦‚bitcoinã€BNB chainã€Solana,and Avalanche.</p><h2 id="Layer2">Layer2</h2><p>æ„å»ºåœ¨L1åŒºå—é“¾å¤–éƒ¨ä½†æ˜¯ä¹Ÿä¸ä¹‹è¿æ¥çš„ä»»ä½•åº”ç”¨applicationã€‚æœ‰å„ç§ç±»å‹ï¼Œæ¯”å¦‚for example ChainLink(å»ä¸­å¿ƒåŒ–é¢„è¨€æœºç½‘ç»œ) ï¼Œä»¥åŠåƒThe Graph(äº‹ä»¶ç´¢å¼•ç½‘ç»œ)ã€‚</p><p>å¥½çš„ï¼Œæˆ‘å°†ä¸ºä½ ä¼˜åŒ–è¿™æ®µåŒºå—é“¾æŠ€æœ¯æè¿°ï¼Œæå‡ä¸“ä¸šæ€§å’Œæ¸…æ™°åº¦ï¼š</p><h3 id="Rollup-æŠ€æœ¯ï¼šä»¥å¤ªåŠLayer2æ‰©å®¹çš„æ ¸å¿ƒæ–¹æ¡ˆ"><strong>Rollup æŠ€æœ¯ï¼šä»¥å¤ªåŠLayer2æ‰©å®¹çš„æ ¸å¿ƒæ–¹æ¡ˆ</strong></h3><p>Rollupæ˜¯Layer2ï¼ˆL2ï¼‰æ‰©å®¹çš„ä¸»æµè§£å†³æ–¹æ¡ˆï¼Œå…¶æ ¸å¿ƒåŸç†æ˜¯å°†å¤šç¬”é“¾ä¸‹äº¤æ˜“æ‰“åŒ…ä¸ºä¸€ä¸ª<strong>èšåˆäº¤æ˜“</strong>ï¼Œä»…å°†äº¤æ˜“æ‘˜è¦ï¼ˆè€Œéå®Œæ•´æ•°æ®ï¼‰æäº¤è‡³ä»¥å¤ªåŠä¸»é“¾ï¼ˆLayer1ï¼‰ï¼Œå¤§å¹…æå‡äº¤æ˜“ååé‡å¹¶é™ä½Gasè´¹ç”¨ã€‚æ ¹æ®éªŒè¯æœºåˆ¶ä¸åŒï¼ŒRollupå¯åˆ†ä¸ºä¸¤ç±»ï¼š</p><h4 id="1-Optimistic-Rollupsï¼ˆä¹è§‚æ±‡æ€»ï¼‰"><strong>1. Optimistic Rollupsï¼ˆä¹è§‚æ±‡æ€»ï¼‰</strong></h4><ul><li><strong>å·¥ä½œæœºåˆ¶</strong>ï¼šé»˜è®¤æ‰€æœ‰é“¾ä¸‹äº¤æ˜“å‡ä¸ºæœ‰æ•ˆï¼Œè¿è¥å•†ï¼ˆOperatorï¼‰å®šæœŸå‘ä¸»é“¾æäº¤çŠ¶æ€æ ¹ï¼ˆState Rootï¼‰å’Œäº¤æ˜“å“ˆå¸Œã€‚è‹¥å…¶ä»–å‚ä¸è€…å‘ç°æ¬ºè¯ˆäº¤æ˜“ï¼Œå¯åœ¨<strong>æŒ‘æˆ˜æœŸ</strong>ï¼ˆé€šå¸¸7å¤©ï¼‰å†…æäº¤<strong>æ¬ºè¯ˆè¯æ˜</strong>ï¼ˆFraud Proofï¼‰è¿›è¡Œè´¨ç–‘ã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šä¾èµ–ç»æµæƒ©ç½šæœºåˆ¶ï¼ˆæŠ¼é‡‘é”å®šï¼‰å’Œé“¾ä¸ŠéªŒè¯åˆçº¦ï¼Œè‹¥è¿è¥å•†è¢«è¯æ˜æ¬ºè¯ˆï¼Œå°†æŸå¤±æŠ¼é‡‘å¹¶å›æ»šçŠ¶æ€ã€‚</li><li><strong>ä»£è¡¨é¡¹ç›®</strong>ï¼šArbitrumã€Optimismã€Baseã€‚</li></ul><h4 id="2-Zero-Knowledge-Rollupsï¼ˆé›¶çŸ¥è¯†æ±‡æ€»ï¼‰"><strong>2. Zero-Knowledge Rollupsï¼ˆé›¶çŸ¥è¯†æ±‡æ€»ï¼‰</strong></h4><ul><li><strong>å·¥ä½œæœºåˆ¶</strong>ï¼šé€šè¿‡<strong>é›¶çŸ¥è¯†è¯æ˜</strong>ï¼ˆZK Proofï¼‰æŠ€æœ¯ç”Ÿæˆ<strong>æœ‰æ•ˆæ€§è¯æ˜</strong>ï¼ˆValidity Proofï¼‰ï¼Œè¯æ˜äº¤æ˜“æ‰¹æ¬¡çš„åˆæ³•æ€§ã€‚éªŒè¯è€…åªéœ€æ£€æŸ¥è¯æ˜ï¼Œæ— éœ€é‡æ”¾æ‰€æœ‰äº¤æ˜“ã€‚</li><li><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š<ul><li><strong>å³æ—¶ç¡®å®šæ€§</strong>ï¼šæ— éœ€æŒ‘æˆ˜æœŸï¼Œäº¤æ˜“ç¡®è®¤åä¸å¯é€†è½¬ã€‚</li><li><strong>æ›´é«˜å®‰å…¨æ€§</strong>ï¼šæ•°å­¦è¯æ˜ä¿è¯çŠ¶æ€æ­£ç¡®æ€§ï¼Œæ— éœ€ä¾èµ–ä¿¡ä»»å‡è®¾ã€‚</li><li><strong>æ›´ä½Gasæˆæœ¬</strong>ï¼šæ•°æ®å‹ç¼©ç‡å¯è¾¾1000:1ï¼ŒéªŒè¯æˆæœ¬æ˜¾è‘—ä½äºOptimisticæ–¹æ¡ˆã€‚</li></ul></li><li><strong>ä»£è¡¨é¡¹ç›®</strong>ï¼šzkSyncã€StarkNetã€Polygon zkEVMã€‚</li></ul><h4 id="3-è§è¯ï¼ˆWitnessï¼‰ä¸é›¶çŸ¥è¯†è¯æ˜"><strong>3. è§è¯ï¼ˆWitnessï¼‰ä¸é›¶çŸ¥è¯†è¯æ˜</strong></h4><ul><li><strong>è§è¯ï¼ˆWitnessï¼‰</strong>ï¼šæ˜¯è¯æ˜è€…ï¼ˆProverï¼‰ç”Ÿæˆçš„ä¸€ç»„ä¸­é—´å€¼ï¼Œç”¨äºè¯æ˜è¾“å…¥æ•°æ®æ»¡è¶³ç‰¹å®šæ•°å­¦å…³ç³»ï¼ˆå¦‚å“ˆå¸Œå‡½æ•°ã€æ¤­åœ†æ›²çº¿æ–¹ç¨‹ï¼‰ã€‚åœ¨ZK Rollupsä¸­ï¼ŒWitnessåŒ…å«äº¤æ˜“æ•°æ®ã€çŠ¶æ€è½¬æ¢é€»è¾‘ç­‰ä¿¡æ¯ï¼Œä½†ä¸æ³„éœ²å…·ä½“å†…å®¹ã€‚</li><li><strong>éªŒè¯æµç¨‹</strong>ï¼š<ol><li>è¯æ˜è€…æ”¶é›†äº¤æ˜“å¹¶ç”ŸæˆçŠ¶æ€è½¬æ¢ã€‚</li><li>åŸºäºWitnessç”Ÿæˆé›¶çŸ¥è¯†è¯æ˜ï¼ˆå¦‚SNARKæˆ–STARKï¼‰ã€‚</li><li>éªŒè¯è€…ï¼ˆVerifierï¼‰é€šè¿‡æ™ºèƒ½åˆçº¦æ£€æŸ¥è¯æ˜ï¼Œç¡®è®¤è¾“å‡ºçŠ¶æ€ä¸é¢„æœŸä¸€è‡´ã€‚</li></ol></li><li><strong>æŠ€æœ¯ç‰¹æ€§</strong>ï¼š<ul><li><strong>ç®€æ´æ€§</strong>ï¼šè¯æ˜å¤§å°é€šå¸¸ä»…å‡ åKBï¼ŒéªŒè¯æ—¶é—´æçŸ­ï¼ˆæ¯«ç§’çº§ï¼‰ã€‚</li><li><strong>éäº¤äº’æ€§</strong>ï¼šå•ä¸ªè¯æ˜å¯ç‹¬ç«‹éªŒè¯ï¼Œæ— éœ€ä¸è¯æ˜è€…äº¤äº’ã€‚</li></ul></li></ul><h3 id="å¯¹æ¯”ä¸åº”ç”¨åœºæ™¯"><strong>å¯¹æ¯”ä¸åº”ç”¨åœºæ™¯</strong></h3><table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>Optimistic Rollups</strong></th><th><strong>ZK Rollups</strong></th></tr></thead><tbody><tr><td><strong>éªŒè¯æœºåˆ¶</strong></td><td>æ¬ºè¯ˆè¯æ˜ï¼ˆé»˜è®¤æœ‰æ•ˆï¼Œéœ€æŒ‘æˆ˜ï¼‰</td><td>æœ‰æ•ˆæ€§è¯æ˜ï¼ˆæ•°å­¦è¯æ˜ï¼‰</td></tr><tr><td><strong>æœ€ç»ˆç¡®è®¤æ—¶é—´</strong></td><td>7å¤©æŒ‘æˆ˜æœŸå</td><td>å‡ ç§’è‡³å‡ åˆ†é’Ÿï¼ˆè¯æ˜ç”Ÿæˆåï¼‰</td></tr><tr><td><strong>å…¼å®¹æ€§</strong></td><td>å®Œå…¨å…¼å®¹EVMï¼ˆæ”¯æŒæ‰€æœ‰Solidityåˆçº¦ï¼‰</td><td>éƒ¨åˆ†å…¼å®¹ï¼ˆéœ€é€‚é…ZK-EVMï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>DeFiåè®®ã€å¤æ‚æ™ºèƒ½åˆçº¦</td><td>NFTé“¸é€ ã€é«˜é¢‘äº¤æ˜“ã€éšç§ä¿æŠ¤</td></tr></tbody></table><p>RollupæŠ€æœ¯é€šè¿‡<strong>é“¾ä¸‹è®¡ç®—+é“¾ä¸ŠéªŒè¯</strong>çš„æ¨¡å¼ï¼Œå°†ä»¥å¤ªåŠçš„ç†è®ºTPSä»15æå‡è‡³2000+ï¼ŒGasæˆæœ¬é™ä½90%ä»¥ä¸Šã€‚Optimisticæ–¹æ¡ˆä¾§é‡å…¼å®¹æ€§ï¼ŒZKæ–¹æ¡ˆä¾§é‡å®‰å…¨æ€§ä¸æ•ˆç‡ï¼Œä¸¤è€…å…±åŒæ¨åŠ¨åŒºå—é“¾åº”ç”¨è¿›å…¥è§„æ¨¡åŒ–é˜¶æ®µã€‚éšç€ZK-EVMï¼ˆå¦‚zkSync 2.0ï¼‰çš„æˆç†Ÿï¼Œæœªæ¥å¤§å¤šæ•°åº”ç”¨å¯èƒ½è½¬å‘é›¶çŸ¥è¯†Rollupæ¶æ„ã€‚</p><h3 id="RollUp-stage-Rollup-å‘å±•é˜¶æ®µ">RollUp stage (Rollup å‘å±•é˜¶æ®µ)</h3><h4 id="Stage-0">Stage 0</h4><p>åœ¨è¿™ä¸ªåˆå§‹çš„é˜¶æ®µï¼ŒRollUpçš„æ²»ç†ä¸»è¦ç”±<strong>è¿è¥æ–¹å’Œå®‰å…¨å§”å‘˜ä¼š</strong>æŒæ§ï¼Œç¡®ä¿å…³é”®å†³ç­–å¹¶ä¸”æœ‰å¯ä¿¡çš„å›¢ä½“å»ä¸“é—¨ç›‘ç£ï¼ˆä¸­å¿ƒåŒ–çš„ï¼‰ï¼Œæ­¤é˜¶æ®µçš„ç”¨æˆ·æ‹¥æœ‰é€€å‡ºæœºåˆ¶ï¼Œå¯ä»¥åœ¨ä¸ƒå¤©å†…ç¦»å¼€rollupï¼Œä½†æ˜¯é€šå¸¸éœ€è¦å®ä½“å’Œè¿è¥æ–¹çš„æ“ä½œè¿›è¡Œç»“åˆã€‚</p><h4 id="Stage-1">Stage 1</h4><p>ä¸­å¿ƒåŒ–çš„æ²»ç†æ¼”åŒ–ä¸ºæ™ºèƒ½åˆçº¦ç®¡ç†ï¼Œå½“ç„¶å®‰å…¨å§”å‘˜ä¼š<strong>åŒæ—¶</strong>å‘æŒ¥ä½œç”¨ã€‚</p><p><strong>è¯æ˜ç³»ç»Ÿ</strong>å®Œå…¨å¼€å§‹è¿ä½œï¼Œæ”¯æŒ<strong>å»ä¸­å¿ƒåŒ–</strong>çš„æœ‰æ•ˆè¯æ˜ã€‚</p><p><strong>é€€å‡ºæœºåˆ¶</strong>ä¹Ÿå¾—åˆ°æ”¹è¿›ï¼Œç”¨æˆ·å¯ç‹¬ç«‹é€€å‡ºè€Œæ— éœ€è¿è¥æ–¹åè°ƒã€‚</p><h4 id="Stage-2">Stage 2</h4><p>é€šè¿‡<strong>å®Œå…¨</strong>ç”±æ™ºèƒ½åˆçº¦ç®¡ç†çš„æ²»ç†æœºåˆ¶å®ç°<strong>å®Œå…¨å»ä¸­å¿ƒåŒ–</strong>ã€‚</p><p><strong>æ— éœ€</strong>è¿è¥æ–¹å’Œå®‰å…¨å§”å‘˜ä¼šå¹²é¢„ã€‚</p><p>è¯æ˜ç³»ç»Ÿæ˜¯æ— è®¸å¯çš„ï¼Œé€€å‡ºæœºåˆ¶ä¹Ÿå®Œå…¨å»ä¸­å¿ƒåŒ–ã€‚</p><h4 id="ZKSync-Risk-Analysis-é£é™©åˆ†æ">ZKSync Risk Analysis[é£é™©åˆ†æ]</h4><p><a href="https://l2beat.com/scaling/summary">https://l2beat.com/scaling/summary</a>  L2Beatæ‘˜è¦ä¸­å¯ä»¥æŸ¥çœ‹å„Rollupæ‰€å¤„çš„stage</p><p>Risksé‚£ä¸€åˆ—çš„é¥¼å›¾å¯ä»¥ä½“ç°å½“å‰é˜¶æ®µçš„ä¸€äº›é£é™©ï¼Œä¾‹å¦‚ZkSync Eraä¸“å±é¡µé¢ä¸­ï¼š</p><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617173334249.png" alt="image-20250617173334249" style="zoom:33%;" /><ul><li><p><strong>Data Availability</strong>: refers to the ability to reconstruct the L2 state from L1 data, ensuring that anyone can verify and rebuild the L2 state if necessary.</p><p>èƒ½å¤Ÿä»L1çš„æ•°æ®ä¸­é‡å»ºL2çŠ¶æ€</p></li><li><p><strong>State Validation</strong>: involves verifying the legitimacy of a set of bundled transactions. For ZK Sync, this is done using zero-knowledge proofs through an algorithm known as PLONK (Permutations over Lagrange-bases for Oecumenical Noninteractive arguments of Knowledge).</p><p>æ¶‰åŠéªŒè¯ä¸€ç»„æ‰“åŒ…äº¤æ˜“çš„åˆæ³•æ€§ã€‚</p></li><li><p><strong>Sequencer Failure</strong>: describes the ability to process transactions even if the sequencer is down. In ZK Sync, transactions can still be submitted to L1, though not necessarily enforced immediately.</p><p>æ’åºå™¨æ•…éšœï¼Œæè¿°äº†å³ä½¿æ’åºå™¨å®•æœºè¿˜èƒ½å¤Ÿå¤„ç†äº¤æ˜“çš„èƒ½åŠ›ï¼Œè¿™é‡Œé»„è‰²åŒºå—è¡¨ç¤ºï¼Œåœ¨ZKsyncä¸­ï¼Œäº¤æ˜“ä»ç„¶å¯ä»¥æäº¤åˆ°L1ï¼Œä½†ä¸ä¸€å®šèƒ½å¤Ÿå¼ºåˆ¶æ‰§è¡Œã€‚</p><blockquote><p>æ’åºå™¨ï¼šæ˜¯è´Ÿè´£å¯¹æ‰“åŒ…çš„ç”¨æˆ·äº¤æ˜“è¿›è¡Œæ’åºçš„æ“ä½œæ–¹ï¼ˆè¿è¥å•†ï¼‰</p><p>The sequencer is the operator responsible for <em>ordering</em> user transactions and often <em>batching</em> them before committing them to Layer 1.</p></blockquote></li><li><p><strong>Proposer Failure</strong>: describes the ability to process transactions even if the proposer is down. In this case, ZK Sync will halt all withdrawals and transactions executions.</p><p>æè®®è€…å®•æœºä½†æ˜¯å¯ä»¥å¤„ç†äº¤æ˜“çš„èƒ½åŠ›ã€‚åœ¨Zksyncä¸­å›æš‚åœæ‰€æœ‰çš„ææ¬¾å’Œäº¤æ˜“æ‰§è¡Œã€‚</p></li><li><p><strong>Exit Window</strong>: In the current ZK Sync stage, there is no window for exit during unwanted upgrades.</p><p>çº¢è‰²åŒºå—è¡¨ç¤ºZksyncåœ¨éé¢„æœŸçš„å‡çº§æ—¶ä¸å­˜åœ¨é€€å‡ºçª—å£æœŸã€‚</p></li></ul><h2 id="First-Transaction-On-ZKSync">First Transaction On ZKSync</h2><p>chainList å®˜ç½‘æœç´¢ZKsync sepolia</p><p><a href="https://chainlist.org/?search=zksync+sepolia&amp;testnets=true">https://chainlist.org/?search=zksync+sepolia&amp;testnets=true</a></p><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617173444316.png" alt="image-20250617173444316" style="zoom:50%;" /><p>è¿›è¡Œconnect</p><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617173504740.png" alt="image-20250617173504740" style="zoom: 25%;" /><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617173525324.png" alt="image-20250617173525324" style="zoom:25%;" /><p>åœ¨<a href="https://explorer.zksync.io/">zkSyncå®˜ç½‘çš„block explorer</a> ä¸­ï¼Œå¯æœç´¢åˆ°è‡ªå·±çš„è´¦æˆ·ï¼ŒæŸ¥çœ‹äº¤æ˜“è¯¦æƒ…</p><h3 id="å¦‚ä½•è·å–æµ‹è¯•ç½‘ç»œçš„åŸºé‡‘ï¼Ÿ">å¦‚ä½•è·å–æµ‹è¯•ç½‘ç»œçš„åŸºé‡‘ï¼Ÿ</h3><blockquote><p>ğŸ“’ NOTE</p><p>Network Fauncets</p></blockquote><p>è¿™é‡Œå¯ä»¥é€šè¿‡brigeæ¡¥æ¥æºé“¾å’Œç›®æ ‡é“¾æ¥è¿›è¡Œï¼Œä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯lockå’Œunlock å¦ä¸€ç§æ˜¯çƒ§æ¯å’Œé“¸é€ ï¼›</p><p>å¯èƒ½ä¼šæœ‰å®‰å…¨é—®é¢˜ï¼Œä½†æ˜¯åŸºäºZkSyncä½¿ç”¨è¿‡ç¨‹çš„ç»éªŒæ¥è¯´ï¼Œæ˜¯æ¯”è¾ƒå®‰å…¨çš„ã€‚</p><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617173555637.png" alt="image-20250617173555637" style="zoom:50%;" /><p>äº†è§£åŸç†ä¹‹åï¼Œæˆ‘ä»¬åœ¨<a href="https://cloud.google.com/application/web3/faucet/ethereum/sepolia">æ¨èçš„fauncet</a>é‡Œè·å–æˆ‘ä»¬çš„fund</p><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617173615481.png" alt="image-20250617173615481" style="zoom: 33%;" /><p>è¿™é‡Œæˆ‘reciveå¤±è´¥äº†ï¼Œé‡æ–°æ‰¾äº†å…¶ä»–funsets ï¼Œå¯ä»¥ç”¨å›tenderlyè¯•è¯•çœ‹</p><h2 id="Solidity-åŸºç¡€-part1">Solidity åŸºç¡€[part1]</h2><h3 id="Remix-IDE">Remix IDE</h3><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617173639681.png" alt="image-20250617173639681" style="zoom: 33%;" /><h3 id="å‡½æ•°">å‡½æ•°</h3><p>æ— è¿”å›ä½“å‡½æ•°ç¤ºä¾‹ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token number">0.8</span><span class="token number">.19</span><span class="token punctuation">;</span> <span class="token comment">// chose our solidity version </span><span class="token keyword">contract</span> <span class="token class-name">SimpleStorage</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">uint256</span> <span class="token keyword">public</span> myFavoriteNumber<span class="token punctuation">;</span> <span class="token comment">// åˆå§‹å€¼å°±æ˜¯0 è€Œä¸”æ˜¯internal ä¹Ÿå°±æ˜¯å†…éƒ¨ä¸å¯è§çš„</span>    <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> favoriteNumber<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span>        myFavoriteNumber <span class="token operator">=</span> favoriteNumber<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æœ‰è¿”å›ä½“ç¤ºä¾‹ï¼š</p><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">function</span> <span class="token function">recive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">return</span> myFavoriteNumber<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span></code></pre><h3 id="æ•°ç»„">æ•°ç»„</h3><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// æ•°ç»„</span><span class="token builtin">uint256</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> myFavoriteNumbers<span class="token punctuation">;</span>Person <span class="token keyword">public</span> newPerson <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Person <span class="token keyword">public</span> myPerson<span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">setPerson</span><span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span> name<span class="token punctuation">,</span> <span class="token builtin">uint256</span> person_number<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span>    myPersonArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">Person</span><span class="token punctuation">(</span>person_number<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="ç»“æ„">ç»“æ„</h3><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// ç»“æ„</span>    <span class="token keyword">struct</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span>        <span class="token builtin">uint256</span> personNumber<span class="token punctuation">;</span>        <span class="token builtin">string</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h3 id="æ•°ç»„åŠ ç»“æ„">æ•°ç»„åŠ ç»“æ„</h3><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// æ•°ç»„åŠ ç»“æ„</span> Person<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> myPersonArray<span class="token punctuation">;</span></code></pre><h3 id="å¯è§æ€§">å¯è§æ€§</h3><p>å‡½æ•°å’Œå˜é‡æœ‰å››ç§å¯è§æ€§ä¿®é¥°ç¬¦ï¼š</p><ul><li><code>public</code>ï¼šå¯ä»åˆçº¦å†…éƒ¨å’Œå¤–éƒ¨åˆçº¦è®¿é—®</li><li><code>private</code>ï¼šä»…é™å½“å‰åˆçº¦å†…éƒ¨è®¿é—®ã€‚ä¸ä¼šéšè—å€¼ï¼Œä»…é™åˆ¶å…¶è®¿é—®æƒé™ã€‚</li><li><code>external</code>ï¼šä»…é€‚ç”¨äºå¤–éƒ¨çš„åˆçº¦è®¿é—®ã€‚âš ï¸</li><li><code>internal</code>ï¼š å½“å‰åˆçº¦å’Œæ´¾ç”Ÿçš„åˆçº¦å¯ä»¥è®¿é—®ã€‚</li></ul><p>å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤æ˜¯internal</p><h3 id="view-ã€pure">view ã€pure</h3><p>å‡½æ•°æ“ä½œæƒé™ä¿®é¥°ç¬¦</p><h4 id="1-view-å…³é”®å­—">1. <code>view</code> å…³é”®å­—</h4><ul><li><p><strong>åŠŸèƒ½</strong>ï¼šä½¿ç”¨<code>view</code>å…³é”®å­—ä¿®é¥°çš„å‡½æ•°ï¼Œæ‰¿è¯ºä¸ä¼šå¯¹åŒºå—é“¾çš„çŠ¶æ€è¿›è¡Œä¿®æ”¹ã€‚</p></li><li><p>å¯æ‰§è¡Œæ“ä½œ</p><ul><li>èƒ½å¤Ÿè¯»å–åŒºå—é“¾ä¸Šçš„æ•°æ®ï¼ˆä¹Ÿå°±æ˜¯çŠ¶æ€å˜é‡ï¼‰ã€‚</li><li>å¯ä»¥è®¿é—® msg.senderã€block.number ç­‰å…¨å±€å˜é‡ã€‚</li><li>æ”¯æŒè°ƒç”¨å…¶ä»–åŒæ ·è¢«æ ‡è®°ä¸º<code>view</code>æˆ–è€…<code>pure</code>çš„å‡½æ•°ã€‚</li></ul></li><li><p><strong>ä¸å¯æ‰§è¡Œæ“ä½œ</strong>ï¼šç¦æ­¢å¯¹çŠ¶æ€å˜é‡è¿›è¡Œå†™å…¥æ“ä½œã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p></li></ul><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">contract</span> <span class="token class-name">ViewExample</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">uint</span> <span class="token keyword">public</span> balance<span class="token punctuation">;</span>    <span class="token comment">// æ­¤å‡½æ•°ä»…è¯»å–çŠ¶æ€å˜é‡ï¼Œä¸ä¼šå¯¹å…¶è¿›è¡Œä¿®æ”¹</span>    <span class="token keyword">function</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> balance<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="2-pure-å…³é”®å­—">2. <code>pure</code> å…³é”®å­—</h4><ul><li><p><strong>åŠŸèƒ½</strong>ï¼šè¢«<code>pure</code>å…³é”®å­—ä¿®é¥°çš„å‡½æ•°ï¼Œæ—¢ä¸ä¼šè¯»å–ä¹Ÿä¸ä¼šä¿®æ”¹åŒºå—é“¾çš„çŠ¶æ€ã€‚</p></li><li><p>å¯æ‰§è¡Œæ“ä½œ</p><ul><li>å¯ä»¥ä½¿ç”¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å±€éƒ¨å˜é‡ã€‚</li><li>èƒ½å¤Ÿæ“ä½œä¼ å…¥å‡½æ•°çš„å‚æ•°ã€‚</li><li>æ”¯æŒè¿›è¡Œæ•°å­¦è¿ç®—ã€‚</li><li>å¯ä»¥è°ƒç”¨å…¶ä»–<code>pure</code>å‡½æ•°ã€‚</li></ul></li><li><p>ä¸å¯æ‰§è¡Œæ“ä½œ</p><ul><li>ç¦æ­¢è®¿é—®çŠ¶æ€å˜é‡ã€‚</li><li>ä¸å…è®¸è°ƒç”¨é<code>view</code>æˆ–<code>pure</code>çš„å‡½æ•°ã€‚</li></ul></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p></li></ul><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">contract</span> <span class="token class-name">PureExample</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// è¯¥å‡½æ•°ä¸ä¾èµ–ä»»ä½•çŠ¶æ€å˜é‡ï¼Œä»…å¯¹è¾“å…¥å‚æ•°è¿›è¡Œè®¡ç®—</span>    <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token builtin">uint</span> a<span class="token punctuation">,</span> <span class="token builtin">uint</span> b<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="3-å…³é”®åŒºåˆ«">3. å…³é”®åŒºåˆ«</h4><table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>view å‡½æ•°</strong></th><th><strong>pure å‡½æ•°</strong></th></tr></thead><tbody><tr><td>èƒ½å¦è¯»å–çŠ¶æ€å˜é‡</td><td>å¯ä»¥</td><td>ä¸å¯ä»¥</td></tr><tr><td>èƒ½å¦ä¿®æ”¹çŠ¶æ€å˜é‡</td><td>ä¸å¯ä»¥</td><td>ä¸å¯ä»¥</td></tr><tr><td>æ˜¯å¦æ¶ˆè€— Gasï¼ˆå¤–éƒ¨è°ƒç”¨æ—¶ï¼‰</td><td>ä¸æ¶ˆè€—</td><td>ä¸æ¶ˆè€—</td></tr><tr><td>æ˜¯å¦æ¶ˆè€— Gasï¼ˆå†…éƒ¨è°ƒç”¨æ—¶ï¼‰</td><td>æ¶ˆè€—</td><td>æ¶ˆè€—</td></tr></tbody></table><blockquote><p>âš ï¸ ä¸€èˆ¬è°ƒç”¨è¿™ä¸¤ä¸ªå…³é”®å­—éƒ½ä¸ä¼šæ¶ˆè€—gasè´¹ï¼Œ ä½†æ˜¯å¦‚æœæ˜¯å†…éƒ¨è°ƒç”¨ï¼Œä¾‹å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­, storeé‡Œé¢è°ƒç”¨reciveå°±ä¼šå¯¼è‡´gasè´¹äº§ç”Ÿã€‚</p></blockquote><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> favoriteNumber<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span><span class="token comment">// å­˜å‚¨</span>       myFavoriteNumber <span class="token operator">=</span> favoriteNumber<span class="token punctuation">;</span>       <span class="token function">recive</span><span class="token punctuation">(</span>favoriteNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span> <span class="token keyword">function</span> <span class="token function">recive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token keyword">return</span> myFavoriteNumber<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></code></pre><h3 id="å®Œæ•´ä»£ç ï¼š">å®Œæ•´ä»£ç ï¼š</h3><pre class="language-solidity" data-language="solidity"><code class="language-solidity"><span class="token comment">// SPDX-License-Identifier: MIT</span><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token number">0.8</span><span class="token number">.19</span><span class="token punctuation">;</span> <span class="token comment">// stating our version </span><span class="token keyword">contract</span> <span class="token class-name">SimpleStorage</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">uint256</span> <span class="token keyword">public</span> myFavoriteNumber<span class="token punctuation">;</span> <span class="token comment">// åˆå§‹å€¼å°±æ˜¯0 è€Œä¸”æ˜¯internal ä¹Ÿå°±æ˜¯å†…éƒ¨ä¸å¯è§çš„</span>    <span class="token comment">// æ•°ç»„</span>    <span class="token builtin">uint256</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> myFavoriteNumbers<span class="token punctuation">;</span>    <span class="token comment">// ç»“æ„</span>    <span class="token keyword">struct</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span>        <span class="token builtin">uint256</span> personNumber<span class="token punctuation">;</span>        <span class="token builtin">string</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    Person <span class="token keyword">public</span> newPerson <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Person <span class="token keyword">public</span> myPerson<span class="token punctuation">;</span>    Person<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> myPersonArray<span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">setPerson</span><span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span> name<span class="token punctuation">,</span> <span class="token builtin">uint256</span> person_number<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span>        myPerson <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span>person_number<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>        myPersonArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>myPerson<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> favoriteNumber<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">&#123;</span><span class="token comment">// å­˜å‚¨</span>        myFavoriteNumber <span class="token operator">=</span> favoriteNumber<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// view å¯è¯»ä¸å¯å†™ pure ä¸å¯è¯»ä¸å¯å†™</span>    <span class="token keyword">function</span> <span class="token function">recive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> myFavoriteNumber<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Web3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BlockChain </tag>
            
            <tag> Solidity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»0åˆ°1:ç”¨Git+CloudFlare+PicGo+Typora+Hexoæ­å»ºä¸ªäººåšå®¢å…¨æµç¨‹</title>
      <link href="/2025/06/17/%E4%BB%8E0%E5%88%B01-%E7%94%A8Git-CloudFlare-PicGo-Typora-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%85%A8%E6%B5%81%E7%A8%8B/"/>
      <url>/2025/06/17/%E4%BB%8E0%E5%88%B01-%E7%94%A8Git-CloudFlare-PicGo-Typora-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%85%A8%E6%B5%81%E7%A8%8B/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=1a764386-43eb-e3c6-6d21-87218ee862e9</cover>
      <date>Tue Jun 17 2025 16:16:23 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>ä» 0 åˆ° 1ï¼šç”¨ Gitã€CloudFlareã€PicGoã€Typoraã€Hexo æ­å»ºä¸ªäººåšå®¢å…¨æµç¨‹</h1><h2 id="ä¸€ã€å‰è¨€">ä¸€ã€å‰è¨€</h2><p>22å¹´ï¼Œæˆ‘ç”¨ Hexo + Next ä¸»é¢˜æ­èµ·ç¬¬ä¸€ä¸ªä¸ªäººåšå®¢ã€‚ä¸‰å¹´åï¼Œéšç€å›¾åºŠéœ€æ±‚å‡çº§ã€å¯¹åšå®¢é£æ ¼æœ‰äº†æ–°æƒ³æ³•ï¼Œæˆ‘å†³å®šé‡æ„ â€”â€” æ›¿æ¢å›¾åºŠå·¥å…·ã€æ›´æ¢ä¸»é¢˜ï¼Œç”¨ Gitã€CloudFlareã€PicGoã€Typora é…åˆ Hexo é‡æ–°æ­å»ºã€‚è¿™ç¯‡æ–‡ç« å¤ç›˜ä»æ—§ç‰ˆè¿­ä»£åˆ°å…¨æ–°ä¸Šçº¿çš„å…¨è¿‡ç¨‹ï¼Œæ—¢æ˜¯å¯¹è‡ªå·±æŠ˜è…¾ç»å†çš„è®°å½•ï¼Œä¹Ÿå¸Œæœ›ç»™æƒ³ä¼˜åŒ–åšå®¢çš„æœ‹å‹ä¸€ä»½å®æ“å‚è€ƒã€‚</p><h2 id="äºŒã€ç¯å¢ƒå‡†å¤‡ä¸å·¥å…·é€‰å‹">äºŒã€ç¯å¢ƒå‡†å¤‡ä¸å·¥å…·é€‰å‹</h2><h3 id="ï¼ˆä¸€ï¼‰æ ¸å¿ƒå·¥å…·ç®€ä»‹">ï¼ˆä¸€ï¼‰æ ¸å¿ƒå·¥å…·ç®€ä»‹</h3><ol><li><strong>Git</strong>ï¼šåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œè´Ÿè´£åšå®¢ä»£ç çš„ç‰ˆæœ¬ç®¡ç†ä¸è¿œç¨‹ä»“åº“åŒæ­¥ï¼Œè®©åšå®¢éƒ¨ç½²ã€å†…å®¹æ›´æ–°æ›´é«˜æ•ˆã€‚</li><li><strong>CloudFlare</strong>ï¼šæä¾› CDN åŠ é€Ÿã€DNS è§£æã€å®‰å…¨é˜²æŠ¤ç­‰åŠŸèƒ½ï¼Œè®©åšå®¢è®¿é—®æ›´å¿«ã€æ›´ç¨³å®šï¼Œè¿˜èƒ½éšè—çœŸå®æœåŠ¡å™¨ IP ã€‚</li><li><strong>PicGo</strong>ï¼šå›¾åºŠä¸Šä¼ å·¥å…·ï¼Œå†™åšå®¢æ—¶æœ¬åœ°å›¾ç‰‡èƒ½ä¸€é”®ä¸Šä¼ åˆ°å›¾åºŠï¼Œè§£å†³æ–‡ç« ä¸­å›¾ç‰‡å­˜å‚¨ä¸å¼•ç”¨é—®é¢˜ã€‚</li><li><strong>Typora</strong>ï¼šç®€æ´é«˜æ•ˆçš„ Markdown ç¼–è¾‘å™¨ï¼Œå®æ—¶é¢„è§ˆã€è¯­æ³•ç®€æ´ï¼Œä¸“æ³¨å†…å®¹åˆ›ä½œã€‚</li><li><strong>Hexo</strong>ï¼šé™æ€åšå®¢ç”Ÿæˆæ¡†æ¶ï¼ŒåŸºäº Node.jsï¼Œæ”¯æŒ Markdown å†™ä½œï¼Œèƒ½å¿«é€Ÿç”Ÿæˆç¾è§‚åšå®¢ç«™ç‚¹ï¼Œéƒ¨ç½²çµæ´»ã€‚</li></ol><h3 id="ï¼ˆäºŒï¼‰ç¯å¢ƒå®‰è£…">ï¼ˆäºŒï¼‰ç¯å¢ƒå®‰è£…</h3><ol><li><strong>Git å®‰è£…</strong>ï¼š<br>å®˜ç½‘ï¼ˆ<a href="https://git-scm.com/">https://git-scm.com/</a> ï¼‰ä¸‹è½½å¯¹åº”ç³»ç»Ÿç‰ˆæœ¬ï¼Œå®‰è£…åé€šè¿‡ <code>git --version</code> éªŒè¯ï¼Œçœ‹åˆ°ç‰ˆæœ¬å·å³æˆåŠŸã€‚<br>é…ç½®ç”¨æˆ·ä¿¡æ¯ï¼š<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">"ä½ çš„ç”¨æˆ·å"</span><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">"ä½ çš„é‚®ç®±"</span></code></pre></li><li><strong>Node.js ä¸ Hexo å®‰è£…</strong>ï¼ˆHexo ä¾èµ– Node.js ï¼‰ï¼š<br>Node.js å®˜ç½‘ï¼ˆ<a href="https://nodejs.org/">https://nodejs.org/</a> ï¼‰ä¸‹è½½ LTS ç‰ˆæœ¬ï¼Œå®‰è£…åç”¨ <code>node -v</code>ã€<code>npm -v</code> éªŒè¯ã€‚<br>å…¨å±€å®‰è£… Hexoï¼š<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> hexo-cli</code></pre>éªŒè¯ Hexo å®‰è£…ï¼š<code>hexo -v</code> æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯åˆ™æˆåŠŸã€‚</li><li><strong>Typora å®‰è£…</strong>ï¼šå®˜ç½‘ï¼ˆ<a href="https://typora.io/">https://typora.io/</a> ï¼‰ä¸‹è½½å¯¹åº”ç³»ç»Ÿç‰ˆæœ¬ï¼ŒæŒ‰æç¤ºå®‰è£…å³å¯ï¼Œç®€æ´ç›´è§‚ã€‚</li><li><strong>PicGo å®‰è£…</strong>ï¼šå®˜ç½‘ï¼ˆ<a href="https://picgo.github.io/PicGo-Doc/">https://picgo.github.io/PicGo-Doc/</a> ï¼‰æˆ–åº”ç”¨å•†åº—ä¸‹è½½ï¼Œæ”¯æŒå¤šå¹³å°ï¼Œå®‰è£…åé…ç½®å›¾åºŠï¼ˆå¦‚ GitHub å›¾åºŠã€ä¸ƒç‰›äº‘ç­‰ï¼Œæˆ‘ç”¨ GitHub å›¾åºŠæ—¶éœ€é…ç½®ä»“åº“ã€Token ç­‰ ï¼‰ã€‚</li></ol><h2 id="ä¸‰ã€Hexo-åˆå§‹åŒ–ä¸åšå®¢åŸºç¡€æ­å»º">ä¸‰ã€Hexo åˆå§‹åŒ–ä¸åšå®¢åŸºç¡€æ­å»º</h2><h3 id="ï¼ˆä¸€ï¼‰åˆå§‹åŒ–-Hexo-é¡¹ç›®">ï¼ˆä¸€ï¼‰åˆå§‹åŒ– Hexo é¡¹ç›®</h3><ol><li>åˆ›å»ºåšå®¢ç›®å½•ï¼ˆå¦‚ <code>my-blog</code> ï¼‰ï¼Œè¿›å…¥ç›®å½•ï¼š<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> my-blog <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> my-blog</code></pre></li><li>åˆå§‹åŒ– Hexoï¼š<pre class="language-bash" data-language="bash"><code class="language-bash">hexo init<span class="token function">npm</span> <span class="token function">install</span></code></pre>æ‰§è¡Œåï¼Œç›®å½•ä¼šç”Ÿæˆ Hexo åŸºç¡€æ–‡ä»¶ç»“æ„ï¼ŒåŒ…å« <code>_config.yml</code>ï¼ˆé…ç½®æ–‡ä»¶ ï¼‰ã€<code>source</code>ï¼ˆå­˜æ”¾æ–‡ç« ã€èµ„æº ï¼‰ã€<code>themes</code>ï¼ˆä¸»é¢˜ç›®å½• ï¼‰ç­‰ã€‚</li></ol><h3 id="ï¼ˆäºŒï¼‰ä¸»é¢˜é€‰æ‹©ä¸é…ç½®">ï¼ˆäºŒï¼‰ä¸»é¢˜é€‰æ‹©ä¸é…ç½®</h3><ol><li><strong>ä¸»é¢˜ä¸‹è½½</strong>ï¼šHexo å®˜ç½‘ï¼ˆ<a href="https://hexo.io/themes/">https://hexo.io/themes/</a> ï¼‰é€‰å¿ƒä»ªä¸»é¢˜ï¼Œæ¯”å¦‚æˆ‘ç”¨çš„ <code>anzhiyu</code> ä¸»é¢˜ï¼Œå…‹éš†åˆ° <code>themes</code> ç›®å½•ï¼š<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/Anzhiyu/hexo-theme-anzhiyu.git themes/anzhiyu</code></pre></li><li><strong>ä¸»é¢˜é…ç½®</strong>ï¼šå¤åˆ¶ä¸»é¢˜ç›®å½•ä¸‹çš„ <code>_config.yml</code> åˆ°åšå®¢æ ¹ç›®å½•ï¼Œé‡å‘½åä¸º <code>_config.anzhiyu.yml</code> ï¼Œä¿®æ”¹åŸºç¡€é…ç½®ï¼ˆå¦‚ç«™ç‚¹æ ‡é¢˜ã€æè¿°ã€å¤´åƒã€å¯¼èˆªèœå•ç­‰ ï¼‰ï¼Œè®©åšå®¢ç¬¦åˆéœ€æ±‚ã€‚</li></ol><h3 id="ï¼ˆä¸‰ï¼‰æœ¬åœ°é¢„è§ˆåšå®¢">ï¼ˆä¸‰ï¼‰æœ¬åœ°é¢„è§ˆåšå®¢</h3><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">hexo clean <span class="token operator">&amp;&amp;</span> hexo g <span class="token operator">&amp;&amp;</span> hexo s</code></pre><ul><li><code>hexo clean</code>ï¼šæ¸…ç†ä¹‹å‰ç”Ÿæˆçš„é™æ€æ–‡ä»¶ã€‚</li><li><code>hexo g</code>ï¼ˆ<code>hexo generate</code> ï¼‰ï¼šç”Ÿæˆé™æ€åšå®¢æ–‡ä»¶åˆ° <code>public</code> ç›®å½•ã€‚</li><li><code>hexo s</code>ï¼ˆ<code>hexo server</code> ï¼‰ï¼šå¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼Œæµè§ˆå™¨è®¿é—® <code>http://localhost:4000</code> ï¼Œå°±èƒ½çœ‹åˆ°åˆå§‹åšå®¢é¡µé¢ã€‚</li></ul><h2 id="å››ã€å†…å®¹åˆ›ä½œä¸ç®¡ç†ï¼ˆTypora-PicGo-S3æ’ä»¶-CloudFlareR2å­˜å‚¨æ¡¶-ï¼‰">å››ã€å†…å®¹åˆ›ä½œä¸ç®¡ç†ï¼ˆTypora + PicGo [S3æ’ä»¶] + CloudFlareR2å­˜å‚¨æ¡¶ ï¼‰</h2><h3 id="ä¸€ã€Cloudflare-R2-å­˜å‚¨æ¡¶åˆ›å»ºä¸åŸºç¡€é…ç½®">ä¸€ã€Cloudflare R2 å­˜å‚¨æ¡¶åˆ›å»ºä¸åŸºç¡€é…ç½®</h3><h4 id="ï¼ˆä¸€ï¼‰ç™»å½•-Cloudflare-æ§åˆ¶å°">ï¼ˆä¸€ï¼‰ç™»å½• Cloudflare æ§åˆ¶å°</h4><ol><li>è®¿é—® <a href="https://dash.cloudflare.com">Cloudflare Dashboard</a> å¹¶ç™»å½•è´¦æˆ·ï¼ˆè‹¥æ— è´¦æˆ·éœ€å…ˆæ³¨å†Œï¼‰ã€‚</li><li>ç‚¹å‡»å·¦ä¾§èœå•ä¸­çš„ <strong>R2</strong> é€‰é¡¹ï¼ˆè‹¥æœªæ˜¾ç¤ºï¼Œç‚¹å‡»â€œæ›´å¤šäº§å“â€æŸ¥æ‰¾ï¼‰ã€‚</li></ol><h4 id="ï¼ˆäºŒï¼‰åˆ›å»ºå­˜å‚¨æ¡¶">ï¼ˆäºŒï¼‰åˆ›å»ºå­˜å‚¨æ¡¶</h4><ol><li><p>ç‚¹å‡» <strong>åˆ›å»ºå­˜å‚¨æ¡¶</strong> æŒ‰é’®ï¼Œè¿›å…¥åˆ›å»ºæµç¨‹ï¼š</p><ul><li><strong>å­˜å‚¨æ¡¶åç§°</strong>ï¼šè‡ªå®šä¹‰ï¼ˆå¦‚ <code>blog-images</code>ï¼‰ï¼Œéœ€å…¨å±€å”¯ä¸€ï¼ˆå»ºè®®åŒ…å«ä¸ªäººæ ‡è¯†ï¼‰ã€‚</li><li><strong>åŒºåŸŸ</strong>ï¼šé€‰æ‹© <code>è‡ªåŠ¨</code>ï¼ˆAutoï¼‰ä»¥è·å¾—æœ€ä½³åˆ†å¸ƒï¼Œæˆ–æ‰‹åŠ¨æŒ‡å®šåŒºåŸŸï¼ˆå¦‚ <code>äºšæ´² - æ–°åŠ å¡</code>ï¼‰ã€‚</li><li><strong>è®¿é—®æ§åˆ¶</strong>ï¼šå‹¾é€‰ <strong>å…¬å¼€è®¿é—®</strong>ï¼ˆPublic accessï¼‰ï¼Œå…è®¸åŒ¿åè¯»å–å›¾ç‰‡ï¼ˆè‹¥ä»…ä¸ªäººä½¿ç”¨å¯è·³è¿‡ï¼‰ã€‚</li><li><strong>åŠ å¯†</strong>ï¼šé»˜è®¤å¯ç”¨æœåŠ¡å™¨ç«¯åŠ å¯†ï¼ˆSSEï¼‰ï¼Œæ— éœ€ä¿®æ”¹ã€‚</li></ul></li><li><p>ç‚¹å‡» <strong>åˆ›å»ºå­˜å‚¨æ¡¶</strong>ï¼Œç­‰å¾…çº¦ 10 ç§’å®Œæˆåˆ›å»ºã€‚</p></li></ol><h4 id="ï¼ˆä¸‰ï¼‰è·å–-API-è®¿é—®å‡­è¯">ï¼ˆä¸‰ï¼‰è·å– API è®¿é—®å‡­è¯</h4><ol><li><p>è¿›å…¥ <strong>å­˜å‚¨æ¡¶è¯¦æƒ…é¡µ</strong> â†’ <strong>æƒé™</strong> æ ‡ç­¾é¡µï¼š</p><ul><li>ç‚¹å‡» <strong>åˆ›å»ºè®¿é—®å¯†é’¥</strong> æŒ‰é’®ï¼ˆè‹¥æç¤ºéœ€è¦åˆ›å»ºå¯†é’¥å¯¹ï¼Œç‚¹å‡»â€œåˆ›å»ºâ€ï¼‰ã€‚</li><li>è®°å½•ç”Ÿæˆçš„ <strong>Access Key ID</strong> å’Œ <strong>Secret Access Key</strong>ï¼ˆä»…æ˜¾ç¤ºä¸€æ¬¡ï¼Œéœ€ç«‹å³ä¿å­˜åˆ°å®‰å…¨ä½ç½®ï¼‰ã€‚</li></ul></li><li><p>å¤åˆ¶å­˜å‚¨æ¡¶ç«¯ç‚¹ï¼ˆEndpointï¼‰ï¼š</p><ul><li>å­˜å‚¨æ¡¶è¯¦æƒ…é¡µ â†’ <strong>æ¦‚è¿°</strong> æ ‡ç­¾é¡µï¼Œæ‰¾åˆ° <strong>å¤–éƒ¨è®¿é—®</strong> ä¸­çš„ç«¯ç‚¹åœ°å€ï¼ˆæ ¼å¼ä¸º <code>https://&lt;è´¦æˆ·ID&gt;.r2.cloudflarestorage.com</code>ï¼‰ã€‚</li></ul></li></ol><h3 id="äºŒã€PicGo-é…ç½®-S3-æ’ä»¶å¯¹æ¥-R2">äºŒã€PicGo é…ç½® S3 æ’ä»¶å¯¹æ¥ R2</h3><h4 id="ï¼ˆä¸€ï¼‰å®‰è£…-S3-æ’ä»¶">ï¼ˆä¸€ï¼‰å®‰è£… S3 æ’ä»¶</h4><ol><li>æ‰“å¼€ PicGo è½¯ä»¶ â†’ <strong>æ’ä»¶ç®¡ç†</strong> â†’ æœç´¢ <code>s3</code> å¹¶å®‰è£… <strong>PicGo-S3-Plugin</strong>ï¼ˆè‹¥å·²å®‰è£…å¯è·³è¿‡ï¼‰ã€‚</li></ol><h4 id="ï¼ˆäºŒï¼‰é…ç½®æ’ä»¶å‚æ•°">ï¼ˆäºŒï¼‰é…ç½®æ’ä»¶å‚æ•°</h4><ol><li><p>è¿›å…¥ PicGo <strong>å›¾åºŠè®¾ç½®</strong> â†’ é€‰æ‹© <strong>S3</strong> æ’ä»¶ï¼š</p><ul><li><strong>Bucket</strong>ï¼šå¡«å†™åˆ›å»ºçš„å­˜å‚¨æ¡¶åç§°ï¼ˆå¦‚ <code>blog-images</code>ï¼‰ã€‚</li><li><strong>Region</strong>ï¼šå¡« <code>auto</code>ï¼ˆR2 ä¸åŒºåˆ†ä¼ ç»ŸåŒºåŸŸï¼‰ã€‚</li><li><strong>Access Key ID</strong>ï¼šç²˜è´´ Cloudflare ç”Ÿæˆçš„ Access Keyã€‚</li><li><strong>Secret Access Key</strong>ï¼šç²˜è´´å¯¹åº”çš„ Secret Keyã€‚</li><li><strong>Endpoint</strong>ï¼šç²˜è´´å­˜å‚¨æ¡¶ç«¯ç‚¹ï¼ˆå¦‚ <code>https://abc123.r2.cloudflarestorage.com</code>ï¼‰ã€‚</li><li><strong>Path</strong>ï¼šè‡ªå®šä¹‰å›¾ç‰‡å­˜å‚¨è·¯å¾„å‰ç¼€ï¼ˆå¦‚ <code>blog/</code>ï¼Œå¯ç•™ç©ºï¼‰ã€‚</li><li><strong>Custom Domain</strong>ï¼šå¡«å†™è‡ªå®šä¹‰åŸŸåï¼ˆå¦‚ <code>img.soniachen.com</code>ï¼Œåç»­é…ç½®ï¼‰ã€‚</li><li><strong>SSL</strong>ï¼šå‹¾é€‰ï¼ˆå¯ç”¨ HTTPS è®¿é—®ï¼‰ã€‚</li></ul></li><li><p>ç‚¹å‡» <strong>è®¾ä¸ºé»˜è®¤å›¾åºŠ</strong>ï¼Œå¹¶ç‚¹å‡» <strong>ç¡®å®š</strong> ä¿å­˜é…ç½®ã€‚</p></li></ol><h4 id="ï¼ˆä¸‰ï¼‰æµ‹è¯•ä¸Šä¼ ">ï¼ˆä¸‰ï¼‰æµ‹è¯•ä¸Šä¼ </h4><ol><li>åœ¨ PicGo ä¸»ç•Œé¢ç‚¹å‡» <strong>ä¸Šä¼ å›¾ç‰‡</strong>ï¼Œé€‰æ‹©æœ¬åœ°å›¾ç‰‡ï¼š<ul><li>è‹¥ä¸Šä¼ æˆåŠŸï¼Œä¸‹æ–¹ä¼šæ˜¾ç¤ºå›¾ç‰‡ URLï¼ˆå¦‚ <code>https://img.soniachen.com/blog/test.jpg</code>ï¼‰ã€‚</li></ul></li></ol><h3 id="ä¸‰ã€ç»‘å®šè‡ªå®šä¹‰åŸŸåï¼ˆCDN-åŠ é€Ÿï¼‰">ä¸‰ã€ç»‘å®šè‡ªå®šä¹‰åŸŸåï¼ˆCDN åŠ é€Ÿï¼‰</h3><h4 id="ï¼ˆä¸€ï¼‰æ·»åŠ åŸŸååˆ°-Cloudflare">ï¼ˆä¸€ï¼‰æ·»åŠ åŸŸååˆ° Cloudflare</h4><ol><li>ç™»å½• Cloudflare æ§åˆ¶å° â†’ <strong>åŸŸå</strong> â†’ <strong>æ·»åŠ åŸŸå</strong>ï¼š<ul><li>è¾“å…¥è‡ªå®šä¹‰åŸŸåï¼ˆå¦‚ <code>img.soniachen.com</code>ï¼‰ï¼Œç‚¹å‡» <strong>ç»§ç»­</strong>ã€‚</li><li>ç­‰å¾… Cloudflare æ‰«æ DNS è®°å½•ï¼ˆçº¦ 1 - 5 åˆ†é’Ÿï¼‰ã€‚</li></ul></li></ol><h4 id="ï¼ˆäºŒï¼‰é…ç½®-DNS-è§£æ">ï¼ˆäºŒï¼‰é…ç½® DNS è§£æ</h4><ol><li>åœ¨åŸŸåç®¡ç†ç•Œé¢ â†’ <strong>DNS</strong> æ ‡ç­¾é¡µï¼š<ul><li>æ·»åŠ ä¸€æ¡ <strong>CNAME</strong> è®°å½•ï¼š<ul><li><strong>åç§°</strong>ï¼šå¡« <code>@</code> æˆ– <code>img</code>ï¼ˆæ ¹æ®åŸŸåç»“æ„ï¼‰ã€‚</li><li><strong>ç›®æ ‡</strong>ï¼šå¡«å­˜å‚¨æ¡¶ç«¯ç‚¹ï¼ˆå¦‚ <code>abc123.r2.cloudflarestorage.com</code>ï¼‰ã€‚</li><li><strong>ä»£ç†çŠ¶æ€</strong>ï¼šé€‰æ‹© <strong>DNS Only</strong>ï¼ˆä»…è§£æï¼Œä¸å¯ç”¨ CDNï¼‰æˆ– <strong>Proxied</strong>ï¼ˆå¯ç”¨ CDN åŠ é€Ÿï¼‰ã€‚</li></ul></li></ul></li></ol><h4 id="ï¼ˆä¸‰ï¼‰é…ç½®-R2-è‡ªå®šä¹‰åŸŸå">ï¼ˆä¸‰ï¼‰é…ç½® R2 è‡ªå®šä¹‰åŸŸå</h4><ol><li>å›åˆ° R2 å­˜å‚¨æ¡¶ â†’ <strong>åŸŸå</strong> æ ‡ç­¾é¡µï¼š<ul><li>ç‚¹å‡» <strong>æ·»åŠ è‡ªå®šä¹‰åŸŸå</strong>ï¼Œè¾“å…¥å·²æ·»åŠ åˆ° Cloudflare çš„åŸŸåï¼ˆå¦‚ <code>img.soniachen.com</code>ï¼‰ã€‚</li><li>Cloudflare ä¼šè‡ªåŠ¨ç”Ÿæˆ SSL è¯ä¹¦ï¼ˆç­‰å¾…çº¦ 10 åˆ†é’Ÿç”Ÿæ•ˆï¼‰ã€‚</li></ul></li></ol><h3 id="å››ã€Hexo-é›†æˆ-R2-å›¾åºŠï¼ˆå¯é€‰ï¼‰">å››ã€Hexo é›†æˆ R2 å›¾åºŠï¼ˆå¯é€‰ï¼‰</h3><h4 id="ï¼ˆä¸€ï¼‰å®‰è£…-Hexo-æ’ä»¶">ï¼ˆä¸€ï¼‰å®‰è£… Hexo æ’ä»¶</h4><ol><li>åœ¨ Hexo é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-s3-image <span class="token parameter variable">--save</span></code></pre></li></ol><h4 id="ï¼ˆäºŒï¼‰é…ç½®æ’ä»¶">ï¼ˆäºŒï¼‰é…ç½®æ’ä»¶</h4><ol><li>ä¿®æ”¹ <code>_config.yml</code> æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">s3_image</span><span class="token punctuation">:</span>  <span class="token key atrule">bucket</span><span class="token punctuation">:</span> blog<span class="token punctuation">-</span>images          <span class="token comment"># å­˜å‚¨æ¡¶åç§°</span>  <span class="token key atrule">region</span><span class="token punctuation">:</span> auto                 <span class="token comment"># åŒºåŸŸ</span>  <span class="token key atrule">accessKeyId</span><span class="token punctuation">:</span> your<span class="token punctuation">-</span>access<span class="token punctuation">-</span>key <span class="token comment"># æ›¿æ¢ä¸ºå®é™… Access Key</span>  <span class="token key atrule">secretAccessKey</span><span class="token punctuation">:</span> your<span class="token punctuation">-</span>secret<span class="token punctuation">-</span>key <span class="token comment"># æ›¿æ¢ä¸ºå®é™… Secret Key</span>  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//abc123.r2.cloudflarestorage.com <span class="token comment"># ç«¯ç‚¹</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> blog/                  <span class="token comment"># å­˜å‚¨è·¯å¾„</span>  <span class="token key atrule">customUrl</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//img.soniachen.com <span class="token comment"># è‡ªå®šä¹‰åŸŸå</span>  <span class="token key atrule">public</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>                 <span class="token comment"># å…¬å¼€è®¿é—®</span></code></pre></li></ol><h4 id="ï¼ˆä¸‰ï¼‰ä½¿ç”¨æ–¹å¼">ï¼ˆä¸‰ï¼‰ä½¿ç”¨æ–¹å¼</h4><ol><li>åœ¨ Markdown ä¸­æ’å…¥å›¾ç‰‡æ—¶ï¼Œç›´æ¥ä½¿ç”¨æœ¬åœ°è·¯å¾„ï¼š<pre class="language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url"><span class="token operator">!</span>[<span class="token content">ç¤ºä¾‹å›¾ç‰‡</span>](<span class="token url">/img/test.jpg</span>)</span></code></pre></li><li>Hexo ç”Ÿæˆæ—¶ä¼šè‡ªåŠ¨ä¸Šä¼ å›¾ç‰‡åˆ° R2ï¼Œå¹¶æ›¿æ¢ä¸ºåœ¨çº¿é“¾æ¥ã€‚</li></ol><h3 id="äº”ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ">äº”ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3><h4 id="ï¼ˆä¸€ï¼‰403-Forbidden-é”™è¯¯">ï¼ˆä¸€ï¼‰403 Forbidden é”™è¯¯</h4><ul><li><strong>åŸå› </strong>ï¼šå­˜å‚¨æ¡¶æœªå¯ç”¨å…¬å¼€è®¿é—®æˆ–è®¿é—®å¯†é’¥é”™è¯¯ã€‚</li><li><strong>è§£å†³</strong>ï¼š<ol><li>å­˜å‚¨æ¡¶ â†’ <strong>æƒé™</strong> â†’ ç¡®ä¿ <strong>å…¬å¼€è®¿é—®</strong> å·²å¯ç”¨ã€‚</li><li>é‡æ–°æ ¸å¯¹ Access Key å’Œ Secret Key æ˜¯å¦æ­£ç¡®ã€‚</li></ol></li></ul><h4 id="ï¼ˆäºŒï¼‰å›¾ç‰‡é“¾æ¥è¿”å›-404">ï¼ˆäºŒï¼‰å›¾ç‰‡é“¾æ¥è¿”å› 404</h4><ul><li><strong>åŸå› </strong>ï¼šåŸŸåè§£æé”™è¯¯æˆ–è·¯å¾„é…ç½®é”™è¯¯ã€‚</li><li><strong>è§£å†³</strong>ï¼š<ol><li>æ£€æŸ¥ DNS è§£ææ˜¯å¦ç”Ÿæ•ˆï¼ˆå¯é€šè¿‡ <code>ping img.soniachen.com</code> éªŒè¯ï¼‰ã€‚</li><li>ç¡®è®¤ PicGo ä¸­ <code>Custom Domain</code> ä¸ Cloudflare åŸŸåä¸€è‡´ã€‚</li></ol></li></ul><h4 id="ï¼ˆä¸‰ï¼‰ä¸Šä¼ å¤±è´¥ï¼ˆç½‘ç»œé”™è¯¯ï¼‰">ï¼ˆä¸‰ï¼‰ä¸Šä¼ å¤±è´¥ï¼ˆç½‘ç»œé”™è¯¯ï¼‰</h4><ul><li><strong>åŸå› </strong>ï¼šEndpoint å¡«å†™é”™è¯¯æˆ–ç½‘ç»œé˜»æ–­ã€‚</li><li><strong>è§£å†³</strong>ï¼š<ol><li>å­˜å‚¨æ¡¶è¯¦æƒ…é¡µå¤åˆ¶ç«¯ç‚¹ï¼Œç¡®ä¿æ— å¤šä½™å­—ç¬¦ï¼ˆå¦‚æœ«å°¾ç©ºæ ¼ï¼‰ã€‚</li><li>å°è¯•æ›´æ¢ç½‘ç»œç¯å¢ƒï¼ˆå¦‚å…³é—­ VPNï¼‰ã€‚</li></ol></li></ul><h3 id="å…­ã€è¿›é˜¶ä¼˜åŒ–ï¼šç¼“å­˜ä¸å®‰å…¨">å…­ã€è¿›é˜¶ä¼˜åŒ–ï¼šç¼“å­˜ä¸å®‰å…¨</h3><h4 id="ï¼ˆä¸€ï¼‰è®¾ç½®ç¼“å­˜ç­–ç•¥">ï¼ˆä¸€ï¼‰è®¾ç½®ç¼“å­˜ç­–ç•¥</h4><ol><li>Cloudflare åŸŸå â†’ <strong>è§„åˆ™</strong> â†’ <strong>é¡µé¢è§„åˆ™</strong>ï¼š<ul><li>æ·»åŠ è§„åˆ™ <code>https://img.soniachen.com/*</code>ï¼Œè®¾ç½® <strong>ç¼“å­˜çº§åˆ«</strong> ä¸º <strong>ç¼“å­˜æ‰€æœ‰</strong>ï¼Œ<strong>TTL</strong> ä¸º 1 å¤©ï¼ˆæ ¹æ®éœ€æ±‚è°ƒæ•´ï¼‰ã€‚</li></ul></li></ol><h4 id="ï¼ˆäºŒï¼‰å¯ç”¨é˜²ç›—é“¾">ï¼ˆäºŒï¼‰å¯ç”¨é˜²ç›—é“¾</h4><ol><li>å­˜å‚¨æ¡¶ â†’ <strong>æƒé™</strong> â†’ <strong>æ·»åŠ  Origin Access</strong>ï¼š<ul><li>é…ç½®å…è®¸è®¿é—®çš„åŸŸåï¼ˆå¦‚ <code>soniachen.com</code>ï¼‰ï¼Œæ‹’ç»å…¶ä»–åŸŸåç›—ç”¨å›¾ç‰‡ã€‚</li></ul></li></ol><pre class="language-bash" data-language="bash"><code class="language-bash">/opt/homebrew/bin/node /opt/homebrew/bin/picgo upload</code></pre><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617162011339.png" alt="image-20250617162011339" style="zoom:50%;" /><h2 id="äº”ã€åšå®¢éƒ¨ç½²ï¼ˆGit-GitHub-Pages-CloudFlare-ï¼‰">äº”ã€åšå®¢éƒ¨ç½²ï¼ˆGit + GitHub Pages + CloudFlare ï¼‰</h2><h3 id="ï¼ˆä¸€ï¼‰GitHub-ä»“åº“å‡†å¤‡">ï¼ˆä¸€ï¼‰GitHub ä»“åº“å‡†å¤‡</h3><ol><li>GitHub æ–°å»ºä»“åº“ï¼Œå‘½åè§„åˆ™ï¼šè‹¥ä¸ºç”¨æˆ·/ç»„ç»‡é¡µï¼Œä»“åº“åå¡« <code>ä½ çš„GitHubç”¨æˆ·å.github.io</code>ï¼ˆå¦‚ <code>soniachan33.github.io</code> ï¼‰ï¼›è‹¥ä¸ºé¡¹ç›®é¡µï¼Œä»“åº“åè‡ªå®šä¹‰ï¼ˆåç»­éœ€é…ç½®è·¯å¾„ ï¼‰ã€‚</li><li>ä»“åº“åˆ›å»ºåï¼Œå¤åˆ¶ä»“åº“çš„ Git åœ°å€ï¼ˆSSH æˆ– HTTPS å½¢å¼ ï¼‰ã€‚</li></ol><h3 id="ï¼ˆäºŒï¼‰Hexo-éƒ¨ç½²é…ç½®">ï¼ˆäºŒï¼‰Hexo éƒ¨ç½²é…ç½®</h3><p>ä¿®æ”¹åšå®¢æ ¹ç›®å½• <code>_config.yml</code> çš„ <code>deploy</code> é…ç½®ï¼š</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> git  <span class="token key atrule">repo</span><span class="token punctuation">:</span> git@github.com<span class="token punctuation">:</span>ä½ çš„GitHubç”¨æˆ·å/ä½ çš„ä»“åº“å.git  <span class="token comment"># æ›¿æ¢ä¸ºå®é™…ä»“åº“åœ°å€</span>  <span class="token key atrule">branch</span><span class="token punctuation">:</span> main  <span class="token comment"># éƒ¨ç½²åˆ†æ”¯ï¼ŒGitHub Pages å¸¸ç”¨ main æˆ– gh-pages</span></code></pre><p>å®‰è£… <code>hexo-deployer-git</code> æ’ä»¶ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git <span class="token parameter variable">--save</span></code></pre><h3 id="ï¼ˆä¸‰ï¼‰éƒ¨ç½²åˆ°-GitHub-Pages">ï¼ˆä¸‰ï¼‰éƒ¨ç½²åˆ° GitHub Pages</h3><p>æ‰§è¡Œéƒ¨ç½²å‘½ä»¤ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">hexo clean <span class="token operator">&amp;&amp;</span> hexo g <span class="token operator">&amp;&amp;</span> hexo d</code></pre><p>Hexo ä¼šæŠŠç”Ÿæˆçš„é™æ€æ–‡ä»¶ï¼ˆ<code>public</code> ç›®å½•å†…å®¹ ï¼‰æ¨é€åˆ° GitHub ä»“åº“å¯¹åº”åˆ†æ”¯ï¼Œç¨ç­‰ç‰‡åˆ»ï¼Œè®¿é—® <code>https://ä½ çš„GitHubç”¨æˆ·å.github.io</code>ï¼ˆæˆ–é¡¹ç›®é¡µåœ°å€ ï¼‰ï¼Œèƒ½çœ‹åˆ°çº¿ä¸Šåšå®¢ã€‚</p><h3 id="ï¼ˆå››ï¼‰CloudFlare-åŠ é€Ÿä¸é…ç½®">ï¼ˆå››ï¼‰CloudFlare åŠ é€Ÿä¸é…ç½®</h3><ol><li><strong>æ·»åŠ ç«™ç‚¹</strong>ï¼šCloudFlare å®˜ç½‘ï¼ˆ<a href="https://www.cloudflare.com/">https://www.cloudflare.com/</a> ï¼‰æ³¨å†Œç™»å½•ï¼Œæ·»åŠ ç«™ç‚¹ï¼ˆè¾“å…¥åšå®¢åŸŸåï¼Œè‹¥ç”¨ GitHub Pages é»˜è®¤åŸŸåå¯è·³è¿‡ï¼Œè‹¥è‡ªå®šä¹‰åŸŸåéœ€æå‰å¤‡æ¡ˆã€è§£æ ï¼‰ã€‚</li><li><strong>DNS è§£æè®¾ç½®</strong>ï¼šæ·»åŠ  DNS è®°å½•ï¼Œå°†åŸŸåè§£æåˆ° GitHub Pages å¯¹åº”çš„ IPï¼ˆæˆ–ç›´æ¥è§£æåˆ° <code>ä½ çš„GitHubç”¨æˆ·å.github.io</code>  ï¼‰ï¼Œè®© CloudFlare æ¥ç®¡ DNS è§£æã€‚</li><li><strong>CDN ä¸å®‰å…¨é…ç½®</strong>ï¼šå¼€å¯ CDN åŠ é€Ÿï¼Œä¼˜åŒ–ç¼“å­˜ã€å‹ç¼©ç­‰è®¾ç½®ï¼›å¯ç”¨å®‰å…¨é˜²æŠ¤ï¼ˆå¦‚ DDoS é˜²æŠ¤ã€é˜²ç«å¢™è§„åˆ™ ï¼‰ï¼Œæå‡åšå®¢è®¿é—®é€Ÿåº¦ä¸å®‰å…¨æ€§ã€‚</li><li><strong>è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰</strong>ï¼šè‹¥ç”¨è‡ªå®šä¹‰åŸŸåï¼ˆå¦‚ <code>soniachen.com</code>  ï¼‰ï¼Œåœ¨ GitHub Pages ä»“åº“è®¾ç½®ä¸­å¡«è‡ªå®šä¹‰åŸŸåï¼ŒåŒæ—¶åœ¨ CloudFlare é…ç½®åŸŸåè§£æã€SSL è¯ä¹¦ï¼ˆæ¨èå¼€å¯ Full æˆ– Strict æ¨¡å¼ ï¼‰ï¼Œç¡®ä¿ <code>HTTPS</code> è®¿é—®æ­£å¸¸ã€‚</li></ol><h2 id="å…­ã€åšå®¢ä¼˜åŒ–ä¸ç»´æŠ¤">å…­ã€åšå®¢ä¼˜åŒ–ä¸ç»´æŠ¤</h2><h3 id="ï¼ˆä¸€ï¼‰SEO-ä¼˜åŒ–">ï¼ˆä¸€ï¼‰SEO ä¼˜åŒ–</h3><ol><li><strong>ç«™ç‚¹åœ°å›¾ï¼ˆSitemap ï¼‰</strong>ï¼šå®‰è£… <code>hexo-generator-sitemap</code> æ’ä»¶ï¼Œç”Ÿæˆç«™ç‚¹åœ°å›¾ï¼š<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-sitemap <span class="token parameter variable">--save</span></code></pre>ä¿®æ”¹ <code>_config.yml</code> é…ç½®ï¼š<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">sitemap</span><span class="token punctuation">:</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> sitemap.xml</code></pre>éƒ¨ç½²åï¼Œé€šè¿‡ <code>https://ä½ çš„åŸŸå/sitemap.xml</code> è®¿é—®ï¼Œæäº¤ç»™ç™¾åº¦ã€å¿…åº”ã€è°·æ­Œç­‰æœç´¢å¼•æ“ï¼ŒåŠ©åŠ›æ”¶å½•ã€‚</li><li><strong>Meta æ ‡ç­¾ä¸å…³é”®è¯</strong>ï¼šåœ¨ä¸»é¢˜é…ç½®æˆ–æ–‡ç«  Front-matter ä¸­ï¼Œè®¾ç½®æ ‡é¢˜ã€æè¿°ã€å…³é”®è¯ï¼Œè®©æœç´¢å¼•æ“æ›´å¥½ç†è§£å†…å®¹ï¼Œæå‡æœç´¢æ’åã€‚</li></ol><h3 id="ï¼ˆäºŒï¼‰æŒç»­æ›´æ–°ä¸å¤‡ä»½">ï¼ˆäºŒï¼‰æŒç»­æ›´æ–°ä¸å¤‡ä»½</h3><ol><li><strong>å†…å®¹æ›´æ–°</strong>ï¼šç”¨ Typora å†™æ–°æ–‡ç« ï¼Œå­˜åˆ° <code>source/_posts</code> ç›®å½•ï¼Œæ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</code> éƒ¨ç½²ï¼ŒæŒç»­è¾“å‡ºä¼˜è´¨å†…å®¹ã€‚</li><li><strong>ç‰ˆæœ¬å¤‡ä»½</strong>ï¼šå€ŸåŠ© Gitï¼Œå®šæœŸæäº¤ä»£ç åˆ° GitHub ä»“åº“ï¼Œè®°å½•åšå®¢é…ç½®ã€æ–‡ç« ä¿®æ”¹å†å²ï¼Œæ–¹ä¾¿å›é€€ä¸ååŒã€‚</li></ol><h2 id="ä¸ƒã€é‡åˆ°çš„é—®é¢˜ä¸è§£å†³ï¼ˆç»“åˆä¹‹å‰çš„ç–‘é—®ï¼‰">ä¸ƒã€é‡åˆ°çš„é—®é¢˜ä¸è§£å†³ï¼ˆç»“åˆä¹‹å‰çš„ç–‘é—®ï¼‰</h2><h3 id="ï¼ˆä¸€ï¼‰GitHub-Pages-éƒ¨ç½²å-404">ï¼ˆä¸€ï¼‰GitHub Pages éƒ¨ç½²å 404</h3><ul><li><strong>åŸå› </strong>ï¼šéƒ¨ç½²åˆ†æ”¯ä¸ GitHub Pages è®¾ç½®ä¸ä¸€è‡´ã€<code>root</code> é…ç½®é”™è¯¯ã€<code>CNAME</code> æ–‡ä»¶ä¸¢å¤±ç­‰ã€‚</li><li><strong>è§£å†³</strong>ï¼šç¡®ä¿ <code>_config.yml</code> ä¸­ <code>deploy</code> åˆ†æ”¯æ­£ç¡®ï¼Œç”¨æˆ·é¡µ <code>root</code> è®¾ä¸º <code>/</code> ï¼›åœ¨ Hexo é¡¹ç›® <code>source</code> ç›®å½•æ·»åŠ  <code>CNAME</code> æ–‡ä»¶ï¼ˆå¡«è‡ªå®šä¹‰åŸŸå ï¼‰ï¼Œé‡æ–°éƒ¨ç½²ã€‚</li></ul><h3 id="ï¼ˆäºŒï¼‰CloudFlare-éƒ¨ç½²ååŸŸåé…ç½®æ¸…ç©º">ï¼ˆäºŒï¼‰CloudFlare éƒ¨ç½²ååŸŸåé…ç½®æ¸…ç©º</h3><ul><li><strong>åŸå› </strong>ï¼šHexo éƒ¨ç½²è¦†ç›– GitHub Pages åˆ†æ”¯å†…å®¹ï¼Œ<code>CNAME</code> æ–‡ä»¶æœªåŒæ­¥ã€‚</li><li><strong>è§£å†³</strong>ï¼šåœ¨ Hexo é¡¹ç›® <code>source</code> ç›®å½•æ·»åŠ  <code>CNAME</code> æ–‡ä»¶ï¼Œå†…å®¹å¡«è‡ªå®šä¹‰åŸŸåï¼Œéƒ¨ç½²æ—¶åŒæ­¥åˆ° GitHub ä»“åº“ï¼ŒCloudFlare é…ç½®å°±ä¼šä¿ç•™ã€‚</li></ul><h3 id="ï¼ˆä¸‰ï¼‰å¿…åº”æ”¶å½•éªŒè¯é—®é¢˜">ï¼ˆä¸‰ï¼‰å¿…åº”æ”¶å½•éªŒè¯é—®é¢˜</h3><ul><li><strong>æ–¹æ³•</strong>ï¼šé€šè¿‡ XML æ–‡ä»¶ï¼ˆä¸‹è½½ <code>BingSiteAuth.xml</code> æ”¾ Hexo <code>source</code> ç›®å½•ï¼Œéƒ¨ç½²åéªŒè¯ ï¼‰ã€HTML Meta æ ‡è®°ï¼ˆæ·»åŠ åˆ°åšå®¢é¦–é¡µ <code>&lt;head&gt;</code>  ï¼‰ã€DNS CNAME è®°å½•ï¼ˆåŸŸåè§£æåå°æ·»åŠ  ï¼‰å®ŒæˆéªŒè¯ï¼Œæäº¤ç«™ç‚¹åœ°å›¾ï¼Œè®©åšå®¢åœ¨å¿…åº”æœç´¢å¯è§ã€‚</li></ul><h2 id="å…«ã€æ€»ç»“">å…«ã€æ€»ç»“</h2><p>ä»å·¥å…·å®‰è£…ã€Hexo åˆå§‹åŒ–ï¼Œåˆ°å†…å®¹åˆ›ä½œã€éƒ¨ç½²ä¸Šçº¿ï¼Œå†åˆ°ç”¨ CloudFlare åŠ é€Ÿã€ä¼˜åŒ– SEO ï¼Œæ•´ä¸ªæµç¨‹è™½æœ‰æ³¢æŠ˜ï¼Œä½†ä¸€æ­¥æ­¥æ­å»ºå‡ºä¸“å±åšå®¢ï¼Œæˆå°±æ„Ÿæ»¡æ»¡ã€‚è¿™äº”ä¸ªå·¥å…·ç›¸äº’é…åˆï¼Œè®©åšå®¢ä»æœ¬åœ°èµ°å‘å…¬ç½‘ï¼Œæˆä¸ºå±•ç¤ºè‡ªæˆ‘çš„çª—å£ã€‚æœªæ¥ï¼Œç»§ç»­ç”¨å®ƒä»¬æ›´æ–°å†…å®¹ã€ä¼˜åŒ–ä½“éªŒï¼Œè®©åšå®¢æŒç»­ç”Ÿé•¿ï½</p><p><strong>é™„å½•</strong>ï¼šå…³é”®å‘½ä»¤ä¸é…ç½®æ±‡æ€»ï¼Œæ–¹ä¾¿é€ŸæŸ¥ï¼š</p><ul><li>Hexo å¸¸ç”¨å‘½ä»¤ï¼š<code>hexo clean</code>ã€<code>hexo g</code>ã€<code>hexo s</code>ã€<code>hexo d</code> ã€‚</li><li>Git é…ç½®ä¸éƒ¨ç½²ï¼š<code>git config</code>ã€<code>hexo-deployer-git</code> æ’ä»¶é…ç½®ã€‚</li><li>CloudFlare æ ¸å¿ƒæ“ä½œï¼šDNS è§£æã€CDN åŠ é€Ÿã€SSL é…ç½®ã€‚</li><li>PicGo + Typora å›¾åºŠå†™ä½œï¼šTypora ä¸Šä¼ å›¾ç‰‡è®¾ç½®ã€PicGo å›¾åºŠé…ç½®ã€‚</li></ul><p>å¸Œæœ›è¿™ç¯‡å¤ç›˜èƒ½å¸®åˆ°æƒ³æ­å»ºåšå®¢çš„ä½ ï¼Œä¸€èµ·ç”¨æŠ€æœ¯è®°å½•ç”Ÿæ´»ã€åˆ†äº«ä¸–ç•Œï½</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> CloudFlare </tag>
            
            <tag> Git </tag>
            
            <tag> Typora </tag>
            
            <tag> PicGo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WEB3 Day1â€”BlockChain Basic 1</title>
      <link href="/2025/06/17/WEB3%20Day1%20%E2%80%94%E2%80%94%20BlockChain%20Basic%201/"/>
      <url>/2025/06/17/WEB3%20Day1%20%E2%80%94%E2%80%94%20BlockChain%20Basic%201/</url>
      <cover>https://img.soniachen.com/blog/posts/2025/06/image-20250617143925337-20250617172413705.png</cover>
      <date>Tue Jun 17 2025 14:26:18 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>WEB3 Day1â€”BlockChain Basic 1</h1><h2 id="è½¬å‹æ–¹å‘">è½¬å‹æ–¹å‘</h2><p>ä» Java å¼€å‘è½¬å‹è‡³æ™ºèƒ½åˆçº¦å¼€å‘ã€‚</p><h2 id="å­¦ä¹ èµ„æº">å­¦ä¹ èµ„æº</h2><h3 id="å­¦ä¹ è§†é¢‘">å­¦ä¹ è§†é¢‘</h3><p>æ¨è patrick collins ã€Cyfrinã€‘çš„<a href="https://www.youtube.com/watch?v=M576WGiDBdQ&amp;t=1231s">æ•™å­¦è§†é¢‘</a> ã€‚</p><p>åŒæ—¶ï¼Œ<a href="https://updraft.cyfrin.io/courses/blockchain-basics/basics/l1s-l2s-and-rollups">Cyfrin Updraft å®˜ç½‘</a>æä¾›äº†æ–‡å­—ç¬”è®°å’Œè§†é¢‘è¯¾ç¨‹ã€‚ä¸è¿‡ï¼ŒæŸäº›ç¿»è¯‘æ’ä»¶çš„åŒè¯­å­—å¹•ä¸æ”¯æŒè¯¥ç½‘ç«™ï¼Œå› æ­¤æˆ‘é€‰æ‹©åœ¨ YouTube ä¸Šè§‚çœ‹å®Œæ•´è§†é¢‘ï¼Œå¹¶ä¸”å°†ä¸¤è€…ç»“åˆèµ·æ¥å­¦ä¹ ã€‚</p><h3 id="ç¿»è¯‘æ’ä»¶æ¨è">ç¿»è¯‘æ’ä»¶æ¨è</h3><p>è¿™é‡Œæ¨èä¸€æ¬¾ç¿»è¯‘æ’ä»¶â€”â€”<a href="https://immersivetranslate.com/zh-Hans/">æ²‰æµ¸å¼ç¿»è¯‘</a></p><h2 id="åˆ›å»ºè‡ªå·±çš„é’±åŒ…">åˆ›å»ºè‡ªå·±çš„é’±åŒ…</h2><h3 id="å®‰è£…-MetaMask-æ’ä»¶">å®‰è£… MetaMask æ’ä»¶</h3><p>é¦–å…ˆï¼Œè¿›å…¥ <a href="https://metamask.io/">MetaMask å®˜ç½‘</a>ï¼Œå°†å…¶ä½œä¸º Chrome æµè§ˆå™¨æ’ä»¶æ·»åŠ åˆ°æµè§ˆå™¨ä¸­ã€‚</p><h3 id="åˆ›å»ºé’±åŒ…">åˆ›å»ºé’±åŒ…</h3><p>åˆ›å»ºè‡ªå·±çš„é’±åŒ…åï¼Œä¼šå¾—åˆ°ä¸‰ä¸ªå…³é”®ä¿¡æ¯ï¼šç§é’¥ï¼ˆprivate keyï¼‰ã€åŠ©è®°è¯ï¼ˆMnemonic Keyï¼‰å’Œå…¬é’¥åœ°å€ï¼ˆpublic Addressï¼‰ã€‚å…¶ä¸­ï¼Œç§é’¥å’ŒåŠ©è®°è¯æå…¶é‡è¦ï¼ŒåŠ¡å¿…å®‰å…¨ä¿å­˜ï¼å› ä¸ºæ‹¥æœ‰ç§é’¥å°±å¯ä»¥ç›´æ¥è®¿é—®ä½ çš„é’±åŒ…è´¦æˆ·ï¼Œæ‰€ä»¥åƒä¸‡ä¸èƒ½æœ‰ä¾¥å¹¸å¿ƒç†ã€‚å»ºè®®å°†åŠ©è®°è¯è®°å½•åœ¨çº¸ä¸Šï¼Œè€Œä¸æ˜¯å­˜å‚¨åœ¨ç”µè„‘é‡Œï¼Œå¦‚æœèƒ½è®°åœ¨å¤§è„‘ä¸­ï¼ˆå¦‚ä½¿ç”¨è®°å¿†å®«æ®¿çš„æ–¹æ³•ï¼‰åˆ™æ˜¯æœ€å®‰å…¨çš„ã€‚ä¸‰è€…çš„é‡è¦æ€§æ’åºä¸ºï¼šã€Mnemonic &gt; Private Key &gt; public Addressã€‘ã€‚</p><p>ç›¸å…³å›¾ç¤ºå¦‚ä¸‹ï¼š<br><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617143925337-20250617172413705.png" alt="image-20250617143925337" style="zoom: 33%;" /><br><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617143938391-20250617172413858.png" alt="image-20250617143938391" style="zoom:25%;" /></p><h3 id="æ¨¡æ‹Ÿäº¤æ˜“">æ¨¡æ‹Ÿäº¤æ˜“</h3><h4 id="åˆ›å»ºè™šæ‹Ÿæµ‹è¯•ç½‘ç»œ">åˆ›å»ºè™šæ‹Ÿæµ‹è¯•ç½‘ç»œ</h4><p>ç™»å½• Tenderly æµ‹è¯•ç½‘ç«™ï¼ˆ<a href="https://tenderly.co/?mtm_campaign=partner&amp;mtm_kwd=cyfrin">https://tenderly.co/?mtm_campaign=partner&amp;mtm_kwd=cyfrin</a> ï¼‰ï¼Œé€šè¿‡è¯¥é“¾æ¥æ³¨å†Œå¹¶åˆ›å»ºè´¦æˆ·æ˜¯å…è´¹çš„ã€‚åœ¨ç½‘ç«™å·¦ä¾§ç‚¹å‡»â€œvirtual TestNetsâ€ï¼Œåˆ›å»ºè™šæ‹Ÿæµ‹è¯•ç½‘ç»œã€‚<br><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617143945197-20250617172414056.png" alt="image-20250617143945197" style="zoom:33%;" /></p><h4 id="ç½‘ç»œè®¾ç½®">ç½‘ç»œè®¾ç½®</h4><p>è¿›è¡Œç®€å•è®¾ç½®ï¼Œæ— ç‰¹å®šè¦æ±‚ã€‚è®¾ç½®å®Œæˆåï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ¨¡æ‹ŸåŒºå—é“¾ï¼Œæ¥ä¸‹æ¥å¯ä»¥å°†å…¶æ·»åŠ åˆ° MetaMask ä¸­ã€‚<br><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617143952962-20250617172414269.png" alt="image-20250617143952962" style="zoom:50%;" /></p><h4 id="æ‰‹åŠ¨æ·»åŠ ç½‘ç»œé—®é¢˜å¤„ç†">æ‰‹åŠ¨æ·»åŠ ç½‘ç»œé—®é¢˜å¤„ç†</h4><p>åœ¨è¿æ¥åï¼Œå¯èƒ½ä¼šé‡åˆ° MetaMask ä¸­æœªæ˜¾ç¤ºåˆ›å»ºçš„è™šæ‹Ÿç½‘ç»œçš„é—®é¢˜ï¼Œæ­¤æ—¶éœ€è¦æ‰‹åŠ¨æ·»åŠ ã€‚æ³¨æ„ï¼ŒåŸç³»ç»Ÿé»˜è®¤çš„ chainIdï¼ˆ11155111ï¼‰æ— æ³•ä¿®æ”¹ï¼Œå› æ­¤éœ€è¦é‡æ–°åˆ›å»ºä¸€ä¸ªé“¾ï¼Œå¹¶åœ¨åˆ›å»ºæ—¶åœ¨â€œcustomâ€å¤„ä¿®æ”¹è‡ªå·±çš„ IDã€‚<br><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617144007052-20250617172414606.png" alt="image-20250617144007052" style="zoom: 33%;" /><br>æœ‰å…¶ä»–å¼€å‘è€…ä¹Ÿé‡åˆ°äº†åŒæ ·çš„é—®é¢˜ï¼Œå¯å‚è€ƒï¼š<a href="https://github.com/Cyfrin/foundry-full-course-cu/discussions/4066?sort=old">https://github.com/Cyfrin/foundry-full-course-cu/discussions/4066?sort=old</a></p><h4 id="æ³¨èµ„æ“ä½œ">æ³¨èµ„æ“ä½œ</h4><p>å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œè¿›è¡Œæ³¨èµ„ã€‚<br><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617144013149-20250617172414727.png" alt="image-20250617144013149" style="zoom:33%;" /></p><h4 id="æŸ¥çœ‹æ³¨èµ„ç»“æœ">æŸ¥çœ‹æ³¨èµ„ç»“æœ</h4><p>æ³¨èµ„å®Œæˆåï¼Œç­‰å¾…å‡ åˆ†é’Ÿï¼Œå°±å¯ä»¥åœ¨è‡ªå®šä¹‰è™šæ‹Ÿç½‘ç»œä¸­çœ‹åˆ°èµ„é‡‘åˆ°è´¦å•¦ï¼Œä»¿ä½›ç¬é—´â€œæš´å¯Œâ€ï¼ˆå½“ç„¶è¿™åªæ˜¯æ¨¡æ‹Ÿï¼‰ã€‚<br><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617144019117-20250617172414877.png" alt="image-20250617144019117" style="zoom:33%;" /></p><h4 id="è´¦æˆ·é—´è½¬è´¦">è´¦æˆ·é—´è½¬è´¦</h4><p>åœ¨æ¨¡æ‹Ÿç½‘ç»œä¸­ï¼Œä»ä¸€ä¸ªè´¦æˆ·å‘å¦ä¸€ä¸ªè´¦æˆ·è½¬è´¦éå¸¸ç®€å•ï¼Œç›´æ¥è¿›è¡Œå‘é€æ“ä½œå³å¯ã€‚<br><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617144024781-20250617172415010.png" alt="image-20250617144024781" style="zoom:33%;" /><br><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617144053479-20250617172415108.png" alt="image-20250617144053479" style="zoom:33%;" /></p><p>å¦å¤–ï¼ŒTenderly ä¸ Cypher æœ‰åˆä½œï¼Œè´¦æˆ·å¯ä»¥ç»­æœŸã€‚<br><img src="https://img.soniachen.com/blog/posts/2025/06/image-20250617144034552-20250617172415354.png" alt="image-20250617144034552" style="zoom:33%;" /></p><h2 id="åŒºå—é“¾æ•°æ®ç»“æ„">åŒºå—é“¾æ•°æ®ç»“æ„</h2><p>å¯ä»¥é€šè¿‡ BlockChain Demo ç½‘ç«™ï¼ˆ<a href="https://andersbrownworth.com/blockchain/block">https://andersbrownworth.com/blockchain/block</a> ï¼‰æ¥å¸®åŠ©ç†è§£åŒºå—é“¾çš„åº•å±‚æ•°æ®ç»“æ„ã€‚</p><h2 id="äº¤æ˜“è´¹ç”¨ç›¸å…³æ¦‚å¿µ">äº¤æ˜“è´¹ç”¨ç›¸å…³æ¦‚å¿µ</h2><h3 id="äº¤æ˜“è´¹ç”¨ï¼ˆTransaction-Feeï¼‰">äº¤æ˜“è´¹ç”¨ï¼ˆTransaction Feeï¼‰</h3><p>äº¤æ˜“è´¹ç”¨æ˜¯æ”¯ä»˜ç»™åŒºå—ç”Ÿäº§è€…å¤„ç†äº¤æ˜“çš„å¥–åŠ±é‡‘é¢ï¼Œé€šå¸¸é€šè¿‡ä»¥å¤ªå¸æˆ–è€… Gwei æ”¯ä»˜ã€‚</p><h3 id="ç‡ƒæ°”ä»·æ ¼ï¼ˆGas-Priceï¼‰">ç‡ƒæ°”ä»·æ ¼ï¼ˆGas Priceï¼‰</h3><p>åŒæ ·ä»¥ä»¥å¤ªå¸æˆ–è€… Gwei æ¥å®šä¹‰ï¼Œç‡ƒæ°”ä»·æ ¼æ˜¯äº¤æ˜“ä¸­æŒ‡å®šçš„æ¯å•ä½ç‡ƒæ°”ï¼ˆGasï¼‰çš„æˆæœ¬ã€‚ä»·æ ¼è¶Šé«˜ï¼Œäº¤æ˜“è¢«æ‰“åŒ…è¿›åŒºå—çš„æœºä¼šå°±è¶Šå¤§ï¼Œå®ƒç”¨äºè®¾å®šäº¤æ˜“ä¸­æ¯å•ä½ç‡ƒæ°”çš„æˆæœ¬ã€‚</p><h3 id="ç‡ƒæ°”ï¼ˆGasï¼‰">ç‡ƒæ°”ï¼ˆGasï¼‰</h3><p>ä¸è¦å°†ç‡ƒæ°”ä¸ç‡ƒæ°”ä»·æ ¼æ··æ·†ã€‚ç‡ƒæ°”æŒ‡çš„æ˜¯æ‰§è¡Œäº¤æ˜“æ‰€éœ€è¦çš„å·¥ä½œé‡ï¼Œè€Œç‡ƒæ°”ä»·æ ¼åˆ™æ˜¯æ¯å•ä½å·¥ä½œé‡çš„æˆæœ¬ã€‚</p><p>äº¤æ˜“è´¹ç”¨çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p><pre class="language-latex" data-language="latex"><code class="language-latex">Transaction fee =  gasPrice * gasUsed</code></pre><p>ç®€å•æ¥è¯´ï¼Œå½“å¤§é‡ç”¨æˆ·è¿›è¡Œäº¤æ˜“æ—¶ï¼Œç‰¹å®šåŒºå—çš„ç©ºé—´ç«äº‰ä¼šå˜å¾—æ¿€çƒˆï¼Œæ­¤æ—¶æé«˜ç‡ƒæ°”ä»·æ ¼å¯ä»¥åœ¨æ‹¥å µæ—¶é™åˆ¶äº¤æ˜“ï¼Œå¹¶ä¼˜å…ˆå¤„ç†éƒ¨åˆ†äº¤æ˜“ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Web3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BlockChain </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisä¸MQåœ¨é¡¹ç›®ä¸­çš„è¿ç”¨</title>
      <link href="/2025/04/06/Redis%E3%80%81MQ%E7%9A%84%E9%A1%B9%E7%9B%AE%E8%BF%90%E7%94%A8/"/>
      <url>/2025/04/06/Redis%E3%80%81MQ%E7%9A%84%E9%A1%B9%E7%9B%AE%E8%BF%90%E7%94%A8/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=b658ade9-f349-37b1-61bf-f30e2a120210</cover>
      <date>Sun Apr 06 2025 20:31:00 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>1ã€Redisä¸MQåœ¨é¡¹ç›®ä¸­çš„è¿ç”¨ï¼</h1><h2 id="Redisåº”ç”¨åœºæ™¯-ç¼“å­˜ç³»ç»Ÿ">Redisåº”ç”¨åœºæ™¯-ç¼“å­˜ç³»ç»Ÿ</h2><img src="https://img.soniachen.com/blog/posts/2025/06/362bab478a0645a89abb3d5d08bc06ee.png" alt="image.png" style="zoom: 50%;" /><p>Redisæœ€ä¸»è¦çš„è¿˜æ˜¯åšç¼“å­˜ï¼Œä¸€èˆ¬çš„æ–¹æ¡ˆä¸‹å°±æ˜¯æŠŠçƒ­ç‚¹æ•°æ®ï¼ˆè®¿é—®é¢‘æ¬¡é«˜ï¼‰çš„æ•°æ®æ”¾å…¥Redisç¼“å­˜ï¼Œç”¨Redisçš„é«˜æ€§èƒ½å»é¿å…MySQLæ•°æ®çš„ã€‚è¿™ç§æ–¹æ¡ˆä¸€èˆ¬çš„åšæ³•éƒ½ä¼šæœ‰å…œåº•æ–¹æ¡ˆï¼Œå°±æ˜¯æ•°æ®åœ¨Redisä¸­æ²¡æœ‰è¯ï¼Œè¿˜æ˜¯ä¼šå»è®¿é—®MySQLç„¶åå†æŠŠæ•°æ®åŒæ­¥åˆ°Redisç¼“å­˜ã€‚</p><h2 id="Redisåº”ç”¨åœºæ™¯-æ’è¡Œæ¦œã€è®¡æ•°å™¨">Redisåº”ç”¨åœºæ™¯-æ’è¡Œæ¦œã€è®¡æ•°å™¨</h2><p>1ã€Redisæä¾›çš„incræ–¹æ³•åšè®¡æ•°å™¨ï¼ˆç‚¹èµã€å…³æ³¨æ•°ä¹‹ç±»ï¼‰</p><pre class="language-none"><code class="language-none">import redis.clients.jedis.Jedis;public class RedisCounter &#123;    private Jedis jedis;    public RedisCounter() &#123;        &#x2F;&#x2F; è¿æ¥åˆ° Redis        this.jedis &#x3D; new Jedis(&quot;localhost&quot;, 6379);    &#125;    &#x2F;&#x2F; ç”¨æˆ·ç‚¹èµ    public void likePost(String postId) &#123;        jedis.incr(&quot;post:&quot; + postId + &quot;:likes&quot;);    &#125;    &#x2F;&#x2F; ç”¨æˆ·å…³æ³¨    public void followUser(String userId) &#123;        jedis.incr(&quot;user:&quot; + userId + &quot;:followers&quot;);    &#125;    public static void main(String[] args) &#123;        RedisCounter counter &#x3D; new RedisCounter();          &#x2F;&#x2F; ç¤ºä¾‹ï¼šç”¨æˆ·ç‚¹èµ        counter.likePost(&quot;post1&quot;);        counter.likePost(&quot;post1&quot;);          &#x2F;&#x2F; ç¤ºä¾‹ï¼šç”¨æˆ·å…³æ³¨        counter.followUser(&quot;user1&quot;);          &#x2F;&#x2F; è¾“å‡ºç‚¹èµæ•°å’Œå…³æ³¨è€…æ•°        System.out.println(&quot;Post1 Likes: &quot; + counter.jedis.get(&quot;post:post1:likes&quot;));        System.out.println(&quot;User1 Followers: &quot; + counter.jedis.get(&quot;user:user1:followers&quot;));          &#x2F;&#x2F; å…³é—­è¿æ¥        counter.jedis.close();    &#125;&#125;</code></pre><p>2ã€Redisæä¾›çš„æœ‰åºé›†åˆ(sorted set)å¯ä»¥ç”¨æ¥åˆ›å»ºæ’è¡Œæ¦œ</p><pre class="language-none"><code class="language-none">import redis.clients.jedis.Jedis;import java.util.Set;public class RedisLeaderboard &#123;    private Jedis jedis;    public RedisLeaderboard() &#123;        &#x2F;&#x2F; è¿æ¥åˆ° Redis        this.jedis &#x3D; new Jedis(&quot;localhost&quot;, 6379);    &#125;    &#x2F;&#x2F; ç”¨æˆ·ç‚¹èµæ—¶æ›´æ–°æ’è¡Œæ¦œ    public void likePost(String postId, String userId) &#123;        &#x2F;&#x2F; å‡è®¾æ¯ä¸ªç‚¹èµå¢åŠ ç”¨æˆ·çš„åˆ†æ•°        jedis.zincrby(&quot;post_rank&quot;, 1, userId);    &#125;    &#x2F;&#x2F; è·å–å‰ N åç”¨æˆ·    public Set&lt;String&gt; getTopUsers(int n) &#123;        return jedis.zrevrange(&quot;post_rank&quot;, 0, n - 1);    &#125;    public static void main(String[] args) &#123;        RedisLeaderboard leaderboard &#x3D; new RedisLeaderboard();          &#x2F;&#x2F; ç¤ºä¾‹ï¼šç”¨æˆ·ç‚¹èµ        leaderboard.likePost(&quot;post1&quot;, &quot;user1&quot;);        leaderboard.likePost(&quot;post1&quot;, &quot;user2&quot;);        leaderboard.likePost(&quot;post1&quot;, &quot;user1&quot;);  &#x2F;&#x2F; user1 å†æ¬¡ç‚¹èµ        &#x2F;&#x2F; è·å–å‰ 2 åç”¨æˆ·        Set&lt;String&gt; topUsers &#x3D; leaderboard.getTopUsers(2);        System.out.println(&quot;Top Users: &quot; + topUsers);          &#x2F;&#x2F; å…³é—­è¿æ¥        leaderboard.jedis.close();    &#125;&#125;</code></pre><h2 id="Redisåº”ç”¨åœºæ™¯-å…±äº«session">Redisåº”ç”¨åœºæ™¯-å…±äº«session</h2><p>å¤šå°åº”ç”¨æœåŠ¡å™¨å¯ä»¥å°†ç”¨æˆ·çš„sessionå­˜å‚¨åœ¨Redisä¸­ï¼ˆç¼“å­˜+è¿‡æœŸæœºåˆ¶ï¼‰</p><h2 id="Redisåº”ç”¨åœºæ™¯-åˆ†å¸ƒå¼é”">Redisåº”ç”¨åœºæ™¯-åˆ†å¸ƒå¼é”</h2><p>Redissonçš„APIä»‹ç»ï¼š</p><p><a href="https://github.com/redisson/redisson/wiki/8.-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%92%8C%E5%90%8C%E6%AD%A5%E5%99%A8#84-%E7%BA%A2%E9%94%81redlock">https://github.com/redisson/redisson/wiki/8.-åˆ†å¸ƒå¼é”å’ŒåŒæ­¥å™¨#84-çº¢é”redlock</a></p><h3 id="åˆ†å¸ƒå¼é”åŠ å…¥è¿‡æœŸæ—¶é—´-åŠ å…¥çœ‹é—¨ç‹—">åˆ†å¸ƒå¼é”åŠ å…¥è¿‡æœŸæ—¶é—´+åŠ å…¥çœ‹é—¨ç‹—</h3><p>åŠ é”æ—¶ï¼Œå…ˆè®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œç„¶åæˆ‘ä»¬å¼€å¯ä¸€ä¸ªã€Œå®ˆæŠ¤çº¿ç¨‹ã€ï¼Œå®šæ—¶å»æ£€æµ‹è¿™ä¸ªé”çš„å¤±æ•ˆæ—¶é—´ï¼Œå¦‚æœé”å¿«è¦è¿‡æœŸäº†ï¼Œæ“ä½œå…±äº«èµ„æºè¿˜æœªå®Œæˆï¼Œé‚£ä¹ˆå°±è‡ªåŠ¨å¯¹é”è¿›è¡Œã€Œç»­æœŸã€ï¼Œé‡æ–°è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚</p><p>è¿™ä¸ªå®ˆæŠ¤çº¿ç¨‹æˆ‘ä»¬ä¸€èˆ¬ä¹ŸæŠŠå®ƒå«åšã€Œçœ‹é—¨ç‹—ã€çº¿ç¨‹ã€‚</p><img src="https://img.soniachen.com/blog/posts/2025/06/a6cb1c776db74c2bbd5bdcdc4f9b576a.png" alt="image.png" style="zoom:60%;" /><h2 id="Redisåº”ç”¨åœºæ™¯-å¸ƒéš†è¿‡æ»¤å™¨">Redisåº”ç”¨åœºæ™¯-å¸ƒéš†è¿‡æ»¤å™¨</h2><p><strong>1970 å¹´å¸ƒéš†æå‡ºäº†ä¸€ç§å¸ƒéš†è¿‡æ»¤å™¨çš„ç®—æ³•ï¼Œç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­ã€‚è¿™ç§ç®—æ³•ç”±ä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„å’Œä¸€ä¸ª Hash ç®—æ³•ç»„æˆã€‚</strong></p><p>æœ¬è´¨ä¸Šå¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œæ¯”è¾ƒå·§å¦™çš„æ¦‚ç‡å‹æ•°æ®ç»“æ„ï¼ˆprobabilistic data structureï¼‰ï¼Œç‰¹ç‚¹æ˜¯é«˜æ•ˆåœ°æ’å…¥å’ŒæŸ¥è¯¢ï¼Œå¯ä»¥ç”¨æ¥å‘Šè¯‰ä½  â€œæŸæ ·ä¸œè¥¿ä¸€å®šä¸å­˜åœ¨æˆ–è€…å¯èƒ½å­˜åœ¨â€ã€‚</p><p>ç›¸æ¯”äºä¼ ç»Ÿçš„ Listã€Setã€Map ç­‰æ•°æ®ç»“æ„ï¼Œå®ƒæ›´é«˜æ•ˆã€å ç”¨ç©ºé—´æ›´å°‘ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯å…¶è¿”å›çš„ç»“æœæ˜¯æ¦‚ç‡æ€§çš„ï¼Œè€Œä¸æ˜¯ç¡®åˆ‡çš„ã€‚</p><p>å®é™…ä¸Šï¼Œå¸ƒéš†è¿‡æ»¤å™¨å¹¿æ³›åº”ç”¨äºç½‘é¡µé»‘åå•ç³»ç»Ÿã€åƒåœ¾é‚®ä»¶è¿‡æ»¤ç³»ç»Ÿã€çˆ¬è™«ç½‘å€åˆ¤é‡ç³»ç»Ÿç­‰ï¼ŒGoogle è‘—åçš„åˆ†å¸ƒå¼æ•°æ®åº“ Bigtable ä½¿ç”¨äº†å¸ƒéš†è¿‡æ»¤å™¨æ¥æŸ¥æ‰¾ä¸å­˜åœ¨çš„è¡Œæˆ–åˆ—ï¼Œä»¥å‡å°‘ç£ç›˜æŸ¥æ‰¾çš„IOæ¬¡æ•°ï¼ŒGoogle Chromeæµè§ˆå™¨ä½¿ç”¨äº†å¸ƒéš†è¿‡æ»¤å™¨åŠ é€Ÿå®‰å…¨æµè§ˆæœåŠ¡ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/5983/1663252342001/801f60ff2d28436faaaab3007dd7d893.png" alt=""></p><h5 id="å¸ƒéš†è¿‡æ»¤å™¨çš„è¯¯åˆ¤é—®é¢˜">å¸ƒéš†è¿‡æ»¤å™¨çš„è¯¯åˆ¤é—®é¢˜</h5><p>Ã˜é€šè¿‡hashè®¡ç®—åœ¨æ•°ç»„ä¸Šä¸ä¸€å®šåœ¨é›†åˆ</p><p>Ã˜æœ¬è´¨æ˜¯hashå†²çª</p><p>Ã˜é€šè¿‡hashè®¡ç®—ä¸åœ¨æ•°ç»„çš„ä¸€å®šä¸åœ¨é›†åˆï¼ˆè¯¯åˆ¤ï¼‰</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/5983/1663252342001/d31bbeaf5a8742d2b15ce65bbc5a4537.png" alt=""></p><p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong></p><p>å¢å¤§æ•°ç»„(é¢„ä¼°é€‚åˆå€¼)</p><p>å¢åŠ hashå‡½æ•°</p><h2 id="Redisåº”ç”¨åœºæ™¯-Bitmapæµ·é‡ç”¨æˆ·å­˜å‚¨">Redisåº”ç”¨åœºæ™¯-Bitmapæµ·é‡ç”¨æˆ·å­˜å‚¨</h2><h3 id="1ã€ç›®å‰æœ‰10äº¿æ•°é‡çš„è‡ªç„¶æ•°ï¼Œä¹±åºæ’åˆ—ï¼Œéœ€è¦å¯¹å…¶æ’åºã€‚é™åˆ¶æ¡ä»¶-åœ¨32ä½æœºå™¨ä¸Šé¢å®Œæˆï¼Œå†…å­˜é™åˆ¶ä¸º-2Gã€‚å¦‚ä½•å®Œæˆï¼Ÿ">1ã€ç›®å‰æœ‰10äº¿æ•°é‡çš„è‡ªç„¶æ•°ï¼Œä¹±åºæ’åˆ—ï¼Œéœ€è¦å¯¹å…¶æ’åºã€‚é™åˆ¶æ¡ä»¶-åœ¨32ä½æœºå™¨ä¸Šé¢å®Œæˆï¼Œå†…å­˜é™åˆ¶ä¸º 2Gã€‚å¦‚ä½•å®Œæˆï¼Ÿ</h3><ul><li>ä½¿ç”¨ä¸€ä¸ªå¤§å°ä¸º 1,000,000,000 çš„ Bitmapï¼ˆæ¯ä¸ªè‡ªç„¶æ•°å¯¹åº”ä¸€ä¸ªä½ï¼‰ã€‚</li><li>å°†æ¯ä¸ªè‡ªç„¶æ•°çš„ä½è®¾ç½®ä¸º 1ï¼Œè¡¨ç¤ºè¯¥æ•°å­˜åœ¨ã€‚</li><li>ç„¶åï¼Œå¯ä»¥éå† Bitmapï¼ŒæŒ‰é¡ºåºè¾“å‡ºæ‰€æœ‰å­˜åœ¨çš„è‡ªç„¶æ•°ã€‚</li></ul><p>ç”±äºå†…å­˜é™åˆ¶ä¸º 2Gï¼Œä¸€ä¸ªå¤§å°ä¸º 1,000,000,000 çš„ Bitmap åœ¨ Redis ä¸­å¤§çº¦å ç”¨ 119.2 MB çš„å†…å­˜</p><h3 id="2ã€å¦‚ä½•å¿«é€Ÿåœ¨äº¿çº§é»‘åå•ä¸­å¿«é€Ÿå®šä½URLåœ°å€æ˜¯å¦åœ¨é»‘åå•ä¸­ï¼Ÿ-æ¯æ¡URLå¹³å‡64å­—èŠ‚">2ã€å¦‚ä½•å¿«é€Ÿåœ¨äº¿çº§é»‘åå•ä¸­å¿«é€Ÿå®šä½URLåœ°å€æ˜¯å¦åœ¨é»‘åå•ä¸­ï¼Ÿ(æ¯æ¡URLå¹³å‡64å­—èŠ‚)</h3><p>æŠŠURLåšHashå€¼è®¡ç®—ï¼Œç„¶åå°†å…¶æ˜ å°„åˆ° Bitmapã€‚</p><ul><li>è®¡ç®— URL çš„å“ˆå¸Œå€¼ï¼Œå¹¶å°†å¯¹åº”çš„ä½è®¾ç½®ä¸º 1ã€‚</li></ul><ul><li>æ£€æŸ¥ URL æ˜¯å¦åœ¨é»‘åå•ä¸­ï¼Œåªéœ€æŸ¥çœ‹å¯¹åº”çš„ä½æ˜¯å¦ä¸º 1ã€‚</li></ul><h3 id="3ã€éœ€è¦è¿›è¡Œç”¨æˆ·ç™»é™†è¡Œä¸ºåˆ†æï¼Œæ¥ç¡®å®šç”¨æˆ·çš„æ´»è·ƒæƒ…å†µï¼Ÿ">3ã€éœ€è¦è¿›è¡Œç”¨æˆ·ç™»é™†è¡Œä¸ºåˆ†æï¼Œæ¥ç¡®å®šç”¨æˆ·çš„æ´»è·ƒæƒ…å†µï¼Ÿ</h3><p>å¯ä»¥ä½¿ç”¨ Bitmap æ¥è®°å½•ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œç”¨æˆ· ID ä½œä¸ºä½çš„ç´¢å¼•ã€‚</p><ul><li>æ¯æ¬¡ç”¨æˆ·ç™»å½•æ—¶ï¼Œå°†å¯¹åº”çš„ä½è®¾ç½®ä¸º 1ã€‚</li><li>å¯ä»¥é€šè¿‡ä½è®¡æ•°æ¥è·å–æ´»è·ƒç”¨æˆ·çš„æ•°é‡ã€‚</li></ul><h2 id="Redisåº”ç”¨åœºæ™¯-GEOåœ°å›¾">Redisåº”ç”¨åœºæ™¯-GEOåœ°å›¾</h2><h3 id="GEO">GEO</h3><p>Redis 3.2ç‰ˆæœ¬æä¾›äº†GEO(åœ°ç†ä¿¡æ¯å®šä½)åŠŸèƒ½ï¼Œæ”¯æŒå­˜å‚¨åœ°ç†ä½ç½®ä¿¡æ¯ç”¨æ¥å®ç°è¯¸å¦‚é™„è¿‘ä½ç½®ã€æ‘‡ä¸€æ‘‡è¿™ç±»ä¾èµ–äºåœ°ç†ä½ç½®ä¿¡æ¯çš„åŠŸèƒ½ã€‚</p><p>åœ°å›¾å…ƒç´ çš„ä½ç½®æ•°æ®ä½¿ç”¨äºŒç»´çš„ç»çº¬åº¦è¡¨ç¤ºï¼Œç»åº¦èŒƒå›´(-180, 180]ï¼Œçº¬åº¦èŒƒå›´(-90,90]ï¼Œçº¬åº¦æ­£è´Ÿä»¥èµ¤é“ä¸ºç•Œï¼ŒåŒ—æ­£å—è´Ÿï¼Œç»åº¦æ­£è´Ÿä»¥æœ¬åˆå­åˆçº¿(è‹±å›½æ ¼æ—å°¼æ²»å¤©æ–‡å°) ä¸ºç•Œï¼Œä¸œæ­£è¥¿è´Ÿã€‚</p><p>ä¸šç•Œæ¯”è¾ƒé€šç”¨çš„åœ°ç†ä½ç½®è·ç¦»æ’åºç®—æ³•æ˜¯GeoHash ç®—æ³•ï¼ŒRedis ä¹Ÿä½¿ç”¨GeoHashç®—æ³•ã€‚GeoHashç®—æ³•å°†äºŒç»´çš„ç»çº¬åº¦æ•°æ®æ˜ å°„åˆ°ä¸€ç»´çš„æ•´æ•°ï¼Œè¿™æ ·æ‰€æœ‰çš„å…ƒç´ éƒ½å°†åœ¨æŒ‚è½½åˆ°ä¸€æ¡çº¿ä¸Šï¼Œè·ç¦»é è¿‘çš„äºŒç»´åæ ‡æ˜ å°„åˆ°ä¸€ç»´åçš„ç‚¹ä¹‹é—´è·ç¦»ä¹Ÿä¼šå¾ˆæ¥è¿‘ã€‚å½“æˆ‘ä»¬æƒ³è¦è®¡ç®—ã€Œé™„è¿‘çš„äººæ—¶ã€ï¼Œé¦–å…ˆå°†ç›®æ ‡ä½ç½®æ˜ å°„åˆ°è¿™æ¡çº¿ä¸Šï¼Œç„¶ååœ¨è¿™ä¸ªä¸€ç»´çš„çº¿ä¸Šè·å–é™„è¿‘çš„ç‚¹å°±è¡Œäº†ã€‚</p><p>åœ¨ Redis é‡Œé¢ï¼Œç»çº¬åº¦ä½¿ç”¨ 52 ä½çš„æ•´æ•°è¿›è¡Œç¼–ç ï¼Œæ”¾è¿›äº† zset é‡Œé¢ï¼Œzset çš„ value æ˜¯å…ƒç´ çš„ keyï¼Œscore æ˜¯ GeoHash çš„ 52 ä½æ•´æ•°å€¼ã€‚</p><h4 id="æ“ä½œå‘½ä»¤">æ“ä½œå‘½ä»¤</h4><h5 id="å¢åŠ åœ°ç†ä½ç½®ä¿¡æ¯">å¢åŠ åœ°ç†ä½ç½®ä¿¡æ¯</h5><p>geoadd key longitude latitude member [longitude latitude member â€¦J</p><p>longitudeã€latitudeã€memberåˆ†åˆ«æ˜¯è¯¥åœ°ç†ä½ç½®çš„ç»åº¦ã€çº¬åº¦ã€æˆå‘˜ï¼Œä¾‹å¦‚ä¸‹é¢æœ‰5ä¸ªåŸå¸‚çš„ç»çº¬åº¦ã€‚</p><p>åŸå¸‚            ç»åº¦             çº¬åº¦             æˆå‘˜</p><p>åŒ—äº¬            116.28          39.55            beijing</p><p>å¤©æ´¥            117.12          39.08            tianjin</p><p>çŸ³å®¶åº„        114.29          38.02            shijiazhuang</p><p>å”å±±            118.01          39.38            tangshan</p><p>ä¿å®š            115.29          38.51            baoding</p><p>cities:locationsæ˜¯ä¸Šé¢5ä¸ªåŸå¸‚åœ°ç†ä½ç½®ä¿¡æ¯çš„é›†åˆï¼Œç°å‘å…¶æ·»åŠ åŒ—äº¬çš„åœ°ç†ä½ç½®ä¿¡æ¯:</p><p>geoadd cities :locations 116.28 39.55 beijing</p><p>è¿”å›ç»“æœä»£è¡¨æ·»åŠ æˆåŠŸçš„ä¸ªæ•°ï¼Œå¦‚æœcities:locationsæ²¡æœ‰åŒ…å«beijing,é‚£ä¹ˆè¿”å›ç»“æœä¸º1ï¼Œå¦‚æœå·²ç»å­˜åœ¨åˆ™è¿”å›0ã€‚</p><p>å¦‚æœéœ€è¦æ›´æ–°åœ°ç†ä½ç½®ä¿¡æ¯ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨geoaddå‘½ä»¤ï¼Œè™½ç„¶è¿”å›ç»“æœä¸º0ã€‚geoaddå‘½ä»¤å¯ä»¥åŒæ—¶æ·»åŠ å¤šä¸ªåœ°ç†ä½ç½®ä¿¡æ¯:</p><p>geoadd cities:locations 117.12 39.08 tianjin 114.29 38.02shijiazhuang 118.01 39.38 tangshan 115.29 38.51 baoding</p><h5 id="è·å–åœ°ç†ä½ç½®ä¿¡æ¯">è·å–åœ°ç†ä½ç½®ä¿¡æ¯</h5><p>geopos key member [member â€¦]ä¸‹é¢æ“ä½œä¼šè·å–å¤©æ´¥çš„ç»ç»´åº¦:</p><p>geopos cities:locations tianjin1)1)â€œ117.12000042200088501â€</p><h5 id="è·å–ä¸¤ä¸ªåœ°ç†ä½ç½®çš„è·ç¦»ã€‚">è·å–ä¸¤ä¸ªåœ°ç†ä½ç½®çš„è·ç¦»ã€‚</h5><p>geodist key member1 member2 [unit]</p><p><strong>å…¶ä¸­unitä»£è¡¨è¿”å›ç»“æœçš„å•ä½ï¼ŒåŒ…å«ä»¥ä¸‹å››ç§:</strong></p><p>m (meters)ä»£è¡¨ç±³ã€‚</p><p>km (kilometers)ä»£è¡¨å…¬é‡Œã€‚</p><p>mi (miles)ä»£è¡¨è‹±é‡Œã€‚</p><p>ft(feet)ä»£è¡¨å°ºã€‚</p><p>ä¸‹é¢æ“ä½œç”¨äºè®¡ç®—å¤©æ´¥åˆ°åŒ—äº¬çš„è·ç¦»ï¼Œå¹¶ä»¥å…¬é‡Œä¸ºå•ä½:</p><p>geodist cities : locations tianjin beijing km</p><h5 id="è·å–æŒ‡å®šä½ç½®èŒƒå›´å†…çš„åœ°ç†ä¿¡æ¯ä½ç½®é›†åˆ">è·å–æŒ‡å®šä½ç½®èŒƒå›´å†…çš„åœ°ç†ä¿¡æ¯ä½ç½®é›†åˆ</h5><pre class="language-none"><code class="language-none">georadius key longitude latitude radius m|km|ft|mi [withcoord][withdist][withhash][COUNT count] [ascldesc] [store key] [storedist key]georadiusbymember key member radius m|km|ft|mi  [withcoord][withdist][withhash] [COUNT count][ascldesc] [store key] [storedist key]</code></pre><p>georadiuså’Œgeoradiusbymemberä¸¤ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä»¥ä¸€ä¸ªåœ°ç†ä½ç½®ä¸ºä¸­å¿ƒç®—å‡ºæŒ‡å®šåŠå¾„å†…çš„å…¶ä»–åœ°ç†ä¿¡æ¯ä½ç½®ï¼Œä¸åŒçš„æ˜¯georadiuså‘½ä»¤çš„ä¸­å¿ƒä½ç½®ç»™å‡ºäº†å…·ä½“çš„ç»çº¬åº¦ï¼Œgeoradiusbymemberåªéœ€ç»™å‡ºæˆå‘˜å³å¯ã€‚å…¶ä¸­radius  m | km |ft |miæ˜¯å¿…éœ€å‚æ•°ï¼ŒæŒ‡å®šäº†åŠå¾„(å¸¦å•ä½)ã€‚</p><p>è¿™ä¸¤ä¸ªå‘½ä»¤æœ‰å¾ˆå¤šå¯é€‰å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><p>withcoord:è¿”å›ç»“æœä¸­åŒ…å«ç»çº¬åº¦ã€‚</p><p>withdist:è¿”å›ç»“æœä¸­åŒ…å«ç¦»ä¸­å¿ƒèŠ‚ç‚¹ä½ç½®çš„è·ç¦»ã€‚</p><p>withhash:è¿”å›ç»“æœä¸­åŒ…å«geohashï¼Œæœ‰å…³geohashåé¢ä»‹ç»ã€‚</p><p>COUNT count:æŒ‡å®šè¿”å›ç»“æœçš„æ•°é‡ã€‚</p><p>asc l desc:è¿”å›ç»“æœæŒ‰ç…§ç¦»ä¸­å¿ƒèŠ‚ç‚¹çš„è·ç¦»åšå‡åºæˆ–è€…é™åºã€‚</p><p>store key:å°†è¿”å›ç»“æœçš„åœ°ç†ä½ç½®ä¿¡æ¯ä¿å­˜åˆ°æŒ‡å®šé”®ã€‚</p><p>storedist key:å°†è¿”å›ç»“æœç¦»ä¸­å¿ƒèŠ‚ç‚¹çš„è·ç¦»ä¿å­˜åˆ°æŒ‡å®šé”®ã€‚</p><p>ä¸‹é¢æ“ä½œè®¡ç®—äº”åº§åŸå¸‚ä¸­,è·ç¦»åŒ—äº¬150å…¬é‡Œä»¥å†…çš„åŸå¸‚:</p><p>georadiusbymember cities:locations beijing 150 km</p><h5 id="è·å–geohash">è·å–geohash</h5><pre class="language-none"><code class="language-none">geohash key member [member ...]</code></pre><p>Redisä½¿ç”¨geohashå°†äºŒç»´ç»çº¬åº¦è½¬æ¢ä¸ºä¸€ç»´å­—ç¬¦ä¸²ï¼Œä¸‹é¢æ“ä½œä¼šè¿”å›beijingçš„geohashå€¼ã€‚</p><p>geohash cities: locations beijing</p><p>å­—ç¬¦ä¸²è¶Šé•¿,è¡¨ç¤ºçš„ä½ç½®æ›´ç²¾ç¡®ï¼Œgeohashé•¿åº¦ä¸º9æ—¶,ç²¾åº¦åœ¨2ç±³å·¦å³ï¼Œgeohashé•¿åº¦ä¸º8æ—¶,ç²¾åº¦åœ¨20ç±³å·¦å³ã€‚</p><p>ä¸¤ä¸ªå­—ç¬¦ä¸²è¶Šç›¸ä¼¼,å®ƒä»¬ä¹‹é—´çš„è·ç¦»è¶Šè¿‘,Redis åˆ©ç”¨å­—ç¬¦ä¸²å‰ç¼€åŒ¹é…ç®—æ³•å®ç°ç›¸å…³çš„å‘½ä»¤ã€‚</p><p>geohashç¼–ç å’Œç»çº¬åº¦æ˜¯å¯ä»¥ç›¸äº’è½¬æ¢çš„ã€‚</p><h5 id="åˆ é™¤åœ°ç†ä½ç½®ä¿¡æ¯">åˆ é™¤åœ°ç†ä½ç½®ä¿¡æ¯</h5><p>zrem key member</p><p>GEOæ²¡æœ‰æä¾›åˆ é™¤æˆå‘˜çš„å‘½ä»¤ï¼Œä½†æ˜¯å› ä¸ºGEOçš„åº•å±‚å®ç°æ˜¯zsetï¼Œæ‰€ä»¥å¯ä»¥å€Ÿç”¨zremå‘½ä»¤å®ç°å¯¹åœ°ç†ä½ç½®ä¿¡æ¯çš„åˆ é™¤ã€‚</p><h2 id="MQåº”ç”¨åœºæ™¯-å¼‚æ­¥è§£è€¦">MQåº”ç”¨åœºæ™¯-å¼‚æ­¥è§£è€¦</h2><p><img src="https://img.soniachen.com/blog/posts/2025/06/O1CN01klyp4H1mjTCx7pkYe_!!6000000004990-0-tps-1134-910.jpg" alt=""></p><p>1ã€çµæ´»é€‚åº”ä¸šåŠ¡çš„å¿«é€Ÿå¢é•¿ï¼šé€šè¿‡MQçš„å¼‚æ­¥åŒ–è®¾è®¡ï¼Œå¯ä»¥çµæ´»é«˜æ•ˆçš„é€‚åº”å› ä¸šåŠ¡å¿«é€Ÿå‘å±•è€Œå¸¦æ¥çš„å˜åŒ–ï¼Œå¦‚æ–°å¢ä¸šåŠ¡ç³»ç»Ÿã€‚</p><p>2ã€é«˜å¯ç”¨æ¾è€¦åˆæ¶æ„è®¾è®¡ï¼šé€šè¿‡ä¸Šã€ä¸‹æ¸¸ä¸šåŠ¡ç³»ç»Ÿçš„æ¾è€¦åˆè®¾è®¡ï¼Œå³ä¾¿ä¸‹æ¸¸å­ç³»ç»Ÿï¼ˆå¦‚ç‰©æµã€ç§¯åˆ†ç­‰ï¼‰å‡ºç°ä¸å¯ç”¨ç”šè‡³å®•æœºï¼Œéƒ½ä¸ä¼šå½±å“åˆ°æ ¸å¿ƒäº¤æ˜“ç³»ç»Ÿçš„æ­£å¸¸è¿è½¬</p><h2 id="MQåº”ç”¨åœºæ™¯-å‰Šå³°å¡«è°·">MQåº”ç”¨åœºæ™¯-å‰Šå³°å¡«è°·</h2><p><img src="https://img.soniachen.com/blog/posts/2025/06/O1CN01D381dH1juyJ4kXzXh_!!6000000004609-0-tps-1134-910.jpg" alt=""></p><p>ç§’æ€ã€æŠ¢çº¢åŒ…ã€ä¼ä¸šå¼€é—¨çº¢ç­‰å¤§å‹æ´»åŠ¨æ—¶çš†ä¼šå¸¦æ¥è¾ƒé«˜çš„æµé‡è„‰å†²ï¼Œæˆ–å› æ²¡åšç›¸åº”çš„ä¿æŠ¤è€Œå¯¼è‡´ç³»ç»Ÿè¶…è´Ÿè·ç”šè‡³å´©æºƒï¼Œæˆ–å› é™åˆ¶å¤ªè¿‡å¯¼è‡´è¯·æ±‚å¤§é‡å¤±è´¥è€Œå½±å“ç”¨æˆ·ä½“éªŒã€‚ç”¨MQçš„å‰Šå³°å¡«è°·æ˜¯è§£å†³è¯¥é—®é¢˜çš„æœ‰æ•ˆæ–¹å¼ã€‚</p><p>1ã€è¶…é«˜æµé‡è„‰å†²å¤„ç†èƒ½åŠ›ï¼šMQ è¶…é«˜æ€§èƒ½çš„æ¶ˆæ¯å¤„ç†èƒ½åŠ›å¯ä»¥æ‰¿æ¥æµé‡è„‰å†²è€Œä¸è¢«å‡»å®ï¼Œåœ¨ç¡®ä¿ç³»ç»Ÿå¯ç”¨æ€§åŒæ—¶ï¼Œå› å¿«é€Ÿæœ‰æ•ˆçš„è¯·æ±‚å“åº”è€Œæå‡ç”¨æˆ·çš„ä½“éªŒ</p><p>2ã€æµ·é‡æ¶ˆæ¯å †ç§¯èƒ½åŠ›ï¼šç¡®ä¿ä¸‹æ¸¸ä¸šåŠ¡åœ¨å®‰å…¨æ°´ä½å†…å¹³æ»‘ç¨³å®šçš„è¿è¡Œï¼Œé¿å…è¶…é«˜æµé‡çš„å†²å‡»</p><p>3ã€åˆç†çš„æˆæœ¬æ§åˆ¶ï¼šå‰Šå³°å¡«è°·å¯æ§åˆ¶ä¸‹æ¸¸ä¸šåŠ¡ç³»ç»Ÿçš„é›†ç¾¤è§„æ¨¡ï¼Œä»è€Œé™ä½æŠ•å…¥æˆæœ¬</p><h2 id="RocketMQåº”ç”¨åœºæ™¯-åˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯">RocketMQåº”ç”¨åœºæ™¯-åˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯</h2><p><img src="https://img.soniachen.com/blog/posts/2025/06/TB1i2jrnRjTBKNjSZFwXXcG4XXa-1530-1140.png" alt=""></p><p>**ä¼ ç»Ÿäº‹åŠ¡ï¼š**å¤šä¸ªç³»ç»Ÿæˆ–è€…åº”ç”¨ç»„ä»¶ä¹‹é—´çš„ä¸šåŠ¡å¤„ç†ä¼šè€¦åˆåˆ°ä¸€ä¸ªå¤§äº‹åŠ¡ä¸­ï¼Œå“åº”æ—¶é—´é•¿ï¼Œä¸šåŠ¡é“¾è·¯é•¿ä»è€Œå½±å“ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½å’Œå¯ç”¨æ€§ï¼Œç”šè‡³å¼•èµ·ç³»ç»Ÿå´©æºƒ</p><p>**RocketMQåˆ†å¸ƒå¼äº‹åŠ¡ï¼š**å°†æ ¸å¿ƒé“¾è·¯ä¸šåŠ¡ä¸å¯å¼‚æ­¥åŒ–å¤„ç†çš„åˆ†æ”¯é“¾è·¯è¿›è¡Œæ‹†åˆ†ï¼Œå°†å¤§äº‹åŠ¡æ‹†åˆ†æˆå°äº‹åŠ¡ï¼Œå‡å°‘ç³»ç»Ÿé—´çš„äº¤äº’ï¼Œæ—¢é«˜æ•ˆåˆå¯é ï¼›RocketMQ çš„å¯é ä¼ è¾“ä¸å¤šå‰¯æœ¬æŠ€æœ¯èƒ½ç¡®ä¿æ¶ˆæ¯ä¸ä¸¢å¤±ã€‚</p><h2 id="RocketMQ-Kafka-æµå¼æ•°æ®å¤„ç†">RocketMQ/Kafka-æµå¼æ•°æ®å¤„ç†</h2><p><img src="https://img.soniachen.com/blog/posts/2025/06/TB1rW7JXogQMeJjy0FfXXbddXXa-1530-1140.png" alt=""></p><p>æ•°æ®åœ¨&quot;æµåŠ¨&quot;ä¸­äº§ç”Ÿä»·å€¼ï¼Œä¼ ç»Ÿæ•°æ®åˆ†æå¤§å¤šæ˜¯åŸºäºæ‰¹é‡è®¡ç®—æ¨¡å‹ï¼Œè€Œæ— æ³•åšåˆ°å®æ—¶çš„æ•°æ®åˆ†æï¼Œåˆ©ç”¨ RocketMQ /Kafkaä¸æµå¼è®¡ç®—å¼•æ“ç›¸ç»“åˆï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°å°†ä¸šåŠ¡æ•°æ®è¿›è¡Œå®æ—¶åˆ†æã€‚</p><h2 id="RocketMQ-Kafka-åˆ†å¸ƒå¼æ¨¡ç¼“å­˜åŒæ­¥">RocketMQ/Kafka-åˆ†å¸ƒå¼æ¨¡ç¼“å­˜åŒæ­¥</h2><p><img src="https://img.soniachen.com/blog/posts/2025/06/TB1ki7KXgMPMeJjy1XdXXasrXXa-1530-1140.png" alt=""></p><p>å¤§å‹é¡¹ç›®åšäº†åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆåˆ†ä¼šåœºï¼‰ï¼Œå„ä¸ªåˆ†ä¼šåœºç³ç…æ»¡ç›®çš„å•†å“éœ€è¦å®æ—¶æ„ŸçŸ¥ä»·æ ¼å˜åŒ–ï¼Œå¤§é‡å¹¶å‘è®¿é—®æ•°æ®åº“å¯¼è‡´ä¼šåœºé¡µé¢å“åº”æ—¶é—´é•¿ï¼Œé›†ä¸­å¼ç¼“å­˜å› ä¸ºå¸¦å®½ç“¶é¢ˆé™åˆ¶å•†å“å˜æ›´çš„è®¿é—®æµé‡ï¼Œé€šè¿‡ RocketMQ æ„å»ºåˆ†å¸ƒå¼ç¼“å­˜ï¼Œå®æ—¶é€šçŸ¥å•†å“æ•°æ®çš„å˜åŒ–ã€‚</p><p>å¤§ä¿ƒä¼—å¤šåˆ†ä¼šåœºï¼Œå¤šç¼“å­˜çš„æ¶æ„è®¾è®¡ï¼Œæ»¡è¶³å¯¹å•†å“å˜æ›´çš„å¤§é‡è®¿é—®éœ€æ±‚ã€‚</p><h1>2ã€ä¸ºä»€ä¹ˆé€‰ç”¨Redisç¼“å­˜ï¼ŒMQå¦‚ä½•è¿›è¡ŒæŠ€æœ¯é€‰å‹ï¼</h1><p>Redisæœ‰ä¸°å¯Œçš„åŠŸèƒ½ï¼Œä¸å•çº¯æ˜¯ä¸€ä¸ªç¼“å­˜ã€‚å¦‚æœæ˜¯å¯¹æ¯”çš„è¯ï¼ŒMongoDBçš„è¯ç¼ºä¹Redisçš„åŠŸèƒ½ï¼ŒåŒæ—¶ç¨³å®šæ€§å’Œç‰ˆæœ¬çš„å»¶ç»­æ€§å¯¹æ¯”Redisä¹Ÿè¦å·®ä¸å°‘ã€‚</p><p>MQçš„è¯ï¼š<br>RabbitMQååé‡æœ€å°‘ã€‚RabbitMQçš„è¯­è¨€å…¼å®¹æ€§æœ€å¥½ï¼ˆå¤šè¯­è¨€APIåšçš„å¾ˆå¥½ï¼ŒCã€Pythonç­‰ç­‰è¯­è¨€éƒ½æ”¯æŒï¼‰ï¼Œ</p><p>RocketMQçš„è¯ï¼Œé€‚åˆç”µå•†ï¼ˆæœ‰ä¸°å¯Œçš„ç”µå•†çš„åœºæ™¯ï¼‰ã€æ¯”å¦‚å»¶æ—¶æ¶ˆæ¯ä¹‹ç±»çš„ã€‚ï¼ˆè¯­è¨€å¯¹æ¥åªæœ‰Javaå¥½å¯¹æ¥ç‚¹ï¼‰</p><p>Kafkaé€‚åˆäºå¤§æ•°æ®ç³»ç»Ÿå¯¹æ¥ï¼Œæœ‰å¾ˆå¤šå¤§æ•°æ®ç»„ä»¶æ¯”å¦‚Flinkéƒ½æœ‰æ¯”è¾ƒå¥½çš„Kafkaå¯¹æ¥APIä¹‹ç±»çš„ï¼ˆå¤šè¯­è¨€APIåšçš„ä¸é”™ï¼ŒCã€Pythonç­‰ç­‰è¯­è¨€éƒ½æ”¯æŒã€‚</p><p>ç«™åœ¨å­˜å‚¨çš„è§’åº¦ï¼ŒRocketMQå’ŒKafkaå¤©ç”ŸæŒä¹…åŒ–ï¼ŒRabbitMQçš„è¯éœ€è¦é…ç½®ï¼ˆé…ç½®æŒä¹…åŒ–æ€§èƒ½ä¼šæœ‰ä¸‹é™ï¼‰ã€‚åŒæ—¶RabbitMQéœ€è¦å»äº†è§£AMQPæ¨¡å‹ï¼ŒRokcetMQå’ŒKafkaæ¨¡å‹ç®€å•ã€‚RabbitMQæ¶ˆè´¹æ˜¯åˆ é™¤æ¶ˆæ¯ï¼ŒRocketMQå’ŒKafkaéƒ½æ˜¯æ¶ˆè´¹åç§»é‡ç®¡ç†ï¼Œé€‚åˆäºå­˜å‚¨æ¶ˆæ¯ï¼Œåšæ¶ˆæ¯å›æº¯ä¹‹ç±»çš„ã€‚</p><h1>3ã€MCAé¡¹ç›®ä¸­Redisä¸MQçš„è¿ç”¨</h1><p>è¿™äº›å…·ä½“å†…å®¹æˆ‘è®²äº†ä¸€ä¸ªå¤§æ¦‚ï¼Œéœ€è¦çœ‹è§†é¢‘å†…å®¹ã€‚</p><h2 id="1ã€åˆå®¶äº‘ç¤¾åŒºç‰©ä¸šç®¡ç†å¹³å°-Redis">1ã€åˆå®¶äº‘ç¤¾åŒºç‰©ä¸šç®¡ç†å¹³å°:Redis</h2><h2 id="2ã€çƒ½ç«äº‘çŸ­ä¿¡å¹³å°-Redisã€RabbitMQ">2ã€çƒ½ç«äº‘çŸ­ä¿¡å¹³å°:Redisã€RabbitMQ</h2><h2 id="3ã€ä»0åˆ°1æ‰‹æ•²ä»£ç å®ç°å•†åŸé¡¹ç›®ï¼šRedisã€RocketMQ">3ã€ä»0åˆ°1æ‰‹æ•²ä»£ç å®ç°å•†åŸé¡¹ç›®ï¼šRedisã€RocketMQ</h2><h2 id="4ã€é©¬å£«å…µä¸¥é€‰è¯¾ç¨‹-IMé€šä¿¡ä¸­å°ï¼šRedisã€RocketMQ">4ã€é©¬å£«å…µä¸¥é€‰è¯¾ç¨‹-IMé€šä¿¡ä¸­å°ï¼šRedisã€RocketMQ</h2><h2 id="5ã€é£æ»´å‡ºè¡Œç½‘çº¦è½¦é¡¹ç›®ï¼šRedisã€RocketMQ">5ã€é£æ»´å‡ºè¡Œç½‘çº¦è½¦é¡¹ç›®ï¼šRedisã€RocketMQ</h2><h2 id="6ã€éŸ³ä¹æ•°æ®ä¸­å¿ƒç»¼åˆæ•°ä»“é¡¹ç›®ï¼šRedisã€Kafka">6ã€éŸ³ä¹æ•°æ®ä¸­å¿ƒç»¼åˆæ•°ä»“é¡¹ç›®ï¼šRedisã€Kafka</h2>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> MQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®æœåŠ¡æŠ€æœ¯æ ˆ</title>
      <link href="/2024/09/10/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8A%80%E6%9C%AF%E6%A0%88-SpringCloud/"/>
      <url>/2024/09/10/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8A%80%E6%9C%AF%E6%A0%88-SpringCloud/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=fcc2fa0b-70b9-610a-c17c-19602dfdf393</cover>
      <date>Tue Sep 10 2024 14:26:18 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1><strong>ä¸€ã€å¾®æœåŠ¡æ¶æ„ä»‹ç»</strong></h1><h2 id="1-1-æ¶æ„æ¼”å˜">1.1 æ¶æ„æ¼”å˜</h2><blockquote><p><strong>å•ä½“æ¶æ„ï¼š</strong> All in Oneï¼Œæ‰€æœ‰çš„åŠŸèƒ½æ¨¡å—éƒ½åœ¨ä¸€ä¸ªå·¥ç¨‹é‡Œã€‚</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/374f9e8ea3e642838ee5e2c7e9b66a41.png" alt="image.png"></p><p><strong>SOAæ¶æ„ï¼š</strong> è¿™ä¸ªæ¶æ„å½“ä¸å½“æ­£ä¸æ­£ï¼Œå¯¹äºç°åœ¨æ¥è¯´ï¼Œæœ‰ç‚¹è€ï¼Œç”šè‡³éœ€è¦ESBï¼ŒWebServiceä¹‹ç±»çš„ï¼ŒåŸºæœ¬ä¸ä¼šä½¿ç”¨äº†ã€‚</p><p><strong>å¾®æœåŠ¡æ¶æ„ï¼š</strong>  å¾®æœåŠ¡æ¶æ„æ€æƒ³æ˜¯é©¬ä¸ç¦å‹’æå‡ºçš„</p><p><a href="https://martinfowler.com/articles/microservices.html">https://martinfowler.com/articles/microservices.html</a></p><p>ä»–çš„æ ¸å¿ƒæ€æƒ³æ˜¯è¿™ä¸€æ®µè¯ï¼š</p><pre class="language-none"><code class="language-none">In short, the microservice architectural style 1 is an approach to developing a single application as a suite of small services, each running in its own process and communicating with lightweight mechanisms, often an HTTP resource API. These services are built around business capabilities and independently deployable by fully automated deployment machinery. There is a bare minimum of centralized management of these services, which may be written in different programming languages and use different data storage technologies.ç®€è€Œè¨€ä¹‹ï¼Œå¾®æœåŠ¡æ¶æ„é£æ ¼1æ˜¯ä¸€ç§å°†å•ä¸ªåº”ç”¨ç¨‹åºå¼€å‘ä¸ºä¸€å¥—å°å‹æœåŠ¡çš„æ–¹æ³•ï¼Œæ¯ä¸ªæœåŠ¡éƒ½åœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­è¿è¡Œï¼Œå¹¶ä¸è½»é‡çº§æœºåˆ¶ï¼ˆé€šå¸¸æ˜¯HTTPèµ„æºAPIï¼‰é€šä¿¡ã€‚è¿™äº›æœåŠ¡å›´ç»•ä¸šåŠ¡èƒ½åŠ›æ„å»ºï¼Œå¹¶å¯é€šè¿‡å…¨è‡ªåŠ¨éƒ¨ç½²æœºåˆ¶ç‹¬ç«‹éƒ¨ç½²ã€‚è¿™äº›æœåŠ¡çš„é›†ä¸­ç®¡ç†æœ€ä½é™åº¦ï¼Œè¿™äº›æœåŠ¡å¯èƒ½ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ç¼–å†™ï¼Œå¹¶ä½¿ç”¨ä¸åŒçš„æ•°æ®å­˜å‚¨æŠ€æœ¯ã€‚</code></pre><p>å°†ä¸Šè¿°å†…å®¹ç¨å¾®æ•´ç†ï¼š</p><ul><li>å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ä¸ªè½¯ä»¶æ¶æ„é£æ ¼ï¼Œä»–ä¸æ˜¯æ ‡å‡†ã€‚</li><li>å°†ä¸€ä¸ªå•ä½“æ¶æ„çš„äº§å“æ‹†åˆ†æˆå¤šä¸ªæœåŠ¡ï¼Œå¤šä¸ªæœåŠ¡ç»„æˆäº†å®Œæˆçš„äº§å“åŠŸèƒ½ã€‚</li><li>æ¯ä¸ªæœåŠ¡æ˜¯å¯ä»¥å®Œå…¨ç‹¬ç«‹éƒ¨ç½²çš„ï¼Œäº’ä¸å½±å“ã€‚</li><li>å¯ä»¥é‡‡ç”¨HTTPè¿™ç§è½»é‡çº§çš„æ–¹å¼å®ç°æœåŠ¡ä¹‹é—´çš„äº¤äº’ã€‚</li><li>åœ¨æ‹†åˆ†æœåŠ¡æ—¶ï¼Œä¸€èˆ¬æ˜¯æŒ‰ç…§äº§å“çš„ä¸šåŠ¡é¢†åŸŸå»åˆ’åˆ†ä¸åŒçš„æœåŠ¡ï¼Œä¹Ÿå¯ä»¥é’ˆå¯¹å•ä¸ªåŠŸèƒ½åšæˆä¸€ä¸ªæœåŠ¡ã€‚</li><li>é‡‡ç”¨DevOpsçš„æ–¹å¼å»åšè‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚ ï¼ˆåé¢ä¼šå­¦ï¼‰</li><li>æ”¯æŒé‡‡ç”¨ä¸ç”¨çš„è¯­è¨€å»æ„å»ºä¸€ä¸ªå®Œæ•´çš„äº§å“ã€‚</li></ul><p><img src="https://img.soniachen.com/blog/posts/2025/06/f8eb541f60a24967b24a0fcdcd5ac240.png" alt="image.png"></p><p><img src="https://img.soniachen.com/blog/posts/2025/06/286d41b410c84b85a717f16b76a61284.png" alt="image.png"></p><p>å¾®æœåŠ¡æ¶æ„ï¼šæ˜¯æ¶æ„æ€æƒ³ã€‚</p><p>å¾®æœåŠ¡ï¼šæ‹†åˆ†å‡ºæ¥çš„å¾®å°çš„æœåŠ¡ï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­çš„å•†å“æœåŠ¡å°±æ˜¯ä¸€ä¸ªå¾®æœåŠ¡ã€‚</p><p>å¾®æœåŠ¡æ¡†æ¶ï¼šå¯¹å¾®æœåŠ¡çš„æ¶æ„æ€æƒ³è½åœ°çš„ä¸€äº›æŠ€æœ¯ã€‚</p></blockquote><h2 id="1-2-SpringCloudç”Ÿæ€">1.2 SpringCloudç”Ÿæ€</h2><blockquote><p>å®˜æ–¹åœ°å€ï¼š <a href="https://spring.io/projects/spring-cloud">https://spring.io/projects/spring-cloud</a></p><p>å’±ä»¬è¦å­¦ä¹ SpringCloudç”Ÿæ€é‡Œçš„å‡ ä¸ªæŠ€æœ¯ï¼š</p><ul><li>SpringCloud Alibabaï¼š Nacos</li><li>SpringCloudï¼šOpenFeign</li><li>SpringCloud Alibabaï¼šSentinel</li><li>SpringCloudï¼šGateway</li><li><strong>é“¾è·¯è¿½è¸ªï¼šSleuth + Zipkin  -  SkyWalkingï¼ˆä¸ç©ï¼‰</strong></li></ul><p><img src="https://img.soniachen.com/blog/posts/2025/06/08081e25a8b844bea6663bc1497b5009.png" alt="image.png"></p><p><strong>Psï¼šè¿™é‡Œåªå…³æ³¨åº”ç”¨ï¼Œåº•å±‚æºç ä¹‹ç±»çš„å†…å®¹ï¼Œè¿™é‡Œä¸æ¶‰åŠã€‚</strong></p></blockquote><h1>äºŒã€Nacosæ³¨å†Œä¸­å¿ƒ</h1><h2 id="2-1-æ³¨å†Œä¸­å¿ƒ">2.1 æ³¨å†Œä¸­å¿ƒ</h2><blockquote><p>å½“è®¢å•æœåŠ¡éœ€è¦è®¿é—®åº“å­˜æœåŠ¡æ—¶ï¼Œä¸çŸ¥é“åº“å­˜æœåŠ¡çš„åœ°å€ä¿¡æ¯ã€‚åˆ©ç”¨æ³¨å†Œä¸­å¿ƒï¼Œåœ¨æœåŠ¡å¯åŠ¨æ—¶ï¼Œå°†æœåŠ¡çš„åŸºæœ¬ä¿¡æ¯éƒ½æ³¨å†Œåˆ°Nacosä¸­ï¼Œå½“éœ€è¦è®¿é—®æŸä¸€ä¸ªæœåŠ¡ä¹‹å‰ï¼Œå¯ä»¥å»Nacosä¸­è·å–åˆ°å¯¹åº”çš„æœåŠ¡ä¿¡æ¯ï¼Œå°±å¯ä»¥ç›´æ¥å»è®¿é—®å•¦~~~</p><p>å¦‚æœè®©è®¢å•æœåŠ¡å•ç‹¬å­˜å‚¨åº“å­˜æœåŠ¡çš„åŸºæœ¬ä¿¡æ¯ï¼Œä¼šå¯¼è‡´è€¦åˆé—®é¢˜ï¼Œå¦‚æœåº“å­˜æœåŠ¡çš„åœ°å€æ”¹å˜äº†ï¼Œè®¢å•æœåŠ¡ä¹Ÿéœ€è¦å˜åŒ–ï¼Œå¦‚æœåº“å­˜æœåŠ¡è¿½åŠ äº†é›†ç¾¤çš„èŠ‚ç‚¹æˆ–è€…å‡å°‘äº†é›†ç¾¤çš„èŠ‚ç‚¹ï¼Œè®¢å•æœåŠ¡éƒ½éœ€è¦åšç»´æŠ¤ï¼Œè€¦åˆæ€§å¤ªé«˜ã€‚</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/3a607132146547579f90f8db2b940c10.png" alt="image.png"></p></blockquote><h2 id="2-2-Nacoså®‰è£…">2.2 Nacoså®‰è£…</h2><blockquote><p>Nacoså¯ä»¥Windowsä¸‹ç®€å•çš„ç©ï¼Œä¹Ÿå¯ä»¥åœ¨Linuxé‡Œå®‰è£…ã€‚</p><p>ç›´æ¥å»å®˜æ–¹ä¸‹è½½å³å¯ã€‚</p><p>æœ¬åœ°ç¯å¢ƒè¦æ±‚ï¼Œjava -versionè¦ä¹ˆæ˜¯JDK8ï¼Œè¦ä¹ˆæ˜¯JDK11</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/57d464304a38460aa2e4f1daaa1b4518.png" alt="image.png">1</p><p><a href="https://download.nacos.io/nacos-server/nacos-server-2.5.1.zip?spm=5238cd80.2ef5001f.0.0.3f613b7cKzonbx&amp;file=nacos-server-2.5.1.zip">https://download.nacos.io/nacos-server/nacos-server-2.5.1.zip?spm=5238cd80.2ef5001f.0.0.3f613b7cKzonbx&amp;file=nacos-server-2.5.1.zip</a></p><p><strong>ç‚¹å‡»å³å¯ç›´æ¥ä¸‹è½½ï¼ˆæœ€å¥½å»å®˜ç½‘ï¼‰ã€‚</strong></p><p><img src="https://img.soniachen.com/blog/posts/2025/06/50028280050a48c3afca88986bb2fc18.png" alt="image.png"></p><p>æ‰“å¼€cmdå‡†å¤‡å¯åŠ¨NacosæœåŠ¡</p><p>ç„¶ååˆ°binç›®å½•ä¸‹å‡†å¤‡å¯åŠ¨</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/ef013c66e8f84a54b5ccf6e6261c5664.png" alt="image.png">å¯åŠ¨æˆåŠŸè¦çœ‹åˆ°è¿™ä¸ªæ—¥å¿—</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/9f76aa77d2684bc9ab177b0712200975.png" alt="image.png"></p><p>å¯åŠ¨æˆåŠŸåï¼Œç›´æ¥è®¿é—®Nacosæä¾›çš„å›¾å½¢åŒ–ç•Œé¢</p><p><a href="http://localhost:8848/nacos">http://localhost:8848/nacos</a></p><p><img src="https://img.soniachen.com/blog/posts/2025/06/a37fffd20043410a820a1fd39538e1f2.png" alt="image.png"></p></blockquote><h2 id="2-3-Nacosåˆä½“éªŒï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰">2.3 Nacosåˆä½“éªŒï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰</h2><h3 id="2-3-1-æ„å»ºçˆ¶å·¥ç¨‹å¹¶ç®¡ç†ç‰ˆæœ¬">2.3.1 æ„å»ºçˆ¶å·¥ç¨‹å¹¶ç®¡ç†ç‰ˆæœ¬</h3><blockquote><p>åœ¨ç©Nacosçš„å®¢æˆ·ç«¯æ“ä½œå‰ï¼Œä¼˜å…ˆäº†è§£ä¸€ä¸‹å¸¸è¯†æ€§å†…å®¹ã€‚</p><p>SpringCloudæ˜¯å»ºç«‹åœ¨SpringBootåŸºç¡€ä¸Šçš„ã€‚</p><p>å…¶æ¬¡ï¼ŒSpringBootç‰ˆæœ¬ï¼ŒSpringCloudç‰ˆæœ¬ï¼ŒSpringCloudAlibabaçš„ç‰ˆæœ¬éƒ½æ˜¯æœ‰å¯¹åº”çš„ã€‚</p><p>ç‰ˆæœ¬å¯¹åº”å¯ä»¥æŸ¥çœ‹è¿™ä¸ªåœ°å€ï¼š</p><p><a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E">https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E</a></p><p>ç‰ˆæœ¬ä¸åŒï¼Œåœ¨ä½¿ç”¨çš„ä¸€äº›ç»†èŠ‚ä¸Šå¯èƒ½ä¼šå‡ºç°ä¸€äº›ä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œæ‰€ä»¥æœ€å¥½è·Ÿæˆ‘çš„ç‰ˆæœ¬ä¿æŒç»Ÿä¸€ï¼</p><p>SpringBootå’±ä»¬å…ˆä¸ç©3.xï¼Œä¾ç„¶æ˜¯ä»¥2.xä¸ºæ ¸å¿ƒã€‚</p><p>æ„å»ºä¸€ä¸ªæ™®é€šçš„Mavenå·¥ç¨‹ï¼Œåœ¨pom.xmlä¸­åšå››ä¸ªäº‹æƒ…ã€‚</p><ul><li>å°†å½“å‰å·¥ç¨‹çš„packagingè®¾ç½®ä¸ºpomç±»å‹ã€‚</li><li>å£°æ˜å¥½SpringBootçš„parentï¼Œå¹¶åˆ¶å®šå¥½ç‰ˆæœ¬</li><li>å£°æ˜SpringCloudçš„ç‰ˆæœ¬</li><li>å£°æ˜SpringCloudAlibabaçš„ç‰ˆæœ¬</li></ul><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.6.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.mashibing<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">></span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">></span></span>2021.0.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud-alibaba.version</span><span class="token punctuation">></span></span>2021.0.4.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud-alibaba.version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;spring-cloud.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;spring-cloud-alibaba.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span></code></pre></blockquote><h3 id="2-3-2-å‡†å¤‡åº“å­˜æœåŠ¡">2.3.2 å‡†å¤‡åº“å­˜æœåŠ¡</h3><blockquote><p>è¿™é‡Œéœ€è¦å®Œæˆå‡ ä¸ªæ“ä½œã€‚</p><p>1ã€æ„å»ºå¥½å­å·¥ç¨‹â€¦â€¦</p><p>2ã€å¯¼å…¥ä¾èµ–â€¦â€¦</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></code></pre><p>3ã€å‡†å¤‡å¯åŠ¨ç±»ï¼Œå¹¶æ·»åŠ æ³¨è§£â€¦â€¦</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>mashibing</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span>discovery<span class="token punctuation">.</span></span><span class="token class-name">EnableDiscoveryClient</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token annotation punctuation">@EnableDiscoveryClient</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StockStarterApp</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">StockStarterApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>4ã€å‡†å¤‡ymlæ–‡ä»¶ï¼Œé…ç½®Nacosä¿¡æ¯â€¦â€¦</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> stock  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">8848</span></code></pre><p>5ã€å¯åŠ¨æµ‹è¯•â€¦â€¦</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/cf33bd2671f34b52b7710c031cd9687b.png" alt="image.png"></p></blockquote><h3 id="2-3-3-å‡†å¤‡è®¢å•æœåŠ¡">2.3.3 å‡†å¤‡è®¢å•æœåŠ¡</h3><blockquote><p>æ“ä½œæ–¹å¼è·Ÿåº“å­˜æœåŠ¡çš„å¥—è·¯æ²¡åŒºåˆ«ã€‚</p><p>ymlæ–‡ä»¶ç•¥å¾®è°ƒæ•´</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> order  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">8848</span><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span></code></pre><p>å¯åŠ¨å¹¶æµ‹è¯•</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/915bc496b4ba4c7188afa229937a58b3.png" alt="image.png"></p></blockquote><h3 id="2-3-4-åº“å­˜æœåŠ¡æä¾›æ¥å£">2.3.4 åº“å­˜æœåŠ¡æä¾›æ¥å£</h3><blockquote><p>åœ¨stockæœåŠ¡ä¸­æä¾›ä¸€ä¸ªå¯ä»¥å¯¹å¤–è®¿é—®çš„æ¥å£</p><p>å†™å®Œè®°å¾—æµ‹è¯•ä¸€ä¸‹ï¼Œå¯ä»¥è®¿é—®ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>mashibing<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StockController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/stock/test"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"stock test!"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p><img src="https://img.soniachen.com/blog/posts/2025/06/81949c73624345e2926ee009c0d961c4.png" alt="image.png"></p></blockquote><h3 id="2-3-5-è®¢å•æœåŠ¡å‡†å¤‡æ¥å£è®¿é—®åº“å­˜æœåŠ¡">2.3.5 è®¢å•æœåŠ¡å‡†å¤‡æ¥å£è®¿é—®åº“å­˜æœåŠ¡</h3><blockquote><p>æ­£å¸¸å‡†å¤‡OrderControllerï¼Œå¹¶ä¸”åœ¨å¯åŠ¨ç±»ä¸­æ„å»ºå¥½RestTemplateå¯¹è±¡ï¼Œåœ¨OrderControllerä¸­è®¿é—®åº“å­˜æœåŠ¡æä¾›çš„æ¥å£ã€‚  <strong>ç°åœ¨æ˜¯ç›´æ¥å†™æ­»çš„çŠ¶æ€ï¼Œæ²¡åˆ©ç”¨Nacosã€‚</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>mashibing<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestTemplate</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// restTemplateæ˜¯å¯åŠ¨ç±»é‡Œæ„å»ºçš„ï¼</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/order/test"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//1ã€ ç›´æ¥è®¿é—®åº“å­˜æœåŠ¡çš„/stock/testæ¥å£ï¼Œè·å–æ•°æ®</span>        <span class="token class-name">String</span> result <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/stock/test"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2ã€ å“åº”æ•°æ®</span>        <span class="token keyword">return</span> <span class="token string">"Order Test get "</span> <span class="token operator">+</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p><img src="https://img.soniachen.com/blog/posts/2025/06/06e113dba0954c2a8a9be06e176b5975.png" alt="image.png"></p><hr><p>åœ¨ç¡®ä¿å†™æ­»çš„çŠ¶æ€ä¸‹ï¼Œå¯ä»¥æ­£å¸¸çš„è·å–åˆ°åº“å­˜æœåŠ¡æä¾›çš„æ¥å£åï¼Œå’±ä»¬å¼€å§‹åˆ©ç”¨Nacoså»è·å–æœåŠ¡çš„åœ°å€ä¿¡æ¯ã€‚</p><p>åªéœ€è¦åœ¨é…ç½®RestTemplateä¸­ï¼Œé¢å¤–è¿½åŠ ä¸€ä¸ªä¾èµ–</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token annotation punctuation">@LoadBalanced</span><span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">restTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>å†å°†åŸºäºrestTemplateå¯¹è±¡è®¿é—®çš„åœ°å€è·¯å¾„ä¸­çš„ip:portæ¢æˆæœåŠ¡åã€‚</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/3d9e8e55cd6946d1a8b596347f54aa30.png" alt="image.png"></p><p>å¸Œæœ›çš„æ•ˆæœæ˜¯ï¼Œåœ¨restTemplateè®¿é—®æ—¶ï¼Œå°†stockæœåŠ¡åä»Nacosä¸­è§£æä¸ºå…·ä½“çš„ipå’Œç«¯å£ã€‚Butäº‹ä¸æ„¿è¿ï¼ŒæŠ¥é”™äº†ã€‚</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/5b2ef5be9059474ea573b3df7fe06b01.png" alt="image.png"></p><p>åŸå› æ˜¯å› ä¸ºç°åœ¨ç©çš„ç‰ˆæœ¬æ¯”è¾ƒé«˜ï¼Œé»˜è®¤å·²ç»ä¸ç”¨Ribbonï¼Œéœ€è¦å¯¼å…¥loadbalancerçš„ä¾èµ–ï¼Œå°±å¯ä»¥è§£å†³ã€‚</p><p>åœ¨orderæœåŠ¡ä¸­ï¼Œè¿½åŠ ä¸€ä¸ªä¾èµ–ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-loadbalancer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>å†æ¬¡è®¿é—®ï¼Œå¾—åˆ°å…·ä½“çš„ç»“æœ</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/625445e2eb7d4cbe8e754ca18087987a.png" alt="image.png"></p></blockquote><h2 id="2-4-å‘½åç©ºé—´å’Œåˆ†ç»„ï¼ˆäº†è§£ï¼‰">2.4 å‘½åç©ºé—´å’Œåˆ†ç»„ï¼ˆäº†è§£ï¼‰</h2><blockquote><p>å’±ä»¬åœ¨é»˜è®¤æ“ä½œæ—¶ï¼Œè¿æ¥æ˜¯çš„Nacosä¸­çš„publicå‘½åç©ºé—´ä»¥åŠDEFAULT_GROUPåˆ†ç»„ä¸‹çš„æœåŠ¡ä¿¡æ¯ã€‚</p><p>å’±ä»¬å¯ä»¥åœ¨ymlæ–‡ä»¶ä¸­æŒ‡å®šè¦ï¼Œå½“å‰æœåŠ¡éœ€è¦è¿æ¥å“ªä¸ªå‘½åç©ºé—´ä»¥åŠåˆ†ç»„ã€‚</p></blockquote><hr><blockquote><p>ä¼˜å…ˆæ„å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œç„¶åæŒ‡å®šorderæœåŠ¡è¿æ¥çš„å‘½åç©ºé—´</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/f0f1b752e40844efa88fcc301e7fc209.png" alt="image.png"></p><p>ä¿®æ”¹å®Œæ¯•åï¼Œå› ä¸ºä¹‹å‰çš„stockæœåŠ¡ä¾ç„¶æ³¨å†Œåœ¨publicå‘½åç©ºé—´ä¸‹ï¼Œæ‰€ä»¥orderæœåŠ¡å»devå‘½åç©ºé—´å»æ‰¾stockæœåŠ¡å¿…ç„¶æ‰¾ä¸åˆ°ï¼ŒSoï¼ŒæŠ¥äº†è¿™ä¸ªé”™è¯¯</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/6ecec72f503843cd817412406df02642.png" alt="image.png"></p></blockquote><hr><blockquote><p>å°†orderæœåŠ¡ä¸­çš„æ³¨å†Œä¸å‘ç°çš„åˆ†ç»„è®¾ç½®çš„PDD_GROUPï¼Œå†æ¬¡å»æ‰¾Nacoså®ç°æ³¨å†Œä¸å‘ç°æ—¶ï¼Œå°±ä¼šåªæ‰¾PDD_GROUPä¸‹çš„å†…å®¹</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/c09281b64edc4d3aa537ed40a77de81d.png" alt="image.png"></p><p>å†æ¬¡å»æ‰¾stockæœåŠ¡æ—¶ï¼Œå‘ç°æ‰¾ä¸åˆ°ï¼Œé‚£å°±å¯¹äº†ï¼Œå› ä¸ºå’±ä»¬é…ç½®äº†åˆ†ç»„çš„ä¿¡æ¯ï¼Œæ‰€ä»¥ä»–ä¼šå»PDD_GROUPå»æ‰¾å¯¹åº”çš„stockæœåŠ¡ã€‚</p><p><img src="https://img.soniachen.com/blog/posts/2025/06/42732a8eff1f4668bc410ae0a72025b6.png" alt="image.png"></p></blockquote><h2 id="2-5-è´Ÿè½½å‡è¡¡ï¼ˆäº†è§£ï¼‰">2.5 è´Ÿè½½å‡è¡¡ï¼ˆäº†è§£ï¼‰</h2><blockquote><p><img src="https://img.soniachen.com/blog/posts/2025/06/d70d40d37f4a49d78104436efbf79876.png" alt="image.png"><br>è´Ÿè½½å‡è¡¡çš„æ“ä½œä¸æ˜¯Nacoså»åšçš„ã€‚è€Œæ˜¯Nacosä¾èµ– <strong>Ribbonæˆ–è€…Loadbalancer</strong> ã€‚</p><p><strong>ï¼ˆä½ç‰ˆæœ¬é»˜è®¤å¼•å…¥Ribbonï¼Œå½“å‰ç‰ˆæœ¬éœ€è¦æ‰‹åŠ¨å¼•å…¥Loadbalancerï¼‰</strong></p><p>é»˜è®¤æƒ…å†µå°±æ˜¯è½®è¯¢çš„æœºåˆ¶ï¼Œä½ ä¸€ä¸ªï¼Œæˆ‘ä¸€ä¸ªï¼Œä½ ä¸€ä¸ªï¼Œæˆ‘ä¸€ä¸ªï¼Œä½ ä¸€ä¸ªï¼Œæˆ‘ä¸€ä¸ªâ€¦â€¦</p><p>ä¸éœ€è¦åšä»»ä½•é¢å¤–çš„é…ç½®ï¼Œé»˜è®¤æœºåˆ¶å³å¯ï¼Œè™½ç„¶ä¹Ÿæœ‰æƒé‡ä¹‹ç±»çš„æ“ä½œï¼ŒåŸºæœ¬ä¸ç”¨ã€‚</p><p>ç¨å¾®ä¿®æ”¹äº†ä¸€ä¸‹ä»£ç ï¼Œæ–¹ä¾¿æŸ¥çœ‹å…·ä½“çš„æ•ˆæœï¼Œå°†stockæœåŠ¡çš„testæ¥å£è¿”å›çš„ç»“æœè¿½åŠ ä¸Šå¯¹åº”çš„ç«¯å£å·ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>mashibing<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StockController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;server.port&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/stock/test"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"stock test!"</span> <span class="token operator">+</span> serverPort<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç¬¬ä¸€æ¬¡å¯åŠ¨å‘ç°é”™è¯¯ï¼Œæ‰¾ä¸åˆ°å¼•å…¥çš„ <strong>@Value(â€œ${server.port}â€)</strong> ï¼ŒåŸå› æ˜¯é…ç½®æ–‡ä»¶æ²¡å†™ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/760d7c17c6224933b53e0922396d4d8c.png" alt="image.png"></p><p>è¿½åŠ ä¸Šå¯¹åº”çš„é…ç½®ï¼Œå°±å®Œäº‹äº†ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/b10d0d49c4844a2bbe8cdf48d90a490a.png" alt="image.png"></p><p>ä¼˜å…ˆå¯åŠ¨äº†8080çš„Stockã€‚</p><p>ç´§æ¥ç€ä¸ºäº†æŸ¥çœ‹é›†ç¾¤çš„æ•ˆæœï¼ŒåŸºäºIDEAçš„é…ç½®ï¼Œå†æ¬¡å¯åŠ¨ä¸€ä¸ªStockæœåŠ¡ï¼Œä½†æ˜¯å› ä¸ºIDEAç‰ˆæœ¬åŸå› ï¼Œéœ€è¦è®¾ç½®ä¸€ä¸‹å¤šç¯å¢ƒä¿¡æ¯æ‰okã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/a9a0a5c61b554fe290095d1ef4a53962.png" alt="image.png"></p><p>ç„¶ååœ¨IDEAä¸­è¿½åŠ å¯åŠ¨é¡¹ï¼Œå¯åŠ¨é…ç½®å¥½çš„è¿™ä¸ª8081çš„StockæœåŠ¡</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/05f9484a228f4477a4098b46179ccbcb.png" alt="image.png"></p><p>å¯åŠ¨æˆåŠŸåï¼Œå¯ä»¥åœ¨Nacosä¸­çœ‹åˆ°å…·ä½“çš„é›†ç¾¤ä¿¡æ¯</p><p>Psï¼šè®°ä½ï¼Œé›†ç¾¤çš„æœåŠ¡åå¿…é¡»ä¿æŒä¸€è‡´ï¼Œä½ å†™æˆä¸ä¸€æ ·çš„ï¼Œé‚£å°±æ˜¯ä¿©æœåŠ¡äº†ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/7bd2a0cc4ff14843ae5d7a82d2561de8.png" alt="image.png"></p><p>å†å»è®¿é—®çš„æ—¶å€™ï¼Œä»–å°±æ˜¯é»˜è®¤è½®è¯¢çš„æ•ˆæœäº†ï¼</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/a4dc6af57d6c444f8a92a74d76ad5eb4.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/85a3329633224a82a30e86f3206fc7e7.png" alt="image.png"></p></blockquote><h1>ä¸‰ã€Nacosé…ç½®ä¸­å¿ƒ</h1><h2 id="3-1-é…ç½®ä¸­å¿ƒ">3.1 é…ç½®ä¸­å¿ƒ</h2><blockquote><p>ä¹‹å‰å’±ä»¬çš„é…ç½®ä¿¡æ¯éƒ½æ˜¯æ”¾åœ¨é¡¹ç›®å·¥ç¨‹é‡Œçš„application.ymlæ–‡ä»¶ä¸­ã€‚</p><p>ä½†æ˜¯åæœŸæœåŠ¡å¯èƒ½ä¼šæ¶‰åŠåˆ°é›†ç¾¤éƒ¨ç½²ï¼Œå¹¶ä¸”éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸­ã€‚å¦‚æœæ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€ç®¡ç†è¿™äº›é…ç½®çš„æ–¹æ¡ˆï¼Œéœ€è¦å»å¤šä¸ªåœ°æ–¹ç»´æŠ¤è¿™äº›é…ç½®ä¿¡æ¯ã€‚</p><p>é¡¹ç›®åœ¨å¼€å‘åˆ°å‘å¸ƒäº¤ä»˜çš„è¿‡ç¨‹ä¸­ï¼Œæ¶‰åŠå¾ˆå¤šç¯å¢ƒå¼€å‘ç¯å¢ƒï¼Œæµ‹è¯•ç¯å¢ƒï¼Œé¢„ç”Ÿäº§ç¯å¢ƒï¼Œç”Ÿäº§ç¯å¢ƒï¼Œç¯å¢ƒå¾ˆå¤šï¼Œéœ€è¦æä¾›å¤šç§ç¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶ã€‚</p><p>é¡¹ç›®ä¸­å¦‚æœé…ç½®æ–‡ä»¶å‘ç”Ÿä¿®æ”¹ï¼Œä¸€èˆ¬æ˜¯éœ€è¦é‡å¯é¡¹ç›®æ‰èƒ½ç”Ÿæ•ˆçš„ï¼Œä½†æ˜¯é…ç½®ä¸­å¿ƒæ˜¯å¯ä»¥å®ç°åŠ¨æ€åˆ·æ–°é…ç½®çš„åŠŸèƒ½ï¼Œä¿®æ”¹ç©é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ç«‹å³ç”Ÿæ•ˆï¼Œä¸éœ€è¦é‡å¯ã€‚</p><p>å…¶æ¬¡å°±æ˜¯é…ç½®æ–‡ä»¶ç°åœ¨çš„å½¢å¼å°±æ˜¯æœ¬åœ°çš„ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œè°éƒ½èƒ½çœ‹ï¼Œè°éƒ½èƒ½æ”¹ï¼Œæƒé™ä¸å¥½æ§åˆ¶ã€‚é…ç½®ä¸­å¿ƒå°±ä¼šæä¾›è¿™ç§æƒé™çš„æ§åˆ¶ã€‚</p><p>é’ˆå¯¹å†å²ç‰ˆæœ¬çš„è®°å½•ï¼Œå¸Œæœ›å¯ä»¥çœ‹åˆ°é…ç½®æ–‡ä»¶æ¯æ¬¡æ›´æ”¹çš„å˜åŒ–ï¼Œä»¥åŠå†å²ç‰ˆæœ¬è®°å½•ï¼Œä¹Ÿå¯ä»¥æ–¹ä¾¿åšä¸€ä¸ªå›æ»šçš„æ“ä½œã€‚</p><p>æ€»ç»“ä¸‹æ¥å°±å‡ ç‚¹ï¼š</p><ul><li>é›†ä¸­å¼ç®¡ç†é…ç½®æ–‡ä»¶çš„åœ°æ–¹</li><li>ç¯å¢ƒéš”ç¦»</li><li>é…ç½®åŠ¨æ€åˆ·æ–°</li><li>æƒé™çš„æ§åˆ¶</li><li>å†å²ç‰ˆæœ¬è®°å½•</li></ul></blockquote><h2 id="3-2-Nacosåˆä½“éªŒï¼ˆé…ç½®ä¸­å¿ƒï¼‰">3.2 Nacosåˆä½“éªŒï¼ˆé…ç½®ä¸­å¿ƒï¼‰</h2><blockquote><p>ç°åœ¨çš„ç›®çš„æ˜¯å°†orderæœåŠ¡ä¸­çš„server.port=80çš„é…ç½®æ‰”åˆ°NacosæœåŠ¡ä¸­ç®¡ç†ã€‚å¸Œæœ›OrderæœåŠ¡å¯åŠ¨åï¼Œå¯ä»¥å»æ‰¾å¯¹åº”åœ°å€çš„Nacosä¸­çš„æŸä¸ªDataIdçš„é…ç½®æ–‡ä»¶ï¼Œè¾¾åˆ°å¯åŠ¨åï¼Œä¾ç„¶å ç”¨80ç«¯å£ã€‚</p><p><strong>åˆ†æˆè¿™å‡ æ­¥å®Œæˆä¸Šè¿°æ“ä½œï¼š</strong></p><p><strong>1ã€å¯¼å…¥ä¾èµ–</strong></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p><strong>2ã€åœ¨NacosæœåŠ¡ä¸Šç¼–å†™é…ç½®æ–‡ä»¶</strong></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/7d65825d1e644d4d8bda60d0a3ecb936.png" alt="image.png"><br><strong>3ã€Orderçš„é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šå¥½Nacosåœ°å€ä»¥åŠåŠ è½½å“ªä¸ªé…ç½®æ–‡ä»¶</strong></p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token comment"># æœåŠ¡å</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> order  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>    <span class="token comment"># ç¯å¢ƒå</span>    <span class="token key atrule">active</span><span class="token punctuation">:</span> study  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">8848</span>      <span class="token key atrule">config</span><span class="token punctuation">:</span>        <span class="token comment"># nacosåœ°å€</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">8848</span>        <span class="token comment"># æ–‡ä»¶åç¼€</span>        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yml<span class="token comment">#  order-study.yml</span><span class="token comment">#  $&#123;spring.application.name&#125; - $&#123;spring.profiles.active&#125; . $&#123;spring.cloud.nacos.config.file-extension&#125;</span></code></pre><p><strong>4ã€å°†application.ymlä¿®æ”¹ä¸ºbootstrap.yml</strong></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/21bdc67488b9487d82e727c223bc6f2b.png" alt="image.png"></p><p><strong>5ã€å› ä¸ºç‰ˆæœ¬å…³ç³»ï¼Œéœ€è¦è¿½åŠ ä¸Šä¸€ä¸ªä¾èµ–ã€‚</strong></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-bootstrap<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p><strong>6ã€æµ‹è¯•ï¼Œå¯åŠ¨åæŸ¥çœ‹æ—¥å¿—ä¿¡æ¯</strong></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/9645abdaced9445f8fa2a0c11ec1bcd7.png" alt="image.png"></p></blockquote><h2 id="3-3-å‘½åç©ºé—´å’Œåˆ†ç»„ï¼ˆäº†è§£ï¼‰">3.3 å‘½åç©ºé—´å’Œåˆ†ç»„ï¼ˆäº†è§£ï¼‰</h2><blockquote><p>è¿™é‡Œè·Ÿæ³¨å†Œä¸­å¿ƒçš„æ€è·¯æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œæ²¡å•¥å˜åŒ–</p><p>ä¼˜å…ˆå‡†å¤‡ä¸€ä¸ªdevå‘½åç©ºé—´ä¸‹çš„DEV_GROUPåˆ†ç»„çš„é…ç½®æ–‡ä»¶ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/96fb0592bae74854998339f41144d2e9.png" alt="image.png"></p><p>é…ç½®æ–‡ä»¶çš„ç¼–å†™æ–¹å¼</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token comment"># æœåŠ¡å</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> order  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>    <span class="token comment"># ç¯å¢ƒå</span>    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">8848</span>      <span class="token key atrule">config</span><span class="token punctuation">:</span>        <span class="token comment"># nacosåœ°å€</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">8848</span>        <span class="token comment"># æ–‡ä»¶åç¼€</span>        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yml        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> 06173ada<span class="token punctuation">-</span>fb39<span class="token punctuation">-</span>47b3<span class="token punctuation">-</span>8551<span class="token punctuation">-</span>7265a5177770        <span class="token key atrule">group</span><span class="token punctuation">:</span> DEV_GROUP</code></pre></blockquote><h2 id="3-4-é…ç½®åŠ¨æ€åˆ·æ–°">3.4 é…ç½®åŠ¨æ€åˆ·æ–°</h2><blockquote><p>é…ç½®çš„åŠ¨æ€åˆ·æ–°çš„ç›®çš„æ˜¯ä¸ºäº†å®ç°å½“ç¨‹åºè¯»å–Nacosä¸­çš„é…ç½®æ–‡ä»¶çš„å†…å®¹æ—¶ï¼Œå¦‚æœNacosä¸­ä¿®æ”¹äº†æŸä¸ªkeyå¯¹åº”çš„valueï¼Œé¡¹ç›®ä¸éœ€è¦é‡å¯å°±å¯ä»¥ç«‹å³ç”Ÿæ•ˆã€‚</p><p>å‡†å¤‡ä¸€ä¸ªç¯å¢ƒï¼Œæä¾›ä¸€ä¸ªControlleræ¥å£ï¼Œè·å–Nacosé…ç½®ä¸­çš„æŸä¸ªkeyçš„valueï¼Œå¹¶ä¸”æµ‹è¯•æ•ˆæœã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// è·å–Nacosé…ç½®æ–‡ä»¶ä¸­çš„info</span><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;info:empty&#125;"</span><span class="token punctuation">)</span><span class="token keyword">private</span> <span class="token class-name">String</span> info<span class="token punctuation">;</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/order/info"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> info<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/1a2aeed96f484f8c8fcf6423bbef07e3.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/d2c9a173d98a406fb9f753ff88912b8c.png" alt="image.png"></p></blockquote><hr><blockquote><p>ç°åœ¨ä¸ºäº†å®ç°åŠ¨æ€åˆ·æ–°çš„æ•ˆæœï¼Œå’±ä»¬åªéœ€è¦åšä¸€ä¸ªäº‹æƒ…ã€‚</p><p>åœ¨å¼•å…¥Nacosé…ç½®æ–‡ä»¶çš„ç±»ä¸Šï¼Œè¿½åŠ ä¸€ä¸ªæ³¨è§£å³å¯</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RefreshScope</span></code></pre><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/8e6e99c8bf3d495a883dad52a41790c6.png" alt="image.png"></p></blockquote><h1>å››ã€OpenFeign</h1><h2 id="4-1-OpenFeignä»‹ç»">4.1 OpenFeignä»‹ç»</h2><blockquote><p>OpenFeignæ˜¯RPCæ¡†æ¶çš„ä¸€ç§ï¼ŒOpenFeignä¸æ˜¯Alibabaçš„ç»„ä»¶ï¼Œå±äºSpringCloudã€‚</p><p>Alibabaå†…éƒ¨æä¾›çš„æ˜¯Dubboçš„RPCæ¡†æ¶ï¼Œä½œç”¨éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><ul><li>Dubboèµ°çš„æ˜¯è‡ªå·±çš„Dubboåè®®ã€‚</li><li>OpenFeigné‡‡ç”¨çš„æ˜¯HTTPåè®®ã€‚</li></ul><p>OpenFeignçš„ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº† <strong>ç®€åŒ–Javaé¡¹ç›®ä¸­ç¼–è¯‘HTTPè¯·æ±‚çš„è¿‡ç¨‹</strong> ï¼Œå¹¶ä¸”è®©ä»£ç  <strong>å…·å¤‡æ›´å¥½çš„å¯ç»´æŠ¤æ€§</strong> ã€‚</p><p>OpenFeignä»–ä¹Ÿ <strong>æ•´åˆSentinelï¼ŒNacosï¼ŒHystrixï¼ŒLoadBalancerç­‰</strong> ï¼Œè¿™äº›OpenFeignéƒ½æ˜¯å¯ä»¥0æˆæœ¬æ•´åˆçš„ã€‚</p><p>OpenFeignæ˜¯ <strong>åŸºäºæ¥å£ï¼ˆinterfaceï¼‰å°è£…</strong> ï¼Œå®ç°ä»£ç†å¯¹è±¡å»è®¿é—®çš„ï¼Œè·Ÿä¹‹å‰çš„å•ä½“é¡¹ç›®çš„ç¼–å†™æ€è·¯æ˜¯ä¸€æ ·çš„ã€‚</p></blockquote><h2 id="4-2-OpenFeignçš„åˆä½“éªŒ">4.2 OpenFeignçš„åˆä½“éªŒ</h2><blockquote><p>æŒ‰ç…§å®˜æ–¹æ–‡æ¡£çš„æ–¹å¼ä¸€æ­¥ä¸€æ­¥èµ°ã€‚</p><p><strong>1ã€å¯¼å…¥ä¾èµ–</strong></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p><strong>2ã€å¯åŠ¨ç±»è¿½åŠ æ³¨è§£</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableFeignClients</span></code></pre><p><strong>3ã€ç¼–å†™OpenFeignçš„Clientæ¥å£ã€‚ï¼ˆæ˜ å°„åˆ°å¯¹åº”æœåŠ¡çš„æ¥å£ä¸Šï¼‰</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>mashibing<span class="token punctuation">.</span>client</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">FeignClient</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">"stock"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StockClient</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// è¿™é‡Œçš„å†…å®¹ï¼Œå¦‚æœå¯ä»¥ï¼Œæœ€å¥½å»å¯¹åº”çš„Controllerä½ç½®å¤åˆ¶</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/stock/test"</span><span class="token punctuation">)</span>    <span class="token class-name">String</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p><strong>4ã€æµ‹è¯•ï¼Œåœ¨orderæœåŠ¡ä¸­ç¼–å†™æµ‹è¯•æ¥å£</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RefreshScope</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">StockClient</span> stockClient<span class="token punctuation">;</span>    <span class="token comment">// åŸºäºOpenFeignï¼Œå°è¯•è®¿é—®StockæœåŠ¡</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/order/feign"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">feign</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> result <span class="token operator">=</span> stockClient<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/91fb4e69c034418e8f02514584ed9ccd.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/09449f3029a1439a8dcf8c5eb53945af.png" alt="image.png"></p></blockquote><h2 id="4-3-OpenFeigné…ç½®">4.3 OpenFeigné…ç½®</h2><h3 id="4-3-1-OpenFeignçš„è¶…æ—¶é…ç½®">4.3.1 OpenFeignçš„è¶…æ—¶é…ç½®</h3><blockquote><p>é€šè¿‡å®˜æ–¹æ–‡æ¡£å¯ä»¥å¾—çŸ¥ï¼ŒOpenFeignçš„è¶…æ—¶é…ç½®å°±2ä¸ªä¸œè¥¿</p><ul><li><code>connectTimeout</code> prevents blocking the caller due to the long server processing time.</li><li><code>readTimeout</code> is applied from the time of connection establishment and is triggered when returning the response takes too long.</li></ul><p>connectTimeoutï¼šå…³æ³¨çš„ä¸å¤šï¼Œæ›´å¤šçš„æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å»ºç«‹TCPè¿æ¥çš„è¶…æ—¶æ—¶é—´ã€‚</p><p>readTimeoutï¼šè¿™ä¸ªé…ç½®çš„ä¼šæ¯”è¾ƒå¤šï¼Œä»–æ˜¯ä»è¯·æ±‚å‘å‡ºåˆ°å“åº”çš„è¶…æ—¶æ—¶é—´</p><p>å°†StockæœåŠ¡ä¸­çš„æ¥å£ä¼‘çœ ä¸€æ®µæ—¶é—´ï¼Œæ¥æµ‹è¯•è¾¾åˆ°è¶…æ—¶æ—¶é—´åçš„æ•ˆæœ</p><p>OrderæœåŠ¡çš„é…ç½®ï¼š</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">feign</span><span class="token punctuation">:</span>  <span class="token key atrule">client</span><span class="token punctuation">:</span>    <span class="token key atrule">config</span><span class="token punctuation">:</span>      <span class="token key atrule">stock</span><span class="token punctuation">:</span>  <span class="token comment"># æœåŠ¡å</span>        <span class="token key atrule">readTimeout</span><span class="token punctuation">:</span> <span class="token number">1000</span>    <span class="token comment"># å“åº”æ—¶é—´1sï¼Œæ²¡å“åº”ç›´æ¥æŠ¥é”™</span></code></pre><p>å½“è¶…æ—¶åï¼ŒæŠ›å‡ºçš„é”™è¯¯ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/a8f173f789a041dca9e3dd382fbdd881.png" alt="image.png"></p><p><strong>Psï¼šè¿™é‡ŒåŒºåˆ†ç‰ˆæœ¬ï¼Œä¹‹å‰çš„ç‰ˆæœ¬ï¼ŒOpenFeignçš„è¶…æ—¶æ—¶é—´æ˜¯1sï¼Œç°åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ5séƒ½æ²¡è¶…æ—¶ï¼</strong></p><p><strong>ä¹Ÿå¯èƒ½å­˜åœ¨ä¸€ä¸ªæƒ…å†µï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šåˆå§‹åŒ–ï¼Œé€Ÿåº¦å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ã€‚</strong></p><p>å…¶æ¬¡ï¼ŒOpenFeignä¹Ÿæä¾›äº†å…¨å±€ï¼ˆé»˜è®¤ã€ç¼ºçœï¼‰çš„é…ç½®æ–¹å¼</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">feign</span><span class="token punctuation">:</span>  <span class="token key atrule">client</span><span class="token punctuation">:</span>    <span class="token key atrule">config</span><span class="token punctuation">:</span>      <span class="token key atrule">default</span><span class="token punctuation">:</span>  <span class="token comment"># é»˜è®¤çš„é…ç½®ï¼Œä¼˜å…ˆçº§ä½</span>        <span class="token key atrule">read-timeout</span><span class="token punctuation">:</span> <span class="token number">2000</span>      <span class="token key atrule">stock</span><span class="token punctuation">:</span>  <span class="token comment"># ç»†ç²’åº¦é’ˆå¯¹æœåŠ¡çš„é…ç½®ï¼Œä¼˜å…ˆçº§é«˜</span>        <span class="token key atrule">readTimeout</span><span class="token punctuation">:</span> <span class="token number">6000</span></code></pre></blockquote><h3 id="4-3-2-OpenFeignçš„åº•å±‚æŠ€æœ¯">4.3.2 OpenFeignçš„åº•å±‚æŠ€æœ¯</h3><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå’±ä»¬å½“å‰ç‰ˆæœ¬çš„OpenFeignåº•å±‚ä½¿ç”¨çš„HttpClient4ã€‚</p><p>å’±ä»¬å¯ä»¥é€šè¿‡é…ç½®å»é€‰æ‹©ä½¿ç”¨okHttpæˆ–è€…æ˜¯HC5ï¼ˆHttpClient5ï¼‰</p><p>å’±ä»¬æ˜¯ä¸‰é€‰ä¸€ï¼šokHttpï¼ŒHttpClient4ï¼ŒHC5ã€‚</p><p>åŒºåˆ«çš„è¯ï¼Œæµ…èŠä¸€ä¸‹ï¼š</p><ul><li>åè®®çš„æ”¯æŒï¼šokHttpï¼ŒHC5å¯¹åè®®æ”¯æŒçš„æ›´å¥½ã€‚</li><li>æ€§èƒ½ï¼šç›¸å¯¹æ¥è¯´ï¼Œå…¶å®å¤§å·®ä¸å·®ï¼Œä½†æ˜¯è¿˜æ˜¯okHttpï¼ŒHC5çš„æ€§èƒ½æ›´å¥½ã€‚</li><li>ä»£ç ç®€æ´åº¦ï¼šå…¶å®å’±ä»¬ç”¨äº†OpenFeignå°±æ— æ‰€è°“äº†ã€‚</li><li>å¼‚æ­¥çš„æ”¯æŒï¼šéƒ½æ”¯æŒï¼</li><li>okHttpæ˜¯Squareç»´æŠ¤çš„ï¼Œè€ŒHttpClientï¼ŒHC5æ˜¯Apacheçš„ã€‚</li></ul><p>é»˜è®¤é‡‡ç”¨çš„æ˜¯HttpClient4ï¼š</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">feign</span><span class="token punctuation">:</span>  <span class="token key atrule">httpclient</span><span class="token punctuation">:</span>    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>   <span class="token comment"># é»˜è®¤ä½¿ç”¨çš„HttpClient</span></code></pre><p>å°†é…ç½®æ›´æ”¹ä¸ºä½¿ç”¨HC5</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">feign</span><span class="token punctuation">:</span>  <span class="token key atrule">httpclient</span><span class="token punctuation">:</span>    <span class="token key atrule">hc5</span><span class="token punctuation">:</span>      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>   <span class="token comment"># å°±ä¼šé‡‡ç”¨HC5çš„æ–¹å¼è®¿é—®ç›®æ ‡æœåŠ¡</span></code></pre><p>å°†é…ç½®ä¿®æ”¹ä¸ºokHttp</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">feign</span><span class="token punctuation">:</span>  <span class="token key atrule">okhttp</span><span class="token punctuation">:</span>    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre></blockquote><h1>äº”ã€Sentinel</h1><h2 id="5-1-Sentinelä»‹ç»">5.1 Sentinelä»‹ç»</h2><blockquote><p>Sentinelå¸®åŠ©å’±ä»¬è§£å†³çš„é—®é¢˜æ ¸å¿ƒæ–¹å‘æœ‰ä¸¤ä¸ªï¼š</p><ul><li><strong>æµé‡æ§åˆ¶ï¼š</strong> å¯ä»¥å®ç°é™æµçš„åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿä¸°å¯Œäº†é™æµçš„æœºåˆ¶ï¼Œè¿˜æä¾›äº†è¾¾åˆ°é™åˆ¶çš„é˜ˆå€¼åï¼Œå¦‚ä½•å¤„ç†åç»­çš„è¯·æ±‚ã€‚</li><li><strong>æ–­è·¯å™¨ã€ç†”æ–­ï¼š</strong> æœ¬è´¨æ˜¯å¸®åŠ©å’±ä»¬å»è§£å†³ä¸€äº›æœåŠ¡é›ªå´©çš„é—®é¢˜ï¼ŒåŒæ—¶å’±ä»¬å¯ä»¥ä¸»åŠ¨çš„æŒ‡å®šå¥½é™çº§æ–¹æ³•ï¼Œè¿”å›å¯¹åº”çš„æ‰˜åº•æ•°æ®ã€‚</li></ul><p>å¯ä»¥å»å®˜ç½‘çœ‹ä¸€ä¸‹ã€‚</p><p><a href="https://sentinelguard.io/zh-cn/index.html">https://sentinelguard.io/zh-cn/index.html</a></p><p>å®˜æ–¹æ–‡æ¡£çš„ä»‹ç»ï¼Œå¯ä»¥çœ‹è¿™ä¸ª</p><p><a href="https://sentinelguard.io/zh-cn/docs/introduction.html">https://sentinelguard.io/zh-cn/docs/introduction.html</a></p></blockquote><h2 id="5-2-Sentinelå®‰è£…">5.2 Sentinelå®‰è£…</h2><blockquote><p>Sentinelä¾ç„¶æ˜¯ç”¨Javaè¯­è¨€ç¼–å†™çš„ï¼Œå’±ä»¬å®‰è£…Sentinelï¼Œå…¶å®æœ¬è´¨å°±æ˜¯ä¸‹è½½ä¸€ä¸ªjaråŒ…ï¼Œç„¶åç”¨java -jarè¿è¡Œèµ·æ¥å°±å¯ä»¥ç™»å½•åˆ°å›¾å½¢åŒ–ç•Œé¢ã€‚</p><p>ä¾ç„¶å»å®˜æ–¹çœ‹æ–‡æ¡£å®‰è£…ã€‚æŸ¥çœ‹åï¼Œæ˜¯åœ¨githubä¸Šå»ä¸‹è½½å¯¹åº”çš„releaseç‰ˆæœ¬</p><p><a href="https://github.com/alibaba/Sentinel/tags">https://github.com/alibaba/Sentinel/tags</a></p><p><strong>ä¸‹è½½å®Œæ¯•ä¹‹åï¼Œåœ¨ç¡®å®šå¥½ä½ çš„JDKç¯å¢ƒæ²¡é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œå¹¶ä¸”JDKç‰ˆæœ¬æœ€å¥½æ˜¯1.8</strong></p><p><strong>æš‚æ—¶åˆ«å¼„17å’Œ21ä¹‹ç±»çš„ç‰ˆæœ¬ï¼Œæœ€é«˜ä¸ºå¸ˆèƒ½æ¥å—JDK11ã€‚</strong></p><p><strong>åŒæ—¶ä¹Ÿè¦ç¡®è®¤å¥½ï¼Œå½“å‰ç³»ç»Ÿçš„éƒ½8080ç«¯å£æ²¡è¢«å ç”¨ï¼ŒSentinelé»˜è®¤å ç”¨8080ã€‚</strong></p><p>ç„¶åå°±å¯ä»¥åœ¨cmdçª—å£ä¸­ï¼ŒåŸºäº</p><pre class="language-powershell" data-language="powershell"><code class="language-powershell">java <span class="token operator">-</span>jar sentinel-dashboard-1<span class="token punctuation">.</span>8<span class="token punctuation">.</span>7</code></pre><p>å¯åŠ¨Sentinelé¡¹ç›®ã€‚</p><p><strong>Psï¼šå› ä¸ºWindowså¯åŠ¨ç¨‹åºå¯èƒ½ä¼šå­˜åœ¨ä¸€äº›å°é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘åˆšæ‰ï¼Œåœ¨å¯åŠ¨åï¼Œéœ€è¦æŒ‰ä¸€ä¸‹Ctrl + Cè®©ç¨‹åºç»§ç»­åŠ è½½ï¼Œæ‰å¯ä»¥æ­£å¸¸çš„è®¿é—®åˆ°Sentinelçš„å®˜æ–¹ã€‚</strong></p><p>ç›´æ¥è®¿é—®ï¼š <a href="http://localhost:8080/">http://localhost:8080/</a></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/2a4749321bac40c099ffc9a2aba2880b.png" alt="image.png"></p><p><strong>é»˜è®¤çš„ç”¨æˆ·åå’Œå¯†ç éƒ½æ˜¯ sentinel  ï¼ˆéƒ½æ˜¯å°å†™ï¼‰</strong></p><p>è¿›å…¥åï¼Œçœ‹åˆ°è¿™ä¸ªå°±æ˜¯å®‰è£…æˆåŠŸ</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/b10b9a0ec8d64d54b55ba934fde70320.png" alt="image.png"></p></blockquote><h2 id="5-3-Sentinelåˆä½“éªŒ">5.3 Sentinelåˆä½“éªŒ</h2><blockquote><p>1ã€å¯¼å…¥ä¾èµ–</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-alibaba-sentinel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>2ã€ç¼–å†™é…ç½®è¿æ¥Sentinelçš„dashboard</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>      <span class="token key atrule">transport</span><span class="token punctuation">:</span>        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8719</span>        <span class="token key atrule">dashboard</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8080</span></code></pre><p>3ã€å¯åŠ¨é¡¹ç›®åè®¿é—®ä»»ä½•æ¥å£ï¼Œä¸è®¿é—®ï¼Œdashboardä¸Šçœ‹ä¸åˆ°</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/8b7c626b926a497bb056b1042306d6a1.png" alt="image.png"></p><p>4ã€Sentinelçš„dashboardä¸ŠæŸ¥çœ‹æœåŠ¡</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/04b01a2efa324238a93e18b6ca897c75.png" alt="image.png"></p></blockquote><h2 id="5-4-æµæ§è§„åˆ™">5.4 æµæ§è§„åˆ™</h2><blockquote><p>è¿™é‡Œä¸»è¦çš„æ“ä½œå°±æ˜¯ç‚¹æ¥ç‚¹å»ã€‚</p><p>åœ¨è®¾ç½®æµæ§è§„åˆ™æ—¶ï¼Œå‘ç°éœ€è¦è®¾ç½®ä¸€ä¸ªèµ„æºåï¼Œå’±ä»¬æœ‰ä¸¤ä¸ªæ–¹å¼å¯ä»¥é€‰æ‹©</p><ul><li><p>é»˜è®¤çš„èµ„æºåå°±æ˜¯è¿™ä¸ªèµ„æºåœ°å€ã€‚</p></li><li><p>å¯ä»¥åœ¨Controlleræ¥å£ï¼ˆæ–¹æ³•ï¼‰è¿½åŠ @SentinelResourceçš„æ³¨è§£ï¼ŒæŒ‡å®šèµ„æºå</p><pre class="language-none"><code class="language-none">@GetMapping(&quot;&#x2F;order&#x2F;info&quot;)@SentinelResource(value &#x3D; &quot;info&quot;)public String info() &#123;    return info;&#125;</code></pre></li></ul></blockquote><hr><h3 id="5-4-1-QPSé™åˆ¶">5.4.1 QPSé™åˆ¶</h3><h4 id="5-4-1-1-ç›´æ¥-å¿«é€Ÿå¤±è´¥">5.4.1.1 ç›´æ¥-å¿«é€Ÿå¤±è´¥</h4><blockquote><p><strong>é˜ˆå€¼ç±»å‹ï¼šQPS               å•ä½“é˜ˆå€¼ï¼š1</strong></p><p><strong>æµæ§æ¨¡å¼ï¼šç›´æ¥</strong></p><p><strong>æµæ§æ•ˆæœï¼šå¿«é€Ÿå¤±è´¥</strong></p><p>åªè¦æ¯ç§’è¶…è¿‡2ä¸ªè¯·æ±‚ï¼Œç¬¬äºŒä¸ªè¯·æ±‚å°±ä¼šè§¦å‘å¿«é€Ÿå¤±è´¥ï¼Œç›´æ¥æŠ¥é”™~</p></blockquote><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/a21baf974ef2402b97b11b66adc86378.png" alt="image.png"><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/c489603170e243cf948bdc25b23aadf4.png" alt="image.png"></p><h4 id="5-4-1-2-ç›´æ¥-WarmUp">5.4.1.2 ç›´æ¥-WarmUp</h4><blockquote><p><strong>é˜ˆå€¼ç±»å‹ï¼šQPS               å•ä½“é˜ˆå€¼ï¼š10</strong></p><p><strong>æµæ§æ¨¡å¼ï¼šç›´æ¥</strong></p><p><strong>æµæ§æ•ˆæœï¼šWarmUp</strong></p><p>æ¥å£å¹¶ä¸ä¼šä¸€å¼€å§‹å°±æ”¯æ’‘10çš„QPSï¼Œæ…¢æ…¢çš„ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´ï¼Œæ‰ä¼šå°†QPSé™åˆ¶å¼€æ”¾åˆ°10ã€‚</p></blockquote><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/89540f18ec834b0490d1c60defc03a3b.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/209ac1c4ee65423bb34de74920b97a79.png" alt="image.png"></p><h4 id="5-4-1-3-ç›´æ¥-æ’é˜Ÿç­‰å¾…">5.4.1.3 ç›´æ¥-æ’é˜Ÿç­‰å¾…</h4><blockquote><p><strong>é˜ˆå€¼ç±»å‹ï¼šQPS               å•ä½“é˜ˆå€¼ï¼š2</strong></p><p><strong>æµæ§æ¨¡å¼ï¼šç›´æ¥</strong></p><p><strong>æµæ§æ•ˆæœï¼šæ’é˜Ÿç­‰å¾…</strong></p><p>QPSé™åˆ¶ä¸º2çš„æ—¶å€™ï¼Œä»–ä¼šåŒ€é€Ÿçš„æ¯ä¸ª500msï¼Œæ”¾ä¸€ä¸ªè¯·æ±‚è¿›å»ã€‚</p></blockquote><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/95039968590345a5a2f89956886145ae.png" alt="image.png"><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/988f73b9c1884d8d9309879fe0796b28.png" alt="image.png"></p><h4 id="5-4-1-4-å…³è”-å¿«é€Ÿå¤±è´¥">5.4.1.4 å…³è”-å¿«é€Ÿå¤±è´¥</h4><blockquote><p><strong>é˜ˆå€¼ç±»å‹ï¼šQPS               å•ä½“é˜ˆå€¼ï¼š2</strong></p><p><strong>æµæ§æ¨¡å¼ï¼šå…³è”</strong></p><p><strong>æµæ§æ•ˆæœï¼šå¿«é€Ÿå¤±è´¥</strong></p><p>é¦–å…ˆéœ€è¦å‡†å¤‡ä¸¤ä¸ªèµ„æºæŸ¥çœ‹æ•ˆæœ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/order/info"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"info"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> info<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/order/add"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"add"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">"add"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç»™infoèµ„æºè®¾ç½®QPSé™åˆ¶ä¸º1ï¼Œå…³è”çš„æ˜¯addèµ„æºã€‚ å½“é¢‘ç¹çš„è®¿é—®addèµ„æºåï¼Œinfoå°±ä¼šè¢«é™åˆ¶ã€‚</p></blockquote><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/c564ee78b7134fe8b71a2ff66d5acc65.png" alt="image.png"><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/d951c083d5a8426f9e5db3e940bab0d4.png" alt="image.png"></p><h4 id="5-4-1-5-é“¾è·¯-å¿«é€Ÿå¤±è´¥">5.4.1.5 é“¾è·¯-å¿«é€Ÿå¤±è´¥</h4><blockquote><p><strong>é˜ˆå€¼ç±»å‹ï¼šQPS               å•ä½“é˜ˆå€¼ï¼š1</strong></p><p><strong>æµæ§æ¨¡å¼ï¼šé“¾è·¯</strong></p><p><strong>æµæ§æ•ˆæœï¼šå¿«é€Ÿå¤±è´¥</strong></p><p>éœ€è¦å‡†å¤‡ä¸‰ä¸ªèµ„æºï¼Œå…¶ä¸­ä¸¤ä¸ªèµ„æºä½œä¸ºå…¥å£ï¼Œå¦å¤–ä¸€ä¸ªèµ„æºä½œä¸ºå…¬å…±èµ„æºè¢«è®¿é—®</p><p><strong>Psï¼šControllerä¸­çš„æ–¹æ³•é»˜è®¤å°±æ˜¯èµ„æºï¼Œå…¶æ¬¡å…¶ä»–åŸºäºSpringç®¡ç†çš„æ–¹æ³•ä¹Ÿå¯ä»¥ä½œä¸ºèµ„æºï¼Œåªæ˜¯å¿…é¡»è¦è¿½åŠ ä¸ŠSentinelçš„æ³¨è§£æ‰å¯ä»¥ã€‚</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Autowired</span><span class="token keyword">private</span> <span class="token class-name">OrderService</span> orderService<span class="token punctuation">;</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/order/aaa"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"aaa"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">aaa</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    orderService<span class="token punctuation">.</span><span class="token function">common</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"aaa"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/order/bbb"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"bbb"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">bbb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    orderService<span class="token punctuation">.</span><span class="token function">common</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"bbb"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// ====================å…¬å…±èµ„æº=======================</span><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>mashibing<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>csp<span class="token punctuation">.</span>sentinel<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">SentinelResource</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>mashibing<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">OrderService</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">OrderService</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span><span class="token string">"common"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">common</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å‘ç°è®¾ç½®å¥½ä¹‹åï¼Œèµ„æºçš„å…¥å£æ˜¯ç»Ÿä¸€çš„ï¼Œå°±æ˜¯ <strong>sentinel_spring_web_contextï¼Œå¯¼è‡´å’±ä»¬ç°åœ¨æ²¡æœ‰åŠæ³•é’ˆå¯¹æŸä¸ªå…¥å£å•ç‹¬åšé“¾è·¯çš„é™åˆ¶</strong></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/23e03f63b425471aabd3314f1f7896b4.png" alt="image.png"></p><p>å¯ä»¥é€šè¿‡é…ç½®ï¼Œå°†ç»Ÿä¸€å…¥å£ç®¡ç†çš„æ¨¡å¼å…³é—­æ‰ã€‚å°±å¯ä»¥å°†æ¯ä¸ªControllerèµ„æºä½œä¸ºä¸€ä¸ªå…¥å£ã€‚</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>      <span class="token key atrule">web-context-unify</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></code></pre><p>è¿½åŠ å®Œæ¯•åï¼Œé‡æ–°å¯åŠ¨é¡¹ç›®ï¼ŒæŸ¥çœ‹ç°‡ç‚¹é“¾è·¯ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/1959d3729ca9410c8f03feef64665a51.png" alt="image.png">controllerä¸­å·²ç»æœ‰å…¥å£èµ„æºé¡¶å¤´äº†ï¼Œå¯ä»¥å¼€å§‹é…ç½®é“¾è·¯çš„æ•ˆæœäº†ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/b7e83353cdeb47e7a561a0849929903e.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/35a62db47a494c74b5d9bd6c5b654e3d.png" alt="image.png">å…·ä½“è§£å†³é—®é¢˜çš„issueåœ°å€ï¼š</p><p><a href="https://github.com/alibaba/Sentinel/issues/1213">https://github.com/alibaba/Sentinel/issues/1213</a></p></blockquote><h3 id="5-4-2-å¹¶å‘çº¿ç¨‹æ•°">5.4.2 å¹¶å‘çº¿ç¨‹æ•°</h3><blockquote><p>å› ä¸ºæµæ§é‡Œçš„QPSé™åˆ¶èŠçš„æ¨¡å¼åŸºæœ¬éƒ½ç‚¹åˆ°äº†ã€‚</p><p>è¿™é‡Œçš„å¹¶å‘çº¿ç¨‹æ•°çœ‹ä¸ªæ•ˆæœå³å¯ã€‚</p><p><strong>é˜ˆå€¼ç±»å‹ï¼šå¹¶å‘çº¿ç¨‹æ•°               å•ä½“é˜ˆå€¼ï¼š1</strong></p><p><strong>æµæ§æ¨¡å¼ï¼šç›´æ¥</strong></p><p>è¿™ä¸ªèµ„æºå†…éƒ¨åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å¤„ç†ï¼Œå¦‚æœå¦å¤–ä¸€ä¸ªçº¿ç¨‹æ¥äº†ï¼Œéœ€è¦æ’é˜Ÿç­‰å¾…ã€‚</p><p>ä¸ºäº†æŸ¥çœ‹æ•ˆæœï¼Œå°†ä»£ç çš„å¤„ç†æ—¶é—´å»¶é•¿</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/order/info"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"info"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ============å¹¶å‘çº¿ç¨‹æ•°==============</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> info<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre></blockquote><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/0efadf130ef044d8875b7bb684a1b7f8.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/764f98d24ebe4a6dae60374c2513bf4a.png" alt="image.png"></p><h2 id="5-5-ç†”æ–­é™çº§">5.5 ç†”æ–­é™çº§</h2><h3 id="5-5-1-ç†”æ–­é™çº§ä»‹ç»">5.5.1 ç†”æ–­é™çº§ä»‹ç»</h3><blockquote><p>æœåŠ¡é›ªå´©ï¼šå› ä¸ºæŸä¸€ä¸ªæœåŠ¡å‡ºç°é—®é¢˜ï¼Œå¯¼è‡´å…¶ä»–æœåŠ¡ï¼Œç”šè‡³æ•´ä¸ªç³»ç»Ÿå´©æºƒçš„æƒ…å†µï¼Œå°±å¯ä»¥ç§°ä¸ºæœåŠ¡é›ªå´©</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/ee53cb8d384e4718b1738e0a1291cad6.png" alt="image.png"></p><p>ä¸ºäº†è§£å†³è¿™ä¸ªæœåŠ¡é›ªå´©çš„é—®é¢˜ï¼Œå¯ä»¥ä¸Šç†”æ–­ã€é™çº§æ¥è§£å†³è¿™ç§æœåŠ¡é›ªå´©é—®é¢˜</p><p><strong>é™çº§ï¼šé’ˆå¯¹ä¸€äº›èµ„æºï¼Œæä¾›ä¸€ä¸ªé™çº§çš„æ–¹æ³•ï¼Œå½“è¿™ä¸ªèµ„æºå‡ºç°äº†ä¸€äº›é—®é¢˜æ—¶ï¼Œå¯ä»¥å¿«é€Ÿå¤±è´¥ï¼Œå»æ‰§è¡Œé™çº§æ–¹æ³•ï¼Œè¿”å›æ‰˜åº•æ•°æ®ã€‚</strong></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/d564d2f62a3341b193822c77002ee8ab.png" alt="image.png"></p><p><strong>ç†”æ–­ï¼šå°±æ˜¯é’ˆå¯¹æŸä¸ªèµ„æºæä¾›æ–­è·¯å™¨ï¼Œæœ‰Closedï¼ŒOpenï¼ŒHalf OpençŠ¶æ€ã€‚</strong></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/aa99318477e94a79924a5b2a8931f58d.png" alt="image.png"></p><p><strong>Psï¼šç†”æ–­å’Œé™çº§ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œç†”æ–­æ˜¯è§¦å‘é™çº§çš„æ‰‹æ®µä¹‹ä¸€ã€‚</strong></p></blockquote><h3 id="5-5-2-ç†”æ–­è§„åˆ™">5.5.2 ç†”æ–­è§„åˆ™</h3><blockquote><p>Sentinelæä¾›çš„ç†”æ–­è§„åˆ™æœ‰ä¸‰ç§</p><ul><li><p>æ…¢è°ƒç”¨æ¯”ä¾‹ï¼š</p><ul><li>è¯·æ±‚çš„å“åº”æ—¶é—´ï¼Œå¤§äº500msï¼Œå°±è¢«ç»Ÿè®¡ä¸ºæ…¢è°ƒç”¨ã€‚</li><li>åœ¨10så†…ï¼Œè¯·æ±‚æ•°é‡è¾¾åˆ°4ä¸ªï¼Œå¼€å§‹ç»Ÿè®¡ç†”æ–­çš„é˜ˆå€¼ã€‚</li><li>å¦‚æœæ…¢è°ƒç”¨ç»Ÿè®¡è¾¾åˆ°äº†è¯·æ±‚é‡çš„50%ï¼Œå°±ä¼šå°†æ–­è·¯å™¨è®¾ç½®ä¸ºOpençŠ¶æ€ï¼ŒæŒç»­10sã€‚</li><li>10såï¼Œå°†æ–­è·¯å™¨è®¾ç½®ä¸ºHalf OpençŠ¶æ€ï¼Œå¹¶æ”¾ä¸€ä¸ªè¯·æ±‚è¿›æ¥ã€‚<ul><li>è¿™ä¸ªè¯·æ±‚æ˜¯æ…¢è°ƒç”¨ï¼Œé‚£å°±å›åˆ°OpençŠ¶æ€ã€‚</li><li>å¦‚æœå°äºæ…¢è°ƒç”¨ï¼Œè®¾ç½®ä¸ºClosedçŠ¶æ€ã€‚<img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/573cc8ae2318482cbe809568c54de1d8.png" alt="image.png"></li></ul></li></ul></li><li><p>å¼‚å¸¸æ¯”ä¾‹ï¼š</p><ul><li>èµ„æºè®¿é—®å‡ºç°å¼‚å¸¸ï¼Œå°±è®¤å®šæ˜¯å¼‚å¸¸ã€‚</li><li>åœ¨10så†…ï¼Œè¯·æ±‚æ•°é‡è¾¾åˆ°4ä¸ªï¼Œå¼€å§‹ç»Ÿè®¡ç†”æ–­çš„é˜ˆå€¼ã€‚</li><li>å¦‚æœå¼‚å¸¸ç»Ÿè®¡è¾¾åˆ°äº†è¯·æ±‚é‡çš„50%ï¼Œå°±ä¼šå°†æ–­è·¯å™¨è®¾ç½®ä¸ºOpençŠ¶æ€ï¼ŒæŒç»­10sã€‚</li><li>10såï¼Œå°†æ–­è·¯å™¨è®¾ç½®ä¸ºHalf OpençŠ¶æ€ï¼Œå¹¶æ”¾ä¸€ä¸ªè¯·æ±‚è¿›æ¥ã€‚<ul><li>è¿™ä¸ªè¯·æ±‚å‡ºç°å¼‚å¸¸ï¼Œé‚£å°±å›åˆ°OpençŠ¶æ€ã€‚</li><li>å¦‚æœæ²¡å¼‚å¸¸ï¼Œè®¾ç½®ä¸ºClosedçŠ¶æ€ã€‚<img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/25c4eff218a04c7980269926fd1ef70e.png" alt="image.png"></li></ul></li></ul></li><li><p>å¼‚å¸¸æ•°ï¼š</p><ul><li>èµ„æºè®¿é—®å‡ºç°å¼‚å¸¸ï¼Œå°±è®¤å®šæ˜¯å¼‚å¸¸ã€‚</li><li>åœ¨10så†…ï¼Œè¯·æ±‚æ•°é‡è¾¾åˆ°4ä¸ªï¼Œå¼€å§‹ç»Ÿè®¡ç†”æ–­çš„é˜ˆå€¼ã€‚</li><li>å¦‚æœå¼‚å¸¸ç»Ÿè®¡è¾¾åˆ°äº†2ä¸ªï¼Œå°±ä¼šå°†æ–­è·¯å™¨è®¾ç½®ä¸ºOpençŠ¶æ€ï¼ŒæŒç»­10sã€‚</li><li>10såï¼Œå°†æ–­è·¯å™¨è®¾ç½®ä¸ºHalf OpençŠ¶æ€ï¼Œå¹¶æ”¾ä¸€ä¸ªè¯·æ±‚è¿›æ¥ã€‚<ul><li>è¿™ä¸ªè¯·æ±‚å‡ºç°å¼‚å¸¸ï¼Œé‚£å°±å›åˆ°OpençŠ¶æ€ã€‚</li><li>å¦‚æœæ²¡å¼‚å¸¸ï¼Œè®¾ç½®ä¸ºClosedçŠ¶æ€ã€‚<img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/a5cac238dfcd4d0d8558cba5f4f4d624.png" alt="image.png"></li></ul></li></ul></li></ul></blockquote><hr><blockquote><p>1ã€æä¾›ä¸€å¥—æµ‹è¯•ç†”æ–­æ•ˆæœèµ„æºï¼Œæä¾›ä¸€ä¸ªController</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// =================================ç†”æ–­é™çº§===========================</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/order/circuitbreaker"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"circuitbreaker"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">circuitbreaker</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     <span class="token keyword">case</span> <span class="token string">"1"</span><span class="token operator">:</span>         <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">break</span><span class="token punctuation">;</span>     <span class="token keyword">case</span> <span class="token string">"2"</span><span class="token operator">:</span>         <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token keyword">return</span> <span class="token string">"circuitbreaker - success!"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>2ã€å¯åŠ¨é¡¹ç›®å¼€å§‹æµ‹è¯•ï¼</p><p><strong>çœ‹è§†é¢‘æŸ¥çœ‹æµ‹è¯•æ•ˆæœï¼ï¼ï¼ï¼ï¼</strong></p></blockquote><h3 id="5-5-3-é™çº§æ–¹æ³•">5.5.3 é™çº§æ–¹æ³•</h3><h4 id="5-5-3-1-blockHandler">5.5.3.1 blockHandler</h4><blockquote><p>Sentinelä¸­æä¾›çš„é™çº§å¤„ç†æ˜¯åŸºäº@SentinelResourceæ³¨è§£æ¥å®ç°çš„ã€‚</p><p>@SentinelResourceæ˜¯åŸºäºAOPå»å®ç°çš„ï¼ŒSoï¼Œéœ€è¦è®©æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦æ˜¯publicã€‚</p><p>@SentinelResourceæ³¨è§£çš„å±æ€§å†…å®¹æ¯”è¾ƒå¤šï¼Œå’±ä¸€ä¸ªä¸€ä¸ªçœ‹</p><ul><li><strong>blockHandlerï¼š</strong><ul><li><p>blockHandleræ˜¯ä¸“é—¨å¤„ç†BlockExceptionçš„é™çº§æ–¹æ³•ï¼ŒæŒ‡å®šé™çº§æ–¹æ³•åã€‚</p></li><li><p>é™çº§æ–¹æ³•éœ€è¦publicä¿®é¥°</p></li><li><p>è¿”å›ç±»å‹ï¼Œæ–¹æ³•å‚æ•°è¦åŒ¹é…ï¼Œæ–¹æ³•å‚æ•°æœ€åå¯ä»¥è¿½åŠ BlockException</p></li><li><p>é™çº§æ–¹æ³•è·ŸåŸæ–¹æ³•åœ¨ä¸€ä¸ªç±»é‡Œ</p><pre class="language-none"><code class="language-none">@GetMapping(&quot;&#x2F;order&#x2F;sentinel&quot;)@SentinelResource(value &#x3D; &quot;sentinel&quot;,blockHandler &#x3D; &quot;sentinelBlock&quot;)public String sentinel(@RequestParam String value) throws InterruptedException &#123;    &#x2F;&#x2F; ä¸šåŠ¡ä»£ç â€¦â€¦â€¦â€¦â€¦â€¦    return &quot;sentinel - success!&quot;;&#125;   &#x2F;&#x2F; æ˜¯sentinelæ–¹æ³•çš„é™çº§æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ–¹æ³•é€»è¾‘ä¸­è¿”å›æ‰˜åº•æ•°æ®public String sentinelBlock(String value, BlockException exception)&#123;    String message &#x3D; null;    if (exception instanceof FlowException)&#123;        message &#x3D; &quot;æµé‡æ§åˆ¶ï¼&quot;;    &#125;else if (exception instanceof DegradeException)&#123;        message &#x3D; &quot;ç†”æ–­æ§åˆ¶&quot;;    &#125;       return &quot;failed  msg &#x3D; &quot; + message.toString();&#125;</code></pre></li></ul></li><li><strong>BlockHandlerClassï¼š</strong><ul><li><p>è¿™ä¸ªå±æ€§å’ŒBlockHandleré…åˆä½¿ç”¨ï¼Œå¯ä»¥å°†é™çº§æ–¹æ³•å£°æ˜åœ¨å…¶ä»–ç±»é‡Œ</p><pre class="language-none"><code class="language-none">@GetMapping(&quot;&#x2F;order&#x2F;sentinel&quot;)@SentinelResource(value &#x3D; &quot;sentinel&quot;,blockHandlerClass &#x3D; OrderControllerBlock.class,blockHandler &#x3D; &quot;sentinelBlock&quot;)public String sentinel(@RequestParam String value) throws InterruptedException &#123;    &#x2F;&#x2F; ä¸šåŠ¡ä»£ç â€¦â€¦â€¦â€¦â€¦â€¦    return &quot;sentinel - success!&quot;;&#125;&#x2F;&#x2F; &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;public class OrderControllerBlock &#123;       public static String sentinelBlock(String value, BlockException exception)&#123;        String message &#x3D; null;        if (exception instanceof FlowException)&#123;            message &#x3D; &quot;æµé‡æ§åˆ¶ï¼&quot;;        &#125;else if (exception instanceof DegradeException)&#123;            message &#x3D; &quot;ç†”æ–­æ§åˆ¶&quot;;        &#125;           return &quot;failed  msg &#x3D; &quot; + message.toString();    &#125;   &#125;</code></pre></li></ul></li></ul><p><strong>BlockExceptionï¼šå¯¹åº”ç€Sentinelä¸­çš„å‡ ç§é™åˆ¶çš„æ–¹å¼ï¼š</strong></p><ul><li><strong>FlowExceptionï¼šæµæ§</strong></li><li><strong>DegradeExceptionï¼šç†”æ–­</strong></li><li><strong>ParamFlowExceptionï¼šçƒ­ç‚¹</strong></li><li><strong>SystemBlockExceptionï¼šç³»ç»Ÿ</strong></li><li><strong>AuthorityExceptionï¼šæƒé™</strong></li></ul></blockquote><hr><h4 id="5-5-3-2-fallback">5.5.3.2 fallback</h4><blockquote><p>fallbackçš„ä½¿ç”¨è·ŸblockHandlerå°±æ˜¯ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯blockHandleråªå¤„ç†BlockExceptionã€‚è€Œfallbackç›´æ¥å¤„ç†Throwableã€‚</p><ul><li>fallbackï¼šæŒ‡å®šé™çº§æ–¹æ³•åç§°</li><li>fallbackClassï¼šæŒ‡å®šé™çº§æ–¹æ³•æ‰€åœ¨çš„Class</li></ul><p><strong>Psï¼šè‹¥ blockHandler å’Œ fallback éƒ½è¿›è¡Œäº†é…ç½®ï¼Œåˆ™è¢«é™æµé™çº§è€ŒæŠ›å‡º <code>BlockException</code> æ—¶åªä¼šè¿›å…¥ <code>blockHandler</code> å¤„ç†é€»è¾‘ã€‚</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/order/sentinel"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"sentinel"</span><span class="token punctuation">,</span>fallback <span class="token operator">=</span> <span class="token string">"sentinelFallback"</span><span class="token punctuation">,</span>blockHandler <span class="token operator">=</span> <span class="token string">"sentinelBlock"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sentinel</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">switch</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">case</span> <span class="token string">"1"</span><span class="token operator">:</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token keyword">case</span> <span class="token string">"2"</span><span class="token operator">:</span>            <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token string">"sentinel - success!"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sentinelFallback</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">,</span><span class="token class-name">Throwable</span> ex<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">"failed"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// æ˜¯sentinelæ–¹æ³•çš„é™çº§æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ–¹æ³•é€»è¾‘ä¸­è¿”å›æ‰˜åº•æ•°æ®</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sentinelBlock</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token class-name">BlockException</span> exception<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>exception <span class="token keyword">instanceof</span> <span class="token class-name">FlowException</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        message <span class="token operator">=</span> <span class="token string">"æµé‡æ§åˆ¶ï¼"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>exception <span class="token keyword">instanceof</span> <span class="token class-name">DegradeException</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        message <span class="token operator">=</span> <span class="token string">"ç†”æ–­æ§åˆ¶"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token string">"failed  msg = "</span> <span class="token operator">+</span> message<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre></blockquote><hr><h4 id="5-5-3-3-defaultFallback-exceptionsToIgnore">5.5.3.3 defaultFallback&amp;exceptionsToIgnore</h4><blockquote><p>fallbackåªèƒ½é’ˆå¯¹å•ä¸ªèµ„æºå»ç©ï¼ŒdefaultFallbackå¯ä»¥é’ˆå¯¹å…¨å±€ã€‚</p><ul><li>defaultFallbackï¼šæŒ‡å®šé»˜è®¤çš„é™çº§æ–¹æ³•åç§°<ul><li>è¿”å›ç»“æœä¾ç„¶è¦ç»Ÿä¸€</li><li>å‚æ•°åˆ—è¡¨è¦ä¸ºç©ºï¼Œå¯ä»¥é¢å¤–è¿½åŠ ä¸€ä¸ªThrowable</li></ul></li><li>fallbackClassï¼šæŒ‡å®šé™çº§æ–¹æ³•æ‰€åœ¨çš„Class</li></ul><p>exceptionsToIgnoreæ˜¯é’ˆå¯¹fallbackçš„ï¼Œå¯ä»¥å¿½ç•¥æ‰ä¸€äº›å¼‚å¸¸ä¸èµ°é™çº§æ–¹æ³•</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/order/sentinel"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"sentinel"</span><span class="token punctuation">,</span>defaultFallback <span class="token operator">=</span> <span class="token string">"defaultFallback"</span><span class="token punctuation">,</span>exceptionsToIgnore <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sentinel</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">switch</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">case</span> <span class="token string">"1"</span><span class="token operator">:</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token keyword">case</span> <span class="token string">"2"</span><span class="token operator">:</span>            <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token string">"sentinel - success!"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//==================é»˜è®¤çš„fallback=======================</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">defaultFallback</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> ex<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">"failed msg = "</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre></blockquote><h2 id="5-6-çƒ­ç‚¹è§„åˆ™ï¼ˆäº†è§£ï¼‰">5.6 çƒ­ç‚¹è§„åˆ™ï¼ˆäº†è§£ï¼‰</h2><blockquote><p>çƒ­ç‚¹è§„åˆ™ä¹Ÿå±äºæµæ§çš„èŒƒç•´ã€‚</p><p>å› ä¸ºæµæ§è§„åˆ™æ˜¯é’ˆå¯¹æ•´ä¸ªèµ„æºç›´æ¥åšä¸€äº›é™åˆ¶ã€‚</p><p>è€Œçƒ­ç‚¹è§„åˆ™å¯ä»¥é’ˆå¯¹æŸä¸€ä¸ªå­—æ®µä¸­çš„å‚æ•°åšä¸€äº›æ›´ç»†ç²’åº¦åŒ–çš„æµæ§ã€‚</p><p>Sentinelå¯ä»¥æ ¹æ®èµ„æºå†…ä¼ å…¥çš„æŒ‡å®šå‚æ•°ï¼Œæ¥åšçƒ­ç‚¹å‚æ•°çš„é™æµï¼ŒSentinelä¼šå¸®ä½ ç»Ÿè®¡å•ä½æ—¶é—´å†…è¿™ä¸ªå‚æ•°å€¼è¯·æ±‚çš„æ¬¡æ•° <strong>ï¼ˆåˆ©ç”¨LRU + æ»‘åŠ¨æ—¶é—´çª—å£ï¼‰</strong> ï¼Œå†åˆ©ç”¨ <strong>ä»¤ç‰Œæ¡¶</strong> æ¥å®ç°å…·ä½“çš„é™æµæ“ä½œã€‚</p><p>ä¸ºäº†æŸ¥çœ‹æ•ˆæœï¼Œéœ€è¦æä¾›ä¸€ä¸ªèµ„æºï¼Œæ¥æ”¶ä¿©ä¸ªå‚æ•°~</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//==================çƒ­ç‚¹è§„åˆ™=======================</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/order/hot"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"hot"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hot</span><span class="token punctuation">(</span><span class="token class-name">String</span> userId<span class="token punctuation">,</span><span class="token class-name">Integer</span> type<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">"userId:"</span> <span class="token operator">+</span> userId <span class="token operator">+</span> <span class="token string">",type:"</span> <span class="token operator">+</span> type<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre></blockquote><hr><blockquote><p>æ ¹æ®ä¸Šè¿°ç¼–å†™çš„èµ„æºï¼Œæ ¹æ®userIdä½œä¸ºé™æµçš„å‚æ•°ã€‚</p><p>å½“userIdå€¼ä¼ é€’çš„ä¸€æ ·æ—¶ï¼ŒSentinelä¼šç»Ÿè®¡å¥½æ¬¡æ•°ï¼ŒåŸºäºQPSçš„æ–¹å¼åšé™åˆ¶ã€‚</p><p>åœ¨ <strong>ç»Ÿè®¡çª—å£æ—¶é•¿</strong> æ—¶ ï¼Œå½“ç„¶ <strong>çƒ­ç‚¹å‚æ•°å€¼</strong> æœ€å¤šå¯ä»¥è¯·æ±‚ <strong>å•å‡»é˜ˆå€¼</strong> æ¬¡ï¼Œè¶…è¿‡äº†å°±å¼‚å¸¸ï¼</p></blockquote><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/f4052d20aa9743fd95d8e609b4346814.png" alt="image.png"></p><hr><blockquote><p>å¯ä»¥é’ˆå¯¹å‚æ•°çš„å…·ä½“å€¼ï¼Œå†åšæ›´ç»†ç²’åº¦åŒ–çš„é™åˆ¶ï¼</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/e9f9527343904ff99d9a236ae4ec1621.png" alt="image.png"></p></blockquote><hr><blockquote><p>æµ‹è¯•äº†ä¸€æ³¢Sentinelçƒ­ç‚¹è§„åˆ™å¯¹äºæ¥å—å‚æ•°çš„å½¢å¼</p><ul><li>é»˜è®¤èµ„æºå†…åŸºäºå•ä¸ªç±»å‹çš„å‚æ•°æ¥æ”¶æ˜¯æ²¡é—®é¢˜çš„ï¼ŒåŒ…æ‹¬@RequestParamï¼Œ@PathVariable</li><li>é»˜è®¤å¦‚æœé‡‡ç”¨å¯¹è±¡çš„å½¢å¼æ¥æ”¶å‚æ•°ï¼Œçƒ­ç‚¹è§„åˆ™æ²¡æ³•ç”Ÿæ•ˆâ€¦â€¦</li></ul></blockquote><h2 id="5-7-æˆæƒè§„åˆ™ï¼ˆäº†è§£ï¼‰">5.7 æˆæƒè§„åˆ™ï¼ˆäº†è§£ï¼‰</h2><blockquote><p>æ‰€è°“çš„æˆæƒè§„åˆ™ï¼Œå…¶å®å°±æ˜¯é’ˆå¯¹æŸä¸€ä¸ªèµ„æºçš„è°ƒç”¨æ–¹çš„èº«ä»½åšéªŒè¯ã€‚</p><p>å¯ä»¥æŒ‡å®šé»‘ã€ç™½åå•ï¼ˆæŒ‡å®šä¸€ä¸ªï¼‰ï¼Œåªè¦æ»¡è¶³è¦æ±‚æ‰ä¼šæ”¾è¡Œè¯·æ±‚ï¼Œå¦åˆ™ä¼šè¢«æ‹¦æˆªã€‚</p><p>ä¼˜å…ˆå‡†å¤‡ä¸€ä¸ªèµ„æºæ¥æµ‹è¯•ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//==================æˆæƒè§„åˆ™=======================</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/order/author"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"author"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">author</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">"author!"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è®¾ç½®å¥½é»‘ç™½åå•åï¼Œå‘ç°æ— æ³•ç”Ÿæ•ˆã€‚</p><p>å½“ç„¶æœåŠ¡èµ„æºåœ¨åšé»‘ç™½æ˜æ˜¾çš„é™åˆ¶è§„åˆ™æ—¶ï¼ŒSentinelä¼šåŸºäºæ‹¦æˆªå™¨å†…éƒ¨è°ƒç”¨RequestOriginParserçš„å®ç°ç±»å»è·å–è¯·æ±‚æ¥æºçš„å…·ä½“èº«ä»½ä¿¡æ¯ã€‚å› ä¸ºæ²¡æœ‰é»˜è®¤å®ç°çš„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»–è¿”å›çš„éƒ½æ˜¯ç©ºä¸²ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/1b2e76913e304fb491937a81e8d61c3f.png" alt="image.png"></p><p>é‚£å’±ä»¬éœ€è¦ä¸»åŠ¨å®ç°ä¸€ä¸ªRequestOriginParserå®ç°ç±»ï¼Œç›´æ¥åŸºäºè¯·æ±‚å¤´è·å–originä¸­çš„ä¿¡æ¯ä½œä¸ºè°ƒç”¨æ–¹çš„èº«ä»½ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>mashibing<span class="token punctuation">.</span>author</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>csp<span class="token punctuation">.</span>sentinel<span class="token punctuation">.</span>adapter<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>webmvc<span class="token punctuation">.</span>callback<span class="token punctuation">.</span></span><span class="token class-name">RequestOriginParser</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SentinelOriginParser</span> <span class="token keyword">implements</span> <span class="token class-name">RequestOriginParser</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">parseOrigin</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> origin <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"origin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> origin<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç¼–å†™åä¹‹åï¼Œåœ¨postmanä¸­å‘é€è¯·æ±‚ï¼Œåœ¨è¯·æ±‚å¤´ä¸­è¿½åŠ äº†originä¿¡æ¯ï¼Œæºå¸¦ä¸Šäº†èº«ä»½ï¼Œç„¶åå®ç°äº†æˆæƒçš„è§„åˆ™æ ¡éªŒã€‚</p><p>è·å–è°ƒç”¨æ–¹èº«ä»½æ˜¯åŸºäºSentinelOriginParseræ‹¿åˆ°çš„ï¼Œè€Œæ ¡éªŒçš„æ–¹å¼å°±æ˜¯åŸºäºindexOfæŸ¥çœ‹Sentinelä¸­è®¾ç½®çš„æˆæƒçš„é»‘ç™½åå•èº«ä»½æ˜¯å¦åŒ…å«äº†SentinelOriginParserè·å–çš„ä¿¡æ¯ã€‚</p></blockquote><h2 id="5-8-ç³»ç»Ÿè§„åˆ™ï¼ˆäº†è§£ï¼‰">5.8 ç³»ç»Ÿè§„åˆ™ï¼ˆäº†è§£ï¼‰</h2><blockquote><p>ç³»ç»Ÿè§„åˆ™ä¸æ˜¯é’ˆå¯¹æŸä¸€ä¸ªèµ„æºå»åšé™åˆ¶ï¼Œè€Œæ˜¯é’ˆå¯¹æ•´ä¸ªæœåŠ¡çš„æ‰€æœ‰èµ„æºç»Ÿä¸€çš„åšä¸€äº›é™åˆ¶ã€‚</p><p>ç³»ç»Ÿè§„åˆ™çš„ç›®çš„æ˜¯è®©æ•´ä¸ªç³»ç»Ÿä¿æŒå¯ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šå› ä¸ºæŸä¸€äº›èµ„æºçš„æ¿€å¢æµé‡å¯¼è‡´æ•´ä¸ªç³»ç»Ÿè¢«å‹å®ã€‚</p><p>ç³»ç»Ÿè§„åˆ™æ”¯æŒä»¥ä¸‹çš„æ¨¡å¼ï¼š</p><ul><li><strong>Load è‡ªé€‚åº”</strong> ï¼ˆä»…å¯¹ Linux/Unix-like æœºå™¨ç”Ÿæ•ˆï¼‰ï¼šç³»ç»Ÿçš„ load1 ä½œä¸ºå¯å‘æŒ‡æ ‡ï¼Œè¿›è¡Œè‡ªé€‚åº”ç³»ç»Ÿä¿æŠ¤ã€‚å½“ç³»ç»Ÿ load1 è¶…è¿‡è®¾å®šçš„å¯å‘å€¼ï¼Œä¸”ç³»ç»Ÿå½“å‰çš„å¹¶å‘çº¿ç¨‹æ•°è¶…è¿‡ä¼°ç®—çš„ç³»ç»Ÿå®¹é‡æ—¶æ‰ä¼šè§¦å‘ç³»ç»Ÿä¿æŠ¤ï¼ˆBBR é˜¶æ®µï¼‰ã€‚ç³»ç»Ÿå®¹é‡ç”±ç³»ç»Ÿçš„ <code>maxQps * minRt</code> ä¼°ç®—å¾—å‡ºã€‚è®¾å®šå‚è€ƒå€¼ä¸€èˆ¬æ˜¯ <code>CPU cores * 2.5</code>ã€‚</li><li><strong>CPU usage</strong> ï¼ˆ1.5.0+ ç‰ˆæœ¬ï¼‰ï¼šå½“ç³»ç»Ÿ CPU ä½¿ç”¨ç‡è¶…è¿‡é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ï¼ˆå–å€¼èŒƒå›´ 0.0-1.0ï¼‰ï¼Œæ¯”è¾ƒçµæ•ã€‚</li><li><strong>å¹³å‡ RT</strong> ï¼šå½“å•å°æœºå™¨ä¸Šæ‰€æœ‰å…¥å£æµé‡çš„å¹³å‡ RT è¾¾åˆ°é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚</li><li><strong>å¹¶å‘çº¿ç¨‹æ•°</strong> ï¼šå½“å•å°æœºå™¨ä¸Šæ‰€æœ‰å…¥å£æµé‡çš„å¹¶å‘çº¿ç¨‹æ•°è¾¾åˆ°é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ã€‚</li><li><strong>å…¥å£ QPS</strong> ï¼šå½“å•å°æœºå™¨ä¸Šæ‰€æœ‰å…¥å£æµé‡çš„ QPS è¾¾åˆ°é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ã€‚5.9 SentinelæŒä¹…åŒ–</li></ul></blockquote><h2 id="5-9-åŠ¨æ€è§„åˆ™ã€æŒä¹…åŒ–">5.9 åŠ¨æ€è§„åˆ™ã€æŒä¹…åŒ–</h2><blockquote><p>åœ¨Sentinelçš„å›¾å½¢åŒ–ç•Œé¢ä¸­é…ç½®çš„å„ç§è§„åˆ™ï¼Œéƒ½æ˜¯å­˜å‚¨åœ¨å†…å­˜é‡Œçš„ï¼Œä¹‹å‰é…ç½®çš„å„ç§è§„åˆ™å°±å…¨ä¹ˆå¾—äº†ã€‚</p><p>ä¸å¯èƒ½æ¯æ¬¡é¡¹ç›®é‡å¯åï¼Œéƒ½å»é‡æ–°æŒ‡å®šè¿™äº›è§„åˆ™ï¼Œæˆæœ¬å¤ªé«˜äº†ã€‚</p><p>Sentinelä¹Ÿæ”¯æŒå°†ä¸€äº›è§„åˆ™æŒä¹…åŒ–åˆ°æŸä¸ªDataSourceã€‚DataSourceçš„ç§ç±»å¾ˆå¤šã€‚å¤§æ¦‚åˆ†ä¸ºäº†ä¸¤ç§</p><ul><li>æ‹‰æ¨¡å¼ï¼šå®¢æˆ·ç«¯ä¸»åŠ¨å»æŸ¥çœ‹æ˜¯å¦å˜åŒ–ï¼Œç¼ºç‚¹æ˜¯æ— æ³•åŠæ—¶è·å–å˜æ›´ã€‚</li><li>æ¨æ¨¡å¼ï¼šDataSourceä¸»åŠ¨å»é€šçŸ¥å®¢æˆ·ç«¯å˜åŒ–çš„å†…å®¹ï¼Œæœ‰æ›´å¥½çš„å®æ—¶æ€§å’Œä¸€è‡´æ€§ä¿è¯ã€‚</li></ul><p>å…¶ä¸­Nacoså°±æ˜¯æ¨æ¨¡å¼çš„ä¸€ç§å®ç°ï¼Œç›´æ¥åŸºäºNacosæ¥æŒä¹…åŒ–Sentinelä¸­çš„è§„åˆ™ã€‚</p></blockquote><hr><blockquote><p>å®ç°æ­¥éª¤ï¼š</p><p>1ã€å¯¼å…¥ä¾èµ–</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.csp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>sentinel-datasource-nacos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>2ã€ç¼–å†™é…ç½®</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>      <span class="token key atrule">datasource</span><span class="token punctuation">:</span>        <span class="token key atrule">flow</span><span class="token punctuation">:</span>          <span class="token key atrule">nacos</span><span class="token punctuation">:</span>            <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span>spring.cloud.nacos.config.server<span class="token punctuation">-</span>addr<span class="token punctuation">&#125;</span>            <span class="token key atrule">group-id</span><span class="token punctuation">:</span> SENTINEL_GROUP            <span class="token key atrule">data-id</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span>spring.application.name<span class="token punctuation">&#125;</span><span class="token punctuation">-</span>flow.json            <span class="token key atrule">data-type</span><span class="token punctuation">:</span> json            <span class="token key atrule">rule-type</span><span class="token punctuation">:</span> flow</code></pre><p>3ã€Nacosä¸­æ„å»ºé…ç½®ï¼Œç¼–å†™è§„åˆ™ï¼Œæƒ³ç¼–å†™è¿™ä¸ªå†…å®¹</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/2108e7e7b55f4ef688d3917940131ec0.png" alt="image.png"></p><p>Nacosçš„é…ç½®</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/8f1678597bff436d9cd50ad745893866.png" alt="image.png"></p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"resource"</span><span class="token operator">:</span> <span class="token string">"info"</span><span class="token punctuation">,</span>        <span class="token property">"limitApp"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>        <span class="token property">"grade"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"count"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"strategy"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token property">"controlBehavior"</span><span class="token operator">:</span> <span class="token number">0</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span></code></pre></blockquote><hr><blockquote><p>é…ç½®ç†”æ–­è§„åˆ™çš„å¥—è·¯</p><p>1ã€ä¾èµ–å¯¼å…¥</p><p>â€¦â€¦â€¦â€¦</p><p>2ã€ymlé…ç½®</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>      <span class="token key atrule">datasource</span><span class="token punctuation">:</span>        <span class="token key atrule">degrade</span><span class="token punctuation">:</span>          <span class="token key atrule">nacos</span><span class="token punctuation">:</span>            <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span>spring.cloud.nacos.config.server<span class="token punctuation">-</span>addr<span class="token punctuation">&#125;</span>            <span class="token key atrule">group-id</span><span class="token punctuation">:</span> SENTINEL_GROUP            <span class="token key atrule">data-id</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span>spring.application.name<span class="token punctuation">&#125;</span><span class="token punctuation">-</span>degrade.json            <span class="token key atrule">data-type</span><span class="token punctuation">:</span> json            <span class="token key atrule">rule-type</span><span class="token punctuation">:</span> degrade</code></pre><p>3ã€Nacosçš„é…ç½®</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/9a2b346d2e974d76844d9568b602ac89.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/57c4a091f4ac4a5d85ecc311a323388c.png" alt="image.png"></p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"resource"</span><span class="token operator">:</span> <span class="token string">"info"</span><span class="token punctuation">,</span>        <span class="token property">"grade"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>        <span class="token property">"count"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>        <span class="token property">"timeWindow"</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>        <span class="token property">"minRequestAmount"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>        <span class="token property">"statIntervalMs"</span><span class="token operator">:</span> <span class="token number">10000</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span></code></pre></blockquote><h2 id="5-10-OpenFeignæ•´åˆSentinel">5.10 OpenFeignæ•´åˆSentinel</h2><blockquote><p>OpenFeignæ•´åˆSentinelçš„ç›®çš„å…¶å®å°±æ˜¯é’ˆå¯¹åŸºäºOpenFeignå»è®¿é—®å…¶ä»–æœåŠ¡æ—¶ï¼Œå¦‚æœå‡ºæ¥äº†ä»»ä½•çš„é—®é¢˜ï¼Œä¸è¦æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œæ˜¯èµ°é™çº§æ–¹æ³•ï¼Œè¿”å›æ‰˜åº•æ•°æ®ã€‚</p><p>1ã€éœ€è¦ç¼–å†™é…ç½®æ–‡ä»¶ï¼Œå¼€å¯OpenFeignè·ŸSentinelçš„æ•´åˆ</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">feign</span><span class="token punctuation">:</span>  <span class="token key atrule">circuitbreaker</span><span class="token punctuation">:</span>    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre><p>2ã€æ„å»ºFeignæ¥å£çš„å®ç°ç±»ï¼Œé‡å†™Feignæ¥å£çš„æ–¹æ³•ï¼ˆé‡å†™çš„æ–¹æ³•å°±æ˜¯é™çº§æ–¹æ³•ï¼‰</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>mashibing<span class="token punctuation">.</span>client<span class="token punctuation">.</span>fallback</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>mashibing<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">StockClient</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StockClientFallback</span> <span class="token keyword">implements</span> <span class="token class-name">StockClient</span> <span class="token punctuation">&#123;</span>      <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"testçš„é™çº§æ–¹æ³•ï¼ŒæœåŠ¡å™¨æ­£å¿™ï¼Œè¯·ç¨åå†è¯•ï¼ï¼"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>3ã€åœ¨Feignæ¥å£ä¸­æŒ‡å®š@FeignClientçš„fallbackå±æ€§</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"stock"</span><span class="token punctuation">,</span>fallback <span class="token operator">=</span> <span class="token class-name">StockClientFallback</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StockClient</span> <span class="token punctuation">&#123;</span></code></pre><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/2746/1742210442039/e288e468159d400bbde24ae6581bd691.png" alt="image.png"></p><p>æœ‰åŒå­¦ä¼šæœ‰ç–‘é—®ï¼Œè¿™æ ·OpenFeignä¸å°±æœ‰ä¿©å®ç°ç±»åœ¨Springå®¹å™¨ä¸­äº†ä¹ˆï¼Ÿ Springæ€ä¹ˆçŸ¥é“åˆ°åº•æ³¨å…¥å“ªä¸€ä¸ªã€‚å…¶å®OpenFeignæ˜¯åŸºäº@FeignClientä¸­çš„primaryå±æ€§ï¼ŒæŒ‡å®šäº†Feignæ¥å£çš„ä»£ç†å¯¹è±¡ä½œä¸ºå’±ä»¬æ³¨å…¥çš„ä¸»è¦å¯¹è±¡ã€‚</p><p>è‡³äºFallbackFactoryå°±ä¸å®ç°äº†ï¼Œå¤§æ¦‚çŸ¥é“å¯ä»¥åˆ©ç”¨fallbackæˆ–è€…fallbackFactoryä¸¤ç§å½¢å¼ï¼Œä¸è¿‡éƒ½æ˜¯åŸºäºæ„å»ºFeignæ¥å£å®ç°ç±»å»ç©çš„ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> SpringCloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Sentinel </tag>
            
            <tag> Nacos </tag>
            
            <tag> OpenFeign </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¼“å­˜å’Œåˆ†å¸ƒå¼é”</title>
      <link href="/2024/06/17/%E7%BC%93%E5%AD%98%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81_/"/>
      <url>/2024/06/17/%E7%BC%93%E5%AD%98%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81_/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=1dd11786-90a3-9952-94c2-151fc8f87e61</cover>
      <date>Mon Jun 17 2024 14:26:18 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>ç¼“å­˜å’Œåˆ†å¸ƒå¼é”</h1><h1>ä¸€ã€ç¼“å­˜</h1><h2 id="1-ä»€ä¹ˆæ˜¯ç¼“å­˜">1. ä»€ä¹ˆæ˜¯ç¼“å­˜</h2><p>â€ƒâ€ƒç¼“å­˜çš„ä½œç”¨æ˜¯å‡ä½å¯¹æ•°æ®æºçš„è®¿é—®é¢‘ç‡ã€‚ä»è€Œæé«˜æˆ‘ä»¬ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/f7b9a0b66af14121aadeb50bffd8e36c.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/cb0dbab831954c11bd7e3873914f7150.png" alt="image.png"></p><p>ç¼“å­˜çš„æµç¨‹å›¾</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/cba94b3b543247feb6d8099a6ccc5d2f.png" alt="image.png"></p><h2 id="2-ç¼“å­˜çš„åˆ†ç±»">2.ç¼“å­˜çš„åˆ†ç±»</h2><h3 id="2-1-æœ¬åœ°ç¼“å­˜">2.1 æœ¬åœ°ç¼“å­˜</h3><p>â€ƒâ€ƒå…¶å®å°±æ˜¯æŠŠç¼“å­˜æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­(Map <code>&lt;String,Object&gt;</code>).åœ¨å•ä½“æ¶æ„ä¸­è‚¯å®šæ²¡æœ‰é—®é¢˜ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/8b6494222e834cc895c5934b15836c95.png" alt="image.png"></p><p>å•ä½“æ¶æ„ä¸‹çš„ç¼“å­˜å¤„ç†</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/fc2ef64e7b734fa6b4702420be0d5a36.png" alt="image.png"></p><h3 id="2-2-åˆ†å¸ƒå¼ç¼“å­˜">2.2 åˆ†å¸ƒå¼ç¼“å­˜</h3><p>â€ƒâ€ƒåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬åŸæ¥çš„æœ¬åœ°ç¼“å­˜å°±ä¸æ˜¯å¤ªä½¿ç”¨äº†ï¼ŒåŸå› æ˜¯ï¼š</p><ul><li>ç¼“å­˜æ•°æ®å†—ä½™</li><li>ç¼“å­˜æ•ˆç‡ä¸é«˜</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/7465ee4dee6b4d0c9f4b61ba93dbfa87.png" alt="image.png"></p><p>â€ƒâ€ƒåˆ†å¸ƒå¼ç¼“å­˜çš„ç»“æ„å›¾</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/b252ba1016044eca891ab5b3bdf9d1e0.png" alt="image.png"></p><h2 id="3-æ•´åˆRedis">3.æ•´åˆRedis</h2><p>â€ƒâ€ƒè¦æ•´åˆRedisé‚£ä¹ˆæˆ‘ä»¬åœ¨SpringBooté¡¹ç›®ä¸­é¦–é¡µæ¥æ·»åŠ å¯¹åº”çš„ä¾èµ–</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>â€ƒâ€ƒç„¶åæˆ‘ä»¬éœ€è¦æ·»åŠ å¯¹åº”çš„é…ç½®ä¿¡æ¯</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/753f65df9029411a8145b2477d1e58d3.png" alt="image.png"></p><p>æµ‹è¯•æ“ä½œRedisçš„æ•°æ®</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Autowired</span><span class="token class-name">StringRedisTemplate</span> stringRedisTemplate<span class="token punctuation">;</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testStringRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// è·å–æ“ä½œStringç±»å‹çš„Optionså¯¹è±¡</span>    <span class="token class-name">ValueOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> ops <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ’å…¥æ•°æ®</span>    ops<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"bobo"</span><span class="token operator">+</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è·å–å­˜å‚¨çš„ä¿¡æ¯</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆšåˆšä¿å­˜çš„å€¼ï¼š"</span><span class="token operator">+</span>ops<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>æŸ¥çœ‹å¯ä»¥é€šè¿‡Redisçš„å®¢æˆ·ç«¯è¿æ¥æŸ¥çœ‹</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/1b678ea26d684404a93217b8bb781164.png" alt="image.png"></p><p>ä¹Ÿå¯ä»¥é€šè¿‡å·¥å…·æŸ¥çœ‹</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/33e044f827f0470bb9f3a27308f77118.png" alt="image.png"></p><h2 id="4-æ”¹é€ ä¸‰çº§åˆ†ç±»">4.æ”¹é€ ä¸‰çº§åˆ†ç±»</h2><p>â€ƒâ€ƒåœ¨é¦–é¡µæŸ¥è¯¢äºŒçº§å’Œä¸‰çº§åˆ†ç±»æ•°æ®çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥é€šè¿‡Redisæ¥ç¼“å­˜å­˜å‚¨å¯¹åº”çš„æ•°æ®ï¼Œæ¥æå‡æ£€ç´¢çš„æ•ˆç‡ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">getCatelog2JSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// ä»Redisä¸­è·å–åˆ†ç±»çš„ä¿¡æ¯</span>        <span class="token class-name">String</span> catalogJSON <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"catalogJSON"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>catalogJSON<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">// ç¼“å­˜ä¸­æ²¡æœ‰æ•°æ®ï¼Œéœ€è¦ä»æ•°æ®åº“ä¸­æŸ¥è¯¢</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> catelog2JSONForDb <span class="token operator">=</span> <span class="token function">getCatelog2JSONForDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// ä»æ•°æ®åº“ä¸­æŸ¥è¯¢åˆ°çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦ç»™ç¼“å­˜ä¸­ä¹Ÿå­˜å‚¨ä¸€ä»½</span>            <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>catelog2JSONForDb<span class="token punctuation">)</span><span class="token punctuation">;</span>            stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"catalogJSON"</span><span class="token punctuation">,</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> catelog2JSONForDb<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// è¡¨ç¤ºç¼“å­˜å‘½ä¸­äº†æ•°æ®ï¼Œé‚£ä¹ˆä»ç¼“å­˜ä¸­è·å–ä¿¡æ¯ï¼Œç„¶åè¿”å›</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> stringListMap <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>catalogJSON<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> stringListMap<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><p>â€ƒâ€ƒç„¶åå¯¹ä¸‰çº§åˆ†ç±»çš„æ•°æ®åšå‹åŠ›æµ‹è¯•</p><table><thead><tr><th>å‹åŠ›æµ‹è¯•å†…å®¹</th><th>å‹åŠ›æµ‹è¯•çš„çº¿ç¨‹æ•°</th><th>ååé‡/s</th><th>90%å“åº”æ—¶é—´</th><th>99%å“åº”æ—¶é—´</th></tr></thead><tbody><tr><td>Nginx</td><td>50</td><td>7,385</td><td>10</td><td>70</td></tr><tr><td>Gateway</td><td>50</td><td>23,170</td><td>3</td><td>14</td></tr><tr><td>å•ç‹¬æµ‹è¯•æœåŠ¡</td><td>50</td><td>23,160</td><td>3</td><td>7</td></tr><tr><td>Gateway+æœåŠ¡</td><td>50</td><td>8,461</td><td>12</td><td>46</td></tr><tr><td>Nginx+Gateway</td><td>50</td><td></td><td></td><td></td></tr><tr><td>Nginx+Gateway+æœåŠ¡</td><td>50</td><td>2,816</td><td>27</td><td>42</td></tr><tr><td>ä¸€çº§èœå•</td><td>50</td><td>1,321</td><td>48</td><td>74</td></tr><tr><td>ä¸‰çº§åˆ†ç±»å‹æµ‹</td><td>50</td><td>12</td><td>4000</td><td>4000</td></tr><tr><td>ä¸‰çº§åˆ†ç±»å‹æµ‹(ä¸šåŠ¡ä¼˜åŒ–å)</td><td>50</td><td>448</td><td>113</td><td>227</td></tr><tr><td>ä¸‰çº§åˆ†ç±»å‹æµ‹(Redisç¼“å­˜)</td><td>50</td><td>1163</td><td>49</td><td>59</td></tr></tbody></table><p>â€ƒâ€ƒé€šè¿‡å¯¹æ¯”å¯ä»¥çœ‹åˆ°Redisç¼“å­˜åŠ å…¥åçš„æ€§èƒ½æå‡çš„æ•ˆæœè¿˜æ˜¯éå¸¸æ˜æ˜¾çš„ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/29d741c218ec440e9df345b92f03ca69.png" alt="image.png"></p><h2 id="5-ç¼“å­˜ç©¿é€">5.ç¼“å­˜ç©¿é€</h2><p>â€ƒâ€ƒæŒ‡æŸ¥è¯¢ä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ï¼Œç”±äºç¼“å­˜æ˜¯ä¸å‘½ä¸­ï¼Œå°†å»æŸ¥è¯¢æ•°æ®åº“ï¼Œä½†æ˜¯æ•°æ®åº“ä¹Ÿæ— æ­¤è®°å½•ï¼Œæˆ‘ä»¬æ²¡æœ‰å°†è¿™æ¬¡æŸ¥è¯¢çš„nullå†™å…¥ç¼“å­˜ï¼Œè¿™å°†å¯¼è‡´è¿™ä¸ªä¸å­˜åœ¨çš„æ•°æ®æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ°å­˜å‚¨å±‚å»æŸ¥è¯¢ï¼Œå¤±å»äº†ç¼“å­˜çš„æ„ä¹‰.</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/dca9e58ad48f41cca7dfbfee4e25275c.png" alt="image.png"></p><p>åˆ©ç”¨ä¸å­˜åœ¨çš„æ•°æ®è¿›è¡Œæ”»å‡»ï¼Œæ•°æ®åº“ç¬æ—¶å‹åŠ›å¢å¤§ï¼Œæœ€ç»ˆå¯¼è‡´å´©æºƒ,è§£å†³æ–¹æ¡ˆä¹Ÿæ¯”è¾ƒç®€å•ï¼Œç›´æ¥æŠŠnullç»“æœç¼“å­˜ï¼Œå¹¶åŠ å…¥çŸ­æš‚çš„è¿‡æœŸæ—¶é—´</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/afd4d9ca881948b9b8f78a5667fb4771.png" alt="image.png"></p><h2 id="6-ç¼“å­˜é›ªå´©">6.ç¼“å­˜é›ªå´©</h2><p>â€ƒâ€ƒç¼“å­˜é›ªå´©æ˜¯æŒ‡åœ¨æˆ‘ä»¬è®¾ç½®ç¼“å­˜æ—¶keyé‡‡ç”¨äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œå¯¼è‡´ç¼“å­˜åœ¨æŸä¸€æ—¶åˆ»åŒæ—¶å¤±æ•ˆï¼Œè¯·æ±‚å…¨éƒ¨è½¬å‘åˆ°DBï¼ŒDBç¬æ—¶å‹åŠ›è¿‡é‡é›ªå´©ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/a60f00c6642a4027889d8f3bba9b6a02.png" alt="image.png"></p><p>è§£å†³æ–¹æ¡ˆï¼šåŸæœ‰çš„å¤±æ•ˆæ—¶é—´åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªéšæœºå€¼ï¼Œæ¯”å¦‚1-5åˆ†é’Ÿéšæœºï¼Œè¿™æ ·æ¯ä¸€ä¸ªç¼“å­˜çš„è¿‡æœŸæ—¶é—´çš„é‡å¤ç‡å°±ä¼šé™ä½ï¼Œå°±å¾ˆéš¾å¼•å‘é›†ä½“å¤±æ•ˆçš„äº‹ä»¶ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/a48b2bce1ed049db9eda217396345759.png" alt="image.png"></p><h2 id="7-ç¼“å­˜å‡»ç©¿">7.ç¼“å­˜å‡»ç©¿</h2><p>â€ƒâ€ƒå¯¹äºä¸€äº›è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyï¼Œå¦‚æœè¿™äº›keyå¯èƒ½ä¼šåœ¨æŸäº›æ—¶é—´ç‚¹è¢«è¶…é«˜å¹¶å‘åœ°è®¿é—®ï¼Œæ˜¯ä¸€ç§éå¸¸â€œçƒ­ç‚¹â€çš„æ•°æ®ã€‚å¦‚æœè¿™ä¸ªkeyåœ¨å¤§é‡è¯·æ±‚åŒæ—¶è¿›æ¥å‰æ­£å¥½å¤±æ•ˆï¼Œé‚£ä¹ˆæ‰€æœ‰å¯¹è¿™ä¸ªkeyçš„æ•°æ®æŸ¥è¯¢éƒ½è½åˆ°dbï¼Œæˆ‘ä»¬ç§°ä¸ºç¼“å­˜å‡»ç©¿ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/e17782f1bcde4c839989a5906aef9e35.png" alt="image.png"></p><p>è§£å†³æ–¹æ¡ˆï¼šåŠ é”ï¼Œ å¹¶å‘åªè®©ä¸€ä¸ªå»æŸ¥ï¼Œå…¶ä»–äººç­‰å¾…ï¼ŒæŸ¥åˆ°ä»¥åé‡Šæ”¾é”ï¼Œå…¶ä»–äººè·å–åˆ°é”ï¼Œå…ˆæŸ¥ç¼“å­˜ï¼Œå°±ä¼šæœ‰æ•°æ®ï¼Œä¸ç”¨å»dbã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/4f7f4bb074874ae6a6366315cb804e2e.png" alt="image.png"></p><p>ä½†æ˜¯å½“æˆ‘ä»¬å‹åŠ›æµ‹è¯•çš„æ—¶å€™ï¼Œè¾“å‡ºçš„ç»“æœæœ‰ç‚¹å‡ºä¹æˆ‘ä»¬çš„æ„æ–™</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/faf97a0b64ae45d986f6f96151cc6adf.png" alt="image.png"></p><p>åšäº†ä¸¤æ¬¡çš„æŸ¥è¯¢ï¼ŒåŸå› æ˜¯é‡Šæ”¾é”å’ŒæŸ¥è¯¢ç»“æœç¼“å­˜çš„æ—¶åºé—®é¢˜</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/d25221e899c649ae822d6f9811c0f5e3.png" alt="image.png"></p><p>æˆ‘ä»¬åªéœ€è¦è°ƒæ•´ä¸‹é‡Šæ”¾é”å’Œç»“æœç¼“å­˜çš„æ—¶åºé—®é¢˜å°±å¯ä»¥äº†</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/931fa32bb41841aba9a33da4ca522160.png" alt="image.png"></p><p>ç„¶åå°±æ˜¯å®Œæ•´çš„ä»£ç å¤„ç†</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/**     * æŸ¥è¯¢å‡ºæ‰€æœ‰çš„äºŒçº§å’Œä¸‰çº§åˆ†ç±»çš„æ•°æ®     * å¹¶å°è£…ä¸ºMap&lt;String, Catalog2VO>å¯¹è±¡     * @return     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">getCatelog2JSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> key <span class="token operator">=</span> <span class="token string">"catalogJSON"</span><span class="token punctuation">;</span>        <span class="token comment">// ä»Redisä¸­è·å–åˆ†ç±»çš„ä¿¡æ¯</span>        <span class="token class-name">String</span> catalogJSON <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>catalogJSON<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç¼“å­˜æ²¡æœ‰å‘½ä¸­....."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// ç¼“å­˜ä¸­æ²¡æœ‰æ•°æ®ï¼Œéœ€è¦ä»æ•°æ®åº“ä¸­æŸ¥è¯¢</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> catelog2JSONForDb <span class="token operator">=</span> <span class="token function">getCatelog2JSONForDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>catelog2JSONForDb <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">// é‚£å°±è¯´æ˜æ•°æ®åº“ä¸­ä¹Ÿä¸å­˜åœ¨  é˜²æ­¢ç¼“å­˜ç©¿é€</span>                stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span><span class="token string">"1"</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                <span class="token comment">// ä»æ•°æ®åº“ä¸­æŸ¥è¯¢åˆ°çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦ç»™ç¼“å­˜ä¸­ä¹Ÿå­˜å‚¨ä¸€ä»½</span>                <span class="token comment">// é˜²æ­¢ç¼“å­˜é›ªå´©</span>                <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>catelog2JSONForDb<span class="token punctuation">)</span><span class="token punctuation">;</span>                stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"catalogJSON"</span><span class="token punctuation">,</span>json<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MINUTES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> catelog2JSONForDb<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç¼“å­˜å‘½ä¸­äº†...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è¡¨ç¤ºç¼“å­˜å‘½ä¸­äº†æ•°æ®ï¼Œé‚£ä¹ˆä»ç¼“å­˜ä¸­è·å–ä¿¡æ¯ï¼Œç„¶åè¿”å›</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> stringListMap <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>catalogJSON<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> stringListMap<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * ä»æ•°æ®åº“æŸ¥è¯¢çš„ç»“æœ     * æŸ¥è¯¢å‡ºæ‰€æœ‰çš„äºŒçº§å’Œä¸‰çº§åˆ†ç±»çš„æ•°æ®     * å¹¶å°è£…ä¸ºMap&lt;String, Catalog2VO>å¯¹è±¡     * åœ¨SpringBootä¸­ï¼Œé»˜è®¤çš„æƒ…å†µä¸‹æ˜¯å•ä¾‹     * @return     */</span>    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">getCatelog2JSONForDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> keys <span class="token operator">=</span> <span class="token string">"catalogJSON"</span><span class="token punctuation">;</span>        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">/*if(cache.containsKey("getCatelog2JSON"))&#123;                // ç›´æ¥ä»ç¼“å­˜ä¸­è·å–                return cache.get("getCatelog2JSON");            &#125;*/</span>            <span class="token comment">// å…ˆå»ç¼“å­˜ä¸­æŸ¥è¯¢æœ‰æ²¡æœ‰æ•°æ®ï¼Œå¦‚æœæœ‰å°±è¿”å›ï¼Œå¦åˆ™æŸ¥è¯¢æ•°æ®åº“</span>            <span class="token comment">// ä»Redisä¸­è·å–åˆ†ç±»çš„ä¿¡æ¯</span>            <span class="token class-name">String</span> catalogJSON <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>catalogJSON<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">// è¯´æ˜ç¼“å­˜å‘½ä¸­</span>                <span class="token comment">// è¡¨ç¤ºç¼“å­˜å‘½ä¸­äº†æ•°æ®ï¼Œé‚£ä¹ˆä»ç¼“å­˜ä¸­è·å–ä¿¡æ¯ï¼Œç„¶åè¿”å›</span>                <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> stringListMap <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>catalogJSON<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> stringListMap<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-----------ã€‹æŸ¥è¯¢æ•°æ®åº“æ“ä½œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// è·å–æ‰€æœ‰çš„åˆ†ç±»æ•°æ®</span>            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> baseMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// è·å–æ‰€æœ‰çš„ä¸€çº§åˆ†ç±»çš„æ•°æ®</span>            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">></span></span> leve1Category <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queryByParenCid</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span><span class="token number">0l</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// æŠŠä¸€çº§åˆ†ç±»çš„æ•°æ®è½¬æ¢ä¸ºMapå®¹å™¨ keyå°±æ˜¯ä¸€çº§åˆ†ç±»çš„ç¼–å·ï¼Œ valueå°±æ˜¯ä¸€çº§åˆ†ç±»å¯¹åº”çš„äºŒçº§åˆ†ç±»çš„æ•°æ®</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> map <span class="token operator">=</span> leve1Category<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span>                    key <span class="token operator">-></span> key<span class="token punctuation">.</span><span class="token function">getCatId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">,</span> value <span class="token operator">-></span> <span class="token punctuation">&#123;</span>                        <span class="token comment">// æ ¹æ®ä¸€çº§åˆ†ç±»çš„ç¼–å·ï¼ŒæŸ¥è¯¢å‡ºå¯¹åº”çš„äºŒçº§åˆ†ç±»çš„æ•°æ®</span>                        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">></span></span> l2Catalogs <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queryByParenCid</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span>value<span class="token punctuation">.</span><span class="token function">getCatId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span></span> <span class="token class-name">Catalog2VOs</span> <span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>                        <span class="token keyword">if</span><span class="token punctuation">(</span>l2Catalogs <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                            <span class="token class-name">Catalog2VOs</span> <span class="token operator">=</span> l2Catalogs<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>l2 <span class="token operator">-></span> <span class="token punctuation">&#123;</span>                                <span class="token comment">// éœ€è¦æŠŠæŸ¥è¯¢å‡ºæ¥çš„äºŒçº§åˆ†ç±»çš„æ•°æ®å¡«å……åˆ°å¯¹åº”çš„Catelog2VOä¸­</span>                                <span class="token class-name">Catalog2VO</span> catalog2VO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Catalog2VO</span><span class="token punctuation">(</span>l2<span class="token punctuation">.</span><span class="token function">getParentCid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> l2<span class="token punctuation">.</span><span class="token function">getCatId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l2<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                <span class="token comment">// æ ¹æ®äºŒçº§åˆ†ç±»çš„æ•°æ®æ‰¾åˆ°å¯¹åº”çš„ä¸‰çº§åˆ†ç±»çš„ä¿¡æ¯</span>                                <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">></span></span> l3Catelogs <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queryByParenCid</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span>l2<span class="token punctuation">.</span><span class="token function">getCatId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                <span class="token keyword">if</span><span class="token punctuation">(</span>l3Catelogs <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                                    <span class="token comment">// è·å–åˆ°çš„äºŒçº§åˆ†ç±»å¯¹åº”çš„ä¸‰çº§åˆ†ç±»çš„æ•°æ®</span>                                    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO<span class="token punctuation">.</span>Catalog3VO</span><span class="token punctuation">></span></span> catalog3VOS <span class="token operator">=</span> l3Catelogs<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>l3 <span class="token operator">-></span> <span class="token punctuation">&#123;</span>                                        <span class="token class-name">Catalog2VO<span class="token punctuation">.</span>Catalog3VO</span> catalog3VO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Catalog2VO<span class="token punctuation">.</span>Catalog3VO</span><span class="token punctuation">(</span>l3<span class="token punctuation">.</span><span class="token function">getParentCid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l3<span class="token punctuation">.</span><span class="token function">getCatId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l3<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                        <span class="token keyword">return</span> catalog3VO<span class="token punctuation">;</span>                                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                    <span class="token comment">// ä¸‰çº§åˆ†ç±»å…³è”äºŒçº§åˆ†ç±»</span>                                    catalog2VO<span class="token punctuation">.</span><span class="token function">setCatalog3List</span><span class="token punctuation">(</span>catalog3VOS<span class="token punctuation">)</span><span class="token punctuation">;</span>                                <span class="token punctuation">&#125;</span>                                <span class="token keyword">return</span> catalog2VO<span class="token punctuation">;</span>                            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">&#125;</span>                        <span class="token keyword">return</span> <span class="token class-name">Catalog2VOs</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>            <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// ä»æ•°æ®åº“ä¸­è·å–åˆ°äº†å¯¹åº”çš„ä¿¡æ¯ ç„¶ååœ¨ç¼“å­˜ä¸­ä¹Ÿå­˜å‚¨ä¸€ä»½ä¿¡æ¯</span>            <span class="token comment">//cache.put("getCatelog2JSON",map);</span>            <span class="token comment">// è¡¨ç¤ºç¼“å­˜å‘½ä¸­äº†æ•°æ®ï¼Œé‚£ä¹ˆä»ç¼“å­˜ä¸­è·å–ä¿¡æ¯ï¼Œç„¶åè¿”å›</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>map <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">// é‚£å°±è¯´æ˜æ•°æ®åº“ä¸­ä¹Ÿä¸å­˜åœ¨  é˜²æ­¢ç¼“å­˜ç©¿é€</span>                stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span><span class="token string">"1"</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                <span class="token comment">// ä»æ•°æ®åº“ä¸­æŸ¥è¯¢åˆ°çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦ç»™ç¼“å­˜ä¸­ä¹Ÿå­˜å‚¨ä¸€ä»½</span>                <span class="token comment">// é˜²æ­¢ç¼“å­˜é›ªå´©</span>                <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>                stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"catalogJSON"</span><span class="token punctuation">,</span>json<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MINUTES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> map<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span></code></pre><h2 id="8-æœ¬åœ°é”çš„å±€é™">8.æœ¬åœ°é”çš„å±€é™</h2><p>â€ƒâ€ƒæœ¬åœ°é”åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œæ˜¯æ²¡æœ‰åŠæ³•é”ä½å…¶ä»–èŠ‚ç‚¹çš„æ“ä½œçš„ï¼Œè¿™ç§æƒ…å†µè‚¯å®šæ˜¯æœ‰é—®é¢˜çš„</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/0d462603f2e9461bafbf3bbdb6ed79ca.png" alt="image.png"></p><p>é’ˆå¯¹æœ¬åœ°é”çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡åˆ†å¸ƒå¼é”æ¥è§£å†³ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯æ„å‘³ç€æœ¬èº«é”åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹å°±ä¸éœ€è¦äº†å‘¢ï¼Ÿ</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/d3707cdc47ed4941b6b00b49711937ce.png" alt="image.png"></p><p>â€ƒâ€ƒæ˜¾ç„¶ä¸æ˜¯è¿™æ ·çš„ï¼Œå› ä¸ºå¦‚æœåˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„æ¯ä¸ªèŠ‚ç‚¹ä¸æ§åˆ¶è¯·æ±‚çš„æ•°é‡ï¼Œé‚£ä¹ˆåˆ†å¸ƒå¼é”çš„å‹åŠ›ä¼šéå¸¸å¤§ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦æœ¬åœ°é”æ¥æ§åˆ¶æ¯ä¸ªèŠ‚ç‚¹çš„åŒæ­¥ï¼Œæ¥é™ä½åˆ†å¸ƒå¼é”çš„å‹åŠ›ï¼Œæ‰€ä»¥å®é™…å¼€å‘ä¸­æˆ‘ä»¬éƒ½æ˜¯æœ¬åœ°é”å’Œåˆ†å¸ƒå¼é”ç»“åˆä½¿ç”¨çš„ã€‚</p><h1>äºŒã€åˆ†å¸ƒå¼é”</h1><h2 id="1-åˆ†å¸ƒå¼é”çš„åŸç†">1.åˆ†å¸ƒå¼é”çš„åŸç†</h2><p>â€ƒâ€ƒåˆ†å¸ƒå¼é”æˆ–è€…æœ¬åœ°é”çš„æœ¬è´¨å…¶å®æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å°†å¹¶è¡Œçš„æ“ä½œè½¬æ¢ä¸ºäº†ä¸²è¡Œçš„æ“ä½œ</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/62602c5ee39246acbdfb2f9990197e02.png" alt="image.png"></p><h2 id="2-åˆ†å¸ƒå¼é”çš„å¸¸ç”¨è§£å†³æ–¹æ¡ˆ">2.åˆ†å¸ƒå¼é”çš„å¸¸ç”¨è§£å†³æ–¹æ¡ˆ</h2><h3 id="2-1-æ•°æ®åº“">2.1 æ•°æ®åº“</h3><pre class="language-txt" data-language="txt"><code class="language-txt">å¯ä»¥åˆ©ç”¨MySQLéš”ç¦»æ€§ï¼šå”¯ä¸€ç´¢å¼•</code></pre><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">use</span> test<span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>DistributedLock<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'ä¸»é”®'</span><span class="token punctuation">,</span>  <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span> <span class="token keyword">COMMENT</span> <span class="token string">'é”å'</span><span class="token punctuation">,</span>  <span class="token identifier"><span class="token punctuation">`</span>desc<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'å¤‡æ³¨ä¿¡æ¯'</span><span class="token punctuation">,</span>  <span class="token identifier"><span class="token punctuation">`</span>update_time<span class="token punctuation">`</span></span> <span class="token keyword">timestamp</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">COMMENT</span> <span class="token string">'ä¿å­˜æ•°æ®æ—¶é—´ï¼Œè‡ªåŠ¨ç”Ÿæˆ'</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>uidx_name<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'é”å®šä¸­çš„æ–¹æ³•'</span><span class="token punctuation">;</span><span class="token comment">//æ•°æ®åº“ä¸­çš„æ¯ä¸€æ¡è®°å½•å°±æ˜¯ä¸€æŠŠé”ï¼Œåˆ©ç”¨çš„mysqlå”¯ä¸€ç´¢å¼•çš„æ’ä»–æ€§</span><span class="token keyword">lock</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token keyword">desc</span><span class="token punctuation">)</span>&#123;    <span class="token keyword">insert</span> <span class="token keyword">into</span> DistributedLock<span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>desc<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token comment">#&#123;name&#125;,#&#123;desc&#125;);</span>&#125;<span class="token keyword">unlock</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>&#123;    <span class="token keyword">delete</span> <span class="token keyword">from</span> DistributedLock <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token comment">#&#123;name&#125;</span>&#125;</code></pre><p>å¯ä»¥åˆ©ç”¨æ‹ä»–è¯´æ¥å®ç° select â€¦ where â€¦  for update;</p><p>ä¹è§‚é”ï¼šä¹è§‚çš„ä»»åŠ¡æ•°æ®ä¸ä¼šå‡ºç°æ•°æ®å®‰å…¨é—®é¢˜ï¼Œå¦‚æœå‡ºç°äº†å°±é‡è¯•ä¸€æ¬¡</p><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>version<span class="token punctuation">;</span><span class="token keyword">update</span> <span class="token keyword">table</span> <span class="token keyword">set</span> version<span class="token operator">+</span><span class="token number">1</span> <span class="token keyword">where</span> version <span class="token operator">=</span> xxx</code></pre><h3 id="2-2-Redis">2.2 Redis</h3><p>setNX:</p><p>setNX(key,value) :å¦‚æœkeyä¸å­˜åœ¨é‚£ä¹ˆå°±æ·»åŠ keyçš„å€¼ï¼Œå¦åˆ™æ·»åŠ å¤±è´¥ï¼ŒRedisson</p><h3 id="2-3Zookeeper">2.3Zookeeper</h3><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/7daa3aeb84844f40ac2ca74ef1f08d52.png" alt="image.png"></p><h2 id="3-Rediså®ç°åˆ†å¸ƒå¼é”">3.Rediså®ç°åˆ†å¸ƒå¼é”</h2><p>â€ƒâ€ƒåœ¨Redisä¸­æ˜¯é€šè¿‡setNXæŒ‡ä»¤æ¥å®ç°é”çš„æŠ¢å ï¼Œé‚£ä¹ˆåˆ©ç”¨è¿™ä¸ªå‘½ä»¤å®ç°åˆ†å¸ƒå¼é”çš„åŸºç¡€ä»£ç ä¸ºï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">getCatelog2JSONDbWithRedisLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> keys <span class="token operator">=</span> <span class="token string">"catalogJSON"</span><span class="token punctuation">;</span>    <span class="token comment">// åŠ é”</span>    <span class="token class-name">Boolean</span> lock <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setIfAbsent</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">,</span> <span class="token string">"1111"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">// åŠ é”æˆåŠŸ</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> data <span class="token operator">=</span> <span class="token function">getDataForDB</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä»æ•°æ®åº“ä¸­è·å–æ•°æ®æˆåŠŸåï¼Œæˆ‘ä»¬åº”è¯¥è¦é‡Šæ”¾é”</span>        stringRedisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> data<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        <span class="token comment">// åŠ é”å¤±è´¥</span>        <span class="token comment">// ä¼‘çœ +é‡è¯•</span>        <span class="token comment">// Thread.sleep(1000);</span>        <span class="token keyword">return</span> <span class="token function">getCatelog2JSONDbWithRedisLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>â€ƒâ€ƒä¸Šé¢çš„ä»£ç å…¶å®æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜çš„ï¼Œé¦–å…ˆå¦‚æœgetDataForDB(keys)è¿™ä¸ªæ–¹æ³•å¦‚æœå‡ºç°çš„å¼‚å¸¸ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸ä¼šåˆ é™¤è¯¥keyä¹Ÿå°±æ˜¯ä¸ä¼šé‡Šæ”¾é”ï¼Œä»è€Œé€ æˆäº†æ­»é”ï¼Œé’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®è¿‡æœŸæ—¶é—´æ¥è§£å†³ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">getCatelog2JSONDbWithRedisLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> keys <span class="token operator">=</span> <span class="token string">"catalogJSON"</span><span class="token punctuation">;</span>    <span class="token comment">// åŠ é”</span>    <span class="token class-name">Boolean</span> lock <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setIfAbsent</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">,</span> <span class="token string">"1111"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">// ç»™å¯¹åº”çš„keyè®¾ç½®è¿‡æœŸæ—¶é—´</span>        stringRedisTemplate<span class="token punctuation">.</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åŠ é”æˆåŠŸ</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> data <span class="token operator">=</span> <span class="token function">getDataForDB</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä»æ•°æ®åº“ä¸­è·å–æ•°æ®æˆåŠŸåï¼Œæˆ‘ä»¬åº”è¯¥è¦é‡Šæ”¾é”</span>        stringRedisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> data<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        <span class="token comment">// åŠ é”å¤±è´¥</span>        <span class="token comment">// ä¼‘çœ +é‡è¯•</span>        <span class="token comment">// Thread.sleep(1000);</span>        <span class="token keyword">return</span> <span class="token function">getCatelog2JSONDbWithRedisLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>â€ƒâ€ƒä¸Šé¢è™½ç„¶è§£å†³äº†getDataForDBæ–¹æ³•å‡ºç°å¼‚å¸¸çš„é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœåœ¨expireæ–¹æ³•æ‰§è¡Œä¹‹å‰å°±ä¸­æ–­å‘¢ï¼Ÿè¿™æ ·ä¹Ÿä¼šå‡ºç°æˆ‘ä»¬ä»‹ç»çš„æ­»é”çš„é—®é¢˜ï¼Œé‚£è¿™ä¸ªé—®é¢˜æ€ä¹ˆåŠï¼Ÿè¿™æ—¶æˆ‘ä»¬å°±å¸Œæœ›setNxå’Œè®¾ç½®è¿‡æœŸæ—¶é—´çš„æ“ä½œèƒ½å¤Ÿä¿è¯åŸå­æ€§ã€‚</p><p>è¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥åœ¨setIfAbsentæ–¹æ³•ä¸­åŒæ—¶æŒ‡å®šè¿‡æœŸæ—¶é—´ï¼Œä¿è¯è¿™ä¸ªåŸå­æ€§çš„è¡Œä¸º</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">getCatelog2JSONDbWithRedisLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> keys <span class="token operator">=</span> <span class="token string">"catalogJSON"</span><span class="token punctuation">;</span>    <span class="token comment">// åŠ é” åœ¨æ‰§è¡Œæ’å…¥æ“ä½œçš„åŒæ—¶è®¾ç½®äº†è¿‡æœŸæ—¶é—´</span>    <span class="token class-name">Boolean</span> lock <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setIfAbsent</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">,</span> <span class="token string">"1111"</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">// ç»™å¯¹åº”çš„keyè®¾ç½®è¿‡æœŸæ—¶é—´</span>        stringRedisTemplate<span class="token punctuation">.</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åŠ é”æˆåŠŸ</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> data <span class="token operator">=</span> <span class="token function">getDataForDB</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä»æ•°æ®åº“ä¸­è·å–æ•°æ®æˆåŠŸåï¼Œæˆ‘ä»¬åº”è¯¥è¦é‡Šæ”¾é”</span>        stringRedisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> data<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        <span class="token comment">// åŠ é”å¤±è´¥</span>        <span class="token comment">// ä¼‘çœ +é‡è¯•</span>        <span class="token comment">// Thread.sleep(1000);</span>        <span class="token keyword">return</span> <span class="token function">getCatelog2JSONDbWithRedisLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>â€ƒâ€ƒå¦‚æœè·å–é”çš„ä¸šåŠ¡æ‰§è¡Œæ—¶é—´æ¯”è¾ƒé•¿ï¼Œè¶…è¿‡äº†æˆ‘ä»¬è®¾ç½®çš„è¿‡æœŸæ—¶é—´ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½ä¸šåŠ¡è¿˜æ²¡æ‰§è¡Œå®Œï¼Œé”å°±é‡Šæ”¾äº†ï¼Œç„¶åå¦ä¸€ä¸ªè¯·æ±‚è¿›æ¥äº†ï¼Œå¹¶åˆ›å»ºäº†keyï¼Œè¿™æ—¶åŸæ¥çš„ä¸šåŠ¡å¤„ç†å®Œæˆåï¼Œå†å»åˆ é™¤keyçš„æ—¶å€™ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½åˆ é™¤åˆ«äººçš„keyï¼Œè¿™æ—¶æ€ä¹ˆåŠ?é’ˆå¯¹è¿™ç§æƒ…å†µæˆ‘ä»¬å¯ä»¥æŸ¥è¯¢çš„é”çš„ä¿¡æ¯é€šè¿‡UUIDæ¥åŒºåˆ†ï¼Œå…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">getCatelog2JSONDbWithRedisLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> keys <span class="token operator">=</span> <span class="token string">"catalogJSON"</span><span class="token punctuation">;</span>        <span class="token comment">// åŠ é” åœ¨æ‰§è¡Œæ’å…¥æ“ä½œçš„åŒæ—¶è®¾ç½®äº†è¿‡æœŸæ—¶é—´</span>        <span class="token class-name">String</span> uuid <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Boolean</span> lock <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setIfAbsent</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">,</span> uuid<span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">// ç»™å¯¹åº”çš„keyè®¾ç½®è¿‡æœŸæ—¶é—´</span>            stringRedisTemplate<span class="token punctuation">.</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// åŠ é”æˆåŠŸ</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> data <span class="token operator">=</span> <span class="token function">getDataForDB</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// è·å–å½“å‰keyå¯¹åº”çš„å€¼</span>            <span class="token class-name">String</span> val <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>uuid<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">// è¯´æ˜è¿™æŠŠé”æ˜¯è‡ªå·±çš„</span>                <span class="token comment">// ä»æ•°æ®åº“ä¸­è·å–æ•°æ®æˆåŠŸåï¼Œæˆ‘ä»¬åº”è¯¥è¦é‡Šæ”¾é”</span>                stringRedisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> data<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token comment">// åŠ é”å¤±è´¥</span>            <span class="token comment">// ä¼‘çœ +é‡è¯•</span>            <span class="token comment">// Thread.sleep(1000);</span>            <span class="token keyword">return</span> <span class="token function">getCatelog2JSONDbWithRedisLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><p>â€ƒâ€ƒä¸Šé¢æŸ¥è¯¢keyçš„å€¼å’Œåˆ é™¤keyå…¶å®ä¸æ˜¯ä¸€ä¸ªåŸå­æ€§æ“ä½œï¼Œè¿™å°±ä¼šå‡ºç°æˆ‘æŸ¥è¯¢å‡ºæ¥keyä¹‹åï¼Œæ—¶é—´è¿‡æœŸäº†ï¼Œç„¶åkeyè¢«åˆ é™¤äº†ï¼Œç„¶åå…¶ä»–çš„è¯·æ±‚åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„keyï¼Œç„¶ååŸæ¥çš„æ‰§è¡Œåˆ é™¤äº†è¿™ä¸ªkeyï¼Œåˆå‡ºç°äº†åˆ é™¤åˆ«äººkeyçš„æƒ…å†µã€‚è¿™æ—¶æˆ‘ä»¬éœ€è¦ä¿è¯æŸ¥è¯¢å’Œåˆ é™¤æ˜¯ä¸€ä¸ªåŸå­æ€§è¡Œä¸ºã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">getCatelog2JSONDbWithRedisLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> keys <span class="token operator">=</span> <span class="token string">"catalogJSON"</span><span class="token punctuation">;</span>        <span class="token comment">// åŠ é” åœ¨æ‰§è¡Œæ’å…¥æ“ä½œçš„åŒæ—¶è®¾ç½®äº†è¿‡æœŸæ—¶é—´</span>        <span class="token class-name">String</span> uuid <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Boolean</span> lock <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setIfAbsent</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">,</span> uuid<span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Catalog2VO</span><span class="token punctuation">></span><span class="token punctuation">></span></span> data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// åŠ é”æˆåŠŸ</span>                data <span class="token operator">=</span> <span class="token function">getDataForDB</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">String</span> srcipts <span class="token operator">=</span> <span class="token string">"if redis.call('get',KEYS[1]) == ARGV[1]  then return redis.call('del',KEYS[1]) else  return 0 end "</span><span class="token punctuation">;</span>                <span class="token comment">// é€šè¿‡Redisçš„luaè„šæœ¬å®ç° æŸ¥è¯¢å’Œåˆ é™¤æ“ä½œçš„åŸå­æ€§</span>                stringRedisTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DefaultRedisScript</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>srcipts<span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>                        <span class="token punctuation">,</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>uuid<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> data<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token comment">// åŠ é”å¤±è´¥</span>            <span class="token comment">// ä¼‘çœ +é‡è¯•</span>            <span class="token comment">// Thread.sleep(1000);</span>            <span class="token keyword">return</span> <span class="token function">getCatelog2JSONDbWithRedisLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><p><a href="https://space.bilibili.com/435498550">https://space.bilibili.com/435498550</a> åˆ†å¸ƒå¼é”çš„å®ç°</p><h2 id="4-Redissonåˆ†å¸ƒå¼é”">4.Redissonåˆ†å¸ƒå¼é”</h2><h3 id="4-1-Redissonçš„æ•´åˆ">4.1 Redissonçš„æ•´åˆ</h3><p>æ·»åŠ å¯¹åº”çš„ä¾èµ–</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.redisson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>redisson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.16.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>æ·»åŠ å¯¹åº”çš„é…ç½®ç±»</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRedisConfig</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">RedissonClient</span> <span class="token function">redissonClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Config</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é…ç½®è¿æ¥çš„ä¿¡æ¯</span>        config<span class="token punctuation">.</span><span class="token function">useSingleServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">"redis://192.168.56.100:6379"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">RedissonClient</span> redissonClient <span class="token operator">=</span> <span class="token class-name">Redisson</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span>  redissonClient<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="4-2-å¯é‡å…¥é”">4.2 å¯é‡å…¥é”</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/**     * 1.é”ä¼šè‡ªåŠ¨ç»­æœŸï¼Œå¦‚æœä¸šåŠ¡æ—¶é—´è¶…é•¿ï¼Œè¿è¡ŒæœŸé—´Redissonä¼šè‡ªåŠ¨ç»™é”é‡æ–°æ·»åŠ 30sï¼Œä¸ç”¨æ‹…å¿ƒä¸šåŠ¡æ—¶é—´ï¼Œé”è‡ªåŠ¨è¿‡å»è€Œé€ æˆçš„æ•°æ®å®‰å…¨é—®é¢˜     * 2.åŠ é”çš„ä¸šåŠ¡åªè¦æ‰§è¡Œå®Œæˆï¼Œ é‚£ä¹ˆå°±ä¸ä¼šç»™å½“å‰çš„é”ç»­æœŸï¼Œå³ä½¿æˆ‘ä»¬ä¸å»ä¸»åŠ¨çš„é‡Šæ”¾é”ï¼Œé”åœ¨é»˜è®¤30sä¹‹åä¹Ÿä¼šè‡ªåŠ¨çš„åˆ é™¤     * @return     */</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">RLock</span> myLock <span class="token operator">=</span> redissonClient<span class="token punctuation">.</span><span class="token function">getLock</span><span class="token punctuation">(</span><span class="token string">"myLock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åŠ é”</span>        myLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åŠ é”æˆåŠŸ...ä¸šåŠ¡å¤„ç†....."</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é‡Šæ”¾é”æˆåŠŸ..."</span> <span class="token operator">+</span>  <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// é‡Šæ”¾é”</span>            myLock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h3 id="4-3-è¯»å†™é”">4.3 è¯»å†™é”</h3><p>â€ƒâ€ƒæ ¹æ®ä¸šåŠ¡æ“ä½œæˆ‘ä»¬å¯ä»¥åˆ†ä¸ºè¯»å†™æ“ä½œï¼Œè¯»æ“ä½œå…¶å®ä¸ä¼šå½±å“æ•°æ®ï¼Œé‚£ä¹ˆå¦‚æœè¿˜å¯¹è¯»æ“ä½œåšä¸²è¡Œå¤„ç†ï¼Œæ•ˆç‡ä¼šå¾ˆä½ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡è¯»å†™é”æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/writer"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">writerValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">RReadWriteLock</span> readWriteLock <span class="token operator">=</span> redissonClient<span class="token punctuation">.</span><span class="token function">getReadWriteLock</span><span class="token punctuation">(</span><span class="token string">"rw-lock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åŠ å†™é”</span>        <span class="token class-name">RLock</span> rLock <span class="token operator">=</span> readWriteLock<span class="token punctuation">.</span><span class="token function">writeLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        rLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŠ å†™é”</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            s <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            rLock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/reader"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">RReadWriteLock</span> readWriteLock <span class="token operator">=</span> redissonClient<span class="token punctuation">.</span><span class="token function">getReadWriteLock</span><span class="token punctuation">(</span><span class="token string">"rw-lock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åŠ è¯»é”</span>        <span class="token class-name">RLock</span> rLock <span class="token operator">=</span> readWriteLock<span class="token punctuation">.</span><span class="token function">readLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            s <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            rLock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><p>åœ¨è¯»å†™é”ä¸­ï¼Œåªæœ‰è¯»è¯»çš„è¡Œä¸ºæ˜¯å…±äº«é”ï¼Œç›¸äº’ä¹‹é—´ä¸å½±å“ï¼Œåªè¦æœ‰å†™çš„è¡Œä¸ºå­˜åœ¨ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªäº’æ–¥é”(æ’ä»–é”)</p><h3 id="4-4-é—­é”">4.4 é—­é”</h3><p>åŸºäºRedissonçš„Redissonåˆ†å¸ƒå¼é—­é”ï¼ˆ<a href="http://static.javadoc.io/org.redisson/redisson/3.10.0/org/redisson/api/RCountDownLatch.html">CountDownLatch</a>ï¼‰Javaå¯¹è±¡ <code>RCountDownLatch</code>é‡‡ç”¨äº†ä¸ <code>java.util.concurrent.CountDownLatch</code>ç›¸ä¼¼çš„æ¥å£å’Œç”¨æ³•ï¼›</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/lockDoor"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">lockDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">RCountDownLatch</span> door <span class="token operator">=</span> redissonClient<span class="token punctuation">.</span><span class="token function">getCountDownLatch</span><span class="token punctuation">(</span><span class="token string">"door"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                door<span class="token punctuation">.</span><span class="token function">trySetCount</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            door<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰å¾…æ•°é‡é™ä½åˆ°0</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token string">"å…³é—¨ç†„ç¯..."</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/goHome/&#123;id&#125;"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">goHome</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">RCountDownLatch</span> door <span class="token operator">=</span> redissonClient<span class="token punctuation">.</span><span class="token function">getCountDownLatch</span><span class="token punctuation">(</span><span class="token string">"door"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        door<span class="token punctuation">.</span><span class="token function">countDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é€’å‡çš„æ“ä½œ</span>        <span class="token keyword">return</span> id <span class="token operator">+</span> <span class="token string">"ä¸‹ç­èµ°äºº"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h3 id="4-5-ä¿¡å·é‡-Semaphore">4.5 ä¿¡å·é‡(Semaphore)</h3><p>åŸºäºRedisçš„Redissonçš„åˆ†å¸ƒå¼ä¿¡å·é‡ï¼ˆ<a href="http://static.javadoc.io/org.redisson/redisson/3.10.0/org/redisson/api/RSemaphore.html">Semaphore</a>ï¼‰Javaå¯¹è±¡</p><p><code>RSemaphore</code>é‡‡ç”¨äº†ä¸ <code>java.util.concurrent.Semaphore</code>ç›¸ä¼¼çš„æ¥å£å’Œç”¨æ³•ã€‚åŒæ—¶è¿˜æä¾›äº†<a href="http://static.javadoc.io/org.redisson/redisson/3.10.0/org/redisson/api/RSemaphoreAsync.html">å¼‚æ­¥ï¼ˆAsyncï¼‰</a>ã€<a href="http://static.javadoc.io/org.redisson/redisson/3.10.0/org/redisson/api/RSemaphoreReactive.html">åå°„å¼ï¼ˆReactiveï¼‰</a>å’Œ<a href="http://static.javadoc.io/org.redisson/redisson/3.10.0/org/redisson/api/RSemaphoreRx.html">RxJava2æ ‡å‡†</a>çš„æ¥å£ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/park"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">RSemaphore</span> park <span class="token operator">=</span> redissonClient<span class="token punctuation">.</span><span class="token function">getSemaphore</span><span class="token punctuation">(</span><span class="token string">"park"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span> b <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// park.acquire(); // è·å–ä¿¡å· é˜»å¡åˆ°è·å–æˆåŠŸ</span>            b <span class="token operator">=</span> park<span class="token punctuation">.</span><span class="token function">tryAcquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è¿”å›è·å–æˆåŠŸè¿˜æ˜¯å¤±è´¥</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token string">"åœè½¦æ˜¯å¦æˆåŠŸ:"</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/release"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">RSemaphore</span> park <span class="token operator">=</span> redissonClient<span class="token punctuation">.</span><span class="token function">getSemaphore</span><span class="token punctuation">(</span><span class="token string">"park"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        park<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"é‡Šæ”¾äº†ä¸€ä¸ªè½¦ä½"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h3 id="4-6-ç¼“å­˜æ•°æ®ä¸€è‡´æ€§é—®é¢˜">4.6 ç¼“å­˜æ•°æ®ä¸€è‡´æ€§é—®é¢˜</h3><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/2ab29d3241704c48a77981b80538d037.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/572fcf3f04e1424eb951a40dc7f829fd.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/2e3b5c9978f245119dce2840b1363964.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/1462/1647243560000/224bafb6fb644d3db088c61b5338548f.png" alt="image.png"></p><p>é’ˆå¯¹äºä¸Šçš„ä¸¤ç§è§£å†³æ–¹æ¡ˆæˆ‘ä»¬æ€ä¹ˆé€‰æ‹©ï¼Ÿ</p><ol><li>ç¼“å­˜çš„æ‰€æœ‰æ•°æ®æˆ‘ä»¬éƒ½åŠ ä¸Šè¿‡æœŸæ—¶é—´ï¼Œæ•°æ®è¿‡æœŸä¹‹åä¸»åŠ¨è§¦å‘æ›´æ–°æ“ä½œ</li><li>ä½¿ç”¨è¯»å†™é”æ¥å¤„ç†ï¼Œè¯»è¯»çš„æ“ä½œæ˜¯ä¸ç›¸äº’å½±å“çš„</li><li>è¯»å†™é”</li></ol><p>æ— è®ºæ˜¯åŒå†™æ¨¡å¼è¿˜æ˜¯å¤±æ•ˆæ¨¡å¼ï¼Œéƒ½ä¼šå¯¼è‡´ç¼“å­˜çš„ä¸ä¸€è‡´é—®é¢˜ã€‚å³å¤šä¸ªå®ä¾‹åŒæ—¶æ›´æ–°ä¼šå‡ºäº‹ã€‚æ€ä¹ˆåŠï¼Ÿ</p><ol><li>å¦‚æœæ˜¯ç”¨æˆ·çº¬åº¦æ•°æ®ï¼ˆè®¢å•æ•°æ®ã€ç”¨æˆ·æ•°æ®ï¼‰ï¼Œè¿™ç§å¹¶å‘å‡ ç‡éå¸¸å°ï¼Œä¸ç”¨è€ƒè™‘è¿™ä¸ªé—®é¢˜ï¼Œç¼“å­˜æ•°æ®åŠ <br>ä¸Šè¿‡æœŸæ—¶é—´ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´è§¦å‘è¯»çš„ä¸»åŠ¨æ›´æ–°å³å¯</li><li>å¦‚æœæ˜¯èœå•ï¼Œå•†å“ä»‹ç»ç­‰åŸºç¡€æ•°æ®ï¼Œä¹Ÿå¯ä»¥å»ä½¿ç”¨canalè®¢é˜…binlogçš„æ–¹å¼ã€‚</li><li>ç¼“å­˜æ•°æ®+è¿‡æœŸæ—¶é—´ä¹Ÿè¶³å¤Ÿè§£å†³å¤§éƒ¨åˆ†ä¸šåŠ¡å¯¹äºç¼“å­˜çš„è¦æ±‚ã€‚</li><li>é€šè¿‡åŠ é”ä¿è¯å¹¶å‘è¯»å†™ï¼Œå†™å†™çš„æ—¶å€™æŒ‰é¡ºåºæ’å¥½é˜Ÿã€‚è¯»è¯»æ— æ‰€è°“ã€‚æ‰€ä»¥é€‚åˆä½¿ç”¨è¯»å†™é”ã€‚ï¼ˆä¸šåŠ¡ä¸å…³å¿ƒ<br>è„æ•°æ®ï¼Œå…è®¸ä¸´æ—¶è„æ•°æ®å¯å¿½ç•¥ï¼‰</li></ol><p>æ€»ç»“ï¼š</p><ul><li>æˆ‘ä»¬èƒ½æ”¾å…¥ç¼“å­˜çš„æ•°æ®æœ¬å°±ä¸åº”è¯¥æ˜¯å®æ—¶æ€§ã€ä¸€è‡´æ€§è¦æ±‚è¶…é«˜çš„ã€‚æ‰€ä»¥ç¼“å­˜æ•°æ®çš„æ—¶å€™åŠ ä¸Šè¿‡æœŸæ—¶é—´ï¼Œä¿è¯æ¯å¤©æ‹¿åˆ°å½“å‰æœ€æ–°æ•°æ®å³å¯ã€‚</li><li>æˆ‘ä»¬ä¸åº”è¯¥è¿‡åº¦è®¾è®¡ï¼Œå¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§</li><li>é‡åˆ°å®æ—¶æ€§ã€ä¸€è‡´æ€§è¦æ±‚é«˜çš„æ•°æ®ï¼Œå°±åº”è¯¥æŸ¥æ•°æ®åº“ï¼Œå³ä½¿æ…¢ç‚¹ã€‚</li></ul><h1>ä¸‰ã€SpringCache</h1><p>SpringCacheçš„ä¸è¶³ï¼š</p><p>1).è¯»æ¨¡å¼</p><ul><li>ç¼“å­˜ç©¿é€ï¼šæŸ¥è¯¢ä¸€ä¸ªnullçš„æ•°æ®ã€‚å¯ä»¥è§£å†³ cache-null-values=true</li><li>ç¼“å­˜å‡»ç©¿:å¤§é‡å¹¶å‘è¿›æ¥åŒæ—¶æŸ¥è¯¢ä¸€ä¸ªæ­£å¥½è¿‡æœŸçš„æ•°æ®ã€‚è§£å†³æ–¹æ¡ˆï¼šåˆ†å¸ƒå¼é” sync=true æœ¬åœ°é”</li><li>ç¼“å­˜é›ªå´©ï¼šå¤§é‡çš„keyåŒä¸€ä¸ªæ—¶é—´ç‚¹å¤±æ•ˆã€‚è§£å†³æ–¹æ¡ˆï¼šæ·»åŠ è¿‡æœŸæ—¶é—´ time-to-live=60000 æŒ‡å®šè¿‡æœŸæ—¶é—´</li></ul><p>2).å†™æ¨¡å¼</p><ul><li>è¯»å†™é”</li><li>å¼•å…¥canalï¼Œç›‘æ§binlogæ—¥å¿—æ–‡ä»¶æ¥åŒæ­¥æ›´æ–°æ•°æ®</li><li>è¯»å¤šå†™å¤šï¼Œç›´æ¥å»æ•°æ®åº“ä¸­è¯»å–æ•°æ®å³å¯</li></ul><p>æ€»ç»“ï¼š</p><ul><li>å¸¸è§„æ•°æ®(è¯»å¤šå†™å°‘)ï¼šè€Œä¸”å¯¹åŠæ—¶æ€§å’Œæ•°æ®çš„ä¸€è‡´æ€§è¦æ±‚ä¸é«˜çš„æƒ…å†µï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨SpringCache</li><li>ç‰¹æ®Šæƒ…å†µï¼šç‰¹æ®Šæƒ…å†µç‰¹æ®Šå¤„ç†ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼é” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¼“å­˜ </tag>
            
            <tag> åˆ†å¸ƒå¼é” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sentinel</title>
      <link href="/2024/03/17/23-Sentinel/"/>
      <url>/2024/03/17/23-Sentinel/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=e70dac99-88de-7ce0-3f63-ea224c2ac58f</cover>
      <date>Sun Mar 17 2024 14:26:18 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>Sentinel</h1><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/dd1bac7295f04f1d9339c3fd9d46984e.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/9835188751fa4996bbe38864a0b839fa.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/6efeb6700b8545e6927441d5809d5c72.png" alt="image.png"></p><h1>ä¸€ã€ç†”æ–­ã€é™çº§ã€é™æµ</h1><h2 id="1-ç†”æ–­">1.ç†”æ–­</h2><p>â€ƒâ€ƒ<strong>æœåŠ¡ç†”æ–­</strong>çš„ä½œç”¨ç±»ä¼¼äºæˆ‘ä»¬å®¶ç”¨çš„ä¿é™©ä¸ï¼Œå½“æŸæœåŠ¡å‡ºç°ä¸å¯ç”¨æˆ–å“åº”è¶…æ—¶çš„æƒ…å†µæ—¶ï¼Œä¸ºäº†é˜²æ­¢æ•´ä¸ªç³»ç»Ÿå‡ºç°é›ªå´©ï¼Œ<strong>æš‚æ—¶åœæ­¢</strong>å¯¹è¯¥æœåŠ¡çš„è°ƒç”¨ã€‚</p><p><strong>åœæ­¢</strong>æ˜¯è¯´ï¼Œå½“å‰æœåŠ¡ä¸€æ—¦å¯¹ä¸‹æ¸¸æœåŠ¡è¿›è¡Œç†”æ–­ï¼Œå½“è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œå½“å‰æœåŠ¡ä¸å†å¯¹ä¸‹æ¸¸æœåŠ¡è¿›è¡Œè°ƒç”¨ï¼Œè€Œæ˜¯ä½¿ç”¨è®¾å®šå¥½çš„ç­–ç•¥(å¦‚æ„å»ºé»˜è®¤å€¼)ç›´æ¥è¿”å›ã€‚</p><p><strong>æš‚æ—¶</strong>æ˜¯è¯´ï¼Œç†”æ–­åï¼Œå¹¶ä¸ä¼šä¸€ç›´ä¸å†è°ƒç”¨ä¸‹æ¸¸æœåŠ¡ï¼Œè€Œæ˜¯ä»¥ä¸€å®šçš„ç­–ç•¥(å¦‚æ¯åˆ†é’Ÿè°ƒç”¨ 10 æ¬¡ï¼Œè‹¥å‡è¿”å›æˆåŠŸï¼Œåˆ™å¢å¤§è°ƒç”¨é‡)è¯•æ¢è°ƒç”¨ä¸‹æ¸¸æœåŠ¡ï¼Œå½“ä¸‹æ¸¸æœåŠ¡æ¢å¤å¯ç”¨æ—¶ï¼Œè‡ªåŠ¨åœæ­¢ç†”æ–­ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/487dc0237f5e4bb180af0e9b9bd6175e.png" alt="image.png"></p><h2 id="2-é™çº§">2.é™çº§</h2><p>â€ƒâ€ƒ<strong>é™çº§</strong>æ˜¯æŒ‡å½“è‡ªèº«æœåŠ¡å‹åŠ›å¢å¤§æ—¶ï¼Œé‡‡å–ä¸€äº›æ‰‹æ®µï¼Œå¢å¼ºè‡ªèº«æœåŠ¡çš„å¤„ç†èƒ½åŠ›ï¼Œä»¥ä¿éšœæœåŠ¡çš„æŒç»­å¯ç”¨ã€‚æ¯”å¦‚ï¼Œä¸‹çº¿éæ ¸å¿ƒæœåŠ¡ä»¥ä¿è¯æ ¸å¿ƒæœåŠ¡çš„ç¨³å®šã€é™ä½å®æ—¶æ€§ã€é™ä½æ•°æ®ä¸€è‡´æ€§ã€‚</p><p>â€ƒâ€ƒä¸ºäº†é¢„é˜²æŸäº›åŠŸèƒ½å‡ºç°è´Ÿè·è¿‡è½½æˆ–è€…å“åº”æ…¢çš„æƒ…å†µï¼Œåœ¨å…¶å†…éƒ¨æš‚æ—¶èˆå¼ƒä¸€äº›éæ ¸å¿ƒæ¥å£å’Œæ•°æ®çš„è¯·æ±‚ï¼ˆå¦‚è¯„è®ºã€ç§¯åˆ†ï¼‰ï¼Œè€Œç›´æ¥è¿”å›ä¸€ä¸ªæå‰å‡†å¤‡å¥½çš„ fallback(é€€è·¯) é”™è¯¯å¤„ç†ä¿¡æ¯ã€‚é‡Šæ”¾CPUå’Œå†…å­˜èµ„æºï¼Œä»¥ä¿è¯æ•´ä¸ªç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯ç”¨æ€§ã€‚</p><h2 id="3-é™æµ">3.é™æµ</h2><p>â€ƒâ€ƒ<strong>é™æµ</strong>æ˜¯æŒ‡ä¸Šæ¸¸æœåŠ¡å¯¹æœ¬æœåŠ¡è¯·æ±‚ QPS è¶…è¿‡é˜™å€¼æ—¶ï¼Œé€šè¿‡ä¸€å®šçš„ç­–ç•¥(å¦‚å»¶è¿Ÿå¤„ç†ã€æ‹’ç»å¤„ç†)å¯¹ä¸Šæ¸¸æœåŠ¡çš„è¯·æ±‚é‡è¿›è¡Œé™åˆ¶ï¼Œä»¥ä¿è¯æœ¬æœåŠ¡ä¸è¢«å‹å®ï¼Œä»è€ŒæŒç»­æä¾›ç¨³å®šæœåŠ¡ã€‚å¸¸è§çš„é™æµç®—æ³•æœ‰æ»‘åŠ¨çª—å£ã€ä»¤ç‰Œæ¡¶ã€æ¼æ¡¶ç­‰ã€‚</p><h1>äºŒã€Sentinel</h1><h2 id="1-å…¶ä»–ç»„ä»¶å¯¹æ¯”">1.å…¶ä»–ç»„ä»¶å¯¹æ¯”</h2><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/a2c2950056424a4ab23ca48557c4b95b.png" alt="image.png"></p><h2 id="2-Sentinelä»‹ç»">2.Sentinelä»‹ç»</h2><p>â€ƒâ€ƒéšç€å¾®æœåŠ¡çš„æµè¡Œï¼ŒæœåŠ¡å’ŒæœåŠ¡ä¹‹é—´çš„ç¨³å®šæ€§å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚Sentinel ä»¥æµé‡ä¸ºåˆ‡å…¥ç‚¹ï¼Œä»æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤ç­‰å¤šä¸ªç»´åº¦ä¿æŠ¤æœåŠ¡çš„ç¨³å®šæ€§ã€‚</p><p>Sentinel çš„å†å²ï¼š</p><ul><li>2012 å¹´ï¼ŒSentinel è¯ç”Ÿï¼Œä¸»è¦åŠŸèƒ½ä¸ºå…¥å£æµé‡æ§åˆ¶ã€‚</li><li>2013-2017 å¹´ï¼ŒSentinel åœ¨é˜¿é‡Œå·´å·´é›†å›¢å†…éƒ¨è¿…é€Ÿå‘å±•ï¼Œæˆä¸ºåŸºç¡€æŠ€æœ¯æ¨¡å—ï¼Œè¦†ç›–äº†æ‰€æœ‰çš„æ ¸å¿ƒåœºæ™¯ã€‚Sentinel ä¹Ÿå› æ­¤ç§¯ç´¯äº†å¤§é‡çš„æµé‡å½’æ•´åœºæ™¯ä»¥åŠç”Ÿäº§å®è·µã€‚</li><li>2018 å¹´ï¼ŒSentinel å¼€æºï¼Œå¹¶æŒç»­æ¼”è¿›ã€‚</li><li>2019 å¹´ï¼ŒSentinel æœç€å¤šè¯­è¨€æ‰©å±•çš„æ–¹å‘ä¸æ–­æ¢ç´¢ï¼Œæ¨å‡º C++ åŸç”Ÿç‰ˆæœ¬ï¼ŒåŒæ—¶é’ˆå¯¹ Service Mesh åœºæ™¯ä¹Ÿæ¨å‡ºäº† Envoy é›†ç¾¤æµé‡æ§åˆ¶æ”¯æŒï¼Œä»¥è§£å†³ Service Mesh æ¶æ„ä¸‹å¤šè¯­è¨€é™æµçš„é—®é¢˜ã€‚</li><li>2020 å¹´ï¼Œæ¨å‡º Sentinel Go ç‰ˆæœ¬ï¼Œç»§ç»­æœç€äº‘åŸç”Ÿæ–¹å‘æ¼”è¿›ã€‚</li></ul><p>Sentinel åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†:</p><ul><li>æ ¸å¿ƒåº“ï¼ˆJava å®¢æˆ·ç«¯ï¼‰ä¸ä¾èµ–ä»»ä½•æ¡†æ¶/åº“ï¼Œèƒ½å¤Ÿè¿è¡Œäºæ‰€æœ‰ Java è¿è¡Œæ—¶ç¯å¢ƒï¼ŒåŒæ—¶å¯¹ Dubbo / Spring Cloud ç­‰æ¡†æ¶ä¹Ÿæœ‰è¾ƒå¥½çš„æ”¯æŒã€‚</li><li>æ§åˆ¶å°ï¼ˆDashboardï¼‰åŸºäº Spring Boot å¼€å‘ï¼Œæ‰“åŒ…åå¯ä»¥ç›´æ¥è¿è¡Œï¼Œä¸éœ€è¦é¢å¤–çš„ Tomcat ç­‰åº”ç”¨å®¹å™¨ã€‚</li></ul><p>Sentinel å¯ä»¥ç®€å•çš„åˆ†ä¸º Sentinel æ ¸å¿ƒåº“å’Œ Dashboardã€‚æ ¸å¿ƒåº“ä¸ä¾èµ– Dashboardï¼Œä½†æ˜¯ç»“åˆ Dashboard å¯ä»¥å–å¾—æœ€å¥½çš„æ•ˆæœã€‚</p><h2 id="3-åŸºæœ¬æ¦‚å¿µåŠä½œç”¨">3. åŸºæœ¬æ¦‚å¿µåŠä½œç”¨</h2><p>åŸºæœ¬æ¦‚å¿µï¼š</p><p><strong>èµ„æº</strong>ï¼šæ˜¯ Sentinel çš„å…³é”®æ¦‚å¿µã€‚å®ƒå¯ä»¥æ˜¯ Java åº”ç”¨ç¨‹åºä¸­çš„ä»»ä½•å†…å®¹ï¼Œä¾‹å¦‚ï¼Œç”±åº”ç”¨ç¨‹åºæä¾›çš„æœåŠ¡ï¼Œæˆ–ç”±åº”ç”¨ç¨‹åºè°ƒç”¨çš„å…¶å®ƒåº”ç”¨æä¾›çš„æœåŠ¡ï¼Œç”šè‡³å¯ä»¥æ˜¯ä¸€æ®µä»£ç ã€‚åœ¨æ¥ä¸‹æ¥çš„æ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬éƒ½ä¼šç”¨èµ„æºæ¥æè¿°ä»£ç å—ã€‚</p><p>åªè¦é€šè¿‡ Sentinel API å®šä¹‰çš„ä»£ç ï¼Œå°±æ˜¯èµ„æºï¼Œèƒ½å¤Ÿè¢« Sentinel ä¿æŠ¤èµ·æ¥ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•ç­¾åï¼ŒURLï¼Œç”šè‡³æœåŠ¡åç§°ä½œä¸ºèµ„æºåæ¥æ ‡ç¤ºèµ„æºã€‚</p><p><strong>è§„åˆ™</strong>ï¼šå›´ç»•èµ„æºçš„å®æ—¶çŠ¶æ€è®¾å®šçš„è§„åˆ™ï¼Œå¯ä»¥åŒ…æ‹¬æµé‡æ§åˆ¶è§„åˆ™ã€ç†”æ–­é™çº§è§„åˆ™ä»¥åŠç³»ç»Ÿä¿æŠ¤è§„åˆ™ã€‚æ‰€æœ‰è§„åˆ™å¯ä»¥åŠ¨æ€å®æ—¶è°ƒæ•´ã€‚</p><p>ä¸»è¦ä½œç”¨ï¼š</p><ol><li>æµé‡æ§åˆ¶</li><li>ç†”æ–­é™çº§</li><li>ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤</li></ol><p>æˆ‘ä»¬è¯´çš„èµ„æºï¼Œå¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼ŒæœåŠ¡ï¼ŒæœåŠ¡é‡Œçš„æ–¹æ³•ï¼Œç”šè‡³æ˜¯ä¸€æ®µä»£ç ã€‚ä½¿ç”¨ Sentinel æ¥è¿›è¡Œèµ„æºä¿æŠ¤ï¼Œä¸»è¦åˆ†ä¸ºå‡ ä¸ªæ­¥éª¤:</p><ol><li>å®šä¹‰èµ„æº</li><li>å®šä¹‰è§„åˆ™</li><li>æ£€éªŒè§„åˆ™æ˜¯å¦ç”Ÿæ•ˆ</li></ol><p>å…ˆæŠŠå¯èƒ½éœ€è¦ä¿æŠ¤çš„èµ„æºå®šä¹‰å¥½ï¼Œä¹‹åå†é…ç½®è§„åˆ™ã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼Œåªè¦æœ‰äº†èµ„æºï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»»ä½•æ—¶å€™çµæ´»åœ°å®šä¹‰å„ç§æµé‡æ§åˆ¶è§„åˆ™ã€‚åœ¨ç¼–ç çš„æ—¶å€™ï¼Œåªéœ€è¦è€ƒè™‘è¿™ä¸ªä»£ç æ˜¯å¦éœ€è¦ä¿æŠ¤ï¼Œå¦‚æœéœ€è¦ä¿æŠ¤ï¼Œå°±å°†ä¹‹å®šä¹‰ä¸ºä¸€ä¸ªèµ„æºã€‚</p><h2 id="4-Sentinelåº”ç”¨">4.Sentinelåº”ç”¨</h2><p><strong>å®˜æ–¹æ–‡æ¡£ï¼š</strong><a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/Sentinel">https://github.com/alibaba/spring-cloud-alibaba/wiki/Sentinel</a></p><h3 id="4-1-Sentinelæ§åˆ¶å°æ­å»º">4.1 Sentinelæ§åˆ¶å°æ­å»º</h3><p>ä¸‹è½½å¯¹åº”çš„jaråŒ…ï¼š<a href="https://github.com/alibaba/Sentinel/releases">https://github.com/alibaba/Sentinel/releases</a> ä¸‹è½½é€‚åˆè‡ªå·±çš„ç‰ˆæœ¬</p><p>é€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨ï¼š</p><p>java -Dserver.port=8080 -Dcsp.sentinel.dashboard.server=localhost:8080 -Dproject.name=sentinel-dashboard -jar sentinel-dashboard.jar</p><p>å¯åŠ¨åéœ€è¦è¾“å…¥è´¦å·å¯†ç :sentinel sentinel</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/49fcf9e0c3e14906a8690251cc56f12e.png" alt="image.png"></p><p>ç™»å½•æˆåŠŸåçœ‹åˆ°çš„é¡µé¢</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/5c2a2831d1d640e4a5b58afaf19ce8d8.png" alt="image.png"></p><h3 id="4-2-æœåŠ¡ç›‘æ§">4.2 æœåŠ¡ç›‘æ§</h3><p>â€ƒâ€ƒå¦‚æœæˆ‘ä»¬éœ€è¦æŠŠè‡ªå·±çš„æœåŠ¡è¢«Sentinelç›‘æ§ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ·»åŠ å¯¹åº”çš„ä¾èµ–</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-alibaba-sentinel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>ç„¶åéœ€è¦æ·»åŠ å¯¹åº”çš„å±æ€§ä¿¡æ¯</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/cd7d243a9e794fca924cf92767743750.png" alt="image.png"></p><p>ç„¶åæˆ‘ä»¬è®¿é—®è¯·æ±‚åï¼Œåœ¨æ§åˆ¶å°å°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ç›‘æ§ä¿¡æ¯äº†</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/3480d38e5b884feb9124c9a5f70db2d5.png" alt="image.png"></p><p>ç„¶åæˆ‘ä»¬å¯ä»¥æŒ‡å®šç®€å•çš„é™æµè§„åˆ™</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/9b3e31c7c62d44b88e1f33b7b059dd55.png" alt="image.png"></p><p>è¡¨ç¤º1ç§’ä¸­å†…åªèƒ½æœ‰ä¸€ä¸ªQPSã€‚è¶…è¿‡å°±é™æµ</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/41b4ee67dcd94f97b418f1cd6995220e.png" alt="image.png"></p><p>æµ‹è¯•æˆ‘ä»¬å‘é€è¯·æ±‚å¿«ä¸€ç‚¹å°±ä¼šå‡ºç°é™æµçš„å¤„ç†</p><h3 id="4-3-å®æ—¶ç›‘æ§">4.3 å®æ—¶ç›‘æ§</h3><p>â€ƒâ€ƒå®æ—¶ç›‘æ§è¿™å—éœ€è¦å¼•å…¥Acuator</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>endpointç«¯ç‚¹ï¼š</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/138b9b5bd9c84fafac3a5d59f237aa03.png" alt="image.png"></p><h3 id="4-4-é™æµä¿¡æ¯è‡ªå®šä¹‰">4.4 é™æµä¿¡æ¯è‡ªå®šä¹‰</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SentinelUrlBlockHandler</span> <span class="token keyword">implements</span> <span class="token class-name">BlockExceptionHandler</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> httpServletRequest<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> httpServletResponse<span class="token punctuation">,</span> <span class="token class-name">BlockException</span> e<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">R</span> r <span class="token operator">=</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token string">"è®¿é—®å¤ªå¿«ï¼Œç¨åå†è¯•!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        httpServletResponse<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/json;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        httpServletResponse<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/787a38ef6ed74a0487d3840dd5726728.png" alt="image.png"></p><h2 id="5-sentinelå®¹å™¨å®‰è£…">5.sentinelå®¹å™¨å®‰è£…</h2><p>â€ƒâ€ƒç›´æ¥åœ¨windowsä¸­å®‰è£…Sentinelå¯åŠ¨ç®¡ç†è¿˜æ˜¯ä¸å¤ªæ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯æŠŠSentinelå®‰è£…åœ¨Dockerå®¹å™¨ä¸­</p><p>æ‹‰å–å¯¹åº”çš„é•œåƒæ–‡ä»¶</p><pre class="language-none"><code class="language-none">docker pull bladex&#x2F;sentinel-dashboard:1.7.2</code></pre><p>å¯åŠ¨å®¹å™¨</p><pre class="language-none"><code class="language-none">docker run --name sentinel  -d -p 8858:8858 -d  bladex&#x2F;sentinel-dashboard:tagname</code></pre><p>å¼€æœºè‡ªå¯åŠ¨</p><pre class="language-none"><code class="language-none">docker update --restart&#x3D;always sentinel</code></pre><p>è®¿é—®ï¼š</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/e9bba308a5d4472785b22127b1dada1c.png" alt="image.png"></p><p>å¯¹åº”çš„å®¢æˆ·ç«¯çš„ä½¿ç”¨ï¼šéœ€è¦è°ƒæ•´çš„é…ç½®ä¿¡æ¯</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/38651d4f76e54bd3897612cce72307fa.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/8a693edbfea74beebbdce1452e98ad2e.png" alt="image.png"></p><h2 id="6-Sentinelç›‘æ§æ‰€æœ‰æœåŠ¡">6.Sentinelç›‘æ§æ‰€æœ‰æœåŠ¡</h2><p>â€ƒâ€ƒæˆ‘ä»¬éœ€è¦å¯¹æ¯ä¸€ä¸ªæœåŠ¡éƒ½æ·»åŠ Sentinelçš„é…ç½®ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/0b0803d77df441cb9987f1a65292801c.png" alt="image.png"></p><h2 id="7-ç†”æ–­é™çº§">7.ç†”æ–­é™çº§</h2><p><a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/Sentinel">https://github.com/alibaba/spring-cloud-alibaba/wiki/Sentinel</a></p><p>1.æ·»åŠ å¯¹åº”çš„é…ç½®</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/b6c715d576f44450a1820104f904a680.png" alt="image.png"></p><p>2.æ·»åŠ æ‰˜åº•çš„æ–¹æ³•</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/228cbe69f66744ebb9c91a0a360675f2.png" alt="image.png"></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/179aa155093f4ba98b74d9acd5833e9a.png" alt="image.png"></p><p>æ‰‹åŠ¨é…ç½®ï¼šå®¢æˆ·ç«¯çš„Sentinelç‰ˆæœ¬éœ€è¦å’ŒæœåŠ¡å™¨çš„ç‰ˆæœ¬è¦ä¿æŒä¸€è‡´ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/1462/1657258557058/e78b5c9f98b446108c53d1239b82166d.png" alt="image.png"></p><h2 id="8-è‡ªå®šä¹‰èµ„æº">8.è‡ªå®šä¹‰èµ„æº</h2><p><a href="https://github.com/alibaba/Sentinel/wiki/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8#%E5%AE%9A%E4%B9%89%E8%B5%84%E6%BA%90">https://github.com/alibaba/Sentinel/wiki/å¦‚ä½•ä½¿ç”¨#å®šä¹‰èµ„æº</a></p>]]></content>
      
      
      <categories>
          
          <category> SpringCloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Sentinel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†å¸ƒå¼ç¬”è®°ã€RabbitMQ+Zookeeper+FastDFSã€‘</title>
      <link href="/2022/05/16/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AC%94%E8%AE%B0/"/>
      <url>/2022/05/16/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AC%94%E8%AE%B0/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=7cb1083e-da28-750c-be1b-396f597eab87</cover>
      <date>Mon May 16 2022 10:25:28 GMT+0800</date>
      
        <content type="html"><![CDATA[<h2 id="åˆ†å¸ƒå¼-æ›´æ–°ing">åˆ†å¸ƒå¼(æ›´æ–°ing)</h2><p>åˆ†å¸ƒå¼é¡¹ç›®çš„æ•´åˆï¼š</p><p><a href="https://www.processon.com/view/link/6281b28c0e3e746f2b12d0ee">https://www.processon.com/view/link/6281b28c0e3e746f2b12d0ee</a></p><span id="more"></span><pre><code>åˆ†å¸ƒå¼æ¶æ„ä¼šæŠŠä¸€ä¸ªé¡¹ç›®æŒ‰ç…§ç‰¹å®šè¦æ±‚ï¼ˆå¤šæŒ‰ç…§æ¨¡å—æˆ–åŠŸèƒ½ï¼‰æ‹†åˆ†æˆå¤šä¸ªé¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®åˆ†åˆ«éƒ¨ç½²åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚</code></pre><h3 id="RMI">RMI</h3><p>è¿ç¨‹æ–¹æ³•è°ƒç”¨</p><img src="åˆ†å¸ƒå¼ç¬”è®°/image-20220516101255871.png" alt="image-20220516101255871" style="zoom:67%;" /><h4 id="API">API</h4><h5 id="Remote">Remote</h5><p>â€‹è¿œç¨‹è°ƒç”¨æ¥å£</p><h5 id="RemoteException">RemoteException</h5><p>â€‹æ‰¿äº†Remoteæ¥å£çš„æ¥å£ä¸­ï¼Œå¦‚æœæ–¹æ³•æ˜¯å…è®¸è¢«è¿œç¨‹è°ƒç”¨çš„ï¼Œéœ€è¦æŠ›å‡ºæ­¤å¼‚å¸¸ã€‚</p><h5 id="UnicastRemoteObject">UnicastRemoteObject</h5><p>â€‹java.rmi.server.UnicastRemoteObject<br>â€‹æ­¤ç±»å®ç°äº†Remoteæ¥å£å’ŒSerializableæ¥å£ã€‚<br>â€‹è‡ªå®šä¹‰æ¥å£å®ç°ç±»é™¤äº†å®ç°è‡ªå®šä¹‰æ¥å£è¿˜éœ€è¦ç»§æ‰¿æ­¤ç±»ã€‚</p><h5 id="LocateRegistry">LocateRegistry</h5><p>â€‹java.rmi.registry.LocateRegistry<br>â€‹å¯ä»¥é€šè¿‡LocateRegistryåœ¨æœ¬æœºä¸Šåˆ›å»ºRegistryï¼Œé€šè¿‡ç‰¹å®šçš„ç«¯å£å°±å¯ä»¥è®¿é—®è¿™ä¸ªRegistryã€‚</p><h5 id="Naming">Naming</h5><p>â€‹java.rmi.Naming<br>â€‹Namingå®šä¹‰äº†å‘å¸ƒå†…å®¹å¯è®¿é—®RMIåç§°ã€‚ä¹Ÿæ˜¯é€šè¿‡Namingè·å–åˆ°æŒ‡å®šçš„è¿œç¨‹æ–¹æ³•ã€‚</p><h3 id="zookeeperæ³¨å†Œä¸­å¿ƒ">zookeeperæ³¨å†Œä¸­å¿ƒ</h3><img src="åˆ†å¸ƒå¼ç¬”è®°/image-20220516101724270.png" alt="image-20220516101724270" style="zoom:67%;" /><h4 id="å®¢æˆ·ç«¯å¸¸ç”¨å‘½ä»¤">å®¢æˆ·ç«¯å¸¸ç”¨å‘½ä»¤</h4><pre class="language-none"><code class="language-none">ls [-s][-R] &#x2F;pathæŸ¥çœ‹åˆ—è¡¨get [-s] &#x2F;pathæŸ¥çœ‹å†…å®¹create &#x2F;path [data]åˆ›å»ºæŒ‡å®šè·¯å¾„ä¿¡æ¯set &#x2F;path dataè®¾ç½®èŠ‚ç‚¹å†…å®¹delete &#x2F;pathåˆ é™¤èŠ‚ç‚¹</code></pre><h4 id="æ³¨å†Œå†…å®¹">æ³¨å†Œå†…å®¹</h4><p>åˆ›å»º/demo<br>2     æ·»åŠ ä¾èµ–<br>3     ç¼–å†™ä»£ç <br>åˆ›å»ºzkå¯¹è±¡è·å–è¿æ¥<br>new watcher()å†…éƒ¨é‡å†™process()<br>å‘å¸ƒä»»åŠ¡create()<br>ZooDefs.Ids.OPEN_ACL_UNSAFE<br>è¡¨ç¤ºæƒé™<br>CreateMode.PERSISTENT_SEQUENTIAL<br>æ°¸ä¹…å­˜å‚¨ï¼Œæ–‡ä»¶å†…å®¹ç¼–å·é€’å¢<br>4     æŸ¥çœ‹ä¸Šä¼ æ•°æ®</p><h4 id="æŸ¥çœ‹å†…å®¹">æŸ¥çœ‹å†…å®¹</h4><p>â€‹åˆ›å»ºzkå¯¹è±¡è·å–è¿æ¥<br>â€‹new watcher()å†…éƒ¨é‡å†™process()<br>â€‹è·å–åˆ—è¡¨<br>â€‹zookeeper.getChildren(â€œ/demoâ€, false)<br>â€‹zookeeper.getData(â€œ/demo/â€ + child, false, null);</p><p>RPCå®ç°(RMI+Zookeeper)</p><h3 id="Dubbo">Dubbo</h3><img src="åˆ†å¸ƒå¼ç¬”è®°/image-20220516101839047.png" alt="image-20220516101839047" style="zoom:67%;" /><p>â€‹åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶<br>â€‹è´Ÿè½½å‡è¡¡<br>â€‹è´Ÿè½½å‡è¡¡æ˜¯åœ¨é›†ç¾¤å‰æä¸‹ï¼Œå½“è®¿é—®æ•´ä¸ªé›†ç¾¤æ—¶ï¼Œé›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹è¢«è®¿é—®æ¬¡æ•°æˆ–é¢‘ç‡çš„è§„åˆ™ã€‚<br>â€‹è®¾ç½®<br>â€‹@Reference å®¢æˆ·ç«¯<br>â€‹æ³¨å…¥çš„æ˜¯åˆ†å¸ƒå¼ä¸­çš„è¿œç¨‹æœåŠ¡å¯¹è±¡<br>â€‹@Reference(loadbalance = â€œroundrobinâ€)<br>â€‹è°ƒç”¨çš„æœåŠ¡é‡‡ç”¨çš„è´Ÿè½½å‡è¡¡ç®—æ³•<br>â€‹@ServiceæœåŠ¡ç«¯<br>â€‹@Service(loadbalance = â€œrandomâ€)<br>â€‹å½“å‰æœåŠ¡é‡‡ç”¨çš„è´Ÿè½½å‡è¡¡ç®—æ³•<br>â€‹@Service(weight = 4)<br>â€‹è®¾ç½®æƒé‡<br>â€‹å†…ç½®ç­–ç•¥<br>â€‹Random<br>â€‹éšæœºã€‚éšæœºè®¿é—®é›†ç¾¤ä¸­èŠ‚ç‚¹ã€‚è®¿é—®æ¦‚ç‡å’Œæƒé‡æœ‰å…³ã€‚<br>â€‹RoundRobin<br>â€‹è½®è¯¢ã€‚è®¿é—®é¢‘ç‡å’Œæƒé‡æœ‰å…³ã€‚<br>â€‹æ€§èƒ½å¥½çš„æœåŠ¡å™¨æƒé‡åº”è¯¥é«˜ä¸€äº›ã€‚<br>â€‹LeastActive<br>â€‹æ´»è·ƒæ•°ç›¸åŒçš„éšæœº,æ´»è·ƒæ•°é«˜çš„æ”¾å‰é¢ã€‚<br>â€‹ConsistentHash<br>â€‹hash ç›¸åŒå‚æ•°å‘é€åˆ°åŒä¸€ä¸ªæä¾›è€…<br>â€‹å®Œæ•´é¡¹ç›®<br>â€‹provider<br>â€‹dubbo.protocal.port<br>â€‹éœ€è¦è®¾ç½®ç«¯å£</p><h3 id="RabbitMQ">RabbitMQ</h3><img src="åˆ†å¸ƒå¼ç¬”è®°/image-20220516101905531.png" alt="image-20220516101905531" style="zoom:67%;" /><p>â€‹ç”±Erlangè¯­è¨€ç¼–å†™çš„åŸºäºAMQPçš„æ¶ˆæ¯ä¸­é—´ä»¶ã€‚<br>â€‹æ¶ˆæ¯ä¸­é—´ä»¶ä½œä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿé‡è¦ç»„ä»¶ä¹‹ä¸€ï¼Œå¯ä»¥è§£å†³åº”ç”¨è€¦åˆï¼Œå¼‚æ­¥æ¶ˆæ¯ï¼Œæµé‡å‰Šå³°ç­‰é—®é¢˜ã€‚<br>â€‹è´¦å·ç®¡ç†<br>â€‹1 åˆ›å»ºè´¦æˆ·<br>â€‹./rabbitmqctl add_user username password<br>â€‹2 ç»™ç”¨æˆ·æˆäºˆç®¡ç†å‘˜è§’è‰²</p><p>./rabbitmqctl set_user_tags mashibing administrator</p><p>â€‹3 ç»™ç”¨æˆ·æˆæƒ<br>â€‹./rabbitmqctl set_permissions -p â€œ/â€ mashibing â€œ.<em>&quot; &quot;.</em>â€ â€œ.*â€<br>â€‹4 ç™»å½•<br>â€‹äº¤æ¢æœº<br>â€‹direct é»˜è®¤<br>â€‹fanout å¹¿æ’­<br>â€‹FanoutExchage<br>â€‹Binding<br>â€‹ç»‘å®šäº¤æ¢å™¨å’Œé˜Ÿåˆ—<br>â€‹BindingBuilder<br>â€‹Bindæ„é€ å™¨<br>â€‹amq.fanout<br>â€‹å†…ç½®fanoutäº¤æ¢å™¨åç§°<br>â€‹topicä¸»é¢˜<br>â€‹è¿è¡ŒRoutingKeyåŒ…å«åŒ¹é…è§„åˆ™<br>â€‹bindingæ–¹æ³•é‡Œé¢ç¬¬äºŒä¸ªå‚æ•°<br>â€‹BindingBuilder.bind(topicQueue).to(topicExchange).with(â€œcom.aâ€);<br>â€‹Headeré¦–éƒ¨</p><h3 id="FastDFS">FastDFS</h3><p>â€‹åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ<br>â€‹æ¶æ„<br>â€‹è§’è‰²<br>â€‹client<br>â€‹Tracker Server<br>â€‹è·Ÿè¸ªæœåŠ¡å™¨<br>â€‹è°ƒåº¦ è´Ÿè½½å‡è¡¡ã€è®°å½•é›†ç¾¤çŠ¶æ€ä¿¡æ¯ã€è¿æ¥clientå’Œstorageçš„æ¢çº½<br>â€‹Storage Server<br>â€‹å­˜å‚¨æœåŠ¡å™¨<br>â€‹æ–‡ä»¶å’Œæ–‡ä»¶å±æ€§å­˜å‚¨çš„åœ°æ–¹<br>â€‹æ–‡ä»¶ä¸Šä¼ æµç¨‹<br>â€‹1.  å®¢æˆ·ç«¯è®¿é—®Tracker<br>â€‹2.  Tracker è¿”å›Storageçš„ipå’Œç«¯å£<br>â€‹3.  å®¢æˆ·ç«¯ç›´æ¥è®¿é—®Storageï¼ŒæŠŠæ–‡ä»¶å†…å®¹å’Œå…ƒæ•°æ®å‘é€è¿‡å»ã€‚<br>â€‹4.  Storageè¿”å›æ–‡ä»¶å­˜å‚¨idã€‚åŒ…å«äº†ç»„åå’Œæ–‡ä»¶å</p><h3 id="Nginx">Nginx</h3><p>â€‹åå‘ä»£ç†æœåŠ¡<br>â€‹ä»£ç†æ–¹å¼<br>â€‹æ­£å‘<br>â€‹æ¶è®¾åœ¨å®¢æˆ·æœºå’Œç›®æ ‡ä¸»æœºä¹‹é—´<br>â€‹ä»£ç†å®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯ä¸çŸ¥é“å®é™…å‘èµ·è¯·æ±‚çš„å®¢æˆ·ç«¯ï¼›<br>â€‹åå‘<br>â€‹æ¶è®¾åœ¨æœåŠ¡å™¨ç«¯ï¼›<br>â€‹ä»£ç†æœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯ä¸çŸ¥é“å®é™…æä¾›æœåŠ¡çš„æœåŠ¡ç«¯ï¼›<br>â€‹ä½œç”¨<br>â€‹HTTPåè®®ä»£ç†<br>â€‹  æ­å»ºè™šæ‹Ÿä¸»æœº<br>â€‹è´Ÿè½½å‡è¡¡</p>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> RabbitMQ </tag>
            
            <tag> Zookeeper </tag>
            
            <tag> FastDFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysql8é¡¹ç›®è¿æ¥å‡ºé”™&amp;ç«¯å£ä¸º0</title>
      <link href="/2022/05/10/mysql8%E9%A1%B9%E7%9B%AE%E8%BF%9E%E6%8E%A5%E5%87%BA%E9%94%99-%E7%AB%AF%E5%8F%A3%E4%B8%BA0/"/>
      <url>/2022/05/10/mysql8%E9%A1%B9%E7%9B%AE%E8%BF%9E%E6%8E%A5%E5%87%BA%E9%94%99-%E7%AB%AF%E5%8F%A3%E4%B8%BA0/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=715553c1-5608-8de3-796f-ae754c985f57</cover>
      <date>Tue May 10 2022 14:23:51 GMT+0800</date>
      
        <content type="html"><![CDATA[<h2 id="MySQL8ç«¯å£ä¸º0">MySQL8ç«¯å£ä¸º0</h2><p>ä»Šå¤©è¿æ¥æ•°æ®åº“çš„æ—¶å€™ï¼Œå¯†ç æ­£ç¡®ï¼Œé…ç½®ä¹Ÿæ²¡æ¯›ç—…ï¼Œä½†æ˜¯å°±æ˜¯è¿ä¸ä¸Š</p><span id="more"></span><img src="mysql8é¡¹ç›®è¿æ¥å‡ºé”™-ç«¯å£ä¸º0/image-20220510141117583.png" alt="image-20220510141117583" style="zoom:67%;" /><p>äºæ˜¯å»æŸ¥äº†æŸ¥ç«¯å£</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">show global variables like &#39;port&#39;;</code></pre><p>æ˜¾ç¤º</p><pre class="language-bash" data-language="bash"><code class="language-bash">+---------------+-------+<span class="token operator">|</span> Variable_name <span class="token operator">|</span> Value <span class="token operator">|</span>+---------------+-------+<span class="token operator">|</span> port          <span class="token operator">|</span> <span class="token number">0</span>     <span class="token operator">|</span>+---------------+-------+<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span></code></pre><p>ç«Ÿç„¶ä¸æ˜¯3306</p><p>å»ç½‘ä¸ŠæŸ¥èµ„æ–™å‘ç°å¯èƒ½æ˜¯ä¹‹å‰æŸäº›æ“ä½œè®©skip-networkingæ‰“å¼€äº†</p><pre class="language-bash" data-language="bash"><code class="language-bash">mysql<span class="token operator">></span> SHOW VARIABLES LIKE <span class="token string">"skip_networking"</span><span class="token punctuation">;</span>+-----------------+-------+<span class="token operator">|</span> Variable_name   <span class="token operator">|</span> Value <span class="token operator">|</span>+-----------------+-------+<span class="token operator">|</span> skip_networking <span class="token operator">|</span> ON    <span class="token operator">|</span>+-----------------+-------+<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span></code></pre><p>æŸ¥äº†æœç„¶</p><h3 id="è§£å†³åŠæ³•">è§£å†³åŠæ³•</h3><p>éœ€è¦å°†my.cnfä¸­çš„skip_networkingæ³¨é‡Šæ‰</p><p>è¿˜æ˜¯ä¸è¡Œï¼ï¼ï¼</p><p>æœ€ç»ˆ æˆ‘è¿˜æ˜¯é‡è£…äº†mysql5</p><h4 id="é‡è£…è¿‡ç¨‹">é‡è£…è¿‡ç¨‹</h4><p>å¸è½½åŸæ¥çš„mysql8 åˆ å¹²å‡€ç‚¹ æˆ‘ä¸»è¦åˆ äº†ä¸‹é¢è¿™äº›</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">rm</span> /usr/local/mysql<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /Library/StartupItems/M<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /Library/PreferencePanes/My*<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /Library/Receipts/mysql<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/db/receipts/com.mysql.<span class="token function">sudo</span> <span class="token function">rm</span> /tmp/mysql.sock<span class="token function">sudo</span> <span class="token function">rm</span> /tmp/mysql.sock.lock<span class="token function">sudo</span> <span class="token function">rm</span> /tmp/mysqlx.sock.lock<span class="token function">sudo</span> <span class="token function">rm</span> /tmp/mysqlx.sock</code></pre><p>å®‰è£…åœ°å€<a href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a></p><img src="mysql8é¡¹ç›®è¿æ¥å‡ºé”™-ç«¯å£ä¸º0/image-20220510141312668.png" alt="image-20220510141312668" style="zoom: 50%;" /><p>ç„¶åæ³¨æ„å®‰è£…å®Œæ¯•å¼€å¯mysqlæœåŠ¡</p><p>åœ¨ç³»ç»Ÿåå¥½é‡Œé¢</p><img src="mysql8é¡¹ç›®è¿æ¥å‡ºé”™-ç«¯å£ä¸º0/image-20220510141750537.png" alt="image-20220510141750537" style="zoom: 50%;" /><img src="mysql8é¡¹ç›®è¿æ¥å‡ºé”™-ç«¯å£ä¸º0/image-20220510141819985.png" alt="image-20220510141819985" style="zoom: 50%;" /><p>ç„¶ååœ¨itermé‡Œé¢å…ˆè¦è®¾ç½®mysqlå‘½ä»¤è¡Œ</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">mysql</span><span class="token operator">=</span>/usr/local/mysql/bin/mysql<span class="token builtin class-name">alias</span> <span class="token assign-left variable">mysqladmin</span><span class="token operator">=</span>/usr/local/mysql/bin/mysqladmin</code></pre><p>è®¾ç½®æ–°å¯†ç </p><pre class="language-bash" data-language="bash"><code class="language-bash">mysqladmin <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span> password ä½ çš„å¯†ç </code></pre><p>ç„¶åè¾“å…¥åˆå§‹å¯†ç ï¼Œåº”ä¸ºmysql5.7ä¼šåœ¨é€šçŸ¥æ é‡Œé¢æŠŠåˆå§‹çš„å¯†ç å‘é€ç»™ä½ </p><p>è¿™æ ·å°±ä¿®æ”¹å®Œäº†ã€‚</p><p>æŸ¥çœ‹æ•°æ®åº“ç«¯å£ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">mysql<span class="token operator">></span> show global variables like <span class="token string">'port'</span><span class="token punctuation">;</span>+---------------+-------+<span class="token operator">|</span> Variable_name <span class="token operator">|</span> Value <span class="token operator">|</span>+---------------+-------+<span class="token operator">|</span> port          <span class="token operator">|</span> <span class="token number">3306</span>  <span class="token operator">|</span>+---------------+-------+<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span></code></pre><p>!!!ç«¯å£ç»ˆäºå¯¹äº†ï¼Œæ‰“å¼€é¡¹ç›®è¿æ¥æ•°æ®åº“ç»ˆäºæ²¡æœ‰å‡ºé”™äº†ï¼ï¼ï¼</p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> macOS </tag>
            
            <tag> è¸©é›· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å››æœˆé¢ç»</title>
      <link href="/2022/05/09/%E5%9B%9B%E6%9C%88%E9%9D%A2%E7%BB%8F/"/>
      <url>/2022/05/09/%E5%9B%9B%E6%9C%88%E9%9D%A2%E7%BB%8F/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=30dede81-d2dd-f743-d28f-dc4e150b2df1</cover>
      <date>Mon May 09 2022 10:01:20 GMT+0800</date>
      
        <content type="html"><![CDATA[<p>è¿™æ¬¡æ˜¥æ‹›æ‹–åˆ°å››æœˆæ‰é¢â€¦å…ˆå·²æ”¶åˆ°å…´ä¸šæ•°é‡‘ã€åä¸ºã€å¹³å®‰çš„offerï¼Œç­¾äº†å¹³å®‰ã€‚</p><p>æ€»ç»“å‡ ç¯‡æˆ‘è®¤ä¸ºæœ‰å¿…è¦è®°å½•çš„é¢ç»ï¼šå­—èŠ‚ã€åä¸ºï¼ˆæœ‰æ—¶é—´å°±æ›´æ–°ï¼‰</p><span id="more"></span><h2 id="å­—èŠ‚é¢ç»">å­—èŠ‚é¢ç»</h2><p><strong>ç¬¬ä¸€æ¬¡é¢å­—èŠ‚ çœŸçš„å¾ˆç´§å¼  å…¶ä»–é¢è¯•ä¹Ÿå°±ç»å†è¿‡ä¸€ä¸¤è½® é¢è¯•å°ç™½çœŸçš„å®³æ€• æ²¡æƒ³åˆ°å­—èŠ‚ä¸€é¢æ²¡æœ‰å¾ˆåˆé’»ä¹Ÿä¸ä¼šå¾ˆéš¾ éƒ½æ˜¯ç®€å•çš„å…«è‚¡ <a href="">ç®—æ³•</a>ä¹Ÿæ˜¯ç®€å•dp</strong></p><ol><li><p>è‡ªæˆ‘ä»‹ç»</p></li><li><p>hashmap put() å·¥ä½œæµç¨‹ ï¼ˆè®²äº†ä¸€ä¸‹æºç ï¼‰</p></li><li><p>concurrenthashmapæ€ä¹ˆåšåˆ°å¹¶å‘å®‰å…¨ï¼ˆç®€å•è®²äº†1.7/8 çš„é”å®ç°ï¼‰</p></li><li><p>é¢è¯•å®˜ä»ä¸Šé¢å¼•å‡ºCAS å«æˆ‘æè¿°ä¸€ä¸‹ï¼ˆä¹è§‚ã€é¢„å€¼ã€æ–°å€¼ã€åº•å±‚åŸç†ï¼‰</p></li><li><p>javaçš„å…¶ä»–é”ï¼ˆå·´æ‹‰å·´æ‹‰è®²äº†sychã€AQSæ¡†æ¶ä¸‹çš„å‡ ä¸ªé”ï¼‰</p></li><li><p>ThreadLocalä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼ˆè¯´äº†ä¸‹åº•å±‚ã€å£°æ˜å¼äº‹åŠ¡ä¿è¯åŒä¸€ä¸ªconnectionï¼‰</p></li><li><p>åƒåœ¾å›æ”¶ï¼ˆç®—æ³•ã€å›æ”¶å™¨éƒ½ç®€å•è®²äº†è®²ï¼‰</p></li><li><p>ç½‘ç»œhttpå¤´æœ‰å“ªäº›å­—æ®µã€é•¿è¿æ¥çŸ­è¿æ¥ã€çŠ¶æ€ç ã€httpsåŸç†ã€hashä¸å¯é€†ï¼ˆhttpè¯·æ±‚å¤´è¿™é‡Œæˆ‘çœŸçš„å¼±ï¼Œå…·ä½“å°±ç§é’¥å…¬é’¥ï¼ŒCAè¯ä¹¦è¿™é‡Œè®²çš„è¿˜å¯ä»¥ğŸ˜­ ç„¶åè¿˜æŠŠhashè¯´æˆå¯é€†ğŸ˜­</p></li><li><p>TCPä¸‰æ¬¡ã€å››æ¬¡ï¼›timewaitçŠ¶æ€åªæœ‰å®¢æˆ·ç«¯å—ï¼Ÿï¼ˆè¿˜å¥½çŒœå¯¹äº†ï¼Œtimewaitåªæ˜¯é’ˆå¯¹ä¸€ä¸ªå‘èµ·è€…ï¼‰ã€å¯é æ€§æ€ä¹ˆç†è§£</p></li><li><p>I/Oå¤šè·¯å¤ç”¨ï¼Œå“ªäº›åœ°æ–¹ç”¨åˆ°äº†ï¼ˆselect poll epoll ï¼Œredisï¼‰</p></li><li><p>æ©ç ã€ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆç½‘ç»œçœŸçš„æˆ‘è½¯è‚‹ åé¢è¦æ¶è¡¥å‘œå‘œ</p></li><li><p>å † å’Œå»ºå †è¿‡ç¨‹ã€ æ’åºæœ‰å“ªäº›ã€å¿«æ’è¿‡ç¨‹</p></li><li><p>ç®—æ³•ï¼šæœ€å°è·¯å¾„å’Œï¼Œè¦æ±‚è¿”å›è·¯å¾„ï¼ˆè¿”å›è·¯å¾„è¿™é‡Œæˆ‘æ­»è„‘é˜” å¯ä»¥forå¾ªç¯dpå°±è¿”å›çš„ æˆ‘åœ¨é‚£duoé”®ç›˜duoåŠå¤©å»æäº†ä¸€ä¸ªdfså»åŸçŸ©é˜µæ‰¾ğŸ˜“ æœ€åé¢è¯•å®˜çœ‹å‡ºæ¥æˆ‘æƒ³å¹²å•¥ å°±æç¤ºäº†ä¸€ä¸‹ æˆ‘å°±æ˜¯ä¸€æ•´ä¸ªæç„¶å¤§æ‚Ÿï¼‰</p></li></ol><p><strong>åé—®</strong></p><p>å› ä¸ºé¢è¯•ç»éªŒå¾ˆå°‘ï¼Œå°±é—®äº†é¢è¯•å®˜å¯ä¸å¯ä»¥è¯´ä¸€ä¸‹æˆ‘éœ€è¦æ³¨æ„çš„ç‚¹ï¼Œé¢è¯•å®˜è¯´å¾ˆå¤šæ—¶å€™çŸ¥è¯†æ¯”æŠ€å·§æ›´é‡è¦å§ï¼Œå¾ˆå®è¯šå°±ç»™æˆ‘è®²é¢è¯•è¦æŠŠçŸ¥è¯†æŒæ¡å…¨é¢ï¼Œå°±æ¯”å¦‚æˆ‘ç½‘ç»œhttpè¿™æ–¹é¢å°±éœ€è¦åŠ å¼ºã€‚</p><h4 id="æ€»ç»“">æ€»ç»“</h4><p>æ•´ä½“è¿˜æ˜¯ç½‘ç»œæ–¹é¢å‡ºé—®é¢˜ï¼Œæ„Ÿè§‰é¢è¯•å®˜å¾ˆè€å¿ƒå¬æˆ‘æ‰¯ï¼Œæ²¡æœ‰åƒä¹‹å‰é¢çš„æŸå…¬å¸è€æ‰“æ–­æˆ‘ï¼ŒçœŸçš„æŒºæ¸©æŸ”çš„ï¼›ç„¶åæˆ‘è§‰å¾—åæœŸåº”è¯¥å¤šæ·±å…¥ä¸€ä¸‹çŸ¥è¯†ï¼ŒæŠŠé—®é¢˜è¯´å¾—æ›´åŠ å…¨é¢ï¼Œä¸€æ–¹é¢ç•™å¥½å°è±¡ï¼Œä¸€æ–¹é¢å°±å¯ä»¥è®©é¢è¯•å®˜å°‘é—®ç‚¹ï¼Œå°‘æš´éœ²è‡ªå·±çš„ç¼ºç‚¹ï¼Œç½‘ç»œæ–¹é¢è¡¥ä¸€è¡¥</p><p>---------</p><p>äºŒé¢ 4.25</p><p>è‡ªæˆ‘ä»‹ç»ä¹‹åæŒ‘äº†ä¸€ä¸ªé¡¹ç›®è®²ï¼Œé€šè¿‡é¡¹ç›®é—®äº†ä¸€äº›æ‰©å±•çš„ç‚¹ åœ¨mybatisä¸€äº›è¯­å¥çš„ç»†èŠ‚ä¸Šæ²¡æœ‰ç­”å‡ºæ¥ å¤§æ¦‚æ˜¯35minå·¦å³å°±é¢å®Œäº† é¢è¯•å®˜å¾ˆæ¸©æŸ” ä½†æ˜¯å› ä¸ºç»†èŠ‚ æˆ‘è§‰å¾—å¤šåŠå¯„äº†</p><hr><p>åç»­æ‰“ç”µè¯ææˆ‘å»é¢è¯•è¯´æ˜¯é‡åº†å’ŒåŒ—äº¬çš„å²—ä½ï¼Œæˆ‘å› ä¸ºå·²ç»ç­¾äº†ï¼Œä¸æƒ³å»å·ï¼Œæ”¾å¼ƒäº†</p><h2 id="åä¸ºé¢ç»-å·²offer">åä¸ºé¢ç»(å·²offer)</h2><p>å¤§æ¦‚æµç¨‹</p><img src="å››æœˆé¢ç»/image-20220515102055742.png" alt="image-20220515102055742" style="zoom:67%;" /><h3 id="æœºè€ƒ">æœºè€ƒ</h3><p>æ€»å…±ä¸‰é“ç®—æ³•ï¼Œç¬¬ä¸€é¢˜å°±æ˜¯ç®€å•çš„å­—ç¬¦ä¸²è½¬æ¢å™¨ï¼Œç¬¬äºŒé¢˜å¿˜äº†ï¼Œç¬¬ä¸‰é¢˜æ˜¯ä¸€ä¸ªè·¯å¾„é¢˜ï¼Œåº”è¯¥ä¼šç”¨åˆ°å›¾</p><p>ç¬¬ä¸€é¢˜è¿‡äº†ç™¾åˆ†ä¹‹80% ç¬¬ä¸‰é¢˜ è¿‡äº†15%</p><p>æ€»åˆ†ä¸€ç™¾åˆ†ä»¥ä¸Šå°±è¿‡äº†ï¼Œè¿™ä¸ªæ¯”è¾ƒå¥½è¿‡</p><h3 id="æ€§æ ¼æµ‹è¯„">æ€§æ ¼æµ‹è¯„</h3><p>å¬è¯´åä¸ºçš„æ€§æ ¼æµ‹è¯„è¿˜åˆ·äº†å¾ˆå¤šäººï¼Œåæ­£ç§˜è¯€æˆ‘è®¤ä¸ºå°±æ˜¯å®è¯å®è¯´ï¼Œç„¶ååœ¨30åˆ†é’Ÿå·¦å³åšå®Œã€‚</p><h3 id="ä¸“ä¸šé¢è¯•1-4-16">ä¸“ä¸šé¢è¯•1 4.16</h3><p>æœ¬æ¥å­¦çš„åç«¯å¼€å‘ï¼Œç„¶åæŠ¥çš„æ˜¯è½¯ä»¶æµ‹è¯•çš„å²—ä½ï¼Œä»¥ä¸ºé¢è¯•ä¼šé—®å¾ˆå¤šæµ‹è¯•æ–¹é¢çŸ¥è¯†ï¼Œå‡†å¤‡äº†å¾ˆå¤šï¼Œç»“æœåä¸ºæ³¨é‡çš„å¤§å¤šæ˜¯å­¦æ ¡é‡Œçš„ç»å†å’Œè·å¥–ä»¥åŠæˆç»©ã€‚</p><ol><li>è‡ªæˆ‘ä»‹ç»å®Œæ¯•åç®€å•é—®äº†ä¸€ä¸‹æ¯”èµ›å’Œæˆç»©ã€‚</li><li>é—®å­¦äº†å“ªäº›è¯¾ç¨‹ï¼Œç„¶åæ ¹æ®æˆ‘è¯´çš„è¯¾ç¨‹é—®äº†äº›åŸºç¡€</li><li>æ•°æ®ç»“æ„é—®äº†ï¼šæ’åºã€æœ‰å“ªäº›ç»“æ„åˆ†åˆ«è®²è®²ï¼ˆè¯´äº†è¯´é“¾è¡¨ã€å›¾ã€æ ˆã€é˜Ÿåˆ—ï¼‰</li><li>è®¡ç®—æœºç½‘è·¯é—®äº†ï¼šhttpã€RIPåè®®ï¼ˆä¸æ“…é•¿çš„åƒä¸‡ä¸è¦è¯´å‡ºæ¥ï¼ï¼æˆ‘å¯èƒ½æ˜¯å› ä¸ºè¿™ç§‘æ‹‰èƒ¯äº†æˆ‘çš„ç»¼æµ‹æˆ‘ä¸€ç›´è®°æ¨åœ¨å¿ƒï¼Œæ²¡å¤šæƒ³ç»“æœå°±è¯´å‡ºå£äº†ï¼‰</li><li>è½¯ä»¶å·¥ç¨‹é—®äº†ï¼š ç›´æ¥è®²å­¦äº†ä»€ä¹ˆï¼ˆæˆ‘å¤§æ¦‚æŠŠç¨‹åºä»éœ€æ±‚è®¾è®¡åˆ°å®ç°ç„¶åå†å°å¿ƒæœºçš„æŠŠæµ‹è¯•éƒ¨åˆ†è®²äº†è®²ï¼‰</li></ol><p>è¿˜æœ‰ç»†ç¢é—®é¢˜å¿˜äº†</p><h3 id="ä¸»ç®¡é¢4-18">ä¸»ç®¡é¢4.18</h3><p>ä¸»è¦å°±æ˜¯èŠå¤©ï¼Œç„¶åé—®é—®å¯¹åä¸ºå…¬å¸çš„äº†è§£ï¼Œæ˜¯å¦å®šå±…æˆéƒ½ï¼Œç„¶åæƒ³ä¸æƒ³è½¬å²—ï¼Œæˆ‘éƒ½æŒ‰ç€æ±‚ç¨³æ¥ç­”çš„ï¼Œä¹Ÿé—®äº†é—®åœ¨æ ¡æˆç»©ã€‚</p><p>4.18é¢ç»“æŸä»¥åå°±å®¡æ‰¹ç­‰äº†å¾ˆä¹…ï¼Œç„¶åhräººéå¸¸å¥½ï¼Œä¸€ç›´æŒç»­è·Ÿè¿›ï¼Œ</p><h3 id="5-9-æ‹’ç»offer">5.9 æ‹’ç»offer</h3><p>åœ¨5.6è¯´æˆ‘çš„offerç¨³äº†ï¼Œç»¼åˆè€ƒè™‘è–ªèµ„å¾…é‡å’Œå·¥ä½œç¯å¢ƒï¼Œæˆ‘è®¤ä¸ºæˆ‘å¯èƒ½ä¸é€‚åˆæµ‹è¯•å²—ï¼Œå¹¶ä¸”åä¸ºçš„ç¯å¢ƒæˆ‘æœ‰æ‰€è€³é—»ï¼Œå¦‚æœ9116ï¼Œæˆ‘å—ä¸äº†ï¼Œå‰ä¸¤å¹´éƒ½éœ€è¦æ—¶é—´å»å­¦ä¹ ï¼Œè€Œä¸æ˜¯å…¨éƒ¨éƒ½æ ½è¿›å·¥ä½œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é¢ç» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo + GitHubæ­å»ºä¸ªäººåšå®¢</title>
      <link href="/2022/05/06/Hexo-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A22/"/>
      <url>/2022/05/06/Hexo-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A22/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=e472fde3-8d5d-5878-708c-f5b6d69d89a2</cover>
      <date>Fri May 06 2022 10:24:55 GMT+0800</date>
      
        <content type="html"><![CDATA[<h2 id="å®‰è£…hexo">å®‰è£…hexo</h2><h3 id="1-å‰æå‡†å¤‡ï¼š">1.å‰æå‡†å¤‡ï¼š</h3><ul><li><p>å®‰è£…git</p><pre class="language-bash" data-language="bash"><code class="language-bash">brew <span class="token function">install</span> <span class="token function">git</span></code></pre><span id="more"></span><p>éªŒè¯</p><pre class="language-java" data-language="java"><code class="language-java">git <span class="token operator">--</span>version </code></pre></li><li><p>å®‰è£…node.js</p><pre class="language-bash" data-language="bash"><code class="language-bash">brew <span class="token function">install</span> <span class="token function">node</span></code></pre></li></ul><h3 id="2-å®‰è£…">2.å®‰è£…</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> hexo-cli</code></pre><h3 id="3-åˆ›å»ºåšå®¢æ–‡ä»¶å¤¹å¹¶åˆå§‹åŒ–">3.åˆ›å»ºåšå®¢æ–‡ä»¶å¤¹å¹¶åˆå§‹åŒ–</h3><pre class="language-bash" data-language="bash"><code class="language-bash">hexo init<span class="token function">npm</span> <span class="token function">install</span></code></pre><h3 id="4-æœ¬åœ°å¯åŠ¨">4.æœ¬åœ°å¯åŠ¨</h3><pre class="language-bash" data-language="bash"><code class="language-bash">hexo ghexo s</code></pre><p>è®¿é—®æœ¬åœ°é“¾æ¥ï¼š<a href="">http://localhost:4000/</a></p><p>æ˜¾ç¤ºå¦‚ä¸‹é¡µé¢ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸ</p><img src="Hexo-GitHubæ­å»ºä¸ªäººåšå®¢2/image-20220506213244777.png" alt="image-20220506213244777" style="zoom:33%;" /><h2 id="å®‰è£…nextä¸»é¢˜">å®‰è£…nextä¸»é¢˜</h2><p>hexoå®˜ç½‘ä¸»é¢˜ï¼š<a href="">https://hexo.io/themes/</a></p><p>è¿™é‡Œä»¥nextä¸ºä¾‹</p><h3 id="1-åœ¨åˆ›å»ºæ–‡ä»¶å¤¹ä¸‹å®‰è£…ä¸»é¢˜">1.åœ¨åˆ›å»ºæ–‡ä»¶å¤¹ä¸‹å®‰è£…ä¸»é¢˜</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/theme-next/hexo-theme-next themes/next</code></pre><h3 id="2-ä¿®æ”¹æ–‡ä»¶å¤¹ä¸‹çš„-config-ymlæ–‡ä»¶">2.ä¿®æ”¹æ–‡ä»¶å¤¹ä¸‹çš„_config.ymlæ–‡ä»¶</h3><img src="Hexo-GitHubæ­å»ºä¸ªäººåšå®¢2/image-20220504215029708.png" alt="image-20220504215029708" style="zoom: 25%;" /><p>ä¿®æ”¹themeä¸ºnext</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Extensions</span><span class="token comment">## Plugins: https://hexo.io/plugins/</span><span class="token comment">## Themes: https://hexo.io/themes/</span><span class="token key atrule">theme</span><span class="token punctuation">:</span> next</code></pre><p>å†æ¬¡è®¿é—®é¡µé¢ï¼š</p><img src="Hexo-GitHubæ­å»ºä¸ªäººåšå®¢2/image-20220504215421643.png" alt="image-20220504215421643" style="zoom: 33%;" /><p>è¡¨ç¤ºnextä¸»é¢˜å®‰è£…æˆåŠŸ</p><h2 id="éƒ¨ç½²åˆ°githubä»“åº“">éƒ¨ç½²åˆ°githubä»“åº“</h2><h3 id="1-åˆ›å»ºä»“åº“">1.åˆ›å»ºä»“åº“</h3><p>ä»“åº“å<strong><a href="http://xn--xxx-x58d286gfsg.github.io">ä¸¥æ ¼æŒ‰xxx.github.io</a></strong>æ¥ï¼ˆxxxä¸ºgithubç”¨æˆ·å ä¸” å°å†™ï¼</p><img src="Hexo-GitHubæ­å»ºä¸ªäººåšå®¢2/image-20220505154551563.png" alt="image-20220505154551563" style="zoom:33%;" /><h3 id="2-é…ç½®SSH">2.é…ç½®SSH</h3><p>å¦‚æœå·²ç»é…ç½®è¿‡å°±è·³è¿‡ã€‚</p><p>ç”ŸæˆSSH key</p><pre class="language-bash" data-language="bash"><code class="language-bash">ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-C</span> ä½ çš„é‚®ç®±</code></pre><p>è¿™ä¸ªé‚®ç®±æ˜¯githubç»‘å®šçš„é‚®ç®±</p><p>ç„¶åç™»é™†githubï¼Œåœ¨Settingsé‡Œé¢çš„SSH and GPG keysé‡Œé¢æ·»åŠ new SSH key</p><img src="Hexo-GitHubæ­å»ºä¸ªäººåšå®¢2/image-20220504220404992.png" alt="image-20220504220404992" style="zoom: 33%;" /><p>éªŒè¯æ˜¯å¦æˆåŠŸ</p><pre class="language-she" data-language="she"><code class="language-she">ssh -T git@github.com</code></pre><img src="Hexo-GitHubæ­å»ºä¸ªäººåšå®¢2/image-20220504221105797.png" alt="image-20220504221105797" style="zoom: 50%;" /><h3 id="3-éƒ¨ç½²åˆ°github">3.éƒ¨ç½²åˆ°github</h3><p>å®‰è£…gitéƒ¨ç½²æ’ä»¶</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git <span class="token parameter variable">--save</span></code></pre><p>æ‰“å¼€_config.ymlæ–‡ä»¶ï¼Œåœ°æ­¥ä¿®æ”¹éƒ¨ç½²é…ç½®</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Deployment</span><span class="token comment">## Docs: https://hexo.io/docs/deployment.html</span><span class="token key atrule">deploy</span><span class="token punctuation">:</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> git  <span class="token key atrule">repo</span><span class="token punctuation">:</span> git@github.com<span class="token punctuation">:</span>youname/youname.github.io.git  <span class="token key atrule">branch</span><span class="token punctuation">:</span> master</code></pre><p>ä¿å­˜åç»ˆç«¯æ‰§è¡Œ</p><pre class="language-bash" data-language="bash"><code class="language-bash">hexo cleanhexo ghexo d</code></pre><p>åœ¨æµè§ˆå™¨è¾“å…¥xxx.github.ioå°±å¯ä»¥çœ‹åˆ°è‡ªå·±çš„ä¸€ä¸ªåšå®¢äº†</p><h2 id="å¸¸ç”¨çš„hexoå‘½ä»¤">å¸¸ç”¨çš„hexoå‘½ä»¤</h2><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo <span class="token parameter variable">-g</span> <span class="token comment">#å®‰è£…Hexo</span><span class="token function">npm</span> update hexo <span class="token parameter variable">-g</span> <span class="token comment">#å‡çº§</span>hexo init <span class="token comment">#åˆå§‹åŒ–åšå®¢</span>å‘½ä»¤ç®€å†™hexo n â€œæˆ‘çš„åšå®¢â€ <span class="token operator">==</span> hexo new â€œæˆ‘çš„åšå®¢â€ <span class="token comment">#æ–°å»ºæ–‡ç« </span>hexo g <span class="token operator">==</span> hexo generate <span class="token comment">#ç”Ÿæˆ</span>hexo s <span class="token operator">==</span> hexo server <span class="token comment">#å¯åŠ¨æœåŠ¡é¢„è§ˆ</span>hexo d <span class="token operator">==</span> hexo deploy <span class="token comment">#éƒ¨ç½²</span>hexo server <span class="token comment">#Hexoä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œæ— é¡»é‡å¯æœåŠ¡å™¨</span>hexo server <span class="token parameter variable">-s</span> <span class="token comment">#é™æ€æ¨¡å¼</span>hexo server <span class="token parameter variable">-p</span> <span class="token number">5000</span> <span class="token comment">#æ›´æ”¹ç«¯å£</span>hexo server <span class="token parameter variable">-i</span> <span class="token number">192.168</span>.1.1 <span class="token comment">#è‡ªå®šä¹‰ IP</span>hexo clean <span class="token comment">#æ¸…é™¤ç¼“å­˜ï¼Œè‹¥æ˜¯ç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥è¿™æ¡å‘½ä»¤</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œIO</title>
      <link href="/2022/03/10/%E7%BD%91%E7%BB%9CIO/"/>
      <url>/2022/03/10/%E7%BD%91%E7%BB%9CIO/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=1db7726d-78c9-0695-d364-1d2b4ec07270</cover>
      <date>Thu Mar 10 2022 22:34:41 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>ç½‘ç»œ</h1><h2 id="TCP">TCP</h2><img src="https://img.soniachen.com/blog/posts/2025/06/image-20220318165203569.png" alt="image-20220318165203569" style="zoom:33%;" /><span id="more"></span><p>æ˜¯ä¸€ä¸ªåŸºäºå­—èŠ‚æµçš„ä¸€ä¸ªä¼ è¾“å±‚çš„é€šä¿¡åè®®ï¼Œåœ¨å‘é€æ•°æ®ä¹‹å‰åŒæ–¹æ˜¯éœ€è¦å»ºç«‹ä¸€ä¸ªè¿æ¥çš„ï¼Œè¿™ä¸ªæ‰€è°“çš„è¿æ¥å°±æ˜¯åŒæ–¹éƒ½ä¿å­˜ä¸€ä¸ªå¯¹æ–¹çš„ipåœ°å€è¿˜æœ‰ç«¯å£ç­‰ä¿¡æ¯ï¼Œç„¶åTCPå…¶å®æ˜¯ä¸€ä¸ªå­—èŠ‚æµï¼Œå¤´éƒ¨å°±ä¿å­˜äº†è¿™äº›ä¿¡æ¯ï¼Œè¿›è¡Œè¿æ¥çš„æ—¶å€™æœ‰ä¸‰ä¸ªé˜¶æ®µï¼šå»ºç«‹è¿æ¥ã€ä¼ è¾“æ•°æ®ã€å…³é—­è¿æ¥ï¼Œä¸‰æ¬¡æ¡æ‰‹æ¥å»ºç«‹ï¼Œå››æ¬¡æŒ¥æ‰‹æ¥å…³é—­ï¼Œå…¶ä¸­äº¤æ¢çš„æŠ¥æ–‡éƒ½æ˜¯tcpçš„å¤´éƒ¨ã€‚</p><h3 id="ä¸‰æ¬¡æ¡æ‰‹">ä¸‰æ¬¡æ¡æ‰‹</h3><p>ä¸‰æ¬¡æ¡æ‰‹æ˜¯ä¸€ä¸ªåœ¨å†…æ ¸å‘ç”Ÿçš„ä¸€ä¸ªè¡Œä¸ºï¼ŒåŸºäºTCPåè®®ï¼Œï¼Œé¦–å…ˆå‘¢ï¼Œå®¢æˆ·ç«¯åº”ç”¨å¯åŠ¨ä»¥åï¼ŒæœåŠ¡ç«¯è¿›å…¥listençŠ¶æ€ï¼Œä¸ºäº†æœªæ¥æ”¶åˆ°æ•°æ®åŒ…åšå‡†å¤‡ï¼Œç„¶ååœ¨è¿™ä¸ªçŠ¶æ€ä¸‹å†…æ ¸è¿›è¡Œäº†ä¸‰æ¬¡æ¡æ‰‹ï¼Œ</p><ol><li>é¦–å…ˆç¬¬ä¸€æ¬¡æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€å¸¦æœ‰SYNï¼Œä»£è¡¨å‘é€è¿æ¥çš„æ ‡è¯†ï¼Œçš„ä¸€ä¸ªæŠ¥æ–‡ï¼Œè‡ªå·±è¿›å…¥ä¸€ä¸ªSYN-SENTçŠ¶æ€ï¼Œç„¶åæœåŠ¡å™¨æ¥æ”¶è¿›å…¥SYN-RECVçŠ¶æ€</li><li>ç¬¬äºŒæ¬¡æ˜¯æœåŠ¡å™¨å‘é€å¸¦æœ‰SYN+ACKçš„æŠ¥æ–‡ï¼ŒACKæ˜¯ç¡®è®¤åºå·æœ‰æ•ˆçš„æ ‡è¯†ï¼Œå®¢æˆ·ç«¯æ¥æ”¶è¿›å…¥establishedçŠ¶æ€ï¼›</li><li>ç„¶åå°±æ˜¯æœ€åä¸€æ¬¡æ¡æ‰‹ å› ä¸ºæœåŠ¡ç«¯è¿˜éœ€è¦çŸ¥é“è‡ªå·±å‘é€å’Œå¯¹æ–¹æ¥æ”¶æ˜¯å¦æˆåŠŸï¼Œæ‰€ä»¥å®¢æˆ·ç«¯å‘é€å¸¦æœ‰ACKæ ‡è¯†çš„æŠ¥æ–‡ï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°æ‰è¿›å…¥establisedçŠ¶æ€ï¼Œä»¥ä¸Šä¸‰æ¬¡æ¡æ‰‹å°±è¿›è¡Œå®Œæ¯•</li></ol><img src="https://img.soniachen.com/blog/posts/2025/06/image-20220318122004676.png" alt="image-20220318122004676" style="zoom:50%;" /><p>ç„¶ååœ¨è¿™é‡Œä»¥ååº”ç”¨è¦è¿›è¡Œæ¥æ”¶ï¼Œå°±å¾—å°†è¿æ¥çš„socketæ”¾å…¥accepté˜Ÿåˆ—ï¼Œéœ€è¦IOæ¨¡å‹ï¼Œè°ƒç”¨server.accept() å¦‚æœé˜Ÿåˆ—é‡Œé¢æœ‰å°±å–å‡ºæ¥ä¼ åˆ°åº”ç”¨é‡Œï¼Œè¿™é‡Œå°±æœ‰ä¸¤ç§æ¨¡å‹åˆ†åˆ«æ˜¯é˜»å¡ç­‰å¾…è¿”å›çš„BIOå’Œæ— é˜»å¡è½®è¯¢è¿”å›çš„NIOï¼›è¿˜æœ‰ä¸€ç§æ¨¡å‹æ˜¯å¤šè·¯å¤ç”¨å™¨ï¼Œè°ƒç”¨select,poll,epollï¼Œä½†æ˜¯å®ƒåªæ˜¯åšä¸€ä¸ªå’Œå†…æ ¸è°ƒç”¨æ¥çŸ¥é“é˜Ÿåˆ—é‡Œé¢æ˜¯å¦æœ‰äº‹ä»¶ï¼Œç„¶åå†å»æœ‰æ•ˆæ€§åœ°è¿›è¡Œä¸€ä¸ªaccep()æ–¹æ³•çš„è°ƒç”¨</p><h3 id="å››æ¬¡åˆ†æ‰‹">å››æ¬¡åˆ†æ‰‹</h3><img src="https://img.soniachen.com/blog/posts/2025/06/image-20220318142304657.png" alt="image-20220318142304657" style="zoom:50%;" /><p>å®¢æˆ·ç«¯å®Œæˆæ•°æ®ä¼ è¾“ï¼Œè¦å‡†å¤‡é‡Šæ”¾è¿æ¥çš„æ—¶å€™ï¼š</p><ol><li><p>è¿›è¡Œç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼Œå‘ä¸€ä¸ªå¸¦FINï¼ˆä»£è¡¨é‡Šæ”¾è¿æ¥çš„æ ‡è¯†ï¼‰çš„æŠ¥æ–‡ç»™æœåŠ¡ç«¯ç„¶åè¿›å…¥FIN_WAIT1çŠ¶æ€ï¼ŒæœåŠ¡æ¥æ”¶åˆ°ä»¥åè¿›å…¥ä¸€ä¸ªCLOSE-WAITçŠ¶æ€ï¼›</p></li><li><p>ç¬¬äºŒæ¬¡æŒ¥æ‰‹å°±æ˜¯ï¼ŒæœåŠ¡å™¨ç«¯å‘å®¢æˆ·ç«¯å‘å¸¦ACKæ ‡è¯†çš„æŠ¥æ–‡ï¼Œå®¢æˆ·ç«¯æ¥æ”¶ååˆè¿›å…¥FIN-WAITçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡ç«¯å°†æ•°æ®å¤„ç†å®Œæ¯•æ”¶å°¾ï¼›</p></li><li><p>ç¬¬ä¸‰æ¬¡æœåŠ¡ç«¯å†å»å‘é€ä¸€ä¸ªå¸¦FINå’ŒACKçš„æŠ¥æ–‡ï¼Œä¹‹å‰ä¸ä¸€èµ·å‘æ˜¯å› ä¸ºæœåŠ¡ç«¯æ¥æ”¶ä»¥åéœ€è¦å°†æ•°æ®å‘é€è¿›è¡Œå®Œæ¯•,åœ¨ä¸€ä¸ªCLOSE-WAITçŠ¶æ€ï¼Œæå®šä»¥åå†å‘ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åè¿›å…¥TIME_WAITçŠ¶æ€ï¼›</p></li><li><p>ç„¶åå°±æ˜¯ç¬¬å››æ¬¡ï¼Œå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå¸¦ACKçš„æŠ¥æ–‡ç»™æœåŠ¡ç«¯ï¼Œè¿™é‡Œå®¢æˆ·ç«¯çš„TIME-waitçŠ¶æ€ä¸èƒ½ç›´æ¥ç»“æŸéœ€è¦ç­‰å¾…ä¸¤å€æŠ¥æ–‡å¯¿å‘½æ—¶é—´ï¼Œå†å»closedï¼Œä¸ºä»€ä¹ˆæ˜¯ä¸¤å€æŠ¥æ–‡å¯¿å‘½çš„æ—¶é—´æ˜¯å› ä¸ºåˆè‚¯å‘¢ä¸ªä¼šå‡ºç°æœåŠ¡å™¨ä¸¢åŒ…çš„é—®é¢˜ï¼Œä½†æ˜¯æœåŠ¡ç«¯æ²¡æ¥æ”¶åˆ°å°±ä¼šç»§ç»­å‘é€FINï¼Œå®¢æˆ·ç«¯è¦ç­‰å¾…è¿™ä¹ˆä¸€ä¸ªä¸€å»ä¸€å›çš„æ—¶é—´æ¥ç¡®è®¤æœåŠ¡ç«¯æ²¡æœ‰å†å‘é€FINï¼Œä¹Ÿå°±æ˜¯ç¡®è®¤æœåŠ¡ç«¯æ˜¯å¦æ¥æ”¶åˆ°ï¼Œå†å»å…³é—­ï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°å°±ä¼šè¿›å…¥closedçŠ¶æ€ï¼›</p><p>ä»¥ä¸Šå°±æ˜¯æˆ‘äº†è§£çš„å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ã€‚</p></li></ol><h3 id="ä¸UDPçš„åŒºåˆ«">ä¸UDPçš„åŒºåˆ«</h3><p>udp  æ˜¯ç”¨æˆ·æ•°æ®åè®®ï¼Œtcpæ˜¯ä¼ è¾“æ§åˆ¶åè®®ï¼Œ æˆ‘å°±ä»è¿™å‡ ä¸ªæ–¹é¢è¿›è¡Œæ¯”è¾ƒå§ï¼Œé¦–å…ˆä¸€ä¸ªæ˜¯udpæ˜¯æ— è¿æ¥çš„ï¼Œtcpæ˜¯åŸºäºè¿æ¥çš„ï¼Œ ç¬¬äºŒä¸ªæ–¹é¢æ˜¯ä»–ä»¬çš„ä¼ è¾“æ–¹å¼ï¼Œudp æ˜¯æŠ¥æ–‡ï¼Œ tcpæ˜¯ä¸€ä¸ªå­—èŠ‚æµï¼Œç¬¬ä¸‰ä¸ªæ˜¯ä»–ä»¬è¿æ¥æ–¹å¼ï¼Œudpæ˜¯ä¸€å¯¹ä¸€ä¸€å¯¹å¤šï¼Œå¤šå¯¹å¤šå¤šå¯¹ä¸€çš„é€šä¿¡ï¼Œè€Œtcpåªèƒ½æ˜¯ä¸€å¯¹ä¸€ï¼Œä»è¿™å°±å¯ä»¥çœ‹å‡ºç¬¬å››æ–¹é¢ä»–ä»¬çš„å¯é æ€§å’Œå®‰å…¨æ€§tcpæ˜æ˜¾æ˜¯è¦é«˜ä¸€äº›ï¼Œä¹Ÿå¯¼è‡´tcpé¦–éƒ¨è¦ä¼ è¾“çš„ä¿¡æ¯å¾ˆå¤šï¼Œå¼€é”€å¤§ï¼Œé€‚ç”¨çš„åœºæ™¯å°±æ˜¯æ–‡ä»¶ä¼ è¾“ï¼Œudpå°±å¯ä»¥åœ¨å®æ—¶åº”ç”¨æ¯”å¦‚è§†é¢‘ä¼šè®®ç”µè¯ç­‰åœºæ™¯ç”¨ã€‚</p><h3 id="ç²˜åŒ…">ç²˜åŒ…</h3><p>TCPåè®®æ˜¯é¢å‘è¿æ¥çš„å¯é æ€§åè®®ã€‚è¯´å®ƒå¯é å¹¶ä¸è¡¨ç¤ºæ•°æ®ä¿¡æ¯ä¸€å®šä¼šè¢«å¯¹ç«¯æ¥å—ï¼Œè€Œæ˜¯åœ¨ä¼ è¾“å¤±è´¥åä¼šæ”¾å¼ƒé‡ä¼ æœºåˆ¶å¹¶ä¸­æ–­è¿æ¥æ¥é€šçŸ¥ç”¨æˆ·ã€‚å®ƒæä¾›çš„åªæ˜¯æ•°æ®å¯é æ€§çš„ä¼ è¾“å’Œæ•…éšœé€šçŸ¥ã€‚</p><p>TCPæ˜¯æ•°æ®æµä¼ è¾“ï¼Œæ•°æ®æµæ˜¯åªæœ‰èµ·ç‚¹å’Œç»ˆç‚¹çš„å­—èŠ‚æ•°æ®åºåˆ—ï¼Œåªæœ‰è¾“å…¥æµå’Œè¾“å‡ºæµã€‚æ ¹æœ¬ä¸å­˜åœ¨â€œåŒ…â€çš„æ¦‚å¿µã€‚ç²˜åŒ…çš„åŒ…æ˜¯åº”ç”¨å±‚çš„åŒ…ï¼Œåº”ç”¨å±‚åè®®è§„å®šäº†åŒ…çš„ç»“æ„å’Œå¤§å°ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€æ®µæ•°æ®æŠ¥æ–‡ã€‚æ¯”å¦‚ä¸€æ®µhttpè¯·æ±‚ï¼Œ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//http è¯·æ±‚</span><span class="token constant">GET</span> <span class="token operator">/</span>hello<span class="token punctuation">.</span>txt <span class="token constant">HTTP</span><span class="token operator">/</span><span class="token number">1.1</span><span class="token class-name">User</span><span class="token operator">-</span><span class="token class-name">Agent</span><span class="token operator">:</span> curl<span class="token operator">/</span><span class="token number">7.16</span><span class="token number">.3</span> libcurl<span class="token operator">/</span><span class="token number">7.16</span><span class="token number">.3</span> <span class="token class-name">OpenSSL</span><span class="token operator">/</span><span class="token number">0.9</span><span class="token number">.7l</span> zlib<span class="token operator">/</span><span class="token number">1.2</span><span class="token number">.3</span><span class="token class-name">Host</span><span class="token operator">:</span> www<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token class-name">Accept</span><span class="token operator">-</span><span class="token class-name">Language</span><span class="token operator">:</span> en<span class="token punctuation">,</span> mi</code></pre><h4 id="TCPç²˜åŒ…çš„åŸå› ">TCPç²˜åŒ…çš„åŸå› </h4><p>é¦–å…ˆç²˜åŒ…çš„æƒ…å†µå¯èƒ½æ˜¯recv-bufferè¿™ä¸ªç¼“å†²åŒºé‡Œæœ‰aåŒ…çš„ä¸€éƒ¨åˆ†ï¼Œæˆ–è€…aåŒ…å’ŒbåŒ…çš„ä¸€éƒ¨åˆ†éƒ½æœ‰ï¼ŒåŸå› ä»<strong>å‘é€ç«¯</strong>æ¥è®²å¯èƒ½æ˜¯sendå‘é€æ•°æ®çš„æ—¶å€™å› ä¸ºè¿˜æ²¡æ”¶åˆ°æ¥æ”¶ç«¯çš„ACKï¼Œå°±æš‚æ—¶å°†æ•°æ®å¡«å……åˆ°ç¼“å†²åŒºä¸­ç­‰å¾…ï¼Œ<strong>æ¥æ”¶ç«¯</strong>æ–¹é¢å°±å¯èƒ½æ˜¯å› ä¸ºå¤„ç†æ•°æ®ä¸åŠæ—¶ï¼Œæ•°æ®éƒ½å †åœ¨ç¼“å†²åŒºï¼Œè‡´ä½¿abåŒ…ç›¸è¿ã€‚</p><h4 id="å¦‚ä½•è§£å†³ç²˜åŒ…å‘¢ï¼Ÿ">å¦‚ä½•è§£å†³ç²˜åŒ…å‘¢ï¼Ÿ</h4><ol><li>å›ºå®šåŒ…é•¿åº¦ã€‚æ¯ä¸ªåŒ…çš„å¤§å°éƒ½æ˜¯ä¸€æ ·çš„ã€‚</li><li>åœ¨åŒ…ä¸­ç»™å®šåŒ…å¤§å°ã€‚ä¾‹å¦‚ï¼šï¼ˆå›ºå®šå‰4ä¸ªå­—èŠ‚ä¸ºåŒ…å¤§å°ï¼‰</li><li>è®¾ç½®ç‰¹å®šçš„ç»“æŸæ ‡å¿—ã€‚</li></ol><pre class="language-java" data-language="java"><code class="language-java">struct <span class="token class-name">Message</span> <span class="token punctuation">&#123;</span>undefined    <span class="token keyword">int</span> packSize<span class="token punctuation">;</span>    <span class="token keyword">int</span> type<span class="token punctuation">;</span>    <span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><p>httpåè®®å°±æ˜¯ä½¿ç”¨äº†ä¸Šè¿°çš„2ï¼Œ3æ–¹æ³•ã€‚httpä½¿ç”¨&quot;\r\n&quot;ä¸ºç»“æŸæ ‡è¯†ã€‚</p><p>å½“ä¸ºpostè¯·æ±‚æ—¶åˆ™æœ‰content-Lengthæ ‡è¯†è¯·æ±‚ä½“é•¿åº¦ã€‚</p><h2 id="Connection-refused">Connection refused</h2><p>å¯èƒ½æ˜¯ä¸€ä¸ªç½‘ç»œé—®é¢˜ï¼Œè¿˜æœ‰å¯èƒ½å°±æ˜¯å†…æ ¸å»ºç«‹è¿æ¥å‘ç»™ç¨‹åºçš„æ—¶å€™ï¼Œé‚£ä¸ªaccepté˜Ÿåˆ—é˜»å¡äº†ã€‚</p><p>å› ä¸ºæ˜¯å†…æ ¸å¸®åŠ©å»ºç«‹è¿æ¥ï¼Œç¨‹åºå¿…é¡»é€šè¿‡listené‡Œé¢çš„acceptæ¥æ”¶é˜Ÿåˆ—æ¥è¿›è¡Œä¸€ä¸ªç­‰å¾…ç¨‹åºçš„æ¥æ”¶ï¼Œæœ‰ä¸€ä¸ªå¤§å°é™åˆ¶çš„backlogï¼Œå¦‚æœé˜Ÿåˆ—æ»¡äº†å¯èƒ½å°±ä¼šé€ æˆä¸€ä¸ªæŠ¥é”™ï¼Œ æ˜¯å†…æ ¸å’Œç¨‹åºä¹‹é—´å‘ç”Ÿçš„ä¸€ä¸ªå¡ã€‚</p><h2 id="Session-Cookie-Token">Session , Cookie, Token</h2><p><img src="https://img.soniachen.com/blog/posts/2025/06/image-20220318165316329.png" alt="image-20220318165316329"></p><p>å› ä¸ºhttpåè®®æœ¬èº«æ˜¯ä¸€ä¸ªæ— çŠ¶æ€ä¹Ÿå°±æ˜¯æµè§ˆå™¨æ²¡åŠæ³•åˆ¤æ–­ç”¨æˆ·èº«ä»½ï¼Œç„¶åcookieæä¾›äº†æš‚æ—¶ä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„ä¸€ä¸ªä½œç”¨ï¼Œå®ƒå…¶å®æ˜¯ä¸€ä¸ªæœåŠ¡å™¨æ”¾åœ¨æµè§ˆå™¨ä¸Šé¢çš„ä¸€ä¸ªkey-valueå½¢å¼çš„ä¸€ä¸ªå°æ–‡ä»¶ï¼Œå¦‚æœæœåŠ¡å™¨éœ€è¦ä¿å­˜ç”¨æˆ·çŠ¶æ€ï¼Œå°±é€šè¿‡responseç»™å®¢æˆ·ç«¯é¢å‘ä¸€ä¸ªcookieï¼Œä¸‹æ¬¡æµè§ˆå™¨å†è¯·æ±‚çš„æ—¶å€™å†å°†cookieæäº¤ï¼ŒæœåŠ¡å™¨æ£€æŸ¥æ¥è¿›è¡Œè¾¨è®¤ã€‚</p><p>è€Œsessionå‘¢ï¼Œæ˜¯åŸŸå¯¹è±¡ä¹‹ä¸€ï¼Œæ˜¯ä¼šè¯è¿‡ç¨‹ä¸­æœåŠ¡å™¨åˆ†çš„ä¸€å—å‚¨å­˜ç©ºé—´ï¼Œä½†ä¹Ÿæ˜¯ä¾èµ–ç€cookieå®ç°çš„ï¼Œæµè§ˆå™¨ä¼šåœ¨cookieé‡Œé¢è®¾ç½®sessionidï¼Œ æœåŠ¡å™¨æ ¹æ®sessionidå–å‡ºsessionä¸­å­˜å‚¨çš„ä¿¡æ¯ã€‚</p><p>ä¸¤è€…åŒºåˆ«å‘¢å°±æ˜¯å­˜å‚¨ç©ºé—´çš„é™åˆ¶ï¼Œsessionæ˜¯æ²¡æœ‰é™åˆ¶çš„ï¼Œcookieæ˜¯æœ‰é™åˆ¶çš„ï¼Œç„¶åå°±æ˜¯å­˜å‚¨çš„ä½ç½®ï¼Œcookieæ˜¯åœ¨æµè§ˆå™¨ä¸Šï¼Œsessionæ˜¯åœ¨æœåŠ¡å™¨ç«¯ï¼Œè¿™æ ·å®‰å…¨æ€§ä¹Ÿå°±å¯ä»¥çœ‹å‡ºæ¥cookieçš„ä¸é«˜ï¼Œå¦ä¸€æ–¹é¢å ç”¨èµ„æº sessionä¹Ÿä¼šæ›´å¤šæ›´åŠ é™ä½æ€§èƒ½ã€‚</p><p>è€Œtokenå‘¢ï¼Œæ˜¯å› ä¸ºå®¢æˆ·ç«¯å¦‚æœé¢‘ç¹å‘æœåŠ¡ç«¯è¯·æ±‚æ•°æ®ï¼ŒæœåŠ¡ç«¯é¢‘ç¹çš„å»æ•°æ®åº“æŸ¥è¯¢ä¼šæœ‰å¾ˆå¤šå‹åŠ›ï¼Œä½¿ç”¨tokenå‘¢ï¼Œå°±ä¼šé™ä½æœåŠ¡å™¨å‹åŠ›ï¼Œå‡å°‘é¢‘ç¹è®¿é—®æ•°æ®åº“ï¼Œå¢å¼ºå¥å£®æ€§ï¼Œtokenæ˜¯æœåŠ¡ç«¯äº§ç”Ÿçš„å­—ç¬¦ä¸²ï¼Œä½œä¸ºä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚çš„ä»¤ç‰Œï¼Œç¬¬ä¸€æ¬¡ç™»é™†å°±ç”Ÿæˆç»™å®¢æˆ·ç«¯ï¼Œä»¥åå®¢æˆ·ç«¯å°±æ‹¿è¿™ä¸ªtokenæ¥è¯·æ±‚æ•°æ®ï¼Œä¸ç”¨ç”¨æˆ·åå’Œå¯†ç ã€‚ å’Œsessionçš„åŒºåˆ«å°±æ˜¯sessionå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œè€Œtokenæ˜¯åœ¨æµè§ˆå™¨ç«¯ï¼Œå¹¶ä¸”è¿˜æä¾›è®¤è¯åŠŸèƒ½ï¼Œå®‰å…¨æ€§æ¯”sessionå¥½ï¼Œä¸ä¼šè®©æœåŠ¡å™¨å‹åŠ›å¾ˆå¤§ï¼Œé€‚ç”¨äºé¡¹ç›®çº§çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œsessionåªèƒ½åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯åœ¨åŒä¸€å°æœºå™¨çš„åœºæ™¯ä½¿ç”¨ã€‚</p><h2 id="HTTP">HTTP</h2><h3 id="å¸¸ç”¨HTTPçŠ¶æ€ç ï¼š">å¸¸ç”¨HTTPçŠ¶æ€ç ï¼š</h3><table><thead><tr><th>2XX</th><th>æˆåŠŸï¼ˆè¿™ç³»åˆ—è¡¨æ˜è¯·æ±‚è¢«æ­£å¸¸å¤„ç†äº†ï¼‰</th></tr></thead><tbody><tr><td>200</td><td>OKï¼Œè¡¨ç¤ºä»å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚åœ¨æœåŠ¡å™¨ç«¯è¢«æ­£ç¡®å¤„ç†</td></tr><tr><td>204</td><td>No   contentï¼Œè¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼Œä½†å“åº”æŠ¥æ–‡ä¸å«å®ä½“çš„ä¸»ä½“éƒ¨åˆ†</td></tr><tr><td>206</td><td>Partial   Content  ï¼Œè¿›è¡ŒèŒƒå›´è¯·æ±‚æˆåŠŸ</td></tr><tr><td>3XX</td><td>é‡å®šå‘  ï¼ˆè¡¨æ˜æµè§ˆå™¨è¦æ‰§è¡Œç‰¹æ®Šå¤„ç†ï¼‰</td></tr><tr><td>301</td><td>moved permanentlyï¼Œæ°¸ä¹…  æ€§é‡å®šå‘ï¼Œè¡¨ç¤ºèµ„æºå·²è¢«åˆ†é…äº†æ–°çš„ URL</td></tr><tr><td>302</td><td>foundï¼Œä¸´æ—¶æ€§é‡å®šå‘ï¼Œè¡¨ç¤ºèµ„æºä¸´æ—¶è¢«åˆ†é…äº†æ–°çš„   URL</td></tr><tr><td>303</td><td>see   otherï¼Œè¡¨ç¤ºèµ„æºå­˜åœ¨ç€å¦ä¸€ä¸ª URLï¼Œ  åº”ä½¿ç”¨   GET æ–¹æ³•è·å–èµ„æº  ï¼ˆå¯¹äº  301/302/  303å“åº”ï¼Œå‡ ä¹æ‰€æœ‰æµè§ˆå™¨éƒ½ä¼šåˆ é™¤æŠ¥æ–‡ä¸»ä½“å¹¶  è‡ªåŠ¨ç”¨  GETé‡æ–°è¯·æ±‚ï¼‰</td></tr><tr><td>304</td><td>not   modified ï¼Œè¡¨ç¤ºæœåŠ¡å™¨å…è®¸è®¿é—®èµ„æºï¼Œä½†è¯·æ±‚æœªæ»¡è¶³æ¡ä»¶çš„æƒ…å†µï¼ˆä¸é‡å®šå‘æ— å…³ï¼‰</td></tr><tr><td>307</td><td>temporary   redirectï¼Œä¸´æ—¶é‡å®š  å‘ï¼Œå’Œ302 å«ä¹‰ç±»ä¼¼ï¼Œä½†æ˜¯æœŸæœ›å®¢æˆ·ç«¯ä¿æŒè¯·æ±‚æ–¹æ³•ä¸å˜å‘æ–°çš„åœ°å€å‘å‡ºè¯·æ±‚</td></tr><tr><td>4XX</td><td>å®¢æˆ·ç«¯é”™è¯¯</td></tr><tr><td>400</td><td>bad   requestï¼Œè¯·æ±‚æŠ¥æ–‡å­˜åœ¨è¯­æ³•é”™è¯¯</td></tr><tr><td>401</td><td>unauthorizedï¼Œè¡¨ç¤ºå‘é€çš„è¯·æ±‚éœ€è¦æœ‰é€šè¿‡   HTTP è®¤è¯çš„è®¤è¯ä¿¡æ¯</td></tr><tr><td>403</td><td>forbidden  ï¼Œè¡¨ç¤ºå¯¹è¯·æ±‚èµ„æºçš„è®¿é—®è¢«æœåŠ¡å™¨æ‹’ç»ï¼Œå¯åœ¨å®ä½“ä¸»ä½“éƒ¨åˆ†è¿”å›åŸå› æè¿°</td></tr><tr><td>404</td><td>not   foundï¼Œè¡¨ç¤ºåœ¨æœåŠ¡å™¨ä¸Šæ²¡æœ‰æ‰¾åˆ°è¯·æ±‚çš„èµ„æº</td></tr><tr><td>5XX</td><td>æœåŠ¡å™¨é”™è¯¯</td></tr><tr><td>500</td><td>internal   sever   errorï¼Œè¡¨  ç¤ºæœåŠ¡å™¨ç«¯åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿäº†é”™è¯¯</td></tr><tr><td>501</td><td>Not   Implementedï¼Œè¡¨ç¤ºæœåŠ¡å™¨ä¸æ”¯æŒå½“å‰è¯·æ±‚æ‰€éœ€è¦çš„æŸä¸ªåŠŸèƒ½</td></tr><tr><td>503</td><td>service unavailableï¼Œè¡¨æ˜æœåŠ¡å™¨æš‚æ—¶å¤„äºè¶…è´Ÿè½½æˆ–æ­£åœ¨åœæœºç»´æŠ¤ï¼Œæ— æ³•å¤„ç†è¯·æ±‚</td></tr></tbody></table><h3 id="HTTP1å’ŒHTTP2">HTTP1å’ŒHTTP2</h3><p>HTTP2 å¯ä»¥æé«˜äº†ç½‘é¡µçš„æ€§èƒ½ã€‚</p><p>åœ¨ HTTP1 ä¸­æµè§ˆå™¨é™åˆ¶äº†åŒä¸€ä¸ªåŸŸåä¸‹çš„è¯·æ±‚æ•°é‡ï¼ˆChrome ä¸‹ä¸€èˆ¬æ˜¯å…­</p><p>ä¸ªï¼‰ï¼Œå½“åœ¨è¯·æ±‚å¾ˆå¤šèµ„æºçš„æ—¶å€™ï¼Œç”±äºé˜Ÿå¤´é˜»å¡å½“æµè§ˆå™¨è¾¾åˆ°  å¤§è¯·æ±‚æ•°é‡æ—¶ï¼Œå‰©ä½™çš„èµ„æºéœ€ç­‰å¾…å½“å‰çš„å…­ä¸ªè¯·æ±‚å®Œæˆåæ‰èƒ½å‘èµ·è¯·æ±‚ã€‚</p><p>HTTP2 ä¸­å¼•å…¥äº†å¤šè·¯å¤ç”¨çš„æŠ€æœ¯ï¼Œè¿™ä¸ªæŠ€æœ¯å¯ä»¥åªé€šè¿‡ä¸€ä¸ª TCP è¿æ¥å°±å¯ä»¥ä¼ è¾“æ‰€æœ‰çš„è¯·æ±‚æ•°æ®ã€‚å¤šè·¯å¤ç”¨å¯ä»¥ç»•è¿‡æµè§ˆå™¨é™åˆ¶åŒä¸€ä¸ªåŸŸåä¸‹çš„è¯·æ±‚æ•°é‡çš„é—®é¢˜ï¼Œè¿›è€Œæé«˜äº†ç½‘é¡µçš„æ€§èƒ½ã€‚</p><h3 id="HTTPS">HTTPS</h3><p>HTTP æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰è¶…æ–‡æœ¬æ•°æ®çš„çº¦å®šå’Œè§„èŒƒ</p><table><thead><tr><th>åŒºåˆ«</th><th>HTTP</th><th>HTTPS</th></tr></thead><tbody><tr><td>åè®®</td><td>è¿è¡Œåœ¨   TCP ä¹‹ä¸Šï¼Œæ˜æ–‡ä¼ è¾“ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯éƒ½æ— æ³•éªŒè¯å¯¹æ–¹çš„èº«ä»½</td><td>èº«æŠ« SSL(   Secure   Socket   Layer  )å¤–å£³çš„   HTTPï¼Œè¿è¡Œäº SSL ä¸Šï¼ŒSSL è¿è¡Œäº   TCP ä¹‹  ä¸Šï¼Œ  æ˜¯æ·»åŠ äº†åŠ å¯†å’Œè®¤è¯æœºåˆ¶çš„   HTTPã€‚</td></tr><tr><td>ç«¯å£</td><td>80</td><td>443</td></tr><tr><td>èµ„æºæ¶ˆè€—</td><td>è¾ƒå°‘</td><td>ç”±äºåŠ è§£å¯†å¤„ç†ï¼Œä¼šæ¶ˆè€—æ›´  å¤šçš„ CPU å’Œå†…å­˜èµ„æº</td></tr><tr><td>å¼€é”€</td><td>æ— éœ€è¯ä¹¦</td><td>éœ€è¦è¯ä¹¦ï¼Œè€Œè¯ä¹¦ä¸€èˆ¬éœ€è¦å‘è®¤è¯æœºæ„è´­ä¹°</td></tr><tr><td>åŠ å¯†æœºåˆ¶</td><td>æ— </td><td>å…±äº«å¯†é’¥åŠ å¯†å’Œå…¬å¼€å¯†é’¥åŠ å¯†å¹¶ç”¨çš„æ··åˆåŠ å¯†æœºåˆ¶</td></tr><tr><td>å®‰å…¨æ€§</td><td>å¼±</td><td>ç”±äºåŠ å¯†æœºåˆ¶ï¼Œå®‰å…¨æ€§å¼º</td></tr></tbody></table><h2 id="getå’Œpostçš„åŒºåˆ«">==getå’Œpostçš„åŒºåˆ«==</h2><img src="https://img.soniachen.com/blog/posts/2025/06/image-20220318165233672.png" alt="image-20220318165233672" style="zoom:50%;" /><ul><li>GETåœ¨æµè§ˆå™¨å›é€€æ—¶æ˜¯æ— å®³çš„ï¼Œè€ŒPOSTä¼šå†æ¬¡æäº¤è¯·æ±‚ã€‚</li><li>GETäº§ç”Ÿçš„URLåœ°å€å¯ä»¥è¢«Bookmarkï¼Œè€ŒPOSTä¸å¯ä»¥ã€‚</li><li>GETè¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨cacheï¼Œè€ŒPOSTä¸ä¼šï¼Œé™¤éæ‰‹åŠ¨è®¾ç½®ã€‚</li><li>GETè¯·æ±‚åªèƒ½è¿›è¡Œurlç¼–ç ï¼Œè€ŒPOSTæ”¯æŒå¤šç§ç¼–ç æ–¹å¼ã€‚</li><li>GETè¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œï¼Œè€ŒPOSTä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™ã€‚</li><li>GETè¯·æ±‚åœ¨URLä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œè€ŒPOSTåˆ™æ²¡æœ‰ã€‚å¯¹å‚æ•°çš„æ•°æ®ç±»å‹GETåªæ¥å—ASCIIå­—ç¬¦ï¼Œè€ŒPOSTå³å¯æ˜¯å­—ç¬¦ä¹Ÿå¯æ˜¯å­—èŠ‚ã€‚</li><li>GETæ¯”POSTæ›´ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨URLä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ã€‚</li><li>GETå‚æ•°é€šè¿‡URLä¼ é€’ï¼ŒPOSTæ”¾åœ¨Request bodyä¸­ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
            <tag> IO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“</title>
      <link href="/2022/02/23/%E7%AE%97%E6%B3%95%E9%AB%98%E9%A2%91%E9%A2%98%E6%80%BB%E7%BB%93/"/>
      <url>/2022/02/23/%E7%AE%97%E6%B3%95%E9%AB%98%E9%A2%91%E9%A2%98%E6%80%BB%E7%BB%93/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=984d8a04-ba3d-565a-aa2c-3df89c5efb96</cover>
      <date>Wed Feb 23 2022 10:24:18 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>é«˜é¢‘é¢˜</h1><h2 id="ä¸‰æ•°ä¹‹å’Œ">ä¸‰æ•°ä¹‹å’Œ</h2><p><a href="##%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C##">ä¸¤æ•°ä¹‹å’Œ</a>ä¸ºåŸºç¡€</p><blockquote><p>ç»™ä½ ä¸€ä¸ªåŒ…å« n ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œåˆ¤æ–­ nums ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  aï¼Œbï¼Œc ï¼Œä½¿å¾— a + b + c = 0 ï¼Ÿè¯·ä½ æ‰¾å‡ºæ‰€æœ‰å’Œä¸º 0 ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p><p>æ³¨æ„ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// 1 å…ˆå°†æ•°ç»„æ’åº</span>  <span class="token comment">// 2 ä»åå¾€å‰éå†æœ€åä¸€ä¸ªæ•° æ‰¾å¯¹åº”çš„äºŒå…ƒç»„ï¼šäºŒå…ƒç»„ + arr[i] = 0</span>  <span class="token comment">// 2.1 ä¿è¯ä¸é‡å¤</span>  <span class="token comment">// 2.2 æ‰¾å‡ºå‰é¢éƒ¨åˆ†æ»¡è¶³æ¡ä»¶çš„äºŒå…ƒç»„</span>  <span class="token comment">// 2.3 éå†å°†arr[i]æ·»åŠ åœ¨åé¢</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">threeSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// 1</span>      <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>      <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 2</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// ä¸‰å…ƒç»„æœ€åä¸€ä¸ªæ•°ï¼Œæ˜¯arr[i]   ä¹‹å‰....äºŒå…ƒç»„ + arr[i]</span>          <span class="token comment">// 2.1</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">||</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> nums<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>              <span class="token comment">// 2.2</span>              <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> nexts <span class="token operator">=</span> <span class="token function">twoSum</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// 2.3</span>              <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> cur <span class="token operator">:</span> nexts<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                  cur<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  ans<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">&#125;</span>          <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> ans<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">// nums[0...end]è¿™ä¸ªèŒƒå›´ä¸Šï¼Œæœ‰å¤šå°‘ä¸ªä¸åŒäºŒå…ƒç»„ï¼Œç›¸åŠ ==targetï¼Œå…¨è¿”å›</span>  <span class="token comment">// &#123;-1,5&#125;     K = 4</span>  <span class="token comment">// &#123;1, 3&#125;</span>  <span class="token comment">// 1 ä¸¤ä¸ªæŒ‡é’ˆ</span>  <span class="token comment">// 2 ä¸¤æ•°ç›¸åŠ å¤§äºç›®æ ‡å€¼å°±å³ç¼©;å°äºå°±å·¦ç¼©;ç­‰äºå°±æ·»åŠ åœ¨ç»“æœé›†é‡Œé¢ï¼ˆå…ˆåŠ å·¦å†åŠ å³ï¼‰</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">twoSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> end<span class="token punctuation">;</span>      <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">&lt;</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span> <span class="token operator">></span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>              <span class="token class-name">R</span><span class="token operator">--</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>              <span class="token class-name">L</span><span class="token operator">++</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token comment">// nums[L] + nums[R] == target</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> nums<span class="token punctuation">[</span><span class="token class-name">L</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> nums<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> cur <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  cur<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  cur<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  ans<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">&#125;</span>              <span class="token class-name">L</span><span class="token operator">++</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> ans<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span></code></pre><h2 id="ä¸¤æ•°ä¹‹å’Œ">ä¸¤æ•°ä¹‹å’Œ</h2><blockquote><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ <code>target</code>ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º <strong>å’Œä¸ºç›®æ ‡å€¼</strong> <em><code>target</code></em> çš„é‚£ <strong>ä¸¤ä¸ª</strong> æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p></blockquote><p>1 ä½¿ç”¨hashmap ç»“æ„ map.put(nums[i], i)</p><p>2 éå†ä¸€é å¦‚æœæŸ¥è¯¢åˆ°mapé‡Œé¢æœ‰ä¸è§£ å°±è¿”å›iå’Œmapgetçš„value</p><p>3 æœ€åå¦‚æœæ²¡æœ‰æ‰¾åˆ°å°±è¿”å›new int[0]</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">twoSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>target <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span>i<span class="token punctuation">,</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="æœç´¢æ—‹è½¬æ’åºæ•°ç»„ï¼ˆé¢è¯•ï¼‰">æœç´¢æ—‹è½¬æ’åºæ•°ç»„ï¼ˆé¢è¯•ï¼‰</h2><p><strong>ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾</strong></p><blockquote><p>æ•´æ•°æ•°ç»„numsæŒ‰å‡åºæ’åˆ—ï¼Œæ•°ç»„ä¸­çš„å€¼äº’ä¸ç›¸åŒã€‚</p><p>arrï¼ŒåŸæœ¬æ˜¯æœ‰åºæ•°ç»„ï¼Œæ—‹è½¬è¿‡ï¼Œè€Œä¸”å·¦éƒ¨åˆ†é•¿åº¦ä¸çŸ¥é“.(ä»¥æŸä¸€ä¸ªä¸‹æ ‡ä¸ºè½´æ—‹è½¬ ä¾‹å¦‚ï¼Œ <code>[0,1,2,4,5,6,7]</code> åœ¨ä¸‹æ ‡ <code>3</code> å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸º <code>[4,5,6,7,0,1,2]</code> ã€‚)</p><p>é¢˜ç›®éœ€è¦åœ¨arré‡Œé¢æ‰¾åˆ°target</p></blockquote><p><strong>æ€è·¯</strong>ï¼š</p><ol><li><code>L = M = R</code> æ˜¯æœ€å·®çš„æƒ…å†µ ä¸çŸ¥é“æ–­ç‚¹</li><li><code>L != M == R</code>/ <code>L == M != R</code>/ <code>L != M != R</code> åªè¦ä¸‰ä¸ªæ•°ä¸å…¨éƒ¨ä¸€æ ·å°±å¯ä»¥è¿›è¡Œ<strong>äºŒåˆ†</strong></li></ol><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220508120620575.png" alt="image-20220508120620575" style="zoom: 33%;" /><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">&lt;=</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> <span class="token class-name">M</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">+</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token class-name">M</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// nums[M] != target</span><span class="token comment">// 1 å·¦ ä¸­ å³ ç›¸ç­‰ -- ã€‹ä¸èƒ½äºŒåˆ†</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// å·¦ä¸­ä¸€ç›´ç›¸ç­‰ L ++</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">!=</span> <span class="token class-name">M</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">L</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 1.1 å·¦ä¸­ç›´åˆ°é‡åˆéƒ½ç›¸ç­‰</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">==</span> <span class="token class-name">M</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">L</span> <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">continue</span><span class="token punctuation">;</span><span class="token comment">// å›åˆ°å¾ªç¯å¼€å§‹é‡æ–°æ¥</span><span class="token punctuation">&#125;</span><span class="token comment">// 1.2 æˆ–è€…æ˜¯ åˆ°ä¸ç›¸ç­‰åœ°æ–¹ ç»§ç»­2</span><span class="token punctuation">&#125;</span><span class="token comment">// 2 å·¦ä¸­å³ä¸éƒ½ç›¸ç­‰ --> ä»£è¡¨å¯ä»¥äºŒåˆ†</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span> <span class="token operator">!=</span> nums<span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 2.1 [L] != [M] ?= [R]</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 2.1.1 L &lt; M å·¦è¾¹ä¸€å®šæœ‰åº</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> target <span class="token operator">&amp;&amp;</span> target <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">R</span> <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token class-name">L</span> <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 2.1.2 L > M å·¦è¾¹ä¸€å®šæœ‰æ–­ç‚¹ å³è¾¹æœ‰åº</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> target <span class="token operator">&amp;&amp;</span> target <span class="token operator">&lt;=</span> nums<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">L</span> <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token class-name">R</span> <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token comment">// 2.2 [L] ?= [M] != [R]</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 2.2.1 M &lt; R</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> target <span class="token operator">&amp;&amp;</span> target <span class="token operator">&lt;=</span> nums<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">L</span> <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token class-name">R</span> <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 2.1.2 M > R</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> target <span class="token operator">&amp;&amp;</span> target <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">R</span> <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token class-name">L</span> <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„">åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</h2><blockquote><p>ç»™ä½ ä¸¤ä¸ªæœ‰åºæ•°ç»„ nums1 å’Œ nums2ï¼Œå¦æœ‰ä¸¤ä¸ªæ•´æ•° m å’Œ n ï¼Œåˆ†åˆ«è¡¨ç¤º nums1 å’Œ nums2 ä¸­çš„<code>å…ƒç´ æ•°ç›®</code>ã€‚è¿›è¡Œåˆå¹¶ã€‚</p><p>æ³¨æ„ï¼šæœ€ç»ˆï¼Œåˆå¹¶åæ•°ç»„ä¸åº”ç”±å‡½æ•°è¿”å›ï¼Œè€Œæ˜¯å­˜å‚¨åœ¨æ•°ç»„ nums1 ä¸­ã€‚nums1 çš„åˆå§‹é•¿åº¦ä¸º m + nï¼Œå…¶ä¸­å‰ m ä¸ªå…ƒç´ è¡¨ç¤ºåº”åˆå¹¶çš„å…ƒç´ ï¼Œå n ä¸ªå…ƒç´ ä¸º 0 ï¼Œåº”å¿½ç•¥ã€‚nums2 çš„é•¿åº¦ä¸º n ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums1<span class="token punctuation">,</span> <span class="token keyword">int</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums2<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> index <span class="token operator">=</span> nums1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>       <span class="token keyword">while</span><span class="token punctuation">(</span>m <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> n <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// ç›¸ç­‰çš„æ—¶å€™å…ˆæ‹·è´é•¿æ•°ç»„çš„  å°½å¯èƒ½è®©ç©ºé—´æ—©é‡Šæ”¾</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums1<span class="token punctuation">[</span>m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>=</span> nums2<span class="token punctuation">[</span>n <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                nums1<span class="token punctuation">[</span><span class="token operator">--</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> nums1<span class="token punctuation">[</span><span class="token operator">--</span>m<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                nums1<span class="token punctuation">[</span><span class="token operator">--</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> nums2<span class="token punctuation">[</span><span class="token operator">--</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>           <span class="token keyword">while</span><span class="token punctuation">(</span>n <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// méƒ½è¢«å¡«å®Œ å°±æŠŠnums2å‰©ä¸‹çš„nå¡«è¿›nums1</span>            nums1<span class="token punctuation">[</span><span class="token operator">--</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> nums2<span class="token punctuation">[</span><span class="token operator">--</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="èºæ—‹çŸ©é˜µ">èºæ—‹çŸ©é˜µ</h2><blockquote><p>ç»™ä½ ä¸€ä¸ª <code>m</code> è¡Œ <code>n</code> åˆ—çš„çŸ©é˜µ <code>matrix</code> ï¼Œè¯·æŒ‰ç…§ <strong>é¡ºæ—¶é’ˆèºæ—‹é¡ºåº</strong> ï¼Œè¿”å›çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p></blockquote><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220508120715738.png" alt="image-20220508120715738" style="zoom:50%;" /><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token function">spiralOrder</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> order <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>matrix <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> matrix<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> order<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// æ˜“é”™ç‚¹ä¸€ï¼šæ³¨æ„rightå’Œbottomåˆ«å†™åäº†ã€‚</span><span class="token keyword">int</span> right <span class="token operator">=</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">int</span> bottom <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;=</span> right <span class="token operator">&amp;&amp;</span> top <span class="token operator">&lt;=</span> bottom<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// ä¸Šå±‚ï¼šä»å·¦åˆ°å³ï¼Œè¡Œä¸å˜ï¼Œåˆ—å˜ã€‚</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> left<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> right<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>order<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>top<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// å³å±‚ï¼šä»ä¸Šåˆ°ä¸‹ï¼Œè¡Œå˜ï¼Œåˆ—ä¸å˜ã€‚</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> top <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> bottom<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>order<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// æ˜“é”™ç‚¹äºŒï¼šæ³¨æ„é’ˆå¯¹è¡Œåˆ—ä¸ç›¸ç­‰æ—¶ï¼Œä¸‹é¢ä¸¤ä¸ªå¾ªç¯è¦æ»¡è¶³right > left &amp;&amp; bottom > topæ¡ä»¶ âš ï¸</span><span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">></span> left <span class="token operator">&amp;&amp;</span> bottom <span class="token operator">></span> top<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// ä¸‹å±‚ï¼šä»å³å‘å·¦ï¼Œè¡Œä¸å˜ï¼Œåˆ—å˜ã€‚</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> right <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> left<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>order<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>bottom<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// å·¦å±‚ï¼šä»ä¸‹åˆ°ä¸Šï¼Œè¡Œå˜ï¼Œåˆ—ä¸å˜ã€‚</span><span class="token comment">// æ˜“é”™ç‚¹ä¸‰ï¼šæ­¤å¤„åªéœ€è¦ i>top, iä¸èƒ½=top</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> bottom <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">></span> top<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>order<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>left<span class="token operator">++</span><span class="token punctuation">;</span>top<span class="token operator">++</span><span class="token punctuation">;</span>right<span class="token operator">--</span><span class="token punctuation">;</span>bottom<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> order<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="å­—ç¬¦ä¸²ç›¸åŠ ">å­—ç¬¦ä¸²ç›¸åŠ </h2><blockquote><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„éè´Ÿæ•´æ•° num1 å’Œnum2 ï¼Œè®¡ç®—å®ƒä»¬çš„å’Œå¹¶åŒæ ·ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›ã€‚</p><p>ä½ ä¸èƒ½ä½¿ç”¨ä»»ä½•å…§å»ºçš„ç”¨äºå¤„ç†å¤§æ•´æ•°çš„åº“ï¼ˆæ¯”å¦‚ BigIntegerï¼‰ï¼Œ ä¹Ÿä¸èƒ½ç›´æ¥å°†è¾“å…¥çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°å½¢å¼ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">addStrings2</span><span class="token punctuation">(</span><span class="token class-name">String</span> num1<span class="token punctuation">,</span> <span class="token class-name">String</span> num2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> i <span class="token operator">=</span> num1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">=</span> num2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> add <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token class-name">StringBuffer</span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">||</span> j <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">||</span> add <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> x <span class="token operator">=</span> i <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">?</span> num1<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token char">'0'</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> y <span class="token operator">=</span> j <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">?</span> num2<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token char">'0'</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> result <span class="token operator">=</span> x <span class="token operator">+</span> y <span class="token operator">+</span> add<span class="token punctuation">;</span>ans<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>result <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>add <span class="token operator">=</span> result <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// è®¡ç®—å®Œä»¥åçš„ç­”æ¡ˆéœ€è¦ç¿»è½¬è¿‡æ¥</span>ans<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> ans<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="äºŒåˆ†æŸ¥æ‰¾">äºŒåˆ†æŸ¥æ‰¾</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">&lt;</span> <span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// âš ï¸ æ²¡æœ‰ç›¸ç­‰</span>            <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">+</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token class-name">R</span> <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">></span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token class-name">L</span> <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> mid<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>         <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token class-name">L</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h3 id="åœ¨æ’åºæ•°ç»„ä¸­æ‰¾åˆ°å…ƒç´ ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®">åœ¨æ’åºæ•°ç»„ä¸­æ‰¾åˆ°å…ƒç´ ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½® * @author chs * */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fre_044_FindFirstAndLastPositionOfElementInSortedArray</span> <span class="token punctuation">&#123;</span><span class="token comment">// å€ŸåŠ©äºŒåˆ† ã€Šæ‰¾åˆ°æ•°ç»„ä¸­æ¯”å®ƒå°çš„æœ€å³çš„æ•° (lessMostRight</span><span class="token comment">// å¦‚æœè¯¥ä½ç½®å³è¾¹!=targetè¯´æ˜æ•°ç»„æ²¡æœ‰è¿™ä¸ªæ•°</span><span class="token comment">// å¦‚æœæ˜¯ é‚£ä¹ˆå·¦è¾¹ç•Œæ‰¾åˆ° å³è¾¹ç•Œå°±æ˜¯ã€Šæ‰¾åˆ°æ¯”ta+1å°çš„æœ€å³çš„æ•°ã€‹ (lessMostRight</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">searchRange</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token function">lessMostRight</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">==</span> nums<span class="token punctuation">.</span>length <span class="token operator">||</span> nums<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span> <span class="token operator">!=</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token function">lessMostRight</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// åˆ©ç”¨äºŒåˆ† </span><span class="token comment">// 1 ä¸€ä¸ªæŒ‡é’ˆ M</span><span class="token comment">// 2 anså­˜æ”¾ç»“æœ</span><span class="token comment">// 3 arr[M] å°äºå°±å»å³è¾¹æ‰¾ å¤§äºå°±å»å·¦è¾¹æ‰¾</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">lessMostRight</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">// 1</span><span class="token keyword">int</span> <span class="token class-name">M</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// 2 </span><span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">// 3</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">&lt;=</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">M</span> <span class="token operator">=</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">-</span> <span class="token class-name">L</span><span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> num<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>ans <span class="token operator">=</span> <span class="token class-name">M</span><span class="token punctuation">;</span><span class="token class-name">L</span> <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token class-name">R</span> <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="å­—ç¬¦ä¸²è½¬åŒ–æ•´æ•°">å­—ç¬¦ä¸²è½¬åŒ–æ•´æ•°</h2><p>æ³¨æ„æœ‰å¾ˆå¤šç‰¹æ®Šæƒ…å†µ</p><blockquote><p>1.éœ€è¦åˆ é™¤æ— ç”¨çš„å‰å¯¼ç©ºæ ¼</p><p>2.æ£€æŸ¥ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸ºæ­£è¿˜æ˜¯è´Ÿ</p><p>3.åªè¯»ä¸€å¼€å§‹æ˜¯æ•°å­—çš„éƒ¨åˆ†</p><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220212174954825.png" alt="image-20220212174954825" style="zoom:50%;" /><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220212174938284.png" alt="image-20220212174938284" style="zoom:50%;" /><p>4.è¶…å‡ºèŒƒå›´çš„æ•°å­—è¿”å›è¾¹ç•Œ</p></blockquote><pre class="language-none"><code class="language-none">1. ä¸»å‡½æ•°myAtoi():     1 é™¤å»ç©ºæ ¼å’Œåé¢éæ•°å­—çš„éƒ¨åˆ†( å‰åéƒ½è¦åˆ¤ç©º)ã€removeHeadZero()ã€‘     2 åˆ¤æ–­è¯¥éƒ¨åˆ†æ˜¯å¦æ˜¯æœ‰æ•ˆæ•°å­—ã€isValid()ã€‘     3 è½¬ä¸ºè´Ÿæ•°å½¢å¼ï¼ˆè½¬å›ä¸ä¼šæº¢å‡ºï¼Œè´Ÿæ•°èŒƒå›´å¤§äº›ï¼‰ posi(æ ‡å¿—æ­£è´Ÿ)     4 resæ˜¯æœ€è´Ÿçš„æƒ…å†µ (ç”¨äº†è´Ÿæ•°å°±åªç”¨å¯ä»¥è£…ä¸‹ï¼Œå¦‚æœç”¨æ•´æ•°è½¬ï¼Œæœ€å°å°±æ²¡æ³•è£…)2. removeHeadZero():     1 æ˜¯å¦æœ‰ç¬¦å·     2 sæ ‡å¿—ç¬¬ä¸€ä¸ªä¸æ˜¯é›¶çš„ä½ç½®     3 eæ ‡å¿—æ•°å­—éƒ¨åˆ†åé¢çš„éæ•°å­—éƒ¨åˆ†çš„å¼€å¤´     4 è¿”å›æˆªå–çš„å¸¦ç¬¦å·æ•´æ•°éƒ¨åˆ†3. isVaild():    åˆ¤æ–­å¸¦ç¬¦å·æ•´æ•°éƒ¨åˆ†æ˜¯å¦æœ‰æ•ˆ     1 å¼€å¤´åœ¨removeéƒ¨åˆ†æ²¡æœ‰åˆ¤æ–­ï¼Œåªè¦å¼€å¤´ä¸æ˜¯æ•°å­—å’Œç¬¦å·éƒ½è¿”å›æ— æ•ˆ     2 åªæœ‰ç¬¦å·ä¹Ÿæ— æ•ˆ     3 å¤¹æ‚ç€éæ•°å­—å­—ç¬¦ä¹Ÿæ— æ•ˆ</code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fre_072_StringToInteger</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">myAtoi</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 1 é™¤å»ç©ºæ ¼å’Œåé¢ä¸æ˜¯æ•°å­—çš„éƒ¨åˆ†</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>s <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// âš ï¸</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        s <span class="token operator">=</span> <span class="token function">removeHeadZero</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>s <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 2 åˆ¤æ–­è¿™éƒ¨åˆ†æ˜¯ä¸æ˜¯æœ‰æ•ˆæ•°å­—</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isValid</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 3 è½¬ä¸ºè´Ÿæ•°å½¢å¼ ä¸ºäº†é˜²æ­¢æº¢å‡º posi(æ ‡å¿—æ­£è´Ÿ) âš ï¸ä¸è¦æåäº†</span>        <span class="token keyword">boolean</span> posi <span class="token operator">=</span> str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'-'</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token comment">// åé¢ä¼šæœ‰*10çš„æ“ä½œ éœ€è¦å…ˆåˆ¤æ–­ä¼šä¸ä¼šæº¢å‡º</span>        <span class="token keyword">int</span> minq <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> minp <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span> <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> cur <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'-'</span> <span class="token operator">||</span> str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'+'</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            cur <span class="token operator">=</span> <span class="token char">'0'</span> <span class="token operator">-</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// è½¬ä¸ºè´Ÿæ•°</span>            <span class="token comment">// åœ¨ä¹˜åä¹‹å‰åˆ¤æ–­æ˜¯å¦ä¼šæº¢å‡º</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>res <span class="token operator">&lt;</span> minq <span class="token operator">||</span> <span class="token punctuation">(</span>res <span class="token operator">==</span> minq <span class="token operator">&amp;&amp;</span> cur <span class="token operator">&lt;</span> minp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> posi <span class="token operator">?</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">:</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">;</span>             <span class="token punctuation">&#125;</span>            res <span class="token operator">=</span> res <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> cur<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 4 resæ˜¯æœ€è´Ÿæƒ…å†µï¼ˆä¹Ÿå°±æ˜¯æœ¬æ¥æ˜¯æœ€å¤§çš„+1ï¼‰</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>posi <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>res <span class="token operator">==</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å›è¾¹ç•Œ</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> posi <span class="token operator">?</span> <span class="token operator">-</span>res <span class="token operator">:</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">removeHeadZero</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">// 1 æ˜¯å¦æœ‰ç¬¦å·</span>        <span class="token keyword">boolean</span> r <span class="token operator">=</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"+"</span><span class="token punctuation">)</span> <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âš ï¸ ä¸èƒ½ç”¨charat</span>        <span class="token comment">// 2 æ ‡å¿—ç¬¬ä¸€ä¸ªä¸æ˜¯é›¶çš„ä½ç½®</span>        <span class="token keyword">int</span> start <span class="token operator">=</span> r <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> start<span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> start<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token char">'0'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 3 æ‰¾åˆ°æ•°å­—éƒ¨åˆ†åé¢çš„éæ•°ç»„éƒ¨åˆ†å¼€å¤´ å€’ç€éå†</span>        <span class="token keyword">int</span> e <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token punctuation">(</span>r <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token char">'0'</span>  <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token char">'9'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 4 è¿”å›æˆªå–çš„å¸¦ç¬¦å·çš„æ•´æ•°éƒ¨åˆ†</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>r <span class="token operator">?</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">+</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> e <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// åˆ¤æ–­æ˜¯å¦æ˜¯æœ‰æ•ˆçš„æ•°å­—</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 1 å¦‚æœå¼€å¤´ä¸æ˜¯æ•°ç»„</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token char">'-'</span> <span class="token operator">&amp;&amp;</span> str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token char">'+'</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token char">'0'</span> <span class="token operator">||</span> str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">></span> <span class="token char">'9'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 2 åªæœ‰ç¬¦å·ä¹Ÿæ— æ•ˆ</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'-'</span> <span class="token operator">||</span> str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'+'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> str<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 3 å¤¹æ‚ç€éæ•°å­—å­—ç¬¦ æ— æ•ˆ</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token char">'0'</span> <span class="token operator">||</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token char">'9'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="ä¸‹ä¸€ä¸ªæ’åˆ—">ä¸‹ä¸€ä¸ªæ’åˆ—</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾å‡º nums çš„å­—å…¸åºä¸­çš„ä¸‹ä¸€ä¸ªæ’åˆ—ã€‚</p><p>ä¾‹å¦‚ï¼Œarr = [1,2,3] çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ [1,3,2] ã€‚<br>ç±»ä¼¼åœ°ï¼Œarr = [2,3,1] çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ [3,1,2] ã€‚<br>è€Œ arr = [3,2,1] çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ [1,2,3] ï¼Œå› ä¸º [3,2,1] ä¸å­˜åœ¨ä¸€ä¸ªå­—å…¸åºæ›´å¤§çš„æ’åˆ—ã€‚</p><p>å¿…é¡» åŸåœ° ä¿®æ”¹ï¼Œåªå…è®¸ä½¿ç”¨é¢å¤–å¸¸æ•°ç©ºé—´ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">nextPermutation</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">int</span> i <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>       <span class="token comment">// 1 å€’ç€æ‰¾å‡åºå¯¹ [ i , i+ 1]</span>       <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>=</span> nums<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           i<span class="token operator">--</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token comment">// 2 ä»end -> i+1 å€’ç€æ‰¾æ¯”iå¤§çš„æ•°</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           <span class="token keyword">int</span> j <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>           <span class="token keyword">while</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>               j<span class="token operator">--</span><span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span>           <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token comment">// 3 å°†æ•°ç»„i+1ä»¥åçš„åè½¬</span>       <span class="token comment">// å› ä¸ºæœ‰ä¸¤ç§æƒ…å†µï¼š1ï¼‰ i&lt; 0 è¯´æ˜æœ¬èº«å°±æ˜¯å­—å…¸åºæœ€å¤§ï¼Œç›´æ¥ç¿»è½¬ 2ï¼‰[i+1, end]æ˜¯é™åºéœ€è¦ç¿»è½¬</span>       <span class="token function">reverse</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>       <span class="token keyword">int</span> left <span class="token operator">=</span> i<span class="token punctuation">;</span>       <span class="token keyword">int</span> right <span class="token operator">=</span>  nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>       <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>           left<span class="token operator">++</span><span class="token punctuation">;</span>           right<span class="token operator">--</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>       <span class="token keyword">int</span> tmp <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>       nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>       nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span></code></pre><h2 id="åˆå¹¶åŒºé—´">åˆå¹¶åŒºé—´</h2><blockquote><p>ä»¥æ•°ç»„ intervals è¡¨ç¤ºè‹¥å¹²ä¸ªåŒºé—´çš„é›†åˆï¼Œå…¶ä¸­å•ä¸ªåŒºé—´ä¸º intervals[i] = [starti, endi] ã€‚è¯·ä½ åˆå¹¶æ‰€æœ‰é‡å çš„åŒºé—´ï¼Œå¹¶è¿”å› ä¸€ä¸ªä¸é‡å çš„åŒºé—´æ•°ç»„ï¼Œè¯¥æ•°ç»„éœ€æ°å¥½è¦†ç›–è¾“å…¥ä¸­çš„æ‰€æœ‰åŒºé—´ ã€‚</p></blockquote><ol><li>s å’Œ e è®°å½•ä¸Šä¸€ä¸ªåŒºé—´çš„è¾¹ç•Œ</li><li>ç„¶åå¤ç”¨intervalæ•°ç»„æ¥å­˜å‚¨ï¼Œæœ€åå¤åˆ¶æ•°ç»„sizeéƒ¨åˆ†</li></ol><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> intervals<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>intervals<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token comment">// å…ˆæŒ‰ç…§åŒºé—´çš„å·¦è¾¹ç•Œæ¥æ’åº</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>intervals<span class="token punctuation">,</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">-></span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> s <span class="token operator">=</span> intervals<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> e <span class="token operator">=</span> intervals<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// </span><span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment">// ç„¶åå¤ç”¨intervalæ•°ç»„æ¥å­˜å‚¨ï¼Œæœ€åå¤åˆ¶æ•°ç»„sizeéƒ¨åˆ†</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> intervals<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>intervals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">></span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// å¦‚æœå½“å‰å·¦è¾¹ç•Œå¤§äºe è¯´æ˜æ²¡æœ‰è¦†ç›– </span>intervals<span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">;</span><span class="token comment">// å¯ä»¥æ›´æ–°sizeéƒ¨åˆ†çš„så’Œe ç„¶åsize++</span>intervals<span class="token punctuation">[</span>size<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>s <span class="token operator">=</span> intervals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>e <span class="token operator">=</span> intervals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// s e æ›´æ–°ä¸ºå½“å‰çš„å·¦å³è¾¹ç•Œ</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>e <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> intervals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¦‚æœå½“å‰å·¦è¾¹ç•Œå°äºæˆ–è€…ç­‰äº è¯´æ˜ä¸¤ä¸ªåŒºé—´å¯ä»¥è¦†ç›– å…ˆå°†eæ›´æ–°ä¸ºè¿™ä¸¤ä¸ªåŒºé—´çš„æœ€å¤§å³åŒºé—´</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>intervals<span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">;</span> <span class="token comment">// æœ€åè¿˜æœ‰ä¸€æ¬¡sizeå¤„çš„æ›´æ–°</span>intervals<span class="token punctuation">[</span>size<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>intervals<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="xçš„å¹³æ–¹æ ¹">xçš„å¹³æ–¹æ ¹</h2><p>==äºŒåˆ†æŸ¥æ‰¾==</p><blockquote><p>ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•° x ï¼Œè®¡ç®—å¹¶è¿”å› x çš„ ç®—æœ¯å¹³æ–¹æ ¹ ã€‚</p><p>ç”±äºè¿”å›ç±»å‹æ˜¯æ•´æ•°ï¼Œç»“æœåªä¿ç•™ æ•´æ•°éƒ¨åˆ† ï¼Œå°æ•°éƒ¨åˆ†å°†è¢« èˆå» ã€‚</p><p>æ³¨æ„ï¼šä¸å…è®¸ä½¿ç”¨ä»»ä½•å†…ç½®æŒ‡æ•°å‡½æ•°å’Œç®—ç¬¦ï¼Œä¾‹å¦‚ pow(x, 0.5) æˆ–è€… x ** 0.5 ã€‚</p></blockquote><pre class="language-none"><code class="language-none">1. ä½¿ç”¨ äºŒåˆ† &lt;&#x3D;å°±æ›´æ–°anså’ŒL åˆ°å³è¾¹å°±æ›´æ–°R2. æ³¨æ„æ•°æ®ç±»å‹æ—¶longä¸»è¦æ˜¯ä¸ºäº†ä¸¤ä¸ªæ•´å‹ç›¸ä¹˜ä¸ä¼šæº¢å‡º</code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// xä¸€å®šéè´Ÿï¼Œè¾“å…¥å¯ä»¥ä¿è¯</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">mySqrt</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// x >= 3</span>        <span class="token keyword">long</span> ans <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> <span class="token class-name">R</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>        <span class="token keyword">long</span> <span class="token class-name">M</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">&lt;=</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">M</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">+</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>            <span class="token comment">// å› ä¸ºä¸¤ä¸ªæ•´æ•°ç›¸ä¹˜å¯èƒ½ä¼šæº¢å‡º</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">M</span> <span class="token operator">*</span> <span class="token class-name">M</span> <span class="token operator">&lt;=</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                ans <span class="token operator">=</span> <span class="token class-name">M</span><span class="token punctuation">;</span>                <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">R</span> <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><p>æ‰©å±•ï¼šæ±‚å‡ºå°æ•°ç‚¹åkä½ å…¶å®æ€è·¯ä¸ä¸€æ · åªæ˜¯æ¢æˆdoubleç±»å‹å¹¶ä¸”éœ€è¦è½¬æ¢æ•°æ ¼å¼</p><h2 id="ç¼ºå¤±çš„æ­£æ•°">ç¼ºå¤±çš„æ­£æ•°</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ï¼Œè¯·ä½ æ‰¾å‡ºæ²¡æœ‰å‡ºç°çš„æœ€å°çš„æ­£æ•´æ•° æ—¶é—´å¤æ‚åº¦o(n)</p></blockquote><p>é™¤äº†æ‰“æ ‡è®°ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ç½®æ¢çš„æ–¹æ³•ï¼Œå°†ç»™å®šçš„æ•°ç»„ã€Œæ¢å¤ã€æˆä¸‹é¢çš„å½¢å¼ï¼š</p><pre><code>å¦‚æœæ•°ç»„ä¸­åŒ…å« xâˆˆ[1,N]x \in [1, N]xâˆˆ[1,N]ï¼Œé‚£ä¹ˆæ¢å¤åï¼Œæ•°ç»„çš„ç¬¬ xâˆ’1x - 1xâˆ’1 ä¸ªå…ƒç´ ä¸º xxxã€‚</code></pre><p>åœ¨æ¢å¤åï¼Œæ•°ç»„åº”å½“æœ‰ [1, 2, â€¦, N] çš„å½¢å¼ï¼Œä½†å…¶ä¸­æœ‰è‹¥å¹²ä¸ªä½ç½®ä¸Šçš„æ•°æ˜¯é”™è¯¯çš„ï¼Œæ¯ä¸€ä¸ªé”™è¯¯çš„ä½ç½®å°±ä»£è¡¨äº†ä¸€ä¸ªç¼ºå¤±çš„æ­£æ•°ã€‚ä»¥é¢˜ç›®ä¸­çš„ç¤ºä¾‹äºŒ [3, 4, -1, 1] ä¸ºä¾‹ï¼Œæ¢å¤åçš„æ•°ç»„åº”å½“ä¸º [1, -1, 3, 4]ï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“ç¼ºå¤±çš„æ•°ä¸º 2ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">firstMissingPositive</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> n <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>               <span class="token comment">// âš ï¸äº¤æ¢çš„æ¡ä»¶---nums[i]âˆˆ[1,N] ä¸” nums[i]å’Œæœ¬æ¥åº”è¯¥åœ¨çš„ä½ç½®çš„å€¼nums[nums[i]-1]ä¸ç›¸ç­‰</span>                <span class="token keyword">int</span> temp <span class="token operator">=</span> nums<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                nums<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="ç”¨rand7-ç”Ÿæˆrand10">ç”¨rand7()ç”Ÿæˆrand10()</h2><blockquote><p>ç”¨ä¸€ä¸ªä¸ç­‰æ¦‚ç‡è¿”å›0å’Œ1çš„å‡½æ•°, æ€ä¹ˆåŠ å·¥ä¸€ä¸ªå‡½æ•°0å’Œ1ç­‰æ¦‚ç‡è¿”å›</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rand10</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">int</span> ans<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token keyword">do</span><span class="token punctuation">&#123;</span>           ans <span class="token operator">=</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span><span class="token keyword">while</span><span class="token punctuation">(</span>ans <span class="token operator">></span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> ans <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">int</span> ans<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token keyword">do</span><span class="token punctuation">&#123;</span>           ans <span class="token operator">=</span> <span class="token function">rand7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span><span class="token keyword">while</span><span class="token punctuation">(</span>ans <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> ans <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token operator">?</span> <span class="token number">0</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token comment">// 0000~1111 0~15</span>   <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token operator">+</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span></code></pre><h2 id="æ‰¾åˆ°ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°-âš ï¸-ä¸¤ä¸ªæœ‰åºæ•°ç»„ç¬¬kå°">æ‰¾åˆ°ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°(âš ï¸)/ä¸¤ä¸ªæœ‰åºæ•°ç»„ç¬¬kå°</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">findMedianSortedArrays</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums1<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//è¿™é‡Œå°±ä¸»è¦å¤„ç† ä¸¤ä¸ªä¸ºç©º ä¸€ä¸ªä¸ºç©º å…¨ä¸ä¸ºç©ºçš„ä¸‰ä¸ªæƒ…å†µ</span>        <span class="token keyword">int</span> size <span class="token operator">=</span> nums1<span class="token punctuation">.</span>length <span class="token operator">+</span> nums2<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">boolean</span> e <span class="token operator">=</span> <span class="token punctuation">(</span>size <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums1<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums2<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums1<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> nums2<span class="token punctuation">[</span>size<span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                               <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">(</span>nums2<span class="token punctuation">[</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums2<span class="token punctuation">[</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums2<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> nums1<span class="token punctuation">[</span>size<span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">(</span>nums1<span class="token punctuation">[</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums1<span class="token punctuation">[</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token function">findKthNum</span><span class="token punctuation">(</span>nums1<span class="token punctuation">,</span> nums2<span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">findKthNum</span><span class="token punctuation">(</span>nums1<span class="token punctuation">,</span> nums2<span class="token punctuation">,</span> size<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">findKthNum</span><span class="token punctuation">(</span>nums1<span class="token punctuation">,</span> nums2<span class="token punctuation">,</span> size<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2D</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token comment">//åŸå‹</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getUpMedian</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr1<span class="token punctuation">,</span> <span class="token keyword">int</span> s1<span class="token punctuation">,</span><span class="token keyword">int</span> e1<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr2<span class="token punctuation">,</span> <span class="token keyword">int</span> s2<span class="token punctuation">,</span> <span class="token keyword">int</span> e2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> mid1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> mid2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>s1 <span class="token operator">&lt;</span> e1<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">//mid</span>            mid1 <span class="token operator">=</span> <span class="token punctuation">(</span>e1 <span class="token operator">+</span> s1<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>            mid2 <span class="token operator">=</span> <span class="token punctuation">(</span>e2 <span class="token operator">+</span> s2<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>mid1<span class="token punctuation">]</span> <span class="token operator">==</span> arr2<span class="token punctuation">[</span>mid2<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token keyword">return</span> arr1<span class="token punctuation">[</span>mid1<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token comment">//å¥‡æ•°</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e1 <span class="token operator">-</span> s1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>mid1<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr2<span class="token punctuation">[</span>mid2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>mid1<span class="token punctuation">]</span> <span class="token operator">>=</span> arr2<span class="token punctuation">[</span>mid2 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> arr1<span class="token punctuation">[</span>mid1<span class="token punctuation">]</span><span class="token punctuation">;</span>                    s1 <span class="token operator">=</span> mid1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                    e2 <span class="token operator">=</span> mid2 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>arr2<span class="token punctuation">[</span>mid2<span class="token punctuation">]</span> <span class="token operator">>=</span> arr1<span class="token punctuation">[</span>mid1 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> arr2<span class="token punctuation">[</span>mid2<span class="token punctuation">]</span><span class="token punctuation">;</span>                    s2 <span class="token operator">=</span> mid2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                    e1 <span class="token operator">=</span> mid1 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">//å¶æ•°</span>            <span class="token keyword">else</span><span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>mid1<span class="token punctuation">]</span> <span class="token operator">></span> arr2<span class="token punctuation">[</span>mid2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    e1 <span class="token operator">=</span> mid1<span class="token punctuation">;</span>                    s2 <span class="token operator">=</span> mid2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                    e2 <span class="token operator">=</span> mid2<span class="token punctuation">;</span>                    s1 <span class="token operator">=</span> mid1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//æœ€åè·³å‡ºå¾ªç¯ éƒ½åªå‰©ä¸€ä¸ªæ•°</span>        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>s1<span class="token punctuation">]</span><span class="token punctuation">,</span> arr2<span class="token punctuation">[</span>s2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//å¤„ç†é•¿åº¦ä¸åŒ è¿”å›Kthçš„æƒ…å†µ</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">findKthNum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr1<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr2<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> longs <span class="token operator">=</span> arr1<span class="token punctuation">.</span>length <span class="token operator">>=</span> arr2<span class="token punctuation">.</span>length <span class="token operator">?</span> arr1 <span class="token operator">:</span> arr2<span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> shorts <span class="token operator">=</span> arr1<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> arr2<span class="token punctuation">.</span>length <span class="token operator">?</span> arr1 <span class="token operator">:</span> arr2<span class="token punctuation">;</span>        <span class="token keyword">int</span> l <span class="token operator">=</span> longs<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">int</span> s <span class="token operator">=</span> shorts<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token comment">//1</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">&lt;=</span> s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token function">getUpMedian</span><span class="token punctuation">(</span>longs<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> shorts<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//2</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">></span> l<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>longs<span class="token punctuation">[</span>k <span class="token operator">-</span> s <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>=</span> shorts<span class="token punctuation">[</span>s <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> longs<span class="token punctuation">[</span>k <span class="token operator">-</span> s <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>shorts<span class="token punctuation">[</span>k <span class="token operator">-</span> l <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>=</span> longs<span class="token punctuation">[</span>l <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> shorts<span class="token punctuation">[</span>k <span class="token operator">-</span> l <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> <span class="token function">getUpMedian</span><span class="token punctuation">(</span>longs<span class="token punctuation">,</span> k <span class="token operator">-</span> s<span class="token punctuation">,</span> l <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> shorts<span class="token punctuation">,</span> k <span class="token operator">-</span> l<span class="token punctuation">,</span> s <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//3</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>longs<span class="token punctuation">[</span>k <span class="token operator">-</span> s <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>=</span> shorts<span class="token punctuation">[</span>s <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> longs<span class="token punctuation">[</span>k <span class="token operator">-</span> s <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token function">getUpMedian</span><span class="token punctuation">(</span>longs<span class="token punctuation">,</span> k <span class="token operator">-</span> s<span class="token punctuation">,</span> k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>shorts<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span>s <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="ç¿»è½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯">ç¿»è½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œé€ä¸ªç¿»è½¬å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ å•è¯ ã€‚</p><p>å•è¯ æ˜¯ç”±éç©ºæ ¼å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚s ä¸­ä½¿ç”¨è‡³å°‘ä¸€ä¸ªç©ºæ ¼å°†å­—ç¬¦ä¸²ä¸­çš„ å•è¯ åˆ†éš”å¼€ã€‚</p><p>è¯·ä½ è¿”å›ä¸€ä¸ªç¿»è½¬ s ä¸­å•è¯é¡ºåºå¹¶ç”¨å•ä¸ªç©ºæ ¼ç›¸è¿çš„å­—ç¬¦ä¸²ã€‚</p><p>è¯´æ˜ï¼š</p><p>è¾“å…¥å­—ç¬¦ä¸² s å¯ä»¥åœ¨å‰é¢ã€åé¢æˆ–è€…å•è¯é—´åŒ…å«å¤šä½™çš„ç©ºæ ¼ã€‚<br>ç¿»è½¬åå•è¯é—´åº”å½“ä»…ç”¨ä¸€ä¸ªç©ºæ ¼åˆ†éš”ã€‚<br>ç¿»è½¬åçš„å­—ç¬¦ä¸²ä¸­ä¸åº”åŒ…å«é¢å¤–çš„ç©ºæ ¼ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šs = â€œthe sky is blueâ€<br>è¾“å‡ºï¼šâ€œblue is sky theâ€</p><p>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šs = &quot;  hello world  &quot;<br>è¾“å‡ºï¼šâ€œworld helloâ€<br>è§£é‡Šï¼šè¾“å…¥å­—ç¬¦ä¸²å¯ä»¥åœ¨å‰é¢æˆ–è€…åé¢åŒ…å«å¤šä½™çš„ç©ºæ ¼ï¼Œä½†æ˜¯ç¿»è½¬åçš„å­—ç¬¦ä¸èƒ½åŒ…æ‹¬ã€‚</p></blockquote><h3 id="æ€è·¯">æ€è·¯:</h3><ol><li><strong>å»é™¤å¤šä½™çš„ç©ºç™½ï¼š</strong><br><strong>(1å»æ‰å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºç™½å­—ç¬¦</strong><br><strong>(2å»æ‰å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºç™½å­—ç¬¦</strong><br><strong>(3å°†å­—ç¬¦ä¸²é—´å¤šä½™çš„ç©ºç™½å­—ç¬¦å»é™¤</strong></li><li><strong>ç¿»è½¬å­—ç¬¦ä¸²ï¼š</strong></li><li><strong>ç¿»è½¬æ¯ä¸€ä¸ªå•è¯ï¼š</strong><br><strong>(1 éå†sb ä½¿ç”¨start å’Œ endæ¥æŠ“å•è¯</strong><br><strong>(2 ç¿»è½¬å•è¯</strong><br><strong>(3 æ›´æ–°startï¼Œå»æ‰¾ä¸‹ä¸€ä¸ªå•è¯</strong></li></ol><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// 1 å»é™¤å¤šä½™çš„ç©ºç™½</span>    <span class="token comment">// 2 ç¿»è½¬å­—ç¬¦ä¸²</span>    <span class="token comment">// 3 ç¿»è½¬æ¯ä¸€ä¸ªå•è¯</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">reverseWords</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 1</span>        <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token function">trimSpaces</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 2</span>        <span class="token function">reverse</span><span class="token punctuation">(</span>sb<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> sb<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 3</span>        <span class="token function">reverseEachWord</span><span class="token punctuation">(</span>sb<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 1 å»æ‰å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºç™½å­—ç¬¦</span>    <span class="token comment">// 2 å»æ‰å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºç™½å­—ç¬¦</span>    <span class="token comment">// 3 å°†å­—ç¬¦ä¸²é—´å¤šä½™çš„ç©ºç™½å­—ç¬¦å»é™¤</span>    <span class="token keyword">public</span> <span class="token class-name">StringBuilder</span> <span class="token function">trimSpaces</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment">// 1 </span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;=</span> right <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token char">' '</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token operator">++</span>left<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 2</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;=</span> right <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token char">' '</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token operator">--</span>right<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 3</span>        <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;=</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">char</span> c <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">!=</span> <span class="token char">' '</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token char">' '</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token operator">++</span>left<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> sb<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// ç¿»è½¬ä»»æ„å­—ç¬¦</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token class-name">StringBuilder</span> sb<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">char</span> tmp <span class="token operator">=</span> sb<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>            sb<span class="token punctuation">.</span><span class="token function">setCharAt</span><span class="token punctuation">(</span>left<span class="token operator">++</span><span class="token punctuation">,</span> sb<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            sb<span class="token punctuation">.</span><span class="token function">setCharAt</span><span class="token punctuation">(</span>right<span class="token operator">--</span><span class="token punctuation">,</span> tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">reverseEachWord</span><span class="token punctuation">(</span><span class="token class-name">StringBuilder</span> sb<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> sb<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> start <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> end <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment">// 1 éå†sb ä½¿ç”¨start å’Œ endæ¥æŠ“å•è¯</span>        <span class="token comment">// 2 ç¿»è½¬å•è¯</span>        <span class="token comment">// 3 æ›´æ–°startï¼Œå»æ‰¾ä¸‹ä¸€ä¸ªå•è¯</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>start <span class="token operator">&lt;</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// 1</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> sb<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>end<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token char">' '</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token operator">++</span>end<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">// 2</span>            <span class="token function">reverse</span><span class="token punctuation">(</span>sb<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 3</span>            start <span class="token operator">=</span> end <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token operator">++</span>end<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="å­—ç¬¦ä¸²ç›¸ä¹˜">å­—ç¬¦ä¸²ç›¸ä¹˜</h2><blockquote><p>ç»™å®šä¸¤ä¸ªä»¥å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºçš„éè´Ÿæ•´æ•° num1 å’Œ num2ï¼Œè¿”å› num1 å’Œ num2 çš„ä¹˜ç§¯ï¼Œå®ƒä»¬çš„ä¹˜ç§¯ä¹Ÿè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²å½¢å¼ã€‚</p><p>æ³¨æ„ï¼šä¸èƒ½ä½¿ç”¨ä»»ä½•å†…ç½®çš„ BigInteger åº“æˆ–ç›´æ¥å°†è¾“å…¥è½¬æ¢ä¸ºæ•´æ•°ã€‚</p><p>ç¤ºä¾‹ 1:</p><p>è¾“å…¥: num1 = â€œ2â€, num2 = â€œ3â€<br>è¾“å‡º: â€œ6â€</p><p>ç¤ºä¾‹ 2:</p><p>è¾“å…¥: num1 = â€œ123â€, num2 = â€œ456â€<br>è¾“å‡º: â€œ56088â€</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token class-name">String</span> num1<span class="token punctuation">,</span> <span class="token class-name">String</span> num2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>num1<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span> <span class="token operator">||</span> num2<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> m <span class="token operator">=</span> num1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> n <span class="token operator">=</span> num2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ansArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>m <span class="token operator">+</span> n<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> x <span class="token operator">=</span> num1<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token char">'0'</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">int</span> y <span class="token operator">=</span> num2<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token char">'0'</span><span class="token punctuation">;</span>                ansArr<span class="token punctuation">[</span>i <span class="token operator">+</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> m <span class="token operator">+</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            ansArr<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> ansArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">;</span>            ansArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">%=</span> <span class="token number">10</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> index <span class="token operator">=</span> ansArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token class-name">StringBuffer</span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> m <span class="token operator">+</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            ans<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>ansArr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            index<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="åˆ é™¤æ•°ç»„ä¸­çš„é‡å¤é¡¹">åˆ é™¤æ•°ç»„ä¸­çš„é‡å¤é¡¹</h2><p>ä»»ä½•åˆ é™¤é‡å¤çš„éƒ½å¯ä»¥ç”¨å¿«æ…¢æŒ‡é’ˆ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ * @author chs * ä»»ä½•åˆ é™¤é‡å¤çš„éƒ½å¯ä»¥ç”¨å¿«æ…¢æŒ‡é’ˆ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fre_017_RemoveDuplicatesFromSortedArray</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">removeDuplicates</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> done <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> nums<span class="token punctuation">[</span>done<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>nums<span class="token punctuation">[</span><span class="token operator">++</span>done<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> done <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="å»é™¤é‡å¤å­—æ¯">å»é™¤é‡å¤å­—æ¯</h2><p>è´ªå¿ƒâ•å•è°ƒæ ˆï¼Ÿ</p><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ å»é™¤å­—ç¬¦ä¸²ä¸­é‡å¤çš„å­—æ¯ï¼Œä½¿å¾—æ¯ä¸ªå­—æ¯åªå‡ºç°ä¸€æ¬¡ã€‚éœ€ä¿è¯ è¿”å›ç»“æœçš„å­—å…¸åºæœ€å°ï¼ˆè¦æ±‚ä¸èƒ½æ‰“ä¹±å…¶ä»–å­—ç¬¦çš„ç›¸å¯¹ä½ç½®ï¼‰ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šs = â€œbcabcâ€<br>è¾“å‡ºï¼šâ€œabcâ€</p><p>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šs = â€œcbacdcbcâ€<br>è¾“å‡ºï¼šâ€œacdbâ€</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">removeDuplicateLetters</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> vis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           num<span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token class-name">StringBuffer</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">char</span> ch <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>vis<span class="token punctuation">[</span>ch <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>               <span class="token keyword">while</span> <span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> sb<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">></span> ch<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                   <span class="token keyword">if</span> <span class="token punctuation">(</span>num<span class="token punctuation">[</span>sb<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                       vis<span class="token punctuation">[</span>sb<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                       sb<span class="token punctuation">.</span><span class="token function">deleteCharAt</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                       <span class="token keyword">break</span><span class="token punctuation">;</span>                   <span class="token punctuation">&#125;</span>               <span class="token punctuation">&#125;</span>               vis<span class="token punctuation">[</span>ch <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>               sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span>           num<span class="token punctuation">[</span>ch <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span></code></pre><h2 id="å•è¯æœç´¢">å•è¯æœç´¢</h2><blockquote><p>ç»™å®šä¸€ä¸ª n Ã— n çš„äºŒç»´çŸ©é˜µ matrix è¡¨ç¤ºä¸€ä¸ªå›¾åƒã€‚è¯·ä½ å°†å›¾åƒé¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚</p><p>ä½ å¿…é¡»åœ¨ åŸåœ° æ—‹è½¬å›¾åƒï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦ç›´æ¥ä¿®æ”¹è¾“å…¥çš„äºŒç»´çŸ©é˜µã€‚è¯·ä¸è¦ ä½¿ç”¨å¦ä¸€ä¸ªçŸ©é˜µæ¥æ—‹è½¬å›¾åƒã€‚</p><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220228230315689.png" alt="image-20220228230315689" style="zoom:33%;" /></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> c <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> d <span class="token operator">=</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>a <span class="token operator">&lt;</span> c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">rotateEdge</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> a<span class="token operator">++</span><span class="token punctuation">,</span> b<span class="token operator">++</span><span class="token punctuation">,</span> c<span class="token operator">--</span><span class="token punctuation">,</span> d<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">rotateEdge</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> tmp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> d <span class="token operator">-</span> b<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            tmp <span class="token operator">=</span> m<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>            m<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> m<span class="token punctuation">[</span>c <span class="token operator">-</span> i<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">;</span>            m<span class="token punctuation">[</span>c <span class="token operator">-</span> i<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> m<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span>d <span class="token operator">-</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>            m<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span>d <span class="token operator">-</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> m<span class="token punctuation">[</span>a <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">;</span>            m<span class="token punctuation">[</span>a <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">[</span>d<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="å¤šæ•°å…ƒç´ ">å¤šæ•°å…ƒç´ </h2><blockquote><p>ç»™å®šä¸€ä¸ªå¤§å°ä¸º n çš„æ•°ç»„ï¼Œæ‰¾åˆ°å…¶ä¸­çš„å¤šæ•°å…ƒç´ ã€‚å¤šæ•°å…ƒç´ æ˜¯æŒ‡åœ¨æ•°ç»„ä¸­å‡ºç°æ¬¡æ•° å¤§äº âŒŠ n/2 âŒ‹ çš„å…ƒç´ ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ•°ç»„æ˜¯éç©ºçš„ï¼Œå¹¶ä¸”ç»™å®šçš„æ•°ç»„æ€»æ˜¯å­˜åœ¨å¤šæ•°å…ƒç´ ã€‚</p><p><strong>æ˜¯ä¸€ä¸ªè¶…çº§æ°´ç‹é—®é¢˜</strong></p><pre class="language-none"><code class="language-none">1éå† ä½¿ç”¨ candidateå’ŒHP æ¥ä¸€æ¬¡åˆ é™¤ä¸¤ä¸ªä¸åŒçš„æ•°2åˆ°æœ€å HP ä¸ä¸º0 åˆ™è¯´æ˜å¯èƒ½æœ‰æ°´ç‹ æ˜¯å½“å‰çš„candidate3å†éå†ä¸€æ¬¡æ‰¾candi å¦‚æœ HP&gt; n&#x2F;2 è¯´æ˜å°±æ˜¯æ°´ç‹ </code></pre><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220228231911847.png" alt="image-20220228231911847" style="zoom:50%;" /></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">majorityElement</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">int</span> candi <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> <span class="token constant">HP</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i  <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">HP</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                candi <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token constant">HP</span><span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> candi<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token constant">HP</span><span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token constant">HP</span><span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">HP</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token constant">HP</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> candi<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token constant">HP</span><span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">HP</span> <span class="token operator">></span> n <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> candi<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h1>1 é“¾è¡¨</h1><h2 id="1-åè½¬é“¾è¡¨">1 åè½¬é“¾è¡¨</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ListNode</span> <span class="token function">reverseList</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token class-name">ListNode</span> pre <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>      <span class="token class-name">ListNode</span> cur <span class="token operator">=</span> head<span class="token punctuation">;</span>      <span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token class-name">ListNode</span> next <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>          cur<span class="token punctuation">.</span>next <span class="token operator">=</span> pre<span class="token punctuation">;</span>          pre <span class="token operator">=</span> cur<span class="token punctuation">;</span>          cur <span class="token operator">=</span> next<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> pre<span class="token punctuation">;</span><span class="token comment">// ï¼è¿”å›çš„æ˜¯pre</span>  <span class="token punctuation">&#125;</span></code></pre><h3 id="åè½¬é“¾è¡¨äºŒ">åè½¬é“¾è¡¨äºŒ</h3><blockquote><p>å°±æ˜¯åè½¬é“¾è¡¨ä¸­é—´ä¸€æˆª</p></blockquote><p>// ç¬¬ 1 æ­¥ï¼šä»è™šæ‹Ÿå¤´èŠ‚ç‚¹èµ° left - 1 æ­¥ï¼Œæ¥åˆ° left èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹</p><p>// ç¬¬ 2 æ­¥ï¼šä» pre å†èµ° right - left + 1 æ­¥ï¼Œæ¥åˆ° right èŠ‚ç‚¹</p><p>// ç¬¬ 3 æ­¥ï¼šåˆ‡æ–­å‡ºä¸€ä¸ªå­é“¾è¡¨ï¼ˆæˆªå–é“¾è¡¨ï¼‰å…ˆæ ‡è®°å†åˆ‡æ–­</p><p>// ç¬¬ 4 æ­¥ï¼š[åŒåè½¬é“¾è¡¨](##1 åè½¬é“¾è¡¨##)ï¼Œåè½¬é“¾è¡¨çš„å­åŒºé—´</p><p>// ç¬¬ 5 æ­¥ï¼šæ¥å›åˆ°åŸæ¥çš„é“¾è¡¨ä¸­</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ListNode</span> <span class="token function">reverseBetween</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//1 éœ€è¦ä¸€ä¸ªè™šæ‹Ÿå¤´</span>        <span class="token class-name">ListNode</span> dummyNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        dummyNode<span class="token punctuation">.</span>next <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token comment">//2 å…ˆæ‰¾åˆ°åè½¬éƒ¨åˆ†çš„leftå‰é¢pre</span>        <span class="token class-name">ListNode</span> pre <span class="token operator">=</span> dummyNode<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            pre <span class="token operator">=</span> pre<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//2 ä»preå†èµ°right - left + 1æ­¥ æ¥åˆ°rightèŠ‚ç‚¹</span>        <span class="token class-name">ListNode</span> rNode <span class="token operator">=</span> pre<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            rNode <span class="token operator">=</span> rNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//3 åˆ‡æ–­è¿™éƒ¨åˆ†çš„é“¾è¡¨</span>        <span class="token class-name">ListNode</span> lNode <span class="token operator">=</span> pre<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token class-name">ListNode</span> end <span class="token operator">=</span> rNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        pre<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        rNode<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token comment">//4 åè½¬åŒºé—´å†…çš„é“¾è¡¨</span>        <span class="token function">reverseLinkedList</span><span class="token punctuation">(</span>lNode<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//5 æ¥å›å»</span>        pre<span class="token punctuation">.</span>next <span class="token operator">=</span> rNode<span class="token punctuation">;</span><span class="token comment">// âš ï¸æ¥å›å»çš„æ—¶å€™å·²ç»æ˜¯åè¿‡æ¥äº†</span>        lNode<span class="token punctuation">.</span>next <span class="token operator">=</span> end<span class="token punctuation">;</span>        <span class="token keyword">return</span> dummyNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">reverseLinkedList</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ListNode</span> pre <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ListNode</span> cur <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">ListNode</span> next <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            cur<span class="token punctuation">.</span>next <span class="token operator">=</span> pre<span class="token punctuation">;</span>            pre <span class="token operator">=</span> cur<span class="token punctuation">;</span>            cur <span class="token operator">=</span> next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="2-LRUç¼“å­˜æœºåˆ¶">2 LRUç¼“å­˜æœºåˆ¶</h2><blockquote><p>è¯·ä½ è®¾è®¡å¹¶å®ç°ä¸€ä¸ªæ»¡è¶³  LRU (æœ€è¿‘æœ€å°‘ä½¿ç”¨) ç¼“å­˜ çº¦æŸçš„æ•°æ®ç»“æ„ã€‚<br>å®ç° LRUCache ç±»ï¼š</p><p>LRUCache(int capacity) ä»¥ æ­£æ•´æ•° ä½œä¸ºå®¹é‡ capacity åˆå§‹åŒ– LRU ç¼“å­˜<br>int get(int key) å¦‚æœå…³é”®å­— key å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è¿”å›å…³é”®å­—çš„å€¼ï¼Œå¦åˆ™è¿”å› -1 ã€‚<br>void put(int key, int value) å¦‚æœå…³é”®å­— key å·²ç»å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶æ•°æ®å€¼ value ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å‘ç¼“å­˜ä¸­æ’å…¥è¯¥ç»„ key-value ã€‚å¦‚æœæ’å…¥æ“ä½œå¯¼è‡´å…³é”®å­—æ•°é‡è¶…è¿‡ capacity ï¼Œåˆ™åº”è¯¥ é€å‡º æœ€ä¹…æœªä½¿ç”¨çš„å…³é”®å­—ã€‚</p><p>å‡½æ•° get å’Œ put å¿…0é¡»ä»¥ O(1) çš„å¹³å‡æ—¶é—´å¤æ‚åº¦è¿è¡Œã€‚</p></blockquote><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220508120449144.png" alt="image-20220508120449144" style="zoom:50%;" /><h4 id="1-æ€»çš„ç¼“å­˜ç»“æ„-å’Œæ–¹æ³•è°ƒç”¨">1) æ€»çš„ç¼“å­˜ç»“æ„ å’Œæ–¹æ³•è°ƒç”¨</h4><h5 id="æ„é€ æ–¹æ³•">æ„é€ æ–¹æ³•</h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">MyCache</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> cache<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">Fre_278_LRUCache</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyCache</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>capacity<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="1-get">1 get()</h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Integer</span> ans <span class="token operator">=</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> ans <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="2-put">2 put()</h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="2ï¼‰MyCache">2ï¼‰MyCache</h4><h5 id="æ„é€ æ–¹æ³•-2"><strong>æ„é€ æ–¹æ³•</strong></h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyCache</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span><span class="token punctuation">></span></span> keyNodeMap<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">NodeDoubleLinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> nodeList<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> capacity<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">MyCache</span><span class="token punctuation">(</span><span class="token keyword">int</span> cap<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>keyNodeMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>nodeList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NodeDoubleLinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>capacity <span class="token operator">=</span> cap<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="1-V-get-K-key-é€šè¿‡keyè¿”å›value-éœ€è¦å°†nodeæ”¾åˆ°å°¾éƒ¨">1 V get(K key) é€šè¿‡keyè¿”å›value éœ€è¦å°†nodeæ”¾åˆ°å°¾éƒ¨</h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>keyNodeMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> res <span class="token operator">=</span> keyNodeMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>nodeList<span class="token punctuation">.</span><span class="token function">moveNodeToTail</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> res<span class="token punctuation">.</span>value<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="2-void-set-K-key-V-value-æ›´æ–°ä¸æ–°å¢ï¼šæ”¾åˆ°å°¾éƒ¨ï¼Œè¶…å‡ºå†…å­˜å°±åˆ é™¤æœ€é•¿æ—¶é—´æ²¡æœ‰æ“ä½œçš„">2  void set(K key, V value) æ›´æ–°ä¸æ–°å¢ï¼šæ”¾åˆ°å°¾éƒ¨ï¼Œè¶…å‡ºå†…å­˜å°±åˆ é™¤æœ€é•¿æ—¶é—´æ²¡æœ‰æ“ä½œçš„</h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>keyNodeMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> node <span class="token operator">=</span> keyNodeMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>node<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>nodeList<span class="token punctuation">.</span><span class="token function">moveNodeToTail</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>keyNodeMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> newNode<span class="token punctuation">)</span><span class="token punctuation">;</span>nodeList<span class="token punctuation">.</span><span class="token function">addNode</span><span class="token punctuation">(</span>newNode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>keyNodeMap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> capacity <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">removeMostUnusedCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="3-void-removeMostUnusedCache-åˆ å»æœ€é•¿æ—¶é—´æ²¡æœ‰æ“ä½œçš„ç¼“å­˜-ï¼›åœ¨ä¸¤ä¸ªç»“æ„é‡Œé¢éƒ½åˆ é™¤">3 void removeMostUnusedCache() åˆ å»æœ€é•¿æ—¶é—´æ²¡æœ‰æ“ä½œçš„ç¼“å­˜ ï¼›åœ¨ä¸¤ä¸ªç»“æ„é‡Œé¢éƒ½åˆ é™¤</h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">removeMostUnusedCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> removeNode <span class="token operator">=</span> nodeList<span class="token punctuation">.</span><span class="token function">removeHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>keyNodeMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>removeNode<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="3-åŒå‘é“¾è¡¨ç»“æ„">3) åŒå‘é“¾è¡¨ç»“æ„</h4><p><strong>åŸºäºLRUæœºåˆ¶çš„åŒå‘é“¾è¡¨ç»“æ„</strong><br>private Node&lt;K, V&gt; head;<br>private Node&lt;K, V&gt; tail;</p><p><strong>æ„é€ æ–¹æ³•</strong>ï¼šå°†å¤´å°¾ç½®ä¸ºç©º</p><pre class="language-none"><code class="language-none">public NodeDoubleLinkedList()&#123;head &#x3D; null;tail &#x3D; null;&#125;</code></pre><h5 id="1-addNode-æ¥æ–°èŠ‚ç‚¹ï¼ŒæŒ‚åˆ°å°¾å·´ä¸Š">1 addNode() : æ¥æ–°èŠ‚ç‚¹ï¼ŒæŒ‚åˆ°å°¾å·´ä¸Š</h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addNode</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> newNode<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>newNode <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span>  <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>head <span class="token operator">=</span> newNode<span class="token punctuation">;</span>tail <span class="token operator">=</span> newNode<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>tail<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>newNode<span class="token punctuation">.</span>last <span class="token operator">=</span> tail<span class="token punctuation">;</span>tail <span class="token operator">=</span> newNode<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="2-moveToTail-ï¼ˆä¿®æ”¹è¿‡çš„èŠ‚ç‚¹ï¼Œè¦ä¿è¯nodeåœ¨è¡¨ä¸­ï¼‰æ›´æ–°åˆ°å°¾éƒ¨">2 moveToTail() : ï¼ˆä¿®æ”¹è¿‡çš„èŠ‚ç‚¹ï¼Œè¦ä¿è¯nodeåœ¨è¡¨ä¸­ï¼‰æ›´æ–°åˆ°å°¾éƒ¨</h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">moveNodeToTail</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> node<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span></code></pre><h5 id="3-removeHead-å°†å¤´èŠ‚ç‚¹ç§»èµ°ï¼Œè¿”å›æ–°çš„å¤´èŠ‚ç‚¹">3 removeHead() : å°†å¤´èŠ‚ç‚¹ç§»èµ°ï¼Œè¿”å›æ–°çš„å¤´èŠ‚ç‚¹</h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">NodeDoubleLinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token function">removeHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> res <span class="token operator">=</span> head<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>head <span class="token operator">==</span> tail<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>head <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>tail <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>head <span class="token operator">=</span> res<span class="token punctuation">.</span>next<span class="token punctuation">;</span>res<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>head<span class="token punctuation">.</span>last <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="3-Kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨">3 Kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</h2><p>1 å…ˆå°†ç¬¬ä¸€ç»„kå‡‘é½ å¹¶ä¸”åè½¬<br>2 å†è®°å½•ä¸Šä¸€ç»„çš„ç»“å°¾èŠ‚ç‚¹<br>3 å¾ªç¯ï¼ˆå½“ç»“å°¾.next != null)</p><p>(1)æ›´æ–°start   (2)æ›´æ–°end <strong>æ³¨æ„åˆ¤ç©ºï¼ï¼</strong></p><p>ï¼ˆ3ï¼‰ åè½¬ ï¼šend å˜å¤´</p><p>(4ï¼‰ ä¸Šä¸€ç»„ç»“å°¾è¿æ¥åˆ°ç°åœ¨çš„å¼€å¤´end (5)æ›´æ–°lastEnd</p><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220107164908659.png" alt="image-20220107164908659" style="zoom:33%;" /><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ListNode</span> <span class="token function">reverseKGroup</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token comment">// 1</span>       <span class="token class-name">ListNode</span> start <span class="token operator">=</span> head<span class="token punctuation">;</span>       <span class="token class-name">ListNode</span> end <span class="token operator">=</span> <span class="token function">getKEnd</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">if</span> <span class="token punctuation">(</span>end <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> head<span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       head <span class="token operator">=</span> end<span class="token punctuation">;</span>       <span class="token function">reverse</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 2</span>       <span class="token class-name">ListNode</span> lastEnd <span class="token operator">=</span> start<span class="token punctuation">;</span>       <span class="token comment">// 3</span>       <span class="token keyword">while</span> <span class="token punctuation">(</span>lastEnd<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           <span class="token comment">// 1)</span>           start <span class="token operator">=</span> lastEnd<span class="token punctuation">.</span>next<span class="token punctuation">;</span>           <span class="token comment">// 2)</span>           end <span class="token operator">=</span> <span class="token function">getKEnd</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token keyword">if</span> <span class="token punctuation">(</span>end <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// âš ï¸(æ³¨æ„åˆ¤ç©ºï¼ï¼ï¼)</span>               <span class="token keyword">return</span> head<span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span>           <span class="token comment">// 3)</span>           <span class="token function">reverse</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// 4)</span>           lastEnd<span class="token punctuation">.</span>next <span class="token operator">=</span> end<span class="token punctuation">;</span>           <span class="token comment">// 5)</span>           lastEnd <span class="token operator">=</span> start<span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">return</span> head<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">private</span> <span class="token class-name">ListNode</span> <span class="token function">getKEnd</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>k <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> start <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           start <span class="token operator">=</span> start<span class="token punctuation">.</span>next<span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">return</span> start<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token comment">// åè½¬ </span>   <span class="token comment">// 1 end å¾€åç§»</span>   <span class="token comment">// 2 ä¸‰ä¸ªæŒ‡é’ˆè¿›è¡Œåè½¬</span>   <span class="token comment">// 3 startåè½¬åæ˜¯ç»“å°¾è¦è¿æ¥åˆ°end</span>   <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> start<span class="token punctuation">,</span> <span class="token class-name">ListNode</span> end<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token comment">// TODO Auto-generated method stub</span>       end <span class="token operator">=</span> end<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token comment">//âš ï¸(æ³¨æ„è¦ç§»åŠ¨endæŒ‡é’ˆ)</span>       <span class="token class-name">ListNode</span> pre <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>       <span class="token class-name">ListNode</span> cur <span class="token operator">=</span> start<span class="token punctuation">;</span>       <span class="token class-name">ListNode</span> next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>       <span class="token keyword">while</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> end<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           next <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>           cur<span class="token punctuation">.</span>next <span class="token operator">=</span> pre<span class="token punctuation">;</span>           pre <span class="token operator">=</span> cur<span class="token punctuation">;</span>           cur <span class="token operator">=</span> next<span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       start<span class="token punctuation">.</span>next <span class="token operator">=</span> end<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span></code></pre><h2 id="4-åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨">4 åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</h2><ol><li>å…ˆæŠ“å°å¤´head</li><li>cur2æŠ“å¤§å¤´ cur1 = head.next pre = head</li><li>æ¯”è¾ƒ c1 c2 è°å°preçš„nextå°±æŒ‡å‘è° å¹¶ä¸”cur pre åç§»</li></ol><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ListNode</span> <span class="token function">mergeTwoLists</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> l1<span class="token punctuation">,</span> <span class="token class-name">ListNode</span> l2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>l1 <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> l2 <span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> l1 <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> l2 <span class="token operator">:</span> l1<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//æŠ“å¤§å¤´</span>        <span class="token class-name">ListNode</span> head <span class="token operator">=</span> l1<span class="token punctuation">.</span>val <span class="token operator">&lt;=</span> l2<span class="token punctuation">.</span>val <span class="token operator">?</span> l1 <span class="token operator">:</span> l2<span class="token punctuation">;</span>        <span class="token class-name">ListNode</span> cur1 <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token comment">//æŠ“å°å¤´</span>        <span class="token class-name">ListNode</span> cur2 <span class="token operator">=</span> head <span class="token operator">==</span> l1 <span class="token operator">?</span> l2 <span class="token operator">:</span> l1<span class="token punctuation">;</span>        <span class="token class-name">ListNode</span> pre <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>cur1 <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> cur2 <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cur1<span class="token punctuation">.</span>val <span class="token operator">&lt;=</span> cur2<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                pre<span class="token punctuation">.</span>next <span class="token operator">=</span> cur1<span class="token punctuation">;</span>                cur1 <span class="token operator">=</span> cur1<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                pre<span class="token punctuation">.</span>next <span class="token operator">=</span> cur2<span class="token punctuation">;</span>                cur2 <span class="token operator">=</span> cur2<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            pre <span class="token operator">=</span> pre<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        pre<span class="token punctuation">.</span>next <span class="token operator">=</span> cur1 <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> cur1 <span class="token operator">:</span>cur2<span class="token punctuation">;</span>        <span class="token keyword">return</span> head<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="åˆå¹¶kä¸ªé“¾è¡¨">åˆå¹¶kä¸ªé“¾è¡¨</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨æ•°ç»„ï¼Œæ¯ä¸ªé“¾è¡¨éƒ½å·²ç»æŒ‰å‡åºæ’åˆ—ã€‚</p><p>è¯·ä½ å°†æ‰€æœ‰é“¾è¡¨åˆå¹¶åˆ°ä¸€ä¸ªå‡åºé“¾è¡¨ä¸­ï¼Œè¿”å›åˆå¹¶åçš„é“¾è¡¨ã€‚</p><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220216171223838.png" alt="image-20220216171223838" style="zoom:50%; float:left;"/></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LianBiao_MergeMoreList</span> <span class="token punctuation">&#123;</span>  <span class="token comment">//å¯¹æ•°å™¨ âš ï¸</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ListNodeComparator</span> <span class="token keyword">implements</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ListNode</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> arg0<span class="token punctuation">,</span> <span class="token class-name">ListNode</span> arg1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// TODO Auto-generated method stub</span><span class="token keyword">return</span> arg0<span class="token punctuation">.</span>val <span class="token operator">-</span> arg1<span class="token punctuation">.</span>val<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token class-name">ListNode</span> <span class="token function">mergeKLists</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span><span class="token punctuation">[</span><span class="token punctuation">]</span> lists<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>lists <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 1 å®šä¹‰ä¸€ä¸ªå¯¹æ•°å™¨çš„å°æ ¹å †</span><span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ListNode</span><span class="token punctuation">></span></span> heap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ListNodeComparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 2 å°†æ¯ä¸€æ¡çš„headæ”¾åœ¨å †ä¸­</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lists<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>lists<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// !!! </span>heap<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>lists<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>heap<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// âš ï¸</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token comment">// 3 æŠ“å‡ºhead å°†è¯¥æ¡åé¢ä¸€ä¸ªèŠ‚ç‚¹æ”¾å…¥å †</span><span class="token class-name">ListNode</span> head <span class="token operator">=</span> heap<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// !!!</span>heap<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">ListNode</span> pre <span class="token operator">=</span> head<span class="token punctuation">;</span><span class="token comment">// æŒ‡é’ˆ</span><span class="token comment">// 4 é‡å¤å¼¹å‡ºè¿æ¥ç»“æœè¡¨ å†è§å¼¹å‡ºçš„ä¸‹ä¸€ä¸ªæ”¾å…¥å †ä¸­</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>heap<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">ListNode</span> cur <span class="token operator">=</span> heap<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>pre<span class="token punctuation">.</span>next <span class="token operator">=</span> cur<span class="token punctuation">;</span>pre <span class="token operator">=</span> cur<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// !!!</span>heap<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> head<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="5-ç›¸äº¤é“¾è¡¨">5 ç›¸äº¤é“¾è¡¨</h2><p>éœ€è¦åˆ†æœ‰ç¯å’Œæ— ç¯ä¸¤ç§æƒ…å†µ [å¦‚ä½•è¾¨åˆ«æœ‰æ— ç¯](##6 ç¯å½¢é“¾è¡¨##)</p><h3 id="æ— ç¯é“¾è¡¨ç›¸äº¤">æ— ç¯é“¾è¡¨ç›¸äº¤</h3><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220206111837413.png" alt="image-20220206111837413" style="zoom:50%;" /><blockquote><p>ç»™ä½ ä¸¤ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ <code>headA</code> å’Œ <code>headB</code> ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹ã€‚å¦‚æœä¸¤ä¸ªé“¾è¡¨ä¸å­˜åœ¨ç›¸äº¤èŠ‚ç‚¹ï¼Œè¿”å› <code>null</code> ã€‚</p></blockquote><ol><li>éœ€è¦ä¸¤ä¸ªæŒ‡é’ˆï¼›</li><li>å…ˆç”¨nè®°å½•ä¸¤ä¸ªé“¾è¡¨é•¿åº¦å¤§å°ä»¥ä¾¿åˆ†æ¸…æ¥šè°é•¿è°çŸ­ï¼Œné•¿åº¦å·®è®°å¾—å–ç»å¯¹å€¼ï¼›</li><li>é•¿çš„èµ°næ­¥åˆ°å’ŒçŸ­çš„ä¸€æ ·é•¿çš„èµ·ç‚¹ï¼›</li><li>ä¸¤ä¸ªæŒ‡é’ˆä¸€èµ·èµ°åˆ°ç›¸ç­‰çš„åœ°æ–¹ å°±æ˜¯äº¤ç‚¹ è¿”å›ï¼›</li></ol><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ListNode</span> <span class="token function">getNoLoop</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> headA<span class="token punctuation">,</span> <span class="token class-name">ListNode</span> headB<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>headA <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> headB <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token class-name">ListNode</span> cur1 <span class="token operator">=</span> headA<span class="token punctuation">;</span>  <span class="token class-name">ListNode</span> cur2 <span class="token operator">=</span> headB<span class="token punctuation">;</span>  <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>cur1 <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  n<span class="token operator">++</span><span class="token punctuation">;</span>  cur1 <span class="token operator">=</span> cur1<span class="token punctuation">.</span>next<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>cur2 <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  n<span class="token operator">--</span><span class="token punctuation">;</span>  cur2 <span class="token operator">=</span> cur2<span class="token punctuation">.</span>next<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>cur1 <span class="token operator">!=</span> cur2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  cur1 <span class="token operator">=</span> n <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> headA <span class="token operator">:</span> headB<span class="token punctuation">;</span><span class="token comment">//cur1æŒ‡å‘é•¿çš„å¤´</span>  cur2 <span class="token operator">=</span> <span class="token punctuation">(</span>cur1 <span class="token operator">==</span> headA<span class="token punctuation">)</span> <span class="token operator">?</span> headB <span class="token operator">:</span> headA<span class="token punctuation">;</span><span class="token comment">//cur2æŒ‡å‘çŸ­å¤´</span>  <span class="token comment">//å°†ä¸¤ä¸ªé“¾è¡¨é•¿åº¦å·®å–ç»å¯¹å€¼</span>  n <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//å°†æŒ‡å‘é•¿é“¾è¡¨çš„æŒ‡é’ˆcur1å¾€ä¸‹ç§»åŠ¨n,åˆ°è¾¾å’ŒçŸ­é“¾è¡¨cur2æŒ‡é’ˆä¸ç›¸äº¤ç‚¹ç›¸åŒè·ç¦»çš„ä½ç½®</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>n <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  n<span class="token operator">--</span><span class="token punctuation">;</span>  cur1 <span class="token operator">=</span> cur1<span class="token punctuation">.</span>next<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">//ä¸¤ä¸ªæŒ‡é’ˆå‘ä¸‹ ç›¸é‡ç‚¹ä¾¿æ˜¯ç›¸äº¤ç‚¹</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>cur1 <span class="token operator">!=</span> cur2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  cur1 <span class="token operator">=</span> cur1<span class="token punctuation">.</span>next<span class="token punctuation">;</span>  cur2 <span class="token operator">=</span> cur2<span class="token punctuation">.</span>next<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> cur1<span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span></code></pre><h3 id="æœ‰ç¯é“¾è¡¨ç›¸äº¤">æœ‰ç¯é“¾è¡¨ç›¸äº¤</h3><p>æœ‰ç¯çš„é“¾è¡¨æ¯”è¾ƒå¤æ‚ æœ‰ä¸‰ç§æƒ…å†µ</p><p>1 ä¸¤ä¸ªå…¥ç¯èŠ‚ç‚¹ç›¸åŒ å³ç›¸äº¤åœ¨å…¥ç¯å‰ (loop1 =loop2)</p><p>2 ä¸¤ä¸ªç›¸äº¤åœ¨ç¯å†…ç›¸äº¤ æœ‰ä¸¤ä¸ªç›¸äº¤ç‚¹</p><p>3 ä¸¤ä¸ªä¸ç›¸äº¤</p><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220207095236631.png" alt="image-20220207095236631" style="zoom:50%;" /><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ListNode</span> <span class="token function">bothLoop</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> headA<span class="token punctuation">,</span><span class="token class-name">ListNode</span> loop1<span class="token punctuation">,</span><span class="token class-name">ListNode</span> headB<span class="token punctuation">,</span> <span class="token class-name">ListNode</span> loop2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token class-name">ListNode</span> cur1 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token class-name">ListNode</span> cur2 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>loop1 <span class="token operator">==</span> loop2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//2 </span><span class="token comment">//æ–¹æ³•ä¸ä¸¤ä¸ªæ— ç¯é“¾è¡¨æ–¹æ³•ä¸€æ ·åªä¸è¿‡æŠŠloop1/2çœ‹ä½œç»“å°¾</span>cur1 <span class="token operator">=</span> headA<span class="token punctuation">;</span>cur2 <span class="token operator">=</span> headB<span class="token punctuation">;</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>cur1 <span class="token operator">!=</span> loop1<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  n<span class="token operator">++</span><span class="token punctuation">;</span>  cur1 <span class="token operator">=</span> cur1<span class="token punctuation">.</span>next<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>cur2 <span class="token operator">!=</span> loop2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  n<span class="token operator">--</span><span class="token punctuation">;</span>  cur2 <span class="token operator">=</span> cur2<span class="token punctuation">.</span>next<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>cur1 <span class="token operator">!=</span> cur2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  cur1 <span class="token operator">=</span> n <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> headA <span class="token operator">:</span> headB<span class="token punctuation">;</span>  cur2 <span class="token operator">=</span> <span class="token punctuation">(</span>cur1 <span class="token operator">==</span> headA<span class="token punctuation">)</span> <span class="token operator">?</span> headB <span class="token operator">:</span> headA<span class="token punctuation">;</span>  n <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>n <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  n<span class="token operator">--</span><span class="token punctuation">;</span>  cur1 <span class="token operator">=</span> cur1<span class="token punctuation">.</span>next<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>cur1 <span class="token operator">!=</span> cur2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  cur1 <span class="token operator">=</span> cur1<span class="token punctuation">.</span>next<span class="token punctuation">;</span>  cur2 <span class="token operator">=</span> cur2<span class="token punctuation">.</span>next<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> cur1<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token comment">//loop1å¾€åç§»åŠ¨ å¦‚æœåœ¨é‡åˆ°è‡ªå·±ä¹‹å‰é‡åˆ°äº†loop2å°±æ˜¯æƒ…å†µ3</span>cur1 <span class="token operator">=</span> loop1<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>cur1 <span class="token operator">!=</span> loop1<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>cur1 <span class="token operator">==</span> loop2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> loop1<span class="token punctuation">;</span><span class="token comment">//3</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">//1</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="6-ç¯å½¢é“¾è¡¨">6 ç¯å½¢é“¾è¡¨</h2><blockquote><p>è¿”å›å…¥ç¯èŠ‚ç‚¹ï¼Œæ²¡æœ‰ç¯å°±è¿”å›nullï¼›</p></blockquote><p>1.å…ˆå°†ä»å¤´èŠ‚ç‚¹å¿«æ…¢æŒ‡é’ˆå¼€å§‹å¾€åï¼Œå¦‚æœä¸¤ä¸ªæŒ‡é’ˆç›¸é‡é‚£ä¸€å®šæœ‰ç¯ï¼ŒæœŸé—´å¦‚æœå¿«æŒ‡é’ˆåˆ°nullï¼Œå¯ä»¥ç›´æ¥åˆ¤æ–­æ— ç¯ã€‚</p><p>2.å¦‚æœè¦æ‰¾åˆ°å…¥ç¯èŠ‚ç‚¹ï¼Œå°±å°†fastæŒ‡é’ˆæŒ‡å‘headï¼Œslowä¸åŠ¨ï¼Œç„¶åè®©ä¸¤ä¸ªæŒ‡é’ˆéƒ½åªç§»åŠ¨ä¸€æ­¥ï¼Œæœ€åä¸€å®šä¼šåœ¨å…¥ç¯å¤„ç›¸é‡ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ListNode</span> <span class="token function">hasCycle</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> head<span class="token punctuation">.</span>next <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> head<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">ListNode</span> slow <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token class-name">ListNode</span> fast <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>slow <span class="token operator">!=</span> fast<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>fast<span class="token punctuation">.</span>next <span class="token operator">==</span>  <span class="token keyword">null</span> <span class="token operator">||</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        fast <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>slow <span class="token operator">!=</span> fast<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> slow<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="7-é‡æ’é“¾è¡¨">7 é‡æ’é“¾è¡¨</h2><blockquote><p>ç»™å®šä¸€ä¸ªå•é“¾è¡¨ L çš„å¤´èŠ‚ç‚¹ head ï¼Œå•é“¾è¡¨ L è¡¨ç¤ºä¸ºï¼š</p><p>L0 â†’ L1 â†’ â€¦ â†’ Ln - 1 â†’ Ln</p><p>è¯·å°†å…¶é‡æ–°æ’åˆ—åå˜ä¸ºï¼š</p><p>L0 â†’ Ln â†’ L1 â†’ Ln - 1 â†’ L2 â†’ Ln - 2 â†’ â€¦</p><p>ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…çš„è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚</p></blockquote><ol><li>æ‰¾åˆ°åŸè¡¨çš„ä¸­ç‚¹<ol><li>å¿«æ…¢æŒ‡é’ˆä»headå¼€èµ°</li><li>fast.next == null || fast.next.next = null è¿”å›æ…¢æŒ‡é’ˆ</li></ol></li><li>å°†å³åŠç«¯åè½¬ï¼š[åè½¬é“¾è¡¨](##1 åè½¬é“¾è¡¨##)</li><li>å°†å·¦å³ç«¯åˆå¹¶</li></ol><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">reorderList</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">reorderList</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// âš ï¸åˆ¤ç©º</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">ListNode</span> mid <span class="token operator">=</span> <span class="token function">middleNode</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ListNode</span> l1 <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token class-name">ListNode</span> l2 <span class="token operator">=</span> mid<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        mid<span class="token punctuation">.</span>next <span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// âš ï¸åˆ†ç¦»</span>        l2 <span class="token operator">=</span> <span class="token function">reverse</span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">mergeList</span><span class="token punctuation">(</span>l1<span class="token punctuation">,</span> l2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">ListNode</span> <span class="token function">middleNode</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ListNode</span> fast <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token class-name">ListNode</span> slow <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>fast<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> slow<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">ListNode</span> <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ListNode</span> pre <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ListNode</span> cur <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">ListNode</span> next <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            cur<span class="token punctuation">.</span>next <span class="token operator">=</span> pre<span class="token punctuation">;</span>            pre <span class="token operator">=</span> cur<span class="token punctuation">;</span>            cur <span class="token operator">=</span> next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> pre<span class="token punctuation">;</span> <span class="token comment">// âš ï¸è¿”å›çš„æ˜¯pre</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// åˆå¹¶è¿‡ç¨‹å°±æ˜¯ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆæ¥æ ‡å¿—ä¸¤ä¸ªçš„ä¸‹ä¸€ä¸ª</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">mergeList</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> l1<span class="token punctuation">,</span> <span class="token class-name">ListNode</span> l2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ListNode</span> l1_next<span class="token punctuation">;</span>        <span class="token class-name">ListNode</span> l2_next<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>l1 <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> l2 <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            l1_next <span class="token operator">=</span> l1<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            l2_next <span class="token operator">=</span> l2<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            l1<span class="token punctuation">.</span>next <span class="token operator">=</span> l2<span class="token punctuation">;</span>            l1 <span class="token operator">=</span> l1_next<span class="token punctuation">;</span>            l2<span class="token punctuation">.</span>next <span class="token operator">=</span> l1<span class="token punctuation">;</span>            l2 <span class="token operator">=</span> l2_next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="8-åˆ é™¤é“¾è¡¨é‡å¤èŠ‚ç‚¹">8 åˆ é™¤é“¾è¡¨é‡å¤èŠ‚ç‚¹</h2><p>è®¾ç½®è™šæ‹ŸèŠ‚ç‚¹</p><p>å¾€åéå†  ï¼ˆæ¡ä»¶ï¼šcurçš„ä¸‹ä¸€ä¸ªå’Œä¸‹ä¸‹ä¸ªéƒ½æ˜¯ç©ºï¼‰<br>2.1å¦‚æœå½“å‰ä¸¤ä¸ªèŠ‚ç‚¹å€¼ç›¸ç­‰å°±å°†å½“å‰cur.nextçš„å€¼ä¿å­˜åœ¨x;</p><p>â€‹å¾ªç¯ï¼ˆç¬¬ä¸€ä¸ªèŠ‚ç‚¹åé¢çš„èŠ‚ç‚¹æ˜¯å¦æœ‰é‡å¤çš„ï¼‰cur.nextæŒ‡å‘ä¸ç­‰äºè¯¥xå€¼çš„èŠ‚ç‚¹<br>â€‹    2.2 ä¸ç›¸ç­‰å°±ç›´æ¥next</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ListNode</span> <span class="token function">deleteDuplicates</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> head<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">ListNode</span> dummy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> head<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ListNode</span> cur <span class="token operator">=</span> dummy<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// å½“å‰èŠ‚ç‚¹ä¸‹ä¸€ä¸ªå’Œä¸‹ä¸‹ä¸ªä¸ä¸ºç©º</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>next<span class="token punctuation">.</span>val <span class="token operator">==</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// ä¸¤ä¸ªèŠ‚ç‚¹ç›¸ç­‰</span>                <span class="token keyword">int</span> x <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">.</span>val<span class="token punctuation">;</span>                 <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">.</span>val <span class="token operator">==</span> x<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// éå†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹åé¢çš„èŠ‚ç‚¹æ˜¯å¦æœ‰é‡å¤çš„ </span>                    cur<span class="token punctuation">.</span>next <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token comment">// æœ‰å°±ç›´æ¥è®²æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸‹ä¸ª</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token comment">// ä¸¤ä¸ªèŠ‚ç‚¹ä¸ç›¸ç­‰ æŒ‡é’ˆåç§»</span>                cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> dummy<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="9-æ’åºé“¾è¡¨">9 æ’åºé“¾è¡¨</h2><blockquote><p>å°±æ˜¯ç»™é“¾è¡¨æ’åº</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ListNode</span> <span class="token function">sortList</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 1 éå†ä¸€éé“¾è¡¨çš„é•¿åº¦</span><span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token class-name">ListNode</span> cur <span class="token operator">=</span> head<span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">N</span><span class="token operator">++</span><span class="token punctuation">;</span>cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 2 lenæ˜¯æ¯æ¬¡åˆ†ç»„èŠ‚ç‚¹æ•° ä¸€ç›´ä¹˜äºŒ</span><span class="token class-name">ListNode</span> h <span class="token operator">=</span> head<span class="token punctuation">;</span><span class="token class-name">ListNode</span> teamFirst <span class="token operator">=</span> head<span class="token punctuation">;</span><span class="token class-name">ListNode</span> pre <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> len <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> len <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>teamFirst <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 3 Få°±æ˜¯å°†äº”ä¸ªå‚æ•°å¤„ç†è¿”å›æ–¹ä¾¿åˆ©ç”¨</span><span class="token comment">// å·¦ç»„ä»å“ªåˆ°å“ª   ls le</span><span class="token comment">// å³ç»„ä»å“ªåˆ°å“ª   rs re</span><span class="token comment">// å·¦ å³  next</span><span class="token class-name">ListNode</span><span class="token punctuation">[</span><span class="token punctuation">]</span> f1 <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>teamFirst<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ls...le  rs...re -> mergeå»</span><span class="token comment">// æ•´ä½“çš„å¤´ã€æ•´ä½“çš„å°¾</span><span class="token class-name">ListNode</span><span class="token punctuation">[</span><span class="token punctuation">]</span> f2 <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>f1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> f1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> f1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> f1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>h <span class="token operator">==</span> teamFirst<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>h <span class="token operator">=</span> f2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>pre <span class="token operator">=</span> f2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>pre<span class="token punctuation">.</span>next <span class="token operator">=</span> f2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>pre <span class="token operator">=</span> f2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>teamFirst <span class="token operator">=</span> f1<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// next</span><span class="token punctuation">&#125;</span>teamFirst <span class="token operator">=</span> h<span class="token punctuation">;</span>pre <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> h<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ListNode</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> teamFirst<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// è¿”å›äº”ä¸ªå‚æ•°</span><span class="token class-name">ListNode</span> ls <span class="token operator">=</span> teamFirst<span class="token punctuation">;</span><span class="token class-name">ListNode</span> le <span class="token operator">=</span> teamFirst<span class="token punctuation">;</span><span class="token class-name">ListNode</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token class-name">ListNode</span> re <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token class-name">ListNode</span> next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token keyword">int</span> pass <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>teamFirst <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>pass<span class="token operator">++</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>pass <span class="token operator">&lt;=</span> len<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>le <span class="token operator">=</span> teamFirst<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>pass <span class="token operator">==</span> len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>rs <span class="token operator">=</span> teamFirst<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>pass <span class="token operator">></span> len<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>re <span class="token operator">=</span> teamFirst<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>pass <span class="token operator">==</span> <span class="token punctuation">(</span>len <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>teamFirst <span class="token operator">=</span> teamFirst<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// å·¦è¾¹ç»“å°¾æ–­å¼€</span>le<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">// è®°å½•å³è¾¹ç»“å°¾çš„nextå¹¶æ–­å¼€ç»“å°¾æ–­å¼€ </span><span class="token keyword">if</span> <span class="token punctuation">(</span>re <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>next <span class="token operator">=</span> re<span class="token punctuation">.</span>next<span class="token punctuation">;</span>re<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> ls<span class="token punctuation">,</span> le<span class="token punctuation">,</span> rs<span class="token punctuation">,</span> re<span class="token punctuation">,</span> next <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ListNode</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> ls<span class="token punctuation">,</span> <span class="token class-name">ListNode</span> le<span class="token punctuation">,</span> <span class="token class-name">ListNode</span> rs<span class="token punctuation">,</span> <span class="token class-name">ListNode</span> re<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>rs <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> ls<span class="token punctuation">,</span> le <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">ListNode</span> head <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token class-name">ListNode</span> pre <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token class-name">ListNode</span> cur <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token class-name">ListNode</span> tail <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>ls <span class="token operator">!=</span> le<span class="token punctuation">.</span>next <span class="token operator">&amp;&amp;</span> rs <span class="token operator">!=</span> re<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>ls<span class="token punctuation">.</span>val <span class="token operator">&lt;=</span> rs<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>cur <span class="token operator">=</span> ls<span class="token punctuation">;</span>ls <span class="token operator">=</span> ls<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>cur <span class="token operator">=</span> rs<span class="token punctuation">;</span>rs <span class="token operator">=</span> rs<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>pre <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>head <span class="token operator">=</span> cur<span class="token punctuation">;</span>pre <span class="token operator">=</span> cur<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>pre<span class="token punctuation">.</span>next <span class="token operator">=</span> cur<span class="token punctuation">;</span>pre <span class="token operator">=</span> cur<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>ls <span class="token operator">!=</span> le<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>ls <span class="token operator">!=</span> le<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>pre<span class="token punctuation">.</span>next <span class="token operator">=</span> ls<span class="token punctuation">;</span>pre <span class="token operator">=</span> ls<span class="token punctuation">;</span>tail <span class="token operator">=</span> ls<span class="token punctuation">;</span>ls <span class="token operator">=</span> ls<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>rs <span class="token operator">!=</span> re<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>pre<span class="token punctuation">.</span>next <span class="token operator">=</span> rs<span class="token punctuation">;</span>pre <span class="token operator">=</span> rs<span class="token punctuation">;</span>tail <span class="token operator">=</span> rs<span class="token punctuation">;</span>rs <span class="token operator">=</span> rs<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> head<span class="token punctuation">,</span> tail <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="10-ä¸¤æ•°ç›¸åŠ ">10 ä¸¤æ•°ç›¸åŠ </h2><blockquote><p>ç»™ä½ ä¸¤ä¸ª éç©º çš„é“¾è¡¨ï¼Œè¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å®ƒä»¬æ¯ä½æ•°å­—éƒ½æ˜¯æŒ‰ç…§ é€†åº çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨ ä¸€ä½ æ•°å­—ã€‚</p><p>è¯·ä½ å°†ä¸¤ä¸ªæ•°ç›¸åŠ ï¼Œå¹¶ä»¥ç›¸åŒå½¢å¼è¿”å›ä¸€ä¸ªè¡¨ç¤ºå’Œçš„é“¾è¡¨ã€‚</p><p>ä½ å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0 å¼€å¤´ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ListNode</span> <span class="token function">addTwoNumbers</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> l1<span class="token punctuation">,</span> <span class="token class-name">ListNode</span> l2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//ä¸¤ä¸ªé“¾è¡¨åˆ†é•¿çŸ­</span><span class="token comment">//åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µ ï¼š1 é•¿çŸ­éƒ½è¿˜æœ‰èŠ‚ç‚¹ 2 çŸ­æ²¡æœ‰èŠ‚ç‚¹ é•¿æœ‰èŠ‚ç‚¹ 3 é•¿ä¹Ÿèµ°åˆ°æ²¡èŠ‚ç‚¹</span><span class="token class-name">ListNode</span> l <span class="token operator">=</span> <span class="token function">listLength</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token function">listLength</span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span> <span class="token operator">?</span> l1 <span class="token operator">:</span> l2<span class="token punctuation">;</span><span class="token class-name">ListNode</span> s <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> l1<span class="token punctuation">)</span> <span class="token operator">?</span> l2 <span class="token operator">:</span> l1<span class="token punctuation">;</span><span class="token class-name">ListNode</span> curl <span class="token operator">=</span> l<span class="token punctuation">;</span><span class="token class-name">ListNode</span> curs <span class="token operator">=</span> s<span class="token punctuation">;</span><span class="token keyword">int</span> carry <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> curNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token class-name">ListNode</span> last <span class="token operator">=</span> curl<span class="token punctuation">;</span><span class="token comment">//1 </span><span class="token keyword">while</span><span class="token punctuation">(</span>curs <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>curNum <span class="token operator">=</span> curs<span class="token punctuation">.</span>val <span class="token operator">+</span> curl<span class="token punctuation">.</span>val <span class="token operator">+</span> carry<span class="token punctuation">;</span>carry <span class="token operator">=</span> curNum <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>curl<span class="token punctuation">.</span>val <span class="token operator">=</span> curNum <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span>last <span class="token operator">=</span> curl<span class="token punctuation">;</span><span class="token comment">//lastä¸€ç›´åœ¨æŠ“ä½æœ€åä¸€ä¸ªèŠ‚ç‚¹</span>curl <span class="token operator">=</span> curl<span class="token punctuation">.</span>next<span class="token punctuation">;</span>curs <span class="token operator">=</span> curs<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//2 </span><span class="token keyword">while</span><span class="token punctuation">(</span>curl <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>curNum <span class="token operator">=</span>  curl<span class="token punctuation">.</span>val <span class="token operator">+</span> carry<span class="token punctuation">;</span>carry <span class="token operator">=</span> curNum <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>curl<span class="token punctuation">.</span>val <span class="token operator">=</span> curNum <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span>last <span class="token operator">=</span> curl<span class="token punctuation">;</span><span class="token comment">//lastä¸€ç›´åœ¨æŠ“ä½æœ€åä¸€ä¸ªèŠ‚ç‚¹</span>curl <span class="token operator">=</span> curl<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//3 åˆ°</span><span class="token keyword">if</span><span class="token punctuation">(</span>carry <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>last<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> l<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">listLength</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> l<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>l <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>length<span class="token operator">++</span><span class="token punctuation">;</span>l <span class="token operator">=</span> l<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> length<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="11-é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹">11 é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹</h2><blockquote><p>è¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼Œè¾“å‡ºè¯¥é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ã€‚ä¸ºäº†ç¬¦åˆå¤§å¤šæ•°äººçš„ä¹ æƒ¯ï¼Œæœ¬é¢˜ä»1å¼€å§‹è®¡æ•°ï¼Œå³é“¾è¡¨çš„å°¾èŠ‚ç‚¹æ˜¯å€’æ•°ç¬¬1ä¸ªèŠ‚ç‚¹ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªé“¾è¡¨æœ‰ <code>6</code> ä¸ªèŠ‚ç‚¹ï¼Œä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„å€¼ä¾æ¬¡æ˜¯ <code>1ã€2ã€3ã€4ã€5ã€6</code>ã€‚è¿™ä¸ªé“¾è¡¨çš„å€’æ•°ç¬¬ <code>3</code> ä¸ªèŠ‚ç‚¹æ˜¯å€¼ä¸º <code>4</code> çš„èŠ‚ç‚¹ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fre_070_removeNthFromEnd</span> <span class="token punctuation">&#123;</span> <span class="token keyword">public</span> <span class="token class-name">ListNode</span> <span class="token function">getKthFromEnd</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ListNode</span> slow <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token class-name">ListNode</span> fast <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>k <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            k<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>fast<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> slow<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="12-åˆ é™¤é“¾è¡¨å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹">12 åˆ é™¤é“¾è¡¨å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ListNode</span> <span class="token function">removeNthFromEnd</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token class-name">ListNode</span> dummy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       dummy<span class="token punctuation">.</span>next <span class="token operator">=</span> head<span class="token punctuation">;</span>  <span class="token comment">// 1 ç”¨ä¸¤ä¸ªæŒ‡é’ˆæˆªå‡ºn+1é•¿åº¦</span>       <span class="token class-name">ListNode</span> slow <span class="token operator">=</span> dummy<span class="token punctuation">;</span>       <span class="token class-name">ListNode</span> fast <span class="token operator">=</span> head<span class="token punctuation">;</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>n<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">;</span>n<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           fast<span class="token operator">=</span>fast<span class="token punctuation">.</span>next<span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>  <span class="token comment">// 2 ä¸¤ä¸ªæŒ‡é’ˆä¸€ç›´å¾€åç›´åˆ°faståˆ°ç»“å°¾</span>       <span class="token keyword">while</span><span class="token punctuation">(</span>fast <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">;</span>           slow <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>  <span class="token comment">// 3 slowåœ¨ç›®æ ‡çš„å‰é¢ä¸€ä½ ç›´æ¥å°†nextæŒ‡é’ˆæŒ‡å‘ä¸‹ä¸‹ä½ </span>       slow<span class="token punctuation">.</span>next <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>       <span class="token keyword">return</span> dummy<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token comment">// ä½¿ç”¨è™šæ‹ŸèŠ‚ç‚¹ä»¥é˜²åˆ é™¤çš„æ˜¯å¤´èŠ‚ç‚¹</span>   <span class="token punctuation">&#125;</span></code></pre><h2 id="13-å›æ–‡é“¾è¡¨">13 å›æ–‡é“¾è¡¨</h2><p>éœ€è¦convert å’Œ ç„¶ååˆ¤æ–­å¯¹ç§° ç„¶åå†convertæ¢å¤å›å»</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isPalindrome</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ListNode</span> slow <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token class-name">ListNode</span> fast <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>fast<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 1 ç°åœ¨slowå°±èµ°åˆ°äº†ä¸­é—´ï¼ˆå¶æ•°æ˜¯ä¸Šä¸­ï¼‰</span>        <span class="token comment">// 2 å°†ååŠéƒ¨åˆ†convert</span>        <span class="token class-name">ListNode</span> l1 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//pre</span>        <span class="token class-name">ListNode</span> l2 <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token class-name">ListNode</span> l3 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>l2 <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            l3 <span class="token operator">=</span> l2<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            l2<span class="token punctuation">.</span>next <span class="token operator">=</span> l1<span class="token punctuation">;</span>            l1 <span class="token operator">=</span> l2<span class="token punctuation">;</span>            l2 <span class="token operator">=</span> l3<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 3 åé¢éƒ¨åˆ†å·²ç»ç¿»è½¬ ç°åœ¨å¯¹æ¯”ä¸¤éƒ¨åˆ†æ˜¯å¦å¯¹ç§°</span>        <span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        l2 <span class="token operator">=</span> head<span class="token punctuation">;</span>        l3 <span class="token operator">=</span> l1<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>l3 <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>l2<span class="token punctuation">.</span>val <span class="token operator">!=</span> l3<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// âš ï¸æ¯”è¾ƒval</span>                ans <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            l2 <span class="token operator">=</span> l2<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            l3 <span class="token operator">=</span> l3<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 4 æŠŠååŠéƒ¨åˆ†åˆæ¢å¤åŸæ ·</span>        l2 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">// pre</span>        l3 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">// next</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>l1 <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            l3 <span class="token operator">=</span> l1<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            l1<span class="token punctuation">.</span>next <span class="token operator">=</span> l2<span class="token punctuation">;</span>            l2 <span class="token operator">=</span> l1<span class="token punctuation">;</span>            l1 <span class="token operator">=</span> l3<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        slow<span class="token punctuation">.</span>next <span class="token operator">=</span> l2<span class="token punctuation">;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="14-åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ ">14 åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ </h2><blockquote><p>ç»™å®šä¸€ä¸ªå·²æ’åºçš„é“¾è¡¨çš„å¤´ <code>head</code> ï¼Œ <em>åˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡</em> ã€‚è¿”å› <em>å·²æ’åºçš„é“¾è¡¨</em> ã€‚</p></blockquote><p>åˆ é™¤é‡å¤å…ƒç´  ç•™ä¸‹ä¸€ä¸ª<br>ç›´æ¥å¿«æ…¢æŒ‡é’ˆ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ListNode</span> <span class="token function">deleteDuplicates</span><span class="token punctuation">(</span><span class="token class-name">ListNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token class-name">ListNode</span> ans <span class="token operator">=</span> head<span class="token punctuation">;</span>       <span class="token class-name">ListNode</span> left <span class="token operator">=</span> head<span class="token punctuation">;</span>       <span class="token class-name">ListNode</span> right <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>       <span class="token keyword">while</span><span class="token punctuation">(</span> right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           <span class="token class-name">ListNode</span> next <span class="token operator">=</span> right<span class="token punctuation">.</span>next<span class="token punctuation">;</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>left<span class="token punctuation">.</span>val <span class="token operator">==</span> right<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>               left<span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>               right<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span> <span class="token keyword">else</span><span class="token punctuation">&#123;</span>               left <span class="token operator">=</span>  right<span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span>           right <span class="token operator">=</span> next<span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">return</span> ans<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span></code></pre><h2 id="15-å¤åˆ¶å¸¦æœ‰éšæœºæŒ‡é’ˆçš„é“¾è¡¨">15 å¤åˆ¶å¸¦æœ‰éšæœºæŒ‡é’ˆçš„é“¾è¡¨</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/* * æ·±åº¦å¤åˆ¶å¸¦æœ‰randçš„é“¾è¡¨ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LiaoBiao_copyListWithRandom</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">Node</span> next<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">Node</span> rand<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>value <span class="token operator">=</span> data<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/* * æœ€ä¼˜è§£ï¼šäººå·¥æ„é€ å…³ç³» * 1 æ¯ä¸€ä¸ªèŠ‚ç‚¹åé¢åŠ ä¸€ä¸ªå…‹éš†èŠ‚ç‚¹ * 2 éå†å…³ç³» ï¼ˆåŒæ—¶å¤åˆ¶rand * 3 éå†åˆ†ç¦»ï¼ˆåŒæ—¶å¤åˆ¶next */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Node</span> <span class="token function">copyListWithRandom</span><span class="token punctuation">(</span><span class="token class-name">Node</span> head<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>    <span class="token class-name">Node</span> cur <span class="token operator">=</span> head<span class="token punctuation">;</span>    <span class="token class-name">Node</span> next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token comment">// 1</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    next <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    cur<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    cur<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>    cur <span class="token operator">=</span> next<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        cur <span class="token operator">=</span> head<span class="token punctuation">;</span>    <span class="token class-name">Node</span> curCopy <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token comment">// 2</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    next <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    curCopy <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    curCopy<span class="token punctuation">.</span>rand <span class="token operator">=</span> cur<span class="token punctuation">.</span>rand <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> cur<span class="token punctuation">.</span>rand<span class="token punctuation">.</span>next <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    cur <span class="token operator">=</span> next<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        cur <span class="token operator">=</span> head<span class="token punctuation">;</span>    <span class="token class-name">Node</span> res <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    <span class="token comment">// 3</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    next <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    curCopy <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    curCopy<span class="token punctuation">.</span>next <span class="token operator">=</span> cur<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    cur <span class="token operator">=</span> next<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token comment">/**     * ä½¿ç”¨hashMapä¸€ä¸€å¯¹åº”å…³ç³»     * 1 éå†ç¬¬ä¸€éä¸€ä¸€å¯¹åº”     * 2 éå†ç¬¬äºŒéå¤åˆ¶å…³ç³»     * @param head     * @return     */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Node</span> <span class="token function">copyListWithRandom2</span><span class="token punctuation">(</span><span class="token class-name">Node</span> head<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Node</span> cur <span class="token operator">=</span> head<span class="token punctuation">;</span><span class="token comment">// 1 </span><span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>cur <span class="token operator">=</span> head<span class="token punctuation">;</span><span class="token comment">// 2</span><span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">.</span>next <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">.</span>rand <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>rand<span class="token punctuation">)</span><span class="token punctuation">;</span>cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h1>2 åŠ¨æ€è§„åˆ’</h1><p>å…·ä½“æ­¥éª¤ å¯ä»¥å‚è€ƒ[é›¶é’±å…‘æ¢](###2 è¿”å›å‡‘é½çš„æ‰€æœ‰æ–¹æ³•æ•°)</p><h2 id="åŸºç¡€é—®é¢˜-èƒŒåŒ…é—®é¢˜">åŸºç¡€é—®é¢˜ èƒŒåŒ…é—®é¢˜</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ä¼ å…¥è´§ç‰©çš„é‡é‡å’Œä»·å€¼ ä¸èƒ½è¶…è¿‡bagèƒŒåŒ…å®¹é‡ï¼Œè¿”å›æœ€å¤§ä»·å€¼ *  * @author chs * */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DP2_knapsack</span> <span class="token punctuation">&#123;</span><span class="token comment">/** * æš´åŠ›é€’å½’ */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">maxValue</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> bag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>w <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> v <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> w<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token function">process</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> v<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> bag<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> rest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>rest <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> w<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// åŠ ä¸Ši</span><span class="token keyword">int</span> p1 <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> v<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> rest <span class="token operator">-</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ²¡åŠ </span><span class="token keyword">int</span> p2 <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> v<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> rest<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>p1 <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>p1 <span class="token operator">+=</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>   <span class="token comment">/** * åŠ¨æ€è§„åˆ’ç‰ˆ */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">dp</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> bag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>w <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> v <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> w<span class="token punctuation">.</span>length <span class="token operator">!=</span> v<span class="token punctuation">.</span>length <span class="token operator">||</span> w<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> w<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>bag <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> bag<span class="token punctuation">;</span> j <span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">-</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>ans <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>ans <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>bag<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="1-æœ€å¤§å­æ•°ç»„å’Œ">1. æœ€å¤§å­æ•°ç»„å’Œ</h2><h3 id="ç”¨è´ªå¿ƒ">ç”¨è´ªå¿ƒ</h3><p>åªéœ€è¦ä¸€ä¸ªpreåå¤æ›´æ–°è®°å½•ä»¥iä¸ºåº•çš„æœ€å¤§ç´¯åŠ å’Œï¼Œç„¶åmaxå­˜æœ€å¤§çš„</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//ç”¨ä¸¤ä¸ªå˜é‡å­˜</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">maxSubArray4</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> nums <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> max <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> pre <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>pre <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>pre <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>max <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">return</span> max<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å¦‚æœéœ€è¦è¿”å›è¯¥å­æ•°ç»„">å¦‚æœéœ€è¦è¿”å›è¯¥å­æ•°ç»„</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">int</span> res <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>l <span class="token operator">=</span> i<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>r <span class="token operator">=</span> i<span class="token punctuation">;</span>res <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="2-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-maxProfit">2. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº maxProfit</h2><h3 id="1-ä»å¤´è‡³å°¾ä¹°ä¸€æ¬¡ä¸€è‚¡-è¿”å›æœ€å¤§åˆ©æ¶¦">(1) ä»å¤´è‡³å°¾ä¹°ä¸€æ¬¡ä¸€è‚¡ è¿”å›æœ€å¤§åˆ©æ¶¦:</h3><p>éå†ä¸€é minæ ‡è®°ï¼Œ maxæœ€å¤§åˆ©æ¶¦æ›´æ–° å°±æ˜¯æ‰¾åˆ°æœ€ä½ç‚¹å’Œæœ€é«˜ç‚¹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span><span class="token keyword">int</span> prices<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> minprice <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> maxprofit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> minprice<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                minprice <span class="token operator">=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> minprice <span class="token operator">></span> maxprofit<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                maxprofit <span class="token operator">=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> minprice<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> maxprofit<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="2-ä¹°ä¸€è‚¡ä½†æ˜¯å¯ä»¥ä¹°æ— é™æ¬¡">(2) ä¹°ä¸€è‚¡ä½†æ˜¯å¯ä»¥ä¹°æ— é™æ¬¡</h3><p>éå†ç´¯åŠ æ‰€æœ‰çš„çˆ¬å¡</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// ä¸€è‚¡éšä¾¿ä¹°</span><span class="token comment">// ç›¸å½“äºåœ¨æ¯æ¬¡çˆ¬å¡å‰åä¹°å– å°†æ‰€æœ‰çˆ¬å¡ç´¯åŠ å°±è¡Œ</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">maxProfit2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prices<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>prices <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> prices<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>ans <span class="token operator">+=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">?</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="3-æœ€é•¿å›æ–‡å­ä¸²">3. æœ€é•¿å›æ–‡å­ä¸²</h2><h3 id="1-åŠ¨æ€è§„åˆ’O-N-2">(1) åŠ¨æ€è§„åˆ’O(N^2)</h3><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220114215749989.png" alt="image-20220114215749989" style="zoom: 33%;" /><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220114215821577.png" alt="image-20220114215821577" style="zoom: 33%;" /><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/**    * è‡ªå·±æ”¹åŠ¨æ€è§„åˆ’    * @param s    * @return    */</span>   <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">longestPalindrome33</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> s<span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span>       <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token comment">//è¾¹å¡«dp è¾¹æŠ“æœ€é•¿å’Œè¯¥æœ€é•¿å¼€å§‹èŠ‚ç‚¹</span>       <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>       <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token comment">//æŒ‰å¯¹è§’çº¿éå† </span>      <span class="token comment">// æœ€å¤–å¾ªç¯ä¸æ˜¯dpçš„åæ ‡</span>      <span class="token comment">// iä»£è¡¨äº†n - len æ¯ä¸ªå¾ªç¯è¡Œæ˜¯ä¸å˜çš„ </span>      <span class="token comment">// jæ˜¯æ¨ªåæ ‡L</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token class-name">L</span> <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> <span class="token class-name">L</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>               <span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token class-name">N</span> <span class="token operator">-</span> i<span class="token punctuation">;</span>               <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span> <span class="token operator">==</span> str<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">-</span> <span class="token class-name">L</span> <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                       dp<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                   <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                       dp<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                   <span class="token punctuation">&#125;</span>               <span class="token punctuation">&#125;</span>               <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token class-name">R</span> <span class="token operator">-</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">></span> max<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                   max <span class="token operator">=</span> <span class="token class-name">R</span> <span class="token operator">-</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                   index <span class="token operator">=</span> <span class="token class-name">L</span><span class="token punctuation">;</span>               <span class="token punctuation">&#125;</span>           <span class="token punctuation">&#125;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> index <span class="token operator">+</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span></code></pre><h3 id="2-Manacher">(2) Manacher!</h3><p>é¢è¯•è®²ä¸€è®²</p><p>å‡è®¾å­—ç¬¦ä¸²stré•¿åº¦ä¸ºNï¼Œæƒ³è¿”å›æœ€é•¿å›æ–‡å­ä¸²çš„é•¿åº¦</p><p>æ—¶é—´å¤æ‚åº¦O(N)</p><h4 id="Manacherç®—æ³•æ ¸å¿ƒ">Manacherç®—æ³•æ ¸å¿ƒ</h4><p>1ï¼‰ç†è§£å›æ–‡åŠå¾„æ•°ç»„<br>2ï¼‰ç†è§£æ‰€æœ‰ä¸­å¿ƒçš„å›æ–‡æœ€å³è¾¹ç•ŒRï¼Œå’Œå–å¾—Ræ—¶çš„ä¸­å¿ƒç‚¹C<br>3ï¼‰ç†è§£ Lâ€¦(iâ€™)â€¦Câ€¦(i)â€¦R çš„ç»“æ„ï¼Œä»¥åŠæ ¹æ®iâ€™å›æ–‡é•¿åº¦è¿›è¡Œçš„çŠ¶å†µåˆ’åˆ†<br>4ï¼‰æ¯ä¸€ç§æƒ…å†µåˆ’åˆ†ï¼Œéƒ½å¯ä»¥åŠ é€Ÿæ±‚è§£iå›æ–‡åŠå¾„çš„è¿‡ç¨‹</p><p>æœ€é•¿å›æ–‡å­ä¸²å°±æ˜¯æˆ‘çŸ¥é“å¯ä»¥è¿›è¡Œã€‚</p><h3 id="æœ€é•¿å›æ–‡å­åºåˆ—">æœ€é•¿å›æ–‡å­åºåˆ—</h3><p>å­åºåˆ—å°±æ˜¯ä¸‰ç§æƒ…å†µ L+1 ~R å’Œ L ~ R-1 å’Œ L +1 ~ R - 1</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">longestPalindromeSubseq</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">longestPalindromeSubseq</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> s <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span>       <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token comment">//å¯¹è§’çº¿éå†</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>         <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token class-name">L</span> <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> <span class="token class-name">L</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           <span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token class-name">N</span> <span class="token operator">-</span> i<span class="token punctuation">;</span>           dp<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span> <span class="token operator">==</span> str<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>             dp<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>   </code></pre><h2 id="4-æœ€é•¿é€’å¢å­åºåˆ—">4. æœ€é•¿é€’å¢å­åºåˆ—</h2><h3 id="DPç‰ˆ-O-n-2">DPç‰ˆ  O(n^2)</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">lengthOfLIS</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>      dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>      <span class="token keyword">int</span> maxans <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                  dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">&#125;</span>          <span class="token punctuation">&#125;</span>          maxans <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxans<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> maxans<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span></code></pre><h3 id="äºŒåˆ†æŸ¥æ‰¾-è´ªå¿ƒ-O-nlogn">äºŒåˆ†æŸ¥æ‰¾+è´ªå¿ƒ  O(nlogn)</h3><p>ç»´æŠ¤ä¸€ä¸ªendæ•°ç»„å­˜å‚¨</p><ol><li><p>end[i] ä»£è¡¨  i+1 é•¿åº¦ä¸‹å­åºåˆ—çš„æœ€åä¸‹æ ‡</p></li><li><p>len = é€’å¢å­åºåˆ—çš„é•¿ åº¦ - 1ï¼ˆendæ•°ç»„çš„ä¸‹æ ‡ ï¼‰</p></li></ol><p>è®¾å½“å‰å·²æ±‚å‡ºçš„æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ä¸º lenï¼ˆåˆå§‹æ—¶ä¸º1ï¼‰ï¼Œä»å‰å¾€åéå†æ•°ç»„numsï¼Œåœ¨éå†åˆ° nums[i] æ—¶ï¼š</p><ul><li>å¦‚æœ nums[i] &gt;[len] ï¼Œåˆ™[++len] = nums[i]ï¼›</li><li>å¦åˆ™ï¼Œåœ¨endæ•°ç»„ä¸­[0 ~ len-1]äºŒåˆ†æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯” nums[i] å°çš„æ•° end[k] ï¼Œå¹¶æ›´æ–° end[k+1]=nums[i]ã€‚</li></ul><p><strong>ä»£ç </strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">lengthOfLIS</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> nums <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// end[i]å­˜å‚¨ ç¬¬i+1é•¿åº¦ä¸‹å­åºåˆ—çš„æœ€åä¸‹æ ‡</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> end <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>end<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//!!!</span><span class="token comment">// endæ•°ç»„çš„ä¸‹æ ‡ = é€’å¢å­åºåˆ—çš„é•¿åº¦ - 1</span><span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// äºŒåˆ†æŸ¥æ‰¾çš„ä¸‹æ ‡</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> end<span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>end<span class="token punctuation">[</span><span class="token operator">++</span>len<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token comment">// åœ¨endé‡Œé¢äºŒåˆ†æŸ¥æ‰¾ &lt; num[i] çš„æ•°</span><span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">int</span> pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//å› ä¸ºå¦‚æœæ²¡æœ‰æ¯”ä»–å°çš„ è¯´æ˜éƒ½æ¯”ä»–å¤§ å°±æ›´æ–°çš„æ˜¯end[0]</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">&lt;=</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">+</span> <span class="token class-name">L</span><span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>end<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>pos <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//æŠ“ä½å½“å‰å°äºnumiçš„æ•°çš„åé¢ä¸€ä½ åé¢ä¼šæ›´æ–°</span><span class="token class-name">L</span> <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token class-name">R</span> <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>end<span class="token punctuation">[</span>pos<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//æ›´æ–°</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="5-æ¥é›¨æ°´">5. æ¥é›¨æ°´</h2><ul><li>å·¦å³ä¸¤ä¸ªæŒ‡é’ˆ left right</li><li>å·¦å³ä¸¤ä¸ªå˜é‡å­˜å‚¨å·¦å³æœ€å¤§çš„å€¼</li><li>æ¯æ¬¡æ›´æ–°å·¦å³ä»»æ„ä¸€è¾¹é ç€lmaxæˆ–è€…rmaxçš„æŒ‡é’ˆçš„é›¨æ°´å¤§å°</li><li>ç›¸å½“äºæ˜¯æŠŠæ¯ä¸€ä¸‹æ ‡ç§¯çš„æ°´ç´¯åŠ ã€‚</li></ul><p>ç›¸å½“äºæ˜¯ä»å·¦å³ä¸¤è¾¹æ¥è¿›è¡Œæ›´æ–° å“ªè¾¹çš„maxæœ€å¤§å°±æ¯”è¾ƒé‚£ä¸€è¾¹çš„L/Rä¸maxå¤§å° ç´¯åŠ å¹¶ä¸”æ›´æ–°æœ€å¤§å€¼</p><p>æœ€åè¿”å›ç´¯åŠ å’Œ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">trap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token keyword">int</span> leftMax <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> rightMax <span class="token operator">=</span> arr<span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>z<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">&lt;=</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// ï¼ï¼ï¼ï¼ &lt;=</span><span class="token keyword">if</span><span class="token punctuation">(</span>leftMax <span class="token operator">&lt;=</span> rightMax<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>ans <span class="token operator">+=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> leftMax <span class="token operator">-</span> arr<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>leftMax <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftMax<span class="token punctuation">,</span> arr<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>ans <span class="token operator">+=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> rightMax <span class="token operator">-</span> arr<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>rightMax <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>rightMax<span class="token punctuation">,</span> arr<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="6-æœ€é•¿ä¸Šå‡å­åºåˆ—">6. æœ€é•¿ä¸Šå‡å­åºåˆ—</h2><p>è®¾å½“å‰å·²æ±‚å‡ºçš„æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ä¸º lenï¼ˆåˆå§‹æ—¶ä¸º1ï¼‰ï¼Œä»å‰å¾€åéå†æ•°ç»„numsï¼Œåœ¨éå†åˆ° nums[i] æ—¶ï¼š</p><ul><li>å¦‚æœ nums[i] d[len] ï¼Œåˆ™ç›´æ¥åŠ å…¥åˆ° ddd æ•°ç»„æœ«å°¾ï¼Œå¹¶æ›´æ–° len= len+1ï¼›</li><li>å¦åˆ™ï¼Œåœ¨ dæ•°ç»„ä¸­äºŒåˆ†æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯” nums[i] å°çš„æ•° d[k] ï¼Œå¹¶æ›´æ–° d[k+1]=nums[i].</li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * è¿™é“é¢˜è¦ç”¨ äºŒåˆ†æŸ¥æ‰¾å’Œè´ªå¿ƒ * æš´åŠ›é€’å½’XXXä¸ç”¨äº†è€å­  * @param nums * @return */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">lengthOfLIS</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> nums <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// end[i]å­˜å‚¨ ç¬¬i+1é•¿åº¦ä¸‹å­åºåˆ—çš„æœ€åä¸‹æ ‡</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> end <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>end<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// endæ•°ç»„çš„ä¸‹æ ‡ = é€’å¢å­åºåˆ—çš„é•¿åº¦ - 1</span><span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// äºŒåˆ†æŸ¥æ‰¾çš„ä¸‹æ ‡</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//</span><span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> end<span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>end<span class="token punctuation">[</span><span class="token operator">++</span>len<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token comment">// åœ¨endé‡Œé¢äºŒåˆ†æŸ¥æ‰¾ &lt; num[i] çš„æ•°</span><span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">int</span> pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//å› ä¸ºå¦‚æœæ²¡æœ‰æ¯”ä»–å°çš„ è¯´æ˜éƒ½æ¯”ä»–å¤§ å°±æ›´æ–°çš„æ˜¯end[0]</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">&lt;=</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">+</span> <span class="token class-name">L</span><span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>end<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>pos <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//æŠ“ä½å½“å‰å°äºnumiçš„æ•°çš„åé¢ä¸€ä½ åé¢ä¼šæ›´æ–°</span><span class="token class-name">L</span> <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token class-name">R</span> <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>end<span class="token punctuation">[</span>pos<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//æ›´æ–°</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="7-çˆ¬æ¥¼æ¢¯">7. çˆ¬æ¥¼æ¢¯</h2><h3 id="é€’å½’-ç¬”è¯•">é€’å½’ ç¬”è¯•</h3><p><strong>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</strong> f(n) = f(n - 1) + f(n - 2); ----&gt; å¯ä»¥çœ‹å‡ºå°±æ˜¯æ–æ³¢æ‹‰å¥‘æ•°åˆ—</p><p>ç”¨ä¸‰ä¸ªå¸¸é‡æ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸ºO(1)</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">climbStairs</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> q <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            p <span class="token operator">=</span> q<span class="token punctuation">;</span>             q <span class="token operator">=</span> r<span class="token punctuation">;</span>             r <span class="token operator">=</span> p <span class="token operator">+</span> q<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> r<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token operator">+</span><span class="token punctuation">&#125;</span></code></pre><h3 id="çŸ©é˜µå¿«é€Ÿå¹‚-o-logn">çŸ©é˜µå¿«é€Ÿå¹‚ o(logn)</h3><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220124114518863.png" alt="image-20220124114518863" style="zoom: 33%;" /><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Code4_ClimbStairs</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">climbStairs</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// [ 1 ,1 ]</span><span class="token comment">// [ 1, 0 ]</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> base <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#123;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token function">matrixPower</span><span class="token punctuation">(</span>base<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token comment">// å¦‚æœæ˜¯æ–æ³¢æ‹‰å¥‘æ•°åˆ— å°±è¦ä»1 1 2 3 5 </span>    <span class="token comment">// è¿”å›çš„å°±æ˜¯res[0][0]+res[0][1]</span><span class="token punctuation">&#125;</span>  <span class="token comment">/*  å¿«é€Ÿå¹‚ æ–¹æ³•å°±æ˜¯å°†æŒ‡æ•°å¾ªç¯ æ¯æ¬¡å¾ªç¯å†…çŸ©é˜µå¹³æ–¹ ç„¶åæŒ‡æ•°å³ç§»ä¸€ä½  */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">matrixPower</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// resåˆå§‹åŒ–ä¸ºå•ä½1</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// m ---> ä¸€æ¬¡æ–¹</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tmp <span class="token operator">=</span> m<span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> p <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span> p <span class="token operator">>>=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// ï¼ï¼ï¼å…ˆä¹˜ä¸€æ¬¡æ–¹ æ³¨æ„æ˜¯ä¸ç­‰äº0 </span>res <span class="token operator">=</span> <span class="token function">muliMatrix</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> tmp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>tmp <span class="token operator">=</span> <span class="token function">muliMatrix</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> tmp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">muliMatrix</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> m1<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> m2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>m1<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>m2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> m2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> m2<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>res<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> m1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">*</span> m2<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// k = m1çš„åˆ— = m2çš„è¡Œ</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸»è¦å°±æ˜¯æ³¨æ„å¿«é€Ÿå¹‚é‡Œé¢è¦å…ˆè¿›è¡Œ ä¸€æ¬¡æ–¹çš„åˆ¤æ–­</p><h2 id="8-ç¼–è¾‘è·ç¦»-dp3">8. ç¼–è¾‘è·ç¦»(dp3)</h2><h3 id="DP-æ ·æœ¬å¯¹åº”æ¨¡å‹ï¼šå¾€å¾€ç”¨æœ€åçš„ä½ç½®æ¥åˆ¤æ–­å¯èƒ½æ€§">DP æ ·æœ¬å¯¹åº”æ¨¡å‹ï¼šå¾€å¾€ç”¨æœ€åçš„ä½ç½®æ¥åˆ¤æ–­å¯èƒ½æ€§</h3><p>ç»™ä¸¤ä¸ªå•è¯ï¼Œè¿”å›ç¬¬ä¸€ä¸ªå•è¯è½¬æ¢ä¸ºç¬¬äºŒä¸ªå•è¯æœ€å°‘çš„æ“ä½œæ•°ï¼Œ æœ‰å¢åˆ æ”¹ä¸‰ç§æ“ä½œ</p><p>ï¼ˆæ‰©å±•ï¼šå¯ä»¥å¢åŠ a d cåˆ†åˆ«ä»£è¡¨å¢åˆ æ”¹çš„ä»£ä»·ï¼‰</p><p>æ ¹æ®æœ€åä¸€ä¸ªä½ç½®æœ‰å››ç§å¯èƒ½</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DP3_EditDistance</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">minDistance</span><span class="token punctuation">(</span><span class="token class-name">String</span> word1<span class="token punctuation">,</span> <span class="token class-name">String</span> word2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>word1 <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> word2 <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>       <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str1 <span class="token operator">=</span> word1<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str2 <span class="token operator">=</span> word2<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> str1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>         <span class="token keyword">int</span> <span class="token class-name">M</span> <span class="token operator">=</span> str2<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">M</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">// 1 å¤„ç†è¾¹ç•Œï¼šå…¶ä¸­æœ‰å­—ç¬¦ä¸²æ˜¯ç©ºçš„æƒ…å†µ å…¨æ˜¯å¢åŠ æ“ä½œ</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>         <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">M</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 2 æ™®é€šæƒ…å†µ ä»æœ€åä½ç½®æ¯”è¾ƒword1è¯¥å¦‚ä½•å¤„ç†</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token class-name">M</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// 2.1 æœ€åä¸€ä¸ªä½ç½®ä¿®æ”¹æˆ–è€…ä¿ç•™</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>str1<span class="token punctuation">[</span>i<span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> str2<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// ï¼ï¼ï¼ æ³¨æ„</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token comment">// 2.2 æœ€åä¸€ä¸ªä½ç½®åˆ é™¤</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 2.3 æœ€åä¸€ä¸ªä½ç½®å¢åŠ  </span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>âš ï¸ å› ä¸ºæœ‰ä¸º0çš„æƒ…å†µ æ‰€ä»¥æ€»çš„å°±æ˜¯[0, N] æ‰€ä»¥å¾ªç¯èŒƒå›´éœ€è¦æ˜¯[0,N]  å¹¶ä¸”<strong>strä¸‹æ ‡</strong> å¯¹åº” <strong>dpä¸‹æ ‡</strong>å‡ä¸€</p><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220124222730796.png" alt="image-20220124222730796" style="zoom:33%;" /><h2 id="9-æœ€é•¿å…¬å…±å­åºåˆ—-dp3">9. æœ€é•¿å…¬å…±å­åºåˆ—(dp3)</h2><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220125165947341.png" alt="image-20220125165947341" style="zoom:50%;" /><p>âš ï¸å¡«è¾¹ç•Œçš„æ—¶å€™å…ˆå°†<code>dp[0][0]</code>å¡«äº† é˜²æ­¢ i - 1 è¶Šç•Œ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">longestCommonSubsequence</span><span class="token punctuation">(</span><span class="token class-name">String</span> text1<span class="token punctuation">,</span> <span class="token class-name">String</span> text2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>text1 <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> text2 <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str1 <span class="token operator">=</span> text1<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str2 <span class="token operator">=</span> text2<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>str1<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>str2<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">// 1 å¡«å®Œç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—</span>        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> str1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> str2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// !!!</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str2<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> str1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> str2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>         <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> str1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> str2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 2 æŒ‰æ¯è¡Œæ²¡åˆ—å¡«</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> str2<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>              <span class="token comment">// 1 ä¸çœ‹å½“å‰çš„æƒ…å†µ æ¯”è¾ƒ[i - 1]å’Œ[j ]æˆ–è€…[ i]å’Œ[j - 1]</span>                <span class="token keyword">int</span> p1 <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> p2 <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>              <span class="token comment">// 2 å°†è¿™ä¸ªä½ç½®çš„æƒ…å†µçº³å…¥ æ¯”è¾ƒ [i]å’Œ [j]</span>                <span class="token keyword">int</span> p3 <span class="token operator">=</span> str1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> str2<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">?</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">:</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>p2<span class="token punctuation">,</span> p3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>str1<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>str2<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="10-æœ€å°è·¯å¾„å’Œ">10 æœ€å°è·¯å¾„å’Œ</h2><blockquote><p>m âœ–ï¸n çš„ç½‘æ ¼ ä»å·¦ä¸‹è§’èµ°åˆ°å³ä¸‹è§’ æ€ä¹ˆèµ°è·¯å¾„æœ€çŸ­</p></blockquote><p>âš ï¸[1, 1] å¼€å§‹å¡«è¡¨</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">minPathSum2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> grid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>grid <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> grid<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> m <span class="token operator">=</span> grid<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// !!! æ³¨æ„åˆ«å†™åäº†</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h4 id="æ‰©å±•">æ‰©å±•</h4><p>è®°å½•è·¯å¾„ä¹Ÿå¯ä»¥å¼€ä¸€ä¸ªå­—å…¸ï¼Œåº”è¯¥çŸ¥é“äº†æ¯ä¸ª [i,j] ä¸Šä¸€ä¸ªæ¥æºåæ ‡ lastï¼Œ path[(i,j)] = (lasti,lastj)ï¼Œæœ€åç”¨ä¸€ä¸ªæ­»å¾ªç¯è¾“å‡ºæ‰€æœ‰pathï¼Œå½“ (i,j) == (0,0 ) æ—¶å€™é€€å‡º ç„¶åæœ€åè¿›è¡Œä¸€ä¸ªæ­»å¾ªç¯ å°±å¯ä»¥å°†å¾ªç¯æ‰“å‡ºæ¥äº†</p><h3 id="ä¸åŒè·¯å¾„">ä¸åŒè·¯å¾„</h3><blockquote><p>m âœ–ï¸n çš„ç½‘æ ¼ ä»å·¦ä¸‹è§’èµ°åˆ°å³ä¸‹è§’ æœ‰å¤šå°‘ç§èµ°æ³• ï¼ˆæ–¹æ³•æ•°ï¼‰</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">uniquePaths</span><span class="token punctuation">(</span><span class="token keyword">int</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="11-æœ€é•¿å…¬å…±å­æ•°ç»„-æœ€é•¿é‡å¤å­æ•°ç»„">11  æœ€é•¿å…¬å…±å­æ•°ç»„(æœ€é•¿é‡å¤å­æ•°ç»„)</h2><blockquote><p>æ³¨æ„çš„è¿˜æ˜¯<strong>è¾¹ç•Œ</strong>ï¼› åº”ä¸ºéœ€è¦æœ€å¼€å§‹çš„çŠ¶æ€æ¥ä¾èµ– æ‰€ä»¥è¦ä¸é€‰æ‹©dpå¤–å›´åŠ ä¸€åœˆ è¦ä¸å°±æ˜¯dpå†…å›´å¾ªç¯ä»1å¼€å§‹</p></blockquote><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220125205333273.png" alt="image-20220125205333273" style="zoom: 33%;" /><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findLength</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token class-name">B</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token class-name">A</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span> m <span class="token operator">=</span> <span class="token class-name">B</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">A</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token class-name">B</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">?</span> dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>ans <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findLength</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums1<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums1<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>nums2<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> nums1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> nums2<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> nums1<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> nums2<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//ï¼ï¼ï¼</span>               ans <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">return</span> ans<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span></code></pre><h2 id="12-é›¶é’±å…‘æ¢é—®é¢˜-å®Œå…¨èƒŒåŒ…-dp4-éš¾">12 é›¶é’±å…‘æ¢é—®é¢˜ &lt;å®Œå…¨èƒŒåŒ…&gt;(dp4) éš¾</h2><p>å…³äºèƒŒåŒ…é—®é¢˜ <a href="https://leetcode-cn.com/problems/coin-change/solution/yi-pian-wen-zhang-chi-tou-bei-bao-wen-ti-sq9n/">åƒé€èƒŒåŒ…æ‰€æœ‰é—®é¢˜</a></p><p><strong>ä»å·¦å‘å³çš„å°è¯•æ¨¡å‹</strong></p><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ coins ï¼Œè¡¨ç¤ºä¸åŒé¢é¢çš„ç¡¬å¸ï¼›ä»¥åŠä¸€ä¸ªæ•´æ•° amount ï¼Œè¡¨ç¤ºæ€»é‡‘é¢ã€‚</p></blockquote><h3 id="1-è¿”å›éœ€è¦æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°">1 è¿”å›éœ€è¦æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°</h3><blockquote><p>è®¡ç®—å¹¶è¿”å›å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„ <strong>æœ€å°‘</strong>ç¡¬å¸ä¸ªæ•° ã€‚</p><p>æ¯ä¸ªç¡¬å¸éƒ½å¯ä»¥è¯´ä½¿ç”¨æ— é™æ¬¡ã€‚</p></blockquote><h4 id="åŠ¨æ€è§„åˆ’">åŠ¨æ€è§„åˆ’</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">coinChange</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> aim<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>aim <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>aim <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>dp<span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> aim<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>dp<span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> index <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> index<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> rest <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> rest <span class="token operator">&lt;=</span> aim<span class="token punctuation">;</span> rest<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// ä¸‹è¾¹</span><span class="token keyword">if</span> <span class="token punctuation">(</span>rest <span class="token operator">-</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest <span class="token operator">-</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token comment">// æœ€å°å€¼ ç›¸å½“äºï¼ˆ å·¦è¾¹+1ï¼‰ä¸ï¼ˆä¸‹è¾¹ ï¼‰è¿›è¡Œæ¯”è¾ƒ</span>dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest <span class="token operator">-</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>aim<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>aim<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// æ— è§£æƒ…å†µè¿”å›-1</span>    <span class="token punctuation">&#125;</span></code></pre><h3 id="2-è¿”å›å‡‘é½çš„æ‰€æœ‰æ–¹æ³•æ•°">2 è¿”å›å‡‘é½çš„æ‰€æœ‰æ–¹æ³•æ•°</h3><blockquote><p>è¿”å›ç¡¬å¸æˆ–è€…è´§å¸å¯ä»¥å‡‘é½é’±çš„æ‰€æœ‰æ–¹æ³•æ•°</p></blockquote><h4 id="æš´åŠ›é€’å½’çš„å°è¯•">æš´åŠ›é€’å½’çš„å°è¯•</h4><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220126121822867.png" alt="image-20220126121822867" style="zoom:50%;float:left;" /><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">coinsWay</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> aim<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> aim <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token function">process</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> aim<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// arr[index....] æ‰€æœ‰çš„é¢å€¼ï¼Œæ¯ä¸€ä¸ªé¢å€¼éƒ½å¯ä»¥ä»»æ„é€‰æ‹©å¼ æ•°ï¼Œç»„æˆæ­£å¥½restè¿™ä¹ˆå¤šé’±ï¼Œæ–¹æ³•æ•°å¤šå°‘ï¼Ÿ</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token keyword">int</span> rest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// æ²¡é’±äº†</span><span class="token keyword">return</span> rest <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> ways <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> zhang <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> zhang <span class="token operator">*</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> rest<span class="token punctuation">;</span> zhang<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> ways <span class="token operator">+=</span> <span class="token function">process</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> rest <span class="token operator">-</span> <span class="token punctuation">(</span>zhang <span class="token operator">*</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> ways<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220126122746347.png" alt="image-20220126122746347" style="zoom: 50%;float:left" /><p><strong>è¯´æ˜æ˜¯æœ‰é‡å¤è§£çš„</strong>,æ‰€ä»¥å¯ä»¥è¿›ä¸€æ­¥è¿›è¡Œè®°å¿†åŒ–æœç´¢</p><h4 id="è®°å¿†åŒ–æœç´¢">è®°å¿†åŒ–æœç´¢</h4><p>å°±æ˜¯ç”¨ä¸€ä¸ªç»“æ„å­˜å‚¨f(i, rest)ç»“æœ åé¢å°±ä¸ä¼šé‡å¤è§£</p><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220126124736980.png" alt="image-20220126124736980" style="zoom:50%; float: left;" /><p>å¦‚æœè¯¥é¢˜æ²¡æœ‰æšä¸¾è¡Œä¸ºé‚£ä¹ˆå‚»ç¼“å­˜çš„æ–¹æ³•å’Œä¸¥æ ¼è¡¨ç»“æ„ï¼ˆåŠ¨æ€è§„åˆ’ï¼‰çš„æ–¹æ³•å°±æ˜¯ä¸€æ ·çš„ã€‚</p><p><strong>ä¸¥æ ¼çš„è¡¨ç»“æ„</strong>ï¼š å°±æ˜¯åœ¨è®°å¿†åŒ–æœç´¢çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥æ¢³ç†äº†ä¾èµ–å…³ç³»ï¼Œä»ç®€å•ä½ç½®ç®—å‡ºå¤æ‚ä½ç½®ï¼Œä¸¥æ ¼è§„å®šå¥½äº†è®¡ç®—é¡ºåº</p><p>æœ‰æšä¸¾è¡Œä¸ºï¼šéœ€è¦æå‡ºä¸¥æ ¼çš„è¡¨ç»“æ„è¿›è¡Œç»§ç»­ä¼˜åŒ–ã€‚</p><h4 id="åŠ¨æ€è§„åˆ’-2">åŠ¨æ€è§„åˆ’</h4><p>ç¬¬ä¸€ç‰ˆdp:æœ‰æšä¸¾è¡Œä¸ºï¼Œå’Œä¸Šé¢è®°å¿†åŒ–æœç´¢çš„æ–¹æ³•æ˜¯ç­‰æ•ˆçš„</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">dp1</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> aim<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> aim <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>aim <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>dp<span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> index <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> index<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> rest <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> rest <span class="token operator">&lt;=</span> aim<span class="token punctuation">;</span> rest<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> ways <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> zhang <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> zhang <span class="token operator">*</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> rest<span class="token punctuation">;</span> zhang<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>ways <span class="token operator">+=</span> dp<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>rest <span class="token operator">-</span> <span class="token punctuation">(</span>zhang <span class="token operator">*</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> ways<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>aim<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç¬¬äºŒç‰ˆï¼šå°†æšä¸¾è¡Œä¸ºçš„è§„å¾‹æ‰¾å‡ºæ¥ï¼Œåˆ©ç”¨<strong>ä¸¥æ ¼çš„è¡¨ç»“æ„</strong></p><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220126140549709.png" alt="image-20220126140549709" style="zoom:50%;float:left" /><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220126141740242.png" alt="image-20220126141740242" style="zoom:50%;" /><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">coinChange</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> coins<span class="token punctuation">,</span> <span class="token keyword">int</span> amount<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>coins <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> coins<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> amount <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> coins<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>dp<span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> index <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> index<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> rest <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> rest <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span> rest<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>rest <span class="token operator">-</span> coins<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest <span class="token operator">-</span> coins<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>amount<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="3-æœ€ç»ˆä»£ç ">3 æœ€ç»ˆä»£ç </h3><h4 id="é›¶é’±å…‘æ¢1">é›¶é’±å…‘æ¢1</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">coinChange</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> aim<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>aim <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>aim <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>dp<span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> aim<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>dp<span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> index <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> index<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> rest <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> rest <span class="token operator">&lt;=</span> aim<span class="token punctuation">;</span> rest<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>rest <span class="token operator">-</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest <span class="token operator">-</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token comment">// æœ€å°å€¼åˆ¤æ–­</span>dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest <span class="token operator">-</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>aim<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>aim<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// æ— è§£æƒ…å†µè¿”å›-1</span>    <span class="token punctuation">&#125;</span><span class="token comment">/** ä¸€ç»´ éš¾ç†è§£*/</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">coinChange</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> coins<span class="token punctuation">,</span> <span class="token keyword">int</span> amount<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> max <span class="token operator">=</span> amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>dp<span class="token punctuation">,</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> coins<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>coins<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> coins<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span> <span class="token operator">></span> amount <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h4 id="é›¶é’±å…‘æ¢2">é›¶é’±å…‘æ¢2</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">coinChange</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> coins<span class="token punctuation">,</span> <span class="token keyword">int</span> amount<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>coins <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> coins<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> amount <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> coins<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>dp<span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> index <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> index<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> rest <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> rest <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span> rest<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>rest <span class="token operator">-</span> coins<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>rest <span class="token operator">-</span> coins<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>amount<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** ä¸€ç»´ ä¸æ˜¯å¾ˆå¥½ç†è§£æ€•å†™é”™*/</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">change</span><span class="token punctuation">(</span><span class="token keyword">int</span> amount<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> coins<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> coin <span class="token operator">:</span> coins<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> coin<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> coin<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="13-æœ€é•¿æœ‰æ•ˆæ‹¬å·">13 æœ€é•¿æœ‰æ•ˆæ‹¬å·</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªåªåŒ…å« <code>'('</code> å’Œ <code>')'</code> çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿æœ‰æ•ˆï¼ˆæ ¼å¼æ­£ç¡®ä¸”è¿ç»­ï¼‰æ‹¬å·å­ä¸²çš„é•¿åº¦ã€‚</p></blockquote><pre class="language-txt" data-language="txt"><code class="language-txt">æ€è·¯ï¼š    æ˜¯å­ä¸²ç±»å‹ï¼Œçœ‹ä»¥iç»“å°¾1 å¦‚æœå½“å‰æ˜¯â€˜ï¼‰â€™ å°±æ‰¾å¯ä»¥å’Œä»–é…å¯¹çš„æœ€å‰å·¦æ‹¬å·preä¸‹æ ‡   pre = i - dp[i - 1] - 1;            ï¼ˆdp[i - 1] å‰ä¸€ä¸ªå·²ç»é…å¥½å¯¹çš„é•¿åº¦ 2 å¦‚æœpreæ˜¯å·¦æ‹¬å·(æ³¨æ„pre>= 0 é˜²æ­¢è¶Šç•Œ)      æ›´æ–°dp[i] == 2 + dp [i - 1]+ (pre > 0? dp [pre - 1] : 0);</code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">longestValidParentheses</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>s <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str<span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">')'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                 <span class="token keyword">int</span> pre <span class="token operator">=</span> i <span class="token operator">-</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span> pre <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> str<span class="token punctuation">[</span>pre<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'('</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// !! pre >= 0åœ¨å‰ pre </span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span>pre <span class="token operator">></span> <span class="token number">0</span><span class="token operator">?</span> dp<span class="token punctuation">[</span>pre <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//!!! pre -1 </span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            max <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> max<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="14-æ‰“å®¶åŠ«èˆ">14 æ‰“å®¶åŠ«èˆ</h2><blockquote><p>ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ã€‚</p><p>ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/house-robber">https://leetcode-cn.com/problems/house-robber</a></p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rob</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">if</span> <span class="token punctuation">(</span>nums <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// ï¼ï¼ï¼ </span>           <span class="token keyword">return</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>       <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ï¼ï¼!æ³¨æ„è¦å°†[0][1] å…ˆå¡« iä»2å¼€å§‹</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">int</span> p1 <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>           <span class="token keyword">int</span> p2 <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>           <span class="token keyword">int</span> p3 <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>           dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>p2<span class="token punctuation">,</span> p3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span></code></pre><h2 id="æ‰“å®¶åŠ«èˆâ…¡">æ‰“å®¶åŠ«èˆâ…¡</h2><blockquote><p>è¿™ä¸ªåœ°æ–¹æ‰€æœ‰çš„æˆ¿å±‹éƒ½ <strong>å›´æˆä¸€åœˆ</strong> ï¼Œè¿™æ„å‘³ç€ç¬¬ä¸€ä¸ªæˆ¿å±‹å’Œæœ€åä¸€ä¸ªæˆ¿å±‹æ˜¯ç´§æŒ¨ç€çš„ã€‚</p></blockquote><p>æ˜¯æ»šåŠ¨æ•°ç»„ï¼Œå¯ä»¥åˆ†æˆä¸¤ä¸ªæ•°ç»„æ¥åˆ¤æ–­[0]-[N-2] å’Œ [1]-[N-1]</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rob</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> p1 <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> p2 <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> p3 <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>p2<span class="token punctuation">,</span> p3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> ans1 <span class="token operator">=</span> dp<span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> p1 <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> p2 <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> p3 <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>p2<span class="token punctuation">,</span> p3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> ans2 <span class="token operator">=</span> dp<span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>ans1<span class="token punctuation">,</span> ans2<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span></code></pre><h2 id="15-çŸ©é˜µçš„é€’å¢è·¯å¾„">15 çŸ©é˜µçš„é€’å¢è·¯å¾„</h2><blockquote><p>ç»™å®šä¸€ä¸ª m x n æ•´æ•°çŸ©é˜µ matrix ï¼Œæ‰¾å‡ºå…¶ä¸­ æœ€é•¿é€’å¢è·¯å¾„ çš„é•¿åº¦ã€‚</p><p>å¯¹äºæ¯ä¸ªå•å…ƒæ ¼ï¼Œä½ å¯ä»¥å¾€ä¸Šï¼Œä¸‹ï¼Œå·¦ï¼Œå³å››ä¸ªæ–¹å‘ç§»åŠ¨ã€‚ ä½  ä¸èƒ½ åœ¨ å¯¹è§’çº¿ æ–¹å‘ä¸Šç§»åŠ¨æˆ–ç§»åŠ¨åˆ° è¾¹ç•Œå¤–ï¼ˆå³ä¸å…è®¸ç¯ç»•ï¼‰ã€‚</p><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220228231209380.png" alt="image-20220228231209380" style="zoom:33%;" /></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">longestIncreasingPath</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">M</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token class-name">M</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>ans <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> <span class="token function">process1</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> dp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">process1</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//å­˜äº†æ•°å°±ä¸ç”¨å†ç®—äº†</span><span class="token keyword">return</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘</span><span class="token keyword">int</span> up <span class="token operator">=</span> i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> m<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token function">process1</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> dp<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> down <span class="token operator">=</span> i <span class="token operator">&lt;</span> <span class="token punctuation">(</span>m<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> m<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token function">process1</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> dp<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> left <span class="token operator">=</span> j <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token function">process1</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>dp<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> right <span class="token operator">=</span> j <span class="token operator">&lt;</span> <span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token function">process1</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> dp<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>up<span class="token punctuation">,</span> down<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> ans<span class="token punctuation">;</span><span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="16-æœºå™¨äººwalk">16 æœºå™¨äººwalk</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/* * æœºå™¨äººåœ¨né•¿åº¦çš„æ•°ç»„ä¸­ï¼Œä½ç½®åœ¨Mï¼Œè¦èµ°kæ­¥åˆ°pï¼Œæœ‰å¤šå°‘ç§æ–¹æ³• */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DP_RobortWalk</span> <span class="token punctuation">&#123;</span><span class="token comment">/* 1 * æš´åŠ›é€’å½’å°è¯• * æ¯æ¬¡èµ°ä¸€æ­¥ï¼š 1. rest - 1 ï¼›2. ä½ç½®curæ›´æ–° */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">way1</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token class-name">N</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">M</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">P</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">N</span> <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">||</span> <span class="token class-name">M</span> <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token class-name">M</span> <span class="token operator">></span> <span class="token class-name">N</span> <span class="token operator">||</span> <span class="token class-name">P</span> <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token class-name">P</span> <span class="token operator">></span> <span class="token class-name">N</span> <span class="token operator">||</span> <span class="token class-name">K</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token function">process1</span><span class="token punctuation">(</span><span class="token class-name">N</span><span class="token punctuation">,</span> <span class="token class-name">M</span><span class="token punctuation">,</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">P</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token comment">// 1 å½“å‰©ä¸‹0æ­¥ ï¼šåˆ°äº†aim è¿”å›1;æ²¡åˆ° è¿”å›0</span><span class="token comment">// 2 ä¸¤ä¸ªè¾¹ç•Œæ¡ä»¶</span><span class="token comment">// 3 è¿”å›é€’å½’ç»“æœ</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">process1</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> cur<span class="token punctuation">,</span> <span class="token keyword">int</span> rest<span class="token punctuation">,</span> <span class="token keyword">int</span> aim<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// 1 </span><span class="token keyword">if</span><span class="token punctuation">(</span>rest <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// base case</span><span class="token keyword">return</span> cur <span class="token operator">==</span> aim <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 2</span><span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">process1</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> rest <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> aim<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">==</span> n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">process1</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> rest <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> aim<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 3</span><span class="token keyword">return</span> <span class="token function">process1</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cur <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> rest <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> aim<span class="token punctuation">)</span> <span class="token operator">+</span>  <span class="token function">process1</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cur <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> rest <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> aim<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* * DP:ç›´æ¥ä½¿ç”¨çŸ©é˜µæ¥æ›¿ä»£é€’å½’çš„è¿‡ç¨‹ */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">way3</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token class-name">N</span><span class="token punctuation">,</span><span class="token keyword">int</span> <span class="token class-name">M</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">P</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">N</span> <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">||</span> <span class="token class-name">M</span> <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token class-name">M</span> <span class="token operator">></span> <span class="token class-name">N</span> <span class="token operator">||</span> <span class="token class-name">P</span> <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token class-name">P</span> <span class="token operator">></span> <span class="token class-name">N</span> <span class="token operator">||</span> <span class="token class-name">K</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">K</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 1</span>dp<span class="token punctuation">[</span><span class="token class-name">P</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//base case </span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> rest <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> rest <span class="token operator">&lt;=</span> <span class="token class-name">K</span><span class="token punctuation">;</span> rest<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 2</span>dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span>rest <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>dp<span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>rest <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 3</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> cur <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> cur <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> cur<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>dp<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">[</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>cur <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>rest <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>cur <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>rest <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token class-name">M</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">K</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">way1</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">way3</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="17-çº¸ç‰Œåšå¼ˆ">17 çº¸ç‰Œåšå¼ˆ</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/* çº¸ç‰Œåšå¼ˆé—®é¢˜ * ä¸¤ä¸ªä¼šé¢„åˆ¤çš„äºº ä»å·¦å³é€‰å¡ç‰‡ è¿”å›èƒœåˆ©çš„äººçš„åˆ†æ•° */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DP1_TwoSmartManPeekCard</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">win1</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token operator">==</span><span class="token keyword">null</span><span class="token operator">||</span>arr<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>arr<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">s</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>arr<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// f() åœ¨i~jèŒƒå›´ å…ˆæ‹¿</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span><span class="token keyword">int</span> i<span class="token punctuation">,</span><span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//çº¸ç‰Œè¢«èªæ˜äººå…ˆæ‹¿ï¼Œè·å¾—çš„åˆ†æ•°</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">==</span>j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//æ‹¿èµ°ä¸€å¼ ï¼ˆiæˆ–è€…jï¼‰åï¼Œèªæ˜äººæˆäº†åæ‹¿çš„äººï¼Œåœ¨ä¸¤ç§å†³ç­–ä¸­é€‰æœ€ä¼˜</span>        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token function">s</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">,</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span><span class="token function">s</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>i<span class="token punctuation">,</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// g() åœ¨i~jèŒƒå›´ åæ‹¿</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">s</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span><span class="token keyword">int</span> i<span class="token punctuation">,</span><span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//çº¸ç‰Œè¢«èªæ˜äººåæ‹¿ï¼Œè·å¾—çš„åˆ†æ•°</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">==</span>j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//å¯¹æ–¹æ‹¿èµ°ä¸€å¼ ï¼ˆiæˆ–è€…jï¼‰åï¼Œèªæ˜äººæˆäº†å…ˆæ‹¿çš„äººï¼Œå¯¹æ–¹ä¹Ÿæ˜¯èªæ˜äººï¼Œä¼šç•™ä¸‹æœ€å·®çš„æƒ…å†µ</span>        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">f</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>i<span class="token punctuation">,</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/*     * DP     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">win2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fmap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> gmap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//å…ˆå¤„ç†L == R ï¼ˆgmapåœ¨åˆå§‹åŒ–å°±æ˜¯0ï¼Œä¸ç”¨ç®¡</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>fmap<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//æŒ‰ç€å¯¹è§’çº¿æ¥ä¸€æ­¥æ­¥æ±‚ï¼ï¼ï¼</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> startCol <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> startCol <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> startCol<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> startCol<span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmap<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span> <span class="token operator">+</span> gmap<span class="token punctuation">[</span><span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span> <span class="token operator">+</span> gmap<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>gmap<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>fmap<span class="token punctuation">[</span><span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fmap<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">R</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">L</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token class-name">R</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>fmap<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> gmap<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h1>3 æ’åº</h1><h2 id="å¿«é€Ÿæ’åº">-å¿«é€Ÿæ’åº-</h2><h4 id="1-0-partition">1.0 partition</h4><blockquote><p>partition ä»¥arr[R] ä¸ºç•Œåˆ†ä¸º &lt;=arr[R]   arr[R]    &gt;arr[R] ä¸‰ä¸ªéƒ¨åˆ†</p><p>æ¯æ¬¡å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªä½ç½®çš„æ•°</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">></span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">==</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">L</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> lessEqual <span class="token operator">=</span> <span class="token class-name">L</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token class-name">L</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> arr<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token operator">++</span>lessEqual<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        index<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token operator">++</span>lessEqual<span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> lessEqual<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">quickSort1</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">process1</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">process1</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">>=</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// L..R partition arr[R]  [   &lt;=arr[R]   arr[R]    >arr[R]  ]</span>    <span class="token keyword">int</span> <span class="token class-name">M</span> <span class="token operator">=</span> <span class="token function">partition</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">process1</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token class-name">M</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">process1</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">M</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="2-0-è·å…°å›½æ——">2.0 è·å…°å›½æ——</h4><blockquote><p>åœ¨[l, r]ä¸Šä»¥arr[R]ä¸ºç•Œ å°†æ•°ç»„åˆ†ä¸º&lt; = &gt; ä¸‰ä¸ªéƒ¨åˆ†</p><p>æ¯æ¬¡å¯ä»¥æ‰¾åˆ°ä¸­é—´ç­‰ç­‰äºé‚£éƒ¨åˆ†çš„æ•°</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">netherlandsFlag</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">></span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">==</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token keyword">int</span> less <span class="token operator">=</span> <span class="token class-name">L</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token class-name">L</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> more <span class="token operator">=</span> <span class="token class-name">R</span><span class="token punctuation">;</span> <span class="token keyword">while</span><span class="token punctuation">(</span>index <span class="token operator">&lt;</span> more<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// !!! index &lt; more</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> arr<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 1 == æƒ…å†µ index++</span>      index<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 2 &lt; æƒ…å†µ äº¤æ¢indexå’Œlessçš„å³è¾¹ ç„¶åindex++</span>      <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token operator">++</span>less<span class="token punctuation">)</span><span class="token punctuation">;</span>      index<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span><span class="token punctuation">&#123;</span> <span class="token comment">// 3 > æƒ…å†µ äº¤æ¢indexå’Œmoreå·¦è¾¹  ä¸ç”¨index++ï¼</span>      <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token operator">--</span>more<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">,</span> more<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span>less<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> more<span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// ï¼ï¼ï¼</span><span class="token punctuation">&#125;</span></code></pre><h5 id="éšæœºå¿«æ’">éšæœºå¿«æ’</h5><blockquote><p>åœ¨è·å…°å›½æ——åŸºç¡€ä¸Š å°†æ•°ç»„çš„arr[R]è¿›è¡Œéšæœºäº¤æ¢ ç„¶åé€’å½’å°†æ•°ç»„æ‰€æœ‰éƒ¨åˆ†éƒ½æ’å®Œ</p><p>æœ€ç»ˆæœŸæœ›æ±‚å‡ºæ¥çš„å¤æ‚åº¦å°±æ˜¯O(logN*N)</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">quickSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token function">process</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">proces</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">></span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token comment">// éšæœºäº¤æ¢</span>  <span class="token keyword">int</span> random <span class="token operator">=</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">-</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">,</span> random<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> area <span class="token operator">=</span> <span class="token function">netherlandsFlag</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">process</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token punctuation">,</span> area<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">process</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> area<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="é€’å½’ç‰ˆæœ¬">é€’å½’ç‰ˆæœ¬</h5><blockquote><p>è¿­ä»£ï¼Œè‡ªå·±å‹æ ˆï¼ŒæŠŠä»»åŠ¡åšäº†ç„¶åå†æ”¾å‡ºæ¥</p><p>æœ€å¼€å§‹åšä¸€æ¬¡é€’å½’é‡Œåšçš„ ç„¶ååœ¨è¿­ä»£è¿‡ç¨‹ä¸­å†åšé€’å½’é‡Œåšçš„</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// å®šä¹‰ä»»åŠ¡</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Op</span><span class="token punctuation">&#123;</span>  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token class-name">L</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token class-name">R</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token class-name">Op</span><span class="token punctuation">(</span><span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">L</span> <span class="token operator">=</span> left<span class="token punctuation">;</span>    <span class="token class-name">R</span> <span class="token operator">=</span> right<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// å‹æ ˆï¼šå¼€å§‹æ˜¯ä»[0,N - 1]</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">quickSort2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>  <span class="token comment">// éšæœºäº¤æ¢ åˆ†ç•Œ</span>  <span class="token keyword">int</span> random <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token class-name">N</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> random<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> area <span class="token operator">=</span> <span class="token function">netherlandsFlag</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Op</span><span class="token punctuation">></span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Op</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> area<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Op</span><span class="token punctuation">(</span>area<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Op</span> op <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">op<span class="token punctuation">.</span></span>L</span> <span class="token operator">&lt;</span> <span class="token class-name"><span class="token namespace">op<span class="token punctuation">.</span></span>R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// éšæœºäº¤æ¢å’Œåˆ†ç•Œ</span>      random <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">op<span class="token punctuation">.</span></span>L</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">op<span class="token punctuation">.</span></span>R</span> <span class="token operator">-</span> <span class="token class-name"><span class="token namespace">op<span class="token punctuation">.</span></span>L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">op<span class="token punctuation">.</span></span>R</span><span class="token punctuation">,</span> random<span class="token punctuation">)</span><span class="token punctuation">;</span>      area <span class="token operator">=</span> <span class="token function">netherlandsFlag</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">op<span class="token punctuation">.</span></span>L</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">op<span class="token punctuation">.</span></span>R</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Op</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">op<span class="token punctuation">.</span></span>L</span><span class="token punctuation">,</span> area<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Op</span><span class="token punctuation">(</span>area<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">op<span class="token punctuation">.</span></span>R</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><h4 id="éšæœºå¿«æ’çš„æ—¶é—´å¤æ‚åº¦åˆ†æ">&lt;éšæœºå¿«æ’çš„æ—¶é—´å¤æ‚åº¦åˆ†æ&gt;</h4><p>1ï¼‰é€šè¿‡åˆ†æçŸ¥é“ï¼Œåˆ’åˆ†å€¼è¶Šé è¿‘ä¸­é—´ï¼Œæ€§èƒ½è¶Šå¥½ï¼›è¶Šé è¿‘ä¸¤è¾¹ï¼Œæ€§èƒ½è¶Šå·®<br>2ï¼‰éšæœºé€‰ä¸€ä¸ªæ•°è¿›è¡Œåˆ’åˆ†çš„ç›®çš„å°±æ˜¯è®©å¥½æƒ…å†µå’Œå·®æƒ…å†µéƒ½å˜æˆæ¦‚ç‡äº‹ä»¶<br>3ï¼‰æŠŠæ¯ä¸€ç§æƒ…å†µéƒ½åˆ—å‡ºæ¥ï¼Œä¼šæœ‰æ¯ç§æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ï¼Œä½†æ¦‚ç‡éƒ½æ˜¯1/N<br>4ï¼‰é‚£ä¹ˆæ‰€æœ‰æƒ…å†µéƒ½è€ƒè™‘ï¼Œæ—¶é—´å¤æ‚åº¦å°±æ˜¯è¿™ç§æ¦‚ç‡æ¨¡å‹ä¸‹çš„é•¿æœŸæœŸæœ›ï¼</p><p><em><em>æ—¶é—´å¤æ‚åº¦O(N</em> logN)ï¼Œé¢å¤–ç©ºé—´å¤æ‚åº¦O(logN)éƒ½æ˜¯è¿™ä¹ˆæ¥çš„ã€‚</em>*</p><h3 id="æ‰¾åˆ°æ•°ç»„ä¸­çš„ç¬¬kä¸ªæœ€å¤§å…ƒç´ ">!!! ==æ‰¾åˆ°æ•°ç»„ä¸­çš„ç¬¬kä¸ªæœ€å¤§å…ƒç´ ==</h3><p>âš ï¸æ˜¯kå¤§è¿˜æ˜¯kå°</p><h4 id="æ”¹å†™å¿«é€Ÿæ’åº">æ”¹å†™<a href="###-%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F-">å¿«é€Ÿæ’åº</a></h4><p><strong>æ—¶é—´å¤æ‚åº¦O(N)</strong></p><p>1 åŸå…ˆæ•°ç»„ä¸èƒ½æ”¹å˜ å¤åˆ¶ä¸€ä¸ªæ–°æ•°ç»„<br>2 éšæœºé€‰ä¸€ä¸ªæ•°æ¥åˆ†åŒº<br>3 åˆ†åŒº: è¿”å›ä¸¤ä¸ªè¾¹ç•Œ partition<br>4 å¦‚æœåˆ†åŒºä¸­é—´=éƒ¨åˆ†åŒ…å«k å°±æ‰¾åˆ°äº†<br>æ²¡æœ‰å°±æ ¹æ®kä¸è¾¹ç•Œå¤§å°æ¯”è¾ƒå¤§å°å»å…¶ä¸­ä¸€éƒ¨åˆ†å»æ‰¾</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findKthLargest</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token comment">// 1 åŸæ¥çš„æ•°ç»„ä¸å¥½æ›´æ”¹</span>       <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token function">copyArray</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> <span class="token function">process2</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// k å°çš„è¯å°± k - 1</span>   <span class="token punctuation">&#125;</span>      <span class="token comment">// 2 partitionåˆ†åŒºè¿”å›ä¸¤ä¸ªè¾¹ç•Œ åˆ†åŒºä¸­é—´ç­‰äºéƒ¨åˆ†åŒ…å«k å°±æ˜¯æ‰¾åˆ°äº†</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">process2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">==</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> arr<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">int</span> random <span class="token operator">=</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">-</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> area <span class="token operator">=</span> <span class="token function">partition</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>random<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">>=</span> area<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;=</span> area<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">&lt;</span> area<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// æ²¡æœ‰æ‰¾åˆ°å°±åˆ°å¦å¤–ä¸¤ä¸ªéƒ¨åˆ†ç»§ç»­æ‰¾</span>           <span class="token keyword">return</span> <span class="token function">process2</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token punctuation">,</span> area<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> <span class="token function">process2</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> area<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>   <span class="token punctuation">&#125;</span></code></pre><p>æ³¨æ„è¿™é‡Œçš„partition</p><blockquote><p>å› ä¸ºæ˜¯ä½¿ç”¨numæ¥åˆ†åŒº æ‰€ä»¥è¾¹ç•Œæ³¨æ„âš ï¸å¯¹æ¯”å¿«æ’ç”¨arr[R]æ¥åˆ†åŒº</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> less <span class="token operator">=</span> <span class="token class-name">L</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> more <span class="token operator">=</span> <span class="token class-name">R</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//ï¼ï¼</span>    <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token class-name">L</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>index <span class="token operator">&lt;</span> more<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">&lt;</span> num<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token operator">++</span>less<span class="token punctuation">)</span><span class="token punctuation">;</span>            index<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">></span> num<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token operator">--</span>more<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            index<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token comment">// å¿«æ’è¿˜éœ€è¦äº¤æ¢moreå’ŒR</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span>less <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> more <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">//ï¼ï¼ï¼ è¿”å›çš„å³è¾¹ç•Œæ˜¯more - 1 å¿«æ’æ˜¯more</span><span class="token punctuation">&#125;</span></code></pre><h4 id="BFPRT-é¢è¯•èŠ">BFPRT(é¢è¯•èŠ)</h4><p><strong>ä¿—ç§°&quot;ä¸­ä½æ•°ä¹‹ä¸­ä½æ•°ç®—æ³•&quot;ã€‚ä¾é ä¸€ç§ç²¾å¿ƒè®¾è®¡çš„ pivot é€‰å–æ–¹æ³•ï¼Œè¯¥ç®—æ³•ä»ç†è®ºä¸Šä¿è¯äº†æœ€åæƒ…å½¢ä¸‹çš„çº¿æ€§æ—¶é—´å¤æ‚åº¦ï¼Œæ‰“è´¥äº†å¹³å‡çº¿æ€§ã€æœ€å O(n^2) å¤æ‚åº¦çš„ä¼ ç»Ÿç®—æ³•</strong></p><blockquote><p>bfprtç®—æ³•</p><ul><li><p>æ”¹è¿›éƒ¨åˆ†å°±æ˜¯å°†å¿«æ’ä¸­éšæœºé€‰æ•°çš„è¿‡ç¨‹æ”¹ä¸ºäº”ä¸ªä¸€ç»„ åˆ†ç»„ç»„ä¸­æ’å¥½åº</p></li><li><p>æ‰¾å‡ºæ¯ä¸€æ®µçš„ä¸­ä½æ•° ç»„æˆm[]</p></li><li><p>æ‰¾åˆ°mçš„ä¸­ä½æ•°è¿”å›</p></li><li><p>medianOfMedian():<br>// 1 arr[Lâ€¦R] äº”ä¸ªæ•°ä¸€ç»„<br>// 2 æ¯ä¸ªå°ç»„å†…éƒ¨æ’åºï¼Œæ‰¾åˆ°ä¸­ä½æ•°é¢†å‡ºæ¥ï¼Œç»„æˆm<br>// 3 m[]ä¸­ï¼Œæ‰¾åˆ°ä¸­ä½æ•° åè°ƒbfprt</p></li></ul></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">==</span> <span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> arr<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// æ”¹è¿›éƒ¨åˆ†ï¼šéšæœºéƒ¨åˆ†æ”¹æˆä¸€ä¸ªæ–¹æ³•</span>    <span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token function">medianOfMedian</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">L</span> <span class="token punctuation">,</span><span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> range <span class="token operator">=</span> <span class="token function">partition</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">>=</span> range<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;=</span> range<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> range<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token function">process</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">L</span> <span class="token punctuation">,</span> range<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token function">process</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> range<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 1 arr[L...R] äº”ä¸ªæ•°ä¸€ç»„ </span><span class="token comment">// 2 æ¯ä¸ªå°ç»„å†…éƒ¨æ’åºï¼Œæ‰¾åˆ°ä¸­ä½æ•°é¢†å‡ºæ¥ï¼Œç»„æˆm </span><span class="token comment">// 3 m[]ä¸­ï¼Œæ‰¾åˆ°ä¸­ä½æ•° åè°ƒbfprt</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">medianOfMedian</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token class-name">R</span> <span class="token operator">-</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">// 1</span>    <span class="token keyword">int</span> offset <span class="token operator">=</span> size <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>size<span class="token operator">/</span><span class="token number">5</span> <span class="token operator">+</span> offset<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// 2</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> first <span class="token operator">=</span> <span class="token class-name">L</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">;</span>        m<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">sortAndMedian</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> first<span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">,</span> first <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 3</span>    <span class="token keyword">return</span> <span class="token function">process</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> m<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> m<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">sortAndMedian</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// SORT</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">R</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> <span class="token class-name">L</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> j<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// MEDIAN</span>    <span class="token keyword">return</span> arr<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">+</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="å †æ’åº">-å †æ’åº-</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/**     * 1 ä»ä¸‹è‡³ä¸Šè®©æ•´ä¸ªæ•°ç»„å˜ä¸ºå¤§æ ¹å † å¹¶å°†å †é¡¶(max)ä¸ç»“å°¾äº¤æ¢ å†å»é‡æ–°è°ƒæ•´     * 2 éå†è°ƒæ•´ ç›´åˆ°heapSize = 0     * @param arr     */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">heapSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">||</span> arr <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> heapSize <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token comment">// 1</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">heapify</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">--</span>heapSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 2</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>heapSize <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token function">heapify</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> heapSize<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">--</span>heapSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// ä»ä¸‹åˆ°ä¸Šå°†æ•´ä¸ªæ•°ç»„å˜ä¸ºå¤§æ ¹å †ç»“æ„</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">heapify</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> heapSize<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//å…ˆæ‰¾åˆ°å·¦å­©å­ å¦‚æœæœ‰å­©å­ å°†æœ€å¤§çš„æ‰¾åˆ°å¹¶ä¸æ ¹æ¯”è¾ƒ è°å¤§æ”¾åœ¨ä¸Šé¢</span>        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> heapSize<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> largest <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> heapSize <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">?</span> left <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">:</span> left<span class="token punctuation">;</span>            largest <span class="token operator">=</span> arr<span class="token punctuation">[</span>largest<span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">?</span> largest <span class="token operator">:</span> i<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>largest <span class="token operator">==</span> i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> largest<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            i <span class="token operator">=</span> largest<span class="token punctuation">;</span>            left <span class="token operator">=</span> <span class="token number">432</span> <span class="token operator">*</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> largest<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// TODO Auto-generated method stub</span>        <span class="token keyword">int</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>largest<span class="token punctuation">]</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>largest<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="å½’å¹¶æ’åº">-å½’å¹¶æ’åº-</h2><hr><p>1ï¼‰æ•´ä½“æ˜¯é€’å½’ï¼Œå·¦è¾¹æ’å¥½åº+å³è¾¹æ’å¥½åº+mergeè®©æ•´ä½“æœ‰åº<br>2ï¼‰è®©å…¶æ•´ä½“æœ‰åºçš„è¿‡ç¨‹é‡Œç”¨äº†æ’å¤–åºæ–¹æ³•<br>3ï¼‰åˆ©ç”¨masterå…¬å¼æ¥æ±‚è§£æ—¶é—´å¤æ‚åº¦<br>4ï¼‰å½“ç„¶å¯ä»¥ç”¨éé€’å½’å®ç°</p><hr><h3 id="é€’å½’ç‰ˆæœ¬-2">é€’å½’ç‰ˆæœ¬</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// é€’å½’æ–¹æ³•å®ç°</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">mergeSort1</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">process</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// arr[L...R]èŒƒå›´ä¸Šï¼Œå˜æˆæœ‰åºçš„</span><span class="token comment">// L...R    N    T(N) = 2*T(N/2) + O(N)  -></span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">==</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// base case</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">-</span> <span class="token class-name">L</span><span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">process</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token punctuation">,</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">process</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">merge</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token punctuation">,</span> mid<span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">M</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> help <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">R</span> <span class="token operator">-</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> p1 <span class="token operator">=</span> <span class="token class-name">L</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> p2 <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>p1 <span class="token operator">&lt;=</span> <span class="token class-name">M</span> <span class="token operator">&amp;&amp;</span> p2 <span class="token operator">&lt;=</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        help<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>p1<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> arr<span class="token punctuation">[</span>p2<span class="token punctuation">]</span> <span class="token operator">?</span> arr<span class="token punctuation">[</span>p1<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">:</span> arr<span class="token punctuation">[</span>p2<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è¦ä¹ˆp1è¶Šç•Œäº†ï¼Œè¦ä¹ˆp2è¶Šç•Œäº†</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>p1 <span class="token operator">&lt;=</span> <span class="token class-name">M</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        help<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>p1<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>p2 <span class="token operator">&lt;=</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        help<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>p2<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> help<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        arr<span class="token punctuation">[</span><span class="token class-name">L</span> <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> help<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="éé€’å½’ç‰ˆæœ¬">éé€’å½’ç‰ˆæœ¬</h3><p>æµç¨‹å°±åœ¨äºæŠ˜è…¾  æ­¥é•¿ è¿™ä¸ªæ¦‚å¿µ<br>æ­¥é•¿ = 1 å¼€å§‹, æ­¥é•¿çš„å˜åŒ–ä¸€å®šæ˜¯2çš„æŸæ¬¡æ–¹<br>æœ€åä¸€ç»„: å‡‘ä¸é½å·¦ç»„å°±ä¸ç®¡äº†, å³ç»„æœ‰å¤šå°‘ç®—å¤šå°‘<br>æ­¥é•¿ä¸€æ—¦è¶…è¿‡æ€»é•¿åº¦, è¯´æ˜æå®Œäº†, åœæ­¢å°±è¡Œäº†</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">mergeSort3</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">int</span> step <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>step <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> <span class="token class-name">M</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token class-name">L</span> <span class="token operator">>=</span> step<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">M</span> <span class="token operator">=</span> <span class="token class-name">L</span> <span class="token operator">+</span> step <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">M</span> <span class="token operator">=</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">M</span> <span class="token operator">==</span> <span class="token class-name">N</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">N</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token class-name">M</span> <span class="token operator">>=</span> step<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">R</span> <span class="token operator">=</span> <span class="token class-name">M</span> <span class="token operator">+</span> step<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">R</span> <span class="token operator">=</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token function">merge</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token class-name">M</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">==</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token class-name">R</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">></span> <span class="token class-name">N</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        step <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æ³¨æ„æœ€åä¸€ç»„å·¦ç»„: L + step - 1 å¯èƒ½è¶Šç•Œ</p><p>ä»å³å¾€å·¦åˆå¹¶å°±ä¸ç”¨è€ƒè™‘è¶Šç•Œé—®é¢˜äº†</p><pre class="language-none"><code class="language-none">if (step &gt; N &#x2F; 2) &#123;    break;&#125;</code></pre><p>æ­¤å¤„ä¸ç”¨ç­‰å·çš„åŸå› :<br>å¦‚æœ17ä¸ªæ•°, æœ€åä¸€ä¸ªè°ƒæ•´æ˜¯æ­¥é•¿ä¸º16çš„æ—¶å€™çš„è°ƒæ•´:<br>å‰16ä¸ªæ•°åšå·¦ç»„, åä¸€ä¸ªæ•°åšå³ç»„<br>è€Œ N/2 æ˜¯å‘ä¸‹å–æ•´çš„, 17/2 =8 , æ‰€ä»¥ mergeSize &gt;= N / 2,<br>åœ¨ç­‰äºçš„æ—¶å€™å°±åœæ­¢çš„è¯, æœ€åä¸€ä¸ªæ­¥é•¿æ˜¯8, ä¸ä¼šæœ‰æœ€åä¸€ä¸ªæ­¥é•¿ä¸º16çš„æ—¶å€™, å¯¼è‡´ä½ å‡ºé”™äº†</p><h3 id="ä¼˜åŒ–åçš„æœ€ç»ˆç‰ˆæœ¬">ä¼˜åŒ–åçš„æœ€ç»ˆç‰ˆæœ¬</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// éé€’å½’æ–¹æ³•å®ç°</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">mergeSort2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">int</span> mergeSize <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">// å½“å‰æœ‰åºçš„ï¼Œå·¦ç»„é•¿åº¦</span>    <span class="token comment">// ä¸€ç»„æ˜¯2å€çš„mergeSize</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>mergeSize <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// log N</span>        <span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment">// 0.... </span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// L...M  å·¦ç»„ï¼ˆmergeSizeï¼‰</span>            <span class="token keyword">int</span> <span class="token class-name">M</span> <span class="token operator">=</span> <span class="token class-name">L</span> <span class="token operator">+</span> mergeSize <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">M</span> <span class="token operator">>=</span> <span class="token class-name">N</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// å½“å‰ç»„å‡‘ä¸é½,åªæœ‰å·¦è¾¹, è‚¯å®šæœ‰åº</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token comment">// é¢„é˜²è¶Šç•Œé£é™©</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">//  L...M   M+1...R(mergeSize)</span>            <span class="token comment">// æœ‰å¯èƒ½æœ€åä¸€ç»„å³ç»„æ•°ç›®ä¸å¤Ÿ</span>            <span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token class-name">M</span> <span class="token operator">+</span> mergeSize<span class="token punctuation">,</span> <span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">merge</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token class-name">M</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token class-name">R</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// ä¸‹ä¸€æ¬¡å·¦ç»„</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// é˜²æ­¢æº¢å‡º, INT_MAX</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>mergeSize <span class="token operator">></span> <span class="token class-name">N</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        mergeSize <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="å¤æ‚åº¦">å¤æ‚åº¦</h4><p>ä¸€å…±æ‰§è¡Œæ¬¡æ•°  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">log_2N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>, merge ä¸€æ¬¡çš„å¤æ‚åº¦ O(N)<br>æ€»çš„å¤æ‚åº¦: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo>âˆ—</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N*logN)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></p><h2 id="å‰ç¼€æ ‘">-å‰ç¼€æ ‘-</h2><p>1ï¼‰å•ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œå­—ç¬¦ä»å‰åˆ°åçš„åŠ åˆ°ä¸€æ£µå¤šå‰æ ‘ä¸Š<br>2ï¼‰å­—ç¬¦æ”¾åœ¨è·¯ä¸Šï¼ŒèŠ‚ç‚¹ä¸Šæœ‰ä¸“å±çš„æ•°æ®é¡¹ï¼ˆå¸¸è§çš„æ˜¯passå’Œendå€¼ï¼‰<br>3ï¼‰æ‰€æœ‰æ ·æœ¬éƒ½è¿™æ ·æ·»åŠ ï¼Œå¦‚æœæ²¡æœ‰è·¯å°±æ–°å»ºï¼Œå¦‚æœ‰è·¯å°±å¤ç”¨<br>4ï¼‰æ²¿é€”èŠ‚ç‚¹çš„passå€¼å¢åŠ 1ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²ç»“æŸæ—¶æ¥-åˆ°çš„èŠ‚ç‚¹endå€¼å¢åŠ 1</p><p>å¯ä»¥å®Œæˆå‰ç¼€ç›¸å…³çš„æŸ¥è¯¢</p><h3 id="ä¾‹å­">ä¾‹å­</h3><p>è®¾è®¡ä¸€ç§ç»“æ„ã€‚ç”¨æˆ·å¯ä»¥ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup">1ï¼‰void insert(String str)            æ·»åŠ æŸä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥é‡å¤æ·»åŠ ï¼Œæ¯æ¬¡ç®—1ä¸ª2ï¼‰int search(String str)             æŸ¥è¯¢æŸä¸ªå­—ç¬¦ä¸²åœ¨ç»“æ„ä¸­è¿˜æœ‰å‡ ä¸ª3) void delete(String str)           åˆ æ‰æŸä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥é‡å¤åˆ é™¤ï¼Œæ¯æ¬¡ç®—1ä¸ª4ï¼‰int prefixNumber(String str)       æŸ¥è¯¢æœ‰å¤šå°‘ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯ä»¥stråšå‰ç¼€çš„</code></pre><h3 id="å‰ç¼€æ ‘çš„å®ç°æ–¹å¼">å‰ç¼€æ ‘çš„å®ç°æ–¹å¼</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> pass<span class="token punctuation">;</span><span class="token comment">// ç»è¿‡å‡ æ¬¡</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> end<span class="token punctuation">;</span><span class="token comment">// ä½œä¸ºendå‡ æ¬¡</span>        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nexts<span class="token punctuation">;</span> <span class="token comment">// åé¢çš„æ•°ç»„</span>        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            pass <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            end <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            nexts <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// ä¸€æ¡æœ€é•¿å°±26 æ‰€ä»¥è¿™ä¸ªæ–¹å¼ä¸é€‚åˆå¾ˆå¤šç±»å‹çš„èŠ‚ç‚¹</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Trie1</span><span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">Node</span> root<span class="token punctuation">;</span><span class="token comment">// å¤´èŠ‚ç‚¹</span>        <span class="token comment">// æ„é€ æ–¹æ³•</span>        <span class="token keyword">public</span> <span class="token class-name">Trie1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">/*         * insert()         */</span>        <span class="token comment">// 1 å…ˆæŠ“ä½å¤´èŠ‚ç‚¹  pass ++ </span>        <span class="token comment">// 2 ä»å·¦å‘å³éå†å­—ç¬¦ï¼Œnext[path]== nullåˆ™æ–°å»ºèŠ‚ç‚¹ pass++</span>        <span class="token comment">// 3 æœ€åend++</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">String</span> word<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>word <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str <span class="token operator">=</span> word<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Node</span> node <span class="token operator">=</span> root<span class="token punctuation">;</span>            node<span class="token punctuation">.</span>pass<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> path <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                path <span class="token operator">=</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>nexts<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    node<span class="token punctuation">.</span>nexts<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                node <span class="token operator">=</span> node<span class="token punctuation">.</span>nexts<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">;</span>                node<span class="token punctuation">.</span>pass<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            node<span class="token punctuation">.</span>end<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">/*         * search():æŸ¥æ‰¾wordå‡ºç°äº†å‡ æ¬¡         */</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token class-name">String</span> word<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>word <span class="token operator">==</span>  <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str <span class="token operator">=</span> word<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Node</span> node <span class="token operator">=</span> root<span class="token punctuation">;</span>            <span class="token keyword">int</span> path <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                path <span class="token operator">=</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>nexts<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                node <span class="token operator">=</span> node<span class="token punctuation">.</span>nexts<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> node<span class="token punctuation">.</span>end<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">/*         * delete() å†…å­˜æ³„æ¼é—®é¢˜jvmå¯ä»¥è§£å†³çš„         */</span>        <span class="token comment">// 1 å…ˆsearchæ˜¯å¦å­˜åœ¨</span>        <span class="token comment">// 2 éå†ç»è¿‡è¦æŠŠpass-- ä¸”å½“pass==0æ—¶å°†next[path]ç½®ç©ºï¼Œåé¢çš„èŠ‚ç‚¹JVMè‡ªåŠ¨ä¼šæ¸…é™¤</span>        <span class="token comment">// 3 end --</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> word<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str <span class="token operator">=</span> word<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Node</span> node <span class="token operator">=</span> root<span class="token punctuation">;</span>                node<span class="token punctuation">.</span>pass<span class="token operator">--</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> path <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    path <span class="token operator">=</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">--</span>node<span class="token punctuation">.</span>nexts<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">.</span>pass <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                        node<span class="token punctuation">.</span>nexts<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                        <span class="token keyword">return</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                    node <span class="token operator">=</span> node<span class="token punctuation">.</span>nexts<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                node<span class="token punctuation">.</span>end<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">/*         * prefixNode:æœ‰å‡ ä¸ªæ˜¯ä»¥preä½œä¸ºå‰ç¼€çš„å­—ç¬¦         *          */</span>        <span class="token comment">//å’Œsearchæ­¥éª¤å·®ä¸å¤š æœ€åreturnçš„æ˜¯pass</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">prefixNode</span><span class="token punctuation">(</span><span class="token class-name">String</span> pre<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">Node</span> node <span class="token operator">=</span> root<span class="token punctuation">;</span>            <span class="token keyword">int</span> path <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str <span class="token operator">=</span> pre<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                path <span class="token operator">=</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>nexts<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                node <span class="token operator">=</span> node<span class="token punctuation">.</span>nexts<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> node<span class="token punctuation">.</span>pass<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="ï¼ˆæ¡¶æ’åºï¼‰ä¸åŸºäºæ¯”è¾ƒçš„">-ï¼ˆæ¡¶æ’åºï¼‰ä¸åŸºäºæ¯”è¾ƒçš„-</h2><p>æ¡¶æ’åºæ€æƒ³ä¸‹çš„æ’åºï¼šè®¡æ•°æ’åº &amp; åŸºæ•°æ’åº</p><p>1)æ¡¶æ’åºæ€æƒ³ä¸‹çš„æ’åºéƒ½æ˜¯ä¸åŸºäºæ¯”è¾ƒçš„æ’åº</p><p>2)æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œé¢å¤–ç©ºé—´è´Ÿè½½åº¦O(M)</p><p>3)åº”ç”¨èŒƒå›´æœ‰é™ï¼Œéœ€è¦æ ·æœ¬çš„æ•°æ®çŠ¶å†µæ»¡è¶³æ¡¶çš„åˆ’åˆ†</p><h3 id="è®¡æ•°æ’åºå’ŒåŸºæ•°æ’åº">è®¡æ•°æ’åºå’ŒåŸºæ•°æ’åº</h3><h4 id="é¢˜ç›®3-è®¡æ•°æ’åº">é¢˜ç›®3: <a href="app://obsidian.md/%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F">è®¡æ•°æ’åº</a></h4><p>è®¡æ•°æ’åºè¦æ±‚ï¼Œæ ·æœ¬æ˜¯æ•´æ•°ï¼Œä¸”èŒƒå›´æ¯”è¾ƒçª„</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// only for 0~200 value</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">countSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        max <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bucket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>max <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        bucket<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> bucket<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>bucket<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">--</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            arr<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> j<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="é¢˜ç›®4-åŸºæ•°æ’åºä»£ç ">é¢˜ç›®4: <a href="app://obsidian.md/%E5%9F%BA%E6%95%B0%E6%8E%92%E5%BA%8F%E4%BB%A3%E7%A0%81">åŸºæ•°æ’åºä»£ç </a></h4><p>ä¸€èˆ¬æ¥è®²ï¼ŒåŸºæ•°æ’åºè¦æ±‚ï¼Œæ ·æœ¬æ˜¯10è¿›åˆ¶çš„æ­£æ•´æ•°</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// only for no-negative value</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">radixSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">radixSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token function">maxbits</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">maxbits</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        max <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>max <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        res<span class="token operator">++</span><span class="token punctuation">;</span>        max <span class="token operator">/=</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// arr[l..r]æ’åº  ,  digit</span><span class="token comment">// l..r    3 56 17 100    3</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">radixSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">L</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token keyword">int</span> digit<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">final</span> <span class="token keyword">int</span> radix <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment">// æœ‰å¤šå°‘ä¸ªæ•°å‡†å¤‡å¤šå°‘ä¸ªè¾…åŠ©ç©ºé—´</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> help <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">R</span> <span class="token operator">-</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> d <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> d <span class="token operator">&lt;=</span> digit<span class="token punctuation">;</span> d<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// æœ‰å¤šå°‘ä½å°±è¿›å‡ºå‡ æ¬¡</span>        <span class="token comment">// 10ä¸ªç©ºé—´</span>        <span class="token comment">// count[0] å½“å‰ä½(dä½)æ˜¯0çš„æ•°å­—æœ‰å¤šå°‘ä¸ª</span>        <span class="token comment">// count[1] å½“å‰ä½(dä½)æ˜¯(0å’Œ1)çš„æ•°å­—æœ‰å¤šå°‘ä¸ª</span>        <span class="token comment">// count[2] å½“å‰ä½(dä½)æ˜¯(0ã€1å’Œ2)çš„æ•°å­—æœ‰å¤šå°‘ä¸ª</span>        <span class="token comment">// count[i] å½“å‰ä½(dä½)æ˜¯(0~i)çš„æ•°å­—æœ‰å¤šå°‘ä¸ª</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> count <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>radix<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// count[0..9]</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token class-name">L</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">R</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// 103  1   3</span>            <span class="token comment">// 209  1   9</span>            j <span class="token operator">=</span> <span class="token function">getDigit</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>            count<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> radix<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            count<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> count<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> count<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token class-name">R</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token class-name">L</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            j <span class="token operator">=</span> <span class="token function">getDigit</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>            help<span class="token punctuation">[</span>count<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            count<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token class-name">L</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">R</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">,</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> help<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getDigit</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> d <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p><strong>1ï¼‰ä¸€èˆ¬æ¥è®²ï¼Œè®¡æ•°æ’åºè¦æ±‚ï¼Œæ ·æœ¬æ˜¯æ•´æ•°ï¼Œä¸”èŒƒå›´æ¯”è¾ƒçª„</strong></p><p><strong>2ï¼‰ä¸€èˆ¬æ¥è®²ï¼ŒåŸºæ•°æ’åºè¦æ±‚ï¼Œæ ·æœ¬æ˜¯10è¿›åˆ¶çš„æ­£æ•´æ•°</strong></p><p><strong>ä¸€æ—¦è¦æ±‚ç¨æœ‰å‡çº§ï¼Œæ”¹å†™ä»£ä»·å¢åŠ æ˜¯æ˜¾è€Œæ˜“è§çš„</strong></p><h2 id="æ’åºç®—æ³•çš„ç¨³å®šæ€§">æ’åºç®—æ³•çš„ç¨³å®šæ€§</h2><p>ç¨³å®šæ€§æ˜¯æŒ‡åŒæ ·å¤§å°çš„æ ·æœ¬å†æ’åºä¹‹åä¸ä¼šæ”¹å˜ç›¸å¯¹æ¬¡åº</p><p>å¯¹åŸºç¡€ç±»å‹æ¥è¯´ï¼Œç¨³å®šæ€§æ¯«æ— æ„ä¹‰</p><p>å¯¹éåŸºç¡€ç±»å‹æ¥è¯´ï¼Œç¨³å®šæ€§æœ‰é‡è¦æ„ä¹‰</p><p>æœ‰äº›æ’åºç®—æ³•å¯ä»¥å®ç°æˆç¨³å®šçš„ï¼Œè€Œæœ‰äº›æ’åºç®—æ³•æ— è®ºå¦‚ä½•éƒ½å®ç°ä¸æˆç¨³å®šçš„</p><h2 id="æ’åºç®—æ³•æ€»ç»“">æ’åºç®—æ³•æ€»ç»“</h2><table><thead><tr><th></th><th>æ—¶é—´å¤æ‚åº¦</th><th>é¢å¤–ç©ºé—´å¤æ‚åº¦</th><th>ç¨³å®šæ€§</th></tr></thead><tbody><tr><td>é€‰æ‹©æ’åº</td><td>O(N^2)</td><td>O(1)</td><td>æ— </td></tr><tr><td>å†’æ³¡æ’åº</td><td>O(N^2)</td><td>O(1)</td><td>æœ‰</td></tr><tr><td>æ’å…¥æ’åº</td><td>O(N^2)</td><td>O(1)</td><td>æœ‰</td></tr><tr><td>å½’å¹¶æ’åº</td><td>O(N* logN)</td><td>O(N)</td><td>æœ‰</td></tr><tr><td>éšæœºå¿«æ’</td><td>O(N* logN)</td><td>O(logN)</td><td>æ— </td></tr><tr><td>å †æ’åº</td><td>O(N* logN)</td><td>O(1)</td><td>æ— </td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td>è®¡æ•°æ’åº</td><td>O(N)</td><td>O(M)</td><td>æœ‰</td></tr><tr><td>åŸºæ•°æ’åº</td><td>O(N)</td><td>O(N)</td><td>æœ‰</td></tr></tbody></table><p>1ï¼‰ä¸åŸºäºæ¯”è¾ƒçš„æ’åºï¼Œå¯¹æ ·æœ¬æ•°æ®æœ‰ä¸¥æ ¼è¦æ±‚ï¼Œä¸æ˜“æ”¹å†™<br>2ï¼‰åŸºäºæ¯”è¾ƒçš„æ’åºï¼Œåªè¦è§„å®šå¥½ä¸¤ä¸ªæ ·æœ¬æ€ä¹ˆæ¯”å¤§å°å°±å¯ä»¥ç›´æ¥å¤ç”¨<br>3ï¼‰åŸºäºæ¯”è¾ƒçš„æ’åºï¼Œæ—¶é—´å¤æ‚åº¦çš„æé™æ˜¯O(Nâˆ—logN)<br>4ï¼‰æ—¶é—´å¤æ‚åº¦O(Nâˆ—logN)ã€é¢å¤–ç©ºé—´å¤æ‚åº¦ä½äºO(N)ã€ä¸”ç¨³å®šçš„åŸºäºæ¯”è¾ƒçš„æ’åºæ˜¯ä¸å­˜ åœ¨çš„ã€‚<br>5ï¼‰ä¸ºäº†ç»å¯¹çš„é€Ÿåº¦é€‰å¿«æ’ã€ä¸ºäº†çœç©ºé—´é€‰å †æ’ã€ä¸ºäº†ç¨³å®šæ€§é€‰å½’å¹¶</p><h1>4 æ»‘åŠ¨çª—å£</h1><p>æ»‘åŠ¨çª—å£æ›´æ–°ç»“æ„</p><h2 id="1-æ— é‡å¤æ•°ç»„çš„æœ€é•¿å­ä¸²">1 æ— é‡å¤æ•°ç»„çš„æœ€é•¿å­ä¸²</h2><blockquote><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² æ‰¾å‡ºé‡Œé¢æ²¡æœ‰é‡å¤çš„æœ€é•¿å­ä¸²</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// 1 ä½¿ç”¨çª—å£ å› ä¸ºä¸é‡å¤ å¯ä»¥ç”¨hashsetæ¥å­˜å‚¨ ç»“æœé›†æ˜¯char[] str</span><span class="token comment">// 2 éå†æ•°ç»„ L å‘å³</span><span class="token comment">// 2.1 Rå‘å³éå†:æ›´æ–°è¡¨</span><span class="token comment">// 2.2 æ›´æ–°maxã€æ›´æ–°set:åˆ é™¤å¤´</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">lengthOfLongestSubstring</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> s <span class="token operator">==</span>  <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 1</span><span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Character</span><span class="token punctuation">></span></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Character</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// 2</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// 2.1</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// !!! æ³¨æ„æ˜¯ä¸åŒ…å«</span>set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">R</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 2.2</span>ans <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> <span class="token class-name">R</span> <span class="token operator">-</span> <span class="token class-name">L</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>set<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">L</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="åŠ¨æ€è§„åˆ’ç‰ˆ">åŠ¨æ€è§„åˆ’ç‰ˆ</h3><p>ä½¿ç”¨256æ•°ç»„è¿›è¡Œå­˜å‚¨ å…ˆéƒ½åˆå§‹åŒ–ä¸º-1 ä¸‹æ ‡æ˜¯å­—ç¬¦ä¸²å€¼</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">lengthOfLongestSubstring2</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> s <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">256</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>map<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>map<span class="token punctuation">[</span>str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">int</span> pre <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>pre <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>i <span class="token operator">-</span> map<span class="token punctuation">[</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> pre <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ans <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> pre<span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">[</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="2-æœ€å°è¦†ç›–å­ä¸²">2 æœ€å°è¦†ç›–å­ä¸²</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code> ã€ä¸€ä¸ªå­—ç¬¦ä¸² <code>t</code> ã€‚è¿”å› <code>s</code> ä¸­æ¶µç›– <code>t</code> æ‰€æœ‰å­—ç¬¦çš„æœ€å°å­ä¸²ã€‚å¦‚æœ <code>s</code> ä¸­ä¸å­˜åœ¨æ¶µç›– <code>t</code> æ‰€æœ‰å­—ç¬¦çš„å­ä¸²ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸² <code>&quot;&quot;</code> ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java">  <span class="token comment">// 1 ä½¿ç”¨map[256]æ¥è®°å½• tä¸­éœ€è¦çš„æ¯ç§å­—ç¬¦çš„æ•°é‡;</span><span class="token comment">//allæ¥è®°å½•æ‰€æœ‰å­—ç¬¦å‰©ä¸‹æ²¡æ‰¾åˆ°çš„æ•°é‡ï¼›startè®°å½•æœ€å°å­ä¸²å¼€å¤´ä¸‹æ ‡</span><span class="token comment">// 2 éå†å­—ç¬¦é›†  L = 0 éå† R å‘å³ </span><span class="token comment">// 2.1 å³è¾¹ç•Œæ‰©å¤§ åŒæ—¶mapç›¸åº”-- å¹¶ä¸”æ²¡æœ‰å‡åˆ°0çš„è¯all--</span><span class="token comment">// 2.2 å½“allè¿˜å®Œä¹‹å è¦å°†å·¦è¾¹ç•Œç¼©å° </span><span class="token comment">// 2.2.1 mapå¯¹åº”çš„str[L] å·¦è¾¹ç•Œæœ‰å¯èƒ½æœ‰é‡å¤å€¼ å¯¹åº”mapå°äº0 è¦ç¼©åˆ°ä¸èƒ½ç¼©çš„åœ°æ–¹</span><span class="token comment">// 2.2.2 æ›´æ–°minLen å’Œå¼€å¤´start </span><span class="token comment">// 2.2.3 å·¦è¾¹ç•ŒL++ã€mapå¯¹åº”++ã€ all++</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">minLength2</span><span class="token punctuation">(</span><span class="token class-name">String</span> s1<span class="token punctuation">,</span> <span class="token class-name">String</span> s2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>s1 <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> s2 <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> s1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> s2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str1 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str2 <span class="token operator">=</span> s2<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 1</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// map[37] = 4  37  4æ¬¡</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> str2<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>map<span class="token punctuation">[</span>str2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> all <span class="token operator">=</span> str2<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// [L,R)  -> [0,0)</span><span class="token keyword">int</span> minLen <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span><span class="token keyword">int</span> start <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// è®°å½•æœ€å°å­ä¸²å¼€å¤´ä¸‹æ ‡ </span><span class="token comment">// 2</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">!=</span> str1<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 2.1</span>map<span class="token punctuation">[</span>str1<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">[</span>str1<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>all<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 2.2</span><span class="token keyword">if</span> <span class="token punctuation">(</span>all <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// è¿˜å®Œäº† å°±æ˜¯ä¸€ä¸ªè§£</span><span class="token comment">// 2.2.1</span><span class="token keyword">while</span> <span class="token punctuation">(</span>map<span class="token punctuation">[</span>str1<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// ï¼ï¼ï¼å·¦è¾¹ç•Œæœ‰å¯èƒ½æœ‰é‡å¤å€¼ å¯¹åº”çš„mapå°±æ˜¯å°äº0çš„ æˆ‘ä»¬è¦é¿å… æ‰€ä»¥ç¼©åˆ°æ²¡æœ‰é‡å¤çš„åœ°æ–¹æ‰å¼€å§‹è®°å½•minlen</span>map<span class="token punctuation">[</span>str1<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>         <span class="token class-name">L</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 2.2.2</span><span class="token keyword">if</span><span class="token punctuation">(</span>minLen <span class="token operator">></span> <span class="token class-name">R</span> <span class="token operator">-</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> minLen <span class="token operator">=</span> <span class="token class-name">R</span> <span class="token operator">-</span> <span class="token class-name">L</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>start <span class="token operator">=</span> <span class="token class-name">L</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 2.2.3</span>all<span class="token operator">++</span><span class="token punctuation">;</span>map<span class="token punctuation">[</span>str1<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">R</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> minLen <span class="token operator">==</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">?</span> <span class="token string">""</span> <span class="token operator">:</span> s1<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> start <span class="token operator">+</span> minLen<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p><strong>å°±æ˜¯allè¿˜å®Œä¹‹å‰r++å¾€å³å±•å¼€ all==0 å°±è¦l++ å¾€å·¦è¾¹ç¼©</strong></p><h2 id=""></h2><h2 id="3-æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼">3 æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼</h2><blockquote><p>å‡è®¾ä¸€ä¸ªå›ºå®šå¤§å°ä¸ºWçš„çª—å£;ä¾æ¬¡åˆ’è¿‡arr è¿”å›æ¯ä¸€æ¬¡æ»‘å‡ºçŠ¶å†µçš„æœ€å¤§å€¼</p></blockquote><p>å®šä¹‰ä¸€ä¸ªé˜Ÿåˆ—æ¥ä½œä¸ºçª—å£ï¼Œé‡Œé¢æ”¾çš„æ˜¯ä¸‹æ ‡</p><p>å¾ªç¯éå†æ•°ç»„ï¼š L Rè¾¹ç•Œ</p><p>\1) å½“çª—å£ä¸ä¸ºç©º&amp;çª—å£ç»“å°¾å°äºå½“å‰R ç»“å°¾å¼¹å‡ºï¼ˆwindowæ˜¯å•è°ƒé€’å‡ï¼‰<br>\2) æ·»åŠ arr[R]<br>\3) å½“é˜Ÿé¦–å…ƒç´ å·²ç»ä¸å†æ»‘åŠ¨çª—å£å†…ï¼Œå°†å…¶ä»é˜Ÿé¦–ç§»é™¤<br>\4) å½“çª—å£å³è¾¹ç•Œright+1å¤§äºç­‰äºçª—å£å¤§å°kæ—¶çª—å£å½¢æˆã€‚æ­¤æ—¶ï¼Œé˜Ÿé¦–å…ƒç´ å°±æ˜¯è¯¥çª—å£å†…çš„æœ€å¤§å€¼ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">if</span><span class="token punctuation">(</span> arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> w <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 1</span>    <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> window <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length <span class="token operator">-</span> w <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// 2</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token class-name">R</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token class-name">R</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">// 1)</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>window<span class="token punctuation">.</span><span class="token function">peekLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            window<span class="token punctuation">.</span><span class="token function">pollLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 2)</span>        window<span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token class-name">R</span> <span class="token operator">-</span> w <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment">// 3)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">peekFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token class-name">L</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            window<span class="token punctuation">.</span><span class="token function">pollFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 4)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">>=</span> w <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            res<span class="token punctuation">[</span><span class="token class-name">L</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>window<span class="token punctuation">.</span><span class="token function">peekFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span></code></pre><h2 id="4-æ»¡è¶³ç»å¯¹å€¼å·®è¾¾æ ‡çš„å­æ•°ç»„æ•°é‡">4 æ»¡è¶³ç»å¯¹å€¼å·®è¾¾æ ‡çš„å­æ•°ç»„æ•°é‡</h2><blockquote><p>ç»™å®šä¸€ä¸ªæ•´å‹æ•°ç»„arr, å’Œä¸€ä¸ªæ•´æ•°num æŸä¸€ä¸ªarrä¸­çš„å­æ•°ç»„sub å¦‚æœæƒ³è¾¾æ ‡å¿…é¡»æ»¡è¶³ subä¸­æœ€å¤§å€¼ - subä¸­å›½æœ€å°å€¼ &lt;= num è¿”å›arrä¸­è¾¾æ ‡å­æ•°ç»„çš„æ•°é‡</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SW_AllLessNumSubArray</span> <span class="token punctuation">&#123;</span><span class="token comment">// 1 éœ€è¦ä¸¤ä¸ªåŒç«¯é˜Ÿåˆ—æ¥å­˜å‚¨maxå’Œmin</span><span class="token comment">// 2 éå†æ•°ç»„æ¯ä¸€ä¸ªæ•°éƒ½åšä¸€æ¬¡Lå¼€å¤´</span><span class="token comment">// 2.1 å¾€å³Rç›´åˆ°å½“å‰çª—å£å†…å­æ•°ç»„ä¸è¾¾æ ‡</span><span class="token comment">// 2.1.1 æ»‘åŠ¨çª—å£æ¯”è¾ƒå¼¹å‡ºæœ«å°¾æ·»åŠ å½“å‰å€¼</span><span class="token comment">// 2.1.2 ä¸è¾¾æ ‡è¦break</span><span class="token comment">// 2.2 åˆ°è¾¾äº†ä¸è¾¾æ ‡çš„ä½ç½® å°±å¯ä»¥ç»“æŸå½“å‰Lå¼€å¤´çš„æ”¶é›† å¹¶å¼¹å‡ºå¼€å¤´</span><span class="token comment">// 2.2.1 æ›´æ–°res:å¯¹æ”¶é›†è¾¾æ ‡çš„æ•°ç»„ä¸ªæ•° è¿›è¡Œç´¯åŠ </span><span class="token comment">// 2.2.2 æ›´æ–°çª—å£:å¼¹å‡ºLå¼€å¤´</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">allLessNumSubArray</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> arr <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 1 </span><span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> qmin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> qmax <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// 2 </span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">L</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 2.1</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 2.1.1</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>qmax<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>qmax<span class="token punctuation">.</span><span class="token function">peekLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> arr<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>qmax<span class="token punctuation">.</span><span class="token function">pollLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>qmax<span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>qmin<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>qmin<span class="token punctuation">.</span><span class="token function">peekLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">>=</span> arr<span class="token punctuation">[</span><span class="token class-name">R</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>qmin<span class="token punctuation">.</span><span class="token function">pollLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>qmin<span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2.1.2</span><span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>qmax<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-</span> arr<span class="token punctuation">[</span>qmin<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">></span> num<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">R</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 2.2</span><span class="token comment">// 2.2.1</span>res <span class="token operator">+=</span> <span class="token class-name">R</span> <span class="token operator">-</span> <span class="token class-name">L</span><span class="token punctuation">;</span><span class="token comment">// 2.2.2</span><span class="token keyword">if</span> <span class="token punctuation">(</span>qmax<span class="token punctuation">.</span><span class="token function">peekFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">L</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>qmax<span class="token punctuation">.</span><span class="token function">pollFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>qmin<span class="token punctuation">.</span><span class="token function">peekFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">L</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>qmin<span class="token punctuation">.</span><span class="token function">pollFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">L</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h1>5 äºŒå‰æ ‘</h1><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TreeNode</span><span class="token punctuation">&#123;</span>  <span class="token keyword">private</span> <span class="token keyword">int</span> val<span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token class-name">TreeNode</span> left<span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token class-name">TreeNode</span> right<span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> val<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="1-äºŒå‰æ ‘å…ˆã€ä¸­ã€ååºéå†-DFS">1 äºŒå‰æ ‘å…ˆã€ä¸­ã€ååºéå†(DFS)</h2><h3 id="é€’å½’">é€’å½’</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token comment">// å‰</span>  <span class="token function">process</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ä¸­</span>  <span class="token function">process</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å</span><span class="token punctuation">&#125;</span></code></pre><h3 id="éé€’å½’-å‹æ ˆ">éé€’å½’(å‹æ ˆ)</h3><ul><li>å…ˆï¼š å…ˆå‹å³å†å‹å·¦ è¾“å‡ºâ€”ã€‹å¤´å·¦å³</li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">front</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span><span class="token punctuation">></span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">TreeNode</span> cur <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ‰“å° </span>    <span class="token function">sysout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// !!! åˆ¤ç©º</span>      stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// !!! åˆ¤ç©º</span>      stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><ul><li>åï¼šç”¨ä¸¤ä¸ªæ ˆ 1ï¼‰å…ˆå‹å·¦å†å‹å³ åŒæ—¶ç­”åº”å¼¹å‡ºæ”¹ä¸ºå‹å…¥å¦ä¸€ä¸ªæ ˆ è¾“å‡ºâ€”ã€‹ å¤´å³å·¦ 2ï¼‰æœ€åè¾“å‡ºçš„æ—¶å€™å°±æ˜¯å·¦å³å¤´  å¤´å·¦å³</li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span><span class="token punctuation">></span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span><span class="token punctuation">></span></span> stack2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">TreeNode</span> cur <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å‰åºæ‰“å°è¡Œä¸ºæ”¹æˆå‹æ ˆ</span>    stack2<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// å·¦</span>      stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// å³</span>      stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">// æ ˆ2 å¼¹å‡ºæ‰“å°</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>stack2<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">TreeNode</span> cur <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ‰“å°</span>    <span class="token function">sysout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><ul><li><p>ä¸­ï¼š 1ï¼‰å…ˆå°†å·¦è¾¹ç•Œå‹å…¥æ ˆ 2ï¼‰ç›´åˆ°nullï¼Œå¼¹å‡ºå¹¶æ‰“å°è¿›å…¥å³æ ‘</p><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220222171852618.png" alt="image-20220222171852618" style="zoom:50%;" /></li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span><span class="token punctuation">></span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// âš ï¸ä¸€å¼€å§‹ä¸ç”¨å¡head</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> head <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>        head <span class="token operator">=</span> head<span class="token punctuation">.</span>left<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span><span class="token punctuation">&#123;</span> <span class="token comment">// ç©ºäº† å°±å¼¹å‡ºæ‰“å° è¿›å…¥å³è¾¹</span>        head <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sysout</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>        head <span class="token operator">=</span> head<span class="token punctuation">.</span>right<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>äºŒå‰æœç´¢æ ‘ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ª</p><h2 id="2-äºŒå‰æ ‘çš„å±‚åºéå†-BFSï¼‰">2 äºŒå‰æ ‘çš„å±‚åºéå†(BFSï¼‰</h2><p>ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¯·ä½ è¿”å›å…¶æŒ‰ å±‚åºéå† å¾—åˆ°çš„èŠ‚ç‚¹å€¼ã€‚ ï¼ˆå³é€å±‚åœ°ï¼Œä»å·¦åˆ°å³è®¿é—®æ‰€æœ‰èŠ‚ç‚¹ï¼‰</p> <img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/25617_oW1zq2BOkhrT7ERQ.png" alt="image" style="zoom:50%;" /><h3 id="1-æ‰“å°æ¯ä¸€å±‚">1) æ‰“å°æ¯ä¸€å±‚</h3><blockquote><p>ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹rootï¼Œ è¿”å›å…¶èŠ‚ç‚¹å€¼çš„å±‚åºéå†ï¼Œå°±æ˜¯é€å±‚æ‰“å°</p></blockquote><p>1.å…ˆå®šä¹‰ç»“æœé›†res å’Œåˆ¤ç©ºæ“ä½œ</p><p>2.å®šä¹‰<strong>é˜Ÿåˆ—å®¹å™¨</strong>ï¼Œheadæ”¾å…¥é˜Ÿåˆ—ä¸­ã€‚</p><p>3.å®šä¹‰ç»“æœé›†å…ƒç´ list å³æ¯ä¸€å±‚ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">levelOrder</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 1</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 2</span><span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span><span class="token punctuation">></span></span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 3</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> size <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// size !!!</span><span class="token class-name">TreeNode</span> cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="äºŒå‰æ ‘çš„é”¯é½¿å½¢éå†">äºŒå‰æ ‘çš„é”¯é½¿å½¢éå†</h4><blockquote><p>å°±æ˜¯åœ¨å±‚åºéå†åŸºç¡€ä¸Š ä½¿ç”¨flagæ¥åˆ¤æ–­æ‰“å°çš„é¡ºåº âš ï¸list.add(0, root.val) å°±æ˜¯æ·»åŠ åˆ°å¼€å¤´</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">zigzagLevelOrder</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>         <span class="token keyword">return</span> res<span class="token punctuation">;</span>     <span class="token punctuation">&#125;</span>     <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span><span class="token punctuation">></span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>     <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span> queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>         <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">int</span> size <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>             root <span class="token operator">=</span>  queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//é€šè¿‡flagåˆ¤æ–­æ‰“å°é¡ºåº</span>                 list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                 list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ï¼ï¼ï¼</span>             <span class="token punctuation">&#125;</span>             <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                 queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">&#125;</span>             <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                 queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">&#125;</span>         <span class="token punctuation">&#125;</span>         flag <span class="token operator">=</span> <span class="token operator">!</span>flag<span class="token punctuation">;</span><span class="token comment">//è¿™é‡Œæ˜“é”™</span>         res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">&#125;</span>     <span class="token keyword">return</span> res<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></code></pre><h3 id="2ï¼‰è¿”å›èŠ‚ç‚¹æœ€å¤šçš„é‚£ä¸€å±‚">2ï¼‰è¿”å›èŠ‚ç‚¹æœ€å¤šçš„é‚£ä¸€å±‚</h3><ol><li>éœ€è¦curEndè®°å½•æ˜¯å¦å½“å‰åˆ°å±‚çš„ç»“å°¾ éœ€è¦nextEndè®°å½•ä¸‹ä¸€å±‚çš„æœ€åèŠ‚ç‚¹</li><li>å°†ä¸Šé¢å±‚åºéå†æ·»åŠ æ¯å±‚å…ƒç´ çš„è¿‡ç¨‹æ”¹ä¸ºè®°å½•å±‚çš„curSize</li><li>å½“cur == curEnd æ—¶ æ›´æ–° ans (maxWidth</li></ol><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">maxWidth</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> ans<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">int</span> curSize <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span></code></pre><h3 id="3ï¼‰äºŒå‰æ ‘çš„å³è§†å›¾">3ï¼‰äºŒå‰æ ‘çš„å³è§†å›¾</h3><blockquote><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„ <strong>æ ¹èŠ‚ç‚¹</strong> <code>root</code>ï¼Œæƒ³è±¡è‡ªå·±ç«™åœ¨å®ƒçš„å³ä¾§ï¼ŒæŒ‰ç…§ä»é¡¶éƒ¨åˆ°åº•éƒ¨çš„é¡ºåºï¼Œè¿”å›ä»å³ä¾§æ‰€èƒ½çœ‹åˆ°çš„èŠ‚ç‚¹å€¼ã€‚</p></blockquote><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220209205752144.png" alt="image-20220209205752144" style="zoom:50%;" /><p>éœ€è¦curEndè®°å½•æ˜¯å¦å½“å‰åˆ°å±‚çš„ç»“å°¾ éœ€è¦nextEndè®°å½•ä¸‹ä¸€å±‚çš„æœ€åèŠ‚ç‚¹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 1</span><span class="token class-name">TreeNode</span> curEnd <span class="token operator">=</span> head<span class="token punctuation">;</span><span class="token class-name">TreeNode</span> nextEnd <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span><span class="token punctuation">></span></span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">TreeNode</span> cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2 ç”¨nextEndè®°å½•æœ€åä¸€ä¸ªèŠ‚ç‚¹</span><span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>nextEnd <span class="token operator">=</span> cur<span class="token punctuation">.</span>left<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>nextEnd <span class="token operator">=</span> cur<span class="token punctuation">.</span>right<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 3 æ›´æ–°å½“å‰æœ€åçš„èŠ‚ç‚¹</span><span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">==</span> curEnd<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>curEnd <span class="token operator">=</span> nextEnd<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> res<span class="token punctuation">;</span></code></pre><h3 id="4ï¼‰æœ€å¤§å®½åº¦ï¼ˆå·¦å³èŠ‚ç‚¹çš„è·ç¦»ï¼‰">4ï¼‰æœ€å¤§å®½åº¦ï¼ˆå·¦å³èŠ‚ç‚¹çš„è·ç¦»ï¼‰</h3><blockquote><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è·å–è¿™ä¸ªæ ‘çš„æœ€å¤§å®½åº¦ã€‚æ ‘çš„å®½åº¦æ˜¯æ‰€æœ‰å±‚ä¸­çš„æœ€å¤§å®½åº¦ã€‚è¿™ä¸ªäºŒå‰æ ‘ä¸æ»¡äºŒå‰æ ‘ï¼ˆfull binary treeï¼‰ç»“æ„ç›¸åŒï¼Œä½†ä¸€äº›èŠ‚ç‚¹ä¸ºç©ºã€‚</p><p>æ¯ä¸€å±‚çš„å®½åº¦è¢«å®šä¹‰ä¸ºä¸¤ä¸ªç«¯ç‚¹ï¼ˆè¯¥å±‚æœ€å·¦å’Œæœ€å³çš„éç©ºèŠ‚ç‚¹ï¼Œä¸¤ç«¯ç‚¹é—´çš„nullèŠ‚ç‚¹ä¹Ÿè®¡å…¥é•¿åº¦ï¼‰ä¹‹é—´çš„é•¿åº¦ã€‚</p><pre class="language-none"><code class="language-none">é¿å…ä¸äº†è¦è®°å½•æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„index æ‰€ä»¥éœ€è¦ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ç»“æ„newnode&#123;â€‹treenode node;â€‹int level;â€‹int pos;&#125;</code></pre></blockquote><ol><li><p><strong>åœ¨å±‚åºéå†åŸºç¡€ä¸Š é˜Ÿåˆ—æ·»åŠ çš„æ˜¯ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ç»“æ„æ¥å¯¹æ¯ä¸ªèŠ‚ç‚¹çš„å±‚æ•°å’Œpositionè¿›è¡Œè®°å½•</strong> <strong>ä¸éœ€è¦</strong></p></li><li><p><strong>æ¯æ¬¡é˜Ÿåˆ—è¿›è¡Œä¸€æ¬¡pollå¾ªç¯éƒ½è¦æ£€æŸ¥ å¦‚æœcurlever != cur.level è¯´æ˜åˆ°äº†ä¸‹ä¸€å±‚ï¼Œå°†curlevelæ›´æ–°ï¼Œç”¨firstæŠ“ä½ç¬¬ä¸€ä¸ªçš„pos</strong></p></li><li><p><strong>æ›´æ–°max</strong></p></li></ol><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">widthOfBinaryTree</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">NewNode</span><span class="token punctuation">></span></span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">NewNode</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âš ï¸ä¸€å¼€å§‹æ·»åŠ çš„å°±æ˜¯newnode</span>        <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>         <span class="token keyword">int</span> curlevel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// è®°å½•å½“å‰å±‚</span>        <span class="token keyword">int</span> firstpos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// è®°å½•æ¯å±‚æœ€å‰</span>                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">NewNode</span> cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>node<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">NewNode</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>node<span class="token punctuation">.</span>left<span class="token punctuation">,</span> cur<span class="token punctuation">.</span>level <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> cur<span class="token punctuation">.</span>pos <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âš ï¸ç»“æ„ä¸èƒ½æé”™ å‚æ•°ä¸è¦ç©¿é”™</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>node<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                q<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">NewNode</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>node<span class="token punctuation">.</span>right<span class="token punctuation">,</span> cur<span class="token punctuation">.</span>level <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">,</span> cur<span class="token punctuation">.</span>pos <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âš ï¸</span>            <span class="token punctuation">&#125;</span>                        <span class="token keyword">if</span><span class="token punctuation">(</span>curlevel <span class="token operator">!=</span> cur<span class="token punctuation">.</span>level<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                curlevel <span class="token operator">=</span> cur<span class="token punctuation">.</span>level<span class="token punctuation">;</span>                firstpos <span class="token operator">=</span> cur<span class="token punctuation">.</span>pos<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            ans <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> cur<span class="token punctuation">.</span>pos <span class="token operator">-</span> firstpos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NewNode</span><span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">TreeNode</span> node<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> level<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> pos<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">NewNode</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> node<span class="token punctuation">,</span> <span class="token keyword">int</span> level<span class="token punctuation">,</span> <span class="token keyword">int</span> pos<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>node <span class="token operator">=</span> node<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> pos<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="3-äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ">3 äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</h2><blockquote><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚</p><p>ç™¾åº¦ç™¾ç§‘ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªèŠ‚ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªèŠ‚ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚â€</p></blockquote><p><code>Info&#123;boolean findP, boolean findQ, treenode ans&#125;</code></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">TreeNode</span> <span class="token function">lowestCommonAncestor</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">,</span> <span class="token class-name">TreeNode</span> p<span class="token punctuation">,</span> <span class="token class-name">TreeNode</span> q<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">return</span> <span class="token function">process</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token punctuation">.</span>ans<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Info</span><span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">boolean</span> findP<span class="token punctuation">;</span><span class="token comment">// æ˜¯å¦åŒ…å«p</span><span class="token keyword">public</span> <span class="token keyword">boolean</span> findQ<span class="token punctuation">;</span><span class="token comment">// æ˜¯å¦åŒ…å«q</span><span class="token keyword">public</span> <span class="token class-name">TreeNode</span> ans<span class="token punctuation">;</span><span class="token comment">// ä¿å­˜ç»“æœ</span><span class="token keyword">public</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> findP<span class="token punctuation">,</span> <span class="token keyword">boolean</span> findQ<span class="token punctuation">,</span> <span class="token class-name">TreeNode</span> ans<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>findP <span class="token operator">=</span> findP<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>findQ <span class="token operator">=</span> findQ<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>ans <span class="token operator">=</span> ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span> <span class="token class-name">Info</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">,</span> <span class="token class-name">TreeNode</span> p<span class="token punctuation">,</span> <span class="token class-name">TreeNode</span> q<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">Info</span> leftInfo <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> p<span class="token punctuation">,</span> q<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Info</span> rightInfo <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> p<span class="token punctuation">,</span> q<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// å¡«å……å½“å‰info</span><span class="token keyword">boolean</span> findP <span class="token operator">=</span> leftInfo<span class="token punctuation">.</span>findP <span class="token operator">||</span> rightInfo<span class="token punctuation">.</span>findP <span class="token operator">||</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> findQ <span class="token operator">=</span> leftInfo<span class="token punctuation">.</span>findQ <span class="token operator">||</span> rightInfo<span class="token punctuation">.</span>findQ <span class="token operator">||</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> q<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">TreeNode</span> ans <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>leftInfo<span class="token punctuation">.</span>ans <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// leftInfo.findP &amp;&amp; leftInfo.findQ</span>ans <span class="token operator">=</span> leftInfo<span class="token punctuation">.</span>ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>rightInfo<span class="token punctuation">.</span>ans <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// rightInfo.findP &amp;&amp; rightInfo.findQ</span>ans <span class="token operator">=</span> rightInfo<span class="token punctuation">.</span>ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>findP <span class="token operator">&amp;&amp;</span> findQ<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>ans <span class="token operator">=</span> root<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span>findP<span class="token punctuation">,</span> findQ<span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="4-äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œ">4 äºŒå‰æ ‘æœ€å¤§è·¯å¾„å’Œ</h2><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220211103231018.png" alt="image-20220211103231018" style="zoom: 67%;" /><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxPathSum</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token keyword">return</span> <span class="token function">process</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">.</span>maxSum<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Info</span><span class="token punctuation">&#123;</span> <span class="token comment">// z</span><span class="token keyword">public</span> <span class="token keyword">int</span> maxGain<span class="token punctuation">;</span><span class="token comment">//å¦‚æœè¿ä¸Šçˆ¶èŠ‚ç‚¹çš„è´¡çŒ®å€¼</span><span class="token keyword">public</span> <span class="token keyword">int</span> maxSum <span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token keyword">int</span> m1<span class="token punctuation">,</span> <span class="token keyword">int</span> m2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>maxGain <span class="token operator">=</span> m1<span class="token punctuation">;</span>maxSum <span class="token operator">=</span> m2<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Info</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âš ï¸ maxsumè¿”å›minvalue</span><span class="token punctuation">&#125;</span><span class="token class-name">Info</span> leftInfo <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Info</span> rightInfo <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> leftGain <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftInfo<span class="token punctuation">.</span>maxGain<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âš ï¸ >0</span><span class="token keyword">int</span> rightGain <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>rightInfo<span class="token punctuation">.</span>maxGain<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> maxGain <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftGain<span class="token punctuation">,</span>rightGain<span class="token punctuation">)</span> <span class="token operator">+</span> head<span class="token punctuation">.</span>val<span class="token punctuation">;</span><span class="token keyword">int</span> maxSum <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftInfo<span class="token punctuation">.</span>maxSum<span class="token punctuation">,</span>rightInfo<span class="token punctuation">.</span>maxSum<span class="token punctuation">)</span><span class="token punctuation">,</span>leftGain <span class="token operator">+</span> rightGain <span class="token operator">+</span> head<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span>maxGain<span class="token punctuation">,</span> maxSum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="5-å¯¹ç§°äºŒå‰æ ‘">5 å¯¹ç§°äºŒå‰æ ‘</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ <code>root</code> ï¼Œ æ£€æŸ¥å®ƒæ˜¯å¦è½´å¯¹ç§°ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isSymmetric</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token function">isMirror</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¤åˆ¶ä¸€ä¸ªè‡ªå·±çš„æ ‘</span>      <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isMirror</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> h1<span class="token punctuation">,</span> <span class="token class-name">TreeNode</span> h2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>h1 <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> h2 <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">//ä¸¤ä¸ªæ ‘éƒ½æ˜¯ç©º</span>          <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>h1 <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> h2 <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// ä¸¤ä¸ªæ ‘éƒ½ä¸æ˜¯ç©º å°±è¿”å›ï¼š1.å½“å‰èŠ‚ç‚¹å€¼è¦ç›¸ç­‰ 2.å·¦è¾¹å’Œå³è¾¹ä¹Ÿæ˜¯mirror</span>          <span class="token keyword">return</span> <span class="token punctuation">(</span>h1<span class="token punctuation">.</span>val <span class="token operator">==</span> h2<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isMirror</span><span class="token punctuation">(</span>h1<span class="token punctuation">.</span>left<span class="token punctuation">,</span> h2<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isMirror</span><span class="token punctuation">(</span>h1<span class="token punctuation">.</span>right<span class="token punctuation">,</span> h2<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// </span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//ä¸€ä¸ªæ˜¯ç©ºä¸€ä¸ªä¸æ˜¯ç©º</span>  <span class="token punctuation">&#125;</span></code></pre><h2 id="6-ä»å‰åºå’Œä¸­åºåºåˆ—æ„é€ äºŒå‰æ ‘">6 ä»å‰åºå’Œä¸­åºåºåˆ—æ„é€ äºŒå‰æ ‘</h2><blockquote><p>ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ preorder å’Œ inorder ï¼Œå…¶ä¸­ preorder æ˜¯äºŒå‰æ ‘çš„å…ˆåºéå†ï¼Œ inorder æ˜¯åŒä¸€æ£µæ ‘çš„ä¸­åºéå†ï¼Œè¯·æ„é€ äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * åˆ©ç”¨äºŒå‰æ ‘å‰åº å¤´å·¦å³ æ‰¾åˆ°å¤´ å†åˆ©ç”¨ä¸­åºå·¦å³å¤´è¿›è¡Œå·¦å³æ ‘åˆ†ç¦» */</span>    <span class="token keyword">public</span> <span class="token class-name">TreeNode</span> <span class="token function">buildTree</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> pre<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> in<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>pre <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> in <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> pre<span class="token punctuation">.</span>length <span class="token operator">!=</span> in<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> pre<span class="token punctuation">.</span>length<span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> in<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> in<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token class-name">TreeNode</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> pre<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token constant">L1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token constant">R1</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> in<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token constant">L2</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token constant">R2</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">// è¶Šç•Œæƒ…å†µ</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">L1</span> <span class="token operator">></span> <span class="token constant">R1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token comment">// åˆ©ç”¨å‰åºæ‰¾åˆ°å¤´</span>        <span class="token class-name">TreeNode</span> head <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>pre<span class="token punctuation">[</span><span class="token constant">L1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">L1</span> <span class="token operator">==</span> <span class="token constant">R1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> head<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>       <span class="token comment">//ä¸­åºå¯¹åº”æ‰¾åˆ°å¤´çš„ä¸‹æ ‡find</span>        <span class="token keyword">int</span> find <span class="token operator">=</span> <span class="token constant">L2</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>in<span class="token punctuation">[</span>find<span class="token punctuation">]</span> <span class="token operator">!=</span> pre<span class="token punctuation">[</span><span class="token constant">L1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            find<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token comment">// ï¼ˆfind - L2)å°±æ˜¯å·¦æ ‘çš„é•¿åº¦</span>        head<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> <span class="token constant">L1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">L1</span> <span class="token operator">+</span> <span class="token punctuation">(</span>find <span class="token operator">-</span> <span class="token constant">L2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> in<span class="token punctuation">,</span> <span class="token constant">L2</span><span class="token punctuation">,</span> find <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        head<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span>  <span class="token constant">L1</span> <span class="token operator">+</span> <span class="token punctuation">(</span>find <span class="token operator">-</span> <span class="token constant">L2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">R1</span><span class="token punctuation">,</span> in<span class="token punctuation">,</span> find <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">R2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> head<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="7-éªŒè¯äºŒå‰æœç´¢æ ‘">7 éªŒè¯äºŒå‰æœç´¢æ ‘</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚</p><p>æœ‰æ•ˆ äºŒå‰æœç´¢æ ‘å®šä¹‰å¦‚ä¸‹ï¼š</p><p>èŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å« å°äº å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚<br>èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å« å¤§äº å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚<br>æ‰€æœ‰å·¦å­æ ‘å’Œå³å­æ ‘è‡ªèº«å¿…é¡»ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** ç”¨ä¸­åºéå†*/</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isValidBST</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span><span class="token punctuation">></span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">double</span> last <span class="token operator">=</span> <span class="token operator">-</span><span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span><span class="token comment">// âš ï¸</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> head <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// 1 </span><span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>head <span class="token operator">=</span> head<span class="token punctuation">.</span>left<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token comment">// 2</span>head <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>val <span class="token operator">&lt;=</span> last<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>last <span class="token operator">=</span> head<span class="token punctuation">.</span>val<span class="token punctuation">;</span>head <span class="token operator">=</span> head<span class="token punctuation">.</span>right<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="8-å¹³è¡¡äºŒå‰æ ‘">8 å¹³è¡¡äºŒå‰æ ‘</h2><p><strong>ä½¿ç”¨é€’å½’å¥—è·¯</strong></p><pre class="language-none"><code class="language-none">INFO &#123;é«˜åº¦ï¼›æ˜¯å¦æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼›&#125;</code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isBalanced</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token function">process</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">.</span>isBt<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">//éœ€è¦çš„ä¿¡æ¯</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Info</span><span class="token punctuation">&#123;</span>      <span class="token keyword">private</span> <span class="token keyword">int</span> height<span class="token punctuation">;</span>      <span class="token keyword">private</span> <span class="token keyword">boolean</span> isBt<span class="token punctuation">;</span>      <span class="token keyword">public</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token keyword">int</span> h<span class="token punctuation">,</span> <span class="token keyword">boolean</span> ib<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>          height <span class="token operator">=</span> h<span class="token punctuation">;</span>          isBt <span class="token operator">=</span> ib<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">//æ‰¾ä¿¡æ¯çš„è¿‡ç¨‹</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Info</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>          <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token class-name">Info</span> leftInfo <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token class-name">Info</span> rightInfo <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//è§£å†³å½“å‰çš„Infoçš„æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯æ‰€æœ‰é€’å½’éƒ½ä¼šç”¨åˆ°çš„æ–¹æ³•ï¼‰</span>      <span class="token keyword">int</span> height <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftInfo<span class="token punctuation">.</span>height<span class="token punctuation">,</span> rightInfo<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// âš ï¸ </span>      <span class="token keyword">boolean</span> isBalanced <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>leftInfo<span class="token punctuation">.</span>isBt <span class="token operator">&amp;&amp;</span> rightInfo<span class="token punctuation">.</span>isBt <span class="token operator">&amp;&amp;</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>leftInfo<span class="token punctuation">.</span>height <span class="token operator">-</span> rightInfo<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>          isBalanced <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span>height<span class="token punctuation">,</span> isBalanced<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span></code></pre><h2 id="9-äºŒå‰æ ‘çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–">9 äºŒå‰æ ‘çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–</h2><blockquote><p>æ€è·¯</p><p>åºåˆ—åŒ–ï¼š å‡†å¤‡ä¸€ä¸ªstringçš„é˜Ÿåˆ— ç„¶åæŒ‰ç…§å…ˆåºé¡ºåºå°†ç»“ç‚¹è½¬ä¸ºStringç±»å‹ç„¶ååŠ å…¥é˜Ÿåˆ—ï¼Œå·¦è¾¹å’Œå³è¾¹ç»“ç‚¹æŒ‰ç…§é¡ºåºé€’å½’æ‰§è¡Œè¯¥æ–¹æ³•</p><p>ååºåˆ—åŒ–ï¼š å°†è¦è½¬åŒ–ä¸ºäºŒå‰æ ‘çš„é˜Ÿåˆ—ä¼ å…¥ï¼Œç„¶åå¼¹å‡ºç»“ç‚¹ä¸ºheadï¼ˆæ³¨æ„è½¬æ¢å›ä¸ºIntç±»å‹ï¼‰ï¼Œheadå·¦è¾¹é€’å½’æ‰§è¡Œprebï¼ˆprelistï¼‰ï¼Œå³è¾¹é€’å½’æ‰§è¡Œprebï¼ˆprelistï¼‰</p><p>é”™è¯¯</p><p>åˆ¤æ–­nullå€¼æ³¨æ„åˆ¤æ–­å“ˆ ç‰¹åˆ«æ˜¯é€’å½’é‡Œé¢ å°±ç®—æ˜¯æ–¹æ³•å‰é¢åˆ¤æ–­äº† å½“æ—¶ä¸ä»£è¡¨é€’å½’ä»¥åä¸ä¼šå†æ¬¡å‡ºç°ï¼Œæ‰€ä»¥æ–¹æ³•å†…è¿˜è¦å†åˆ¤æ–­ä¸€æ¬¡</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/* * äºŒå‰æ ‘çš„å‰ä¸­ååºåˆ—åŒ– */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BT_09_preSerial</span> <span class="token punctuation">&#123;</span><span class="token comment">/** * åºåˆ—åŒ– ä½¿ç”¨é˜Ÿåˆ— * @param head * @return */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">preSerial</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pre</span><span class="token punctuation">(</span>head<span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">pre</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">,</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> ans<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>ans<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç”¨æ¥è§„å®šç”¨ä»€ä¹ˆæ¥å ä½</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>ans<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pre</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pre</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * ååºåˆ—åŒ– * @param head * @return */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">TreeNode</span> <span class="token function">buildByPreQueue</span><span class="token punctuation">(</span><span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> prelist<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>prelist <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> prelist<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token function">preb</span><span class="token punctuation">(</span>prelist<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">TreeNode</span> <span class="token function">preb</span><span class="token punctuation">(</span><span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> prelist<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">String</span> value <span class="token operator">=</span> prelist<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">TreeNode</span> head <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>head<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">preb</span><span class="token punctuation">(</span>prelist<span class="token punctuation">)</span><span class="token punctuation">;</span>head<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">preb</span><span class="token punctuation">(</span>prelist<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> head<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="10-äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦">10 äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</h2><blockquote><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å¤§æ·±åº¦ã€‚</p><p>äºŒå‰æ ‘çš„æ·±åº¦ä¸ºæ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚</p><p>è¯´æ˜: å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p><p>ç¤ºä¾‹ï¼š<br>ç»™å®šäºŒå‰æ ‘ [3,9,20,null,null,15,7]ï¼Œ</p><p>3</p><p>/ <br>9  20<br>/  <br>15   7</p><p>è¿”å›å®ƒçš„æœ€å¤§æ·±åº¦ 3 ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxDepth</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token function">findDepth</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Info</span><span class="token punctuation">&#123;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> height<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token keyword">int</span> h<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            height <span class="token operator">=</span> h<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Info</span> <span class="token function">findDepth</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">Info</span> leftInfo <span class="token operator">=</span> <span class="token function">findDepth</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Info</span> rightInfo <span class="token operator">=</span> <span class="token function">findDepth</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> height <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftInfo<span class="token punctuation">.</span>height<span class="token punctuation">,</span> rightInfo<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="11-æœ€å¤§ç›´å¾„">11 æœ€å¤§ç›´å¾„</h2><blockquote><p>ç»™å®šä¸€æ£µäºŒå‰æ ‘ï¼Œä½ éœ€è¦è®¡ç®—å®ƒçš„ç›´å¾„é•¿åº¦ã€‚ä¸€æ£µäºŒå‰æ ‘çš„ç›´å¾„é•¿åº¦æ˜¯ä»»æ„ä¸¤ä¸ªç»“ç‚¹è·¯å¾„é•¿åº¦ä¸­çš„æœ€å¤§å€¼ã€‚è¿™æ¡è·¯å¾„å¯èƒ½ç©¿è¿‡ä¹Ÿå¯èƒ½ä¸ç©¿è¿‡æ ¹ç»“ç‚¹ã€‚</p><p>ç¤ºä¾‹ :<br>ç»™å®šäºŒå‰æ ‘</p><pre><code>   1  / \ 2   3/ \     </code></pre><p>4   5</p><p>è¿”å› 3, å®ƒçš„é•¿åº¦æ˜¯è·¯å¾„ [4,2,1,3] æˆ–è€… [5,2,1,3]ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/* * äºŒå‰æ ‘æœ€å¤§ç›´å¾„ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BT_05_ZhiJing</span> <span class="token punctuation">&#123;</span><span class="token keyword">static</span> <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">process</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> lM <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> rM <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>ans <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>lM <span class="token operator">+</span> rM <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>lM<span class="token punctuation">,</span> rM<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * é€’å½’å¥—è·¯ * @param root * @return */</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">max2</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token function">process2</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">.</span>max<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Info</span><span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token class-name">Integer</span> height<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">Integer</span> max<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> h<span class="token punctuation">,</span> <span class="token class-name">Integer</span> m<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>height <span class="token operator">=</span> h<span class="token punctuation">;</span>max <span class="token operator">=</span> m<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span> <span class="token class-name">Info</span> <span class="token function">process2</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">Info</span> leftInfo <span class="token operator">=</span> <span class="token function">process2</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Info</span> rightInfo <span class="token operator">=</span> <span class="token function">process2</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> height <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftInfo<span class="token punctuation">.</span>height<span class="token punctuation">,</span> rightInfo<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftInfo<span class="token punctuation">.</span>max<span class="token punctuation">,</span> rightInfo<span class="token punctuation">.</span>max<span class="token punctuation">)</span><span class="token punctuation">,</span>leftInfo<span class="token punctuation">.</span>height <span class="token operator">+</span> rightInfo<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span>height<span class="token punctuation">,</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="12-è·¯å¾„æ€»å’Œ">12 è·¯å¾„æ€»å’Œ</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * è·¯å¾„æ€»å’Œ â…  * @return è¦æ±‚è¿”å›æ˜¯å¦å­˜åœ¨æ€»å’Œä¸ºtargetçš„ä»æ ¹åˆ°èŠ‚ç‚¹çš„è·¯å¾„ */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> isSum<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasPathSum</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">,</span> <span class="token keyword">int</span> targetSum<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>isSum <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token function">process</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> targetSum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> isSum<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">,</span> <span class="token keyword">int</span> preSum<span class="token punctuation">,</span> <span class="token keyword">int</span> sum<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// æ˜¯å¶å­èŠ‚ç‚¹</span><span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> head<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>preSum <span class="token operator">+</span> head<span class="token punctuation">.</span>val <span class="token operator">==</span> sum<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>isSum <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// ä¸æ˜¯å¶å­èŠ‚ç‚¹</span>preSum <span class="token operator">+=</span> head<span class="token punctuation">.</span>val<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">process</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">,</span> preSum<span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">process</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">,</span> preSum<span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * è·¯å¾„æ€»å’Œâ…¡ * @return è¦æ±‚è¿”å›æ‰€æœ‰æ»¡è¶³targetçš„è·¯å¾„ */</span><span class="token comment">// 1 </span><span class="token comment">// 2 æ³¨æ„ç°åœºè¦æ¢å¤ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªpathæ¥å­˜è·¯ å¦‚æœæ²¡æœ‰æ¸…ç©ºï¼Œåé¢æ ¹æœ¬è£…ä¸ä¸‹</span><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">pathSum</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">,</span> <span class="token keyword">int</span> targetSum<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">process</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> targetSum<span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> head<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> path<span class="token punctuation">,</span> <span class="token keyword">int</span> preSum<span class="token punctuation">,</span> <span class="token keyword">int</span> sum<span class="token punctuation">,</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> ans<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// å¶å­èŠ‚ç‚¹</span><span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> head<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>val <span class="token operator">+</span> preSum <span class="token operator">==</span> sum<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>ans<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ä¼ é€’æ˜¯å¼•ç”¨ä¸èƒ½ç›´æ¥ä¼ path</span>path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>preSum <span class="token operator">+=</span> head<span class="token punctuation">.</span>val<span class="token punctuation">;</span>path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ä¸æ˜¯å¶å­èŠ‚ç‚¹</span><span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">process</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>left<span class="token punctuation">,</span> path<span class="token punctuation">,</span> preSum<span class="token punctuation">,</span> sum<span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">process</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>right<span class="token punctuation">,</span> path<span class="token punctuation">,</span> preSum<span class="token punctuation">,</span> sum<span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// æ¢å¤ç°åœº</span>path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="13-ç¿»è½¬äºŒå‰æ ‘">13 ç¿»è½¬äºŒå‰æ ‘</h2><blockquote><p>ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ <code>root</code> ï¼Œç¿»è½¬è¿™æ£µäºŒå‰æ ‘ï¼Œå¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java">ç¿»è½¬äºŒå‰æ ‘ <span class="token comment">// æœ‰ç‚¹åƒæ•°ç»„swap</span>    <span class="token keyword">public</span> <span class="token class-name">TreeNode</span> <span class="token function">invertTree</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">TreeNode</span> left <span class="token operator">=</span> root<span class="token punctuation">.</span>left<span class="token punctuation">;</span>        root<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">invertTree</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>        root<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">invertTree</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> root<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><h1>6 æ ˆ</h1><h2 id="1-æœ‰æ•ˆæ‹¬å·">1 æœ‰æ•ˆæ‹¬å·</h2><blockquote><p>ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ <code>'('</code>ï¼Œ<code>')'</code>ï¼Œ<code>'&#123;'</code>ï¼Œ<code>'&#125;'</code>ï¼Œ<code>'['</code>ï¼Œ<code>']'</code> çš„å­—ç¬¦ä¸² <code>s</code> ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚</p></blockquote><ol><li>éå†æ‰€æœ‰å·¦è¾¹çš„æ‹¬å·å˜æˆå¯¹åº”çš„å³æ‹¬å·å‹å…¥æ ˆ</li><li>é‡åˆ°çš„å³è¾¹çš„æ‹¬å·<ol><li>å¦‚æœstackæ˜¯ç©ºçš„ï¼Œåˆ™false</li><li>å¼¹å‡ºæ ˆé¡¶æ¯”è¾ƒä¸ç›¸ç­‰ false</li></ol></li><li>æœ€åstack å¿…é¡»æ˜¯ç©ºçš„æ‰èƒ½æ»¡è¶³</li></ol><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Character</span><span class="token punctuation">></span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'('</span> <span class="token operator">||</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'['</span> <span class="token operator">||</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'&#123;'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span><span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                 <span class="token keyword">char</span> cur <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">')'</span> <span class="token operator">&amp;&amp;</span> cur <span class="token operator">!=</span> <span class="token char">'('</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span>                 <span class="token operator">==</span> <span class="token char">'&#125;'</span> <span class="token operator">&amp;&amp;</span> cur <span class="token operator">!=</span> <span class="token char">'&#123;'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">']'</span> <span class="token operator">&amp;&amp;</span> cur <span class="token operator">!=</span> <span class="token char">'['</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="2-ç”¨æ ˆå®ç°é˜Ÿåˆ—">2 ç”¨æ ˆå®ç°é˜Ÿåˆ—</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MyQueue</span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> sPop<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> sPush<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">MyQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        sPop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sPush <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        sPush<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sPop<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>sPush<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                sPop<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>sPush<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> sPop<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sPop<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>sPush<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                sPop<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>sPush<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> sPop<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sPop<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> sPush<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="3-æœ€å°æ ˆ">3 æœ€å°æ ˆ</h2><blockquote><p>è®¾è®¡ä¸€ä¸ªæ”¯æŒ <code>push</code> ï¼Œ<code>pop</code> ï¼Œ<code>top</code> æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚</p><ul><li><code>push(x)</code> â€”â€” å°†å…ƒç´  x æ¨å…¥æ ˆä¸­ã€‚</li><li><code>pop()</code> â€”â€” åˆ é™¤æ ˆé¡¶çš„å…ƒç´ ã€‚</li><li><code>top()</code> â€”â€” è·å–æ ˆé¡¶å…ƒç´ ã€‚</li><li><code>getMin()</code> â€”â€” æ£€ç´¢æ ˆä¸­çš„æœ€å°å…ƒç´ ã€‚</li></ul></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MinStack</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> data<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> min<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">MinStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>min <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>min<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>min<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>min<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>min<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>min<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getMin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>min<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="4-ä¸¤ä¸ªé˜Ÿåˆ—å®ç°æ ˆ">4 ä¸¤ä¸ªé˜Ÿåˆ—å®ç°æ ˆ</h2><p>åœ¨pushæ“ä½œé‡Œè¿›è¡Œæ”¹è¿›å°±å¯ä»¥ï¼š<br>é€šè¿‡</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MyStack</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">public</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> q1<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> q2<span class="token punctuation">;</span>        <span class="token comment">/** Initialize your data structure here. */</span>        <span class="token keyword">public</span> <span class="token class-name">MyStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            q1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            q2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">/** Push element x onto stack. */</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            q2<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q1<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                q2<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>q1<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> tmp <span class="token operator">=</span> q1<span class="token punctuation">;</span>            q1 <span class="token operator">=</span> q2<span class="token punctuation">;</span>            q2 <span class="token operator">=</span> tmp<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">/** Removes the element on top of the stack and returns that element. */</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> q1<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">/** Get the top element. */</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> q1<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">/** Returns whether the stack is empty. */</span>        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> q1<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç”¨ä¸€ä¸ªé˜Ÿåˆ—ä¹Ÿå¯ä»¥</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">int</span> n <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>   <span class="token punctuation">&#125;</span></code></pre><h2 id="5-å•è°ƒæ ˆ">5 å•è°ƒæ ˆ</h2><p>ä¸ºäº†è§£å†³ç»™å®šçš„ä¸€ä¸ªå¯èƒ½å«æœ‰é‡å¤å€¼çš„arrï¼Œiä½ç½®ä¸€å®šæœ‰ä»¥ä¸‹ä¿¡æ¯</p><p>1ï¼‰arr[i] å·¦è¾¹æœ‰ç¦»å®ƒæœ€è¿‘æ¯”å®ƒå°çš„ï¼ˆå¤§ï¼‰çš„æ•°</p><p>2ï¼‰arr[i] å³è¾¹æœ‰ç¦»å®ƒæœ€è¿‘æ¯”å®ƒå°çš„ï¼ˆå¤§ï¼‰çš„æ•°</p><h3 id="æ‰¾åˆ°å·¦è¾¹å’Œå³è¾¹ç¦»iæœ€è¿‘æ¯”å…¶å°çš„ä¸‹è¡¨å¯¹-res-n-2">æ‰¾åˆ°å·¦è¾¹å’Œå³è¾¹ç¦»iæœ€è¿‘æ¯”å…¶å°çš„ä¸‹è¡¨å¯¹ <code>res[n][2]</code></h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Code1_MonotonousStack</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getNearLessNoRepeat</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//æ–°çš„æ•°å‹æ ˆ å¦‚æœæ¯”æ ˆåº•å° æ ˆåº•å¼¹å‡º å¹¶è®°å½•</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> popIndex <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> leftLessIndex <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>res<span class="token punctuation">[</span>popIndex<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> leftLessIndex<span class="token punctuation">;</span>res<span class="token punctuation">[</span>popIndex<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> popIndex <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> leftLessIndex <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>res<span class="token punctuation">[</span>popIndex<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> leftLessIndex<span class="token punctuation">;</span>res<span class="token punctuation">[</span>popIndex<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//æ•°ç»„ä¸­æœ‰é‡å¤çš„æƒ…å†µ</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getNearLess</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// List&lt;Integer> -> æ”¾çš„æ˜¯ä½ç½®ï¼ŒåŒæ ·å€¼çš„ä¸œè¥¿ï¼Œä½ç½®å‹åœ¨ä¸€èµ·</span><span class="token comment">// ä»£è¡¨å€¼    åº•  ->  é¡¶   å°  -> å¤§</span><span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//æ–°çš„æ•°å‹æ ˆ å¦‚æœæ¯”æ ˆåº•å° æ ˆåº•å¼¹å‡º å¹¶è®°å½•</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> popIndex <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> leftLessIndex <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> popi <span class="token operator">:</span> popIndex<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>res<span class="token punctuation">[</span>popi<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> leftLessIndex<span class="token punctuation">;</span>res<span class="token punctuation">[</span>popi<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//ç›¸ç­‰çš„æ¯”ä½ å°çš„ éƒ½è¦æŠŠå­˜å…¥æ ˆçš„æ ¼å¼æ”¹ä¸ºå­˜å‚¨äº†ä½ç½®çš„listæ•°ç»„</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">==</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> pushIndex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>pushIndex<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>pushIndex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> popIndex <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å–å†³äºæœ€æ™šåŠ å…¥çš„é‚£ä¸ª</span><span class="token keyword">int</span> leftLessIndex <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> popi <span class="token operator">:</span> popIndex<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>res<span class="token punctuation">[</span>popi<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> leftLessIndex<span class="token punctuation">;</span>res<span class="token punctuation">[</span>popi<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æ­£æ•°æ•°ç»„arrä¸­ï¼ˆsubçš„ç´¯åŠ å’Œ-minï¼‰çš„æœ€å¤§å€¼">æ­£æ•°æ•°ç»„arrä¸­ï¼ˆsubçš„ç´¯åŠ å’Œ*minï¼‰çš„æœ€å¤§å€¼</h3><blockquote><p>ç»™å®šä¸€ä¸ªåªåŒ…å«æ­£æ•°çš„æ•°ç»„arrï¼Œarrä¸­ä»»ä½•ä¸€ä¸ªå­æ•°ç»„subï¼Œä¸€å®šéƒ½å¯ä»¥ç®—å‡º(subç´¯åŠ å’Œ )* (subä¸­çš„æœ€å°å€¼)æ˜¯ä»€ä¹ˆï¼Œ<br>é‚£ä¹ˆæ‰€æœ‰å­æ•°ç»„ä¸­ï¼Œè¿™ä¸ªå€¼æœ€å¤§æ˜¯å¤šå°‘ï¼Ÿ</p></blockquote><p>ç›´æ¥æ‰¾æ¯ä¸ªæ•°ä¸¤è¾¹æœ€è¿‘æ¯”å®ƒå°ä¸­é—´éƒ¨åˆ†ç´¯åŠ å’Œï¼ˆè¿™éƒ¨åˆ†è¯¥æ•°ä¸€å®šæœ€å°ï¼‰</p><p>1 å»ºç«‹å‰ç¼€å’Œæ•°ç»„<code>sums[i]</code>(è¿™æ ·æ±‚ç´¯åŠ å’Œå°±å¯ä»¥[0~R] -[0~L-1])</p><p>2 å’Œä¸Šé¢å•è°ƒæ ˆæ€è·¯å·®ä¸å¤š</p><p>â€‹1ï¼‰æ ˆé¡¶å¼¹å‡º<code>[j]</code>åæ›´æ–°max</p><p>â€‹2ï¼‰å†éå†æ ˆé‡Œçš„å…ƒç´  å³è¾¹æ²¡æœ‰æ¯”å®ƒæœ€å°æ‰€ä»¥ç´¯åŠ ç›´æ¥ç”¨<code>sums[N-1]</code>æ¥å‡</p><pre class="language-java" data-language="java"><code class="language-java"></code></pre><h1>7 é€’å½’</h1><h2 id="1-å…¨æ’åˆ—">1 å…¨æ’åˆ—</h2><blockquote><p>ç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•°ç»„ <code>nums</code> ï¼Œè¿”å›å…¶ <em>æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—</em> ã€‚ä½ å¯ä»¥ <strong>æŒ‰ä»»æ„é¡ºåº</strong> è¿”å›ç­”æ¡ˆ</p></blockquote><img src="ç®—æ³•é«˜é¢‘é¢˜æ€»ç»“/image-20220210103904616.png" alt="image-20220210103904616" style="zoom:50%;" /><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">permute</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é€‰æ‹©çš„è·¯</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> nums <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token function">process</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token comment">//  DFS</span><span class="token comment">// 1 foræ˜¯åœ¨æ ‘å½¢ç»“æ„é‡Œå¹³è¡Œè¿›è¡Œ  - - -></span><span class="token comment">// 2 å…ˆäº¤æ¢æˆä¸ºä¸€ç§æƒ…å†µ</span><span class="token comment">// 3 å¾€ä¸‹|é€’å½’å°†å‰©ä½™éƒ¨åˆ†çš„æƒ…å†µæå®š</span><span class="token comment">//      |</span><span class="token comment">//      v</span><span class="token comment">// 4 æ¢å¤åŸæ¥çŠ¶æ€ å› ä¸ºå¹³è¡Œçš„åˆ†æ”¯éœ€è¦åŒæ ·çš„çŠ¶æ€</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> path<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> ans<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>ans<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> vis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 1</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>vis<span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// å‰ªæ</span>vis<span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">128</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">// 2</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 3</span><span class="token function">process</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 4</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å…¨æ’åˆ—2âƒ£ï¸-ä¸é‡å¤">å…¨æ’åˆ—2âƒ£ï¸ ä¸é‡å¤</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/* * å…¨æ’åˆ— * å°†ç»™å®šæ•°ç»„è¿›è¡Œæ’åˆ—ç»„åˆ  */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Recursion</span>å›æº¯_Permutation <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">permute</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ä¸åŒæ‰“å°ç»“æœå­˜å‚¨</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> nums<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token function">process</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//  DFS</span>    <span class="token comment">// 1 foræ˜¯åœ¨æ ‘å½¢ç»“æ„é‡Œå¹³è¡Œè¿›è¡Œ  - - -></span>    <span class="token comment">// 2 å…ˆäº¤æ¢æˆä¸ºä¸€ç§æƒ…å†µ</span>    <span class="token comment">// 3 å¾€ä¸‹|é€’å½’å°†å‰©ä½™éƒ¨åˆ†çš„æƒ…å†µæå®š</span>    <span class="token comment">//      |</span>    <span class="token comment">//      v</span>    <span class="token comment">// 4 æ¢å¤åŸæ¥çŠ¶æ€ å› ä¸ºå¹³è¡Œçš„åˆ†æ”¯éœ€è¦åŒæ ·çš„çŠ¶æ€</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> path<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> ans<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            ans<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> vis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">// 1</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>vis<span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// å‰ªæ æ•°ç»„æœ‰è´Ÿæ•°è¦åŠ ä¸Š128</span>                vis<span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">128</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token comment">// 2</span>                <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 3</span>                <span class="token function">process</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 4</span>                <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="2-æ‹¬å·ç”Ÿæˆ">2 æ‹¬å·ç”Ÿæˆ</h2><blockquote><p>æ•°å­— <code>n</code> ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” <strong>æœ‰æ•ˆçš„</strong> æ‹¬å·ç»„åˆã€‚</p></blockquote><pre class="language-none"><code class="language-none">åˆ©ç”¨ä¸€ä¸ªåŸç†æ˜¯ å½“å‰é¢å·²ç»åšäº†é€‰æ‹©çš„å·¦æ‹¬å·æ¯”å³æ‹¬å·å¤šçš„æ—¶å€™å°±æ·»åŠ å³æ‹¬å· éœ€è¦å‰ªæ åœ¨å¾€pathé‡Œé¢æ·»åŠ æ‹¬å·çš„æ—¶å€™è¿›è¡Œæ¡ä»¶å‰ªæ</code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">generateParenthesis</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>n <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">process</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âš ï¸ä¼ è¿›å»çš„å‚æ•°ï¼</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token comment">// å‰ªæ å·¦è¾¹æ‹¬å·è¿˜æœ‰ å’Œå·¦è¾¹-å³è¾¹ã€‹0</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> path<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span><span class="token keyword">int</span> leftRest<span class="token punctuation">,</span> <span class="token keyword">int</span> leftMinusRight<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> ans <span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> path<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// åˆ°ç»“å°¾</span>            ans<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸€ç§å¯èƒ½</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>leftRest <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// å·¦è¾¹çš„æ‹¬å·è¿˜æœ‰ å°†å½“å‰çš„ä½ç½®è®¾ä¸ºå·¦ï¼Œ å‰©ä¸‹çš„å»é€’å½’</span>                path<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'('</span><span class="token punctuation">;</span>                <span class="token function">process</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> leftRest <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> leftMinusRight <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>leftMinusRight <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// å·¦è¾¹çš„æ‹¬å·å¤§äºå³è¾¹çš„æ‹¬å·</span>                path<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">')'</span><span class="token punctuation">;</span>                <span class="token function">process</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> leftRest<span class="token punctuation">,</span> leftMinusRight <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><h2 id="3-å¤åŸipåœ°å€">3 å¤åŸipåœ°å€</h2><blockquote><p>æœ‰æ•ˆ IP åœ°å€ æ­£å¥½ç”±å››ä¸ªæ•´æ•°ï¼ˆæ¯ä¸ªæ•´æ•°ä½äº 0 åˆ° 255 ä¹‹é—´ç»„æˆï¼Œä¸”ä¸èƒ½å«æœ‰å‰å¯¼ 0ï¼‰ï¼Œæ•´æ•°ä¹‹é—´ç”¨ â€˜.â€™ åˆ†éš”ã€‚</p><p>ä¾‹å¦‚ï¼šâ€œ0.1.2.201â€ å’Œ â€œ192.168.1.1â€ æ˜¯ æœ‰æ•ˆ IP åœ°å€ï¼Œä½†æ˜¯ â€œ0.011.255.245â€ã€â€œ192.168.1.312â€ å’Œ â€œ192.168@1.1â€ æ˜¯ æ— æ•ˆ IP åœ°å€ã€‚</p><p>ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„å­—ç¬¦ä¸² s ï¼Œç”¨ä»¥è¡¨ç¤ºä¸€ä¸ª IP åœ°å€ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆ IP åœ°å€ï¼Œè¿™äº›åœ°å€å¯ä»¥é€šè¿‡åœ¨ s ä¸­æ’å…¥ â€˜.â€™ æ¥å½¢æˆã€‚ä½  ä¸èƒ½ é‡æ–°æ’åºæˆ–åˆ é™¤ s ä¸­çš„ä»»ä½•æ•°å­—ã€‚ä½ å¯ä»¥æŒ‰ ä»»ä½• é¡ºåºè¿”å›ç­”æ¡ˆã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">COUNT</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> segment<span class="token punctuation">;</span> <span class="token comment">// segment[i]å­˜å‚¨ç¬¬iæ®µ</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">restoreIpAddresses</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>segment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token constant">COUNT</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">dfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// s å­—ç¬¦ä¸² id æ®µæ•° segstart</span><span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token keyword">int</span> segStart<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 1 å·²ç»é€’å½’åˆ°ç¬¬å››æ®µ</span><span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">==</span> <span class="token constant">COUNT</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>segStart <span class="token operator">==</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// å¹¶ä¸” æ‰€æœ‰æ•°å­—éƒ½å®Œæˆ</span><span class="token class-name">StringBuffer</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token constant">COUNT</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>str<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>segment<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> <span class="token constant">COUNT</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>str<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token char">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>ans<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// è®°å¾—å‘ä¸Šè¿”å›ï¼ï¼ï¼</span><span class="token punctuation">&#125;</span><span class="token comment">// 2 å››æ®µæ²¡ç©ä½†æ˜¯å·²ç»åˆ°ç»“å°¾</span><span class="token keyword">if</span> <span class="token punctuation">(</span>segStart <span class="token operator">==</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 3 æœ‰0çš„æƒ…å†µ</span><span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>segStart<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token char">'0'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// æœ‰é›¶</span>segment<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token function">dfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> id <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> segStart <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 4 ä¸€èˆ¬æƒ…å†µ</span><span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> segEnd <span class="token operator">=</span> segStart<span class="token punctuation">;</span> segEnd <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> segEnd<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>ans <span class="token operator">=</span> ans <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>segEnd<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token char">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>ans <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> ans <span class="token operator">&lt;=</span> <span class="token number">0xFF</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// anså±äº[0, 255]</span>segment<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> ans<span class="token punctuation">;</span><span class="token function">dfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> id <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> segEnd <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="4-å•è¯æœç´¢">4 å•è¯æœç´¢</h2><p>dfs+å›æº¯</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">exist</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> board<span class="token punctuation">,</span> <span class="token class-name">String</span> word<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> h <span class="token operator">=</span> board<span class="token punctuation">.</span>length<span class="token punctuation">,</span> w <span class="token operator">=</span> board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> visited <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> h<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> w<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token function">check</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> visited<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> word<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> board<span class="token punctuation">,</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> visited<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">==</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        visited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> directions <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span> result <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dir <span class="token operator">:</span> directions<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> newi <span class="token operator">=</span> i <span class="token operator">+</span> dir<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> newj <span class="token operator">=</span> j <span class="token operator">+</span> dir<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>newi <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> newi <span class="token operator">&lt;</span> board<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> newj <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> newj <span class="token operator">&lt;</span> board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">[</span>newi<span class="token punctuation">]</span><span class="token punctuation">[</span>newj<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token function">check</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> visited<span class="token punctuation">,</span> newi<span class="token punctuation">,</span> newj<span class="token punctuation">,</span> s<span class="token punctuation">,</span> k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        result <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                        <span class="token keyword">break</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        visited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="5-å­é›†">5 å­é›†</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ•°ç»„ä¸­çš„å…ƒç´  äº’ä¸ç›¸åŒ ã€‚è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚</p><p>è§£é›† ä¸èƒ½ åŒ…å«é‡å¤çš„å­é›†ã€‚ä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›è§£é›†ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šnums = [1,2,3]<br>è¾“å‡ºï¼š[[],[1],[2],[1,2],[3],[1,3],[2,3],[1,2,3]]</p><p>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šnums = [0]<br>è¾“å‡ºï¼š[[],[0]]</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">subsets</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç”¨æ¥å­˜æ”¾ä¹‹å‰å†³å®š</span><span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> nums <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">process2</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> res<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">process2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> res<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> path<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// ä¸¤ç§å¯èƒ½</span><span class="token function">process2</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> res<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> path2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>path2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">process2</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> res<span class="token punctuation">,</span> path2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h1>8 å¹¶æŸ¥é›†</h1><h2 id="å¹¶æŸ¥é›†">å¹¶æŸ¥é›†</h2><p>ç”¨æ¥è§£å†³å›¾çš„è¿é€šæ€§å’Œç¯çš„æ•°é‡</p><h2 id="ç»“æ„ï¼ˆhashè¡¨ï¼‰">ç»“æ„ï¼ˆhashè¡¨ï¼‰</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Code01_UnionFind</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span><span class="token class-name">V</span> value<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">V</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>value <span class="token operator">=</span> v<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * å¹¶æŸ¥é›†  */</span><span class="token comment">// 1 æ„é€ æ–¹æ³•</span><span class="token comment">// 2 Node&lt;V> findFather(Node&lt;V> cur)</span><span class="token comment">// 3 boolean isSameSet(V a, V b)</span><span class="token comment">// 4 void union(V a, V b)</span><span class="token comment">// 5 int sets()</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">UnionFind</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span><span class="token punctuation">></span></span> nodes<span class="token punctuation">;</span><span class="token comment">// ç‚¹</span><span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span><span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span><span class="token punctuation">></span></span> parents<span class="token punctuation">;</span><span class="token comment">// æœ€é«˜çˆ¶äº²</span><span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> sizeMap<span class="token punctuation">;</span><span class="token comment">// æ‰€åœ¨é›†åˆå¤§å°</span><span class="token keyword">public</span> <span class="token class-name">UnionFind</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span></span> values<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">//1 åˆå§‹åŒ–å‚æ•°</span>nodes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>parents <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>sizeMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//2 éå†ï¼šå…ˆnewä¸€ä¸ªnode ç„¶åæ›´æ–°ç‚¹é›†ï¼Œæ›´æ–°çˆ¶äº²è¡¨ï¼ˆè‡ªå·±æ˜¯è‡ªå·±çˆ¹ï¼‰ï¼Œæœ€åæ›´æ–°sizemap</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">V</span> cur <span class="token operator">:</span> values<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span></span> node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>nodes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">;</span>parents<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">;</span>sizeMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>    <span class="token comment">// æ‰¾çˆ¹</span><span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token function">findFather</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span></span> cur<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token comment">//1 new ä¸€ä¸ª æ ˆ</span><span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span><span class="token punctuation">></span></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//2 å¦‚æœå½“å‰curä¸æ˜¯è‡ªå·±çˆ¹ ï¼š1ï¼‰å‹æ ˆ 2ï¼‰curæ›´æ–°ä¸ºè‡ªå·±çˆ¹</span><span class="token keyword">while</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> parents<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>cur <span class="token operator">=</span> parents<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>      <span class="token comment">//3 å¦‚æœæ ˆä¸ç©º curå°±æ˜¯å½“å‰æœ€çˆ¹ æ‰€ä»¥å¾ªç¯å¼¹å‡º å°†curè®¾ä¸ºä»–ä»¬çˆ¹</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>path<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>parents<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cur<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> cur<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token comment">// è¿”å›ä¸¤çˆ¹æ˜¯å¦ç›¸ç­‰</span><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isSameSet</span><span class="token punctuation">(</span><span class="token class-name">V</span> a<span class="token punctuation">,</span> <span class="token class-name">V</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">findFather</span><span class="token punctuation">(</span>nodes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">findFather</span><span class="token punctuation">(</span>nodes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token comment">// å¹¶</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">union</span><span class="token punctuation">(</span><span class="token class-name">V</span> a<span class="token punctuation">,</span> <span class="token class-name">V</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span></span> aHead <span class="token operator">=</span> <span class="token function">findFather</span><span class="token punctuation">(</span>nodes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span></span> bHead <span class="token operator">=</span> <span class="token function">findFather</span><span class="token punctuation">(</span>nodes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å¦‚æœä¸¤çˆ¹ä¸åŒ</span><span class="token keyword">if</span><span class="token punctuation">(</span>aHead <span class="token operator">!=</span> bHead<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 1 æŠ“ä½sizeå¤§å°</span><span class="token keyword">int</span> aSize <span class="token operator">=</span> sizeMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>aHead<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> bSize <span class="token operator">=</span> sizeMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bHead<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 2 å°çš„é‚£ä¸ªæ¥åœ¨å¤§çš„ä¸‹é¢ï¼ˆbigæ˜¯smallçš„çˆ¶</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span></span> small <span class="token operator">=</span> aSize <span class="token operator">&lt;</span> bSize <span class="token operator">?</span> aHead <span class="token operator">:</span> bHead<span class="token punctuation">;</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span></span> big <span class="token operator">=</span> small <span class="token operator">==</span> aHead <span class="token operator">?</span> bHead <span class="token operator">:</span> aHead<span class="token punctuation">;</span>parents<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>small<span class="token punctuation">,</span> big<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 3 æ›´æ–°å¤§é›†çš„size å¹¶è½¬ç§»å°é›†çš„sizemap</span>sizeMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>big<span class="token punctuation">,</span> aSize <span class="token operator">+</span> bSize<span class="token punctuation">)</span><span class="token punctuation">;</span>sizeMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>small<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sets</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> sizeMap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="1-å²›å±¿æ•°é‡">1 å²›å±¿æ•°é‡</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªç”± â€˜1â€™ï¼ˆé™†åœ°ï¼‰å’Œ â€˜0â€™ï¼ˆæ°´ï¼‰ç»„æˆçš„çš„äºŒç»´ç½‘æ ¼ï¼Œè¯·ä½ è®¡ç®—ç½‘æ ¼ä¸­å²›å±¿çš„æ•°é‡ã€‚</p><p>å²›å±¿æ€»æ˜¯è¢«æ°´åŒ…å›´ï¼Œå¹¶ä¸”æ¯åº§å²›å±¿åªèƒ½ç”±æ°´å¹³æ–¹å‘å’Œ/æˆ–ç«–ç›´æ–¹å‘ä¸Šç›¸é‚»çš„é™†åœ°è¿æ¥å½¢æˆã€‚</p><p>æ­¤å¤–ï¼Œä½ å¯ä»¥å‡è®¾è¯¥ç½‘æ ¼çš„å››æ¡è¾¹å‡è¢«æ°´åŒ…å›´ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">numIslands</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> board<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> islands <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> board<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'1'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>islands<span class="token operator">++</span><span class="token punctuation">;</span><span class="token function">infect</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> islands<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// ä»(i,j)è¿™ä¸ªä½ç½®å‡ºå‘ï¼ŒæŠŠæ‰€æœ‰ç»ƒæˆä¸€ç‰‡çš„'1'å­—ç¬¦ï¼Œå˜æˆ0</span><span class="token comment">// DFS</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">infect</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> board<span class="token punctuation">,</span> <span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> j <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">>=</span> board<span class="token punctuation">.</span>length <span class="token operator">||</span> j <span class="token operator">>=</span> board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token operator">||</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token char">'1'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token function">infect1</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">infect1</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">infect1</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">infect1</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/* * BFS */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">infect2</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> board<span class="token punctuation">,</span> <span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Queue</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> a<span class="token punctuation">,</span> b <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>list<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cur <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> i <span class="token operator">=</span> cur<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> j <span class="token operator">=</span> cur<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> board<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'1'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> i<span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> i<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><h3 id="ä½¿ç”¨å¹¶æŸ¥é›†ï¼ˆé¢è¯•ï¼‰">ä½¿ç”¨å¹¶æŸ¥é›†ï¼ˆé¢è¯•ï¼‰</h3><p>ä¸ºä»€ä¹ˆè¦å¹¶æŸ¥é›†ï¼Ÿ å¦‚æœæœ‰å¤šå°cpu å¤§å²›å˜æˆå°å²›å°±ä¼šå¾ˆå®¹æ˜“</p><p><strong>é¢è¯•å°±è®²ä¸€ä¸‹æ€ä¹ˆé€šè¿‡å¹¶æŸ¥é›†æ¥è¿›è¡Œunion ï¼š å¹¶æŸ¥é›†å°±æ˜¯å¯ä»¥å°†a, bæ‰€åœ¨çš„é›†åˆè¿›è¡Œåˆå¹¶ï¼›éœ€è¦æ¯ä¸ªå²›çš„ä½ç½® æ‰€ä»¥éœ€è¦ä¸€ä¸ªindexæ–¹æ³•æ¥è¿”å›æ¯æ ¼å­çš„ä½ç½®å°±æ˜¯è¡Œæ•°ä¹˜ä»¥çŸ©é˜µå®½åº¦å†åŠ ä¸Šåˆ—æ•°ï¼Œ ç„¶åè¦è¿›è¡Œunionï¼ˆï¼‰ å…·ä½“è¿‡ç¨‹å°±æ˜¯å…ˆæ‰¾åˆ°ä¸¤ä¸ªè¦åˆå¹¶çš„ç‚¹çš„çˆ¶äº²ï¼Œå¦‚æœä¸ç›¸åŒå°±å†è°ƒå‡ºä¸¤ä¸ªæ‰€åœ¨é›†åˆçš„å¤§å°sizemapï¼Œç„¶åå°†å°çš„é›†åˆæ¥åœ¨å¤§çš„é›†åˆä¸‹é¢ï¼Œ æ›´æ–°sizemapã€‚ è¿™é‡Œæ‰¾çˆ¶äº²çš„æ“ä½œå¯ä»¥ç”¨ä¸€ä¸ªhelpæ•°ç»„å€’åºéå†æ¥ä»£æ›¿æ ˆ</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ä½¿ç”¨å¹¶æŸ¥é›† * @param board * @return */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">numIslands2</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> board<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> row <span class="token operator">=</span> board<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span> col <span class="token operator">=</span> board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token class-name">UnionFind2</span> uf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UnionFind2</span><span class="token punctuation">(</span>board<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æŠŠç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—å…ˆå¤„ç† å°±ä¸éœ€è¦åé¢è€ƒè™‘è¾¹ç•Œ</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> col<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'1'</span> <span class="token operator">&amp;&amp;</span> board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'1'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>uf<span class="token punctuation">.</span><span class="token function">union</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> row<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>board<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'1'</span> <span class="token operator">&amp;&amp;</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'1'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>uf<span class="token punctuation">.</span><span class="token function">union</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// é™¤äº†ç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—çš„éƒ¨åˆ†</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> row<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> col<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'1'</span><span class="token punctuation">)</span>  <span class="token comment">// çœ‹ä¸Šé¢å’Œå·¦è¾¹</span><span class="token keyword">if</span> <span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'1'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>uf<span class="token punctuation">.</span><span class="token function">union</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>board<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'1'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>uf<span class="token punctuation">.</span><span class="token function">union</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> uf<span class="token punctuation">.</span><span class="token function">sets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">UnionFind2</span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> parent<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> size<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> help<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">int</span> col<span class="token punctuation">;</span><span class="token comment">// ç”¨æ¥è®¡ç®—çŸ©é˜µæ•°r*col + c</span><span class="token keyword">private</span> <span class="token keyword">int</span> sets<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">UnionFind2</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> board<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>col <span class="token operator">=</span> board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>sets <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> row <span class="token operator">=</span> board<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token keyword">int</span> len <span class="token operator">=</span> row <span class="token operator">*</span> col<span class="token punctuation">;</span>parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>help <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> row<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> c <span class="token operator">&lt;</span> col<span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>board<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'1'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>parent<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>size<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>sets<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// (r,c) -> i</span><span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> r <span class="token operator">*</span> col <span class="token operator">+</span> c<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// åŸå§‹ä½ç½® -> ä¸‹æ ‡</span><span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> hi <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> parent<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>help<span class="token punctuation">[</span>hi<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>i <span class="token operator">=</span> parent<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> <span class="token punctuation">(</span>hi<span class="token operator">--</span><span class="token punctuation">;</span> hi <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> hi<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>parent<span class="token punctuation">[</span>help<span class="token punctuation">[</span>hi<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> i<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">union</span><span class="token punctuation">(</span><span class="token keyword">int</span> r1<span class="token punctuation">,</span> <span class="token keyword">int</span> c1<span class="token punctuation">,</span> <span class="token keyword">int</span> r2<span class="token punctuation">,</span> <span class="token keyword">int</span> c2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> i1 <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span>r1<span class="token punctuation">,</span> c1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> i2 <span class="token operator">=</span> <span class="token function">index</span><span class="token punctuation">(</span>r2<span class="token punctuation">,</span> c2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> f1 <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>i1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> f2 <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>i2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>f1 <span class="token operator">!=</span> f2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>size<span class="token punctuation">[</span>f1<span class="token punctuation">]</span> <span class="token operator">>=</span> size<span class="token punctuation">[</span>f2<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>size<span class="token punctuation">[</span>f1<span class="token punctuation">]</span> <span class="token operator">+=</span> size<span class="token punctuation">[</span>f2<span class="token punctuation">]</span><span class="token punctuation">;</span>parent<span class="token punctuation">[</span>f2<span class="token punctuation">]</span> <span class="token operator">=</span> f1<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>size<span class="token punctuation">[</span>f2<span class="token punctuation">]</span> <span class="token operator">+=</span> size<span class="token punctuation">[</span>f1<span class="token punctuation">]</span><span class="token punctuation">;</span>parent<span class="token punctuation">[</span>f1<span class="token punctuation">]</span> <span class="token operator">=</span> f2<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>sets<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sets</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> sets<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="2-çœä»½æ•°é‡ï¼ˆæœ‹å‹åœˆï¼‰">2 çœä»½æ•°é‡ï¼ˆæœ‹å‹åœˆï¼‰</h2><blockquote><p>æœ‰ n ä¸ªåŸå¸‚ï¼Œå…¶ä¸­ä¸€äº›å½¼æ­¤ç›¸è¿ï¼Œå¦ä¸€äº›æ²¡æœ‰ç›¸è¿ã€‚å¦‚æœåŸå¸‚ a ä¸åŸå¸‚ b ç›´æ¥ç›¸è¿ï¼Œä¸”åŸå¸‚ b ä¸åŸå¸‚ c ç›´æ¥ç›¸è¿ï¼Œé‚£ä¹ˆåŸå¸‚ a ä¸åŸå¸‚ c é—´æ¥ç›¸è¿ã€‚</p><p>çœä»½ æ˜¯ä¸€ç»„ç›´æ¥æˆ–é—´æ¥ç›¸è¿çš„åŸå¸‚ï¼Œç»„å†…ä¸å«å…¶ä»–æ²¡æœ‰ç›¸è¿çš„åŸå¸‚ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findCircleNum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token class-name">M</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> <span class="token class-name">M</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token class-name">UnionFind</span> unionFind <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UnionFind</span><span class="token punctuation">(</span><span class="token class-name">N</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">M</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    unionFind<span class="token punctuation">.</span><span class="token function">union</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> unionFind<span class="token punctuation">.</span><span class="token function">sets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// ä½¿ç”¨æ•°ç»„ç»“æ„çš„å¹¶æŸ¥é›†</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">UnionFind</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> parents<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> size<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> help<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> sets<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">UnionFind</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token class-name">N</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            parents <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            help <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token class-name">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            sets <span class="token operator">=</span> <span class="token class-name">N</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                parents<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>                size<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 1 å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆ</span>        <span class="token comment">// 2 while(iä¸æ˜¯è‡ªå·±çˆ¹ï¼‰&#123;</span>        <span class="token comment">// 2.1 å‹helpæ ˆï¼ˆè™šæ‹Ÿçš„</span>        <span class="token comment">// 2.2 iæŒ‡å‘è‡ªå·±çš„çˆ¹    &#125;</span>        <span class="token comment">// 3 foréå†helpï¼šæ¨¡æ‹Ÿæ ˆå¼¹å‡º &#123;æ‰€æœ‰äººçˆ¹è®¾ä¸ºi&#125;</span>        <span class="token comment">// 4 è¿”å›i:æ­¤æ—¶iæŒ‡å‘æœ€çˆ¹</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findFather</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> hi <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span> i <span class="token operator">!=</span> parents<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                help<span class="token punctuation">[</span>hi<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>                i <span class="token operator">=</span> parents<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span>hi<span class="token operator">--</span><span class="token punctuation">;</span> hi <span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">;</span> hi<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                parents<span class="token punctuation">[</span>help<span class="token punctuation">[</span>hi<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> i<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">union</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> iF <span class="token operator">=</span> <span class="token function">findFather</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> jF <span class="token operator">=</span> <span class="token function">findFather</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>iF <span class="token operator">!=</span> jF<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>size<span class="token punctuation">[</span>iF<span class="token punctuation">]</span> <span class="token operator">&lt;</span> size<span class="token punctuation">[</span>jF<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    size<span class="token punctuation">[</span>jF<span class="token punctuation">]</span> <span class="token operator">+=</span> size<span class="token punctuation">[</span>iF<span class="token punctuation">]</span><span class="token punctuation">;</span>                    parents<span class="token punctuation">[</span>iF<span class="token punctuation">]</span> <span class="token operator">=</span> jF<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    size<span class="token punctuation">[</span>iF<span class="token punctuation">]</span> <span class="token operator">+=</span> size<span class="token punctuation">[</span>jF<span class="token punctuation">]</span><span class="token punctuation">;</span>                    parents<span class="token punctuation">[</span>jF<span class="token punctuation">]</span> <span class="token operator">=</span> iF<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                sets<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sets</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> sets<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><h1>7 å›¾</h1><h2 id="å°†çŸ©é˜µè½¬åŒ–ä¸ºè‡ªå·±çš„ç»“æ„-creatGraph">å°†çŸ©é˜µè½¬åŒ–ä¸ºè‡ªå·±çš„ç»“æ„(creatGraph)</h2><ol><li>newä¸€ä¸ªè‡ªå·±çš„graph</li><li>éå†çŸ©é˜µæ¯ä¸€è¡Œ for(matrix.length)<ol><li>weight:<code>matrix[i][0]</code> from<code>[i][1]</code> to:<code>[i][2]</code></li><li>åˆ¤æ–­æ˜¯å¦contanskey(fromå’Œto) åˆ†åˆ«æ”¾å…¥ç‚¹é›†</li><li>edgeåˆå§‹åŒ– å¹¶èµ‹å€¼ (weight,fromNode,toNode)</li><li>æ›´æ–°å‡ºå…¥åº¦ã€ç›´æ¥ç‚¹ã€ç›´æ¥è¾¹</li><li>è¾¹æ”¾å…¥è¾¹é›†</li></ol></li></ol><h2 id="1-å›¾çš„bfs">1 å›¾çš„bfs</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Code01_BFS</span> <span class="token punctuation">&#123;</span><span class="token comment">// ä»nodeå‡ºå‘ï¼Œè¿›è¡Œå®½åº¦ä¼˜å…ˆéå†</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">bfs</span><span class="token punctuation">(</span><span class="token class-name">Node</span> start<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">></span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">></span></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">;</span>set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Node</span> cur <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span> next <span class="token operator">:</span> cur<span class="token punctuation">.</span>nexts<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="2-DFS">2 DFS</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">all<span class="token punctuation">.</span></span><span class="token class-name">Graph</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashSet</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Stack</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Code02_DFS</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token class-name">Node</span> node<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">></span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">></span></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>stack<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Node</span> cur <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span> next <span class="token operator">:</span> cur<span class="token punctuation">.</span>nexts<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="3-æ‹“æ‰‘æ’åº">3 æ‹“æ‰‘æ’åº</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æ‹“æ‰‘æ’åº ï¼š æœ‰å‘æ— ç¯å›¾ *  * @author chs * */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Code03_TopologySort</span> <span class="token punctuation">&#123;</span><span class="token comment">// directed graph and no loop</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">></span></span> <span class="token function">sortedTopology</span><span class="token punctuation">(</span><span class="token class-name">Graph</span> graph<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// key æŸä¸ªèŠ‚ç‚¹   value å‰©ä½™çš„å…¥åº¦</span><span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> inMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åªæœ‰å‰©ä½™å…¥åº¦ä¸º0çš„ç‚¹ï¼Œæ‰è¿›å…¥è¿™ä¸ªé˜Ÿåˆ—</span><span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">></span></span> zeroInQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span> node <span class="token operator">:</span> graph<span class="token punctuation">.</span>nodes<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>inMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> node<span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>in <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>zeroInQueue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">></span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>zeroInQueue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Node</span> cur <span class="token operator">=</span> zeroInQueue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>result<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span> next <span class="token operator">:</span> cur<span class="token punctuation">.</span>nexts<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>inMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>next<span class="token punctuation">,</span> inMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>inMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>zeroInQueue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> result<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis</title>
      <link href="/2022/02/12/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
      <url>/2022/02/12/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=f8b5e2fa-ed0b-0942-8fa5-e5c8f4a4caea</cover>
      <date>Sat Feb 12 2022 22:39:18 GMT+0800</date>
      
        <content type="html"><![CDATA[<p>Redisæ˜¯ä¸€ä¸ªä½¿ç”¨cè¯­è¨€ç¼–å†™çš„ï¼Œå¼€æºçš„é«˜æ€§èƒ½éå…³ç³»å‹æ•°æ®åº“(NoSQL)</p><span id="more"></span><h1>æ•°æ®ç±»å‹</h1><p>å›ç­”ï¼šä¸€å…±äº”ç§<br>(ä¸€)String<br>è¿™ä¸ªå…¶å®æ²¡å•¥å¥½è¯´çš„ï¼Œæœ€å¸¸è§„çš„set/getæ“ä½œï¼Œvalueå¯ä»¥æ˜¯Stringä¹Ÿå¯ä»¥æ˜¯æ•°å­—ã€‚ä¸€èˆ¬åšä¸€äº›å¤æ‚çš„è®¡æ•°åŠŸèƒ½çš„ç¼“å­˜ã€‚<br>(äºŒ)hash<br>è¿™é‡Œvalueå­˜æ”¾çš„æ˜¯ç»“æ„åŒ–çš„å¯¹è±¡ï¼Œæ¯”è¾ƒæ–¹ä¾¿çš„å°±æ˜¯æ“ä½œå…¶ä¸­çš„æŸä¸ªå­—æ®µã€‚åšä¸»åœ¨åšå•ç‚¹ç™»å½•çš„æ—¶å€™ï¼Œå°±æ˜¯ç”¨è¿™ç§æ•°æ®ç»“æ„å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œä»¥cookieIdä½œä¸ºkeyï¼Œè®¾ç½®30åˆ†é’Ÿä¸ºç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œèƒ½å¾ˆå¥½çš„æ¨¡æ‹Ÿå‡ºç±»ä¼¼sessionçš„æ•ˆæœã€‚<br>(ä¸‰)list<br>ä½¿ç”¨Listçš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥åšç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—çš„åŠŸèƒ½ã€‚å¦å¤–è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯ï¼Œå¯ä»¥åˆ©ç”¨lrangeå‘½ä»¤ï¼ŒåšåŸºäºredisçš„åˆ†é¡µåŠŸèƒ½ï¼Œæ€§èƒ½æä½³ï¼Œç”¨æˆ·ä½“éªŒå¥½ã€‚æœ¬äººè¿˜ç”¨ä¸€ä¸ªåœºæ™¯ï¼Œå¾ˆåˆé€‚â€”å–è¡Œæƒ…ä¿¡æ¯ã€‚å°±ä¹Ÿæ˜¯ä¸ªç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„åœºæ™¯ã€‚LISTå¯ä»¥å¾ˆå¥½çš„å®Œæˆæ’é˜Ÿï¼Œå…ˆè¿›å…ˆå‡ºçš„åŸåˆ™ã€‚<br>(å››)set<br>å› ä¸ºsetå †æ”¾çš„æ˜¯ä¸€å †ä¸é‡å¤å€¼çš„é›†åˆã€‚æ‰€ä»¥å¯ä»¥åšå…¨å±€å»é‡çš„åŠŸèƒ½ã€‚ä¸ºä»€ä¹ˆä¸ç”¨JVMè‡ªå¸¦çš„Setè¿›è¡Œå»é‡ï¼Ÿå› ä¸ºæˆ‘ä»¬çš„ç³»ç»Ÿä¸€èˆ¬éƒ½æ˜¯é›†ç¾¤éƒ¨ç½²ï¼Œä½¿ç”¨JVMè‡ªå¸¦çš„Setï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œéš¾é“ä¸ºäº†ä¸€ä¸ªåšä¸€ä¸ªå…¨å±€å»é‡ï¼Œå†èµ·ä¸€ä¸ªå…¬å…±æœåŠ¡ï¼Œå¤ªéº»çƒ¦äº†ã€‚<br>å¦å¤–ï¼Œå°±æ˜¯åˆ©ç”¨äº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰æ“ä½œï¼Œå¯ä»¥è®¡ç®—å…±åŒå–œå¥½ï¼Œå…¨éƒ¨çš„å–œå¥½ï¼Œè‡ªå·±ç‹¬æœ‰çš„å–œå¥½ç­‰åŠŸèƒ½ã€‚<br>(äº”)sorted set<br>sorted setå¤šäº†ä¸€ä¸ªæƒé‡å‚æ•°score,é›†åˆä¸­çš„å…ƒç´ èƒ½å¤ŸæŒ‰scoreè¿›è¡Œæ’åˆ—ã€‚å¯ä»¥åšæ’è¡Œæ¦œåº”ç”¨ï¼Œå–TOP Næ“ä½œã€‚</p><h1>å†…éƒ¨ç»“æ„</h1><ul><li>dict æœ¬è´¨ä¸Šæ˜¯ä¸ºäº†è§£å†³ç®—æ³•ä¸­çš„æŸ¥æ‰¾é—®é¢˜ï¼ˆSearchingï¼‰æ˜¯ä¸€ä¸ªç”¨äºç»´æŠ¤keyå’Œvalueæ˜ å°„å…³ç³»çš„æ•°æ®ç»“æ„ï¼Œä¸å¾ˆå¤šè¯­è¨€ä¸­çš„Mapæˆ–dictionaryç±»ä¼¼ã€‚ æœ¬è´¨ä¸Šæ˜¯ä¸ºäº†è§£å†³ç®—æ³•ä¸­çš„æŸ¥æ‰¾é—®é¢˜ï¼ˆSearchingï¼‰</li><li>sds sdså°±ç­‰åŒäºchar * å®ƒå¯ä»¥å­˜å‚¨ä»»æ„äºŒè¿›åˆ¶æ•°æ®ï¼Œä¸èƒ½åƒCè¯­è¨€å­—ç¬¦ä¸²é‚£æ ·ä»¥å­—ç¬¦â€™\0â€™æ¥æ ‡è¯†å­—ç¬¦ä¸²çš„ç»“ æŸï¼Œå› æ­¤å®ƒå¿…ç„¶æœ‰ä¸ªé•¿åº¦å­—æ®µã€‚</li><li>skiplist ï¼ˆè·³è·ƒè¡¨ï¼‰ è·³è¡¨æ˜¯ä¸€ç§å®ç°èµ·æ¥å¾ˆç®€å•ï¼Œå•å±‚å¤šæŒ‡é’ˆçš„é“¾è¡¨ï¼Œå®ƒæŸ¥æ‰¾æ•ˆç‡å¾ˆé«˜ï¼Œå ªæ¯”ä¼˜åŒ–è¿‡çš„äºŒå‰å¹³è¡¡æ ‘ï¼Œä¸”æ¯”å¹³è¡¡æ ‘çš„å®ç°ï¼Œ</li><li>quicklist</li><li>ziplist å‹ç¼©è¡¨ ziplistæ˜¯ä¸€ä¸ªç¼–ç åçš„åˆ—è¡¨ï¼Œæ˜¯ç”±ä¸€ç³»åˆ—ç‰¹æ®Šç¼–ç çš„è¿ç»­å†…å­˜å—ç»„æˆçš„é¡ºåºå‹æ•°æ®ç»“æ„ï¼Œ</li></ul><h1>redisæ€ä¹ˆç”¨</h1><h2 id="å‘½ä»¤">å‘½ä»¤</h2><h4 id="1-Keyæ“ä½œ">1. Keyæ“ä½œ</h4><table><thead><tr><th style="text-align:center">å‘½ä»¤</th><th>å«ä¹‰</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td style="text-align:center">exists key åç§°</td><td>åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨</td><td>æ•°å­—/0</td></tr><tr><td style="text-align:center">expire key ç§’æ•°</td><td>è®¾ç½®keyè¿‡æœŸæ—¶é—´</td><td>1/0</td></tr><tr><td style="text-align:center">ttl key</td><td>æŸ¥çœ‹keyçš„å‰©ä½™è¿‡æœŸæ—¶é—´</td><td>è¿”å›å‰©ä½™æ—¶é—´ï¼Œå¦‚æœä¸è¿‡æœŸè¿”å›-1</td></tr><tr><td style="text-align:center">del key</td><td>æ ¹æ®keyåˆ é™¤é”®å€¼å¯¹ã€‚</td><td>è¢«åˆ é™¤keyçš„æ•°é‡</td></tr></tbody></table><h4 id="2-å­—ç¬¦ä¸²å€¼-String">2. <strong>å­—ç¬¦ä¸²å€¼(String)</strong></h4><table><thead><tr><th style="text-align:center">å‘½ä»¤</th><th>å«ä¹‰</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td style="text-align:center">set key value</td><td>è®¾ç½®æŒ‡å®škeyçš„å€¼</td><td>æˆåŠŸOK</td></tr><tr><td style="text-align:center">get key</td><td>è·å–æŒ‡å®škeyçš„å€¼</td><td>keyçš„å€¼ã€‚ä¸å­˜åœ¨è¿”å›nil</td></tr><tr><td style="text-align:center">setnx key value</td><td>å½“ä¸”ä»…å½“keyä¸å­˜åœ¨æ—¶æ‰æ–°å¢ã€‚</td><td>ä¸å­˜åœ¨æ—¶è¿”å›1ï¼Œå­˜åœ¨è¿”å›0</td></tr><tr><td style="text-align:center">setex key seconds value</td><td>è®¾ç½®keyçš„å­˜æ´»æ—¶é—´ï¼Œæ— è®ºæ˜¯å¦å­˜åœ¨æŒ‡å®škeyéƒ½èƒ½æ–°å¢ï¼Œå¦‚æœå­˜åœ¨keyè¦†ç›–æ—§å€¼ã€‚åŒæ—¶å¿…é¡»æŒ‡å®šè¿‡æœŸæ—¶é—´ã€‚</td><td>OK</td></tr></tbody></table><h4 id="3-å“ˆå¸Œè¡¨-Hash">3.<strong>å“ˆå¸Œè¡¨(Hash)</strong></h4><p>â€‹Hashç±»å‹çš„å€¼ä¸­åŒ…å«å¤šç»„field valueã€‚</p><img src="https://img.soniachen.com/blog/posts/2025/06/Redis-03.jpg" style="zoom:67%;" /><h5 id="3-1-hset">3.1 <strong>hset</strong></h5><p>â€‹ç»™keyä¸­fieldè®¾ç½®å€¼ã€‚</p><p>â€‹è¯­æ³•ï¼šhset key field value</p><p>â€‹è¿”å›å€¼ï¼šæˆåŠŸ1ï¼Œå¤±è´¥0</p><h5 id="3-2-hget">3.2 <strong>hget</strong></h5><p>â€‹è·å–keyä¸­æŸä¸ªfieldçš„å€¼</p><p>â€‹è¯­æ³•ï¼šhget key field</p><p>â€‹è¿”å›å€¼ï¼šè¿”å›fieldçš„å†…å®¹</p><h5 id="3-3-hmset">3.3 <strong>hmset</strong></h5><p>â€‹ç»™keyä¸­å¤šä¸ªfiledè®¾ç½®å€¼</p><p>â€‹è¯­æ³•ï¼šhmset key field value field value</p><p>â€‹è¿”å›å€¼ï¼šæˆåŠŸOK</p><h5 id="3-4-hmget">3.4 <strong>hmget</strong></h5><p>â€‹ä¸€æ¬¡è·å–keyä¸­å¤šä¸ªfieldçš„å€¼</p><p>â€‹è¯­æ³•ï¼šhmget key field field</p><p>â€‹è¿”å›å€¼ï¼švalueåˆ—è¡¨</p><h5 id="3-5-hvals">3.5 <strong>hvals</strong></h5><p>â€‹è·å–keyä¸­æ‰€æœ‰fieldçš„å€¼</p><p>â€‹è¯­æ³•ï¼šhvals key</p><p>â€‹è¿”å›å€¼ï¼švalueåˆ—è¡¨</p><h5 id="3-6-hgetall">3.6 <strong>hgetall</strong></h5><p>â€‹è·å–æ‰€æœ‰fieldå’Œvalue</p><p>â€‹è¯­æ³•ï¼šhgetall key</p><p>â€‹è¿”å›å€¼ï¼šfieldå’Œvalueäº¤æ›¿æ˜¾ç¤ºåˆ—è¡¨</p><h5 id="3-7-hdel">3.7 <strong>hdel</strong></h5><p>â€‹åˆ é™¤keyä¸­ä»»æ„ä¸ªfield</p><p>â€‹è¯­æ³•ï¼šhdel key field field</p><p>â€‹è¿”å›å€¼ï¼šæˆåŠŸåˆ é™¤fieldçš„æ•°é‡</p><h4 id="4-åˆ—è¡¨ï¼ˆListï¼‰">4. <strong>åˆ—è¡¨ï¼ˆListï¼‰</strong></h4><h5 id="4-1-Rpush">4.1 <strong>Rpush</strong></h5><p>â€‹å‘åˆ—è¡¨æœ«å°¾ä¸­æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå€¼</p><p>â€‹è¯­æ³•ï¼›rpush key value value</p><p>â€‹è¿”å›å€¼ï¼šåˆ—è¡¨é•¿åº¦</p><h5 id="4-2-lrange">4.2 <strong>lrange</strong></h5><p>â€‹è¿”å›åˆ—è¡¨ä¸­æŒ‡å®šåŒºé—´å†…çš„å€¼ã€‚å¯ä»¥ä½¿ç”¨-1ä»£è¡¨åˆ—è¡¨æœ«å°¾</p><p>â€‹è¯­æ³•ï¼šlrange list 0 -1</p><p>â€‹è¿”å›å€¼ï¼šæŸ¥è¯¢åˆ°çš„å€¼</p><h5 id="4-3-lpush">4.3 <strong>lpush</strong></h5><p>â€‹å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨å‰é¢</p><p>â€‹è¯­æ³•ï¼šlpush key value value</p><p>â€‹è¿”å›å€¼ï¼šåˆ—è¡¨é•¿åº¦</p><h5 id="4-4-llen">4.4 <strong>llen</strong></h5><p>â€‹è·å–åˆ—è¡¨é•¿åº¦</p><p>â€‹è¯­æ³•ï¼šllen key</p><p>â€‹è¿”å›å€¼ï¼šåˆ—è¡¨é•¿åº¦</p><h5 id="4-5-lrem">4.5 <strong>lrem</strong></h5><p>â€‹åˆ é™¤åˆ—è¡¨ä¸­å…ƒç´ ã€‚countä¸ºæ­£æ•°è¡¨ç¤ºä»å·¦å¾€å³åˆ é™¤çš„æ•°é‡ã€‚è´Ÿæ•°ä»å³å¾€å·¦åˆ é™¤çš„æ•°é‡ã€‚</p><p>â€‹è¯­æ³•ï¼šlrem key count value</p><p>â€‹è¿”å›å€¼ï¼šåˆ é™¤æ•°é‡ã€‚</p><h4 id="5-é›†åˆ-Set">5 <strong>é›†åˆ(Set)</strong></h4><p>â€‹setå’Œjavaä¸­é›†åˆä¸€æ ·ã€‚</p><h5 id="5-1-sadd">5.1 <strong>sadd</strong></h5><p>â€‹å‘é›†åˆä¸­æ·»åŠ å†…å®¹ã€‚ä¸å…è®¸é‡å¤ã€‚</p><p>â€‹è¯­æ³•ï¼šsadd key value value value</p><p>â€‹è¿”å›å€¼ï¼šé›†åˆé•¿åº¦</p><h5 id="5-2-scard">5.2 <strong>scard</strong></h5><p>â€‹è¿”å›é›†åˆå…ƒç´ æ•°é‡</p><p>â€‹è¯­æ³•ï¼šscard key</p><p>â€‹è¿”å›å€¼ï¼šé›†åˆé•¿åº¦</p><h5 id="5-3-smembers">5.3 **smembers **</h5><p>â€‹æŸ¥çœ‹é›†åˆä¸­å…ƒç´ å†…å®¹</p><p>â€‹è¯­æ³•ï¼šsmembers key</p><p>â€‹è¿”å›å€¼ï¼šé›†åˆä¸­å…ƒç´ </p><h4 id="6-æœ‰åºé›†åˆï¼ˆSorted-Setï¼‰">6 .<strong>æœ‰åºé›†åˆï¼ˆSorted Setï¼‰</strong></h4><p>â€‹æœ‰åºé›†åˆä¸­æ¯ä¸ªvalueéƒ½æœ‰ä¸€ä¸ªåˆ†æ•°ï¼ˆscoreï¼‰ï¼Œæ ¹æ®åˆ†æ•°è¿›è¡Œæ’åºã€‚</p><h5 id="6-1-zadd">6.1 <strong>zadd</strong></h5><p>â€‹å‘æœ‰åºé›†åˆä¸­æ·»åŠ æ•°æ®</p><p>â€‹è¯­æ³•ï¼šzadd key score value score value</p><p>â€‹è¿”å›å€¼ï¼šé•¿åº¦</p><h5 id="6-2-zrange">6.2 <strong>zrange</strong></h5><p>â€‹è¿”å›åŒºé—´å†…å®¹ï¼Œwithscoresè¡¨ç¤ºå¸¦æœ‰åˆ†æ•°</p><p>â€‹è¯­æ³•ï¼šzrange key åŒºé—´ [withscores]</p><p>â€‹è¿”å›å€¼ï¼šå€¼åˆ—è¡¨</p><h2 id="ä½¿ç”¨SpringBootæ•´åˆSpringDataRedisæ“ä½œredis"><strong>ä½¿ç”¨SpringBootæ•´åˆSpringDataRedisæ“ä½œredis</strong></h2><p>â€‹Spring Dataæ˜¯Springå…¬å¸çš„é¡¶çº§é¡¹ç›®ï¼Œé‡Œé¢åŒ…å«äº†Nå¤šä¸ªäºŒçº§å­é¡¹ç›®ï¼Œè¿™äº›å­é¡¹ç›®éƒ½æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„é¡¹ç›®ã€‚æ¯ä¸ªå­é¡¹ç›®æ˜¯å¯¹ä¸åŒAPIçš„å°è£…ã€‚</p><p>â€‹æ‰€æœ‰Spring Bootæ•´åˆSpring Data xxxxçš„å¯åŠ¨å™¨éƒ½å«åšspring-boot-starter-data-xxxx</p><p>â€‹Spring Data å¥½å¤„å¾ˆæ–¹ä¾¿æ“ä½œå¯¹è±¡ç±»å‹ã€‚</p><p>â€‹æŠŠRedisä¸åŒå€¼å¾—ç±»å‹æ”¾åˆ°ä¸€ä¸ªopsForXXXæ–¹æ³•ä¸­ã€‚</p><p>â€‹opsForValue : Stringå€¼</p><p>â€‹opsForList : åˆ—è¡¨List</p><p>â€‹opsForHash: å“ˆå¸Œè¡¨Hash</p><p>â€‹opsForZSet: æœ‰åºé›†åˆSorted Set</p><p>â€‹opsForSet : é›†åˆ</p><h4 id="1-æ·»åŠ ä¾èµ–">1. <strong>æ·»åŠ ä¾èµ–</strong></h4><pre class="language-none"><code class="language-none">&lt;parent&gt;    &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;    &lt;artifactId&gt;spring-boot-starter-parent&lt;&#x2F;artifactId&gt;    &lt;version&gt;2.2.2.RELEASE&lt;&#x2F;version&gt;&lt;&#x2F;parent&gt;&lt;dependencies&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;        &lt;artifactId&gt;spring-boot-starter-web&lt;&#x2F;artifactId&gt;    &lt;&#x2F;dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;        &lt;artifactId&gt;spring-boot-starter-test&lt;&#x2F;artifactId&gt;    &lt;&#x2F;dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;        &lt;artifactId&gt;spring-boot-starter-data-redis&lt;&#x2F;artifactId&gt;    &lt;&#x2F;dependency&gt;&lt;&#x2F;dependencies&gt;</code></pre><h4 id="2-é…ç½®é…ç½®æ–‡ä»¶">2. <strong>é…ç½®é…ç½®æ–‡ä»¶</strong></h4><p>â€‹spring.redis.host=localhost é»˜è®¤å€¼</p><p>â€‹spring.redis.port=6379 ç«¯å£å·é»˜è®¤å€¼</p><pre class="language-none"><code class="language-none">spring:  redis:    host: 192.168.52.133# cluster:# nodes: 192.168.93.10:7001,192.168.93.10:7002,192.168.93.10:7003,192.168.93.10:7004,192.168.93.10:7005,192.168.93.10:7006</code></pre><h4 id="3-ç¼–å†™é…ç½®ç±»">3.<strong>ç¼–å†™é…ç½®ç±»</strong></h4><pre class="language-none"><code class="language-none">@Configurationpublic class RedisConfig &#123;    @Bean    public RedisTemplate&lt;String,Object&gt; redisTemplate(RedisConnectionFactory   factory)&#123;        RedisTemplate&lt;String,Object&gt; redisTemplate &#x3D; new RedisTemplate&lt;&gt;();        redisTemplate.setConnectionFactory(factory);        redisTemplate.setKeySerializer(new StringRedisSerializer());        redisTemplate.setValueSerializer(new Jackson2JsonRedisSerializer&lt;Object&gt;(Object.class));        return redisTemplate;    &#125;&#125;</code></pre><h4 id="4-ç¼–å†™ä»£ç ">4. <strong>ç¼–å†™ä»£ç </strong></h4><h5 id="4-1-ç¼–å†™å¯¹è±¡æ–°å¢">4.1 <strong>ç¼–å†™å¯¹è±¡æ–°å¢</strong></h5><pre class="language-none"><code class="language-none">@Autowiredprivate RedisTemplate&lt;String, Object&gt; redisTemplate;@Testpublic void testString() &#123;    People peo &#x3D; new People(1, &quot;å¼ ä¸‰&quot;);    redisTemplate.opsForValue().set(&quot;peo1&quot;, peo);&#125;</code></pre><h5 id="4-2-ç¼–å†™å¯¹è±¡è·å–">4.2 <strong>ç¼–å†™å¯¹è±¡è·å–</strong></h5><p>æ­¤å¤„å¿…é¡»ç¼–å†™å€¼åºåˆ—åŒ–å™¨ã€‚ä¸æŒ‡å®šæ—¶è¿”å›ç±»å‹ä¸ºLinkedHashMap</p><pre class="language-none"><code class="language-none">@Testpublic void testGetString() &#123;    redisTemplate.setValueSerializer(new Jackson2JsonRedisSerializer&lt;People&gt;(People.class));    People peo &#x3D; (People) redisTemplate.opsForValue().get(&quot;peo1&quot;);    System.out.println(peo);&#125;</code></pre><h5 id="4-3-ç¼–å†™List">4.3 <strong>ç¼–å†™List</strong></h5><pre class="language-none"><code class="language-none">@Testpublic void testList() &#123;    List&lt;People&gt; list &#x3D; new ArrayList&lt;&gt;();    list.add(new People(1, &quot;å¼ ä¸‰&quot;));    list.add(new People(2, &quot;æå››&quot;));    redisTemplate.opsForValue().set(&quot;list2&quot;, list);&#125;</code></pre><h5 id="4-4-ç¼–å†™Listå–å€¼">4.4 <strong>ç¼–å†™Listå–å€¼</strong></h5><pre class="language-none"><code class="language-none">@Testpublic void testGetList()&#123;    redisTemplate.setValueSerializer(new Jackson2JsonRedisSerializer&lt;List&gt;(List.class));    List&lt;People&gt; list2 &#x3D; (List&lt;People&gt;) redisTemplate.opsForValue().get(&quot;list2&quot;);    System.out.println(list2);&#125;</code></pre><h1>redisæŒä¹…åŒ–</h1><p>â€‹Redisä¸ä»…ä»…æ˜¯ä¸€ä¸ªå†…å­˜å‹æ•°æ®åº“ï¼Œè¿˜å…·å¤‡æŒä¹…åŒ–èƒ½åŠ›ã€‚</p><h4 id="1-RDB">1. <strong>RDB</strong></h4><p>â€‹rdbæ¨¡å¼æ˜¯é»˜è®¤æ¨¡å¼ï¼Œå¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…ç”Ÿæˆæ•°æ®å¿«ç…§ï¼ˆsnapshotï¼‰ï¼Œé»˜è®¤ä¿å­˜åˆ°dump.rdbæ–‡ä»¶ä¸­ã€‚å½“redisé‡å¯åä¼šè‡ªåŠ¨åŠ è½½dump.rdbæ–‡ä»¶ä¸­å†…å®¹åˆ°å†…å­˜ä¸­ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨SAVEï¼ˆåŒæ­¥ï¼‰æˆ–BGSAVEï¼ˆå¼‚æ­¥ï¼‰æ‰‹åŠ¨ä¿å­˜æ•°æ®ã€‚æ¯”å¦‚save 900 1 çš„è®¾ç½®å°±ä¼šè®©æœåŠ¡å™¨åœ¨900 ç§’ä»¥å†…ï¼Œå¦‚æœå¯¹æ•°æ®åº“ä¿®æ”¹äº†è‡³å°‘ä¸€æ¬¡çš„æ—¶å€™å°±ä¼šæ‰§è¡ŒBGSAVEã€‚</p><p>ä¼˜ç‚¹å°±æ˜¯è¿™æ ·çš„æ¢å¤æ•ˆç‡ä¼šæ¯”aofé«˜ï¼Œè€Œä¸”ç›´æ¥ç”¨æ–‡ä»¶å°±å¯ä»¥è¿˜åŸï¼Œä½†æ˜¯å¦‚æœå‡ºç°ä¸å¯é¢„çŸ¥çš„å…³é—­çš„æ—¶å€™ï¼Œå°±ä¼šå¯èƒ½ä¸¢å¤±æ•°æ®ã€‚å¹¶ä¸”æ¯æ¬¡ä¿å­˜æ•°æ®çš„æ—¶å€™éƒ½ä¼šè¿›è¡Œfork()å­è¿›ç¨‹ï¼Œè¿™æ ·ä¼šå¯¼è‡´å¤§é‡çš„è€—è´¹æ€§èƒ½ã€‚</p><h4 id="2-AOF">2 <strong>AOF</strong></h4><p>â€‹AOFé»˜è®¤æ˜¯å…³é—­çš„ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯AOFã€‚Redisæ”¯æŒAOFå’ŒRDBåŒæ—¶ç”Ÿæ•ˆï¼Œå¦‚æœåŒæ—¶å­˜åœ¨ï¼ŒAOFä¼˜å…ˆçº§é«˜äºRDBï¼Œä¹Ÿå°±æ˜¯Redisé‡æ–°å¯åŠ¨æ—¶ä¼šä½¿ç”¨AOFè¿›è¡Œæ•°æ®æ¢å¤ï¼Œä»–å­˜å‚¨çš„æ˜¯redisæ‰€æœ‰çš„ä¿®æ”¹æ•°æ®çš„æ“ä½œã€‚å¼€å¯æ–¹æ³•å°±æ˜¯ä¿®æ”¹redis.confæ–‡ä»¶é‡Œé¢appendonly yesï¼ˆé»˜è®¤æ˜¯noï¼‰</p><p>ä¼˜ç‚¹å°±æ˜¯æ¯”RDBæ•°æ®æ›´åŠ å®‰å…¨ä¸å®¹æ˜“ä¸¢å¤±æ•°æ®ï¼Œåœ¨é‡å¯çš„æ—¶å€™å°±ä¼šè¿›è¡Œæ•°æ®æ¢å¤ï¼Œä½†æ˜¯å°±æ˜¯æ•°æ®é›†å¾ˆå¤§ï¼Œæ¯”RDBä¹Ÿä¼šæ›´æ…¢ä¸€ç‚¹ã€‚</p><pre class="language-none"><code class="language-none"># é»˜è®¤noappendonly yes# aofæ–‡ä»¶åappendfilename &quot;appendonly.aof&quot;</code></pre><h1>ç©¿é€ã€å‡»ç©¿ã€é›ªå´©ã€é¢„çƒ­ã€æ›´æ–°è¿‡æœŸkey</h1><h2 id="ç©¿é€">ç©¿é€</h2><p>å°±æ˜¯æ•°æ®åº“å’Œç¼“å­˜éƒ½æ²¡æœ‰è¿™ä¸ªæ•°æ®ï¼Œè¿™æ ·å°±å¯¼è‡´äº†ç”¨æˆ·æŸ¥è¯¢çš„æ—¶å€™å†ç¼“å­˜é‡Œé¢æ‰¾ä¸åˆ°ï¼Œæ¯æ¬¡åˆå»æ•°æ®åº“é‡Œé¢æ‰¾ï¼Œç„¶åè¿”å›ç©ºï¼Œç›¸å½“äºè¿›è¡Œäº†ä¸¤æ¬¡æ— æ•ˆè¯·æ±‚ï¼Œè¦è§£å†³è¿™ç§é‡å¤çš„æ— æ•ˆè¯·æ±‚ï¼Œå¯ä»¥ç”¨ä¸¤ç§åŠæ³•ï¼Œç¬¬ä¸€ç§å°±æ˜¯ç®€å•æš´åŠ›çš„å°†keyå¯¹åº”nullå€¼å­˜å…¥ç¼“å­˜ï¼Œä½†æ˜¯è¿™æ ·å°±ä¼šæœ‰å¯¹ç©ºé—´çš„å ç”¨ï¼Œç¬¬äºŒç§å°±æ˜¯ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå¸ƒéš†è¿‡æ»¤å™¨æ˜¯å°†æ‰€æœ‰å¯èƒ½å­˜åœ¨çš„æ•°æ®hashåˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„bitmapé‡Œé¢ï¼Œä¸€ä¸ªä¸€å®šä¸ä¼šå­˜åœ¨çš„æ•°æ®ï¼Œå°±ä¼šè¢«è¿™ä¸ªbitmapç»™æ‹¦æˆªæ‰ï¼Œä»è€Œé¿å…äº†ç›´æ¥å¯¹åº•å±‚æ•°æ®åº“æŸ¥è¯¢çš„å‹åŠ›ï¼Œå¹¶ä¸”å› ä¸ºæœ‰hashå†²çªçš„å¯èƒ½ï¼Œåº•å±‚ç®—æ³•ä½¿ç”¨å¤šä¸ªhashå‡½æ•°æ¥è§£å†³â€œå†²çªâ€ï¼Œå› ä¸ºåŒä¸€ä¸ªhashå‡½æ•°ç®—å‡ºæ¥çš„å€¼æœ‰å¯èƒ½ç›¸ç­‰ï¼Œæ‰€ä»¥å¼•å…¥å¤šä¸ªhashï¼Œé€šè¿‡ä¸€ä¸ªhashæŸå…ƒç´ ä¸åœ¨é›†åˆé‡Œé¢ï¼Œè¯´æ˜å°±ä¸åœ¨ï¼Œåˆ¤æ–­åœ¨çš„æ—¶å€™å°±å¾—å½“æ‰€æœ‰hashç®—å‡ºæ¥åœ¨æ‰ç®—åœ¨ã€‚è¿™æ˜¯å¸ƒéš†è¿‡æ»¤å™¨çš„å®ç°æ ¸å¿ƒã€‚</p><h2 id="å‡»ç©¿">å‡»ç©¿</h2><p>å‡»ç©¿å°±æ˜¯å½“ä¸€ä¸ªkeyå¾ˆçƒ­ç‚¹çš„æ—¶å€™ï¼Œå¤§å¹¶å‘é›†ä¸­å¯¹è¿™ä¸ªç‚¹è¿›è¡Œè®¿é—®ï¼Œå½“è¿™ä¸ªkeyåœ¨ç¼“å­˜è¿‡æœŸå¤±æ•ˆçš„ä¸€ç¬é—´ï¼Œå°±ä¼šæŒç»­çš„ç©¿ç ´ç¼“å­˜ï¼Œç›´æ¥å¯¹æ•°æ®åº“è¿›è¡Œä¸€ä¸ªè¯·æ±‚ï¼Œç®€å•æ¥è¯´å°±æ˜¯ç¼“å­˜é‡Œé¢æ²¡æœ‰ï¼Œæ•°æ®åº“é‡Œé¢æœ‰ã€‚</p><p>è§£å†³çš„è¯å¯ä»¥åœ¨è®¿é—®keyä¹‹å‰ï¼ŒæŠŠè¿™äº›è¯·æ±‚ç”¨é”é”èµ·æ¥ï¼Œè®¾ç½®ä¸€ä¸ªçŸ­æœŸçš„keyæ¥é”ï¼Œè®¿é—®ç»“æŸå†åˆ é™¤çŸ­æœŸkeyã€‚ å¤„ç†çš„æ¡ˆä¾‹ä¹‹å‰åšé¡¹ç›®çš„æ—¶å€™æˆ‘è®°å¾—ï¼Œå¤šä¸ªæœºå™¨æ‹¿tokenï¼Œtokenå†å­˜ä¸€ä»½åˆ°redisé‡Œé¢ï¼Œä¿è¯ç³»ç»Ÿå†tokenè¿‡æœŸçš„æ—¶å€™åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»è·å–tokenï¼Œä½¿ç”¨åˆ†å¸ƒå¼é”ã€‚</p><h2 id="é›ªå´©">é›ªå´©</h2><p>ç¼“å­˜é›ªå´©ä¹Ÿæ˜¯ä¸€ç§ç¼“å­˜é‡Œé¢æ²¡æœ‰æ•°æ®åº“é‡Œé¢æœ‰çš„æƒ…å†µï¼Œåªä¸è¿‡æ˜¯æ¯”å‡»ç©¿å¤šäº†å¾ˆå¤šè¿‡æœŸçš„keyï¼Œæ¯”å¦‚è®¾ç½®äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼ŒåŒä¸€æ—¶é—´å†…å‡ºç°äº†å¤§é¢ç§¯çš„ç¼“å­˜è¿‡æœŸï¼Œæ‰€æœ‰åŸæœ¬åº”è¯¥è®¿é—®ç¼“å­˜çš„è¯·æ±‚éƒ½å»æŸ¥è¯¢æ•°æ®åº“äº†ï¼Œè€Œå¯¹æ•°æ®åº“CPUå’Œå†…å­˜é€ æˆå·¨å¤§å‹åŠ›ï¼Œä¸¥é‡çš„ä¼šé€ æˆæ•°æ®åº“å®•æœºã€‚ä»è€Œå½¢æˆä¸€ç³»åˆ—è¿é”ååº”ï¼Œé€ æˆæ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚<br>è§£å†³åŠæ³•ï¼š<br>å¤§å¤šæ•°ç³»ç»Ÿè®¾è®¡è€…è€ƒè™‘ç”¨åŠ é”ï¼ˆ æœ€å¤šçš„è§£å†³æ–¹æ¡ˆï¼‰æˆ–è€…é˜Ÿåˆ—çš„æ–¹å¼ä¿è¯æ¥ä¿è¯ä¸ä¼šæœ‰å¤§é‡çš„çº¿ç¨‹å¯¹æ•°æ®åº“ä¸€æ¬¡æ€§è¿›è¡Œè¯»å†™ï¼Œä»è€Œé¿å…å¤±æ•ˆæ—¶å¤§é‡çš„å¹¶å‘è¯·æ±‚è½åˆ°åº•å±‚å­˜å‚¨ç³»ç»Ÿä¸Šã€‚è¿˜æœ‰ä¸€ä¸ªç®€å•æ–¹æ¡ˆå°±æ—¶è®²<strong>ç¼“å­˜å¤±æ•ˆæ—¶é—´åˆ†æ•£å¼€ã€‚</strong></p><h2 id="é¢„çƒ­">é¢„çƒ­</h2><p>ç¼“å­˜é¢„çƒ­å°±æ˜¯åœ¨ç³»ç»Ÿä¸Šçº¿åï¼Œæˆ‘ä»¬å°†ç›¸å…³çš„ç¼“å­˜æ•°æ®ç›´æ¥åŠ è½½åˆ°ç³»ç»Ÿä¹‹ä¸­ï¼Œè¿™æ ·æå‰å°±é¿å…äº†ä¸€ä¸ªç”¨æˆ·è¯·æ±‚ç›´æ¥å»æŸ¥è¯¢æ•°æ®åº“çš„æƒ…å†µã€‚</p><p>å…·ä½“æ“ä½œå¯ä»¥æ˜¯å…ˆå†™ä¸€ä¸ªç¼“å­˜åˆ·æ–°é¡µé¢ï¼Œç„¶åæ•°æ®é‡å¦‚æœä¸æ‰“å°±è‡ªè¡ŒåŠ è½½ï¼Œåé¢å†å®šæ—¶åˆ·æ–°</p><h2 id="æ›´æ–°">æ›´æ–°</h2><p>è‡ªå®šä¹‰çš„ç¼“å­˜æ·˜æ±°ï¼ˆæ›´ï¼‰ï¼Œç¬¬ä¸€ç§æ˜¯å®šæ—¶å»æ¸…ç†è¿‡æœŸçš„ç¼“å­˜ï¼› ç¬¬äºŒç§æ˜¯ç”¨æˆ·è¯·æ±‚è¿‡æ¥æ—¶å†å»åˆ¤æ–­è¿™ä¸ªç¼“å­˜æ˜¯å¦è¿‡æœŸã€‚<br>ä¸¤è€…å„æœ‰ä¼˜åŠ£ï¼Œç¬¬ä¸€ç§çš„ç¼ºç‚¹æ˜¯ç»´æŠ¤å¤§é‡ç¼“å­˜çš„keyæ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œç¬¬äºŒç§çš„ç¼ºç‚¹å°±æ˜¯æ¯æ¬¡ç”¨æˆ·è¯·æ±‚è¿‡æ¥éƒ½è¦åˆ¤æ–­ç¼“å­˜å¤±æ•ˆï¼Œé€»è¾‘ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼</p><h2 id="é™çº§">é™çº§</h2><p>é™çº§æœåŠ¡ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢redisæœåŠ¡æ•…éšœå¯¼è‡´æ•°æ®åº“ä¸€èµ·å‘ç”Ÿé›ªå´©é—®é¢˜ï¼Œæ‰€ä»¥å¯¹äºä¸è¦çš„ç¼“å­˜æ•°æ®ï¼Œå¯ä»¥è¿›è¡Œé™çº§ï¼Œä¸¾ä¸ªä¾‹å­å°±æ˜¯ï¼Œrediså‡ºç°é—®é¢˜äº†ï¼Œå°±ä¸å»æ•°æ®åº“æŸ¥è¯¢ï¼Œè€Œæ˜¯è¿”å›é»˜è®¤å€¼ç»™ç”¨æˆ·ã€‚</p><h1>rediså•çº¿ç¨‹</h1><img src="https://img.soniachen.com/blog/posts/2025/06/image-20220320220341675.png" alt="image-20220320220341675" style="zoom:50%;" /><p>Redisæ˜¯å•çº¿ç¨‹çš„ï¼Œåšçš„éƒ½æ˜¯çº¯å†…å­˜æ“ä½œï¼Œä½¿ç”¨å•çº¿ç¨‹å°±é¿å…äº†é¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¹¶ä¸”åœ¨6.xç‰ˆæœ¬ä»¥åå°±å¢åŠ äº†éé˜»å¡I/Oå¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œä½†æ˜¯å·¥ä½œçº¿ç¨‹å…¶å®è¿˜æ˜¯å•çº¿ç¨‹ï¼Œè®¡ç®—éƒ½æ˜¯ä¸²è¡Œçš„ï¼Œredisä»å†…æ ¸è¯»å–æ•°æ®æ¬è¿æ•°æ®çš„æ“ä½œåœ¨6.xç‰ˆæœ¬ä»¥åå°±æ˜¯å¹¶è¡Œçš„åœ¨å¤šä¸ªcpuä¸Šè¿›è¡Œï¼Œä½†æ˜¯ä¸»è¦çš„è®¡ç®—å·¥ä½œçº¿ç¨‹é‡Œè¿˜æ˜¯å°†å¤šä¸ªäº‹ä»¶è¿›è¡Œä¸²è¡Œå¤„ç†çš„ï¼Œå¤šè·¯å¤ç”¨å™¨é‡Œé¢ä½¿ç”¨selecã€epollç­‰è¿›è¡Œè¯»å†™äº‹ä»¶çš„ä¸€ä¸ªåˆ¤æ–­ï¼Œæœ‰å°±å–å‡ºæ¥è¿›è¡Œå¤„ç†ã€‚</p><h3 id="å¿«çš„å…³é”®">å¿«çš„å…³é”®</h3><p>(ä¸€)çº¯å†…å­˜æ“ä½œ<br>(äºŒ)å•çº¿ç¨‹æ“ä½œï¼Œé¿å…äº†é¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢<br>(ä¸‰)é‡‡ç”¨äº†éé˜»å¡I/Oå¤šè·¯å¤ç”¨æœºåˆ¶</p><h1>åˆ†å¸ƒå¼é”</h1><p>Redisä¸ºå•è¿›ç¨‹å•çº¿ç¨‹æ¨¡å¼ï¼Œé‡‡ç”¨é˜Ÿåˆ—æ¨¡å¼å°†å¹¶å‘è®¿é—®å˜æˆä¸²è¡Œè®¿é—®ï¼Œä¸”å¤šå®¢æˆ·ç«¯å¯¹Redisçš„è¿æ¥å¹¶ä¸å­˜åœ¨ç«äº‰å…³ç³»Redisä¸­å¯ä»¥ä½¿ç”¨SETNXå‘½ä»¤å®ç°åˆ†å¸ƒå¼é”ã€‚<br>å°† key çš„å€¼è®¾ä¸º value ï¼Œå½“ä¸”ä»…å½“ key ä¸å­˜åœ¨ã€‚ è‹¥ç»™å®šçš„ key å·²ç»å­˜åœ¨ï¼Œåˆ™ SETNX ä¸åšä»»ä½•åŠ¨ä½œ</p><p>è§£é”ï¼šä½¿ç”¨ del key å‘½ä»¤å°±èƒ½é‡Šæ”¾é”<br>è§£å†³æ­»é”ï¼š<br>1ï¼‰é€šè¿‡Redisä¸­expire()ç»™é”è®¾å®šæœ€å¤§æŒæœ‰æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡ï¼Œåˆ™Redisæ¥å¸®æˆ‘ä»¬é‡Šæ”¾é”ã€‚<br>2ï¼‰ ä½¿ç”¨ setnx key â€œå½“å‰ç³»ç»Ÿæ—¶é—´+é”æŒæœ‰çš„æ—¶é—´â€å’Œgetset key â€œå½“å‰ç³»ç»Ÿæ—¶é—´+é”æŒæœ‰çš„æ—¶é—´â€ç»„åˆçš„å‘½ä»¤å°±å¯ä»¥å®ç°ã€‚</p><p>é”ç»­æœŸï¼šå¥½åƒæ˜¯redissionè¿™ä¸ªå®¢æˆ·ç«¯é‡Œé¢è‡ªåŠ¨å°±ä¼šå®ç°çš„ä¸€ä¸ªï¼Œåº•å±‚æˆ‘çœ‹è¿‡ä¸€ç¯‡æ–‡ç« å¥½åƒæ˜¯watchdogæ¥æ¯30ç§’åˆ¤æ–­æ˜¯å¦clientè¿˜æŒæœ‰é”ï¼Œå¦‚æœè¿˜æŒæœ‰å°±ä¸æ–­å»¶é•¿keyï¼Œæˆ‘è¿˜è®°å¾—å¥½åƒè¿˜ä½¿ç”¨çš„æ˜¯å¯é‡å…¥é”ã€‚</p><h1>redisçš„è¿‡æœŸç­–ç•¥ä»¥åŠå†…å­˜æ·˜æ±°æœºåˆ¶</h1><p>redisé‡‡ç”¨çš„æ˜¯å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤ç­–ç•¥ã€‚å®šæœŸåˆ é™¤å‘¢ä¸¾ä¸ªä¾‹å­å°±æ˜¯æ¯ä¸€æ®µæ—¶é—´å»æ£€æŸ¥æ˜¯å¦æœ‰è¿‡æœŸçš„keyï¼Œä½†æ˜¯è¿™ä¸ªæ£€æŸ¥ä¸æ˜¯è¯´æ£€æŸ¥æ‰€æœ‰çš„ï¼Œæ˜¯éšæœºæŠ½å–æ£€æŸ¥ï¼Œæ‰€ä»¥å¦‚æœåªé‡‡ç”¨å®šæœŸåˆ é™¤çš„è¯ï¼Œå°±ä¼šå¯¼è‡´å¾ˆå¤škeyæ²¡æœ‰è¢«å®šæ—¶åˆ é™¤ï¼Œæ‰€ä»¥å°±å¼•å…¥æƒ°æ€§åˆ é™¤ï¼Œå°±æ˜¯è¯´åœ¨ä½ è·å–æŸä¸ªkeyçš„æ—¶å€™ï¼Œredisä¼šæ£€æŸ¥ä¸€ä¸‹ï¼Œè¿™ä¸ªkeyå¦‚æœè®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œå°±åˆ¤æ–­æ˜¯å¦è¿‡æœŸè¿›è¡Œåˆ é™¤æ“ä½œã€‚</p><p>ä½†æ˜¯å³ä½¿é‡‡ç”¨äº†è¿™ä¸¤ç§ç­–ç•¥ï¼Œä¹Ÿä¼šæœ‰è¿™ç§æƒ…å†µï¼Œå°±æ˜¯å¦‚æœå®šæœŸåˆ é™¤æ²¡åˆ æ‰ï¼Œä¹Ÿæ²¡æœ‰åŠæ—¶å»è¯·æ±‚ä¸€ä¸ªkeyï¼Œä¹Ÿå°±æ˜¯æƒ°æ€§åˆ é™¤ä¹Ÿæ²¡ç”Ÿæ•ˆï¼Œå°±ä¼šå¯¼è‡´ä¸€ä¸ªå†…å­˜è¶Šæ¥è¶Šé«˜ï¼Œæ‰€ä»¥å°±è¿˜æœ‰ä¸€ä¸ªå†…å­˜æ·˜æ±°æœºåˆ¶ã€‚</p><p>å†…å­˜æ·˜æ±°æœºåˆ¶æ˜¯redis.confæ–‡ä»¶çš„ä¸€è¡Œé…ç½®ï¼Œ ä½¿ç”¨maxmemory-policy åŠ ä¸Š å…·ä½“æ·˜æ±°æœºåˆ¶çš„è¿™ä¸ªåç§°ï¼š æœºåˆ¶æˆ‘è®°å¾—æœ‰è¿™å‡ ç§ï¼š</p><ul><li>volatile-lruï¼šä»<strong>å·²è®¾ç½®è¿‡æœŸæ—¶é—´</strong>çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰æœ€è¿‘<strong>æœ€å°‘ä½¿ç”¨</strong>çš„æ•°æ®æ·˜æ±°</li><li>volatile-ttlï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰<strong>å°†è¦è¿‡æœŸ</strong>çš„æ•°æ®æ·˜æ±°</li><li>volatile-randomï¼šä»<strong>å·²è®¾ç½®è¿‡æœŸæ—¶é—´</strong>çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­<strong>ä»»æ„é€‰æ‹©</strong>æ•°æ®æ·˜æ±°</li><li>allkeys-lruï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°</li><li>allkeys-randomï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°</li><li>no-envictionï¼ˆé©±é€ï¼‰ï¼šç¦æ­¢é©±é€æ•°æ®ï¼Œæ–°å†™å…¥æ“ä½œä¼šæŠ¥é”™</li><li>psï¼šå¦‚æœæ²¡æœ‰è®¾ç½® expire çš„key, ä¸æ»¡è¶³å…ˆå†³æ¡ä»¶(prerequisites); é‚£ä¹ˆ volatile-lru, volatile-random å’Œ volatile-ttl ç­–ç•¥çš„è¡Œä¸º, å’Œ noeviction(ä¸åˆ é™¤) åŸºæœ¬ä¸Šä¸€è‡´ã€‚</li></ul><h1>ä¸»ä»å¤åˆ¶ é›†ç¾¤ï¼ˆclusterï¼‰</h1><p>æ”¯æŒé›†ç¾¤åŠŸèƒ½ï¼Œå¹¶ä¸”è¿˜æ”¯æŒä¸»ä»å¤åˆ¶ï¼Œå°±æ˜¯æ¯ä¸ªèŠ‚ç‚¹æœ‰Nä¸ªå¤åˆ¶å“ï¼Œç„¶åå…¶ä¸­ä¸€ä¸ªå¤åˆ¶å“æ˜¯ä¸»ï¼Œå¦å¤–éƒ½æ˜¯slaveä»ï¼Œæ”¯æŒä¸€ä¸ª ä¸€ä¸»å¤šä»ï¼Œæ¯ä¸ªä»åˆå¯ä»¥çœ‹ä½œä¸»ï¼Œä¼˜ç‚¹å°±æ˜¯å¢å¼ºå•ä¸€èŠ‚ç‚¹çš„å¥å£®æ€§ï¼Œä»èŠ‚ç‚¹å¯ä»¥å¯¹ä¸»èŠ‚ç‚¹åšä¸€ä¸ªå¤åˆ¶æ•°æ®å¤‡ä»½ï¼Œæå‡äº†å®¹ç¾èƒ½åŠ›ã€‚è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯redisé‡Œé¢ä¸»èŠ‚ç‚¹ä¸€èˆ¬ç”¨æ¥å†™ï¼Œä»èŠ‚ç‚¹åªèƒ½è¯»ï¼Œè¿™æ ·å®ç°äº†è¯»å†™åˆ†ç¦»ï¼Œå‡å°‘å¹¶å‘å‡ºç°çš„ä¸€äº›åŒæ­¥é”™è¯¯ã€‚</p><p>æ­å»ºä¸»ä»èŠ‚ç‚¹ï¼š replicaof + ä¸»èŠ‚ç‚¹ip+ ç«¯å£</p><p>å¯åŠ¨ï¼šåœ¨starup.shæ–‡ä»¶é‡Œé¢è¿›è¡Œè®¾ç½® cd + ç›®å½•+ redis.conf</p><p>æ”¶äºæƒé™ï¼šchmod a+x <a href="http://startup.sh">startup.sh</a></p><h3 id="å“¨å…µ">å“¨å…µ</h3><p>ç”±äºä¸»ä»å¤åˆ¶é»˜è®¤ä»åªæœ‰è¯»èƒ½åŠ›ï¼Œæ‰€ä»¥å¦‚æœä¸»èŠ‚ç‚¹å‡ºç°å®•æœºï¼Œæ•´ä¸ªèŠ‚ç‚¹å°±ä¸å…·å¤‡å†™èƒ½åŠ›äº†ï¼Œæ‰€ä»¥å‘¢æˆ‘ä»¬ç”¨å“¨å…µSentinelæ¥ç›‘æ§èŠ‚ç‚¹ï¼Œå¦‚æœä¸»èŠ‚ç‚¹å®•æœºï¼Œå°±é‡æ–°é€‰å–ä¸»èŠ‚ç‚¹ã€‚</p><h1>Memcacheä¸Redisçš„åŒºåˆ«éƒ½æœ‰å“ªäº›ï¼Ÿ</h1><p>(1) memcachedæ‰€æœ‰çš„å€¼å‡æ˜¯ç®€å•çš„å­—ç¬¦ä¸²ï¼Œredisä½œä¸ºå…¶æ›¿ä»£è€…ï¼Œæ”¯æŒæ›´ä¸ºä¸°å¯Œçš„æ•°æ®ç±»å‹</p><p>(2) redisçš„é€Ÿåº¦æ¯”memcachedå¿«å¾ˆå¤š</p><p>(3) rediså¯ä»¥æŒä¹…åŒ–å…¶æ•°æ®ï¼šå­˜å‚¨æ–¹å¼ MemecacheæŠŠæ•°æ®å…¨éƒ¨å­˜åœ¨å†…å­˜ä¹‹ä¸­ï¼Œæ–­ç”µåä¼šæŒ‚æ‰ï¼Œæ•°æ®ä¸èƒ½è¶…è¿‡å†…å­˜å¤§å°ã€‚ Redisæœ‰éƒ¨ä»½å­˜åœ¨ç¡¬ç›˜ä¸Šï¼Œrediså¯ä»¥æŒä¹…åŒ–å…¶æ•°æ®</p><p>(4)ä½¿ç”¨åº•å±‚æ¨¡å‹ä¸åŒ å®ƒä»¬ä¹‹é—´åº•å±‚å®ç°æ–¹å¼ ä»¥åŠä¸å®¢æˆ·ç«¯ä¹‹é—´é€šä¿¡çš„åº”ç”¨åè®®ä¸ä¸€æ ·ã€‚ Redisç›´æ¥è‡ªå·±æ„å»ºäº†VM æœºåˆ¶ ï¼Œå› ä¸ºä¸€èˆ¬çš„ç³»ç»Ÿè°ƒç”¨ç³»ç»Ÿå‡½æ•°çš„è¯ï¼Œä¼šæµªè´¹ä¸€å®šçš„æ—¶é—´å»ç§»åŠ¨å’Œè¯·æ±‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> NoSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤šçº¿ç¨‹</title>
      <link href="/2022/02/09/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
      <url>/2022/02/09/%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=44a718db-6e83-3d10-1fc2-5294ea4daa73</cover>
      <date>Wed Feb 09 2022 13:19:50 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>å¹¶å‘ç¼–ç¨‹ä¸‰å¤§ç‰¹æ€§</h1><h2 id="å¯è§æ€§">å¯è§æ€§</h2><p><u><strong>MESI</strong></u> å¤šçº¿ç¨‹çš„åº•å±‚å¹¶ä¸æ˜¯é€šè¿‡mesi</p><p>å¤šçº¿ç¨‹æé«˜æ•ˆç‡ï¼Œæœ¬åœ°ç¼“å­˜æ•°æ®ï¼Œé€ æˆæ•°æ®ä¿®æ”¹ä¸å¯è§ï¼Œ</p><p>è¦æƒ³ä¿è¯å¯è§ï¼Œè¦ä¹ˆè§¦å‘åŒæ­¥æŒ‡ä»¤ï¼Œè¦ä¹ˆåŠ ä¸Švolatileï¼Œè¢«ä¿®é¥°çš„å†…å­˜ï¼Œåªè¦æœ‰ä¿®æ”¹ï¼Œé©¬ä¸ŠåŒæ­¥æ¶‰åŠåˆ°çš„æ¯ä¸ªçº¿ç¨‹ã€‚</p><span id="more"></span><h3 id="volatile">==volatile==</h3><h5 id="ä»‹ç»ä¸€ä¸‹volatileçš„åŠŸèƒ½ï¼Ÿ">==ä»‹ç»ä¸€ä¸‹volatileçš„åŠŸèƒ½ï¼Ÿ==</h5><p>volatileå…³é”®å­—ä¿è¯äº†<strong>å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’</strong></p><p>æä¾›äº†happen-beforeçš„ä¿è¯ï¼Œç¡®ä¿ä¸€ä¸ªçº¿ç¨‹çš„ä¿®æ”¹å¯ä»¥å¯¹å…¶ä»–çº¿ç¨‹æ˜¯å¯è§çš„ã€‚å½“ä¸€ä¸ªå…±äº«å˜é‡è¢«ä¿®é¥°çš„æ—¶å€™ï¼Œå°±ä¼šä¿è¯ä¿®æ”¹çš„å€¼ç«‹å³è¢«æ›´æ–°åˆ°å†…å­˜ï¼Œå½“å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–çš„æ—¶å€™ï¼Œå°±ä¼šå»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚ä»å®é™…è§’åº¦æ¥è¯´ï¼Œå…¶ä¸­çš„ä¸€ä¸ªé‡è¦ä½œç”¨å°±æ˜¯ä¸CASç»“åˆï¼Œä¿è¯äº†<strong>åŸå­æ€§</strong>ã€‚volatileç»å¸¸ç”¨åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å•æ¬¡æ“ä½œã€‚</p><p><u>é€šä¿—æ¥è®²</u>å°±æ˜¯ abçº¿ç¨‹è¦ç”¨ä¸€ä¸ªå˜é‡ï¼Œç„¶åjavaé»˜è®¤æ˜¯açº¿ç¨‹ä¸­ä¿ç•™ä¸€ä»½copyï¼Œè¿™æ ·å¦‚æœbçº¿ç¨‹æ¥ä¿®æ”¹ï¼Œåˆ™açº¿ç¨‹æœªå¿…çŸ¥é“ï¼Œå¦‚æœä½¿ç”¨è¿™ä¸ªå…³é”®å­—ï¼Œçº¿ç¨‹ä¹‹é—´æ•°æ®ä¿®æ”¹éƒ½èƒ½å¯è§ã€‚</p><h5 id="volatileçš„å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’åºæ€ä¹ˆå®ç°çš„ï¼Ÿ">==volatileçš„å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’åºæ€ä¹ˆå®ç°çš„ï¼Ÿ==</h5><p>volatileæœ¬è´¨ä¸Šæ˜¯é€šè¿‡å†…å­˜å±éšœæ¥å®ç°å¯è§æ€§çš„ï¼Œè¢«ä¿®é¥°çš„å˜é‡åœ¨è¢«ä¿®æ”¹ä¹‹åå¯ä»¥ç«‹å³åŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œè¯¥å˜é‡æ¯æ¬¡ä½¿ç”¨ä¹‹å‰éƒ½ä»ä¸»å†…å­˜åˆ·æ–°ï¼Œè€Œç¦æ­¢æŒ‡ä»¤é‡æ’åºä¹Ÿæ˜¯é€šè¿‡å†…å­˜å±éšœæ¥ç¦æ­¢çš„ï¼Œæœ¬æ¥ç°åœ¨çš„cpuä¸ºäº†æé«˜æ•ˆç‡ä¼šè§æŒ‡ä»¤å¹¶å‘æ‰§è¡Œï¼Œä¸€ä¸ªæŒ‡ä»¤ä»JMMå†…å­˜å±éšœçš„ç­–ç•¥æ¥çœ‹ï¼Œå°±æ˜¯åœ¨volatileçš„å†™æ“ä½œçš„å‰é¢æ’å…¥ä¸€ä¸ªStoreStoreå±éšœï¼Œåé¢æ’å…¥ä¸€ä¸ªStoreLoadï¼Œåœ¨è¯»æ“ä½œå‰é¢åŠ å…¥ä¸€ä¸ªLoadLoadï¼Œåé¢åŠ ä¸€ä¸ªLoadStoreå±éšœã€‚</p><h5 id="volatile-çš„åº•å±‚å®ç°ï¼Ÿ">==volatile çš„åº•å±‚å®ç°ï¼Ÿ==</h5><p>volatile åº•å±‚jmm</p><h5 id="å®ç°ä¸€ä¸‹DCL-å•ä¾‹æ¨¡å¼ä¸‹çš„åŒé‡æ£€æŸ¥-volatileçš„å®è·µ">==å®ç°ä¸€ä¸‹DCL(å•ä¾‹æ¨¡å¼ä¸‹çš„åŒé‡æ£€æŸ¥)/ volatileçš„å®è·µ==</h5><p>æ˜¯å¦lazyåŒ–ï¼Ÿ æ˜¯</p><p>æ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼Ÿ æ˜¯</p><p>å®ç°éš¾åº¦ï¼š é’ˆå¯¹éœ€è¦åŒé‡æ£€æŸ¥çš„æ“ä½œ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// volatileé˜²æ­¢æŒ‡ä»¤é‡æ’</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> singleton<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// ç¬¬ä¸€å±‚åˆ¤æ–­singletonæ˜¯ä¸æ˜¯null</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Singleton</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">//ç°åœ¨å†åŠ é”</span>            <span class="token keyword">synchronized</span><span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">// ç¬¬äºŒå±‚åˆ¤æ–­</span>                <span class="token comment">// å¦‚æœA,B ä¸¤ä¸ªçº¿ç¨‹éƒ½åœ¨synchronizedç­‰å¾…</span>                <span class="token comment">// A åˆ›å»ºå®Œå¯¹è±¡ä¹‹åï¼ŒBè¿˜ä¼šå†è¿›å…¥ï¼Œå¦‚æœä¸å†æ£€æŸ¥ä¸€éï¼ŒBåˆä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>                                                                                </code></pre><h5 id="å•ä¾‹é‡Œé¢è¦ä¸è¦åŠ volatileï¼Ÿ">==å•ä¾‹é‡Œé¢è¦ä¸è¦åŠ volatileï¼Ÿ==</h5><p>è¦åŠ ï¼Œå¦‚æœä¸åŠ volatileé—®é¢˜å°±ä¼šå‡ºç°åœ¨æŒ‡ä»¤é‡æ’åºä¸Šï¼Œ</p><p>æ¯”å¦‚æœ‰ä¸€è¡Œåˆå§‹åŒ–å¯¹è±¡çš„ä»£ç ï¼Œè¢«ç¼–è¯‘å™¨æ‰§è¡Œä¹‹åå°±ä¼šåˆ†æˆä¸‰æ­¥ï¼Œ1 ç»™æŒ‡ä»¤ç”³è¯·å†…å­˜ï¼Œ2 ç»™æˆå‘˜å˜é‡åˆå§‹åŒ–ï¼Œ3 æŠŠè¿™å—å†…å­˜çš„å†…å®¹èµ‹å€¼ï¼Œé‡æ’åºä»¥å æ—¢ç„¶å·²ç»æœ‰è¿™ä¸ªå€¼ï¼Œåœ¨å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¸Šæ¥å…ˆå»æ£€æŸ¥å°±ä¼šå‘ç°å·²ç»å­˜åœ¨è¯¥å€¼ï¼Œå°±ä¸ä¼šè¿›å…¥é”éƒ¨åˆ†çš„ä»£ç ï¼Œä½†æ˜¯åŠ äº†volatileå°±ä¸ä¼šå…è®¸æŒ‡ä»¤é‡æ’åºï¼Œä¸€å®šä¼šä¿è¯ä½ åˆå§‹åŒ–å®Œäº†æ‰ä¼šç»™ä½ èµ‹å€¼è¿™ä¸ªå˜é‡ã€‚</p><h2 id="æœ‰åºæ€§">æœ‰åºæ€§</h2><h3 id="ç¨‹åºçœŸçš„æ˜¯æŒ‰ç…§é¡ºåºæ‰§è¡Œçš„å—ï¼Ÿ">ç¨‹åºçœŸçš„æ˜¯æŒ‰ç…§é¡ºåºæ‰§è¡Œçš„å—ï¼Ÿ</h3><p>å¹¶ä¸æ˜¯ cpuä¸ºäº†æé«˜æ•ˆç‡ï¼Œé€šå¸¸éƒ½æ˜¯ä¹±åº</p><p>åœ¨æ‰§è¡Œç¨‹åºæ—¶ï¼Œä¸ºäº†æä¾›æ€§èƒ½ï¼Œå¤„ç†å™¨å’Œç¼–è¯‘å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯ä¸èƒ½éšæ„é‡æ’åºï¼Œä¸æ˜¯ä½ æƒ³æ€ä¹ˆæ’åºå°±æ€ä¹ˆæ’åºï¼Œå®ƒéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼šåœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸èƒ½æ”¹å˜ç¨‹åºè¿è¡Œçš„ç»“æœï¼›å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„ä¸å…è®¸é‡æ’åºéœ€è¦æ³¨æ„çš„æ˜¯ï¼šé‡æ’åºä¸ä¼šå½±å“å•çº¿ç¨‹ç¯å¢ƒçš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯ä¼šç ´åå¤šçº¿ç¨‹çš„æ‰§è¡Œè¯­ä¹‰ã€‚</p><h3 id="å•çº¿ç¨‹ä¹Ÿä¸æ˜¯é¡ºåºæ‰§è¡Œ">å•çº¿ç¨‹ä¹Ÿä¸æ˜¯é¡ºåºæ‰§è¡Œ</h3><p>å•çº¿ç¨‹æœ‰ä¸€ä¸ª a i s è¯­ä¹‰ä¿è¯äº†å…¶å•çº¿ç¨‹æ‰§è¡Œç»“æœä¸è¢«æ”¹å˜ï¼Œå…¶å®ä¹Ÿä¸æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚</p><p><strong>as-if-serialè¯­ä¹‰</strong>ä¿è¯å•çº¿ç¨‹å†…ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¢«æ”¹å˜ï¼Œhappensbeforeå…³ç³»ä¿è¯æ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¢«æ”¹å˜ã€‚ as-if-serialè¯­ä¹‰ç»™ç¼–å†™å•çº¿ç¨‹ç¨‹åºçš„ç¨‹åºå‘˜åˆ›é€ äº†ä¸€ä¸ªå¹»å¢ƒï¼šå•çº¿ç¨‹ç¨‹åºæ˜¯æŒ‰ç¨‹åºçš„é¡ºåºæ¥æ‰§è¡Œçš„ã€‚<strong>happens-before</strong>å…³ç³»ç»™ç¼–å†™æ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºçš„ç¨‹åºå‘˜åˆ›é€ äº†ä¸€ä¸ªå¹»å¢ƒï¼šæ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºæ˜¯æŒ‰ happens-beforeæŒ‡å®šçš„é¡ºåºæ¥æ‰§è¡Œçš„ã€‚</p><p>as-if-serialè¯­ä¹‰å’Œhappens-beforeè¿™ä¹ˆåšçš„ç›®çš„ï¼Œéƒ½æ˜¯ä¸ºäº†åœ¨ä¸æ”¹å˜ç¨‹åºæ‰§è¡Œç»“æœçš„å‰æä¸‹ï¼Œå°½å¯èƒ½åœ°æé«˜ç¨‹åºæ‰§è¡Œçš„å¹¶è¡Œåº¦ã€‚</p><h2 id="åŸå­æ€§">åŸå­æ€§</h2><p>ä¿è¯æ“ä½œçš„åŸå­æ€§å¯ä»¥é€šè¿‡synchronized(æ‚²è§‚é”) å’Œ cas(ä¹è§‚é”)</p><h3 id="CAS">CAS</h3><p>CAS æ˜¯ compare and swap çš„ç¼©å†™ï¼Œå³æˆ‘ä»¬æ‰€è¯´çš„æ¯”è¾ƒäº¤æ¢ã€‚</p><p>cas æ˜¯ä¸€ç§åŸºäºé”çš„æ“ä½œï¼Œè€Œä¸”æ˜¯ä¹è§‚é”ã€‚åœ¨ java ä¸­é”åˆ†ä¸ºä¹è§‚é”å’Œæ‚²è§‚é”ã€‚</p><p>æ‚²è§‚é”æ˜¯å°†èµ„æºé”ä½ï¼Œç­‰ä¸€ä¸ªä¹‹å‰è·å¾—é”çš„çº¿ç¨‹é‡Šæ”¾é”ä¹‹åï¼Œä¸‹ä¸€ä¸ªçº¿ç¨‹æ‰å¯ä»¥è®¿é—®ã€‚è€Œä¹è§‚é”é‡‡å–äº†ä¸€ç§å®½æ³›çš„æ€åº¦ï¼Œé€šè¿‡æŸç§æ–¹å¼ä¸åŠ é”æ¥å¤„ç†èµ„æºï¼Œæ¯”å¦‚é€šè¿‡ç»™è®°å½•åŠ  version æ¥è·å–æ•°æ®ï¼Œæ€§èƒ½è¾ƒæ‚²è§‚é”æœ‰å¾ˆå¤§çš„æé«˜ã€‚</p><p>CAS æ“ä½œåŒ…å«ä¸‰ä¸ªæ“ä½œæ•° â€”â€” å†…å­˜ä½ç½®ï¼ˆVï¼‰ã€é¢„æœŸåŸå€¼ï¼ˆAï¼‰å’Œæ–°å€¼(B)ã€‚å¦‚æœå†…å­˜åœ°å€é‡Œé¢çš„å€¼å’Œ A çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå°±å°†å†…å­˜é‡Œé¢çš„å€¼æ›´æ–°æˆ Bã€‚</p><p>CASæ˜¯é€šè¿‡æ— é™å¾ªç¯æ¥è·å–æ•°æ®çš„ï¼Œè‹¥æœåœ¨ç¬¬ä¸€è½®å¾ªç¯ä¸­ï¼Œa çº¿ç¨‹è·å–åœ°å€é‡Œé¢çš„å€¼è¢«b çº¿ç¨‹ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆ a çº¿ç¨‹éœ€è¦è‡ªæ—‹ï¼Œåˆ°ä¸‹æ¬¡å¾ªç¯æ‰æœ‰å¯èƒ½æœºä¼šæ‰§è¡Œã€‚</p><p>java.util.concurrent.atomic åŒ…ä¸‹çš„ç±»å¤§å¤šæ˜¯ä½¿ç”¨ CAS æ“ä½œæ¥å®ç°çš„(AtomicInteger,AtomicBoolean,AtomicLong)ã€‚</p><h5 id="CASåº•å±‚">==CASåº•å±‚==</h5><p>ä»¥AtomicInterger è¿™ä¸ªç±»ä¸ºä¾‹ï¼Œé‡Œé¢çš„incrementAndGet() å°±è°ƒç”¨äº†compareAndSet()æ–¹æ³• é‡Œé¢æœ‰ä¸€ä¸ªunsafeå¯¹è±¡ æŸ¥çœ‹jdké‡Œé¢çš„cè¯­è¨€ä»£ç å°±ä¼šæœ‰ä¸€ä¸ªåº•å±‚çš„æŒ‡ä»¤ <code> cmpxchg</code>æŒ‡ä»¤ æ„æ€æ˜¯<code>casä¿®æ”¹å˜é‡å€¼</code> è¿™ä¸ªæŒ‡ä»¤ä¸æ˜¯åŸå­çš„æ‰€ä»¥éœ€è¦ lock ï¼Œè€Œåœ¨ç¡¬ä»¶å±‚é¢lockæŒ‡ä»¤åœ¨æ‰§è¡Œçš„æ—¶å€™çœ‹æƒ…å†µæ¥é‡‡ç”¨æ€»çº¿é”æˆ–è€…ç¼“å­˜é”ï¼Œæ‰€ä»¥åº•å±‚å±‚é¢casæ˜¯ç”¨çš„lockæŒ‡ä»¤ã€‚</p><h5 id="å¦‚ä½•è§£å†³ABAé—®é¢˜">==å¦‚ä½•è§£å†³ABAé—®é¢˜==</h5><p>å¦‚æœæ˜¯åŸºç¡€ç±»å‹å°±æ— æ‰€è°“ï¼Œå°±æ˜¯ä¸¤ä¸ªçº¿ç¨‹å»åŒæ—¶ä¿®æ”¹ä¸€ä¸ªå˜é‡å€¼ï¼Œä¸€ä¸ªçº¿ç¨‹è¢«æŸäº›åŸå› å‘ç”Ÿé˜»å¡ç­‰å¾…è¿‡ç¨‹ä¸­å¦ä¸€ä¸ªçº¿æ¯”è¾ƒæ›´æ–° å˜é‡å€¼ä»Aåˆ°Bï¼Œè¿™ä¸ªæ—¶å€™å†æ¥ç¬¬ä¸‰ä¸ªçº¿ç¨‹æƒ³æŠŠå˜é‡æ”¹ä¸ºBåˆ°Aï¼Œè¿›è¡Œæ¯”è¾ƒæ›´æ–°æ›´æ”¹å®Œæ¯•ä»¥åï¼ŒåŸæ¥è¢«é˜»å¡çš„çº¿ç¨‹è¿™ä¸ªæ—¶å€™è·å¾—CPUæ—¶é—´ç‰‡å‘ç°æ˜¯A äºæ˜¯æ›´æ–°ä¸ºB å¯æ˜¯å…¶å®è¯¥å€¼å·²ç»æ›´æ–°è¿‡äº†ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡åŠ ç‰ˆæœ¬å·æˆ–è€…æ—¶é—´æˆ³è§£å†³ï¼Œä½†æ˜¯ä¸€èˆ¬æ˜¯æ¯æ¬¡ç‰ˆæœ¬å·åŠ ä¸€ï¼Œæ—¶é—´æˆ³ä¸å®¹æ˜“æŒ‡å®šç²¾åº¦ä¸€èˆ¬ä¸ç”¨ã€‚</p><h1>çº¿ç¨‹è°ƒåº¦ä¸åŒæ­¥</h1><h3 id="çº¿ç¨‹è°ƒåº¦å™¨">çº¿ç¨‹è°ƒåº¦å™¨</h3><p>è´Ÿè´£å°†runnableçš„çº¿ç¨‹åˆ†é…CPU</p><h4 id="æ€ä¹ˆè¿›è¡Œå¤šçº¿ç¨‹æŠ¢å cpuçš„è°ƒåº¦å‘¢ï¼Ÿï¼ˆçº¿ç¨‹è°ƒåº¦ç®—æ³•">æ€ä¹ˆè¿›è¡Œå¤šçº¿ç¨‹æŠ¢å cpuçš„è°ƒåº¦å‘¢ï¼Ÿï¼ˆ<strong>çº¿ç¨‹è°ƒåº¦ç®—æ³•</strong></h4><ol><li>åˆ†æ—¶è°ƒåº¦ å¤§å®¶å¹³å‡åˆ†é…æ—¶é—´ç‰‡</li><li>æŠ¢å å¼ ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å ç”¨ ï¼Œå¦‚æœä¼˜å…ˆçº§éƒ½ç›¸ç­‰å°±éšæœºé€‰ä¸€ä¸ªï¼Œéƒ½æ˜¯ç­‰çº¿ç¨‹ç»“æŸæ‰æ”¾å¼ƒCPU</li></ol><h3 id="çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦æ–¹">çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦æ–¹</h3><ol><li><p>wait(): é‡Šæ”¾é”ï¼› éœ€è¦è¢«å”¤é†’ ï¼›æ˜¯objectçš„æ–¹æ³•ï¼›ç”¨äºè¿›ç¨‹é€šä¿¡ï¼›</p></li><li><p>sleep()ï¼šä¸é‡Šæ”¾é” ï¼›è‡ªåŠ¨è‹é†’ï¼›æ˜¯threadçš„é™æ€æ–¹æ³•</p></li><li><p>notify()ï¼šéšæœºå”¤é†’ä¸€ä¸ªè¿›å…¥é”æ± </p></li><li><p>notifyAll()ï¼š å”¤é†’æ‰€æœ‰è¿›å…¥é”æ± </p><h4 id="sleep-å’Œ-wait-ä¸åŒ">sleep() å’Œ wait() ä¸åŒ</h4><h4 id="sleep-å’Œyeild-ä¸åŒ">sleep()å’Œyeild() ä¸åŒ</h4><p>sleep()æ˜¯æˆä¸ºé˜»å¡çŠ¶æ€ï¼Œå…¶ä»–çº¿ç¨‹ä¸è€ƒè™‘ä¼˜å…ˆçº§ï¼ŒæŠ›å‡ºinterruptedå¼‚å¸¸ï¼Œç§»æ¤æ€§æ›´å¥½</p><p>yeild()æ˜¯æˆä¸ºå°±ç»ªçŠ¶æ€ï¼Œå…¶ä»–çº¿ç¨‹å’Œå½“å‰ä¸€èµ·æŒ‰ä¼˜å…ˆçº§ï¼Œæ²¡æœ‰å£°æ˜å¼‚å¸¸ï¼Œä¸æ€ä¹ˆå»ºè®®ä½¿ç”¨</p><h4 id="sleep-å’Œyeild-ä¸ºå•¥æ˜¯é™æ€">sleep()å’Œyeild()ä¸ºå•¥æ˜¯é™æ€</h4><p>ä¸¤ä¸ªæ–¹æ³•æ˜¯åœ¨æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹è¿è¡Œï¼Œåœ¨å¤„äºç­‰å¾…çŠ¶æ€é‡Œé¢è°ƒç”¨æ— æ„ä¹‰</p></li></ol><h3 id="wait-å’Œ-notify-å®é™…ä½¿ç”¨">==wait() å’Œ notify()å®é™…ä½¿ç”¨==</h3><p>è¿™é‡Œæ˜¯ä¸€ä¸ªé¢è¯•é¢˜ï¼Œå°±æ˜¯ä¸¤ä¸ªçº¿ç¨‹å®ç°çº¿ç¨‹aæ‰“å°1ï½10ï¼Œç„¶åå¦å¤–ä¸€ä¸ªçº¿ç¨‹båœ¨aæ‰“åˆ°5çš„æ—¶å€™æ‰§è¡Œï¼Œç„¶åaåœ¨bæ‰§è¡Œå®Œä¹‹åæ‰“å°å‰©ä¸‹çš„</p><p><u>è¿™é‡Œå…·ä½“å°±æ˜¯çº¿ç¨‹bå…ˆå¯åŠ¨ç„¶åwait ï¼Œç„¶åç­‰åˆ°aæ‰“å°1ï½5ä»¥åå”¤é†’çº¿ç¨‹bï¼ŒåŒæ—¶ä¹Ÿè¦wait()é‡Šæ”¾é”ï¼Œbæ‰§è¡Œå®Œæ¯•åˆè¦notify aã€‚</u></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">T03_NotifyHoldingLock</span> <span class="token punctuation">&#123;</span> <span class="token comment">//wait notify</span><span class="token comment">//æ·»åŠ volatileï¼Œä½¿t2èƒ½å¤Ÿå¾—åˆ°é€šçŸ¥</span><span class="token keyword">volatile</span> <span class="token class-name">List</span> lists <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>lists<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> lists<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">T03_NotifyHoldingLock</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">T03_NotifyHoldingLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">final</span> <span class="token class-name">Object</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">//éœ€è¦æ³¨æ„å…ˆå¯åŠ¨t2å†å¯åŠ¨t1</span>    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span><span class="token keyword">synchronized</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"t2 å¯åŠ¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>lock<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"t2 ç»“æŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>            <span class="token comment">//é€šçŸ¥t1ç»§ç»­æ‰§è¡Œ</span>            lock<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ã€‚<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>e1<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"t1 å¯åŠ¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">synchronized</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"add "</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>lock<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">//é‡Šæ”¾é”ï¼Œè®©t2å¾—ä»¥æ‰§è¡Œ</span>                        <span class="token keyword">try</span><span class="token punctuation">&#123;</span>                           lock<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>   e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"t1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æè¿°notifyå’ŒnotifyAllåŒºåˆ«">æè¿°notifyå’ŒnotifyAllåŒºåˆ«</h3><p>å—¯ä¸€èˆ¬å‘¢è¿™ä¸ªobjecté‡Œé¢å½“æˆ‘è°ƒwaitçš„æ—¶å€™å®ƒå°±ä¼šæ”¾åˆ°ç­‰å¾…é˜Ÿåˆ—é‡Œé¢ï¼Œå½“æˆ‘å»æ‹¿çš„æ—¶å€™ï¼Œå°±ä¼šåœ¨waitåˆ—è¡¨é‡Œé¢ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœæˆ‘è°ƒnotifyç­‰å¾…åˆ—è¡¨å°±æ˜¯é‚£ä¸ªç­‰å¾…æ± é‡Œé¢å°±ä¼šéšæœºå”¤é†’ä¸€ä¸ªçº¿ç¨‹æ¥è¿›å…¥é”æ± ç«äº‰é”ï¼Œå¦‚æœæˆ‘è°ƒnotifyAllå°±ä¼šå°†è¯¥å¯¹è±¡æ‰€æœ‰waitçš„çº¿ç¨‹å”¤é†’ã€‚å…¶ä¸­é‚£ä¸ªé”æ± å°±æ˜¯ç­‰å¾…è·å¾—è¯¥å¯¹è±¡é”æ‹¥æœ‰æƒçš„çº¿ç¨‹ä»¬ã€‚</p><h4 id="å¦‚ä½•å”¤é†’çº¿ç¨‹ï¼Ÿ">å¦‚ä½•å”¤é†’çº¿ç¨‹ï¼Ÿ</h4><p>é¦–å…ˆé˜»å¡çš„ç„¶åå¯ä»¥è¢«å”¤é†’çš„çº¿ç¨‹ï¼Œæ˜¯è°ƒç”¨ä»»æ„å¯¹è±¡çš„wait()ï¼Œå¯¼è‡´äº†çº¿ç¨‹é˜»å¡è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ç­‰å¾…è¢«å”¤é†’ï¼Œé˜»å¡çš„åŒæ—¶è¦é‡Šæ”¾è¯¥å¯¹è±¡çš„é”ï¼Œè¦å”¤é†’å°±éœ€è¦è°ƒç”¨notify()æˆ–è€…notifyAll()ï¼Œé¦–å…ˆé‡Šæ”¾å½“å‰å¯¹è±¡çš„é”ï¼Œç„¶åå”¤é†’ä»»æ„ä¸€ä¸ªæˆ–è€…æ˜¯å…¨éƒ¨çº¿ç¨‹åˆ°é”æ± ç›´åˆ°çº¿ç¨‹è·å¾—å½“å‰å¯¹è±¡çš„é”æ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚è¿˜éœ€è¦æ³¨æ„çš„æ˜¯æ–¹æ³•ä¸€å®šè¦æ”¾åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥æ–¹æ³•å—ä¸­ï¼Œå¹¶ä¸”è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡ä¸€å®šå’ŒåŒæ­¥å—æˆ–æ–¹æ³•çš„å¯¹è±¡æ˜¯åŒä¸€ä¸ªï¼Œè¿™æ ·æ‰èƒ½ä¿è¯è°ƒç”¨æ–¹æ³•ä¹‹å‰çº¿ç¨‹å°±å·²ç»è·å¾—äº†é”ï¼Œè¿™æ ·æ‰èƒ½æ‰§è¡Œçº¿ç¨‹çš„é”é‡Šæ”¾</p><h3 id="ä¸ºä»€ä¹ˆä¸‰ä¸ªæ–¹æ³•è¦å®šä¹‰åœ¨objecté‡Œï¼Ÿ">ä¸ºä»€ä¹ˆä¸‰ä¸ªæ–¹æ³•è¦å®šä¹‰åœ¨objecté‡Œï¼Ÿ</h3><p>ç­‰å¾…å’Œå”¤é†’å¿…é¡»æ˜¯åŒä¸€ä¸ªé”ã€‚è€Œé”å¯ä»¥æ˜¯ä»»æ„å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥è¢«ä»»æ„å¯¹è±¡è°ƒç”¨çš„æ–¹æ³•æ˜¯å®šä¹‰åœ¨objectç±»ä¸­ã€‚</p><h3 id="ä¸ºä»€ä¹ˆä¸‰ä¸ªæ–¹æ³•è¦åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…ä»£ç å—é‡Œé¢è°ƒç”¨ï¼Ÿ">ä¸ºä»€ä¹ˆä¸‰ä¸ªæ–¹æ³•è¦åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…ä»£ç å—é‡Œé¢è°ƒç”¨ï¼Ÿ</h3><p>å› ä¸ºä¸‰ä¸ªæ–¹æ³•éƒ½éœ€è¦çº¿ç¨‹æŒæœ‰å¯¹è±¡çš„é”ï¼Œæ¯”å¦‚è°ƒwait()çš„æ—¶å€™è¿™ä¸ªçº¿ç¨‹å¿…é¡»æ‹¥æœ‰è¯¥å¯¹è±¡çš„é”ï¼Œæ¥ç€ä»–å°±é‡Šæ”¾è¿™ä¸ªé”è¿›å…¥ç­‰å¾…çŠ¶æ€ç›´åˆ°å…¶ä»–çº¿ç¨‹è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„notifyæ–¹æ³•ï¼ŒåŒæ ·notifyå‘¢ï¼Œä¹Ÿæ˜¯éœ€è¦å…ˆé‡Šæ”¾å¯¹è±¡çš„é”ï¼Œè¿™æ ·å…¶ä»–çº¿ç¨‹æ‰èƒ½æ¥ç«äº‰é”ï¼›æ‰€ä»¥æ–¹æ³•éƒ½æ˜¯éœ€è¦é€šè¿‡åŒæ­¥å®ç°ï¼Œè¿›è€Œå¿…é¡»ã€‚ã€‚ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹åŒæ­¥ï¼Ÿ">ä»€ä¹ˆæ˜¯çº¿ç¨‹åŒæ­¥ï¼Ÿ</h3><p>å½“ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«çš„æ•°æ®è¿›è¡Œæ“ä½œæ—¶ï¼Œåº”ä½¿ä¹‹æˆä¸ºä¸€ä¸ª&quot;åŸå­æ“ä½œ&quot;ï¼Œ å³åœ¨æ²¡å®Œæˆç›¸å…³æ“ä½œä¹‹å‰ï¼Œä¸å…è®¸å…¶ä»–çº¿ç¨‹æ‰“æ–­å®ƒï¼Œå¦åˆ™å°±ä¼šç ´åæ•°æ®çš„å®Œæ•´æ€§ï¼Œå¿…ç„¶ä¼šå¾—åˆ°é”™è¯¯çš„å¤„ç†ç»“æœï¼Œè¿™å°±æ˜¯çº¿ç¨‹çš„åŒæ­¥</p><h3 id="åŒæ­¥æ–¹æ³•å’ŒéåŒæ­¥æ–¹æ³•å¯ä»¥åŒæ—¶è°ƒç”¨å—ï¼Ÿ">åŒæ­¥æ–¹æ³•å’ŒéåŒæ­¥æ–¹æ³•å¯ä»¥åŒæ—¶è°ƒç”¨å—ï¼Ÿ</h3><p>å½“ç„¶æ˜¯å¯ä»¥çš„å•Š å½“æˆ‘æœ‰ä¸€ä¸ªsynchronizedçš„m1æ–¹æ³•ï¼Œæˆ‘è°ƒç”¨m1çš„æ—¶å€™æ˜¯å¯ä»¥è°ƒç”¨m2çš„ï¼Œå› ä¸ºçº¿ç¨‹è®¿é—®m1çš„æ—¶å€™éœ€è¦åŠ é”ï¼Œä½†æ˜¯è®¿é—®m2çš„æ—¶å€™åˆä¸éœ€è¦åŠ é”ï¼Œæ‰€ä»¥å…è®¸æ‰§è¡Œm2ã€‚</p><p>æ¨¡æ‹Ÿé“¶è¡Œè´¦æˆ·ï¼š å¦‚æœä¸šåŠ¡é‡Œé¢å†™æ–¹æ³•åŠ é”ä½†æ˜¯è¯»æ–¹æ³•æ²¡æœ‰åŠ é”ï¼Œè¿™æ ·å°±ä¼šå®¹æ˜“äº§ç”Ÿè„è¯»ï¼Œä½†æ˜¯å¦‚æœä¸šåŠ¡å…è®¸ï¼Œå°±å¯ä»¥ï¼Œè„è¯»è¿‡ç¨‹å°±æ˜¯æ²¡åŠ é”çš„çº¿ç¨‹åœ¨æ²¡ç­‰ä½ æ•´ä¸ªè¿‡ç¨‹æ‰§è¡Œå®Œå°±è¯»åˆ°äº†ä½ ä¸­é—´çš„ç»“æœäº§ç”Ÿçš„å†…å­˜ï¼Œè§£å†³åŠæ³•å°±æ˜¯å°†æ²¡æœ‰åŠ é”çš„çº¿ç¨‹åŠ ä¸Šé”ï¼Œä¼šæ•ˆç‡å˜ä½ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹äº’æ–¥ï¼Ÿ">ä»€ä¹ˆæ˜¯çº¿ç¨‹äº’æ–¥ï¼Ÿ</h4><p>èµ„æºçš„å›ºæœ‰ç‰¹æ€§ äº’æ–¥ ä¸€ä¸ªèµ„æºåœ¨åŒä¸€æ—¶é—´åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹å»è°ƒç”¨</p><p>å¯¹äºå…±äº«çš„è¿›ç¨‹ç³»ç»Ÿèµ„æºï¼Œåœ¨å•ä¸ªçº¿ç¨‹è®¿é—®æ—¶çš„æ’ä»–æ€§ã€‚å°±æ˜¯å½“æœ‰è‹¥å¹²ä¸ªçº¿ç¨‹éƒ½è¦ä½¿ç”¨æŸä¸€ä¸ªèµ„æºçš„æ—¶å€™ï¼Œä»»ä½•æ—¶åˆ»ï¼Œéƒ½åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ¥å»ä½¿ç”¨ï¼Œå…¶ä»–è¦ä½¿ç”¨è¯¥èµ„æºçš„çº¿ç¨‹å¿…é¡»ç­‰å¾…ï¼ŒçŸ¥é“å ç”¨å¿—æ„¿è€…é‡Šæ”¾è¯¥èµ„æºã€‚</p><h1>Synchronized</h1><h3 id="synchronizedã€volatileã€CAS-æ¯”è¾ƒ">synchronizedã€volatileã€CAS æ¯”è¾ƒ</h3><p>ï¼ˆ1ï¼‰synchronized æ˜¯æ‚²è§‚é”ï¼Œå±äºæŠ¢å å¼ï¼Œä¼šå¼•èµ·å…¶ä»–çº¿ç¨‹é˜»å¡ã€‚</p><p>ï¼ˆ2ï¼‰volatile æä¾›å¤šçº¿ç¨‹å…±äº«å˜é‡å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’åºä¼˜åŒ–ã€‚</p><p>ï¼ˆ3ï¼‰CAS æ˜¯åŸºäºå†²çªæ£€æµ‹çš„ä¹è§‚é”ï¼ˆéé˜»å¡ï¼‰</p><h3 id="synchronized-å’Œ-ReentrantLock-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ">==synchronized å’Œ ReentrantLock åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ==</h3><p>synchronized æ˜¯å’Œ ifã€elseã€forã€while ä¸€æ ·çš„å…³é”®å­—ï¼ŒReentrantLock æ˜¯ç±»ï¼Œè¿™æ˜¯äºŒè€…çš„æœ¬è´¨åŒºåˆ«ã€‚æ—¢ç„¶ ReentrantLock æ˜¯ç±»ï¼Œé‚£ä¹ˆå®ƒå°±æä¾›äº†æ¯”synchronized æ›´å¤šæ›´çµæ´»çš„ç‰¹æ€§ï¼Œå¯ä»¥è¢«ç»§æ‰¿ã€å¯ä»¥æœ‰æ–¹æ³•ã€å¯ä»¥æœ‰å„ç§å„æ ·çš„ç±»å˜é‡</p><p>synchronized æ—©æœŸçš„å®ç°æ¯”è¾ƒä½æ•ˆï¼Œå¯¹æ¯” ReentrantLockï¼Œå¤§å¤šæ•°åœºæ™¯æ€§èƒ½éƒ½ç›¸å·®è¾ƒå¤§ï¼Œä½†æ˜¯åœ¨ Java 6 ä¸­å¯¹ synchronized è¿›è¡Œäº†éå¸¸å¤šçš„æ”¹è¿›ã€‚</p><p>==ç›¸åŒç‚¹ï¼š==</p><p><u>ä¸¤è€…éƒ½æ˜¯å¯é‡å…¥é”ä¸¤è€…éƒ½æ˜¯å¯é‡å…¥é”ã€‚â€œå¯é‡å…¥é”â€æ¦‚å¿µæ˜¯ï¼šè‡ªå·±å¯ä»¥å†æ¬¡è·å–è‡ªå·±çš„å†…éƒ¨é”ã€‚æ¯”å¦‚ä¸€ä¸ªçº¿ç¨‹è·å¾—äº†æŸä¸ªå¯¹è±¡çš„é”ï¼Œæ­¤æ—¶è¿™ä¸ªå¯¹è±¡é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå½“å…¶å†æ¬¡æƒ³è¦è·å–è¿™ä¸ªå¯¹è±¡çš„é”çš„æ—¶å€™è¿˜æ˜¯å¯ä»¥è·å–çš„ï¼Œå¦‚æœä¸å¯é”é‡å…¥çš„è¯ï¼Œå°±ä¼šé€ æˆæ­»é”ã€‚åŒä¸€ä¸ªçº¿ç¨‹æ¯æ¬¡è·å–é”ï¼Œé”çš„è®¡æ•°å™¨éƒ½è‡ªå¢1ï¼Œæ‰€ä»¥è¦ç­‰åˆ°é”çš„è®¡æ•°å™¨ä¸‹é™ä¸º0 æ—¶æ‰èƒ½é‡Šæ”¾é”ã€‚</u></p><p>==ä¸åŒç‚¹==</p><ul><li>ReentrantLock ä½¿ç”¨èµ·æ¥æ¯”è¾ƒçµæ´»ï¼š1. å¯ä»¥ä½¿ç”¨trylockæ¥æ§åˆ¶ï¼Œå¦‚æœæŠ¢ä¸åˆ°çº¿ç¨‹ä¹Ÿä¸ä¼šä¸€å®šé˜»å¡ï¼Œ2. é€šè¿‡lockInterruptibly()å¯ä»¥å“åº”interrupt()ï¼Œå¯ä»¥è¢«æ‰“æ–­ã€‚ä½†æ˜¯å¿…é¡»æœ‰é‡Šæ”¾é”çš„é…åˆåŠ¨ä½œï¼›</li><li>ReentrantLock å¿…é¡»æ‰‹åŠ¨è·å–ä¸é‡Šæ”¾é”ï¼Œè€Œ synchronized ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å’Œå¼€å¯é”ï¼›</li><li>ReentrantLock åªé€‚ç”¨äºä»£ç å—é”ï¼Œè€Œ synchronized å¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€å˜é‡ç­‰ã€‚</li><li>äºŒè€…çš„é”æœºåˆ¶å…¶å®ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚ReentrantLock åº•å±‚è°ƒç”¨çš„æ˜¯ Unsafe çš„ park æ–¹æ³•åŠ é”ï¼Œsynchronized æ“ä½œçš„åº”è¯¥æ˜¯å¯¹è±¡å¤´ä¸­ markword</li></ul><h4 id="é”çš„æ˜¯ä»€ä¹ˆ">é”çš„æ˜¯ä»€ä¹ˆ?</h4><p>Javaä¸­æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ï¼Œè¿™æ˜¯synchronizedå®ç°åŒæ­¥çš„åŸºç¡€: æ™®é€šåŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰å®ä¾‹å¯¹è±¡ï¼›é™æ€åŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰ç±»çš„classå¯¹è±¡ï¼›åŒæ­¥æ–¹æ³•å—ï¼Œé”æ˜¯æ‹¬å·é‡Œé¢çš„å¯¹è±¡</p><h3 id="é”é‡å…¥ï¼Ÿ">é”é‡å…¥ï¼Ÿ</h3><img src="å¤šçº¿ç¨‹/image-20220304231552625.png" alt="image-20220304231552625" style="zoom: 33%;" /><p>å¯é‡å…¥çš„åŸç†å…¶å®å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹è·å¾—é”ä¹‹åï¼Œå¯ä»¥é‡å¤å¾—åˆ°è¯¥é”ï¼Œåº•å±‚å°±è½»é‡çº§é”æ¥è¯´ï¼Œå…¶å®å°±æ˜¯åœ¨çº¿ç¨‹æ ˆé‡Œé¢å‹å…¥lockRecordç„¶åæœ‰ä¸€ä¸ªæŒ‡å‘ä¸€ä¸ªå¤‡ä»½å½“å‰å¯¹è±¡markwordçš„æŒ‡é’ˆï¼Œè¿™ä¸ªå¤‡ä»½å«åšdisplace markwordï¼ˆé‡å…¥ä»¥åçš„hashwordå­—æ®µä¹Ÿåœ¨è¿™é‡Œé¢ï¼‰ï¼Œè¿™é‡Œå°±æ˜¯ä½¿ç”¨è¿™ä¸ªé”è®°å½•è¿›è¡Œä¸€ä¸ªé‡å…¥è®¡æ•°å™¨çš„ä½œç”¨ã€‚</p><p>é‡é‡çº§é”ï¼šè¿›å…¥é‡é‡çº§é”ï¼Œä¼šåˆ†é…ä¸€ä¸ªobjectmonitorå¯¹è±¡ï¼Œç„¶åå°†é”æ ‡å¿—ç½®ä¸ºâ€˜10â€™ï¼Œç„¶åmarkwordå­˜å‚¨æŒ‡å‘è¿™ä¸ªå¯¹è±¡çš„æŒ‡é’ˆã€‚omå¯¹è±¡æœ‰ä¸¤ä¸ªé˜Ÿåˆ—å’Œä¸€ä¸ªæŒ‡é’ˆï¼Œæ¯ä¸ªéœ€è¦è·å–é”çš„çº¿ç¨‹éƒ½ä¼šè¿›å…¥é˜Ÿåˆ—è¢«åŒ…è£…ä¸ºè¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ˜¯å¤šçº¿ç¨‹æŒ‡å‘åŒä¸€æ®µä»£ç æ—¶ï¼Œobjectwaiterå°±ä¼šè¿›å…¥é˜Ÿåˆ—ï¼Œå½“æŸä¸ªçº¿ç¨‹æŠ¢åˆ°é”äº†ä¹Ÿå°±æ˜¯è·å¾—å¯¹è±¡çš„ç›‘è§†å™¨monitoräº†å°±è¿›å…¥owneråŒºåŸŸï¼Œå¹¶æŠŠmonitorä¸­çš„ownerå˜é‡è®¾ä¸ºå½“å‰çº¿ç¨‹åŒæ—¶monitorä¸­çš„è®¡æ•°å™¨count+1ã€‚ï¼ˆé”é‡å…¥ï¼‰</p><h3 id="Sychçš„é”å‡çº§çš„åŸç†æˆ–è€…æ˜¯è¿‡ç¨‹ï¼Ÿ">==Sychçš„é”å‡çº§çš„åŸç†æˆ–è€…æ˜¯è¿‡ç¨‹ï¼Ÿ==</h3><p>é¦–å…ˆä¸»è¦æœ‰å››ç§é”çŠ¶æ€åˆ†åˆ«æ˜¯ï¼šæ— çŠ¶æ€é”ã€åå‘é”ã€è½»é‡çº§é”å’Œé‡é‡çº§é”ï¼ˆè¦å»æ“ä½œç³»ç»Ÿç”³è¯·èµ„æºï¼‰</p><p>é”çš„å‡çº§çš„ç›®çš„/èƒŒæ™¯ï¼šé”å‡çº§æ˜¯ä¸ºäº†å‡ä½äº†é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚åœ¨ Java 6 ä¹‹åä¼˜åŒ– synchronized çš„å®ç°æ–¹å¼ï¼Œä½¿ç”¨äº†åå‘é”å‡çº§ä¸ºè½»é‡çº§é”å†å‡çº§åˆ°é‡é‡çº§é”çš„æ–¹å¼ï¼Œä»è€Œå‡ä½äº†é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚</p><img src="å¤šçº¿ç¨‹/image-20220304103932619.png" alt="image-20220304103932619" style="zoom:50%;" /><img src="å¤šçº¿ç¨‹/image-20220304232258996.png" alt="image-20220304232258996" style="zoom: 50%;" /><h4 id="è¯¦ç»†é”å‡çº§è¿‡ç¨‹ï¼š">è¯¦ç»†é”å‡çº§è¿‡ç¨‹ï¼š</h4><p>æ€»ï¼šåœ¨é”å¯¹è±¡çš„<strong>å¯¹è±¡å¤´</strong>é‡Œé¢æœ‰ä¸€ä¸ª threadID å­—æ®µï¼Œåœ¨ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™ threadid ä¸ºç©ºï¼Œjvm è®©å…¶æŒæœ‰åå‘é”ï¼Œå¹¶å°† threadid è®¾ç½®ä¸ºå…¶çº¿ç¨‹ idï¼Œå†æ¬¡è¿›å…¥çš„æ—¶å€™ä¼šå…ˆåˆ¤æ–­ threadid æ˜¯å¦ä¸å…¶çº¿ç¨‹ id ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´åˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨æ­¤å¯¹è±¡ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œåˆ™å‡çº§åå‘é”ä¸ºè½»é‡çº§é”ï¼Œé€šè¿‡è‡ªæ—‹å¾ªç¯ä¸€å®šæ¬¡æ•°æ¥è·å–é”ï¼Œæ‰§è¡Œä¸€å®šæ¬¡æ•°ä¹‹åï¼Œå¦‚æœè¿˜æ²¡æœ‰æ­£å¸¸è·å–åˆ°è¦ä½¿ç”¨çš„å¯¹è±¡ï¼Œæ­¤æ—¶å°±ä¼šæŠŠé”ä»è½»é‡çº§å‡çº§ä¸ºé‡é‡çº§é”ï¼Œæ­¤è¿‡ç¨‹å°±æ„æˆäº† synchronized é”çš„å‡çº§ã€‚</p><p>åˆ†ï¼šnewå¯¹è±¡ä¹‹åå…ˆåˆ¤æ–­æ˜¯å¦ä¸ºå¯åå‘çŠ¶æ€ï¼Œmarkwordæœ‰ä¸¤ä¸ªå­—èŠ‚ä½œä¸ºé”æ ‡å¿—ï¼šé¦–å…ˆçœ‹æ˜¯å¦æ˜¯â€˜01â€™ï¼Œç„¶åmwå‰é¢è¿˜æœ‰ä¸€ä¸ªå­—æ®µæ¥åˆ¤æ–­æ˜¯å¦æ˜¯å·²ç»æ‹¿åˆ°åå‘é”â€˜1â€™è¡¨ç¤ºåå‘é”å·²å¯åŠ¨ï¼Œå¯åŠ¨ä½†æ˜¯è¦åˆ¤æ–­é”çº¿ç¨‹æ˜¯å¦æ˜¯å½“å‰çš„çº¿ç¨‹idï¼Œå¦‚æœæ˜¯å°±å¼€å§‹æ‰§è¡Œä»£ç å—ï¼›ä½†æ˜¯ä¸æ˜¯çš„è¯ï¼Œè¯´æ˜å°±æœ‰ç«äº‰äº†ï¼Œè¿™ä¸ªæ—¶å€™casæ“ä½œå»è·å–é”å¤±è´¥äº†çš„è¯ï¼Œè¾¾åˆ°safepointæ—¶è·å¾—åå‘é”çš„çº¿ç¨‹å°±ä¼šè¢«æŒ‚èµ·ï¼Œåå‘é”ä¼šè¢«æ’¤é”€ï¼Œç„¶å<strong>å‡çº§ä¸ºè½»é‡çº§é”ï¼Œè¿™ä¸ªæ—¶å€™è¢«é˜»å¡çš„çº¿ç¨‹å†ç»§ç»­æ‰§è¡ŒåŒæ­¥ä»£ç å—ã€‚</strong></p><p>è¿™éƒ¨åˆ†æœ‰ä¸ªç»†èŠ‚å°±æ˜¯<strong>è½»åº¦ç«äº‰å°±ä¼šå‡çº§ä¸ºè½»é‡çº§é”</strong>ï¼Œå¦‚æœæ˜¯é‡åº¦ç«äº‰ï¼ˆæ¯”å¦‚è€—æ—¶è¿‡é•¿ã€è°ƒç”¨äº†waitæ–¹æ³•ç­‰ï¼‰å°±ä¼šç›´æ¥å‡çº§ä¸ºé‡é‡çº§é”ï¼Œå…ˆè®²è½»é‡çº§é”ï¼š</p><p>å‡çº§ä¸ºè½»é‡çº§é”ä»¥åè¿˜æ˜¯åœ¨<u>ç”¨æˆ·ç©ºé—´</u>é‡Œé¢è¿›è¡Œï¼Œå½“å‰çº¿ç¨‹æ ˆä¼šåˆ’åˆ†ä¸€éƒ¨åˆ†ä½œä¸ºé”è®°å½•lock recordï¼Œå¹¶ä¸”ä¼šå°†é”å¯¹è±¡çš„markworå¤åˆ¶åˆ°é”è®°å½•ä¸­ï¼Œæ¥ä¸‹æ¥jvmä¼šè¿›è¡ŒCASæ“ä½œå°†markwordä¸€éƒ¨åˆ†æ›´æ–°ä¸ºæŒ‡å‘é”è®°å½•çš„æŒ‡é’ˆï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼Œ</p><img src="å¤šçº¿ç¨‹/image-20220304234448327.png" alt="image-20220304234448327" style="zoom:33%;" /><p>å¦‚æœæˆåŠŸå°±ä¼šå°†é”æ ‡å¿—ä½è®¾ä¸ºâ€˜00â€™ï¼Œè¯´æ˜å·²ç»è·å¾—è½»é‡çº§é”ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šè¿›å…¥<strong>é”é‡å…¥</strong>é˜¶æ®µï¼šï¼ˆåº•ä¸‹çš„é”é‡å…¥æœ‰è§£é‡Šï¼‰</p><p>ä½†æ˜¯å¤±è´¥äº†å°±ä¼šæ£€æŸ¥å½“å‰é”å¯¹è±¡çš„markwordæ˜¯å¦æŒ‡å‘å½“å‰é”è®°å½•ï¼Œå¦‚æœæ²¡æœ‰å°±è¡¨ç¤ºå·²ç»è¢«å…¶ä»–çº¿ç¨‹æŠ¢äº†ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šè¿›è¡Œè‡ªæ—‹ç­‰å¾…ï¼ˆé»˜è®¤æ˜¯10æ¬¡ï¼‰ï¼Œç­‰åˆ°æ­¤å¤„å¦‚æœè¶…å‡ºé˜ˆå€¼è¿˜æ˜¯æ²¡æœ‰è·å¾—é”è¿™ä¸ªæ—¶å€™å°±ä¼š<strong>å‡çº§ä¸ºé‡é‡çº§é”</strong></p><p>è¿›å…¥é‡é‡çº§é”ï¼Œä¼šåˆ†é…ä¸€ä¸ªobjectmonitorå¯¹è±¡ï¼Œç„¶åå°†é”æ ‡å¿—ç½®ä¸ºâ€˜10â€™ï¼Œç„¶åmarkwordå­˜å‚¨æŒ‡å‘è¿™ä¸ªå¯¹è±¡çš„æŒ‡é’ˆã€‚omå¯¹è±¡æœ‰ä¸¤ä¸ªé˜Ÿåˆ—å’Œä¸€ä¸ªæŒ‡é’ˆï¼Œæ¯ä¸ªéœ€è¦è·å–é”çš„çº¿ç¨‹éƒ½ä¼šè¿›å…¥é˜Ÿåˆ—è¢«åŒ…è£…ä¸ºè¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ˜¯å¤šçº¿ç¨‹æŒ‡å‘åŒä¸€æ®µä»£ç æ—¶ï¼Œobjectwaiterå°±ä¼šè¿›å…¥é˜Ÿåˆ—ï¼Œå½“æŸä¸ªçº¿ç¨‹æŠ¢åˆ°é”äº†ä¹Ÿå°±æ˜¯è·å¾—å¯¹è±¡çš„ç›‘è§†å™¨monitoräº†å°±è¿›å…¥owneråŒºåŸŸï¼Œå¹¶æŠŠmonitorä¸­çš„ownerå˜é‡è®¾ä¸ºå½“å‰çº¿ç¨‹åŒæ—¶monitorä¸­çš„è®¡æ•°å™¨count+1ã€‚ï¼ˆé”é‡å…¥ï¼‰</p><h3 id="ä»€ä¹ˆæ—¶å€™ç”¨è‡ªæ—‹é”å’Œç³»ç»Ÿé”ï¼Ÿ-ä¸ºä»€ä¹ˆæœ‰äº†è‡ªæ—‹é”è¿˜è¦é‡é‡çº§é”ï¼Ÿ">ä»€ä¹ˆæ—¶å€™ç”¨è‡ªæ—‹é”å’Œç³»ç»Ÿé”ï¼Ÿ/ ä¸ºä»€ä¹ˆæœ‰äº†è‡ªæ—‹é”è¿˜è¦é‡é‡çº§é”ï¼Ÿ</h3><p>å› ä¸ºè‡ªæ—‹é”æ˜¯è¦å ç”¨CPUçš„ï¼Œè€Œç³»ç»Ÿé”æ˜¯åˆ°ç­‰å¾…é˜Ÿåˆ—é‡Œé¢ï¼Œæ‰€ä»¥ä½ ï¼Œä»£ç å¦‚æœæ‰§è¡Œæ—¶é—´çŸ­ï¼Œçº¿ç¨‹æ•°å°‘å°±ç”¨è‡ªæ—‹ï¼Œé•¿çº¿ç¨‹æ•°å¤šï¼Œå°±ç”¨ç³»ç»Ÿé”ï¼›</p><p>è‡ªæ—‹ä¹Ÿæ˜¯è¦æ¶ˆè€—cpuèµ„æºçš„å¦‚æœé”çš„æ—¶é—´è¿‡é•¿æˆ–è€…è‡ªæ—‹çº¿ç¨‹è¿‡å¤šï¼Œcpuå°±ä¼šè¢«æ¶ˆè€—ï¼› è€Œé‡é‡çº§é”åˆè‡ªå·±çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œæ‰€æœ‰æ‹¿ä¸åˆ°æ‰€æœ‰çš„è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œä¸éœ€è¦æ¶ˆè€—cpuèµ„æºã€‚</p><h3 id="ä»€ä¹ˆæ—¶å€™å‡çº§ä¸ºé‡é‡çº§é”ï¼Ÿ">ä»€ä¹ˆæ—¶å€™å‡çº§ä¸ºé‡é‡çº§é”ï¼Ÿ</h3><p>ç«äº‰åŠ å‰§ï¼Œæœ‰çº¿ç¨‹è¶…è¿‡10æ¬¡è‡ªæ—‹ï¼š<code>-xx:PreBlockSpin</code> ï¼›æˆ–è€…æ˜¯è‡ªæ—‹çº¿ç¨‹æ•°è¶…è¿‡cpuæ ¸æ•°çš„ä¸€åŠï¼Œ1.6ä¹‹åjvmæœ‰äº†è‡ªé€‚åº”è‡ªæ—‹Adapative-Self Spinningï¼Œæ˜¯å¯ä»¥è‡ªå·±æ§åˆ¶çš„è‡ªæ—‹ï¼›</p><h3 id="åå‘é”æ˜¯å¦å¯åŠ¨ï¼Ÿ">åå‘é”æ˜¯å¦å¯åŠ¨ï¼Ÿ</h3><p>åå‘é”æœ‰ä¸€ä¸ªå¯åŠ¨æ—¶é—´ï¼Œæˆ‘è®°å¾—æ˜¯å››ç§’é’Ÿï¼Œå½“ä½ newä¸€ä¸ªæ™®é€šå¯¹è±¡çš„æ—¶å€™ï¼Œåå‘é”æ²¡æœ‰å¯åŠ¨ï¼Œå®ƒé»˜è®¤å°±æ˜¯æ— é”æ€ï¼›ä½†æ˜¯ä¸€å¼€å§‹newçš„æ—¶å€™å¦‚æœå·²ç»å¯åŠ¨äº†åå‘é”ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªåŒ¿ååå‘ï¼Œé”å¯¹è±¡çš„markwordé‡Œçš„threadkidå…¶å®å°±æ˜¯ç©ºçš„ï¼Œç­‰åˆ°ä½ åŠ äº†sychronizedï¼ˆè¿™ä¸ªå¯¹è±¡ï¼‰ï¼Œæ‰ä¼šæŒ‡å‘å½“å‰çš„è¿™ä¸ªçº¿ç¨‹äº†ï¼Œtreadidå­—æ®µå°±ä¼šæ›´æ–°ä¸ºå½“å‰çº¿ç¨‹äº†ã€‚</p><h1>Lockä½“ç³»</h1><h3 id="Java-Concurrency-API-ä¸­çš„-Lock-æ¥å£-Lock-interface-æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ">Java Concurrency API ä¸­çš„ Lock æ¥å£(Lock interface)æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ</h3><p><u>ReentrantLockæ˜¯lockçš„å”¯ä¸€å­ç±»ã€‚</u></p><p>Lock æ¥å£æ¯”åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—æä¾›äº†æ›´å…·æ‰©å±•æ€§çš„é”æ“ä½œã€‚ä»–ä»¬å…è®¸æ›´çµæ´»çš„ç»“æ„ï¼Œå¯ä»¥å…·æœ‰å®Œå…¨ä¸åŒçš„æ€§è´¨ï¼Œå¹¶ä¸”å¯ä»¥æ”¯æŒå¤šä¸ªç›¸å…³ç±»çš„æ¡ä»¶å¯¹è±¡ã€‚</p><p>å®ƒçš„ä¼˜åŠ¿æœ‰ï¼š</p><p>ï¼ˆ1ï¼‰  å¯ä»¥ä½¿é”æ›´å…¬å¹³</p><p>ï¼ˆ2ï¼‰  å¯ä»¥ä½¿çº¿ç¨‹åœ¨ç­‰å¾…é”çš„æ—¶å€™å“åº”ä¸­æ–­</p><p>ï¼ˆ3ï¼‰  å¯ä»¥è®©çº¿ç¨‹å°è¯•è·å–é”ï¼Œå¹¶åœ¨æ— æ³•è·å–é”çš„æ—¶å€™ç«‹å³è¿”å›æˆ–è€…ç­‰å¾…ä¸€æ®µæ—¶é—´</p><p>ï¼ˆ4ï¼‰  å¯ä»¥åœ¨ä¸åŒçš„èŒƒå›´ï¼Œä»¥ä¸åŒçš„é¡ºåºè·å–å’Œé‡Šæ”¾é”</p><p>æ•´ä½“ä¸Šæ¥è¯´ Lock æ˜¯ synchronized çš„æ‰©å±•ç‰ˆï¼ŒLock æä¾›äº†æ— æ¡ä»¶çš„ã€å¯è½®è¯¢çš„(tryLock æ–¹æ³•)ã€å®šæ—¶çš„(tryLock å¸¦å‚æ–¹æ³•)ã€å¯ä¸­æ–­çš„(lockInterruptibly)ã€å¯å¤šæ¡ä»¶é˜Ÿåˆ—çš„(newCondition æ–¹æ³•)é”æ“ä½œã€‚å¦å¤– Lock çš„å®ç°ç±»åŸºæœ¬éƒ½æ”¯æŒéå…¬å¹³é”(é»˜è®¤)å’Œå…¬å¹³é”ï¼Œsynchronized åªæ”¯æŒéå…¬å¹³é”ï¼Œå½“ç„¶ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œéå…¬å¹³é”æ˜¯é«˜æ•ˆçš„é€‰æ‹©ã€‚</p><h3 id="å®ç°ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ï¼Ÿ-ä½¿ç”¨Conditionå†™ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Ÿ">==å®ç°ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ï¼Ÿ/ ä½¿ç”¨Conditionå†™ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Ÿ==</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProviderConsumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span>  <span class="token keyword">private</span> <span class="token keyword">int</span> length<span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> queue<span class="token punctuation">;</span> <span class="token comment">// äº§å“é˜Ÿåˆ—</span>  <span class="token keyword">private</span> <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯é‡å…¥é”</span>  <span class="token keyword">private</span> <span class="token class-name">Condition</span> providerCondition <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newConditon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç”Ÿäº§è€…</span>  <span class="token keyword">private</span> <span class="token class-name">Condition</span> consumerCondition <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ¶ˆè´¹è€…</span>    <span class="token keyword">public</span> <span class="token class-name">ProviderConsumer</span><span class="token punctuation">(</span><span class="token keyword">int</span> length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// æ„é€ å™¨ä¸€å¼€å§‹ä¼ å…¥äº§å“é˜Ÿåˆ—çš„é•¿åº¦</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>    <span class="token comment">/*  * ç”Ÿäº§  */</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">provide</span><span class="token punctuation">(</span><span class="token class-name">T</span> product<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span><span class="token punctuation">&#123;</span>      <span class="token keyword">while</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// ç”Ÿäº§è€…é˜Ÿåˆ—ç­‰å¾…</span>        providerCondition<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span>      consumerCondition<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æé†’æ¶ˆè´¹è€…é˜Ÿåˆ—ï¼›</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>          <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span><span class="token punctuation">&#123;</span>      lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">/*  * æ¶ˆè´¹  */</span>  <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">consume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    lock<span class="token punctuation">.</span>lock<span class="token punctuation">;</span>    <span class="token keyword">try</span><span class="token punctuation">&#123;</span>      <span class="token keyword">while</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        consumerCondition<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token class-name">T</span> product <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      provideCondition<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> product<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>          <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span><span class="token punctuation">&#123;</span>      lock<span class="token punctuation">.</span>unlock<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span></code></pre><h1>AQS</h1><h2 id="AQS-åŸç†åˆ†æ">AQS åŸç†åˆ†æ</h2><p>ä¸‹é¢å¤§éƒ¨åˆ†å†…å®¹å…¶å®åœ¨AQSç±»æ³¨é‡Šä¸Šå·²ç»ç»™å‡ºäº†ï¼Œä¸è¿‡æ˜¯è‹±è¯­çœ‹ç€æ¯”è¾ƒåƒåŠ›ä¸€ç‚¹ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥çœ‹çœ‹æºç ã€‚</p><h3 id="AQS-åŸç†æ¦‚è§ˆ">AQS åŸç†æ¦‚è§ˆ</h3><p>AQSæ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºç©ºé—²ï¼Œåˆ™å°†å½“å‰è¯·æ±‚èµ„æºçš„çº¿ç¨‹è®¾ç½®ä¸ºæœ‰æ•ˆçš„å·¥ä½œçº¿ç¨‹ï¼Œå¹¶ä¸”å°†å…±äº«èµ„æºè®¾ç½®ä¸ºé”å®šçŠ¶æ€ã€‚å¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºè¢«å ç”¨ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€å¥—çº¿ç¨‹é˜»å¡ç­‰å¾…ä»¥åŠè¢«å”¤é†’æ—¶é”åˆ†é…çš„æœºåˆ¶ï¼Œè¿™ä¸ªæœºåˆ¶AQSæ˜¯ç”¨CLHé˜Ÿåˆ—é”å®ç°çš„ï¼Œå³å°†æš‚æ—¶è·å–ä¸åˆ°é”çš„çº¿ç¨‹åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚CLH(Craig,Landin,and Hagersten)é˜Ÿåˆ—æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ—ï¼ˆè™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ—å³ä¸å­˜åœ¨é˜Ÿåˆ—å®ä¾‹ï¼Œä»…å­˜åœ¨ç»“ç‚¹ä¹‹é—´çš„å…³è”å…³ç³»ï¼‰ã€‚AQSæ˜¯å°†æ¯æ¡è¯·æ±‚å…±äº«èµ„æºçš„çº¿ç¨‹å°è£…æˆä¸€ä¸ªCLHé”é˜Ÿåˆ—çš„ä¸€ä¸ªç»“ç‚¹ï¼ˆNodeï¼‰æ¥å®ç°é”çš„åˆ†é…ã€‚</p><p>çœ‹ä¸ªAQS(AbstractQueuedSynchronizer)åŸç†å›¾ï¼š</p><img src="å¤šçº¿ç¨‹/image-20201109202131975.png" alt="image-20201109202131975" style="zoom: 67%;" /><h3 id="æºç ">æºç </h3><p>AQSæ˜¯ä¸€ä¸ªæ„å»ºé”å’ŒåŒæ­¥å™¨çš„æ¡†æ¶ï¼Œæœ€æ ¸å¿ƒçš„æ˜¯å®ƒçš„ä¸€ä¸ªå…±äº«çš„intç±»å‹å€¼å«åšstateï¼Œè¿™ä¸ªstateç”¨æ¥å¹²ä»€ä¹ˆï¼Œå…¶å®ä¸»è¦æ˜¯çœ‹ä»–çš„å­ç±»æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œæ¯”å¦‚ReentrantLockè¿™ä¸ªstateï¼Œæ‹¿è¿™ä¸ªstateæ¥è®°å½•è¿™ä¸ªçº¿ç¨‹åˆ°åº•é‡å…¥äº†å¤šå°‘æ¬¡ï¼Œæ¯”å¦‚è¯´æœ‰ä¸€ä¸ªçº¿ç¨‹æ‹¿åˆ°stateè¿™ä¸ªæŠŠé”äº†ï¼Œstateçš„å€¼å°±ä»0å˜æˆäº†1ï¼Œè¿™ä¸ªçº¿ç¨‹åˆé‡å…¥äº†ä¸€æ¬¡ï¼Œstateå°±å˜æˆ2äº†ï¼Œåˆé‡å…¥ä¸€æ¬¡å°±å˜æˆ3ç­‰ç­‰ï¼Œé‡Šæ”¾çš„æ—¶å€™ä¸€æ¬¡é‡Šæ”¾å‡ä¸€å˜æˆ0å°±é‡Šæ”¾äº†ã€‚è¿™ä¸ªæ•°ä»£è¡¨äº†ä»€ä¹ˆè¦çœ‹å­ç±»æ€ä¹ˆå»å®ç°å®ƒï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªstateæ ¸å¿ƒä¸Šè¿˜ä¼šæœ‰ä¸€å †çš„çº¿ç¨‹èŠ‚ç‚¹ï¼Œå½“ç„¶è¿™ä¸ªèŠ‚ç‚¹æ˜¯nodeï¼Œæ¯ä¸ªnodeé‡Œé¢åŒ…å«ä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¸ºçº¿ç¨‹èŠ‚ç‚¹ï¼Œè¿™ä¹ˆå¤šçš„çº¿ç¨‹èŠ‚ç‚¹å»äº‰ç”¨è¿™ä¸ªstateï¼Œè°æ‹¿åˆ°äº†stateï¼Œå°±è¡¨ç¤ºè°å¾—åˆ°äº†è¿™æŠŠé”ï¼ŒAQSå¾—æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ªå…±äº«çš„æ•°æ®å’Œä¸€å †äº’ç›¸æŠ¢å¤ºç«äº‰çš„çº¿ç¨‹ï¼Œè¿™ä¸ªå°±æ˜¯AQSã€‚</p><p>çœ‹reentrantlockæºç é‡Œé¢:</p><p>åœ¨lock()æ–¹æ³•é‡Œé‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥è¯»åˆ°å®ƒè°ƒç”¨äº†sync.acquire(1)ï¼Œ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//JDKæºç </span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReentrantLock</span> <span class="token keyword">implements</span> <span class="token class-name">Lock</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        sync<span class="token punctuation">.</span><span class="token function">acquire</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å†è·Ÿè¿›åˆ°acquire(1)é‡Œï¼Œå¯ä»¥çœ‹åˆ°acquire(1)é‡Œåˆè°ƒç”¨äº†æˆ‘ä»¬è‡ªå·±å®šä¹‰è‡ªå·±å†™çš„é‚£ä¸ªtryAcquire(arg)</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//JDKæºç </span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractQueuedSynchronizer</span>    <span class="token keyword">extends</span> <span class="token class-name">AbstractOwnableSynchronizer</span>    <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">acquire</span><span class="token punctuation">(</span><span class="token keyword">int</span> arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">tryAcquire</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span>            <span class="token operator">&amp;&amp;</span> <span class="token function">acquireQueued</span><span class="token punctuation">(</span><span class="token function">addWaiter</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token punctuation">.</span><span class="token constant">EXCLUSIVE</span><span class="token punctuation">)</span><span class="token punctuation">,</span>arg<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token function">selfInterrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>tryAquire(int)æ˜¯ä½¿ç”¨è€…éœ€è¦è‡ªå®šä¹‰åŒæ­¥å™¨æ—¶è¦é‡å†™çš„æ¨¡ç‰ˆæ–¹æ³•ï¼šreentrantlock()é‡Œé¢çš„è¿™ä¸ªæ–¹æ³•åˆè°ƒç”¨äº†nofairTryAquire(int aquire)</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//JDKæºç </span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReentrantLock</span> <span class="token keyword">implements</span> <span class="token class-name">Lock</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        sync<span class="token punctuation">.</span><span class="token function">acquire</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">NonfairSync</span> <span class="token keyword">extends</span> <span class="token class-name">Sync</span><span class="token punctuation">&#123;</span>        <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">tryAcquire</span><span class="token punctuation">(</span><span class="token keyword">int</span> acquire<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token function">nonfairTrytAcquire</span><span class="token punctuation">(</span>acquires<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">nonfairTrytAcquire</span><span class="token punctuation">(</span><span class="token keyword">int</span> acquire<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>         <span class="token comment">//è·å–å½“å‰çº¿ç¨‹</span><span class="token keyword">final</span> <span class="token class-name">Thread</span> current <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ‹¿åˆ°AQSæ ¸å¿ƒæ•°å€¼state</span>         <span class="token keyword">int</span> c <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å¦‚æœæ•°å€¼ä¸º0è¯´æ˜æ²¡äººä¸Šé”</span>         <span class="token keyword">if</span><span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>             <span class="token comment">//ç»™å½“çº¿ç¨‹ä¸Šé”</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">compareAndSetState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>acquires<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">//è®¾ç½®å½“å‰çº¿ç¨‹ä¸ºç‹¬ä¸€æ— äºŒæ‹¥æœ‰è¿™æŠŠé”çš„çº¿ç¨‹</span>    <span class="token function">setExclusiveOwnerThread</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token keyword">return</span> <span class="token boolean">true</span>            <span class="token punctuation">&#125;</span>         <span class="token punctuation">&#125;</span>        <span class="token comment">//åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦æ‹¥æœ‰è¿™ä¸ªæŠŠé”</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>current <span class="token operator">==</span> getExclusiveOwnerThread<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">//è®¾ç½®é‡å…¥</span><span class="token keyword">int</span> nextc <span class="token operator">=</span> c <span class="token operator">+</span> acquires<span class="token punctuation">;</span>             <span class="token keyword">if</span><span class="token punctuation">(</span>nextc <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>                 <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Maximum lock count wxceeded"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token function">setState</span><span class="token punctuation">(</span>nextc<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>nonfairTrytAcquire(acquires)æˆ‘ä»¬è¯»è¿›å»ä¼šå‘ç°å®ƒçš„é‡Œé¢å°±è°ƒç”¨åˆ°äº†stateè¿™ä¸ªå€¼ï¼Œé¦–å…ˆæ‹¿åˆ°å½“å‰çº¿ç¨‹ï¼Œæ‹¿åˆ°stateçš„å€¼ï¼Œç„¶åè¿›è¡Œifåˆ¤æ–­ï¼Œå¦‚æœstateçš„å€¼ä¸º0ï¼Œè¯´æ˜æ²¡äººä¸Šé”ï¼Œæ²¡äººä¸Šé”æ€ä¹ˆåŠå‘¢ï¼Ÿå°±ç»™è‡ªå·±ä¸Šé”ï¼Œå½“å‰çº¿ç¨‹å°±æ‹¿åˆ°è¿™æŠŠé”ï¼Œæ‹¿åˆ°è¿™ä¸ªæŠŠé”çš„æ“ä½œç”¨åˆ°äº†CAS(compareAndSetState)çš„æ“ä½œï¼Œä»0è®©ä»–å˜æˆ1ï¼Œstateçš„å€¼è®¾ç½®ä¸º1ä»¥åï¼Œè®¾ç½®å½“å‰çº¿ç¨‹æ˜¯ç‹¬ä¸€æ— äºŒçš„æ‹¥æœ‰è¿™æŠŠé”çš„çº¿ç¨‹ï¼Œå¦åˆ™å¦‚æœå½“å‰çº¿ç¨‹å·²ç»å æœ‰è¿™æŠŠé”äº†ï¼Œæ€ä¹ˆåŠï¼Ÿå¾ˆç®€å•æˆ‘ä»¬åœ¨åŸæ¥çš„åŸºç¡€ä¸ŠåŠ 1å°±å¯ä»¥äº†ï¼Œè¿™æ ·å°±èƒ½æ‹¿åˆ°è¿™æŠŠé”äº†ï¼Œå°±é‡å…¥ï¼Œå‰è€…æ˜¯åŠ é”åè€…æ˜¯é‡å…¥</p><h4 id="stateçŠ¶æ€å˜é‡">stateçŠ¶æ€å˜é‡</h4><p>AQSä½¿ç”¨ä¸€ä¸ªintæˆå‘˜å˜é‡æ¥è¡¨ç¤ºåŒæ­¥çŠ¶æ€ï¼Œé€šè¿‡å†…ç½®çš„FIFOé˜Ÿåˆ—æ¥å®Œæˆè·å–èµ„æºçº¿ç¨‹çš„æ’é˜Ÿå·¥ä½œã€‚AQSä½¿ç”¨CASå¯¹è¯¥åŒæ­¥çŠ¶æ€è¿›è¡ŒåŸå­æ“ä½œå®ç°å¯¹å…¶å€¼çš„ä¿®æ”¹ã€‚</p><pre class="language-none"><code class="language-none">private volatile int state;&#x2F;&#x2F;å…±äº«å˜é‡ï¼Œä½¿ç”¨volatileä¿®é¥°ä¿è¯çº¿ç¨‹å¯è§æ€§</code></pre><p>çŠ¶æ€ä¿¡æ¯é€šè¿‡protectedç±»å‹çš„getStateï¼ŒsetStateï¼ŒcompareAndSetStateè¿›è¡Œæ“ä½œ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token number">1</span><span class="token comment">//è¿”å›åŒæ­¥çŠ¶æ€çš„å½“å‰å€¼</span><span class="token number">2</span><span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token keyword">return</span> state<span class="token punctuation">;</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token number">5</span><span class="token comment">// è®¾ç½®åŒæ­¥çŠ¶æ€çš„å€¼</span><span class="token number">6</span><span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">int</span> newState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token number">7</span>state <span class="token operator">=</span> newState<span class="token punctuation">;</span><span class="token number">8</span><span class="token punctuation">&#125;</span><span class="token number">9</span><span class="token comment">//åŸå­åœ°ï¼ˆCASæ“ä½œï¼‰å°†åŒæ­¥çŠ¶æ€å€¼è®¾ç½®ä¸ºç»™å®šå€¼updateå¦‚æœå½“å‰åŒæ­¥çŠ¶æ€çš„å€¼ç­‰äºexpect ï¼ˆæœŸæœ›å€¼ï¼‰</span><span class="token number">10</span><span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">compareAndSetState</span><span class="token punctuation">(</span><span class="token keyword">int</span> expect<span class="token punctuation">,</span> <span class="token keyword">int</span> update<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token number">11</span> <span class="token keyword">return</span> unsafe<span class="token punctuation">.</span><span class="token function">compareAndSwapInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> stateOffset<span class="token punctuation">,</span> expect<span class="token punctuation">,</span> update<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token number">12</span> <span class="token punctuation">&#125;</span></code></pre><h4 id="AQSé˜Ÿåˆ—">AQSé˜Ÿåˆ—</h4><p><strong>å¦‚æœæ²¡æœ‰tryAquire() åˆ°stateå‘¢</strong>ï¼Œé‚£ä¹ˆå°±è¿›è¡ŒaquireQueue()æ–¹æ³•ï¼Œé‡Œé¢ä¼šè°ƒç”¨addwaiter()è¿™ä¸ªæ–¹æ³•ï¼Œçº¿ç¨‹æ·»åŠ è¿›å…¥é˜Ÿåˆ—é‡Œé¢ï¼Œå…·ä½“æ“ä½œä¹Ÿæ˜¯é€šè¿‡casè¿›è¡Œæ·»åŠ çš„ï¼Œæ–¹æ³•æ˜¯compareAndAetTail(oldTail,node)ï¼ŒoldTailæ˜¯å®ƒçš„é¢„æœŸå€¼ï¼Œå‡å¦‚è¯´æˆ‘ä»¬æƒ³æŠŠå½“å‰çº¿ç¨‹è®¾ç½®ä¸ºæ•´ä¸ªé“¾è¡¨å°¾å·´çš„è¿‡ç¨‹ä¸­ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹æ¥äº†ï¼Œå®ƒæ’å…¥äº†ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆä»”ç»†æƒ³ä¸€ä¸‹Node oldTail = tail;çš„æ•´ä¸ªoldTailè¿˜ç­‰äºæ•´ä¸ªæ–°çš„Tailå—ï¼Ÿä¸ç­‰äºäº†å§ï¼Œé‚£ä¹ˆæ—¢ç„¶ä¸ç­‰äºäº†ï¼Œè¯´æ˜ä¸­é—´æœ‰çº¿ç¨‹è¢«å…¶å®ƒçº¿ç¨‹æ‰“æ–­äº†ï¼Œé‚£å¦‚æœè¯´å´æ˜¯è¿˜æ˜¯ç­‰äºåŸæ¥çš„oldTailï¼Œè¿™ä¸ªæ—¶å€™å°±è¯´æ˜æ²¡æœ‰çº¿ç¨‹è¢«æ‰“æ–­ï¼Œé‚£æˆ‘ä»¬å°±æ¥ç€è®¾ç½®å°¾å·´ï¼Œåªè¦è®¾ç½®æˆåŠŸäº†OKï¼ŒcompareAndAetTail(oldTail,node)æ–¹æ³•ä¸­çš„å‚æ•°nodeå°±åšä¸ºæ–°çš„Tailäº†ï¼Œæ‰€ä»¥ç”¨äº†CASæ“ä½œå°±ä¸éœ€è¦æŠŠåŸæ¥çš„æ•´ä¸ªé“¾è¡¨ä¸Šé”ï¼Œè¿™ä¹Ÿæ˜¯AQSåœ¨æ•ˆç‡ä¸Šæ¯”è¾ƒé«˜çš„æ ¸å¿ƒã€‚</p><img src="å¤šçº¿ç¨‹/image-20220308201744929.png" alt="image-20220308201744929" style="zoom:50%;" /><h2 id="èµ„æºçš„å…±äº«æ–¹å¼">èµ„æºçš„å…±äº«æ–¹å¼</h2><p>AQSå®šä¹‰ä¸¤ç§èµ„æºå…±äº«æ–¹å¼</p><ul><li><p>Exclusiveï¼ˆç‹¬å ï¼‰ï¼šåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œï¼Œå¦‚ReentrantLockã€‚åˆå¯åˆ†ä¸ºå…¬å¹³é”å’Œéå…¬å¹³é”ï¼š</p><p>å…¬å¹³é”ï¼šæŒ‰ç…§çº¿ç¨‹åœ¨é˜Ÿåˆ—ä¸­çš„æ’é˜Ÿé¡ºåºï¼Œå…ˆåˆ°è€…å…ˆæ‹¿åˆ°é”</p><p>éå…¬å¹³é”ï¼šå½“çº¿ç¨‹è¦è·å–é”æ—¶ï¼Œæ— è§†é˜Ÿåˆ—é¡ºåºç›´æ¥å»æŠ¢é”ï¼Œè°æŠ¢åˆ°å°±æ˜¯è°çš„</p></li><li><p>Shareï¼ˆå…±äº«ï¼‰ï¼šå¤šä¸ªçº¿ç¨‹å¯åŒæ—¶æ‰§è¡Œã€‚Semaphoreã€CountDownLatchã€ CyclicBarrierã€ReadWriteLock æˆ‘ä»¬éƒ½ä¼šåœ¨åé¢è®²åˆ°ã€‚ReentrantReadWriteLock å¯ä»¥çœ‹æˆæ˜¯ç»„åˆå¼ï¼Œå› ä¸ºReentrantReadWriteLockä¹Ÿå°±æ˜¯è¯»å†™é”å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹æŸä¸€èµ„æºè¿›è¡Œè¯»ã€‚ä¸åŒçš„è‡ªå®šä¹‰åŒæ­¥å™¨äº‰ç”¨å…±äº«èµ„æºçš„æ–¹å¼ä¹Ÿä¸åŒã€‚è‡ªå®šä¹‰åŒæ­¥å™¨åœ¨å®ç°æ—¶åªéœ€è¦å®ç°å…±äº«èµ„æº state çš„è·å–ä¸é‡Šæ”¾æ–¹å¼å³å¯ï¼Œè‡³äºå…·ä½“çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—çš„ç»´æŠ¤ï¼ˆå¦‚è·å–èµ„æºå¤±è´¥å…¥é˜Ÿ/å”¤é†’å‡ºé˜Ÿç­‰ï¼‰ï¼ŒAQSå·²ç»åœ¨é¡¶å±‚å®ç°å¥½äº†ã€‚</p></li></ul><h2 id="æ¨¡ç‰ˆæ–¹æ³•">æ¨¡ç‰ˆæ–¹æ³•</h2><p>AQSä½¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œè‡ªå®šä¹‰åŒæ­¥å™¨æ—¶éœ€è¦é‡å†™ä¸‹é¢å‡ ä¸ªAQSæä¾›çš„æ¨¡æ¿æ–¹æ³•ï¼š</p><pre class="language-none"><code class="language-none">1isHeldExclusively()&#x2F;&#x2F;è¯¥çº¿ç¨‹æ˜¯å¦æ­£åœ¨ç‹¬å èµ„æºã€‚åªæœ‰ç”¨åˆ°conditionæ‰éœ€è¦å»å®ç°å®ƒã€‚2tryAcquire(int)&#x2F;&#x2F;ç‹¬å æ–¹å¼ã€‚å°è¯•è·å–èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚3tryRelease(int)&#x2F;&#x2F;ç‹¬å æ–¹å¼ã€‚å°è¯•é‡Šæ”¾èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚4tryAcquireShared(int)&#x2F;&#x2F;å…±äº«æ–¹å¼ã€‚å°è¯•è·å–èµ„æºã€‚è´Ÿæ•°è¡¨ç¤ºå¤±è´¥ï¼›0è¡¨ç¤ºæˆåŠŸï¼Œä½†æ²¡æœ‰å‰©ä½™å¯ç”¨èµ„æºï¼›æ­£æ•°è¡¨ç¤ºæˆåŠŸï¼Œä¸”æœ‰å‰©ä½™èµ„æºã€‚5tryReleaseShared(int)&#x2F;&#x2F;å…±äº«æ–¹å¼ã€‚å°è¯•é‡Šæ”¾èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚</code></pre><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½æŠ›å‡º UnsupportedOperationExceptionã€‚ è¿™äº›æ–¹æ³•çš„å®ç°å¿…é¡»æ˜¯å†…éƒ¨çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶ä¸”é€šå¸¸åº”è¯¥ç®€çŸ­è€Œä¸æ˜¯é˜»å¡ã€‚AQSç±»ä¸­çš„å…¶ä»–æ–¹æ³•éƒ½æ˜¯final ï¼Œæ‰€ä»¥æ— æ³•è¢«å…¶ä»–ç±»ä½¿ç”¨ï¼Œåªæœ‰è¿™å‡ ä¸ªæ–¹æ³•å¯ä»¥è¢«å…¶ä»–ç±»ä½¿ç”¨ã€‚ä»¥ReentrantLockä¸ºä¾‹ï¼Œstateåˆå§‹åŒ–ä¸º0ï¼Œè¡¨ç¤ºæœªé”å®šçŠ¶æ€ã€‚Açº¿ç¨‹lock()æ—¶ï¼Œä¼šè°ƒç”¨tryAcquire()ç‹¬å è¯¥é”å¹¶å°†state+1ã€‚æ­¤åï¼Œå…¶ä»–çº¿ç¨‹å†tryAcquire()æ—¶å°±ä¼šå¤±è´¥ï¼Œç›´åˆ°Açº¿ç¨‹unlock()åˆ°state=0ï¼ˆå³é‡Šæ”¾é”ï¼‰ä¸ºæ­¢ï¼Œå…¶å®ƒçº¿ç¨‹æ‰æœ‰æœºä¼šè·å–è¯¥é”ã€‚å½“ç„¶ï¼Œé‡Šæ”¾é”ä¹‹å‰ï¼ŒAçº¿ç¨‹è‡ªå·±æ˜¯å¯ä»¥é‡å¤è·å–æ­¤é”çš„ï¼ˆstateä¼šç´¯åŠ ï¼‰ï¼Œè¿™å°±æ˜¯å¯é‡å…¥çš„æ¦‚å¿µã€‚ä½†è¦æ³¨æ„ï¼Œè·å–å¤šå°‘æ¬¡å°±è¦é‡Šæ”¾å¤šä¹ˆæ¬¡ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯stateæ˜¯èƒ½å›åˆ°é›¶æ€çš„ã€‚</p><p>å†ä»¥CountDownLatchä»¥ä¾‹ï¼Œä»»åŠ¡åˆ†ä¸ºNä¸ªå­çº¿ç¨‹å»æ‰§è¡Œï¼Œstateä¹Ÿåˆå§‹åŒ–ä¸ºNï¼ˆæ³¨æ„Nè¦ä¸çº¿ç¨‹ä¸ªæ•°ä¸€è‡´ï¼‰ã€‚è¿™Nä¸ªå­çº¿ç¨‹æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼Œæ¯ä¸ªå­çº¿ç¨‹æ‰§è¡Œå®ŒåcountDown()ä¸€æ¬¡ï¼Œstateä¼šCAS(Compare and Swap)å‡1ã€‚ç­‰åˆ°æ‰€æœ‰å­çº¿ç¨‹éƒ½æ‰§è¡Œå®Œå(å³state=0)ï¼Œä¼šunpark()ä¸»è°ƒç”¨çº¿ç¨‹ï¼Œç„¶åä¸»è°ƒç”¨çº¿ç¨‹å°±ä¼šä» await()å‡½æ•°è¿”å›ï¼Œç»§ç»­åä½™åŠ¨ä½œã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œè‡ªå®šä¹‰åŒæ­¥å™¨è¦ä¹ˆæ˜¯ç‹¬å æ–¹æ³•ï¼Œè¦ä¹ˆæ˜¯å…±äº«æ–¹å¼ï¼Œä»–ä»¬ä¹Ÿåªéœ€å®ç° tryAcquire-tryReleaseã€tryAcquireShared-tryReleaseSharedä¸­çš„ä¸€ç§å³å¯ã€‚ä½†AQS ä¹Ÿæ”¯æŒè‡ªå®šä¹‰åŒæ­¥å™¨åŒæ—¶å®ç°ç‹¬å å’Œå…±äº«ä¸¤ç§æ–¹å¼ï¼Œå¦‚ReentrantReadWriteLockã€‚ä¸»è¦æ˜¯é«˜16ä½å­˜å‚¨äº’æ–¥é”çš„çŠ¶æ€ï¼Œé«˜16ä½å­˜å‚¨å…±äº«é”çš„çŠ¶æ€ã€‚</p><h2 id="å¹¶å‘å·¥å…·ç±»">å¹¶å‘å·¥å…·ç±»</h2><h3 id="CountDownLatch-å€’è®¡æ—¶å™¨-ï¼š">CountDownLatch(å€’è®¡æ—¶å™¨)ï¼š</h3><p>CountDownLatchæ˜¯ä¸€ä¸ªåŒæ­¥å·¥å…·ç±»ï¼Œç”¨æ¥åè°ƒå¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥ã€‚è¿™ä¸ªå·¥å…·é€šå¸¸ç”¨æ¥æ§åˆ¶çº¿ç¨‹ç­‰å¾…ï¼Œå®ƒå¯ä»¥è®©æŸä¸€ä¸ªçº¿ç¨‹ç­‰å¾…ç›´åˆ°å€’è®¡æ—¶ç»“æŸï¼Œå†å¼€å§‹æ‰§è¡Œã€‚</p><h4 id="ç”¨æ³•ï¼Ÿ">ç”¨æ³•ï¼Ÿ</h4><ol><li>è®©ä¸»çº¿ç¨‹await()ï¼Œ ä¸»çº¿ç¨‹åœ¨å¼€å§‹è¿è¡Œå‰ç­‰å¾…nä¸ªä¸šåŠ¡çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚å°†CountDownLatchçš„è®¡æ•°å™¨åˆå§‹åŒ–ä¸ºnew CountDownLatch(n)ï¼Œæ¯å½“ä¸€ä¸ªä»»åŠ¡çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå°±å°†è®¡æ•°å™¨å‡1 countdownLatch.countDown()ï¼Œå½“è®¡æ•°å™¨çš„å€¼å˜ä¸º0æ—¶ï¼Œåœ¨CountDownLatchä¸Šawait()çš„çº¿ç¨‹å°±ä¼šè¢«å”¤é†’ã€‚ä¸€ä¸ªå…¸å‹åº”ç”¨åœºæ™¯å°±æ˜¯å¯åŠ¨ä¸€ä¸ªæœåŠ¡æ—¶ï¼Œä¸»çº¿ç¨‹éœ€è¦ç­‰å¾…å¤šä¸ªç»„ä»¶åŠ è½½å®Œæ¯•ï¼Œä¹‹åå†ç»§ç»­æ‰§è¡Œã€‚</li><li>è®©ä¸šåŠ¡çº¿ç¨‹await()ï¼Œä¸»çº¿ç¨‹å¤„ç†å®Œæ•°æ®ä¹‹åè¿›è¡ŒcountDownLatch.countDown(),æ­¤æ—¶ä¸šåŠ¡çº¿ç¨‹è¢«å”¤é†’ï¼Œç„¶åå»ä¸»çº¿ç¨‹æ‹¿æ•°æ®ï¼Œæˆ–è€…æ‰§è¡Œè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œè¿™æ ·å®ç°å¤šä¸ªçº¿ç¨‹å¼€å§‹æ‰§è¡Œä»»åŠ¡çš„æœ€å¤§å¹¶è¡Œæ€§ï¼Œ</li></ol><h3 id="CyclicBarrier-å¾ªç¯æ …æ -ï¼š">CyclicBarrier(å¾ªç¯æ …æ )ï¼š</h3><p>CyclicBarrier å’Œ CountDownLatch éå¸¸ç±»ä¼¼ï¼Œå®ƒä¹Ÿå¯ä»¥å®ç°çº¿ç¨‹é—´çš„æŠ€æœ¯ç­‰å¾…ï¼Œä½†æ˜¯å®ƒçš„åŠŸèƒ½æ¯” CountDownLatch æ›´åŠ å¤æ‚å’Œå¼ºå¤§ã€‚ä¸»è¦åº”ç”¨åœºæ™¯å’Œ CountDownLatch ç±»ä¼¼ã€‚CyclicBarrier çš„å­—é¢æ„æ€æ˜¯å¯å¾ªç¯ä½¿ç”¨ï¼ˆCyclicï¼‰çš„å±éšœï¼ˆBarrierï¼‰ã€‚å®ƒè¦åšçš„äº‹æƒ…æ˜¯ï¼Œè®©ä¸€ç»„çº¿ç¨‹åˆ°è¾¾ä¸€ä¸ªå±éšœï¼ˆä¹Ÿå¯ä»¥å«åŒæ­¥ç‚¹ï¼‰æ—¶è¢«é˜»å¡ï¼Œç›´åˆ°æœ€åä¸€ä¸ªçº¿ç¨‹åˆ°è¾¾å±éšœæ—¶ï¼Œå±éšœæ‰ä¼šå¼€é—¨ï¼Œæ‰€æœ‰è¢«å±éšœæ‹¦æˆªçš„çº¿ç¨‹æ‰ä¼šç»§ç»­å¹²æ´»ã€‚</p><p>CyclicBarrieré»˜è®¤çš„æ„é€ æ–¹æ³•æ˜¯ CyclicBarrier(int parties)ï¼Œå…¶å‚æ•°è¡¨ç¤ºå±éšœæ‹¦æˆªçš„çº¿ç¨‹æ•°é‡ï¼Œæ¯ä¸ªçº¿ç¨‹è°ƒç”¨await()æ–¹æ³•å‘Šè¯‰CyclicBarrier æˆ‘å·²ç»åˆ°è¾¾äº†å±éšœï¼Œç„¶åå½“å‰çº¿ç¨‹è¢«é˜»å¡ã€‚</p><h3 id="Semaphore-ä¿¡å·é‡-å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼š">Semaphore(ä¿¡å·é‡)-å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼š</h3><p>synchronized å’ŒReentrantLock éƒ½æ˜¯ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®æŸä¸ªèµ„æºï¼ŒSemaphore(ä¿¡å·é‡)å¯ä»¥æŒ‡å®šå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®æŸä¸ªèµ„æºã€‚</p><p>Semaphore å°±æ˜¯ä¸€ä¸ªä¿¡å·é‡ï¼Œå®ƒçš„ä½œç”¨æ˜¯é™åˆ¶æŸæ®µä»£ç å—çš„å¹¶å‘æ•°ã€‚</p><p>Semaphoreæœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª int å‹æ•´æ•° nï¼Œè¡¨ç¤ºæŸæ®µä»£ç  å¤šåªæœ‰ n ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®ï¼Œå¦‚æœè¶…å‡ºäº† nï¼Œé‚£ä¹ˆè¯·ç­‰å¾…ï¼Œç­‰åˆ°æŸä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•è¿™æ®µä»£ç å—ï¼Œä¸‹ä¸€ä¸ªçº¿ç¨‹å†è¿›å…¥ã€‚ç”±æ­¤å¯ä»¥çœ‹å‡ºå¦‚æœ Semaphore æ„é€ å‡½æ•°ä¸­ä¼ å…¥çš„ int å‹æ•´æ•° n=1ï¼Œç›¸å½“äºå˜æˆäº†ä¸€ä¸ª synchronized äº†ã€‚</p><h3 id="Exchange-çº¿ç¨‹è§äº¤æ¢æ•°æ®çš„å·¥å…·">Exchange(çº¿ç¨‹è§äº¤æ¢æ•°æ®çš„å·¥å…·)</h3><p>Exchangeræ˜¯ä¸€ä¸ªç”¨äºçº¿ç¨‹é—´åä½œçš„å·¥å…·ç±»ï¼Œ**ç”¨äºä¸¤ä¸ªçº¿ç¨‹é—´äº¤æ¢æ•°æ®ã€‚**å®ƒæä¾›äº†ä¸€ä¸ªäº¤æ¢çš„åŒæ­¥ç‚¹ï¼Œåœ¨è¿™ä¸ªåŒæ­¥ç‚¹ä¸¤ä¸ªçº¿ç¨‹èƒ½å¤Ÿäº¤æ¢æ•°æ®ã€‚äº¤æ¢æ•°æ®æ˜¯é€šè¿‡ exchangeæ–¹æ³•æ¥å®ç°çš„ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œexchangeæ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒä¼šåŒæ­¥ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹ä¹Ÿæ‰§è¡Œexchangeæ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™ä¸¤ä¸ªçº¿ç¨‹å°±éƒ½è¾¾åˆ°äº†åŒæ­¥ç‚¹ï¼Œä¸¤ä¸ªçº¿ç¨‹å°±å¯ä»¥äº¤æ¢æ•°æ®ã€‚</p><h3 id="ReadWriteLock">ReadWriteLock</h3><p><strong>å®ç°è¿™ä¸ªæ¥å£æ˜¯ReentrantReadWriteLockï¼Œ è¿™ä¸ªæ¥å£æ˜¯ä¸€ä¸ªè¯»å†™é”æ¥å£ï¼Œä¸»è¦å°±æ˜¯å®ç°äº†è¯»å†™åˆ†ç¦»ï¼Œå†™é”æ˜¯ç‹¬å é”ï¼Œè¯»é”æ˜¯å…±äº«é”ï¼Œå®ç°äº†è¯»è¯»ä¹‹é—´ä¸ä¼šäº’æ–¥ï¼Œä½†æ˜¯è¯»å†™å’Œå†™å†™ä¹‹é—´çš„äº’æ–¥ï¼Œæé«˜äº†è¯»å†™æ•ˆç‡ã€‚è¿˜å®ç°äº†é”é™çº§ï¼Œå†™é”å¯ä»¥é™çº§ä¸ºè¯»é”ã€‚</strong></p><p>é¦–å…ˆæ˜ç¡®ä¸€ä¸‹ï¼Œä¸æ˜¯è¯´ ReentrantLock ä¸å¥½ï¼Œåªæ˜¯ ReentrantLock æŸäº›æ—¶å€™æœ‰å±€é™ã€‚å¦‚æœä½¿ç”¨ ReentrantLockï¼Œå¯èƒ½æœ¬èº«æ˜¯ä¸ºäº†é˜²æ­¢çº¿ç¨‹ A åœ¨å†™æ•°æ®ã€çº¿ç¨‹ B åœ¨è¯»æ•°æ®é€ æˆçš„æ•°æ®ä¸ä¸€è‡´ï¼Œä½†è¿™æ ·ï¼Œå¦‚æœçº¿ç¨‹ C åœ¨è¯»æ•°æ®ã€çº¿ç¨‹ D ä¹Ÿåœ¨è¯»æ•°æ®ï¼Œè¯»æ•°æ®æ˜¯ä¸ä¼šæ”¹å˜æ•°æ®çš„ï¼Œæ²¡æœ‰å¿…è¦åŠ é”ï¼Œä½†æ˜¯è¿˜æ˜¯åŠ é”äº†ï¼Œé™ä½äº†ç¨‹åºçš„æ€§èƒ½ã€‚å› ä¸ºè¿™ä¸ªï¼Œæ‰è¯ç”Ÿäº†è¯»å†™é” ReadWriteLockã€‚</p><p>ReadWriteLock æ˜¯ä¸€ä¸ªè¯»å†™é”æ¥å£ï¼Œè¯»å†™é”æ˜¯ç”¨æ¥æå‡å¹¶å‘ç¨‹åºæ€§èƒ½çš„é”åˆ†ç¦»æŠ€æœ¯ï¼ŒReentrantReadWriteLock æ˜¯ ReadWriteLock æ¥å£çš„ä¸€ä¸ªå…·ä½“å®ç°ï¼Œå®ç°äº†è¯»å†™çš„åˆ†ç¦»ï¼Œè¯»é”æ˜¯å…±äº«çš„ï¼Œå†™é”æ˜¯ç‹¬å çš„ï¼Œè¯»å’Œè¯»ä¹‹é—´ä¸ä¼šäº’æ–¥ï¼Œè¯»å’Œå†™ã€å†™å’Œè¯»ã€å†™å’Œå†™ä¹‹é—´æ‰ä¼šäº’æ–¥ï¼Œæå‡äº†è¯»å†™çš„æ€§èƒ½ã€‚</p><p>è€Œè¯»å†™é”æœ‰ä»¥ä¸‹ä¸‰ä¸ªé‡è¦çš„ç‰¹æ€§ï¼š</p><p>ï¼ˆ1ï¼‰  å…¬å¹³é€‰æ‹©æ€§ï¼šæ”¯æŒéå…¬å¹³ï¼ˆé»˜è®¤ï¼‰å’Œå…¬å¹³çš„é”è·å–æ–¹å¼ï¼Œååé‡è¿˜æ˜¯éå…¬å¹³ä¼˜äºå…¬å¹³ã€‚</p><p>ï¼ˆ2ï¼‰  é‡è¿›å…¥ï¼šè¯»é”å’Œå†™é”éƒ½æ”¯æŒçº¿ç¨‹é‡è¿›å…¥ã€‚</p><p>ï¼ˆ3ï¼‰  é”é™çº§ï¼šéµå¾ªè·å–å†™é”ã€è·å–è¯»é”å†é‡Šæ”¾å†™é”çš„æ¬¡åºï¼Œå†™é”èƒ½å¤Ÿé™çº§æˆä¸ºè¯»é”ã€‚</p><h1>ThreadLocal</h1><h2 id="åŸç†">åŸç†</h2><p>ThreadLocalæºç çš„setæ–¹æ³•ï¼ŒThreadLocalå¾€é‡Œè¾¹è®¾ç½®å€¼çš„æ—¶å€™æ˜¯æ€ä¹ˆè®¾ç½®çš„å‘¢ï¼Ÿé¦–å…ˆæ‹¿åˆ°å½“å‰çº¿ç¨‹ï¼Œè¿™æ˜¯ä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªsetæ–¹æ³•é‡Œå¤šäº†ä¸€ä¸ªå®¹å™¨ThreadLocalMapï¼Œè¿™ä¸ªå®¹å™¨æ˜¯ä¸€ä¸ªmapï¼Œæ˜¯ä¸€ä¸ªkey/valueå¯¹ï¼Œå…¶å®è¿™ä¸ªå€¼æ˜¯è®¾ç½®åˆ°äº†mapé‡Œé¢ï¼Œkeyè®¾ç½®çš„æ˜¯thisï¼Œvalueè®¾ç½®çš„æ˜¯æˆ‘ä»¬æƒ³è¦çš„é‚£ä¸ªå€¼ï¼Œè¿™ä¸ªthiså°±æ˜¯å½“å‰å¯¹è±¡ThreadLocalï¼Œvalueå°±æ˜¯Personç±»ï¼Œå¦‚æœmapä¸ç­‰äºç©ºçš„æƒ…å†µä¸‹å°±è®¾ç½®è¿›å»å°±è¡Œäº†ï¼Œå¦‚æœç­‰äºç©ºå‘¢ï¼Ÿå°±åˆ›å»ºä¸€ä¸ªmap</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//ThraedLocalæºç </span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">T</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ThreadLocalMap</span> map <span class="token operator">=</span> <span class="token function">getMap</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>map <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>            <span class="token function">createMap</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹è¿™ä¸ªmapï¼ŒThreadLocalMap map=getMap(t)ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªmapåˆ°åº•åœ¨å“ªé‡Œï¼Œæˆ‘ä»¬ç‚¹å‡»åˆ°äº†getMapè¿™ä¸ªæ–¹æ³•çœ‹åˆ°ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯t.threadLocals</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//ThreadLocalæºç </span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">T</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ThreadLocalMap</span> map <span class="token operator">=</span> <span class="token function">getMap</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>map <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>            <span class="token function">createMap</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token class-name">ThreadLocalMap</span> <span class="token function">getMap</span><span class="token punctuation">(</span><span class="token class-name">Thread</span> t<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> t<span class="token punctuation">.</span>threadLocals<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æˆ‘ä»¬è¿›å…¥è¿™ä¸ªt.threadLocalsï¼Œä½ ä¼šå‘ç°ThreadLocalMapè¿™ä¸ªä¸œè¥¿åœ¨å“ªé‡Œå‘¢ï¼Ÿå±…ç„¶æ˜¯åœ¨Threadè¿™ä¸ªç±»é‡Œï¼Œæ‰€ä»¥è¯´è¿™ä¸ªmapæ˜¯åœ¨Thredç±»é‡Œçš„</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">&#123;</span><span class="token class-name">ThreadLocal<span class="token punctuation">.</span>ThreadLocalMap</span> threadLocals <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬åº”è¯¥æ˜ç™½ï¼Œmapçš„setæ–¹æ³•å…¶å®å°±æ˜¯è®¾ç½®å½“å‰çº¿ç¨‹é‡Œé¢çš„mapï¼š</p><pre class="language-latex" data-language="latex"><code class="language-latex">Â·set- Thread.currentThread.map(ThreadLocal,person)</code></pre><p>æ‰€ä»¥è¿™ä¸ªæ—¶å€™ä½ ä¼šå‘ç°ï¼ŒåŸæ¥Personç±»è¢«setåˆ°äº†ï¼Œå½“å‰çº¿ç¨‹é‡Œçš„æŸä¸€ä¸ªmapé‡Œé¢å»äº†ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å°±èƒ½æƒ³æ˜ç™½äº†ï¼Œæˆ‘setäº†ä¸€ä¸ªå€¼ä»¥åï¼Œä¸ºä»€ä¹ˆå…¶ä»–çº¿ç¨‹è®¿é—®ä¸åˆ°ï¼Ÿæˆ‘ä»¬æ³¨é‡â€œå½“å‰çº¿ç¨‹â€è¿™ä¸ªæ®µè¯ï¼Œæ‰€ä»¥ä¸ªt1çº¿ç¨‹setäº†ä¸€ä¸ªPersonå¯¹è±¡åˆ°è‡ªå·±çš„mapé‡Œï¼Œt2çº¿ç¨‹å»è®¿é—®çš„ä¹Ÿæ˜¯è‡ªå·±çš„å±äºt2çº¿ç¨‹çš„mapï¼Œæ‰€ä»¥æ˜¯è¯»ä¸åˆ°å€¼çš„ï¼Œå› æ­¤ä½ ä½¿ç”¨ThreadLocalçš„æ—¶å€™ï¼Œä½ ç”¨setå’Œgetå°±å®Œå…¨çš„æŠŠä»–éš”ç¦»å¼€äº†ï¼Œå°±æ˜¯æˆ‘è‡ªå·±çº¿ç¨‹é‡Œé¢æ‰€ç‰¹æœ‰çš„ï¼Œå…¶å®ƒçš„çº¿ç¨‹æ˜¯æ²¡æœ‰çš„ï¼Œä»¥å‰æˆ‘ä»¬çš„ç†è§£æ˜¯éƒ½åœ¨ä¸€ä¸ªmapï¼Œç„¶è€Œå¹¶ä¸æ˜¯ï¼Œæ‰€ä»¥ä½ å¾—è¯»æºç ï¼Œè¯»æºç ä½ å°±æ˜ç™½äº†</p><h2 id="ç”¨é€”">ç”¨é€”</h2><p>å£°æ˜å¼çš„äº‹åŠ¡ä¿è¯åŒä¸€ä¸ªconnetion</p><p>æˆ‘ä»¬æ ¹æ®Spirngçš„å£°æ˜å¼äº‹åŠ¡æ¥è§£æï¼Œä¸ºä»€ä¹ˆè¦ç”¨ThreadLocalï¼Œå£°æ˜å¼äº‹åŠ¡ä¸€èˆ¬æ¥è®²æˆ‘ä»¬æ˜¯è¦é€šè¿‡æ•°æ®åº“çš„ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“Springç»“åˆMybatisï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥æŠŠæ•´ä¸ªäº‹åŠ¡å†™åœ¨é…ç½®æ–‡ä»¶ä¸­çš„ï¼Œè€Œè¿™ä¸ªé…ç½®æ–‡ä»¶é‡Œçš„äº‹åŠ¡ï¼Œå®ƒå®é™…ä¸Šæ˜¯ç®¡ç†äº†ä¸€ç³»åˆ—çš„æ–¹æ³•ï¼Œæ–¹æ³•1ã€æ–¹æ³•2ã€æ–¹æ³•3â€¦ï¼Œè€Œè¿™äº›æ–¹æ³•é‡Œé¢å¯èƒ½å†™äº†ï¼Œæ¯”æ–¹è¯´ç¬¬1ä¸ªæ–¹æ³•å†™äº†å»é…ç½®æ–‡ä»¶é‡Œæ‹¿åˆ°æ•°æ®åº“è¿æ¥Connectionï¼Œç¬¬2ä¸ªã€ç¬¬3ä¸ªéƒ½æ˜¯ä¸€æ ·å»æ‹¿æ•°æ®åº“è¿æ¥ï¼Œç„¶åå£°æ˜å¼äº‹åŠ¡å¯ä»¥æŠŠè¿™å‡ ä¸ªæ–¹æ³•åˆåœ¨ä¸€èµ·ï¼Œè§†ä¸ºä¸€ä¸ªå®Œæ•´çš„äº‹åŠ¡ï¼Œå¦‚æœè¯´åœ¨è¿™äº›æ–¹æ³•é‡Œï¼Œæ¯ä¸€ä¸ªæ–¹æ³•æ‹¿çš„è¿æ¥ï¼Œå®ƒæ‹¿çš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä½ è§‰çš„è¿™ä¸ªä¸œè¥¿èƒ½å½¢æˆä¸€ä¸ªå®Œæ•´çš„äº‹åŠ¡å—ï¼ŸConnectionä¼šæ”¾åˆ°ä¸€ä¸ªè¿æ¥æ± é‡Œè¾¹ï¼Œå¦‚æœç¬¬1ä¸ªæ–¹æ³•æ‹¿çš„æ˜¯ç¬¬1ä¸ªConnectionï¼Œç¬¬2ä¸ªæ‹¿çš„æ˜¯ç¬¬2ä¸ªï¼Œç¬¬3ä¸ªæ‹¿çš„æ˜¯ç¬¬3ä¸ªï¼Œè¿™ä¸œè¥¿èƒ½å½¢æˆä¸€ä¸ªå®Œæ•´çš„äº‹åŠ¡å—ï¼Ÿç™¾åˆ†ä¹‹ä¸€ä¸‡çš„ä¸å¯èƒ½ï¼Œæ²¡å¬è¯´è¿‡ä¸åŒçš„Connectionè¿˜èƒ½å½¢æˆä¸€ä¸ªå®Œæ•´çš„äº‹åŠ¡çš„ï¼Œé‚£ä¹ˆæ€ä¹ˆä¿è¯è¿™ä¹ˆå¤šConnectionä¹‹é—´ä¿è¯æ˜¯åŒä¸€ä¸ªConnectionå‘¢ï¼ŸæŠŠè¿™ä¸ªConnectionæ”¾åˆ°è¿™ä¸ªçº¿ç¨‹çš„æœ¬åœ°å¯¹è±¡é‡ŒThreadLocalé‡Œé¢ï¼Œä»¥åå†æ‹¿çš„æ—¶å€™ï¼Œå®é™…ä¸Šæˆ‘æ˜¯ä»ThreadLocalé‡Œæ‹¿çš„ï¼Œç¬¬1ä¸ªæ–¹æ³•æ‹¿çš„æ—¶å€™å°±æŠŠConnectionæ”¾åˆ°ThreadLocalé‡Œé¢ï¼Œåé¢çš„æ–¹æ³•è¦æ‹¿çš„æ—¶å€™ï¼Œä»ThreadLocalé‡Œç›´æ¥æ‹¿ï¼Œä¸ä»çº¿ç¨‹æ± æ‹¿ã€‚</p><h2 id="å››ç§å¼•ç”¨">å››ç§å¼•ç”¨</h2><h3 id="å¼•ç”¨æ˜¯ä»€ä¹ˆï¼Ÿ">å¼•ç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>å°±æ˜¯ä¸€ä¸ªå˜é‡å€¼æŒ‡å‘ä¸€ä¸ªå¯¹è±¡</p><h3 id="å¼ºå¼•ç”¨normalReference">å¼ºå¼•ç”¨normalReference</h3><p>æ™®é€šçš„å¼•ç”¨æ¯”å¦‚Object o = new Object()ï¼Œè¿™ä¸ªå°±å«å¼ºå¼•ç”¨; ç‰¹ç‚¹å°±æ˜¯è¯´ï¼Œåªè¦æœ‰ä¸€ä¸ªåº”ç”¨æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆåƒåœ¾å›æ”¶å™¨ä¸€å®šä¸ä¼šå›æ”¶å®ƒï¼Œè¿™å°±æ˜¯æ™®é€šçš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯å¼ºå¼•ç”¨ã€‚å› ä¸ºæœ‰å¼•ç”¨æŒ‡å‘ï¼Œæ‰€ä»¥ä¸ä¼šå›æ”¶ï¼Œåªæœ‰æ²¡æœ‰å¼•ç”¨æŒ‡å‘çš„æ—¶å€™æ‰ä¼šå›æ”¶ï¼ŒæŒ‡å‘è°ï¼ŸæŒ‡å‘ä½ åˆ›å»ºçš„é‚£ä¸ªå¯¹è±¡ã€‚</p><h3 id="å¼±å¼•ç”¨softReference">å¼±å¼•ç”¨softReference</h3><p>å½“æœ‰ä¸€ä¸ªå¯¹è±¡(å­—èŠ‚æ•°ç»„)è¢«ä¸€ä¸ªè½¯å¼•ç”¨æ‰€æŒ‡å‘çš„æ—¶å€™ï¼Œåªæœ‰ç³»ç»Ÿå†…å­˜ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼Œæ‰ä¼šå›æ”¶å®ƒ(å­—èŠ‚æ•°ç»„)</p><h3 id="è™šå¼•ç”¨">è™šå¼•ç”¨</h3><h4 id="åœ¨threadlocalçš„åº”ç”¨-å†…å­˜æ³„éœ²">==åœ¨threadlocalçš„åº”ç”¨ / å†…å­˜æ³„éœ²==</h4><img src="å¤šçº¿ç¨‹/image-20220310175800308.png" alt="image-20220310175800308" style="zoom:60%;" /><p>æˆ‘ä»¬æ¥çœ‹å›¾ä¸­ä»å·¦å¼€å§‹çœ‹ï¼Œè¿™æ—¶å€™æˆ‘ä»¬åº”è¯¥æ˜ç™½äº†ï¼Œè¿™é‡Œtlæ˜¯ä¸€ä¸ªå¼ºå¼•ç”¨æŒ‡å‘è¿™ä¸ªThreadLocalå¯¹è±¡ï¼Œè€ŒMapé‡Œçš„keyæ˜¯é€šè¿‡ä¸€ä¸ªå¼±å¼•ç”¨æŒ‡å‘äº†ä¸€ä¸ªThreadLocalå¯¹è±¡ï¼Œæˆ‘ä»¬å‡è®¾è¿™æ˜¯ä¸ªå¼ºå¼•ç”¨ï¼Œå½“tlæŒ‡å‘è¿™ä¸ªThreadLocalå¯¹è±¡æ¶ˆå¤±çš„æ—¶å€™ï¼Œtlè¿™ä¸ªä¸œè¥¿æ˜¯ä¸ªå±€éƒ¨å˜é‡ï¼Œæ–¹æ³•å·²ç»“æŸå®ƒå°±æ¶ˆå¤±äº†ï¼Œå½“tlæ¶ˆå¤±äº†ï¼Œå¦‚æœè¿™ä¸ªThreadLocalå¯¹è±¡è¿˜è¢«ä¸€ä¸ªå¼ºå¼•ç”¨çš„keyæŒ‡å‘çš„æ—¶å€™ï¼Œè¿™ä¸ªThreadLocalå¯¹è±¡ä¸èƒ½è¢«å›æ”¶ï¼Œè€Œä¸”ç”±äºè¿™ä¸ªçº¿ç¨‹æœ‰å¾ˆå¤šçº¿ç¨‹æ˜¯é•¿æœŸå­˜åœ¨çš„ï¼Œæ¯”å¦‚è¿™ä¸ªæ˜¯ä¸€ä¸ªæœåŠ¡å™¨çº¿ç¨‹ï¼Œ7*24å°æ—¶ä¸€å¹´365å¤©ä¸é—´æ–­è¿è¡Œï¼Œé‚£ä¹ˆä¸é—´æ–­è¿è¡Œçš„æ—¶å€™ï¼Œè¿™ä¸ªtlä¼šé•¿æœŸå­˜åœ¨ï¼Œè¿™ä¸ªMapä¼šé•¿æœŸå­˜åœ¨ï¼Œè¿™ä¸ªMapçš„keyä¹Ÿä¼šé•¿æœŸå­˜åœ¨ï¼Œè¿™ä¸ªkeyé•¿æœŸå­˜åœ¨çš„è¯ï¼Œè¿™ä¸ªThreadLocalå¯¹è±¡æ°¸è¿œä¸ä¼šè¢«æ¶ˆå¤±ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ä¸æ˜¯å°±ä¼šæœ‰å†…å­˜æ³„æ¼ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªkeyæ˜¯å¼±å¼•ç”¨çš„è¯è¿˜ä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜å—ï¼Ÿå½“è¿™ä¸ªå¼ºå¼•ç”¨æ¶ˆå¤±çš„æ—¶å€™è¿™ä¸ªå¼±å¼•ç”¨æ˜¯ä¸æ˜¯è‡ªåŠ¨å°±ä¼šå›æ”¶äº†ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç”¨WeakReferenceçš„åŸå› </p><p>å…³äºThreadLocalè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ä»¬tlè¿™ä¸ªå¼ºå¼•ç”¨æ¶ˆå¤±äº†ï¼Œkeyçš„æŒ‡å‘ä¹Ÿè¢«å›æ”¶äº†ï¼Œå¯æ˜¯å¾ˆä¸å¹¸çš„æ˜¯è¿™ä¸ªkeyæŒ‡å‘äº†ä¸€ä¸ªnullå€¼ï¼Œä½†æ˜¯è¿™ä¸ªthreadLocalsçš„Mapæ˜¯æ°¸è¿œå­˜åœ¨çš„ï¼Œç›¸å½“äºè¯´key/valueå¯¹ï¼Œä½ è¿™ä¸ªkeyæ˜¯nullçš„ï¼Œä½ è¿™ä¸ªvalueæŒ‡å‘çš„ä¸œè¥¿ï¼Œä½ çš„è¿™ä¸ª10MBçš„å­—èŠ‚ç ï¼Œä½ è¿˜èƒ½è®¿é—®åˆ°å—ï¼Ÿè®¿é—®ä¸åˆ°äº†ï¼Œå¦‚æœè¿™ä¸ªMapè¶Šç§¯æ”’è¶Šå¤šï¼Œè¶Šæ¥è¶Šå¤šï¼Œå®ƒè¿˜æ˜¯ä¼šå†…å­˜æ³„æ¼ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿæ‰€ä»¥å¿…é¡»è®°ä½è¿™ä¸€ç‚¹ï¼Œä½¿ç”¨ThreadLocalé‡Œé¢çš„å¯¹è±¡ä¸ç”¨äº†ï¼ŒåŠ¡å¿…è¦removeæ‰ï¼Œä¸ç„¶è¿˜ä¼šæœ‰å†…å­˜æ³„æ¼</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">ThradLocalM</span><span class="token operator">></span> tl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tl<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">M</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tl<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1>JUCåŒæ­¥å®¹å™¨</h1><h2 id="ConcurrentHashMap">ConcurrentHashMap</h2><p>é›†åˆéƒ¨åˆ†</p><p>æˆ‘ä»¬æ¥çœ‹è¿™ä¸ªç»å¸¸åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ä½¿ç”¨çš„è¿™äº›ä¸ªå®¹å™¨ ï¼Œä»Mapå¼€å§‹è®²ï¼ŒMapç»å¸¸ç”¨çš„æœ‰è¿™ä¹ˆå‡ ä¸ª</p><ul><li><p>ConcurrentHashMapç”¨hashè¡¨å®ç°çš„è¿™æ ·ä¸€ä¸ªé«˜å¹¶å‘å®¹å™¨ï¼›</p><p>æ—¢ç„¶æœ‰äº†ConcurrentHashMapæ­£å¸¸æƒ…å†µä¸‹å°±åº”è¯¥æœ‰ConcurrentTreeMapï¼Œä½ å¯ä»¥å»æŸ¥æŸ¥ï¼Œå®ƒæ²¡æœ‰ï¼Œå°±ç­‰äºç¼ºäº†ä¸€å—ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰å‘¢ï¼ŒåŸå› å°±æ˜¯ConcurrentHashMapé‡Œé¢ç”¨çš„æ˜¯casæ“ä½œï¼Œè¿™ä¸ªcasæ“ä½œå®ƒç”¨åœ¨treeçš„æ—¶å€™ï¼Œç”¨åœ¨æ ‘è¿™ä¸ªèŠ‚ç‚¹ä¸Šçš„æ—¶å€™å®ç°èµ·æ¥å¤ªå¤æ‚äº†ï¼Œæ‰€ä»¥å°±æ²¡æœ‰è¿™ä¸ªConcurrentTreeMapï¼Œä½†æ˜¯æœ‰æ—¶é—´ä¹Ÿéœ€è¦è¿™æ ·ä¸€ä¸ªæ’å¥½åºçš„Mapï¼Œé‚£å°±æœ‰äº†ConcurrentSkipListMapè·³è¡¨ç»“æ„å°±å‡ºç°äº†ã€‚</p></li><li><p>ConcurrentSkipListMapé€šè¿‡è·³è¡¨æ¥å®ç°çš„é«˜å¹¶å‘å®¹å™¨å¹¶ä¸”è¿™ä¸ªMapæ˜¯æœ‰æ’åºçš„ï¼›</p><img src="å¤šçº¿ç¨‹/06_02.jpg" alt="06_02" style="zoom:67%;" /><p>è·³è¡¨æ˜¯ä»€ä¹ˆæ ·çš„ç»“æ„å‘¢ï¼Ÿåº•å±‚æœ¬èº«å­˜å‚¨çš„å…ƒç´ ä¸€ä¸ªé“¾è¡¨ï¼Œå®ƒæ˜¯æ’å¥½é¡ºåºçš„ï¼Œå¤§å®¶çŸ¥é“å½“ä¸€ä¸ªé“¾è¡¨æ’å¥½é¡ºåºçš„æ—¶å€™å¾€é‡Œæ’å…¥æ˜¯ç‰¹åˆ«å›°éš¾çš„ï¼ŒæŸ¥æ‰¾çš„æ—¶å€™ä¹Ÿç‰¹åˆ«éº»çƒ¦ï¼Œå› ä¸ºä½ å¾—ä»å¤´å»éå†æŸ¥æ‰¾è¿™ä¸ªå…ƒç´ åˆ°åº•åœ¨å“ªé‡Œï¼Œæ‰€ä»¥å°±å‡ºç°äº†è¿™ä¸ªè·³è¡¨çš„ç»“æ„ï¼Œåº•å±‚æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨æŸ¥æ‰¾çš„æ—¶å€™æ¯”è¾ƒå›°éš¾æ€ä¹ˆåŠï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨è¿™äº›é“¾è¡¨çš„åŸºç¡€ä¸Šåœ¨æ‹¿å‡ºä¸€äº›å…³é”®å…ƒç´ æ¥ï¼Œåœ¨ä¸Šé¢åšä¸€å±‚ï¼Œé‚£è¿™ä¸ªå…³é”®å…ƒç´ çš„è¿™ä¸€å±‚ä¹Ÿæ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œé‚£è¿™ä¸ªæ•°é‡ç‰¹åˆ«å¤§çš„è¯åœ¨è¿™ä¸ªåŸºç¡€ä¹‹ä¸Šåœ¨æ‹¿ä¸€å±‚å‡ºæ¥å†åšä¸€ä¸ªé“¾è¡¨ï¼Œæ¯å±‚é“¾è¡¨çš„æ•°æ®è¶Šæ¥è¶Šå°‘ï¼Œè€Œä¸”å®ƒæ˜¯åˆ†å±‚ï¼Œåœ¨æˆ‘ä»¬æŸ¥æ‰¾çš„æ—¶å€™ä»é¡¶å±‚å¾€ä¸‹å¼€å§‹æŸ¥æ‰¾ï¼Œæ‰€ä»¥å‘¢ï¼ŒæŸ¥æ‰¾å®¹æ˜“äº†å¾ˆå¤šï¼ŒåŒæ—¶å®ƒæ— é”çš„å®ç°éš¾åº¦æ¯”TreeMapåˆå®¹æ˜“å¾ˆå¤šï¼Œå› æ­¤åœ¨JUCé‡Œé¢æä¾›äº†ConcurrentSkipListMapè¿™ä¸ªç±»ã€‚</p></li></ul><p>ä»–ä»¬ä¸¤ä¸ªçš„åŒºåˆ«ä¸€ä¸ªæ˜¯æœ‰åºçš„ä¸€ä¸ªæ˜¯æ— åºçš„ï¼ŒåŒæ—¶éƒ½æ”¯æŒå¹¶å‘çš„æ“ä½œã€‚ä¸‹é¢è¿™ä¸ªå°ç¨‹åºæ˜¯ä¸€ä¸ªæ•ˆç‡çš„æµ‹è¯•å…¶å®ä¹Ÿæ²¡å¤šå¤§æ„ä¹‰ï¼Œå¤§å®¶å¯ä»¥å»å†™ä¸€ä¸‹è·‘è·‘ã€‚</p><h2 id="CopyOnWriteArrayList">CopyOnWriteArrayList</h2><h3 id="CopyOnWriteArrayList-æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥ç”¨äºä»€ä¹ˆåº”ç”¨åœºæ™¯ï¼Ÿæœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ">CopyOnWriteArrayList æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥ç”¨äºä»€ä¹ˆåº”ç”¨åœºæ™¯ï¼Ÿæœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ</h3><p>CopyOnWriteArrayList æ˜¯ä¸€ä¸ªå¹¶å‘å®¹å™¨ã€‚æœ‰å¾ˆå¤šäººç§°å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæˆ‘è®¤ä¸ºè¿™å¥è¯ä¸ä¸¥è°¨ï¼Œç¼ºå°‘ä¸€ä¸ªå‰ææ¡ä»¶ï¼Œé‚£å°±æ˜¯éå¤åˆåœºæ™¯ä¸‹æ“ä½œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>CopyOnWriteArrayList(å…é”å®¹å™¨)çš„å¥½å¤„ä¹‹ä¸€æ˜¯å½“å¤šä¸ªè¿­ä»£å™¨åŒæ—¶éå†å’Œä¿®æ”¹è¿™ä¸ªåˆ—è¡¨æ—¶ï¼Œä¸ä¼šæŠ›å‡º ConcurrentModificationExceptionã€‚åœ¨CopyOnWriteArrayList ä¸­ï¼Œå†™å…¥å°†å¯¼è‡´åˆ›å»ºæ•´ä¸ªåº•å±‚æ•°ç»„çš„å‰¯æœ¬ï¼Œè€Œæºæ•°ç»„å°†ä¿ç•™åœ¨åŸåœ°ï¼Œä½¿å¾—å¤åˆ¶çš„æ•°ç»„åœ¨è¢«ä¿®æ”¹æ—¶ï¼Œè¯»å–æ“ä½œå¯ä»¥å®‰å…¨åœ°æ‰§è¡Œã€‚</p><p>CopyOnWriteArrayList çš„ä½¿ç”¨åœºæ™¯é€šè¿‡æºç åˆ†æï¼Œæˆ‘ä»¬çœ‹å‡ºå®ƒçš„ä¼˜ç¼ºç‚¹æ¯”è¾ƒæ˜æ˜¾ï¼Œæ‰€ä»¥ä½¿ç”¨åœºæ™¯ä¹Ÿå°±æ¯”è¾ƒæ˜æ˜¾ã€‚å°±æ˜¯åˆé€‚è¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚</p><p>CopyOnWriteArrayList çš„ç¼ºç‚¹</p><ol><li><p>ç”±äºå†™æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦æ‹·è´æ•°ç»„ï¼Œä¼šæ¶ˆè€—å†…å­˜ï¼Œå¦‚æœåŸæ•°ç»„çš„å†…å®¹æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œå¯èƒ½å¯¼è‡´ young gc æˆ–è€… full gcã€‚</p></li><li><p>ä¸èƒ½ç”¨äºå®æ—¶è¯»çš„åœºæ™¯ï¼Œåƒæ‹·è´æ•°ç»„ã€æ–°å¢å…ƒç´ éƒ½éœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥è°ƒç”¨ä¸€ä¸ª set æ“ä½œåï¼Œè¯»å–åˆ°æ•°æ®å¯èƒ½è¿˜æ˜¯æ—§çš„ï¼Œè™½ç„¶CopyOnWriteArrayList èƒ½åšåˆ°å§‹ç»ˆä¸€è‡´æ€§,ä½†æ˜¯è¿˜æ˜¯æ²¡æ³•æ»¡è¶³å®æ—¶æ€§è¦æ±‚ã€‚</p></li><li><p>ç”±äºå®é™…ä½¿ç”¨ä¸­å¯èƒ½æ²¡æ³•ä¿è¯ CopyOnWriteArrayList åˆ°åº•è¦æ”¾ç½®å¤šå°‘æ•°æ®ï¼Œä¸‡ä¸€æ•°æ®ç¨å¾®æœ‰ç‚¹å¤šï¼Œæ¯æ¬¡ add/set éƒ½è¦é‡æ–°å¤åˆ¶æ•°ç»„ï¼Œè¿™ä¸ªä»£ä»·å®åœ¨å¤ªé«˜æ˜‚äº†ã€‚åœ¨é«˜æ€§èƒ½çš„äº’è”ç½‘åº”ç”¨ä¸­ï¼Œè¿™ç§æ“ä½œåˆ†åˆ†é’Ÿå¼•èµ·æ•…éšœã€‚</p></li></ol><p>CopyOnWriteArrayList çš„è®¾è®¡æ€æƒ³</p><ol><li>è¯»å†™åˆ†ç¦»ï¼Œè¯»å’Œå†™åˆ†å¼€</li><li>ç»ˆä¸€è‡´æ€§</li><li>ä½¿ç”¨å¦å¤–å¼€è¾Ÿç©ºé—´çš„æ€è·¯ï¼Œæ¥è§£å†³å¹¶å‘å†²çª</li></ol><h2 id="BlockingQueue">BlockingQueue</h2><h3 id="ArrayBlockingQueue"><strong>ArrayBlockingQueue</strong></h3><p>ArrayBlockingQueueæ˜¯æœ‰ç•Œçš„ï¼Œä½ å¯ä»¥æŒ‡å®šå®ƒä¸€ä¸ªå›ºå®šçš„å€¼10ï¼Œå®ƒå®¹å™¨å°±æ˜¯10ï¼Œé‚£ä¹ˆå½“ä½ å¾€é‡Œé¢æ‰”å®¹å™¨çš„æ—¶å€™ï¼Œä¸€æ—¦ä»–æ»¡äº†è¿™ä¸ªputæ–¹æ³•å°±ä¼šé˜»å¡ä½ã€‚ç„¶åä½ å¯ä»¥çœ‹çœ‹ç”¨addæ–¹æ³•æ»¡äº†ä¹‹åä»–ä¼šæŠ¥å¼‚å¸¸ã€‚offerç”¨è¿”å›å€¼æ¥åˆ¤æ–­åˆ°åº•åŠ æ²¡åŠ æˆåŠŸï¼Œofferè¿˜æœ‰å¦å¤–ä¸€ä¸ªå†™æ³•ä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªæ—¶é—´å°è¯•ç€å¾€é‡Œé¢åŠ 1ç§’é’Ÿï¼Œ1ç§’é’Ÿä¹‹åå¦‚æœåŠ ä¸è¿›å»å®ƒå°±è¿”å›äº†ã€‚</p><p>å›åˆ°é‚£ä¸ªé¢è¯•ç»å¸¸è¢«é—®åˆ°çš„é—®é¢˜ï¼ŒQueueå’ŒListçš„åŒºåˆ«åˆ°åº•åœ¨å“ªé‡Œï¼Œä¸»è¦å°±åœ¨è¿™é‡Œï¼Œæ·»åŠ äº†offerã€peekã€pollã€putã€takeè¿™äº›ä¸ªå¯¹çº¿ç¨‹å‹å¥½çš„æˆ–è€…é˜»å¡ï¼Œæˆ–è€…ç­‰å¾…æ–¹æ³•ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>mashibing<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>c_025</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Random</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ArrayBlockingQueue</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">BlockingQueue</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">T06_ArrayBlockingQueue</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">static</span> <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> strs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">static</span> <span class="token class-name">Random</span> r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         strs<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"a"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>            <span class="token comment">//strs.put("aaa"); //æ»¡äº†å°±ä¼šç­‰å¾…ï¼Œç¨‹åºé˜»å¡</span>      <span class="token comment">//strs.add("aaa");</span>      <span class="token comment">//strs.offer("aaa");</span>      strs<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token string">"aaa"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>strs<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="Queueå’ŒListçš„åŒºåˆ«">Queueå’ŒListçš„åŒºåˆ«</h3><p>åŒºåˆ«ä¸»è¦å°±æ˜¯Queueæ·»åŠ äº†è®¸å¤šå¯¹çº¿ç¨‹å‹å¥½çš„API offerã€peekã€pollï¼Œä»–çš„ä¸€ä¸ªå­ç±»å‹å«BlockingQueueå¯¹çº¿ç¨‹å‹å¥½çš„APIåˆæ·»åŠ äº†putå’Œtakeï¼Œè¿™ä¸¤ä¸ªå®ç°äº†é˜»å¡æ“ä½œã€‚</p><h1>çº¿ç¨‹æ± </h1><img src="å¤šçº¿ç¨‹/image-20220314163745382.png" alt="image-20220314163745382" style="zoom:50%;" /><h2 id="Executor-çº¿ç¨‹çš„å·¥å‚">Executor(çº¿ç¨‹çš„å·¥å‚</h2><h3 id="newSingleThreadPool">newSingleThreadPool</h3><p>è¿™ä¸ªçº¿ç¨‹æ± é‡Œé¢åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™ä¸ªä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± å¯ä»¥ä¿è¯æˆ‘ä»¬æ‰”è¿›å»çš„ä»»åŠ¡æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚ä¸ºä»€ä¹ˆä¼šæœ‰å•çº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Ÿç¬¬ä¸€ä¸ªçº¿ç¨‹æ± æ˜¯æœ‰ä»»åŠ¡é˜Ÿåˆ—çš„ï¼›ç”Ÿå‘½å‘¨æœŸç®¡ç†çº¿ç¨‹æ± æ˜¯èƒ½å¸®ä½ æä¾›çš„ã€‚</p><h3 id="newCachedThreadPoolæ²¡ä¸Šé™">newCachedThreadPoolæ²¡ä¸Šé™</h3><p>æ¥ä¸€ä¸ªæ–°çš„ä»»åŠ¡å°±å¿…é¡»é©¬ä¸Šæ‰§è¡Œï¼Œæ²¡æœ‰çº¿ç¨‹ç©ºç€æˆ‘å°±newä¸€ä¸ªçº¿ç¨‹ã€‚é‚£ä¹ˆé˜¿é‡Œæ˜¯ä¸ä¼šæ¨èä½¿ç”¨è¿™ä¸­çº¿ç¨‹æ± çš„ï¼ŒåŸå› æ˜¯çº¿ç¨‹ä¼šå¯åŠ¨çš„ç‰¹åˆ«å¤šï¼ŒåŸºæœ¬æ¥è¿‘äºæ²¡æœ‰ä¸Šé™çš„ã€‚</p><h3 id="newFixedThreadPool-å›ºå®šçš„">newFixedThreadPool å›ºå®šçš„</h3><p>æŒ‡å®šä¸€ä¸ªå‚æ•°ï¼Œåˆ°åº•æœ‰å¤šå°‘ä¸ªçº¿ç¨‹ï¼Œä»–çš„æ ¸å¿ƒçº¿ç¨‹å’Œæœ€å¤§çº¿ç¨‹éƒ½æ˜¯å›ºå®šçš„ï¼Œå› ä¸ºä»–çš„æœ€å¤§çº¿ç¨‹å’Œæ ¸å¿ƒçº¿ç¨‹éƒ½æ˜¯å›ºå®šçš„å°±æ²¡æœ‰å›æ”¶ä¹‹è¯´æ‰€ä»¥æŠŠä»–æŒ‡å®šæˆ0ï¼Œè¿™é‡Œç”¨çš„æ˜¯LinkedBlockingQueue</p><h3 id="newScheduledThreadPoolå®šæ—¶ä»»åŠ¡">newScheduledThreadPoolå®šæ—¶ä»»åŠ¡</h3><p>è¿™æ˜¯ä¸“é—¨ç»™å®šæ—¶ä»»åŠ¡ç”¨çš„è¿™æ ·çš„ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œäº†è§£å°±å¯ä»¥äº†ã€‚</p><h2 id="ThreadPoolExecutor">ThreadPoolExecutor</h2><h3 id="1-çŠ¶æ€">1. çŠ¶æ€</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// 4. çº¿ç¨‹æ± æœ‰5ç§çŠ¶æ€ï¼ŒæŒ‰å¤§å°æ’åºå¦‚ä¸‹ï¼šRUNNING &lt; SHUTDOWN &lt; STOP &lt; TIDYING &lt; TERMINATED</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">RUNNING</span>    <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token constant">COUNT_BITS</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">SHUTDOWN</span>   <span class="token operator">=</span>  <span class="token number">0</span> <span class="token operator">&lt;&lt;</span> <span class="token constant">COUNT_BITS</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">STOP</span>       <span class="token operator">=</span>  <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token constant">COUNT_BITS</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">TIDYING</span>    <span class="token operator">=</span>  <span class="token number">2</span> <span class="token operator">&lt;&lt;</span> <span class="token constant">COUNT_BITS</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">TERMINATED</span> <span class="token operator">=</span>  <span class="token number">3</span> <span class="token operator">&lt;&lt;</span> <span class="token constant">COUNT_BITS</span><span class="token punctuation">;</span></code></pre><p>RUNNINGï¼šæ­£å¸¸è¿è¡Œçš„ï¼›</p><p>SHUTDOWNï¼šè°ƒç”¨äº†shutdownæ–¹æ³•äº†è¿›å…¥äº†shutdownçŠ¶æ€ï¼›</p><p>STOPï¼šè°ƒç”¨äº†shutdownnowé©¬ä¸Šè®©ä»–åœæ­¢ï¼›</p><p>TIDYINGï¼šè°ƒç”¨äº†shutdownç„¶åè¿™ä¸ªçº¿ç¨‹ä¹Ÿæ‰§è¡Œå®Œäº†ï¼Œç°åœ¨æ­£åœ¨æ•´ç†çš„è¿™ä¸ªè¿‡ç¨‹å«TIDYINGï¼›</p><p>TERMINATEDï¼šæ•´ä¸ªçº¿ç¨‹å…¨éƒ¨ç»“æŸï¼›</p><img src="å¤šçº¿ç¨‹/image-20220314162532547.png" alt="image-20220314162532547" style="zoom:50%;" /><p>âš ï¸å¤šçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</p><h3 id="2-æ„é€ æ–¹æ³•å‚æ•°">2. æ„é€ æ–¹æ³•å‚æ•°</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token keyword">int</span> corePoolSize<span class="token punctuation">,</span>                          <span class="token keyword">int</span> maximumPoolSize<span class="token punctuation">,</span>                          <span class="token keyword">long</span> keepAliveTime<span class="token punctuation">,</span>                          <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">,</span>                          <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">></span></span> workQueue<span class="token punctuation">,</span>                          <span class="token class-name">ThreadFactory</span> threadFactory<span class="token punctuation">,</span>                          <span class="token class-name">RejectedExecutionHandler</span> handler<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åŸºæœ¬ç±»å‹å‚æ•°æ ¡éªŒ</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>corePoolSize <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span>        maximumPoolSize <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span>        maximumPoolSize <span class="token operator">&lt;</span> corePoolSize <span class="token operator">||</span>        keepAliveTime <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç©ºæŒ‡é’ˆæ ¡éªŒ</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>workQueue <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> threadFactory <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> handler <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>corePoolSize <span class="token operator">=</span> corePoolSize<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>maximumPoolSize <span class="token operator">=</span> maximumPoolSize<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>workQueue <span class="token operator">=</span> workQueue<span class="token punctuation">;</span>    <span class="token comment">// æ ¹æ®ä¼ å…¥å‚æ•°`unit`å’Œ`keepAliveTime`ï¼Œå°†å­˜æ´»æ—¶é—´è½¬æ¢ä¸ºçº³ç§’å­˜åˆ°å˜é‡`keepAliveTime `ä¸­</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>keepAliveTime <span class="token operator">=</span> unit<span class="token punctuation">.</span><span class="token function">toNanos</span><span class="token punctuation">(</span>keepAliveTime<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>threadFactory <span class="token operator">=</span> threadFactory<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handler <span class="token operator">=</span> handler<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>corePoolSizeæ ¸å¿ƒçº¿ç¨‹æ•°</p><p>maximumPSæœ€å¤§çº¿ç¨‹æ•°</p><p>keepAliveTimeé”€æ¯ä¹‹å‰ç­‰å¾…çš„æ—¶é—´</p><p>TimeUnitæ—¶é—´å•ä½</p><p>BlockingQueueä»»åŠ¡é˜Ÿåˆ—<br>LinkedBQ<br>ArrayBQ<br>SynchronousBQ</p><p>ThreadFactoryçº¿ç¨‹å·¥å‚</p><p>RejectStrategyæ‹’ç»ç­–ç•¥<br>AbortæŠ›å¼‚å¸¸<br>Discardæ‰”æ‰<br>DiscardOldest<br>CallerRuns</p><h3 id="3-execute-è°ƒåº¦ä»»åŠ¡">3. execute()è°ƒåº¦ä»»åŠ¡</h3><p>executeæ‰§è¡Œä»»åŠ¡çš„æ—¶å€™åˆ¤æ–­ä»»åŠ¡ç­‰äºç©ºæŠ›å¼‚å¸¸ï¼Œè¿™ä¸ªå¾ˆç®€å•ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ‹¿çŠ¶æ€å€¼ï¼Œæ‹¿åˆ°å€¼ä¹‹åè®¡ç®—è¿™ä¸ªå€¼é‡Œé¢çš„çº¿ç¨‹æ•°ï¼Œæ´»ç€çš„é‚£äº›çº¿ç¨‹æ•°æ˜¯ä¸æ˜¯å°äºæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå¦‚æœå°äºaddWorkeræ·»åŠ ä¸€ä¸ªçº¿ç¨‹ï¼ŒaddWorkeræ˜¯æ¯”è¾ƒéš¾çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä»–çš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡çš„æ˜¯ï¼Œæ˜¯ä¸æ˜¯æ ¸å¿ƒçº¿ç¨‹ï¼Œæ‰€æœ‰ä¸Šæ¥ä¹‹åå¦‚æœæ ¸å¿ƒæ•°ä¸å¤Ÿå…ˆæ·»åŠ æ ¸å¿ƒçº¿ç¨‹ï¼Œå†æ¬¡æ£€æŸ¥è¿™ä¸ªå€¼ã€‚æˆ‘ä»¬åŸæ¥è®²è¿‡è¿™ä¸ªçº¿ç¨‹é‡Œé¢ä¸Šæ¥ä¹‹ååˆšå¼€å§‹ä¸º0ï¼Œæ¥ä¸€ä¸ªä»»åŠ¡å¯åŠ¨ä¸€ä¸ªæ ¸å¿ƒçº¿ç¨‹ï¼Œç¬¬äºŒä¸ªå°±æ˜¯æ ¸å¿ƒçº¿ç¨‹æ•°æ»¡äº†ä¹‹åï¼Œæ”¾åˆ°é˜Ÿåˆ—é‡Œã€‚æœ€åæ ¸å¿ƒçº¿ç¨‹æ»¡äº†ï¼Œé˜Ÿåˆ—ä¹Ÿæ»¡äº†ï¼Œå¯åŠ¨éæ ¸å¿ƒçº¿ç¨‹ã€‚å°äºçº¿ç¨‹æ•°å°±ç›´æ¥åŠ ï¼Œåé¢æ‰§è¡Œçš„é€»è¾‘å°±æ˜¯ä¸å°äºäº†ï¼Œä¸å°äºå°±æ˜¯è¶…è¿‡æ ¸å¿ƒçº¿ç¨‹æ•°äº†ç›´æ¥å¾€é‡Œæ‰”ï¼ŒworkQueue.offerå°±æ˜¯æŠŠä»–æ‰”è¿›å»é˜Ÿåˆ—é‡Œï¼Œå†æ£€æŸ¥çŠ¶æ€ã€‚åœ¨è¿™ä¸­é—´å¯èƒ½ä¼šè¢«æ”¹å˜çŠ¶æ€å€¼ï¼Œå› æ­¤éœ€è¦åŒé‡æ£€æŸ¥ï¼Œè¿™ä¸ªè·Ÿæˆ‘ä»¬ä¹‹å‰èŠè¿‡çš„å•ä¾‹æ¨¡å¼é‡Œé¢çš„DCæ˜¯ä¸€æ ·çš„é€»è¾‘ã€‚isRunningï¼Œé‡æ–°åˆæ‹¿è¿™ä¸ªçŠ¶æ€ï¼Œæ‹¿åˆ°è¿™ä¸ªçŠ¶æ€ä¹‹åè¿™é‡Œæ˜¯è¦è¿›è¡Œä¸€ä¸ªçŠ¶æ€åˆ‡æ¢çš„ï¼Œå¦‚æœä¸æ˜¯RunningçŠ¶æ€è¯´æ˜æ‰§è¡Œè¿‡shutdownå‘½ä»¤ï¼Œæ‰ä¼šæŠŠè¿™ä¸ªRunningè½¬æ¢æˆåˆ«çš„çŠ¶æ€ï¼Œå…¶ä»–æƒ…å†µä¸‹workerCountOfå¦‚æœç­‰äº0è¯´æ˜é‡Œé¢æ²¡æœ‰çº¿ç¨‹äº†ï¼Œæ²¡æœ‰çº¿ç¨‹æˆ‘çº¿ç¨‹æ± æ­£å¸¸è¿è¡Œå°±æ·»åŠ éæ ¸å¿ƒçº¿ç¨‹ã€‚è¿™äº›æ­¥éª¤éƒ½æ˜¯é€šè¿‡æºç å¯ä»¥çœ‹å‡ºæ¥çš„ã€‚å¦‚æœæ·»åŠ workæœ¬èº«éƒ½ä¸è¡Œå°±rejectæŠŠä»–ç»™æ‹’ç»æ‰ã€‚</p><img src="å¤šçº¿ç¨‹/image-20220313141951366.png" alt="image-20220313141951366" style="zoom:50%;" /><ol><li><p>æ ¸å¿ƒçº¿ç¨‹ä¸å¤Ÿï¼Œå¯åŠ¨æ ¸å¿ƒçš„</p></li><li><p>coreå¤Ÿäº†å°±åŠ é˜Ÿåˆ—</p></li><li><p>æ ¸å¿ƒå’Œé˜Ÿåˆ—éƒ½å¤Ÿäº†ï¼Œå°±éæ ¸å¿ƒ</p></li></ol><h3 id="4-addWorker-â€”-runWorker">4. addWorker()â€”&gt;runWorker()</h3><ol><li><p>addWorker() å°±åšäº†ä¸¤æ­¥ï¼Œä½¿ç”¨lock()å’Œè‡ªæ—‹åšçš„</p><ol><li>count++</li><li>åŠ è¿›ä»»åŠ¡å¹¶ä¸”start</li></ol></li><li><p>runWorker()æ˜¯çœŸæ­£æ‰§è¡Œçº¿ç¨‹çš„éƒ¨åˆ†</p></li></ol><h4 id="workç±»">workç±»</h4><p>è¿™ä¸ªworkä»–æœ¬èº«æ˜¯RunnableåŒæ—¶åˆæ˜¯AQSã€‚è¿™ä¸ªworkç±»é‡Œé¢ä¼šè®°å½•ç€ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œè¿™ä¸ªæˆå‘˜å˜é‡æ˜¯threadï¼Œå¾ˆå¤šä¸ªçº¿ç¨‹workerï¼Œè¿™ä¸ªå°±æ˜¯ä¸ºä»€ä¹ˆè¦ç”¨AQSçš„åŸå› ã€‚å¦å¤–å‘¢ï¼Œåœ¨ä½ æ•´ä¸ªæ‰§è¡Œçš„è¿‡ç¨‹ä¹‹ä¸­ä½ ä¹Ÿéœ€è¦åŠ é”ï¼Œä¸ç„¶çš„è¯ä½ åˆ«çš„çº¿ç¨‹è¿›æ¥ï¼Œå› æ­¤AQSæ˜¯éœ€è¦çš„ã€‚è¿™æ˜¯è¿™ä¸ªworkç±»ï¼Œç®€å•çš„ä½ å°±å¯ä»¥æŠŠå®ƒå½“æˆçº¿ç¨‹ç±»ï¼Œç„¶åè¿™ä¸ªçº¿ç¨‹ç±»æ‰§è¡Œçš„æ˜¯ä½ è‡ªå·±çš„ä»»åŠ¡å°±è¡Œäº†ã€‚</p><h3 id="submit-å’Œexecute-åŒºåˆ«">submit()å’Œexecute()åŒºåˆ«</h3><p>Callableå®ç°äº†Futureæ¥å£ï¼Œæ¯”runnableå¤šäº†è¿”å›å€¼å¹¶ä¸”å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œç„¶åè¿™ä¸ªFutureæ˜¯ç”¨æ¥å­˜å‚¨æ‰§è¡Œçš„çº¿ç¨‹å°†æ¥æ‰äº§ç”Ÿçš„ç»“æœï¼Œcallableä¸ºçº¿ç¨‹æ± è®¾è®¡ï¼Œé…åˆfutureä½¿ç”¨ï¼Œæœ‰è¿”å›å€¼ï¼Œå®ç°äº†ä»»åŠ¡äº¤ç»™çº¿ç¨‹æ± ï¼Œæœªæ¥è¦ç»“æœæ—¶å†getè¿”å›ã€‚</p><p>FutureTaskæ˜¯ç»§æ‰¿äº†RunnableFutureæ¥å£å’ŒFutureæ¥å£ï¼Œæ—¢æ˜¯ä¸€ä¸ªä»»åŠ¡åˆæ˜¯ä¸€ä¸ªFutureã€‚åœ¨ForkJoinPool è¿™ç±»çº¿ç¨‹æ± é‡Œé¢ç”¨ï¼Œè¿™ç±»çº¿ç¨‹æ± æ˜¯æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ã€‚</p><h1>æ‚é—®é¢˜</h1><h2 id="1-æ€ä¹ˆé¢„é˜²æ­»é”ï¼Ÿ">1. æ€ä¹ˆé¢„é˜²æ­»é”ï¼Ÿ</h2><p>ç­”ï¼šé¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“äº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼šç¬¬ä¸€ä¸ªï¼Œèµ„æºåœ¨åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥å ç”¨ï¼Œè¿™ä¸ªä¹Ÿå°±æ˜¯äº’æ–¥æ¡ä»¶ï¼›ç¬¬äºŒä¸ªï¼Œä¸å¯å‰¥å¤ºæ¡ä»¶ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å·²ç»å æœ‰ä¸€ä¸ªèµ„æºåœ¨é‡Šæ”¾ä¹‹å‰æ˜¯ä¸ä¼šè®©å…¶ä»–çº¿ç¨‹æŠ¢å ï¼›åœ¨æœ‰å°±æ˜¯çº¿ç¨‹ç­‰å¾…çš„è¿‡ç¨‹ä¸­ä¸ä¼šé‡Šæ”¾è‡ªå·±æŒæœ‰çš„èµ„æºï¼Œä¹Ÿå°±æ˜¯è¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼›ç¬¬å››ä¸ªæ¡ä»¶å°±æ˜¯å¾ªç¯ç­‰å¾…æ¡ä»¶ ï¼Œå¤šä¸ªçº¿ç¨‹åœ¨äº’ç›¸ç­‰å¾…å¯¹æ–¹é‡Šæ”¾èµ„æºï¼›æœ‰äº†è¿™å››ä¸ªæ¡ä»¶å½“å¤šä¸ªçº¿ç¨‹éƒ½æŒæœ‰å¯¹æ–¹æƒ³è¦çš„èµ„æºå´ç­‰å¾…å¯¹æ–¹é‡Šæ”¾èµ„æºçš„çŠ¶æ€å°±é€ æˆäº†æ­»é”ï¼›</p><p>â€‹      æ‰€ä»¥é¢„é˜²æ­»é”å°±éœ€è¦ä»è¿™å››ä¸ªæ–¹é¢å…¥æ‰‹ï¼Œç¬¬ä¸€ä¸ªèµ„æºäº’æ–¥å› ä¸ºæ˜¯èµ„æºå›ºæœ‰å±æ€§ä¸èƒ½ç ´åè¿™ä¸ªæ¡ä»¶ï¼›æˆ‘ä»¬å»ç ´åç¬¬äºŒä¸ªä¸å¯å‰¥å¤ºæ¡ä»¶ï¼Œå¯ä»¥è®©è¿›ç¨‹åœ¨ç­‰å¾…è¿‡ç¨‹ä¸­å°†å…¶å æœ‰çš„èµ„æºéšæ€§é‡Šæ”¾åˆ°ç³»ç»Ÿçš„èµ„æºåˆ—è¡¨ä¸­ï¼Œè€Œç­‰å¾…çš„è¿›ç¨‹åªæœ‰é‡æ–°è·å¾—è‡ªå·±åŸæœ‰çš„èµ„æºå’Œæ–°ç”³è¯·çš„èµ„æºæ‰èƒ½å¯åŠ¨æ‰§è¡Œï¼›ç ´åç¬¬ä¸‰ä¸ªè¯·æ±‚å’Œä¿æŒæ¡ä»¶å¯ä»¥ä½¿ç”¨é™æ€åˆ†é…å’ŒåŠ¨æ€åˆ†é…ä¸¤ç§æ–¹æ³•ï¼›é™æ€åˆ†é…å°±æ˜¯åœ¨æ¯ä¸€ä¸ªè¿›ç¨‹å¼€å§‹æ‰§è¡Œæ—¶å°±ç”³è¯·ä»–éœ€è¦çš„èµ„æºï¼›åŠ¨æ€åˆ†é…å°±æ˜¯åœ¨ç”³è¯·èµ„æºçš„æ—¶å€™ä»–æœ¬èº«ä¸èƒ½å ç”¨ç³»ç»Ÿèµ„æºï¼›æœ€åå°±æ˜¯ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ï¼Œå°†ç³»ç»Ÿä¸­çš„æ‰€æœ‰èµ„æºé¡ºåºç¼–å·ï¼Œç´§ç¼ºèµ„æºç”¨å¤§ç¼–å·ï¼Œè¿›ç¨‹åœ¨ç”³è¯·èµ„æºçš„æ—¶å€™å¿…é¡»æŒ‰ç…§ç¼–å·çš„é¡ºåºæ‰§è¡Œã€‚å—¯ï¼Œæˆ‘è®¤ä¸ºå°±ä»è¿™å››ä¸ªæ–¹é¢å»ç€æ‰‹ï¼Œè°¢è°¢ã€‚</p><h2 id="2-çº¿ç¨‹åˆ›å»ºæ–¹å¼å’Œç”Ÿå‘½å‘¨æœŸ">2. çº¿ç¨‹åˆ›å»ºæ–¹å¼å’Œç”Ÿå‘½å‘¨æœŸ</h2><p>æœ‰äº”ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ–¹æ³•å°±æ˜¯ç»§æ‰¿threadç±»ï¼Œé‡å†™run()ï¼Œè°ƒç”¨startå¼€å¯çº¿ç¨‹ï¼›ç¬¬äºŒç§å®ç°runnableæ¥å£ï¼Œé‡å†™run()ï¼Œå®ç°æ¥å£æ¯”ç»§æ‰¿ç±»è¦çµæ´»ï¼›ç¬¬ä¸‰ç§æ˜¯ä½¿ç”¨lamdaè¡¨è¾¾å¼ï¼Œæœ¬è´¨æ˜¯ä¸€æ ·ï¼›ç¬¬å››ç§æ˜¯å®ç°callableæ¥å£æ‰§è¡Œcall()ï¼Œè¿™ç§æ–¹æ³•ç›¸å¯¹runnableä¸åŒå°±æ˜¯æ‰§è¡Œå®Œæ¯•æœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼é€šè¿‡futureæ¥æ”¶å¯ä»¥é€šè¿‡æ³›å‹æŒ‡å®šç±»å‹ï¼Œä¹Ÿå¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼›ç¬¬äº”ç§å°±æ˜¯é€šè¿‡çº¿ç¨‹æ± threadpoolåˆ›å»ºã€‚</p><h3 id="start-å’Œ-run">start å’Œ run</h3><p>new ä¸€ä¸ª thread è°ƒç”¨startå°±æ˜¯å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ç„¶åè¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œä½†åˆ†é…åˆ°æ—¶é—´ç‰‡å°±å¯ä»¥è¿è¡Œï¼Œè€Œrunåªæ˜¯ç”¨äºæ‰§è¡Œçº¿ç¨‹è¿è¡Œæ—¶æ‰§è¡Œä»£ç å¯ä»¥é‡å¤è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´startç”¨æ¥çœŸæ­£å¯åŠ¨å¤šçº¿ç¨‹å·¥ä½œï¼Œè¿›è¡Œå‡†å¤‡å°±ç»ªï¼Œè€Œçº¿ç¨‹åªæ˜¯é€šè¿‡runæ¥å®Œæˆå®ƒçš„è¿è¡ŒçŠ¶æ€ï¼Œæ˜¯ä¸€ä¸ªæ™®é€šæ–¹æ³•çš„è°ƒç”¨ï¼Œå…¶å®è¿˜æ˜¯å†ä¸»çº¿ç¨‹é‡Œæ‰§è¡Œçš„ã€‚</p><h3 id="çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸå’Œäº”ç§çŠ¶æ€">çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸå’Œäº”ç§çŠ¶æ€</h3><img src="å¤šçº¿ç¨‹/image-20220307173638132.png" alt="image-20220307173638132" style="zoom: 33%;" /><p>new -&gt; runnable(start()) -&gt; running (run()) --&gt;blocked (wait()ã€synchè¿›å…¥é”æ± ã€join()/sleep()/IOè¯·æ±‚) -&gt; dead ï¼ˆrun()ç»“æŸæˆ–è€…å¼‚å¸¸é€€å‡ºï¼‰</p><h2 id="3-è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«">3. è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«</h2><p>è¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•ä½æ˜¯æ“ä½œç³»ç»Ÿç»“æ„çš„åŸºç¡€ï¼›çº¿ç¨‹æ˜¯æ“ä½œè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ã€‚é€šä¿—æ¥è®²å°±æ˜¯ï¼Œä¸€ä¸ªç¨‹åºå®ƒæœ¬æ¥æ˜¯ä¸€ç§é™æ€çš„æŒ‡ä»¤å’Œæ•°æ®ï¼Œå½“ç³»ç»Ÿå¼€å§‹è¿è¡Œè¿™ä¸ªç¨‹åºå°±ä¼šloadåˆ°å†…å­˜é‡Œï¼Œç„¶åç³»ç»Ÿä¸ºå…¶åˆ†é…èµ„æºï¼Œè¿™ä¸ªæ—¶å€™å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå¯ä»¥ç†è§£ä¸ºè¿›ç¨‹å°±æ˜¯åŠ¨æ€çš„ç¨‹åºï¼›è€Œçº¿ç¨‹å°±æ˜¯è¿›ç¨‹å®é™…è¿è¡Œçš„å•ä½ï¼Œä¸€ç§å•ä¸€é¡ºåºçš„æ§åˆ¶æµï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥å¹¶å‘å¤šä¸ªçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹æœ‰ä¸åŒä»»åŠ¡ã€‚</p><h2 id="4-å¹¶å‘ä¸å¹¶è¡Œ">4. å¹¶å‘ä¸å¹¶è¡Œ</h2><p>å¹¶å‘æ˜¯æŒ‡å¤šä¸ªä»»åŠ¡åœ¨åŒä¸€ä¸ªCPUæ ¸ä¸Šï¼ŒæŒ‰ç…§ç»†åˆ†çš„æ—¶é—´ç‰‡äº¤æ›¿è¿›è¡Œï¼Œå¦‚æœäº¤æ›¿æ—¶é—´ç‰‡å¤ŸçŸ­ï¼Œé€»è¾‘ä¸Šå¯ä»¥çœ‹ä½œåŒæ—¶æ‰§è¡Œ</p><p>å¹¶è¡Œæ˜¯å¤šä¸ªCPUæ ¸åœ¨åŒä¸€æ—¶é—´å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œæ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„åŒæ—¶è¿›è¡Œ</p><p>ä¸²è¡Œå°±æ˜¯ä¸€ä¸ªCPUå¤šä¸ªä»»åŠ¡ä¸²è”åœ¨ä¸€èµ·ï¼ŒæŒ‰ç…§é¡ºåºæ‰§è¡Œ</p><h2 id="5-ç¨‹åºå¼€å¤šå°‘çº¿ç¨‹åˆé€‚-æ˜¯ä¸æ˜¯çº¿ç¨‹æ•°è¶Šé«˜æ•ˆç‡è¶Šé«˜">5. ç¨‹åºå¼€å¤šå°‘çº¿ç¨‹åˆé€‚/æ˜¯ä¸æ˜¯çº¿ç¨‹æ•°è¶Šé«˜æ•ˆç‡è¶Šé«˜/</h2><p>å¤šçº¿ç¨‹çš„ç¼ºç‚¹ï¼Ÿçº¿ç¨‹æ•°è¿‡å¤šä¼šæ€ä¹ˆæ ·</p><ol><li>å ç”¨å†…å­˜ï¼Œç»™åƒåœ¾å¤„ç†å™¨å¸¦æ¥å‹åŠ›ã€</li><li>éœ€è¦åè°ƒå’Œç®¡ç†CPUæ—¶é—´è·Ÿè¸ªçº¿ç¨‹ã€</li><li>è¿˜ä¼šäº’ç›¸ç«äº‰å…±äº«èµ„æºè¿™æ ·ä¼šå¸¦æ¥å¾ˆå¤šå…¶ä»–æ€§èƒ½çš„å¼€é”€</li></ol><p>ä¸çº¿ç¨‹çš„ä½“åˆ¶å®Œå…¨è€¦åˆå®Œå…¨ç›¸å…³æ‰€ä»¥è¿™ä¸ªæ—¶å€™å°±çœ‹ç¨‹åºè¦å¹²ä»€ä¹ˆï¼›</p><p>æ ¹æ®I/Oæ“ä½œå’ŒCPUæ“ä½œåŒºåˆ†ç¨‹åºï¼›å¦‚æœCPUè®¡ç®—æ¯”ä¾‹å å¤§éƒ¨åˆ†ä¹Ÿå°±æ˜¯cpuå¯†é›†å‹ç¨‹åºï¼Œè¿™ä¸ªæ—¶å€™çº¿ç¨‹ç­‰å¾…æ—¶é—´æ¥è¿‘äº0ï¼Œä¹Ÿå°±æ˜¯è€—è´¹å¤§é‡æ—¶é—´çš„å°±æ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä¸ºäº†å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä¸€èˆ¬å¼€CPUæ ¸æ•°ä¸ªçº¿ç¨‹å†åŠ ä¸€æ¡ä¿è¯çº¿ç¨‹æ„å¤–æš‚åœï¼›å¦‚æœæ˜¯IOæ“ä½œå æ¯”å¤§éƒ¨åˆ†ï¼Œç­‰å¾…æ—¶é—´é•¿ï¼Œç†è®ºä¸Šæ˜¯å¯ä»¥å¼€æ— é™å¤šä¸ªçº¿ç¨‹ä½†æ˜¯è€ƒè™‘åˆ°èŠ‚çº¦èµ„æºåˆè¦ä¿è¯æ€§èƒ½åŠç¨³å®šæ€§ï¼Œä¸€èˆ¬ç”¨ä¸¤å€çš„CPUæ ¸æ•°ï¼Œå†åŠ ä¸€æ¡ä¸ºbackupï¼Œå¦‚æœéœ€è¦ç²¾å¯†è®¡ç®—çš„ä»»åŠ¡å°±å¯ä»¥ä½¿ç”¨å…¬å¼CPUæ ¸æ•°/ï¼ˆ1-é˜»å¡ç³»æ•°ï¼‰(é˜»å¡ç³»æ•°0.8~0.9ï¼‰</p><h3 id="å•ä¸ªcpuè®¾å®šå¤šçº¿ç¨‹æœ‰æ²¡æœ‰æ„ä¹‰ï¼Ÿç»“åˆä¸Šé¢">å•ä¸ªcpuè®¾å®šå¤šçº¿ç¨‹æœ‰æ²¡æœ‰æ„ä¹‰ï¼Ÿç»“åˆä¸Šé¢</h3><p>æ ¹æ®å®é™…éœ€è¦æ¥å¤„ç†</p><p>å¦‚æœä½ çš„æ¯ä¸ªçº¿ç¨‹çš„å·¥ä½œä¸æ—¶åºæ— å…³çš„ï¼Œå¹¶ä¸”å«æœ‰å¤–éƒ¨çš„è¯»å†™æ“ä½œ</p><p>é‚£ä¹ˆæ˜¯å¾ˆæœ‰æ„ä¹‰çš„ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œè¯»å†™çš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥å ç”¨CPUè¿›è¡Œè¿è¡Œã€‚</p><p>ä¹Ÿå³çº¿ç¨‹å±äºI/Oå¯†é›†å‹çš„æ—¶å€™ï¼Œåœ¨CPUæ‰ä¼šä½“ç°çš„å¤šçº¿ç¨‹çš„å¥½å¤„</p><p>å¦‚æœæ˜¯CPUå¯†é›†å‹çš„ï¼Œä½ å¼€äº†å¾ˆå¤šä¸ªçº¿ç¨‹ï¼Œåªæ˜¯å¢åŠ äº†CPUåœ¨å„ä¸ªçº¿ç¨‹ä¸­è¿›è¡Œåˆ‡æ¢çš„è´Ÿæ‹…<br>æ²¡æœ‰å¸¦æ¥å¥½å¤„ï¼Œå’Œæ€§èƒ½çš„æé«˜</p><h2 id="6-å¦‚ä½•ç»“æŸä¸€ä¸ªçº¿ç¨‹ï¼Ÿ">6.å¦‚ä½•ç»“æŸä¸€ä¸ªçº¿ç¨‹ï¼Ÿ</h2><ol><li><p>å°±æ˜¯runæ–¹æ³•ç»“æŸå°±æ­£å¸¸é€€å‡ºçº¿ç¨‹äº†ï¼Œè‡ªç„¶é€€å‡º</p></li><li><p>ä½¿ç”¨stop ï¼Œä½†æ˜¯ä¸å»ºè®®ä½¿ç”¨ï¼Œå› ä¸ºstopç»“æŸçº¿ç¨‹ä¸ä¼šåœ¨æ„ä½ è¿›è¡Œåˆ°å“ªçªç„¶ç»“æŸï¼Œä¼šå®¹æ˜“äº§ç”Ÿæ•°æ®ä¸ä¸€è‡´ã€‚</p></li><li><p>volatileæ ‡å¿— ä¹Ÿå¯ä»¥ å¦‚æœæ˜¯ä¸ä¾èµ–ä¸­é—´çŠ¶æ€ åœæ­¢å°±å¾ˆæ–¹ä¾¿ï¼Œæ˜¯ç‰¹å®šåœºæ™¯ä¸‹æ¯”è¾ƒä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚</p><ul><li><p>ä¸é€‚åˆæ²¡æœ‰åŒæ­¥çš„æ—¶å€™ï¼Œçº¿ç¨‹é˜»å¡ï¼Œæ²¡åŠæ³•å¾ªç¯å›å»</p></li><li><p>æ‰“æ–­æ—¶é—´ä¸ç²¾ç¡®ï¼Œï¼ˆæ¯”å¦‚åœ¨ä¸€ä¸ªé˜»å¡å®¹å™¨å®¹é‡ä¸º5çš„æ—¶å€™ç»“æŸç”Ÿäº§è€…ï¼Œç”±äºå…¶å¯¹åŒæ­¥çº¿ç¨‹æ ‡å¿—ä½çš„æ—¶é—´æ§åˆ¶ä¸æ˜¯å¾ˆç²¾ç¡®ï¼Œæœ‰æ—¶å€™ç”Ÿäº§è€…è¿˜ä¼šç”Ÿäº§ä¸€éƒ¨åˆ†æ—¶é—´ã€‚</p></li></ul></li><li><p>interrupt/isinterruptæ¯”è¾ƒä¼˜é›…</p></li></ol><p>å½“ç„¶è¦ç²¾ç¡®åœæ­¢ï¼Œæ§åˆ¶çº¿ç¨‹æœ‰æ—¶å€™æ›´åŠ éœ€è¦å’Œå¤–é¢çš„çº¿ç¨‹è¿›è¡Œåˆä½œå—è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°é”äº†ã€‚</p><h3 id="interruptå’ŒisInterrupt">interruptå’ŒisInterrupt()</h3><ol><li><p>interrupt() ï¼šå®ä¾‹â½…æ³•ï¼Œè®¾ç½®çº¿ç¨‹ä¸­æ–­æ ‡å¿—ï¼ˆæ‰“æ‰°â¼€ä¸‹ï¼Œä½ è¯¥å¤„ç†â¼€ä¸‹ä¸­æ–­ï¼‰æ¯”å¦‚sleep()åœ¨ç¡çœ çš„æ—¶å€™æ²¡åŠæ³•ä¸­æ–­ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦</p></li><li><p>isInterrupted()ï¼šå®ä¾‹â½…æ³•ï¼Œæœ‰æ²¡æœ‰â¼ˆæ‰“æ‰°æˆ‘ï¼Ÿ</p></li><li><p>interrupted()ï¼šé™æ€â½…æ³•ï¼Œæœ‰æ²¡æœ‰â¼ˆæ‰“æ‰°æˆ‘ï¼ˆå½“å‰çº¿ç¨‹ï¼‰ï¼Ÿå¤ä½</p></li></ol><p>interrupt()æ˜¯é™æ€æ–¹æ³•ï¼Œä¸€ä¸ªçº¿ç¨‹è¢«ä¸­æ–­ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶è¿”å›trueç„¶åæ¸…é™¤ä¸­æ–­ä¿¡å·ï¼Œåé¢å†æ¬¡è°ƒç”¨å°±æ˜¯falseäº† ;isIå°±æ˜¯æŸ¥çœ‹å½“å‰ä¿¡æ¯</p><h2 id="7-çº¿ç¨‹ç±»çš„æ„é€ æ–¹æ³•ã€é™æ€å—æ˜¯è¢«å“ªä¸ªçº¿ç¨‹è°ƒç”¨çš„ï¼Ÿ">7. çº¿ç¨‹ç±»çš„æ„é€ æ–¹æ³•ã€é™æ€å—æ˜¯è¢«å“ªä¸ªçº¿ç¨‹è°ƒç”¨çš„ï¼Ÿ</h2><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸åˆé’»å’Œç‹¡çŒ¾çš„é—®é¢˜ã€‚è¯·è®°ä½ï¼šçº¿ç¨‹ç±»çš„æ„é€ æ–¹æ³•ã€é™æ€å—æ˜¯è¢«</p><p>newè¿™ä¸ªçº¿ç¨‹ç±»æ‰€åœ¨çš„çº¿ç¨‹æ‰€è°ƒç”¨çš„ï¼Œè€Œ run æ–¹æ³•é‡Œé¢çš„ä»£ç æ‰æ˜¯è¢«çº¿ç¨‹è‡ªèº«æ‰€è°ƒç”¨çš„ã€‚</p><p>å¦‚æœè¯´ä¸Šé¢çš„è¯´æ³•è®©ä½ æ„Ÿåˆ°å›°æƒ‘ï¼Œé‚£ä¹ˆæˆ‘ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ Thread2 ä¸­ new äº†</p><p>Thread1ï¼Œmain å‡½æ•°ä¸­ new äº† Thread2ï¼Œé‚£ä¹ˆï¼š</p><p>ï¼ˆ1ï¼‰  Thread2 çš„æ„é€ æ–¹æ³•ã€é™æ€å—æ˜¯ main çº¿ç¨‹è°ƒç”¨çš„ï¼ŒThread2 çš„ run()æ–¹æ³•æ˜¯Thread2 è‡ªå·±è°ƒç”¨çš„</p><p>ï¼ˆ2ï¼‰  Thread1 çš„æ„é€ æ–¹æ³•ã€é™æ€å—æ˜¯ Thread2 è°ƒç”¨çš„ï¼ŒThread1 çš„ run()æ–¹æ³•æ˜¯Thread1 è‡ªå·±è°ƒç”¨çš„</p><h2 id="8-çº¿ç¨‹å®‰å…¨æ´»è·ƒæ€ï¼Ÿ">8. çº¿ç¨‹å®‰å…¨æ´»è·ƒæ€ï¼Ÿ</h2><p><strong>æ­»é”</strong>ï¼šæ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹ï¼ˆæˆ–çº¿ç¨‹ï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚</p><p><strong>æ´»é”</strong>ï¼šä»»åŠ¡æˆ–è€…æ‰§è¡Œè€…æ²¡æœ‰è¢«é˜»å¡ï¼Œç”±äºæŸäº›æ¡ä»¶æ²¡æœ‰æ»¡è¶³ï¼Œå¯¼è‡´ä¸€ç›´é‡å¤å°è¯•ï¼Œå¤±è´¥ï¼Œå°è¯•ï¼Œå¤±è´¥ã€‚ä¾‹å¦‚ï¼šå¾ªç¯é€’å½’æ²¡æœ‰å†™è¾“å‡ºæ¡ä»¶æŠ›stackoverflow</p><p>â€‹æ´»é”å’Œæ­»é”çš„åŒºåˆ«åœ¨äºï¼Œå¤„äºæ´»é”çš„å®ä½“æ˜¯åœ¨ä¸æ–­çš„æ”¹å˜çŠ¶æ€ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œæ´»â€ï¼Œ è€Œå¤„äºæ­»é”çš„å®ä½“è¡¨ç°ä¸ºç­‰å¾…ï¼›æ´»é”æœ‰å¯èƒ½è‡ªè¡Œè§£å¼€ï¼Œæ­»é”åˆ™ä¸èƒ½ã€‚</p><p><strong>é¥¥é¥¿</strong>ï¼šä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹å› ä¸ºç§ç§åŸå› æ— æ³•è·å¾—æ‰€éœ€è¦çš„èµ„æºï¼Œå¯¼è‡´ä¸€ç›´æ— æ³•æ‰§è¡Œçš„çŠ¶æ€ã€‚ä¾‹å­ï¼šè¯»å†™é”ï¼Œä¸€ç›´è¯»å¯¼è‡´å†™æ“ä½œä¸€ç›´ç­‰å¾…</p><p>â€‹Java ä¸­å¯¼è‡´é¥¥é¥¿çš„åŸå› ï¼š</p><ol><li>å…¶ä»–çº¿ç¨‹åœ¨ä¸´ç•ŒåŒºåšäº†æ— é™å¾ªç¯æˆ–æ— é™åˆ¶ç­‰å¾…èµ„æºçš„æ“ä½œï¼Œè®©å…¶ä»–çš„çº¿ç¨‹ä¸€ç›´ä¸èƒ½æ‹¿åˆ°é”è¿›å…¥ä¸´ç•ŒåŒºï¼Œå¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´å°±è¿›å…¥äº†é¥¥é¥¿çŠ¶æ€ã€‚</li><li>å› ä¸ºçº¿ç¨‹ä¼˜å…ˆçº§åˆ†é…çš„ä¸åˆç†ï¼Œå¯¼è‡´éƒ¨åˆ†çº¿ç¨‹å§‹ç»ˆæ— æ³•è·å¾—CPUèµ„æºã€‚</li></ol><h2 id="9-1ï½26å’Œa-bé¡ºåºäº¤æ›¿æ‰“å°">9. 1ï½26å’Œa~bé¡ºåºäº¤æ›¿æ‰“å°</h2><p>è¿™é“é¢è¯•é¢˜å‘¢å®é™…ä¸Šæ˜¯åä¸ºçš„ä¸€é“é¢è¯•é¢˜ï¼Œå…¶å®å®ƒé‡Œé¢æ˜¯ä¸€é“å¡«ç©ºé¢˜ï¼Œåæ¥å°±å¾ˆå¤šçš„å¼€å§‹è€ƒè¿™é“é¢˜ï¼Œè¿™ä¸ªé¢è¯•é¢˜æ˜¯ä¸¤ä¸ªçº¿ç¨‹ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹æ˜¯ä»1åˆ°26ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹æ˜¯ä»Aåˆ°ä¸€ç›´åˆ°Zï¼Œç„¶åè¦è®©è¿™ä¸¤ä¸ªçº¿ç¨‹åšåˆ°åŒæ—¶è¿è¡Œï¼Œäº¤æ›¿è¾“å‡ºï¼Œé¡ºåºæ‰“å°ã€‚é‚£ä¹ˆè¿™é“é¢˜ç›®çš„è§£æ³•æœ‰éå¸¸å¤šã€‚</p><h3 id="1-LockSupport">1.LockSupport</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">T02_00_LockSupport</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">static</span> <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> t2 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> aI <span class="token operator">=</span> <span class="token string">"1234567"</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> aC <span class="token operator">=</span> <span class="token string">"ABCDEFG"</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">char</span> c <span class="token operator">:</span> aI<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">unpark</span><span class="token punctuation">(</span>t2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å«é†’T2</span>                    <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//T1é˜»å¡</span>                <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"t1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">char</span> c <span class="token operator">:</span> aC<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//t2é˜»å¡</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">unpark</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å«é†’t1</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>â€‹</p><h3 id="2-wait-å’Œ-notify">2. wait() å’Œ notify()</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> waitNotify<span class="token punctuation">&#123;</span>  <span class="token keyword">final</span> <span class="token class-name">Object</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> c1 <span class="token operator">=</span> <span class="token string">"ABCDEFG"</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> c2 <span class="token operator">=</span> <span class="token string">"123456"</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token punctuation">&#123;</span>    <span class="token class-name">Sychronized</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token operator">:</span>c1<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span><span class="token punctuation">&#123;</span>          o<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        o<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>          e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>      o<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">"t1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">;</span>    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token punctuation">&#123;</span>    <span class="token class-name">Sychronized</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token operator">:</span>c2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c <span class="token punctuation">)</span><span class="token punctuation">;</span>        o<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        o<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      o<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸€å®šè¦æ³¨æ„æœ€åéƒ½è¦notifyï¼ˆï¼‰</p><h2 id="10-å¤šçº¿ç¨‹ä¹‹é—´æ˜¯æ€ä¹ˆé€šä¿¡çš„ï¼Ÿ">10. å¤šçº¿ç¨‹ä¹‹é—´æ˜¯æ€ä¹ˆé€šä¿¡çš„ï¼Ÿ</h2><ol><li><p>é€šè¿‡å…±äº«å˜é‡ï¼Œå˜é‡éœ€è¦volatileä¿®é¥°ï¼›</p></li><li><p>ä½¿ç”¨waitå’Œnotifyæ–¹æ³•ï¼Œä½†æ˜¯ç”±äºéœ€è¦ä½¿ç”¨åŒä¸€æŠŠé”ï¼Œæ‰€ä»¥å¿…é¡»é€šçŸ¥çº¿ç¨‹é‡Šæ”¾é”ï¼Œè¢«é€šçŸ¥çš„çº¿ç¨‹æ‰èƒ½è·å¾—åˆ°å¤šï¼Œè¿™æ ·å¯¼è‡´é€šçŸ¥ä¸åŠæ—¶ï¼›</p></li><li><p>ä½¿ç”¨countDownLatchå®ç°ï¼Œé€šçŸ¥çº¿ç¨‹åˆ°æŒ‡å®šæ¡ä»¶ï¼Œè°ƒç”¨countDownLatc.countDown()è¢«é€šçŸ¥çš„çº¿ç¨‹è¿›è¡Œawait()æ–¹æ³•</p></li><li><p>ä½¿ç”¨Conditionçš„await()å’ŒsignalAll()æ–¹æ³•ã€‚</p></li></ol><h2 id="11-ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹">11. ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹?</h2><h3 id="Condition-é˜»å¡é˜Ÿåˆ—">Condition é˜»å¡é˜Ÿåˆ—</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProviderConsumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span> <span class="token keyword">int</span> length<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> queue<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">Condition</span> provideCondition <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">Condition</span> consumeCondition <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">ProviderConsumer</span><span class="token punctuation">(</span><span class="token keyword">int</span> length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">provide</span><span class="token punctuation">(</span><span class="token class-name">T</span> product<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>provideCondition<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span>consumeCondition<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">consume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>consumeCondition<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">T</span> product <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>provideCondition<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> product<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="wait-å’Œ-notify">wait() å’Œ notify()</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProducerConsumerModel</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">EventStorage</span> eventStorage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Producer</span> producer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Producer</span><span class="token punctuation">(</span>eventStorage<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Consumer</span> consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span>eventStorage<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>producer<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>consumer<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Producer</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">EventStorage</span> storage<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Producer</span><span class="token punctuation">(</span><span class="token class-name">EventStorage</span> storage<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>storage <span class="token operator">=</span> storage<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                storage<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Consumer</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">EventStorage</span> storage<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span><span class="token class-name">EventStorage</span> storage<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>storage <span class="token operator">=</span> storage<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                storage<span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">EventStorage</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> storage<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">EventStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            size <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>            storage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>storage<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            storage<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"æ•°æ®"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”Ÿäº§ -> æ•°æ®"</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">" å½“å‰ä»“åº“ä¸­å·²ç»æœ‰äº† "</span> <span class="token operator">+</span> storage<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" æ¡æ•°æ®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">take</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>storage<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ¶ˆè´¹ -> "</span> <span class="token operator">+</span> storage<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" å½“å‰ä»“åº“ä¸­å‰©ä¸‹ "</span> <span class="token operator">+</span> storage<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" æ¡æ•°æ®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å¤šçº¿ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>m1 2020é…ç½®javaåç«¯ç¯å¢ƒ</title>
      <link href="/2021/09/12/m1-2020%E9%85%8D%E7%BD%AEjava%E5%90%8E%E7%AB%AF%E7%8E%AF%E5%A2%83/"/>
      <url>/2021/09/12/m1-2020%E9%85%8D%E7%BD%AEjava%E5%90%8E%E7%AB%AF%E7%8E%AF%E5%A2%83/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=3c181f5e-6b30-9293-aa27-4b68499cb39b</cover>
      <date>Sun Sep 12 2021 18:48:02 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>m1 2020é…ç½®javaåç«¯ç¯å¢ƒ</h1><h2 id="1-å®‰è£…JDK">1 å®‰è£…JDK</h2><p>OracleJDKæš‚æ—¶å¹¶ä¸æ”¯æŒarmæ¶æ„çš„èŠ¯ç‰‡ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨openjdkï¼šzuluç‰ˆæœ¬ <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fwww.azul.com%2Fdownloads%2F%3Fpackage%3Djdk%23download-openjdk">åœ°å€</a></p><p>å®‰è£…å®Œæˆ ç»ˆç«¯è¾“å…¥<code>java --version</code></p><img src="m1-2020é…ç½®javaåç«¯ç¯å¢ƒ/image-20220105102457083.png" alt="image-20220105102457083" style="zoom:50%;" /><h4 id="é…ç½®é—®é¢˜ï¼ï¼ï¼">é…ç½®é—®é¢˜ï¼ï¼ï¼</h4><p>ğŸ˜­m1 é»˜è®¤æ˜¯zsh ä¸æ˜¯bash ä¸€å¼€å§‹ä¸çŸ¥é“çš„æˆ‘ æŠŠæ‰€æœ‰é…ç½®å…¨éƒ¨è¾“å…¥åˆ° bash_profile ç„¶åçœ‹mavenç‰ˆæœ¬å´æ˜¾ç¤º</p><img src="m1-2020é…ç½®javaåç«¯ç¯å¢ƒ/008i3skNgy1gy2mx6qgabj30qy02q74q.jpg" alt="image-20220105112802157" style="zoom:50%;" /><p>æƒ³è¦æ›´æ¢bash å’Œ zshæ¨¡å¼å¯ä»¥å‚è€ƒè¿™ä¸ªï¼š <a href="https://www.jianshu.com/p/3d93f23454d8">macä¸­bashå’Œzshç»ˆç«¯åˆ‡æ¢æ–¹æ³•å’Œzshé…ç½®</a></p><pre class="language-vim" data-language="vim"><div class="caption"><span>./zshrc ```æ·»åŠ é…ç½®ï¼ˆå¯ä»¥**ä¿®æ”¹ç‰ˆæœ¬**ï¼‰</span></div><code class="language-vim"></code></pre><p>export JAVA_HOME=/Library/Java/JavaVirtualMachines/zulu-11.jdk/Contents/Home<br>#export JAVA_HOME=/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home</p><pre class="language-none"><code class="language-none">## 2 å®‰è£…homebrewhomebrew æ˜¯macosçš„åŒ…ç®¡ç†å·¥å…·åœ¨ç»ˆç«¯è¾“å…¥ &#96;&#96;&#96;&#x2F;bin&#x2F;zsh -c &quot;$(curl -fsSL https:&#x2F;&#x2F;gitee.com&#x2F;cunkai&#x2F;HomebrewCN&#x2F;raw&#x2F;master&#x2F;Homebrew.sh)&quot;&#96;&#96;&#96;é€‰æ‹©é•œåƒ &lt;img src&#x3D;&quot;m1-2020é…ç½®javaåç«¯ç¯å¢ƒ&#x2F;008i3skNgy1gy2l6681ocj30vu0eytbd.jpg&quot; alt&#x3D;&quot;image-20220105102727012&quot; style&#x3D;&quot;zoom:50%;&quot; &#x2F;&gt;å®‰è£…å®Œæ¯•æŸ¥çœ‹ &#96;&#96;&#96;brew -v&#96;&#96;&#96;&lt;img src&#x3D;&quot;m1-2020é…ç½®javaåç«¯ç¯å¢ƒ&#x2F;008i3skNgy1gy2l75gne0j30vm03aaam.jpg&quot; alt&#x3D;&quot;image-20220105102825749&quot; style&#x3D;&quot;zoom:50%;&quot; &#x2F;&gt;## 3 å®‰è£…mavenåœ¨ç¬¬ä¸€æ­¥é‡Œé¢å®‰è£…çš„homebrewæ˜¯åœ¨macéšè—æ–‡ä»¶å¤¹ **&#x2F;opt**ä¸‹çš„  mavenä¹ŸåŒæ ·æœ€å¥½å®‰è£…åœ¨**&#x2F;opt**ä¸‹å¦‚æœæ‰¾ä¸åˆ°opt å¯ä»¥å°†æ–‡ä»¶å¤¹æ˜¾ç¤º åœ¨è®¿è¾¾  **command+shift+.**  éšè—çš„æ–‡ä»¶å¤¹å°±ä¼šæ˜¾ç¤º&lt;img src&#x3D;&quot;m1-2020é…ç½®javaåç«¯ç¯å¢ƒ&#x2F;008i3skNgy1gy2n8jgqxhj30c60dk3yt.jpg&quot; alt&#x3D;&quot;image-20220105104745708&quot; style&#x3D;&quot;zoom:50%;&quot; &#x2F;&gt;æˆ‘ä»¬å°†[å®˜ç½‘çš„maven](https:&#x2F;&#x2F;maven.apache.org&#x2F;download.cgi)ï¼ˆè§ä¸‹å›¾ï¼‰æ‹–åˆ° **&#x2F;opt**ä¸‹&lt;img src&#x3D;&quot;m1-2020é…ç½®javaåç«¯ç¯å¢ƒ&#x2F;008i3skNgy1gy2lp0zdtvj314u088abg.jpg&quot; alt&#x3D;&quot;image-20220105104526757&quot; style&#x3D;&quot;zoom:50%;&quot; &#x2F;&gt;&lt;img src&#x3D;&quot;m1-2020é…ç½®javaåç«¯ç¯å¢ƒ&#x2F;008i3skNgy1gy2n9im9rzj30ra0go0tj.jpg&quot; alt&#x3D;&quot;image-20220105104910817&quot; style&#x3D;&quot;zoom: 25%;&quot; &#x2F;&gt;#### é…ç½®maven&#96;&#96;&#96;vim ~.&#x2F;zshrc&#96;&#96;&#96;</code></pre><p>export MAVEN_HOME=/opt/apache-maven-3.8.4<br>export PATH=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>A</mi><mi>T</mi><mi>H</mi><mo>:</mo></mrow><annotation encoding="application/x-tex">PATH:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span></span></span></span>MAVEN_HOME/bin</p><pre class="language-none"><code class="language-none">æŸ¥çœ‹ &#96;&#96;&#96;mvn -v&#96;&#96;&#96;&lt;img src&#x3D;&quot;m1-2020é…ç½®javaåç«¯ç¯å¢ƒ&#x2F;image-20220614185135880.png&quot; alt&#x3D;&quot;image-20220614185135880&quot; style&#x3D;&quot;zoom:50%;&quot; &#x2F;&gt;è¿™æ ·å°±é…ç½®æˆåŠŸå•¦ï¼## 4 ä¸‹è½½npmbrew install npm## 5 ä¸‹è½½iterm21. ä¸‹è½½iTerm2   æˆ‘æ˜¯åœ¨å®˜ç½‘ä¸‹è½½å®‰è£…çš„ https:&#x2F;&#x2F;www.iterm2.com&#x2F;index.htmlä¹Ÿå¯ä»¥ä½¿ç”¨Homebrewå®‰è£…$ brew cask install iterm2ä½¿ç”¨brew caskè¦å…ˆå®‰è£…caskï¼Œä¸‹é¢ç²—ç•¥ç»™å‡ºcaskçš„ä»‹ç»ã€‚homebrew-caskä¸brewçš„åŒºåˆ«:brewæ˜¯ä¸‹è½½æºç è§£å‹ç„¶å.&#x2F;configure &amp;&amp; make install, å¹¶ä¸”ä¼šè‡ªåŠ¨é…ç½®å¥½ç¯å¢ƒå˜é‡ã€‚brew caskä¸»è¦ç”¨äºæœ‰GUIçš„è½¯ä»¶ï¼Œä¸‹è½½å·²ç»ç¼–è¯‘å¥½çš„åº”ç”¨åŒ…(.dmg&#x2F;.pkg)ã€‚å®‰è£…brew cask:$ brew install caskroom&#x2F;cask&#x2F;brew-cask## 6 é…ç½®node.js + typora + picgoä¸‹è½½node.js &lt;img src&#x3D;&quot;m1-2020é…ç½®javaåç«¯ç¯å¢ƒ&#x2F;image-20220614185208815.png&quot; alt&#x3D;&quot;image-20220614185208815&quot; style&#x3D;&quot;zoom:50%;&quot; &#x2F;&gt;å®‰è£…å®Œæˆè¿›è¡Œä»¥ä¸‹æ­¥éª¤&#96;&#96;&#96;shell# æŸ¥çœ‹node å®‰è£…è·¯å¾„tinachan@tinadeair ~ % which node&#x2F;usr&#x2F;local&#x2F;bin&#x2F;node# npmå®‰è£…picgotinachan@tinadeair ~ % sudo npm install picgo -g# æŸ¥çœ‹picgoå®‰è£…è·¯å¾„tinachan@tinadeair ~ % which picgo&#x2F;opt&#x2F;homebrew&#x2F;bin&#x2F;picgo# è®¾ç½®giteeæ’ä»¶tinachan@tinadeair ~ % picgo install gitee-uploader# è®¾ç½®æ’ä»¶ ï¼šåªéœ€è¦å¡«repo å’Œ tokentinachan@tinadeair ~ % picgo set uploader? Choose a(n) uploader gitee? repo: # å¡«ä»“åº“åï¼ˆæ ¼å¼ï¼šç”¨æˆ·å&#x2F;ä»“åº“åï¼‰? branch: master? token: # å¡«ç§äººä»¤ç‰Œ? path: ? customPath: default? customUrl: [PicGo SUCCESS]: Configure config successfully!# è®¾ç½®use uploadertinachan@tinadeair ~ % picgo use uploader? Use an uploader gitee[PicGo SUCCESS]: Configure config successfully!</code></pre><p>åˆ°typoraè®¾ç½®</p><img src="m1-2020é…ç½®javaåç«¯ç¯å¢ƒ/image-20220614185957433.png" alt="image-20220614185957433" style="zoom:50%;" />]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒé…ç½® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> macOS </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git</title>
      <link href="/2021/08/13/git/"/>
      <url>/2021/08/13/git/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=992e7ada-181d-5583-6fa9-cad46bde92ba</cover>
      <date>Fri Aug 13 2021 23:39:23 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>æ¦‚å¿µ</h1><p>Gitæ˜¯ä¸€ä¸ªå…è´¹çš„ã€å¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯ä»¥å¿«é€Ÿé«˜æ•ˆåœ°å¤„ç†ä»å°å‹åˆ°å¤§å‹çš„é¡¹ç›®ã€‚</p><p>ç‰ˆæœ¬æ§åˆ¶ï¼šç‰ˆæœ¬æ§åˆ¶æ˜¯ä¸€ç§è®°å½•ä¸€ä¸ªæˆ–è‹¥å¹²æ–‡ä»¶å†…å®¹å˜åŒ–ï¼Œä»¥ä¾¿å°†æ¥æŸ¥é˜…ç‰¹å®šç‰ˆæœ¬ä¿®è®¢æƒ…å†µçš„ç³»ç»Ÿ ã€‚</p><h2 id="ä»£ç æ‰˜ç®¡ä¸­å¿ƒ">ä»£ç æ‰˜ç®¡ä¸­å¿ƒ</h2><p>æˆ‘ä»¬å·²ç»æœ‰äº†æœ¬åœ°åº“ï¼Œæœ¬åœ°åº“å¯ä»¥å¸®æˆ‘ä»¬è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ä»£ç æ‰˜ç®¡ä¸­å¿ƒå‘¢ï¼Ÿ<br>å®ƒçš„ä»»åŠ¡æ˜¯å¸®æˆ‘ä»¬ç»´æŠ¤è¿œç¨‹åº“ï¼Œä¸‹é¢è¯´ä¸€ä¸‹æœ¬åœ°åº“å’Œè¿œç¨‹åº“çš„äº¤äº’æ–¹å¼ï¼Œä¹Ÿåˆ†ä¸ºä¸¤ç§ï¼š</p><ol><li><p>å›¢é˜Ÿå†…éƒ¨åä½œ</p><img src="git/20210716160327.png" alt="image-20210716160327295" style="zoom: 50%;" /></li><li><p>è·¨å›¢é˜Ÿåä½œ</p><img src="git/20210716160355.png" alt="image-20210716160355825" style="zoom:50%;" /><p><a href="https://github.com/SoniaChan33/SoniaChan33.github.io">https://github.com/SoniaChan33/SoniaChan33.github.io</a></p></li></ol><h2 id="åˆå§‹åŒ–æœ¬åœ°ä»“åº“">åˆå§‹åŒ–æœ¬åœ°ä»“åº“</h2><ul><li><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹</p><img src="git/20210716160820.png" alt="image-20210716160820389" style="zoom: 50%;" /></li><li><p>æ‰“å¼€Gitç»ˆç«¯ï¼šGit Bash Here</p></li><li><p>æŸ¥çœ‹Gitå®‰è£…ç‰ˆæœ¬</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token parameter variable">--version</span></code></pre></li><li><p>æ¸…å±</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">clear</span></code></pre></li><li><p>è®¾ç½®ç­¾å</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">"TeaSea33"</span><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">"TeaSea33@outlook.com"</span></code></pre></li><li><p>æœ¬åœ°ä»“åº“çš„åˆå§‹åŒ–æ“ä½œ(ç›®å½•åœ¨æœ¬åœ°ä»“åº“é‡Œ)</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> init</code></pre><img src="git/20210716162158.png" alt="image-20210716162158453"  /></li><li><p>æŸ¥çœ‹.gitä¸‹çš„å†…å®¹</p><img src="git/20210716162242.png" alt="image-20210716162242909" style="zoom: 50%;" /><p>æ³¨æ„äº‹é¡¹ï¼š .gitç›®å½•ä¸‹çš„æœ¬åœ°åº“ç›¸å…³çš„å­ç›®å½•å’Œå­æ–‡ä»¶ä¸è¦åˆ é™¤ï¼Œä¸è¦èƒ¡ä¹±ä¿®æ”¹ã€‚</p></li></ul><h1>Gitå¸¸ç”¨å‘½ä»¤</h1><h2 id="addå’Œcommit">addå’Œcommit</h2><ul><li><p>å…ˆåˆ›å»ºæ–‡ä»¶</p></li><li><p>å°†æ–‡ä»¶æäº¤åˆ°æš‚å­˜åŒº</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> Demo2.txt</code></pre></li><li><p>å°†æš‚å­˜åŒºçš„å†…å®¹æäº¤åˆ°æœ¬åœ°åº“</p><img src="git/20210716162745.png" alt="image-20210716162745742" style="zoom:67%;" /></li><li><p>æ³¨æ„ï¼š</p><ol><li>ä¸æ”¾åœ¨æœ¬åœ°ä»“åº“ä¸­çš„æ–‡ä»¶ï¼Œgitæ˜¯ä¸è¿›è¡Œç®¡ç†</li><li>å³ä½¿æ”¾åœ¨æœ¬åœ°ä»“åº“çš„æ–‡ä»¶ï¼Œgitä¹Ÿä¸ç®¡ç†ï¼Œå¿…é¡»é€šè¿‡add,commitå‘½ä»¤æ“ä½œæ‰å¯ä»¥å°†å†…å®¹æäº¤åˆ°æœ¬åœ°åº“ã€‚</li></ol></li></ul><h2 id="Status">Status</h2><p>æŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„çŠ¶æ€</p><ul><li><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åæŸ¥çœ‹çŠ¶æ€</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> status</code></pre><img src="git/20210716163201.png" alt="image-20210716163201433" style="zoom:67%;" /></li><li><p>ç„¶åå°†Demo2.txté€šè¿‡git addå‘½ä»¤æäº¤åˆ°æš‚å­˜åŒº</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token string">"Demo3.txt"</span></code></pre></li><li><p>statusæŸ¥çœ‹çŠ¶æ€</p><img src="git/20210716163336.png" alt="image-20210716163335957" style="zoom:67%;" /></li><li><p>commitæäº¤æ–‡ä»¶</p><img src="git/20210716163613.png" alt="image-20210716163613057" style="zoom:67%;" /></li><li><p>ä¿®æ”¹æ–‡ä»¶ å¹¶æŸ¥çœ‹çŠ¶æ€</p><img src="git/20210716163744.png" alt="image-20210716163744634" style="zoom:67%;" /></li><li><p>é‡æ–°æ·»åŠ è‡³æš‚å­˜åŒº å¹¶æŸ¥çœ‹çŠ¶æ€</p><img src="git/20210716163903.png" alt="image-20210716163903519" style="zoom:67%;" /></li><li><p>æäº¤ä»¥åæŸ¥çœ‹çŠ¶æ€</p><img src="git/20210716164259.png" alt="image-20210716164259073" style="zoom:67%;" /><img src="git/20210716164315.png" alt="image-20210716164315251" style="zoom:67%;" /></li></ul><h2 id="log">log</h2><p>å¯ä»¥æŸ¥çœ‹æäº¤çš„æ—¥å¿—ï¼Œæ˜¾ç¤ºæœ€è¿‘åˆ°æœ€è¿œçš„æ—¥å¿—</p><h3 id="æ—¥å¿—å±•ç¤ºæ–¹å¼">æ—¥å¿—å±•ç¤ºæ–¹å¼</h3><ol><li><pre><code class="language-shell">git log <pre class="language-none"><code class="language-none">   &lt;img src&#x3D;&quot;git&#x2F;20210716165040.png&quot; alt&#x3D;&quot;image-20210716164533294&quot; style&#x3D;&quot;zoom:67%;&quot; &#x2F;&gt;   ---&gt; åˆ†é¡µ   å½“å†å²è®°å½•è¿‡å¤šçš„æ—¶å€™ä½¿ç”¨**ç©ºæ ¼**ç¿»é¡µï¼Œ**b**  å›åˆ°ä¸Šä¸€é¡µï¼Œåˆ°å°¾é¡µæ˜¾ç¤ºEND,   é€€å‡ºï¼š**q**2. &#96;&#96;&#96;shell   git log --pretty&#x3D;oneline</code></pre>&lt;img src=&quot;git/20210716165022.png&quot; alt=&quot;image-20210716165022038&quot; style=&quot;zoom:67%;&quot; /&gt;</code></pre></li><li><pre><code class="language-shell">git log --oneline<pre class="language-none"><code class="language-none">   &lt;img src&#x3D;&quot;git&#x2F;20210716165148.png&quot; alt&#x3D;&quot;image-20210716165147993&quot; style&#x3D;&quot;zoom:67%;&quot; &#x2F;&gt;4. &#96;&#96;&#96;shell   git reflog</code></pre>å¤šäº†ä¿¡æ¯ï¼šHEAD@&#123;æ•°å­—&#125;æ•°å­—ï¼šæŒ‡é’ˆå›åˆ°å½“å‰è¿™ä¸ªå†å²ç‰ˆæœ¬éœ€è¦å¤šå°‘æ­¥&lt;img src=&quot;git/20210716165501.png&quot; alt=&quot;image-20210716165500983&quot; style=&quot;zoom:67%;&quot; /&gt;</code></pre></li></ol><h2 id="reset">reset</h2><p>å‰è¿›æˆ–è€…åé€€å†å²ç‰ˆæœ¬</p><ul><li>å…ˆæŸ¥çœ‹å†å²logçŠ¶æ€</li></ul><img src="git/20210716172535.png" alt="image-20210716172535073" style="zoom:67%;" /><ul><li><p>å°†æ–‡ä»¶åé€€åˆ°ç‰ˆæœ¬1</p><img src="git/20210716173722.png" alt="image-20210716173722034" style="zoom:67%;" /></li><li><p>å†æ¬¡æŸ¥çœ‹</p><img src="git/20210716173804.png" alt="image-20210716173804875" style="zoom:67%;" /></li></ul><h3 id="ä¸‰ä¸ªå‚æ•°-hard-mixed-soft">ä¸‰ä¸ªå‚æ•°(hard\mixed\soft)</h3><p><strong>git reset --[å‚æ•°] [ç´¢å¼•]</strong></p><ul><li><p>hard</p><p>æœ¬åœ°åº“çš„æŒ‡é’ˆç§»åŠ¨çš„åŒæ—¶ï¼Œé‡ç½®æš‚å­˜åŒºï¼Œé‡ç½®å·¥ä½œåŒº</p><img src="git/20210716190012.png" alt="image-20210716190011958" style="zoom: 33%;" /></li><li><p>mixed</p><p>æœ¬åœ°åº“çš„æŒ‡é’ˆç§»åŠ¨çš„åŒæ—¶ï¼Œé‡ç½®æš‚å­˜åŒºï¼Œä½†æ˜¯å·¥ä½œåŒºä¸åŠ¨</p><img src="git/20210716190039.png" alt="image-20210716190039546" style="zoom:33%;" /></li><li><p>soft</p><p>æœ¬åœ°åº“çš„æŒ‡é’ˆç§»åŠ¨çš„æ—¶å€™ï¼Œæš‚å­˜åŒºï¼Œå·¥ä½œåŒºéƒ½ä¸åŠ¨</p><img src="git/20210716190052.png" alt="image-20210716190052572" style="zoom:33%;" /></li></ul><p><strong>ç”¨å¾—æœ€å¤šçš„å°±æ˜¯ç¬¬ä¸€ç§hardå‚æ•°</strong></p><h3 id="hard">hard</h3><h4 id="1-æ‰¾å›æœ¬åœ°åº“åˆ é™¤çš„æ–‡ä»¶">1.æ‰¾å›æœ¬åœ°åº“åˆ é™¤çš„æ–‡ä»¶</h4><ul><li><p>æ–°å»ºä¸€ä¸ªTest2.txtæ–‡ä»¶ å¹¶å°†å®ƒaddåˆ°æš‚å­˜åŒºä¸­</p><img src="git/20210716191040.png" alt="image-20210716191040843" style="zoom:67%;" /></li><li><p>å†é€šè¿‡commitæäº¤åˆ°æœ¬åœ°åº“</p><img src="git/20210716191249.png" alt="image-20210716191249904" style="zoom:67%;" /></li><li><p>åˆ é™¤å·¥ä½œåŒºä¸­çš„Test2.txt å¹¶å°†åˆ é™¤æ“ä½œåŒæ­¥åˆ°æš‚å­˜åŒº</p><img src="git/20210716191505.png" alt="image-20210716191505941" style="zoom:67%;" /></li><li><p>å°†åˆ é™¤æ“ä½œåŒæ­¥åˆ°æœ¬åœ°åº“</p><img src="git/20210716191516.png" alt="image-20210716191516088" style="zoom:67%;" /></li><li><p>æŸ¥çœ‹æ—¥å¿—</p><img src="git/20210716191540.png" alt="image-20210716191540549" style="zoom:67%;" /></li><li><p>æ‰¾åˆ°æœ¬åœ°åº“ä¸­åˆ é™¤çš„æ–‡ä»¶ï¼Œå®é™…ä¸Šå°±æ˜¯å°†å†å²ç‰ˆæœ¬åˆ‡æ¢åˆ°åˆšæ‰æ·»åŠ æ–‡ä»¶çš„é‚£ä¸ªç‰ˆæœ¬å³å¯</p><img src="git/20210716191642.png" alt="image-20210716191642335" style="zoom:67%;" /></li></ul><h4 id="2-æ‰¾å›æš‚å­˜åŒºåˆ é™¤çš„æ–‡ä»¶">2.æ‰¾å›æš‚å­˜åŒºåˆ é™¤çš„æ–‡ä»¶</h4><ul><li><p>åˆ é™¤å·¥ä½œåŒºæ•°æ®</p><img src="git/20210716192257.png" alt="image-20210716192257627" style="zoom:67%;" /></li><li><p>åŒæ­¥åˆ°ç¼“å­˜åŒº</p><img src="git/20210716192305.png" alt="image-20210716192305650" style="zoom:67%;" /></li><li><p>æŸ¥çœ‹æ—¥å¿—</p><img src="git/20210716192331.png" alt="image-20210716192331458" style="zoom:67%;" /></li><li><p>æ‰¾åˆ°å½“å‰æŒ‡é’ˆ ç„¶åè¿”å›åˆ°è¯¥çŠ¶æ€</p><img src="git/20210716192952.png" alt="image-20210716192952612" style="zoom:67%;" /><img src="git/20210716193047.png" alt="image-20210716193047918" style="zoom:67%;" /></li></ul><h2 id="diff">diff</h2><ol><li><p>æ¯”å¯¹<strong>å·¥ä½œåŒº</strong>å’Œ<strong>æš‚å­˜åŒº</strong></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">diff</span> <span class="token punctuation">[</span>æ–‡ä»¶å<span class="token punctuation">]</span></code></pre><ul><li>æ·»åŠ å¹¶æäº¤ä¸€ä¸ªå†…å®¹ä¸ºaaaaçš„Test3.txt</li></ul><img src="git/20210716195249.png" alt="image-20210716195249530" style="zoom:67%;" /><ul><li>æ›´æ”¹å·¥ä½œåŒºçš„æ–‡ä»¶åŠ å…¥bbbï¼Œå†ç”¨difè¿›è¡Œæ¯”å¯¹ï¼Œå‘ç°ä¸åŒ</li></ul><img src="git/20210716195504.png" alt="image-20210716195504098" style="zoom:67%;" /><ul><li>å¦‚æœä¿®æ”¹äº†å¤šä¸ªæ–‡ä»¶ï¼Œå¤šä¸ªæ–‡ä»¶çš„æ¯”å¯¹å‘½ä»¤ç›´æ¥æ˜¯git diff</li></ul><img src="git/20210716195715.png" alt="image-20210716195715409" style="zoom:67%;" /></li><li><p>æ¯”å¯¹<strong>æš‚å­˜åŒº</strong>å’Œ<strong>æœ¬åœ°åº“</strong> ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">diff</span> <span class="token punctuation">[</span>å†å²ç‰ˆæœ¬<span class="token punctuation">]</span> <span class="token punctuation">[</span>æ–‡ä»¶<span class="token punctuation">]</span></code></pre><ul><li><p>æ–‡ä»¶æ·»åŠ ä¸æäº¤åˆ°æœ¬åœ°åº“ï¼Œæ­¤æ—¶æš‚å­˜åŒºå°±å’Œå·¥ä½œåŒºç›¸åŒä¸ºaaaabbb</p></li><li><p>æŸ¥çœ‹æ—¥å¿—</p><img src="git/20210716202947.png" alt="image-20210716202947616" style="zoom:67%;" /><p>æ­¤åˆ»çš„æœ¬åœ°åº“è¿˜åœç•™åœ¨ä¹‹å‰ç¬¬ä¸€æ¬¡ä¿®æ”¹</p></li><li><p>æ¯”å¯¹æš‚å­˜åŒºå’Œæœ¬åœ°åº“ä¸­çš„HEADå½“å‰æŒ‡é’ˆçŠ¶æ€</p><img src="git/20210716203057.png" alt="image-20210716203056977" style="zoom:67%;" /><p>å‘ç°ä¸ä¸€æ ·ï¼Œè¯´æ˜æ²¡æœ‰æäº¤çš„æ—¶å€™å°±æ˜¯ä¸ä¸€æ ·çš„</p></li><li><p>HEADéƒ¨åˆ†å¯ä»¥æ”¹æˆå…¶ä»–å†å²ç‰ˆæœ¬çš„æ ‡å·</p><img src="git/20210716203405.png" alt="image-20210716203405603" style="zoom:67%;" /></li></ul></li></ol><h1>åˆ†æ”¯</h1><p>æŸ¥çœ‹åˆ†æ”¯</p><img src="git/20210716205522.png" alt="image-20210716205522520" style="zoom:67%;" /><p>åˆ›å»ºæ–°åˆ†æ”¯</p><img src="git/20210716205639.png" alt="image-20210716205639017" style="zoom:67%;" /><p>åˆ‡æ¢åˆ†æ”¯</p><img src="git/20210716205742.png" alt="image-20210716205742388" style="zoom: 67%;" /><p>è¿›å…¥branch01åˆ†æ”¯ï¼Œå¢åŠ å†…å®¹</p><img src="git/20210716210648.png" alt="image-20210716210648550" style="zoom: 67%;" /><img src="git/20210716210051.png" alt="image-20210716210051334" style="zoom:67%;" /><p>å†æ¬¡æŸ¥çœ‹ä¸¤ä¸ªåˆ†æ”¯å‘ç°ä¸»åˆ†æ”¯æ²¡æœ‰æ”¹å˜</p><img src="git/20210716210157.png" alt="image-20210716210157353" style="zoom:67%;" /><p>æŸ¥çœ‹æ–‡ä»¶</p><img src="git/20210716210515.png" alt="image-20210716210515711" style="zoom: 67%;" /><p>å°†branch01åˆå¹¶åˆ°ä¸»åˆ†æ”¯</p><img src="git/20210716211526.png" alt="image-20210716211526286" style="zoom: 67%;" /><p>å› ä¸ºåœ¨åŒä¸€æ–‡ä»¶çš„åŒä¸€ä½ç½®ä¿®æ”¹äº†æ–‡ä»¶</p><img src="git/20210716211737.png" alt="image-20210716211737215" style="zoom:50%;" /><p>è§£å†³å†²çªï¼š</p><p>äººä¸ºå†³å®šï¼Œç•™ä¸‹æƒ³è¦çš„å°±å¯ä»¥ï¼Œç„¶åå†æ·»åŠ </p><img src="git/20210716212101.png" alt="image-20210716212101854" style="zoom:67%;" /><p>æäº¤å†²çªï¼Œä¸èƒ½å¸¦æ–‡ä»¶å</p><img src="git/20210716212214.png" style="zoom:67%;" /><img src="git/20210716212214.png" alt="image-20210716212214847" style="zoom:67%;" /><h1>Github</h1><p>åˆ›å»ºè¿œç¨‹åº“</p><p>ä¸ºè¿œç¨‹åº“å–åˆ«å</p><img src="git/20210717114246.png" alt="image-20210717114246916" style="zoom:67%;" /><h3 id="å°†æœ¬åœ°åº“æ•°æ®æ¨é€åˆ°è¿œç¨‹åº“ä¸­">å°†æœ¬åœ°åº“æ•°æ®æ¨é€åˆ°è¿œç¨‹åº“ä¸­</h3><img src="git/20210717114612.png" alt="image-20210717114612323" style="zoom:67%;" /><img src="git/20210717114625.png" alt="image-20210717114625397" style="zoom:67%;" /><img src="git/20210717114728.png" alt="image-20210717114728691" style="zoom:67%;" /><p>æŸ¥çœ‹è¿œç¨‹åº“</p><img src="git/20210717114756.png" alt="image-20210717114756656" style="zoom:67%;" /><h1>SSHå…å¯†æ“ä½œ</h1><ol><li><p>è¿›å…¥ç”¨æˆ·çš„ä¸»ç›®å½•ä¸­ï¼š</p></li><li><p>æ‰§è¡Œå‘½ä»¤ï¼Œç”Ÿæˆä¸€ä¸ª.sshç›®å½•</p><img src="git/20210717204402.png" alt="image-20210717204402583" style="zoom: 67%;" /></li><li><p>å‘ç°.sshç›®å½•ä¸‹æœ‰ä¸¤ä¸ªæ–‡ä»¶</p><img src="git/20210717204425.png" alt="image-20210717204425794" style="zoom:67%;" /></li><li><p>ç¬¬äºŒä¸ªæ–‡ä»¶é‡Œé¢çš„å¯†é’¥å¤åˆ¶ï¼Œå»githubä¸‹æ–°å»ºå¯†é’¥</p></li><li><p>å¯†é’¥ç”Ÿæˆï¼š</p><img src="git/20210717144958.png" alt="image-20210717144958526" style="zoom:67%;" /></li></ol><p>å…å¯†æ“ä½œä½¿æ¯æ¬¡éœ€è¦pushä»“åº“çš„æ—¶å€™ï¼Œéƒ½ä¸ç”¨å†è¾“å…¥å¯†ç 434</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå­¦ä¹ </title>
      <link href="/2021/07/21/Linux%E5%AD%A6%E4%B9%A0/"/>
      <url>/2021/07/21/Linux%E5%AD%A6%E4%B9%A0/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=f7c20c68-d6fd-15a9-2fe7-4194822b7e3b</cover>
      <date>Wed Jul 21 2021 23:24:39 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>å¸¸ç”¨é…ç½®</h1><h2 id="å¯åŠ¨ç½‘ç»œ">å¯åŠ¨ç½‘ç»œ</h2><ul><li>å¯åŠ¨ç½‘å¡ï¼ˆä»…é’ˆå¯¹å•æ¬¡å¯ç”¨ï¼‰</li></ul><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># nmcli c up ens33</span></code></pre><ul><li>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆæ°¸ä¹…å¯ç”¨ï¼‰</li></ul><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/sysconfig/network-scripts/ifcfg-ens33</span></code></pre><img src="Linuxå­¦ä¹ /20210810165254.png" alt="image-20210810165233126" style="zoom:33%;" /><p>ONBOOT=yes</p><p>NATæ¨¡å¼</p><p>åœ¨VMWareä¸­é»˜è®¤ä½¿ç”¨çš„NATæ¨¡å¼</p><ul><li>Network Address Translation ç½‘ç»œåœ°å€è½¬æ¢ï¼Œ</li></ul><p>ä¸ºä»€ä¹ˆè¦æ±‚æ”¹ç½‘ç»œç±»å‹ï¼šå› ä¸ºç»™NATæ¨¡å¼å¤–ç•Œä¸èƒ½è®¿é—®windowsé‡Œé¢çš„æ“ä½œç³»ç»Ÿ</p><p>æ”¹æˆæ¡¥æ¥æ¨¡å¼</p><img src="Linuxå­¦ä¹ /20210810165902.png" alt="image-20210810165902006" style="zoom: 33%;" />]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaEE</title>
      <link href="/2021/07/20/JavaEE/"/>
      <url>/2021/07/20/JavaEE/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=9c7d1b26-9f91-d8ab-adea-9fc2b68fe2ac</cover>
      <date>Tue Jul 20 2021 09:35:44 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>å¼•å…¥</h1><p>â€‹</p><img src="JavaEE/20210731155304-20220507093630276.png" alt="image-20210731155304853" style="zoom:67%;" /><span id="more"></span><h1>Tomcat</h1><h2 id="HTTPåè®®">HTTPåè®®</h2><p>åè®®ï¼šProtocol</p><h3 id="å®šä¹‰">å®šä¹‰</h3><p>HTTPåè®®æ˜¯**Hyper Text Transfer Protocolï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰**çš„ç¼©å†™, HTTPæ˜¯ä¸‡ç»´ç½‘ï¼ˆWWW:World Wide Webï¼‰çš„æ•°æ®é€šä¿¡çš„åŸºç¡€ã€‚</p><p>HTTPæ˜¯ä¸€ä¸ªç®€å•çš„è¯·æ±‚-å“åº”åè®®ï¼Œå®ƒé€šå¸¸è¿è¡Œåœ¨TCPä¹‹ä¸Šã€‚å®ƒæŒ‡å®šäº†å®¢æˆ·ç«¯å¯èƒ½å‘é€ç»™æœåŠ¡å™¨ä»€ä¹ˆæ ·çš„æ¶ˆæ¯ä»¥åŠå¾—åˆ°ä»€ä¹ˆæ ·çš„å“åº”ã€‚</p><img src="JavaEE/20210802110328-20220507093630140.png" alt="image-20210802110327666" style="zoom:67%;" /><p>HTTPæ˜¯ä¸€ä¸ªåŸºäº<strong>TCP/IP</strong>é€šä¿¡åè®®æ¥ä¼ é€’æ•°æ®ï¼ˆHTML æ–‡ä»¶, å›¾ç‰‡æ–‡ä»¶, æŸ¥è¯¢ç»“æœç­‰ï¼‰ã€‚</p><img src="JavaEE/20210802110337-20220507093630336.png" alt="image-20210802110337133" style="zoom:67%;" /><h3 id="ç‰¹ç‚¹">ç‰¹ç‚¹</h3><p>1æ”¯æŒå®¢æˆ·/æœåŠ¡å™¨æ¨¡å¼</p><p>HTTPåè®®æ”¯æŒå®¢æˆ·ç«¯æœåŠ¡ç«¯æ¨¡å¼ï¼Œéœ€è¦ä½¿ç”¨æµè§ˆå™¨ä½œä¸ºå®¢æˆ·ç«¯æ¥è®¿é—®æœåŠ¡ç«¯ã€‚</p><p>2ç®€å•å¿«é€Ÿ</p><p>å®¢æˆ·å‘æœåŠ¡å™¨è¯·æ±‚æœåŠ¡æ—¶ï¼Œåªéœ€ä¼ é€è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„ã€‚è¯·æ±‚æ–¹æ³•å¸¸ç”¨çš„æœ‰GETã€POSTç­‰ã€‚æ¯ç§æ–¹æ³•è§„å®šäº†å®¢æˆ·ä¸æœåŠ¡å™¨è”ç³»çš„ç±»å‹ä¸åŒã€‚ç”±äºHTTPåè®®ç®€å•ï¼Œä½¿å¾—HTTPæœåŠ¡å™¨çš„ç¨‹åºè§„æ¨¡å°ï¼Œå› è€Œé€šä¿¡é€Ÿåº¦å¾ˆå¿«ã€‚</p><p>3çµæ´»</p><p>HTTPå…è®¸ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®å¯¹è±¡ã€‚æ­£åœ¨ä¼ è¾“çš„ç±»å‹ç”±Content-Typeï¼ˆContent-Typeæ˜¯HTTPåŒ…ä¸­ç”¨æ¥è¡¨ç¤ºå†…å®¹ç±»å‹çš„æ ‡è¯†ï¼‰åŠ ä»¥æ ‡è®°ã€‚</p><p>4æ— è¿æ¥</p><p>æ¯æ¬¡è¯·æ±‚ä¸€æ¬¡ï¼Œé‡Šæ”¾ä¸€æ¬¡è¿æ¥ã€‚æ‰€ä»¥æ— è¿æ¥è¡¨ç¤ºæ¯æ¬¡è¿æ¥åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚ä¼˜ç‚¹å°±æ˜¯èŠ‚çœä¼ è¾“æ—¶é—´ï¼Œå®ç°ç®€å•ã€‚æˆ‘ä»¬æœ‰æ—¶ç§°è¿™ç§æ— è¿æ¥ä¸ºçŸ­è¿æ¥ã€‚å¯¹åº”çš„å°±æœ‰äº†é•¿é“¾æ¥ï¼Œé•¿è¿æ¥ä¸“é—¨è§£å†³æ•ˆç‡é—®é¢˜ã€‚å½“å»ºç«‹å¥½äº†ä¸€ä¸ªè¿æ¥ä¹‹åï¼Œå¯ä»¥å¤šæ¬¡è¯·æ±‚ã€‚ä½†æ˜¯ç¼ºç‚¹å°±æ˜¯å®¹æ˜“é€ æˆå ç”¨èµ„æºä¸é‡Šæ”¾çš„é—®é¢˜ã€‚å½“HTTPåè®®å¤´éƒ¨ä¸­å­—æ®µConnectionï¼škeep-aliveè¡¨ç¤ºæ”¯æŒé•¿é“¾æ¥ã€‚</p><p>5å•å‘æ€§</p><p>æœåŠ¡ç«¯æ°¸è¿œæ˜¯è¢«åŠ¨çš„ç­‰å¾…å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</p><p>6æ— çŠ¶æ€</p><p>HTTPåè®®æ˜¯æ— çŠ¶æ€åè®®ã€‚æ— çŠ¶æ€æ˜¯æŒ‡åè®®å¯¹äºäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚ç¼ºå°‘çŠ¶æ€æ„å‘³ç€å¦‚æœåç»­å¤„ç†éœ€è¦å‰é¢çš„ä¿¡æ¯ï¼Œåˆ™å®ƒå¿…é¡»é‡ä¼ ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´æ¯æ¬¡è¿æ¥ä¼ é€çš„æ•°æ®é‡å¢å¤§ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨æœåŠ¡å™¨ä¸éœ€è¦å…ˆå‰ä¿¡æ¯æ—¶å®ƒçš„åº”ç­”å°±è¾ƒå¿«ã€‚ä¸ºäº†è§£å†³HTTPåè®®æ— çŠ¶æ€ï¼Œäºæ˜¯ï¼Œä¸¤ç§ç”¨äºä¿æŒHTTPè¿æ¥çŠ¶æ€çš„æŠ€æœ¯å°±åº”è¿è€Œç”Ÿäº†ï¼Œä¸€ä¸ªæ˜¯Cookieï¼Œè€Œå¦ä¸€ä¸ªåˆ™æ˜¯Sessionã€‚</p><p>HTTPåè®®å‘å±•å’Œç‰ˆæœ¬</p><p>httpåè®®åœ¨1991å¹´å‘å¸ƒç¬¬ä¸€ä¸ªç‰ˆæœ¬ç‰ˆæœ¬å·ä¸º0.9ã€‚éšåWWWè”ç›Ÿï¼ˆWWW Consortium-W3Cï¼‰äº1994å¹´æˆç«‹ï¼Œhttpåè®®è¢«çº³å…¥åˆ°W3Cç»„ç»‡ä¸­è¿›è¡Œç»´æŠ¤å’Œç®¡ç†ã€‚</p><p>http1.0</p><p>æœ€æ—©åœ¨1996å¹´åœ¨ç½‘é¡µä¸­ä½¿ç”¨ï¼Œå†…å®¹ç®€å•ï¼Œæ‰€ä»¥æµè§ˆå™¨çš„æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œæˆåç«‹å³æ–­å¼€TCPè¿æ¥ï¼ˆæ— è¿æ¥ï¼‰ï¼ŒæœåŠ¡å™¨ä¸è·Ÿè¸ªæ¯ä¸ªå®¢æˆ·ç«¯ä¹Ÿä¸è®°å½•è¿‡å»çš„è¯·æ±‚ï¼ˆæ— çŠ¶æ€ï¼‰,è¯·æ±‚åªèƒ½ç”±å®¢æˆ·ç«¯å‘èµ·ï¼ˆå•å‘æ€§ï¼‰ã€‚</p><p>http1.1</p><p>åˆ°1999å¹´å¹¿æ³›åœ¨å„å¤§æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ä¸­ä½¿ç”¨ï¼ŒHTTP/1.0ä¸­é»˜è®¤ä½¿ç”¨Connection: closeã€‚åœ¨HTTP/1.1ä¸­å·²ç»é»˜è®¤ä½¿ç”¨Connection: keep-aliveï¼ˆé•¿è¿æ¥ï¼‰ï¼Œé¿å…äº†è¿æ¥å»ºç«‹å’Œé‡Šæ”¾çš„å¼€é”€ï¼Œä½†æœåŠ¡å™¨å¿…é¡»æŒ‰ç…§å®¢æˆ·ç«¯è¯·æ±‚çš„å…ˆåé¡ºåºä¾æ¬¡å›é€ç›¸åº”çš„ç»“æœï¼Œä»¥ä¿è¯å®¢æˆ·ç«¯èƒ½å¤ŸåŒºåˆ†å‡ºæ¯æ¬¡è¯·æ±‚çš„å“åº”å†…å®¹ã€‚é€šè¿‡Content-Lengthå­—æ®µæ¥åˆ¤æ–­å½“å‰è¯·æ±‚çš„æ•°æ®æ˜¯å¦å·²ç»å…¨éƒ¨æ¥æ”¶ã€‚ä¸å…è®¸åŒæ—¶å­˜åœ¨ä¸¤ä¸ªå¹¶è¡Œçš„å“åº”ã€‚</p><p>1.1ä¸­æœ€é‡è¦çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯æ”¯æŒâ€œé•¿è¿æ¥â€ï¼Œå³â€œä¸€æ¬¡è¿æ¥å¯ä»¥å¤šæ¬¡è¯·æ±‚â€ã€‚</p><p>HTTP 1.1æ”¯æŒæŒä¹…è¿æ¥ï¼ˆHTTP/1.1çš„é»˜è®¤æ¨¡å¼ä½¿ç”¨å¸¦æµæ°´çº¿çš„æŒä¹…è¿æ¥ï¼‰ï¼Œåœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šå¯ä»¥ä¼ é€å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”ï¼Œå‡å°‘äº†å»ºç«‹å’Œå…³é—­è¿æ¥çš„æ¶ˆè€—å’Œå»¶è¿Ÿã€‚ä¸€ä¸ªåŒ…å«æœ‰è®¸å¤šå›¾åƒçš„ç½‘é¡µæ–‡ä»¶çš„å¤šä¸ªè¯·æ±‚å’Œåº”ç­”å¯ä»¥åœ¨ä¸€ä¸ªè¿æ¥ä¸­ä¼ è¾“ï¼Œä½†æ¯ä¸ªå•ç‹¬çš„ç½‘é¡µæ–‡ä»¶çš„è¯·æ±‚å’Œåº”ç­”ä»ç„¶éœ€è¦ä½¿ç”¨å„è‡ªçš„è¿æ¥ã€‚HTTP 1.1è¿˜å…è®¸å®¢æˆ·ç«¯ä¸ç”¨ç­‰å¾…ä¸Šä¸€æ¬¡è¯·æ±‚ç»“æœè¿”å›ï¼Œå°±å¯ä»¥å‘å‡ºä¸‹ä¸€æ¬¡è¯·æ±‚ï¼Œä½†æœåŠ¡å™¨ç«¯å¿…é¡»æŒ‰ç…§æ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚çš„å…ˆåé¡ºåºä¾æ¬¡å›é€å“åº”ç»“æœï¼Œä»¥ä¿è¯å®¢æˆ·ç«¯èƒ½å¤ŸåŒºåˆ†å‡ºæ¯æ¬¡è¯·æ±‚çš„å“åº”å†…å®¹ï¼Œè¿™æ ·ä¹Ÿæ˜¾è‘—åœ°å‡å°‘äº†æ•´ä¸ªä¸‹è½½è¿‡ç¨‹æ‰€éœ€è¦çš„æ—¶é—´ã€‚</p><p>http2.0</p><p>é•¿è¿æ¥</p><p>åœ¨HTTP/2ä¸­ï¼Œå®¢æˆ·ç«¯å‘æŸä¸ªåŸŸåçš„æœåŠ¡å™¨è¯·æ±‚é¡µé¢çš„è¿‡ç¨‹ä¸­ï¼Œåªä¼šåˆ›å»ºä¸€æ¡TCPè¿æ¥ï¼Œå³ä½¿è¿™é¡µé¢å¯èƒ½åŒ…å«ä¸Šç™¾ä¸ªèµ„æºã€‚  å•ä¸€çš„è¿æ¥åº”è¯¥æ˜¯HTTP2çš„ä¸»è¦ä¼˜åŠ¿ï¼Œå•ä¸€çš„è¿æ¥èƒ½å‡å°‘TCPæ¡æ‰‹å¸¦æ¥çš„æ—¶å»¶ã€‚HTTP2ä¸­ç”¨ä¸€æ¡å•ä¸€çš„é•¿è¿æ¥ï¼Œé¿å…äº†åˆ›å»ºå¤šä¸ªTCPè¿æ¥å¸¦æ¥çš„ç½‘ç»œå¼€é”€ï¼Œæé«˜äº†ååé‡ã€‚</p><p>å¤šè·¯å¤ç”¨ (Multiplexing)</p><p>HTTP2.0ä¸­æ‰€æœ‰åŠ å¼ºæ€§èƒ½çš„æ ¸å¿ƒæ˜¯äºŒè¿›åˆ¶ä¼ è¾“ï¼Œåœ¨HTTP1.xä¸­ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡æ–‡æœ¬çš„æ–¹å¼ä¼ è¾“æ•°æ®ã€‚åœ¨HTTP2.0ä¸­å¼•å…¥äº†æ–°çš„ç¼–ç æœºåˆ¶ï¼Œæ‰€æœ‰ä¼ è¾“çš„æ•°æ®éƒ½ä¼šè¢«åˆ†å‰²ï¼Œå¹¶é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ç¼–ç ã€‚</p><p>å¤šè·¯å¤ç”¨ï¼Œè¿æ¥å…±äº«ã€‚ä¸åŒçš„requestå¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªè¿æ¥ä¼ è¾“ï¼ˆæœ€åæ ¹æ®æ¯ä¸ªrequestä¸Šçš„idå·ç»„åˆæˆæ­£å¸¸çš„è¯·æ±‚ï¼‰ã€‚</p><p>HTTP2.0ä¸­ï¼Œæœ‰ä¸¤ä¸ªæ¦‚å¿µéå¸¸é‡è¦ï¼šå¸§ï¼ˆframeï¼‰å’Œæµï¼ˆstreamï¼‰ã€‚<br>å¸§æ˜¯æœ€å°çš„æ•°æ®å•ä½ï¼Œæ¯ä¸ªå¸§ä¼šæ ‡è¯†å‡ºè¯¥å¸§å±äºå“ªä¸ªæµï¼Œæµæ˜¯å¤šä¸ªå¸§ç»„æˆçš„æ•°æ®æµã€‚<br>æ‰€è°“å¤šè·¯å¤ç”¨ï¼Œå³åœ¨ä¸€ä¸ªTCPè¿æ¥ä¸­å­˜åœ¨å¤šä¸ªæµï¼Œå³å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œå¯¹ç«¯å¯ä»¥é€šè¿‡å¸§ä¸­çš„è¡¨ç¤ºçŸ¥é“è¯¥å¸§å±äºå“ªä¸ªè¯·æ±‚ã€‚åœ¨å®¢æˆ·ç«¯ï¼Œè¿™äº›å¸§ä¹±åºå‘é€ï¼Œåˆ°å¯¹ç«¯åå†æ ¹æ®æ¯ä¸ªå¸§é¦–éƒ¨çš„æµæ ‡è¯†ç¬¦é‡æ–°ç»„è£…ã€‚é€šè¿‡è¯¥æŠ€æœ¯ï¼Œå¯ä»¥é¿å…HTTPæ—§ç‰ˆæœ¬çš„é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼Œæå¤§æé«˜ä¼ è¾“æ€§èƒ½ã€‚</p><p>é¦–éƒ¨å‹ç¼©ï¼ˆHeader Compressionï¼‰</p><p>ç”±äº1.1ä¸­headerå¸¦æœ‰å¤§é‡çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¾—é‡å¤ä¼ è¾“ï¼Œ2.0ä½¿ç”¨encoderæ¥å‡å°‘éœ€è¦ä¼ è¾“çš„hearderå¤§å°ã€‚</p><p>æœåŠ¡ç«¯æ¨é€ï¼ˆServer Pushï¼‰</p><p>åœ¨HTTP2.0ä¸­ï¼ŒæœåŠ¡ç«¯å¯ä»¥åœ¨å®¢æˆ·ç«¯æŸä¸ªè¯·æ±‚åï¼Œä¸»åŠ¨æ¨é€å…¶ä»–èµ„æºã€‚<br>å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼ŒæŸäº›èµ„æºå®¢æˆ·ç«¯æ˜¯ä¸€å®šä¼šè¯·æ±‚çš„ï¼Œè¿™æ—¶å°±å¯ä»¥é‡‡å–æœåŠ¡ç«¯pushçš„æŠ€æœ¯ï¼Œæå‰ç»™å®¢æˆ·ç«¯æ¨é€å¿…è¦çš„èµ„æºï¼Œå°±å¯ä»¥ç›¸å¯¹å‡å°‘ä¸€ç‚¹å»¶è¿Ÿæ—¶é—´ã€‚åœ¨æµè§ˆå™¨å…¼å®¹çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥ä½¿ç”¨prefetchã€‚</p><p>æ›´å®‰å…¨</p><p>HTTP2.0ä½¿ç”¨äº†tlsçš„æ‹“å±•ALPNåšä¸ºåè®®å‡çº§ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒHTTP2.0å¯¹tlsçš„å®‰å…¨æ€§åšäº†è¿‘ä¸€æ­¥åŠ å¼ºï¼Œé€šè¿‡é»‘åå•æœºåˆ¶ç¦ç”¨äº†å‡ ç™¾ç§ä¸å†å®‰å…¨çš„åŠ å¯†ç®—æ³•ã€‚</p><h1>Servlet</h1><h2 id="1-å¼•å…¥">1.   å¼•å…¥</h2><h3 id="ä»‹ç»">ä»‹ç»</h3><p>Servletæ˜¯Server Appletçš„ç®€ç§°ï¼Œç§°ä¸ºæœåŠ¡ç«¯å°ç¨‹åºï¼Œæ˜¯JavaEEå¹³å°ä¸‹çš„æŠ€æœ¯æ ‡å‡†ï¼ŒåŸºäºJavaè¯­è¨€ç¼–å†™çš„æœåŠ¡ç«¯ç¨‹åºã€‚Webå®¹å™¨æˆ–åº”ç”¨æœåŠ¡å™¨å®ç°äº†Servletæ ‡å‡†æ‰€ä»¥Servletéœ€è¿è¡Œåœ¨Webå®¹å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸­ã€‚Servletä¸»è¦åŠŸèƒ½åœ¨äºèƒ½åœ¨æœåŠ¡å™¨ä¸­æ‰§è¡Œå¹¶ç”Ÿæˆæ•°æ®ã€‚</p><h3 id="ç‰¹ç‚¹-2">ç‰¹ç‚¹</h3><p>ä½¿ç”¨å•è¿›ç¨‹å¤šçº¿ç¨‹æ–¹å¼è¿è¡Œ</p><img src="JavaEE/20210802204053-20220507093630091.png" alt="image-20210802204049056" style="zoom:80%;" /><h3 id="åº”ç”¨ç¨‹åºä¸­çš„ä½ç½®">åº”ç”¨ç¨‹åºä¸­çš„ä½ç½®</h3><p><img src="JavaEE/20210802204157-20220507093630043.png" alt="image-20210802204157808"></p><h3 id="é™æ€èµ„æºå’ŒåŠ¨æ€èµ„æºçš„åŒºåˆ†">é™æ€èµ„æºå’ŒåŠ¨æ€èµ„æºçš„åŒºåˆ†</h3><ul><li>é™æ€èµ„æºï¼šæ¯æ¬¡è®¿é—®éƒ½ä¸éœ€è¦è¿ç®—ï¼Œç›´æ¥å°±å¯ä»¥è¿”å›çš„èµ„æºï¼Œå¦‚HTML CSS JS å¤šåª’ä½“æ–‡ä»¶ç­‰ç­‰ æ¯æ¬¡è®¿é—®è·å¾—åœ°èµ„æºéƒ½æ˜¯ä¸€æ ·çš„</li><li>åŠ¨æ€èµ„æºï¼šæ¯æ¬¡è®¿é—®éƒ½éœ€è¦è¿ç®—ä»£ç ç”Ÿæˆçš„èµ„æºå¦‚ Servlet JSP æ¯æ¬¡è®¿é—®è·å¾—çš„ç»“æœå¯èƒ½éƒ½æ˜¯ä¸ä¸€æ ·çš„</li></ul><p>Servlet ä½œä¸ºä¸€ç§åŠ¨æ€èµ„æºæŠ€æœ¯ æ˜¯åé¢å­¦ä¹ æ¡†æ¶çš„åŸºç¡€</p><h3 id="Servletåœ¨ç¨‹åºä¸­çš„åœ°ä½">Servletåœ¨ç¨‹åºä¸­çš„åœ°ä½</h3><p>Servletæ˜¯å¯ä»¥æ¥å—Httpè¯·æ±‚å¹¶ä½œå‡ºç›¸åº”çš„ä¸€ç§æŠ€æœ¯,æ˜¯JAVAè¯­è¨€ç¼–å†™çš„ä¸€ç§åŠ¨æ€èµ„æº<br>Servletæ˜¯å‰åç«¯è¡”æ¥çš„ä¸€ç§æŠ€æœ¯,ä¸æ˜¯æ‰€æœ‰çš„JAVAç±»éƒ½å¯ä»¥æ¥æ”¶è¯·æ±‚å’Œä½œå‡ºç›¸åº”,Servletå¯ä»¥</p><p>åœ¨MVCæ¨¡å¼ä¸­,Servletä½œä¸ºControllerå±‚(æ§åˆ¶å±‚)ä¸»è¦æŠ€æœ¯,ç”¨äºå’Œæµè§ˆå™¨å®Œæˆæ•°æ®äº¤äº’,æ§åˆ¶äº¤äº’é€»è¾‘</p><h3 id="servletä¸‰å¤§åŸŸå¯¹è±¡">==servletä¸‰å¤§åŸŸå¯¹è±¡==</h3><p><strong>Servletä¸‰å¤§åŸŸå¯¹è±¡çš„åº”ç”¨ requestã€sessionã€applicationï¼ˆServletContextï¼‰</strong></p><p><strong>ServletContextæ˜¯ä¸€ä¸ªå…¨å±€çš„å‚¨å­˜ä¿¡æ¯çš„ç©ºé—´ï¼ŒæœåŠ¡å™¨å¼€å§‹å°±å­˜åœ¨ï¼ŒæœåŠ¡å™¨å…³é—­æ‰é‡Šæ”¾ã€‚</strong></p><p><strong>requestï¼Œä¸€ä¸ªç”¨æˆ·å¯æœ‰å¤šä¸ªï¼›sessionï¼Œä¸€ä¸ªç”¨æˆ·ä¸€ä¸ªï¼›è€ŒservletContextï¼Œæ‰€æœ‰ç”¨æˆ·å…±ç”¨ä¸€ä¸ªã€‚æ‰€ä»¥ï¼Œä¸ºäº†èŠ‚çœç©ºé—´ï¼Œæé«˜æ•ˆç‡ï¼ŒServletContextä¸­ï¼Œè¦æ”¾å¿…é¡»çš„ã€é‡è¦çš„ã€æ‰€æœ‰ç”¨æˆ·éœ€è¦å…±äº«çš„çº¿ç¨‹åˆæ˜¯å®‰å…¨çš„ä¸€äº›ä¿¡æ¯ã€‚</strong></p><h2 id="æ¡ˆä¾‹1ï¼šåˆæ­¥è®¤è¯†">æ¡ˆä¾‹1ï¼šåˆæ­¥è®¤è¯†</h2><ul><li><p>åˆ›å»ºä¸€ä¸ªJAVAWEBé¡¹ç›®ï¼Œå¹¶åœ¨é¡¹ç›®ä¸­å¼€å‘ä¸€ä¸ªè‡ªå·±çš„Servletï¼Œç»§æ‰¿HttpServletç±»</p><img src="JavaEE/20210802205500-20220507093630287.png" alt="image-20210802205500530" style="zoom:50%;" /><p><img src="JavaEE/20210802205532-20220507093629703.png" alt="image-20210802205532234"></p></li><li><p>åœ¨MyServletç±»ä¸­é‡å†™serviceæ–¹æ³•</p><p><img src="JavaEE/20210802205558-20220507093630506.png" alt="image-20210802205558243"></p></li><li><p>åœ¨serviceæ–¹æ³•ä¸­å®šä¹‰å…·ä½“çš„åŠŸèƒ½ä»£ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//åŠ¨æ€ç”Ÿæˆæ•°æ®</span>    <span class="token comment">//éšæœºç”Ÿæˆä¸€ä¸ªæ•´æ•°</span>    <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token punctuation">(</span>num<span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token string">"happy birthday"</span><span class="token operator">:</span><span class="token string">"happy new year"</span><span class="token punctuation">;</span>    <span class="token comment">//å¯¹æµè§ˆå™¨åšå‡ºå“åº”</span>    <span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¯¥æ‰“å°æµæŒ‡å‘äº†æµè§ˆå™¨</span>    writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre></li><li><p>åœ¨web.xmlä¸­é…ç½®Servletçš„æ˜ å°„è·¯å¾„</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--å‘Tomcatå£°æ˜ä¸€ä¸ªServlet--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>myFirstServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--è¿™åªæ˜¯åˆ«å--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.chs.servlet.Myservlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--ç»™ServletåŒ¹é…ä¸€ä¸ªè¯·æ±‚çš„æ˜ å°„è·¯å¾„--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>myFirstServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/mySerlvet.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre></li><li><p>æ‰“å¼€æµè§ˆå™¨è¯·æ±‚Servletèµ„æº</p><p><img src="JavaEE/20210802205836-20220507093630044.png" alt="image-20210802205836668"></p></li></ul><h2 id="æ¡ˆä¾‹2ï¼šç™»å½•é¡µ">æ¡ˆä¾‹2ï¼šç™»å½•é¡µ</h2><h3 id="éœ€æ±‚ï¼š">éœ€æ±‚ï¼š</h3><p>å‡†å¤‡ä¸€ä¸ªç™»é™†é¡µï¼Œå¯ä»¥è¾“å…¥è¦ç”¨æˆ·åå’Œå¯†ç </p><p>è¾“å…¥å®Œæ¯•å‘Servletæäº¤ç”¨æˆ·åå’Œå¯†ç </p><p>Servletæ¥æ”¶åˆ°ç”¨æˆ·åå’Œå¯†ç ä¹‹åæ ¡éªŒæ˜¯å¦æ­£ç¡®</p><p>å¦‚æœæ­£ç¡®å“åº”success</p><p>å¦‚æœä¸æ­£ç¡®å“åº”Failed</p><h3 id="å…·ä½“æ­¥éª¤ï¼š">å…·ä½“æ­¥éª¤ï¼š</h3><ul><li><p>é¡¹ç›®ç»“æ„ï¼š</p><img src="JavaEE/20210802210210-20220507093630228.png" alt="image-20210802210210084" style="zoom:67%;" /></li><li><p>å¼€å‘ç™»å½•é¡µï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>get<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loginServlet.do<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 0px auto</span><span class="token punctuation">"</span></span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>300px<span class="token punctuation">"</span></span> <span class="token attr-name">cellpadding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0px<span class="token punctuation">"</span></span> <span class="token attr-name">cellspacing</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0px<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>ç”¨æˆ·å<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>å¯†ç <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pwd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç™»å½•<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></li><li><p>å¼€å‘åå°Servlet</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"login servlet invoked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–è¯·æ±‚ä¸­çš„æ•°æ®</span>        <span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> pwd <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pwd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ¤æ–­æ•°æ®</span>        <span class="token class-name">String</span> message<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>username<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"mashibing"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span> pwd<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            message<span class="token operator">=</span><span class="token string">"Success"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            message<span class="token operator">=</span><span class="token string">"Fail"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// ä½œå‡ºå“åº”</span>        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre></li><li><p>é…ç½®Servlet</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>loginServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.mashibing.servlet.LoginServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>loginServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/loginServlet.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>welcome-file-list</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>welcome-file</span><span class="token punctuation">></span></span>login.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>welcome-file</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>welcome-file-list</span><span class="token punctuation">></span></span></code></pre></li></ul><p>è¿è¡Œæµ‹è¯•</p><p><img src="JavaEE/20210802210437-20220507093630239.png" alt="image-20210802210437528"></p><img src="JavaEE/20210802210446-20220507093630225.png" alt="image-20210802210446147" style="zoom:67%;" /><h2 id="2-HttpServletRequest">2. HttpServletRequest</h2><p>ä¸€ä¸ªhttpå¯ä»¥åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š<strong>è¯·æ±‚è¡Œ è¯·æ±‚å¤´ è¯·æ±‚ä½“</strong></p><h3 id="è¯·æ±‚è¡Œ">è¯·æ±‚è¡Œ</h3><ul><li>è¯·æ±‚æ–¹å¼ï¼šGET</li><li>è¯·æ±‚çš„URLï¼š <a href="http://192.168.56.220:8080/logOnDemo/logon.html">http://192.168.56.220:8080/logOnDemo/logon.html</a></li><li>åè®®åŠç‰ˆæœ¬ï¼š HTTP/1.1</li></ul><h3 id="è¯·æ±‚å¤´">è¯·æ±‚å¤´</h3><p><img src="JavaEE/20210802210812-20220507093630614.png" alt="image-20210802210812138"></p><h3 id="è¯·æ±‚ä½“">è¯·æ±‚ä½“</h3><p>getæ–¹å¼æäº¤çš„è¯·æ±‚æ•°æ®é€šè¿‡åœ°å€æ æäº¤ ,æ²¡æœ‰è¯·æ±‚ä½“<br>postæ–¹å¼æäº¤è¯·æ±‚æ•°æ®å•ç‹¬æ”¾åˆ°è¯·æ±‚ä½“ä¸­,è¯·æ±‚æ—¶æ‰€æºå¸¦çš„æ•°æ® (postæ–¹å¼)</p><h3 id="httpæ”¯æŒçš„è¯·æ±‚æ–¹å¼">httpæ”¯æŒçš„è¯·æ±‚æ–¹å¼</h3><p><img src="JavaEE/20210802211209-20220507093630776.png" alt="image-20210802211209830"></p><h4 id="getå’Œpostçš„åŒºåˆ«">==getå’Œpostçš„åŒºåˆ«==</h4><p>==(é¢è¯•ï¼‰==</p><ul><li><p>GETåœ¨æµè§ˆå™¨å›é€€æ—¶æ˜¯æ— å®³çš„ï¼Œè€ŒPOSTä¼šå†æ¬¡æäº¤è¯·æ±‚ã€‚</p></li><li><p>GETäº§ç”Ÿçš„URLåœ°å€å¯ä»¥è¢«Bookmarkï¼Œè€ŒPOSTä¸å¯ä»¥ã€‚</p></li><li><p>GETè¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨cacheï¼Œè€ŒPOSTä¸ä¼šï¼Œé™¤éæ‰‹åŠ¨è®¾ç½®ã€‚</p></li><li><p>GETè¯·æ±‚åªèƒ½è¿›è¡Œurlç¼–ç ï¼Œè€ŒPOSTæ”¯æŒå¤šç§ç¼–ç æ–¹å¼ã€‚</p></li><li><p>GETè¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œï¼Œè€ŒPOSTä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™ã€‚</p></li><li><p>GETè¯·æ±‚åœ¨URLä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œè€ŒPOSTåˆ™æ²¡æœ‰ã€‚å¯¹å‚æ•°çš„æ•°æ®ç±»å‹GETåªæ¥å—ASCIIå­—ç¬¦ï¼Œè€ŒPOSTå³å¯æ˜¯å­—ç¬¦ä¹Ÿå¯æ˜¯å­—èŠ‚ã€‚</p></li><li><p>GETæ¯”POSTæ›´ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨URLä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ã€‚</p></li><li><p>GETå‚æ•°é€šè¿‡URLä¼ é€’ï¼ŒPOSTæ”¾åœ¨Request bodyä¸­ã€‚</p></li></ul><h3 id="å…·ä½“æ“ä½œï¼šè·å¾—å®¢æˆ·ç«¯è¯·æ±‚ä¿¡æ¯">å…·ä½“æ“ä½œï¼šè·å¾—å®¢æˆ·ç«¯è¯·æ±‚ä¿¡æ¯</h3><p>HttpServletRequestå¯¹è±¡ä»£è¡¨å®¢æˆ·ç«¯æµè§ˆå™¨çš„è¯·æ±‚ï¼Œå½“å®¢æˆ·ç«¯æµè§ˆå™¨é€šè¿‡HTTPåè®®è®¿é—®æœåŠ¡å™¨æ—¶ï¼ŒHTTPè¯·æ±‚ä¸­çš„æ‰€æœ‰ä¿¡æ¯éƒ½ä¼šè¢«Tomcatæ‰€è§£æå¹¶å°è£…åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œé€šè¿‡è¿™ä¸ªå¯¹è±¡æä¾›çš„æ–¹æ³•ï¼Œå¯ä»¥è·å¾—å®¢æˆ·ç«¯è¯·æ±‚çš„æ‰€æœ‰ä¿¡æ¯ã€‚</p><h4 id="1-è·å–è¯·æ±‚è¡Œä¿¡æ¯">1.è·å–è¯·æ±‚è¡Œä¿¡æ¯</h4><pre class="language-java" data-language="java"><code class="language-java">req<span class="token punctuation">.</span><span class="token function">getRequestURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>è¿”å›å®¢æˆ·ç«¯æµè§ˆå™¨å‘å‡ºè¯·æ±‚æ—¶çš„å®Œæ•´<span class="token constant">URL</span>ã€‚req<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>è¿”å›è¯·æ±‚è¡Œä¸­æŒ‡å®šèµ„æºéƒ¨åˆ†ã€‚req<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>è¿”å›å‘å‡ºè¯·æ±‚çš„å®¢æˆ·æœºçš„<span class="token constant">IP</span>åœ°å€ã€‚req<span class="token punctuation">.</span><span class="token function">getLocalAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>è¿”å›<span class="token constant">WEB</span>æœåŠ¡å™¨çš„<span class="token constant">IP</span>åœ°å€ã€‚req<span class="token punctuation">.</span><span class="token function">getLocalPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>è¿”å›<span class="token constant">WEB</span>æœåŠ¡å™¨å¤„ç†<span class="token class-name">Http</span>åè®®çš„è¿æ¥å™¨æ‰€ç›‘å¬çš„ç«¯å£ã€‚</code></pre><h4 id="2-è·å–è¯·æ±‚å¤´ä¿¡æ¯">2.è·å–è¯·æ±‚å¤´ä¿¡æ¯</h4><pre class="language-java" data-language="java"><code class="language-java">req<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"headerKey"</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>æ ¹æ®è¯·æ±‚å¤´ä¸­çš„keyè·å–å¯¹åº”çš„valueã€‚<span class="token class-name">String</span> headerValue <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"headerKey"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>req<span class="token punctuation">.</span><span class="token function">getHeaderNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>è·å–è¯·æ±‚å¤´ä¸­æ‰€æœ‰çš„keyï¼Œè¯¥æ–¹æ³•è¿”å›æšä¸¾ç±»å‹ã€‚<span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> headerNames <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getHeaderNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æµ‹è¯•ä»£ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet3</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getRequestURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿”å›å®¢æˆ·ç«¯æµè§ˆå™¨å‘å‡ºè¯·æ±‚æ—¶çš„å®Œæ•´URLã€‚</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿”å›è¯·æ±‚è¡Œä¸­æŒ‡å®šèµ„æºéƒ¨åˆ†ã€‚</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿”å›å‘å‡ºè¯·æ±‚çš„å®¢æˆ·æœºçš„IPåœ°å€ã€‚</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getLocalAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿”å›WEBæœåŠ¡å™¨çš„IPåœ°å€ã€‚</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getLocalPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿”å›WEBæœåŠ¡å™¨å¤„ç†Httpåè®®çš„è¿æ¥å™¨æ‰€ç›‘å¬çš„ç«¯å£ã€‚</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸»æœºå: "</span> <span class="token operator">+</span> req<span class="token punctuation">.</span><span class="token function">getLocalName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®¢æˆ·ç«¯PORT: "</span> <span class="token operator">+</span> req<span class="token punctuation">.</span><span class="token function">getRemotePort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰é¡¹ç›®éƒ¨ç½²å: "</span> <span class="token operator">+</span> req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åè®®å:"</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯·æ±‚æ–¹å¼:"</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ ¹æ®è¯·æ±‚å¤´åæˆ–è€…è¯·æ±‚å¤´å¯¹åº”çš„å€¼</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"Accept"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å¾—å…¨éƒ¨çš„è¯·æ±‚å¤´å</span>        <span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> headerNames <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getHeaderNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>headerNames<span class="token punctuation">.</span><span class="token function">hasMoreElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> headername <span class="token operator">=</span> headerNames<span class="token punctuation">.</span><span class="token function">nextElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>headername<span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span>headername<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="3-è·å–è¯·æ±‚æ•°æ®">3.è·å–è¯·æ±‚æ•°æ®</h4><ul><li><p>æ ¹æ®keyè·å–æŒ‡å®švalue:</p><pre class="language-java" data-language="java"><code class="language-java">req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>æ ¹æ®keyè·å–æŒ‡å®švalueã€‚</code></pre></li><li><p>è·javaå–å¤é€‰æ¡†(checkboxç»„ä»¶)ä¸­çš„å€¼ï¼ˆå¤šä¸ªå€¼ï¼‰ï¼š</p><pre class="language-java" data-language="java"><code class="language-java">req<span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token string">"checkboxkey"</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>è·å–å¤é€‰æ¡†<span class="token punctuation">(</span>checkboxç»„ä»¶<span class="token punctuation">)</span>ä¸­çš„å€¼ï¼Œè¿”å›ä¸€ä¸ª<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span>ã€‚</code></pre></li><li><p>è·å–æ‰€æœ‰æäº¤æ•°æ®çš„key</p><pre class="language-java" data-language="java"><code class="language-java">req<span class="token punctuation">.</span><span class="token function">getParameterNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>è·å–è¯·æ±‚ä¸­æ‰€æœ‰æ•°æ®çš„keyï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæšä¸¾ç±»å‹ã€‚</code></pre></li><li><p>ä½¿ç”¨Mapç»“æ„è·å–æäº¤æ•°æ®</p><pre class="language-java" data-language="java"><code class="language-java">req<span class="token punctuation">.</span><span class="token function">getParameterMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>è·å–è¯·æ±‚ä¸­æ‰€æœ‰çš„æ•°æ®å¹¶å­˜æ”¾åˆ°ä¸€ä¸ª<span class="token class-name">Map</span>ç»“æ„ä¸­ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª<span class="token class-name">Map</span>ï¼Œå…¶ä¸­keyä¸º<span class="token class-name">String</span>ç±»å‹valueä¸º<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span>ç±»å‹ã€‚</code></pre></li><li><p>è®¾ç½®è¯·æ±‚ç¼–ç </p><pre class="language-java" data-language="java"><code class="language-java">req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span></code></pre><p>è¯·æ±‚çš„æ•°æ®åŒ…åŸºäºå­—èŠ‚åœ¨ç½‘ç»œä¸Šä¼ è¾“ï¼ŒTomcatæ¥æ”¶åˆ°è¯·æ±‚çš„æ•°æ®åŒ…åä¼šå°†æ•°æ®åŒ…ä¸­çš„å­—èŠ‚è½¬æ¢ä¸ºå­—ç¬¦ã€‚åœ¨Tomcatä¸­ä½¿ç”¨çš„æ˜¯ISO-8859-1çš„å•å­—èŠ‚ç¼–ç å®Œæˆå­—èŠ‚ä¸å­—ç¬¦çš„è½¬æ¢ï¼Œæ‰€ä»¥æ•°æ®ä¸­å«æœ‰ä¸­æ–‡å°±ä¼šå‡ºç°ä¹±ç ï¼Œå¯ä»¥é€šè¿‡req.setCharacterEncoding(â€œutf-8â€)æ–¹æ³•æ¥å¯¹æäº¤çš„æ•°æ®æ ¹æ®æŒ‡å®šçš„ç¼–ç æ–¹å¼é‡æ–°åšç¼–ç å¤„ç†ã€‚</p></li></ul><h2 id="æ¡ˆä¾‹3-HTTPè¯·æ±‚">æ¡ˆä¾‹3:HTTPè¯·æ±‚</h2><p><strong>éœ€æ±‚ ï¼šè·å¾—å‰ç«¯å®¢æˆ·ç«¯è¡¨å•ä¸­è¯·æ±‚çš„æ•°æ®ä¿¡æ¯</strong></p><h3 id="å‰ç«¯ä»£ç ">å‰ç«¯ä»£ç </h3><h4 id="å¼€å‘formè¡¨å•æ³¨æ„äº‹é¡¹">å¼€å‘formè¡¨å•æ³¨æ„äº‹é¡¹</h4><ol><li><p>form ä¸æ˜¯from</p></li><li><p>formè¡¨å•å†…éƒ¨ä¸æ˜¯æ‰€æœ‰çš„æ ‡ç­¾ä¿¡æ¯éƒ½ä¼šæäº¤ ä¸€äº›è¾“å…¥ä¿¡æ¯  input select textarea â€¦ â€¦</p></li><li><p>æäº¤çš„æ ‡ç­¾å¿…é¡»å…·å¤‡<strong>nameå±æ€§</strong>  nameå±æ€§çš„ä½œç”¨æ˜¯è®©åå°åŒºåˆ†æ•°æ®  idä¾¿äºåœ¨å‰ç«¯åŒºåˆ†æ•°æ®</p></li><li><p>æäº¤çš„æ ‡ç­¾ä¸€èˆ¬éƒ½è¦å…·å¤‡<strong>valueå±æ€§</strong>  valueå±æ€§ç¡®å®šæˆ‘ä»¬è¦æäº¤çš„å…·ä½“çš„æ•°æ®</p></li><li><p>==get post==<a href="#get%E5%92%8Cpost%E7%9A%84%E5%8C%BA%E5%88%AB">åŒºåˆ«</a><br>getæ–¹å¼æ•°æ®æ˜¯é€šè¿‡URLæºå¸¦<br>æäº¤çš„æ•°æ®åªèƒ½æ˜¯æ–‡æœ¬<br>æäº¤çš„æ•°æ®é‡ä¸å¤§<br>getæ–¹å¼æäº¤çš„æ•°æ®ç›¸å¯¹ä¸å®‰å…¨</p><p>post å°†æ•°æ®å•ç‹¬æ‰“åŒ…æ”¾åˆ°è¯·æ±‚ä½“ä¸­<br>æäº¤çš„æ•°æ®å¯ä»¥æ˜¯æ–‡æœ¬å¯ä»¥æ˜¯å„ç§æ–‡ä»¶<br>æäº¤çš„æ•°æ®é‡ç†è®ºä¸Šæ²¡æœ‰ä¸Šé™<br>postæ–¹å¼æäº¤æ•°æ®ç›¸å¯¹å®‰å…¨</p></li></ol><p>==readonlyåªè¯»== ä¹Ÿæ˜¯ä¼šæäº¤æ•°æ®çš„<br>==hidden==  éšè— ä¹Ÿæ˜¯ä¼šæäº¤æ•°æ®<br>==disabled== ä¸å¯ç”¨ æ˜¾ç¤ºä½†æ˜¯ä¸æäº¤</p><p><strong>ä»£ç ï¼š</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token operator">&lt;</span>form method<span class="token operator">=</span><span class="token string">"get"</span> action<span class="token operator">=</span><span class="token string">"myServlet"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>table style<span class="token operator">=</span><span class="token string">"margin: 0px auto"</span> width<span class="token operator">=</span><span class="token string">"300px"</span> cellpadding<span class="token operator">=</span><span class="token string">"0px"</span> cellspacing<span class="token operator">=</span><span class="token string">"0px"</span> border<span class="token operator">=</span><span class="token string">"1px"</span><span class="token operator">></span>        <span class="token generics"><span class="token punctuation">&lt;</span>tr<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>td<span class="token punctuation">></span></span>ç”¨æˆ·å<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>td<span class="token punctuation">></span></span>                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"username"</span> id<span class="token operator">=</span><span class="token string">"in1"</span> value<span class="token operator">=</span><span class="token string">"12345"</span> disabled <span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>        <span class="token generics"><span class="token punctuation">&lt;</span>tr<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>td<span class="token punctuation">></span></span>å¯†ç <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>td<span class="token punctuation">></span></span>                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"password"</span> name<span class="token operator">=</span><span class="token string">"pwd"</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>        <span class="token generics"><span class="token punctuation">&lt;</span>tr<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>td<span class="token punctuation">></span></span>æ€§åˆ«<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>td<span class="token punctuation">></span></span>                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"gender"</span> value<span class="token operator">=</span><span class="token string">"1"</span> checked<span class="token operator">></span>ç”·                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"gender"</span> value<span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">></span>å¥³            <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>        <span class="token generics"><span class="token punctuation">&lt;</span>tr<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>td<span class="token punctuation">></span></span>çˆ±å¥½<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>td<span class="token punctuation">></span></span>                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> name<span class="token operator">=</span><span class="token string">"hobby"</span> value<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">></span>è“çƒ                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> name<span class="token operator">=</span><span class="token string">"hobby"</span> value<span class="token operator">=</span><span class="token string">"2"</span><span class="token operator">></span>è¶³çƒ                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> name<span class="token operator">=</span><span class="token string">"hobby"</span> value<span class="token operator">=</span><span class="token string">"3"</span><span class="token operator">></span>ç¾½æ¯›çƒ                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> name<span class="token operator">=</span><span class="token string">"hobby"</span> value<span class="token operator">=</span><span class="token string">"4"</span><span class="token operator">></span>ä¹’ä¹“çƒ            <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>        <span class="token generics"><span class="token punctuation">&lt;</span>tr<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>td<span class="token punctuation">></span></span>ä¸ªäººç®€ä»‹<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>td<span class="token punctuation">></span></span>                <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>æ–‡æœ¬åŸŸ åŒæ ‡ç­¾ é¡µé¢ä¸Šæ˜¾ç¤ºçš„æ–‡å­—æ˜¯åŒæ ‡ç­¾ä¸­çš„æ–‡æœ¬ ä¸æ˜¯valueå±æ€§                    æ–‡æœ¬åŸŸæäº¤çš„æ•°æ®ä¸æ˜¯valueå±æ€§å€¼<span class="token punctuation">,</span>æ˜¯åŒæ ‡ç­¾ä¸­çš„æ–‡æœ¬                <span class="token operator">--</span><span class="token operator">></span>                <span class="token operator">&lt;</span>textarea name<span class="token operator">=</span><span class="token string">"introduce"</span> <span class="token operator">></span>b<span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>        <span class="token generics"><span class="token punctuation">&lt;</span>tr<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>td<span class="token punctuation">></span></span>ç±è´¯<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>td<span class="token punctuation">></span></span>                <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>                select                optionæ²¡æœ‰å®šä¹‰valueå±æ€§ é‚£ä¹ˆå°±æäº¤optionä¸­é—´çš„æ–‡å­—<span class="token punctuation">(</span>ä¸æ¨è<span class="token punctuation">)</span>                <span class="token operator">--</span><span class="token operator">></span>                <span class="token operator">&lt;</span>select name<span class="token operator">=</span><span class="token string">"provience"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">></span>aäº¬<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>                    <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"2"</span><span class="token operator">></span>bæ´¥<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>                    <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"3"</span><span class="token operator">></span>cå†€<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>        <span class="token operator">&lt;</span>tr align<span class="token operator">=</span><span class="token string">"center"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>td colspan<span class="token operator">=</span><span class="token string">"2"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"æäº¤æ•°æ®"</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span></code></pre><p><strong>æ•ˆæœï¼š</strong></p><img src="JavaEE/20210803102738-20220507093630489.png" alt="image-20210803102513541" style="zoom: 50%;" /><h3 id="Servletä»£ç ">Servletä»£ç </h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// reqè·å–å‚æ•°</span>        <span class="token comment">// å¦‚æœ å‰ç«¯å‘è¿‡æ¥çš„æ•°æ®ç”±æ•°æ®åä½†æ˜¯æ²¡æœ‰å€¼, getParameterè¿”å›çš„æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²  ""</span>        <span class="token comment">// è·å–çš„å‚æ•°åœ¨æäº¤çš„æ•°æ®ä¸­åéƒ½æ²¡æœ‰,getParameterè¿”å›çš„æ˜¯null</span>        <span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"username:"</span><span class="token operator">+</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"password:"</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pwd"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"gender:"</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"gender"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// hobby=1&amp;hobby=2&amp;hobby=3 æƒ³è¦è·å¾—å¤šä¸ªåŒåçš„å‚æ•° getParameterValues è¿”å›çš„æ˜¯ä¸€ä¸ªStingæ•°ç»„</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hobbies <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token string">"hobby"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hobbies:"</span><span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>hobbies<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// textarea</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"introduce:"</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"introduce"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// select</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"provience:"</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"provience"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"___________________________"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å¦‚æœä¸çŸ¥é“å‚æ•°çš„åå­—?</span>        <span class="token comment">// è·å–æ‰€æœ‰çš„å‚æ•°å</span>        <span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> pNames <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameterNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>pNames<span class="token punctuation">.</span><span class="token function">hasMoreElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> pname <span class="token operator">=</span> pNames<span class="token punctuation">.</span><span class="token function">nextElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> pValues <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span>pname<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>pname<span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>pValues<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"________________________________"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Map</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span> pmap <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameterMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Set</span><span class="token operator">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">>></span> entries <span class="token operator">=</span> pmap<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span> entry <span class="token operator">:</span> entries<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œç»“æœï¼š</p><img src="JavaEE/20210803102814-20220507093630541.png" alt="image-20210803102714186" style="zoom:50%;" /><h2 id="3-HttpServletResponse">3. HttpServletResponse</h2><p>httpå“åº”éƒ¨åˆ†å¯ä»¥åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š<strong>å“åº”è¡Œï¼Œå“åº”å¤´ï¼Œå“åº”ä½“</strong></p><h3 id="å“åº”è¡Œ">å“åº”è¡Œ</h3><p><img src="JavaEE/20210803161928-20220507093630572.png" alt="image-20210803161927018"></p><p>å“åº”çŠ¶æ€ç åˆ—è¡¨</p><p><img src="JavaEE/20210803161950-20220507093630931.png" alt="image-20210803161950030"></p><h3 id="å“åº”å¤´">å“åº”å¤´</h3><p>Content-Typeï¼šå“åº”å†…å®¹çš„ç±»å‹(MIME)</p><p><img src="JavaEE/20210803162052-20220507093630775.png" alt="image-20210803162052600"></p><h3 id="å“åº”å®ä½“">å“åº”å®ä½“</h3><p>å³<strong>æœåŠ¡å™¨å“åº”å›æ¥çš„å†…å®¹</strong></p><p>â€‹HttpServletResponseå¯¹è±¡ä»£è¡¨æœåŠ¡å™¨çš„å“åº”ï¼Œå°è£…äº†å“åº”å®¢æˆ·ç«¯æµè§ˆå™¨çš„<strong>æµå¯¹è±¡</strong>ï¼Œä»¥åŠå‘å®¢æˆ·ç«¯æµè§ˆå™¨å“åº”çš„<strong>å“åº”å¤´ã€å“åº”æ•°æ®ã€å“åº”çŠ¶æ€ç ç­‰ä¿¡æ¯</strong>ã€‚</p><h4 id="ContentType-å“åº”è®¾ç½®">ContentType:å“åº”è®¾ç½®</h4><pre class="language-java" data-language="java"><code class="language-java">resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"MIME"</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>è¯¥æ–¹æ³•å¯é€šè¿‡<span class="token constant">MIME</span><span class="token operator">-</span><span class="token class-name">Type</span>è®¾ç½®å“åº”ç±»å‹ã€‚</code></pre><h6 id="MIME"><strong>MIME</strong></h6><p>å…¨ç§°æ˜¯<strong>Multipurpose Internet Mail Extensions</strong>ï¼Œå³å¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹ã€‚<br>è¿™æ˜¯HTTPåè®®ä¸­ç”¨æ¥å®šä¹‰æ–‡æ¡£æ€§è´¨åŠæ ¼å¼çš„æ ‡å‡†ã€‚å¯¹HTTPä¼ è¾“å†…å®¹ç±»å‹è¿›è¡Œäº†å…¨é¢å®šä¹‰ã€‚<br>æœåŠ¡å™¨é€šè¿‡MIMEå‘ŠçŸ¥å“åº”å†…å®¹ç±»å‹ï¼Œè€Œæµè§ˆå™¨åˆ™é€šè¿‡MIMEç±»å‹æ¥ç¡®å®šå¦‚ä½•å¤„ç†æ–‡æ¡£ã€‚</p><p><strong>HTTP content-type ç±»å‹è¡¨ï¼š</strong></p><p><a href="https://www.runoob.com/http/http-content-type.html">https://www.runoob.com/http/http-content-type.html</a></p><p><strong>å¸¸è§çš„åª’ä½“æ ¼å¼ç±»å‹å¦‚ä¸‹ï¼š</strong></p><ul><li>text/html ï¼š HTMLæ ¼å¼</li><li>text/plain ï¼šçº¯æ–‡æœ¬æ ¼å¼</li><li>text/xml ï¼š XMLæ ¼å¼</li><li>image/gif ï¼šgifå›¾ç‰‡æ ¼å¼</li><li>image/jpeg ï¼šjpgå›¾ç‰‡æ ¼å¼</li><li>image/pngï¼špngå›¾ç‰‡æ ¼å¼</li></ul><p>ä»¥applicationå¼€å¤´çš„åª’ä½“æ ¼å¼ç±»å‹ï¼š</p><ul><li>application/xhtml+xml ï¼šXHTMLæ ¼å¼</li><li>application/xmlï¼š XMLæ•°æ®æ ¼å¼</li><li>application/atom+xml ï¼šAtom XMLèšåˆæ ¼å¼</li><li>application/jsonï¼š JSONæ•°æ®æ ¼å¼</li><li>application/pdfï¼špdfæ ¼å¼</li><li>application/msword ï¼š Wordæ–‡æ¡£æ ¼å¼</li><li>application/octet-stream ï¼š äºŒè¿›åˆ¶æµæ•°æ®ï¼ˆå¦‚å¸¸è§çš„æ–‡ä»¶ä¸‹è½½ï¼‰</li><li>application/x-www-form-urlencoded ï¼š <form encType="">ä¸­é»˜è®¤çš„encTypeï¼Œformè¡¨å•æ•°æ®è¢«ç¼–ç ä¸ºkey/valueæ ¼å¼å‘é€åˆ°æœåŠ¡å™¨ï¼ˆè¡¨å•é»˜è®¤çš„æäº¤æ•°æ®çš„æ ¼å¼ï¼‰</li></ul><p>å¦å¤–ä¸€ç§å¸¸è§çš„åª’ä½“æ ¼å¼æ˜¯ä¸Šä¼ æ–‡ä»¶ä¹‹æ—¶ä½¿ç”¨çš„ï¼š</p><ul><li>multipart/form-data ï¼š éœ€è¦åœ¨è¡¨å•ä¸­è¿›è¡Œæ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨è¯¥æ ¼å¼</li></ul><p><strong>å¸¸è§çš„å­—èŠ‚å‹å“åº”ï¼š</strong></p><ul><li><p>image/jpegï¼šå›¾ç‰‡ç±»å‹ä¸ºjpegæˆ–jpgæ ¼å¼ã€‚</p></li><li><p>image/gif: å›¾ç‰‡ç±»å‹ä¸ºgifæ ¼å¼ã€‚</p></li></ul><p><strong>è®¾ç½®å“åº”ç¼–ç </strong></p><pre class="language-java" data-language="java"><code class="language-java">response<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è®¾ç½®æœåŠ¡ç«¯ä¸ºæµè§ˆå™¨äº§ç”Ÿå“åº”çš„å“åº”ç¼–ç ï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ®æ­¤ç¼–ç å°†å“åº”å†…å®¹çš„å­—ç¬¦è½¬æ¢ä¸ºå­—èŠ‚ã€‚åŒæ—¶å®¢æˆ·ç«¯æµè§ˆå™¨ä¼šæ ¹æ®æ­¤ç¼–ç æ–¹å¼æ˜¾ç¤ºå“åº”å†…å®¹ã€‚</p><p><strong>åœ¨å“åº”ä¸­æ·»åŠ é™„åŠ ä¿¡æ¯ï¼ˆæ–‡ä»¶ä¸‹è½½ï¼‰</strong></p><p>åœ¨å®ç°æ–‡ä»¶ä¸‹è½½æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹å“åº”å¤´ï¼Œæ·»åŠ é™„åŠ ä¿¡æ¯ã€‚</p><pre class="language-java" data-language="java"><code class="language-java">response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span>   <span class="token string">"attachment; filename="</span><span class="token operator">+</span>æ–‡ä»¶å<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>==Content-Disposition:attachment==</p><p>è¯¥é™„åŠ ä¿¡æ¯è¡¨ç¤ºä½œä¸ºå¯¹ä¸‹è½½æ–‡ä»¶çš„ä¸€ä¸ªæ ‡è¯†å­—æ®µã€‚ä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºè€Œæ˜¯ç›´æ¥åšä¸‹è½½å¤„ç†ã€‚</p><p>filename=æ–‡ä»¶å,è¡¨ç¤ºæŒ‡å®šä¸‹è½½æ–‡ä»¶çš„æ–‡ä»¶åã€‚</p><p>è§£å†³æ–‡ä»¶åä¸­æ–‡ä¹±ç é—®é¢˜:</p><pre class="language-java" data-language="java"><code class="language-java">resp<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span><span class="token string">"attachment;filename="</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"iso-8859-1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="æµ‹è¯•ä»£ç ">æµ‹è¯•ä»£ç </h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServlet2</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// è®¾ç½®å“åº”ç </span>        <span class="token comment">//resp.setStatus(500);</span>        <span class="token comment">//resp.setStatus(405, "request method not supported");</span>        <span class="token comment">// è®¾ç½®å“åº”å¤´</span>        <span class="token comment">//resp.setHeader("Date","2022-11-11");</span>        <span class="token comment">// è‡ªå®šä¹‰å¤´</span>        <span class="token comment">// resp.setHeader("aaa", "bbb");</span>        <span class="token comment">// é«˜é€Ÿæµè§ˆå™¨å“åº”çš„æ•°æ®æ˜¯ä»€ä¹ˆ? æµè§ˆå™¨æ ¹æ®æ­¤å¤´å†³å®š æ•°æ®å¦‚ä½•åº”ç”¨</span>        <span class="token comment">// è®¾ç½®MIMEç±»å‹ json  xml æ–‡ä»¶ä¸‹è½½  ... ...</span>        <span class="token comment">// resp.setHeader("content-type", "text/css");</span>        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ä¸“é—¨ç”¨äºè®¾ç½®Content-Type å“åº”å¤´</span>        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;h1>this is tag h1&lt;/h1>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="ä¹±ç é—®é¢˜">ä¹±ç é—®é¢˜</h2><h3 id="1-æ§åˆ¶å°ä¹±ç ">1 æ§åˆ¶å°ä¹±ç </h3><p>è®¾ç½®Tomcatä¸­ confä¸‹logging.propertiesä¸­æ‰€æœ‰çš„UTF-8ç¼–ç ä¸ºGBKå³å¯</p><h3 id="2-postè¯·æ±‚ä¹±ç ">2 postè¯·æ±‚ä¹±ç </h3><p>é€šè¿‡HttpServletRequestè®¾ç½®è¯·æ±‚ç¼–ç </p><pre class="language-java" data-language="java"><code class="language-java">req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="3-getè¯·æ±‚ä¹±ç ">3 getè¯·æ±‚ä¹±ç </h3><p>éœ€è¦æ‰‹åŠ¨è¿›è¡Œç¼–ç è§£ç ,æˆ–è€…è®¾ç½®tomcatä¸­çš„server.xmlä¸­çš„URIç¼–ç .tomcat9å·²ç»è§£å†³äº†è¯¥é—®é¢˜</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span>   <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8080<span class="token punctuation">"</span></span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>HTTP/1.1<span class="token punctuation">"</span></span>    <span class="token attr-name">connectionTimeout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20000<span class="token punctuation">"</span></span>    <span class="token attr-name">redirectPort</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8443<span class="token punctuation">"</span></span> <span class="token attr-name">URIEncoding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span>  <span class="token punctuation">/></span></span></code></pre><h3 id="4-å“åº”ä¹±ç ">4 å“åº”ä¹±ç </h3><p>é€šè¿‡HttpServletResponseè®¾ç½®å“åº”ç¼–ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//ä»¥UTF-8ç¼–ç å¤„ç†æ•°æ®</span>resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å“åº”å¤´,ä»¥ä¾¿æµè§ˆå™¨çŸ¥é“ä»¥ä½•ç§ç¼–ç è§£ææ•°æ®</span>resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="4-servletç”Ÿå‘½å‘¨æœŸ">4. servletç”Ÿå‘½å‘¨æœŸ</h2><h3 id="å››ä¸ªé˜¶æ®µ">å››ä¸ªé˜¶æ®µ</h3><p>Servletçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç”±å®¹å™¨ç®¡ç†çš„ï¼Œåˆ†åˆ«ç»å†å››ä¸ªé˜¶æ®µï¼š</p><table><thead><tr><th>é˜¶æ®µ</th><th>æ¬¡æ•°</th><th>æ—¶æœº</th></tr></thead><tbody><tr><td>åˆ›å»º new</td><td>1æ¬¡</td><td>ç¬¬ä¸€æ¬¡è¯·æ±‚</td></tr><tr><td>åˆå§‹åŒ– init()</td><td>1æ¬¡</td><td>å®ä¾‹åŒ–ä¹‹å</td></tr><tr><td>æ‰§è¡ŒæœåŠ¡ service()</td><td>å¤šæ¬¡</td><td>æ¯æ¬¡è¯·æ±‚</td></tr><tr><td>é”€æ¯ destroy()</td><td>1æ¬¡</td><td>åœæ­¢æœåŠ¡</td></tr></tbody></table><p>å½“å®¢æˆ·ç«¯æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚Servletæ—¶ï¼Œå®¹å™¨ä¼šå®ä¾‹åŒ–è¿™ä¸ªServletï¼Œç„¶åè°ƒç”¨ä¸€æ¬¡initæ–¹æ³•ï¼Œå¹¶åœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œserviceæ–¹æ³•å¤„ç†è¯·æ±‚ã€‚serviceæ–¹æ³•æ‰§è¡Œå®Œæ¯•åå®¹å™¨ä¸ä¼šé”€æ¯è¿™ä¸ªServletè€Œæ˜¯åšç¼“å­˜å¤„ç†ï¼Œå½“å®¢æˆ·ç«¯æµè§ˆå™¨å†æ¬¡è¯·æ±‚è¿™ä¸ªServletæ—¶ï¼Œå®¹å™¨ä¼šä»ç¼“å­˜ä¸­ç›´æ¥æ‰¾åˆ°è¿™ä¸ªServletå¯¹è±¡ï¼Œå¹¶å†ä¸€æ¬¡åœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡ŒServiceæ–¹æ³•ã€‚å½“å®¹å™¨åœ¨é”€æ¯Servletä¹‹å‰å¯¹è°ƒç”¨ä¸€æ¬¡destoryæ–¹æ³•ã€‚</p><p><strong>åœ¨Servletä¸­æˆ‘ä»¬ä¸€èˆ¬ä¸è¦è½»æ˜“ä½¿ç”¨æˆå‘˜å˜é‡!!! å¯èƒ½ä¼šé€ æˆçº¿ç¨‹å®‰å…¨é—®é¢˜</strong></p><p><strong>å¦‚æœè¦ä½¿ç”¨çš„è¯,åº”è¯¥å°½é‡é¿å…å¯¹æˆå‘˜å˜é‡äº§ç”Ÿä¿®æ”¹</strong></p><p><strong>å¦‚æœè¦äº§ç”Ÿä¿®æ”¹æˆ‘ä»¬åº”è¯¥æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜</strong></p><p><strong>å¦‚æœæˆ‘ä»¬è‡ªå·±æ·»åŠ çº¿ç¨‹å®‰å…¨ç¼–ç å¤„ç†,ä¼šä¸¥é‡å½±å“æ•ˆç‡</strong></p><p><strong>ç»¼ä¸Šæ‰€è¿°:åŸåˆ™,èƒ½ä¸ç”¨æˆå‘˜å˜é‡å°±ä¸ç”¨!!!</strong></p><p>servletä»£ç ï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServlet4</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æˆå‘˜å˜é‡</span>    <span class="token keyword">public</span> <span class="token class-name">MyServlet4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token punctuation">&#123;</span><span class="token comment">// æ„é€ ä¸€ä¸ªServletå¯¹è±¡çš„æ–¹æ³•</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MyServlet4 Constructor invoked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span><span class="token comment">// åˆå§‹åŒ–</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MyServlet4 init invoked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// æ‰§è¡ŒæœåŠ¡</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MyServlet4 service invoked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// é”€æ¯</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MyServlet4 destory invoked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>é…ç½®ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>myServlet4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.mashibing.servlet.MyServlet4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">></span></span>6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>myServlet4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/myServlet4.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre><p>â€‹å¤šæ¬¡è¯·æ±‚servletå¹¶æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºå³å¯å°è¯ä¸Šè¿°ç»“è®º,å€¼å¾—æ³¨æ„çš„æ˜¯,å¦‚æœéœ€è¦Servletåœ¨æœåŠ¡å¯åŠ¨æ—¶å°±å®ä¾‹åŒ–å¹¶åˆå§‹åŒ–,æˆ‘ä»¬å¯ä»¥åœ¨servletçš„é…ç½®ä¸­æ·»åŠ load-on-startupé…ç½®å¯åŠ¨é¡ºåº,é…ç½®çš„æ•°å­—ä¸ºå¯åŠ¨é¡ºåº,åº”é¿å…å†²çªä¸”åº”**&gt;6**</p><p><img src="JavaEE/20210803205411-20220507093631302.png" alt="image-20210803205409578"></p><p><strong>Servletå¤„ç†è¯·æ±‚çš„è¿‡ç¨‹</strong></p><p>â€‹å½“æµè§ˆå™¨åŸºäºgetæ–¹å¼è¯·æ±‚æˆ‘ä»¬åˆ›å»ºServletæ—¶ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰çš„Servletä¸­çš„doGetæ–¹æ³•ä¼šè¢«æ‰§è¡Œã€‚doGetæ–¹æ³•èƒ½å¤Ÿè¢«æ‰§è¡Œå¹¶å¤„ç†getè¯·æ±‚çš„åŸå› æ˜¯ï¼Œå®¹å™¨åœ¨å¯åŠ¨æ—¶ä¼šè§£æwebå·¥ç¨‹ä¸­WEB-INFç›®å½•ä¸­çš„web.xmlæ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­æˆ‘ä»¬é…ç½®äº†Servletä¸URIçš„ç»‘å®šï¼Œå®¹å™¨é€šè¿‡å¯¹è¯·æ±‚çš„è§£æå¯ä»¥è·å–è¯·æ±‚èµ„æºçš„URIï¼Œç„¶åæ‰¾åˆ°ä¸è¯¥URIç»‘å®šçš„Servletå¹¶åšå®ä¾‹åŒ–å¤„ç†(æ³¨æ„ï¼šåªå®ä¾‹åŒ–ä¸€æ¬¡ï¼Œå¦‚æœåœ¨ç¼“å­˜ä¸­èƒ½å¤Ÿæ‰¾åˆ°è¿™ä¸ªServletå°±ä¸ä¼šå†åšæ¬¡å®ä¾‹åŒ–å¤„ç†)ã€‚åœ¨å®ä¾‹åŒ–æ—¶ä¼šä½¿ç”¨Servletæ¥å£ç±»å‹ä½œä¸ºå¼•ç”¨ç±»å‹çš„å®šä¹‰ï¼Œå¹¶è°ƒç”¨ä¸€æ¬¡initæ–¹æ³•ï¼Œç”±äºHttpServletä¸­é‡å†™äº†è¯¥æ–¹æ³•æ‰€ä»¥æœ€ç»ˆæ‰§è¡Œçš„æ˜¯HttpServletä¸­initæ–¹æ³•(HttpServletä¸­çš„Initæ–¹æ³•æ˜¯ä¸€ä¸ªç©ºçš„æ–¹æ³•ä½“)ï¼Œç„¶ååœ¨æ–°çš„çº¿ç¨‹ä¸­è°ƒç”¨serviceæ–¹æ³•ã€‚ç”±äºåœ¨HttpServletä¸­é‡å†™äº†Serviceæ–¹æ³•æ‰€ä»¥æœ€ç»ˆæ‰§è¡Œçš„æ˜¯HttpServletä¸­çš„serviceæ–¹æ³•ã€‚åœ¨serviceæ–¹æ³•ä¸­é€šè¿‡request.getMethod()è·å–åˆ°è¯·æ±‚æ–¹å¼è¿›è¡Œåˆ¤æ–­å¦‚æœæ˜¯Getæ–¹å¼è¯·æ±‚å°±æ‰§è¡ŒdoGetæ–¹æ³•ï¼Œå¦‚æœæ˜¯POSTè¯·æ±‚å°±æ‰§è¡ŒdoPostæ–¹æ³•ã€‚å¦‚æœæ˜¯åŸºäºGETæ–¹å¼æäº¤çš„ï¼Œå¹¶ä¸”åœ¨æˆ‘ä»¬è‡ªå®šä¹‰çš„Servletä¸­åˆé‡å†™äº†HttpServletä¸­çš„doGetæ–¹æ³•ï¼Œé‚£ä¹ˆæœ€ç»ˆä¼šæ ¹æ®Javaçš„å¤šæ€ç‰¹æ€§è½¬è€Œæ‰§è¡Œæˆ‘ä»¬è‡ªå®šä¹‰çš„Servletä¸­çš„doGetæ–¹æ³•ã€‚</p><p><img src="JavaEE/20210803205435-20220507093630830.png" alt="image-20210803205435158"></p><ul><li>è€ç¨‹åºå‘˜å–œæ¬¢é‡å†™doGet()å’ŒdoPost()æ–¹æ³• ç„¶åæŒ‘ä¸€ä¸ªæ–¹æ³•é‡Œé¢ç›´æ¥è°ƒç”¨å¦ä¸€ä¸ªæ–¹æ³•ï¼Œå› ä¸ºä¸¤ä¸ªæ–¹æ³•å¾ˆç›¸ä¼¼ã€‚</li><li>ä½†æ˜¯åˆå¯ä»¥ç›´æ¥é‡å†™serviceï¼Œå¯ä»¥åŒæ—¶å¤„ç†getå’Œpost</li></ul><h2 id="5-ServletContextå’ŒServletConfig">5. ServletContextå’ŒServletConfig</h2><h3 id="ServletContext-application">ServletContext(application)</h3><h4 id="å®šä¹‰-2">å®šä¹‰</h4><p>ServletContextå®˜æ–¹å«Servletä¸Šä¸‹æ–‡ã€‚æœåŠ¡å™¨ä¼šä¸ºæ¯ä¸€ä¸ªWebåº”ç”¨åˆ›å»ºä¸€ä¸ªServletContextå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å…¨å±€å”¯ä¸€ï¼Œè€Œä¸”Webåº”ç”¨ä¸­çš„æ‰€æœ‰Servletéƒ½å…±äº«è¿™ä¸ªå¯¹è±¡ã€‚æ‰€ä»¥å«å…¨å±€åº”ç”¨ç¨‹åºå…±äº«å¯¹è±¡</p><img src="JavaEE/20210804094215-20220507093631574.png" alt="image-20210804094215771" style="zoom:67%;" /><h4 id="ä½œç”¨">ä½œç”¨</h4><ul><li>ç›¸å¯¹è·¯å¾„è½¬ç»å¯¹è·¯å¾„</li><li>è·å–å®¹å™¨çš„é™„åŠ ä¿¡æ¯</li><li>è¯»å–é…ç½®ä¿¡æ¯</li><li>å…¨å±€å®¹å™¨</li></ul><h4 id="æ“ä½œ">æ“ä½œ</h4><ul><li><p>è·å–é¡¹ç›®çš„éƒ¨ç½²å<br>==context.getContextPath()==</p></li><li><p>ç›¸å¯¹è·¯å¾„è½¬ç»å¯¹è·¯å¾„(æ–‡ä»¶ä¸Šä¼ ä¸‹è½½æ—¶éœ€è¦æ³¨æ„)</p><p>==context.getRealPath(â€œpathâ€)==</p><p>è¯¥æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„ï¼Œåœ¨æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½æ—¶éœ€è¦ç”¨åˆ°è¯¥æ–¹æ³•åšè·¯å¾„çš„è½¬æ¢ã€‚</p></li><li><p>è·å–å®¹å™¨çš„é™„åŠ ä¿¡æ¯</p><p>==servletContext.getServerInfo()==</p></li><li><p>è¿”å›Servletå®¹å™¨çš„åç§°å’Œç‰ˆæœ¬å·</p><ul><li><p>è¿”å›Servletå®¹å™¨æ‰€æ”¯æŒServletçš„ä¸»ç‰ˆæœ¬å·</p><p>==servletContext.getMajorVersion()==</p></li><li><p>è¿”å›Servletå®¹å™¨æ‰€æ”¯æŒServletçš„å‰¯ç‰ˆæœ¬å·</p><p>==servletContext.getMinorVersion()==</p></li></ul></li><li><p>è·å–web.xmlæ–‡ä»¶ä¸­çš„ä¿¡æ¯</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>key<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>value<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span></code></pre><ul><li><p>è¯»å–web.xmlæ–‡ä»¶ä¸­<context-param>æ ‡ç­¾ä¸­çš„é…ç½®ä¿¡æ¯</p><p>==servletContext.getInitParameter(â€œkeyâ€)==</p></li><li><p>è¯»å–web.xmlæ–‡ä»¶ä¸­æ‰€æœ‰param-nameæ ‡ç­¾ä¸­çš„å€¼ã€‚</p><p>==servletContext.getInitParameterNames()==</p></li></ul></li><li><p>å…¨å±€å®¹å™¨</p><ul><li><p>å‘å…¨å±€å®¹å™¨ä¸­å­˜æ”¾æ•°æ®ã€‚</p><p>==servletContext.setAttribute(â€œkeyâ€,ObjectValue)==</p></li><li><p>ä»å…¨å±€å®¹å™¨ä¸­è·å–æ•°æ®ã€‚</p><p>==servletContext.getAttribute(â€œkeyâ€)==</p></li><li><p>æ ¹æ®keyåˆ é™¤å…¨å±€å®¹å™¨ä¸­çš„valueã€‚</p><p>==servletContext.removeAttribute(â€œkeyâ€)==</p></li></ul></li></ul><h5 id="æµ‹è¯•ä»£ç ï¼š">æµ‹è¯•ä»£ç ï¼š</h5><p><strong>xmlé…ç½®</strong></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>username<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>mashibing<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>123456<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>servlet1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.msb.testServlet.Servlet1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>servlet1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/servlet1.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre><p><strong>servlet</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet1</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//1 é€šè¿‡reqè·å–Servletå¯¹è±¡</span>        <span class="token class-name">ServletContext</span> servletContext1 <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//é€šè¿‡ç»§æ‰¿çš„æ–¹æ³•è·å–Servletå¯¹è±¡</span>        <span class="token class-name">ServletContext</span> servletContext2 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ¯”è¾ƒä¸¤ç§è·å–æ–¹æ³•è·å–çš„å¯¹è±¡</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>servletContext1<span class="token operator">==</span>servletContext2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2 è·å–éƒ¨ç½²å</span>        <span class="token class-name">String</span> contextPath <span class="token operator">=</span> servletContext1<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"contextPath"</span><span class="token operator">+</span>contextPath<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3 å°†ä¸€ä¸ªç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºé¡¹ç›®çš„ç»å¯¹è·¯å¾„</span>        <span class="token class-name">String</span> fileUpload <span class="token operator">=</span> servletContext1<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"fileUpload"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fileUpload<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//4 è·å–å®¹å™¨çš„é™„åŠ ä¿¡æ¯</span>        <span class="token class-name">String</span> serverInfo <span class="token operator">=</span> servletContext1<span class="token punctuation">.</span><span class="token function">getServerInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>serverInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//5 è·å–Servletå®¹å™¨çš„åç§°å’Œç‰ˆæœ¬å·</span>        <span class="token comment">//ä¸»ç‰ˆæœ¬å·</span>        <span class="token keyword">int</span> majorVersion <span class="token operator">=</span> servletContext1<span class="token punctuation">.</span><span class="token function">getMajorVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å‰¯ç‰ˆæœ¬å·</span>        <span class="token keyword">int</span> minorVersion <span class="token operator">=</span> servletContext1<span class="token punctuation">.</span><span class="token function">getMinorVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"majorVersion"</span><span class="token operator">+</span>majorVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"minorVersion"</span><span class="token operator">+</span>minorVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//6 è¯»å–web.xmlæ–‡ä»¶ä¿¡æ¯</span>        <span class="token comment">//è·å–é…ç½®çš„å…¨å±€åˆå§‹ä¿¡æ¯</span>        <span class="token class-name">String</span> username <span class="token operator">=</span> servletContext1<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> password <span class="token operator">=</span> servletContext1<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token operator">+</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token operator">+</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//é…ç½®ä¿¡æ¯åç§°æœªçŸ¥æƒ…å†µä¸‹ è·å–å…¨å±€åˆå§‹ä¿¡æ¯</span>        <span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> pNames <span class="token operator">=</span> servletContext1<span class="token punctuation">.</span><span class="token function">getInitParameterNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>pNames<span class="token punctuation">.</span><span class="token function">hasMoreElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> e <span class="token operator">=</span> pNames<span class="token punctuation">.</span><span class="token function">nextElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span> servletContext1<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//7 å‘ServletContextå¯¹è±¡ä¸­å¢åŠ æ•°æ®åŸŸå¯¹è±¡</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span><span class="token string">"æå››"</span><span class="token punctuation">,</span><span class="token string">"ç‹æ­¦"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        servletContext1<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        servletContext1<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"gender"</span><span class="token punctuation">,</span><span class="token string">"boy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//getAttributeä¹Ÿå¯ä»¥è·å¾—åˆå§‹ä¿¡æ¯å¯¹è±¡</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> servletContext1<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> gender <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> servletContext1<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"gender"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æµ‹è¯•ç»“æœ</p><p><img src="JavaEE/20210804112525-20220507093631140.png" alt="image-20210804112522391"></p><h4 id="ç”Ÿå‘½å‘¨æœŸ">ç”Ÿå‘½å‘¨æœŸ</h4><p>â€‹å½“å®¹å™¨å¯åŠ¨æ˜¯ä¼šåˆ›å»ºServletContextå¯¹è±¡å¹¶ä¸€ç›´ç¼“å­˜è¯¥å¯¹è±¡ï¼ŒçŸ¥é“å®¹å™¨å…³é—­åè¯¥å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»“æŸã€‚ServletContextå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸéå¸¸é•¿ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨å…¨å±€å®¹å™¨æ—¶ä¸å»ºè®®å­˜æ”¾ä¸šåŠ¡æ•°æ®</p><h3 id="ServletConfig">ServletConfig</h3><h4 id="å®šä¹‰-3">å®šä¹‰</h4><p>ServletConfigå¯¹è±¡å¯¹åº”web.xmlæ–‡ä»¶ä¸­çš„<servlet>èŠ‚ç‚¹ã€‚å½“Tomcatåˆå§‹åŒ–ä¸€ä¸ªServletæ—¶ï¼Œä¼šå°†è¯¥Servletçš„é…ç½®ä¿¡æ¯ï¼Œå°è£…åˆ°ä¸€ä¸ªServletConfigå¯¹è±¡ä¸­ã€‚</p><h4 id="æ“ä½œ-2">æ“ä½œ</h4><p>æˆ‘ä»¬é€šè¿‡Configå¯¹è±¡è¯»å–servletèŠ‚ç‚¹ä¸­çš„é…ç½®ä¿¡æ¯</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>servletName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>servletClass<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>key<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>value<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span></code></pre><ul><li><p>è¯»å–web.xmlæ–‡ä»¶ä¸­<servlet>æ ‡ç­¾ä¸­<init-param>æ ‡ç­¾ä¸­çš„é…ç½®ä¿¡æ¯ã€‚</p><p>==servletConfig.getInitParameter(â€œkeyâ€);==</p></li><li><p>è¯»å–web.xmlæ–‡ä»¶ä¸­å½“å‰<servlet>æ ‡ç­¾ä¸­æ‰€æœ‰<init-param>æ ‡ç­¾ä¸­çš„å€¼ã€‚</p><p>==servletConfig.getInitParameterNames();==</p></li></ul><h5 id="æµ‹è¯•ä»£ç -2">æµ‹è¯•ä»£ç </h5><p><strong>xmlé…ç½®</strong></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>servlet3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.msb.testServlet.Servlet3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>brand<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>ASUS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>screen<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>ä¸‰æ˜Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>servlet4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.msb.testServlet.Servlet4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>pinpai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>è”æƒ³<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>pingmu<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>äº¬ä¸œæ–¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>servlet3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/servlet3.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>servlet4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/servlet4.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre><p><strong>servlet</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet3</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ServletConfig</span> servletConfig <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>servletConfig<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"brand"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>servletConfig<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"screen"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet4</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ServletConfig</span> servletConfig <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>servletConfig<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"pinpai"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>servletConfig<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"pingmu"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="6-URLçš„åŒ¹é…è§„åˆ™">6. URLçš„åŒ¹é…è§„åˆ™</h2><h3 id="ç²¾ç¡®åŒ¹é…">ç²¾ç¡®åŒ¹é…</h3><p>ç²¾ç¡®åŒ¹é…æ˜¯æŒ‡<url-pattern>ä¸­é…ç½®çš„å€¼å¿…é¡»ä¸urlå®Œå…¨ç²¾ç¡®åŒ¹é…ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>demoServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/demo.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre><p><a href="http://localhost:8888/demo/demo.do">http://localhost:8888/demo/demo.do</a> åŒ¹é…</p><p><a href="http://localhost:8888/demo/suibian/demo.do">http://localhost:8888/demo/suibian/demo.do</a> ä¸åŒ¹é…</p><h3 id="æ‰©å±•ååŒ¹é…">æ‰©å±•ååŒ¹é…</h3><p>åœ¨<url-pattern>å…è®¸ä½¿ç”¨ç»Ÿé…ç¬¦â€œ<em>â€ä½œä¸ºåŒ¹é…è§„åˆ™ï¼Œâ€œ</em>â€è¡¨ç¤ºåŒ¹é…ä»»æ„å­—ç¬¦ã€‚åœ¨æ‰©å±•ååŒ¹é…ä¸­åªè¦æ‰©å±•åç›¸åŒéƒ½ä¼šè¢«åŒ¹é…å’Œè·¯å¾„æ— å…³ã€‚æ³¨æ„ï¼Œåœ¨ä½¿ç”¨æ‰©å±•ååŒ¹é…æ—¶åœ¨<url-pattern>ä¸­ä¸èƒ½ä½¿ç”¨â€œ/â€ï¼Œå¦åˆ™å®¹å™¨å¯åŠ¨å°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>demoServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre><p><a href="http://localhost:8888/demo/abc.do">http://localhost:8888/demo/abc.do</a> åŒ¹é…</p><p><a href="http://localhost:8888/demo/suibian/haha.do">http://localhost:8888/demo/suibian/haha.do</a> åŒ¹é…</p><p><a href="http://localhost:8888/demo/abc">http://localhost:8888/demo/abc</a> ä¸åŒ¹é…</p><h3 id="è·¯å¾„åŒ¹é…">è·¯å¾„åŒ¹é…</h3><p>æ ¹æ®è¯·æ±‚è·¯å¾„è¿›è¡ŒåŒ¹é…ï¼Œåœ¨è¯·æ±‚ä¸­åªè¦åŒ…å«è¯¥è·¯å¾„éƒ½åŒ¹é…ï¼Œâ€œ*â€è¡¨ç¤ºä»»æ„è·¯å¾„ä»¥åŠå­è·¯å¾„</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>demoServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/suibian/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre><p><a href="http://localhost:8888/demo/suibian/haha.do">http://localhost:8888/demo/suibian/haha.do</a> åŒ¹é…</p><p><a href="http://localhost:8888/demo/suibian/hehe/haha.do">http://localhost:8888/demo/suibian/hehe/haha.do</a> åŒ¹é…</p><p><a href="http://localhost:8888/demo/hehe/heihei.do">http://localhost:8888/demo/hehe/heihei.do</a> ä¸åŒ¹é…</p><h3 id="ä»»æ„åŒ¹é…">ä»»æ„åŒ¹é…</h3><p>åŒ¹é…â€œ/ åŒ¹é…æ‰€æœ‰ä½†ä¸åŒ…æ‹¬JSPé¡µé¢</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span></code></pre><p><a href="http://localhost:8888/demo/suibian.do%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/suibian.doåŒ¹é…</a></p><p><a href="http://localhost:8888/demo/addUser.html%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/addUser.htmlåŒ¹é…</a></p><p><a href="http://localhost:8888/demo/css/view.css%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/css/view.cssåŒ¹é…</a></p><p><a href="http://localhost:8888/demo/addUser.jsp%E4%B8%8D%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/addUser.jspä¸åŒ¹é…</a></p><p><a href="http://localhost:8888/demo/user/addUser.jsp%E4%B8%8D%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/user/addUser.jspä¸åŒ¹é…</a></p><h3 id="åŒ¹é…æ‰€æœ‰">åŒ¹é…æ‰€æœ‰</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span></code></pre><p><a href="http://localhost:8888/demo/suibian.do%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/suibian.doåŒ¹é…</a></p><p><a href="http://localhost:8888/demo/addUser.html%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/addUser.htmlåŒ¹é…</a></p><p><a href="http://localhost:8888/demo/suibian/suibian.do%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/suibian/suibian.doåŒ¹é…</a></p><h3 id="ä¼˜å…ˆé¡ºåº">ä¼˜å…ˆé¡ºåº</h3><p>å½“ä¸€ä¸ªurlä¸å¤šä¸ªServletçš„åŒ¹é…è§„åˆ™å¯ä»¥åŒ¹é…æ—¶ï¼Œåˆ™æŒ‰ç…§ â€œ ç²¾ç¡®è·¯å¾„ &gt; æœ€é•¿è·¯å¾„ &gt;æ‰©å±•åâ€è¿™æ ·çš„ä¼˜å…ˆçº§åŒ¹é…åˆ°å¯¹åº”çš„Servletã€‚</p><h4 id="æ¡ˆä¾‹åˆ†æ">æ¡ˆä¾‹åˆ†æ</h4><p>Servlet1æ˜ å°„åˆ° /abc/*</p><p>Servlet2æ˜ å°„åˆ° /*</p><p>Servlet3æ˜ å°„åˆ° /abc</p><p>Servlet4æ˜ å°„åˆ° *.do</p><p>å½“è¯·æ±‚URLä¸ºâ€œ/abc/a.htmlâ€ï¼Œâ€œ/abc/<em>â€å’Œâ€œ/</em>â€éƒ½åŒ¹é…ï¼ŒServletå¼•æ“å°†è°ƒç”¨Servlet1ã€‚</p><p>å½“è¯·æ±‚URLä¸ºâ€œ/abcâ€æ—¶ï¼Œâ€œ/abc/*â€å’Œâ€œ/abcâ€éƒ½åŒ¹é…ï¼ŒServletå¼•æ“å°†è°ƒç”¨Servlet3ã€‚</p><p>å½“è¯·æ±‚URLä¸ºâ€œ/abc/a.doâ€æ—¶ï¼Œâ€œ/abc/<em>â€å’Œâ€œ</em>.doâ€éƒ½åŒ¹é…ï¼ŒServletå¼•æ“å°†è°ƒç”¨Servlet1ã€‚</p><p>å½“è¯·æ±‚URLä¸ºâ€œ/a.doâ€æ—¶ï¼Œâ€œ/<em>â€å’Œâ€œ</em>.doâ€éƒ½åŒ¹é…ï¼ŒServletå¼•æ“å°†è°ƒç”¨Servlet2ã€‚</p><p>å½“è¯·æ±‚URLä¸ºâ€œ/xxx/yyy/a.doâ€æ—¶ï¼Œâ€œ/<em>â€å’Œâ€œ</em>.doâ€éƒ½åŒ¹é…ï¼ŒServletå¼•æ“å°†è°ƒç”¨Servlet2ã€‚</p><h3 id="URLæ˜ å°„æ–¹å¼">URLæ˜ å°„æ–¹å¼</h3><p>åœ¨web.xmlæ–‡ä»¶ä¸­æ”¯æŒå°†å¤šä¸ªURLæ˜ å°„åˆ°ä¸€ä¸ªServletä¸­ï¼Œä½†æ˜¯ç›¸åŒçš„URLä¸èƒ½åŒæ—¶æ˜ å°„åˆ°ä¸¤ä¸ªServletä¸­ã€‚</p><h4 id="æ–¹å¼ä¸€">æ–¹å¼ä¸€</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>demoServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/suibian/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre><h4 id="æ–¹å¼äºŒ">æ–¹å¼äºŒ</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>demoServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/suibian/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>demoServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre><h2 id="7-æ³¨è§£å¼€å‘">7. æ³¨è§£å¼€å‘</h2><p><strong>åŸºäºæ³¨è§£å¼å¼€å‘Servlet</strong></p><p>â€‹åœ¨Servlet3.0ä»¥åŠä¹‹åçš„ç‰ˆæœ¬ä¸­æ”¯æŒæ³¨è§£å¼å¼€å‘Servletã€‚å¯¹äºServletçš„é…ç½®ä¸åœ¨ä¾èµ–äºweb.xmlé…ç½®æ–‡ä»¶è€Œæ˜¯ä½¿ç”¨@WebServletå°†ä¸€ä¸ªç»§æ‰¿äºjavax.servlet.http.HttpServletçš„ç±»å®šä¹‰ä¸ºServletç»„ä»¶ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Documented</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">WebServlet</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">urlPatterns</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token function">loadOnStartup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token class-name">WebInitParam</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">initParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">boolean</span> <span class="token function">asyncSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> <span class="token function">smallIcon</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> <span class="token function">largeIcon</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> <span class="token function">description</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> <span class="token function">displayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="ç›¸å…³å±æ€§">ç›¸å…³å±æ€§</h3><p><img src="JavaEE/20210804163548-20220507093631188.png" alt="image-20210804163546326"></p><h2 id="8-forward-è¯·æ±‚è½¬å‘">8. forward è¯·æ±‚è½¬å‘</h2><h3 id="forwardå¤„ç†æµç¨‹">forwardå¤„ç†æµç¨‹</h3><ol><li>æ¸…ç©ºResponseå­˜æ”¾å“åº”æ­£æ–‡æ•°æ®çš„ç¼“å†²åŒº</li><li>å¦‚æœç›®æ ‡èµ„æºä¸ºServletæˆ–JSPï¼Œå°±è°ƒç”¨å®ƒä»¬çš„service()æ–¹æ³•ï¼ŒæŠŠè¯¥æ–¹æ³•äº§ç”Ÿçš„å“åº”ç»“æœå‘é€åˆ°å®¢æˆ·ç«¯ï¼›å¦‚æœç›®æ ‡èµ„æºæ–‡ä»¶ç³»ç»Ÿä¸­çš„é™æ€HTMLï¼Œå°±è¯»å–æ–‡æ¡£ä¸­çš„æ•°æ®æŠŠå®ƒå‘é€åˆ°å®¢æˆ·ç«¯ã€‚</li></ol><p><img src="JavaEE/20210804165930-20220507093631487.png" alt="image-20210804165930737"></p><ul><li>è¯·æ±‚è½¬å‘æ˜¯ä¸€ç§<strong>æœåŠ¡å™¨çš„è¡Œä¸º</strong>,æ˜¯å¯¹æµè§ˆå™¨å±è”½</li><li>æµè§ˆå™¨çš„åœ°å€æ ä¸ä¼šå‘ç”Ÿå˜åŒ–</li><li>è¯·æ±‚çš„å‚æ•°æ˜¯å¯ä»¥ä»æºç»„ä»¶ä¼ é€’åˆ°ç›®æ ‡ç»„ä»¶çš„</li><li>è¯·æ±‚å¯¹è±¡å’Œå“åº”å¯¹è±¡æ²¡æœ‰é‡æ–°åˆ›å»º,è€Œæ˜¯ä¼ é€’ç»™äº†ç›®æ ‡ç»„ä»¶</li><li>è¯·æ±‚è½¬å‘å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆé¡µé¢çš„è·³è½¬</li><li>è¯·æ±‚è½¬å‘å¯ä»¥è½¬å‘è‡³WEB-INFé‡Œ</li><li>è¯·æ±‚è½¬å‘åªèƒ½è½¬å‘ç»™å½“å‰é¡¹ç›®çš„å†…éƒ¨èµ„æº,ä¸èƒ½è½¬å‘è‡³å¤–éƒ¨èµ„æº</li><li>å¸¸ç”¨forward</li></ul><h3 id="forwordå¤„ç†ç‰¹ç‚¹">forwordå¤„ç†ç‰¹ç‚¹</h3><ol><li>ç”±äºforword()æ–¹æ³•å…ˆæ¸…ç©ºç”¨äºå­˜æ”¾å“åº”æ­£æ–‡çš„ç¼“å†²åŒºï¼Œå› æ­¤æºServletç”Ÿæˆçš„å“åº”ç»“æœä¸ä¼šè¢«å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œåªæœ‰ç›®æ ‡èµ„æºç”Ÿæˆçš„å“åº”ç»“æœæ‰ä¼šè¢«å‘é€åˆ°å®¢æˆ·ç«¯ã€‚</li><li>å¦‚æœæºServletåœ¨è¿›è¡Œè¯·æ±‚è½¬å‘ä¹‹å‰ï¼Œå·²ç»æäº¤äº†å“åº”ç»“ï¼ˆflushBuffer(),close()æ–¹æ³•ï¼‰ï¼Œé‚£ä¹ˆforward()æ–¹æ³•æŠ›å‡ºIllegalStateExceptionã€‚ä¸ºäº†é¿å…è¯¥å¼‚å¸¸ï¼Œä¸åº”è¯¥åœ¨æºServletä¸­æäº¤å“åº”ç»“æœã€‚</li></ol><h4 id="æ³¨æ„">æ³¨æ„</h4><ol><li><p>åœ¨forwardè½¬å‘æ¨¡å¼ä¸‹,è¯·æ±‚åº”è¯¥å®Œå…¨äº¤ç»™ç›®æ ‡èµ„æºå»å¤„ç†,æˆ‘ä»¬åœ¨æºç»„ä»¶ä¸­,ä¸è¦ä½œå‡ºä»»ä½•çš„å“åº”å¤„ç†</p></li><li><p>åœ¨forwardæ–¹æ³•è°ƒç”¨ä¹‹å,ä¹Ÿä¸è¦åœ¨ä½¿ç”¨reqå’Œrespå¯¹è±¡åšå…¶ä»–æ“ä½œäº†</p></li></ol><h3 id="æµ‹è¯•ä»£ç -3">æµ‹è¯•ä»£ç </h3><p>servlet1 è¯·æ±‚è½¬å‘è‡³ servlet2</p><p><strong>servlet1</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/servlet1.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet1</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"servlet1 service invoked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> money <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"money"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"money:"</span><span class="token operator">+</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®¾ç½®å“åº”ç±»å‹å’Œç¼–ç (includeæ¨¡å¼ä¸‹)</span>        <span class="token comment">/*  resp.setCharacterEncoding("UTF-8");        resp.setContentType("text/html;charset=UTF-8");*/</span>        <span class="token comment">// å¢åŠ å“åº”å†…å®¹</span>        <span class="token comment">//resp.getWriter().println("servlet1åœ¨è½¬å‘ä¹‹å‰å¢åŠ çš„å“åº”å†…å®¹");</span>        <span class="token comment">// è¯·æ±‚è½¬å‘ç»™å¦ä¸€ä¸ªç»„ä»¶</span>        <span class="token comment">// è·å¾—ä¸€ä¸ªè¯·æ±‚è½¬å‘å™¨</span>        <span class="token comment">//RequestDispatcher requestDispatcher = req.getRequestDispatcher("servlet2.do");</span>        <span class="token comment">//RequestDispatcher requestDispatcher = req.getRequestDispatcher("aaa.html");</span>        <span class="token comment">//RequestDispatcher requestDispatcher = req.getRequestDispatcher("index.jsp");</span>        <span class="token comment">//RequestDispatcher requestDispatcher = req.getRequestDispatcher("WEB-INF/bbb.html");</span>        <span class="token class-name">RequestDispatcher</span> requestDispatcher <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç”±è¯·æ±‚è½¬å‘å™¨ä½œå‡ºè½¬å‘åŠ¨ä½œ</span>        requestDispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ‰˜ç®¡ç»™ç›®æ ‡èµ„æº(forwardå¤šä¸€äº›)</span>        <span class="token comment">//requestDispatcher.include(req,resp);  // è®©ç›®æ ‡èµ„æºå®Œæˆéƒ¨åˆ†å·¥ä½œ</span>        <span class="token comment">// ç»§ç»­å¢åŠ å“åº”ä¿¡æ¯ (includeæ¨¡å¼)</span>        <span class="token comment">//resp.getWriter().println("servlet1åœ¨è½¬å‘ä¹‹åå¢åŠ çš„å“åº”å†…å®¹");</span>           <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p><strong>Servlet2</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/servlet2.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet2</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"servlet2 service invoked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ¥æ”¶å‚æ•°</span>        <span class="token class-name">String</span> money <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"money"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"money:"</span><span class="token operator">+</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä½œå‡ºå“åº” (åœ¨forWordæ¨¡å¼ä¸‹)</span>        resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ”¯ä»˜å®åˆ°è´¦:"</span><span class="token operator">+</span>money<span class="token operator">+</span><span class="token string">"å…ƒ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="includeï¼ˆäº†è§£ï¼‰">includeï¼ˆäº†è§£ï¼‰</h3><p>åœ¨includeè½¬å‘æ¨¡å¼ä¸‹,è®¾ç½®å“åº”å¯ä»¥åœ¨è½¬å‘ä¹‹å‰,ä¹Ÿå¯ä»¥åœ¨è½¬å‘ä¹‹å</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/*servlet1åœ¨è½¬å‘ä¹‹å‰å¢åŠ çš„å“åº”å†…å®¹*/</span><span class="token comment">// è®¾ç½®å“åº”ç±»å‹å’Œç¼–ç (includeæ¨¡å¼ä¸‹)</span>        resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å¢åŠ å“åº”å†…å®¹</span>        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"servlet1åœ¨è½¬å‘ä¹‹å‰å¢åŠ çš„å“åº”å†…å®¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å¾—ä¸€ä¸ªè¯·æ±‚è½¬å‘å™¨</span>        <span class="token class-name">RequestDispatcher</span> requestDispatcher <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"servlet2.do"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è®©ç›®æ ‡èµ„æºå®Œæˆéƒ¨åˆ†å·¥ä½œ</span>requestDispatcher<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">/*servlet1åœ¨è½¬å‘ä¹‹åå¢åŠ çš„å“åº”å†…å®¹*/</span><span class="token comment">// ç»§ç»­å¢åŠ å“åº”ä¿¡æ¯ (includeæ¨¡å¼)</span>resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"servlet1åœ¨è½¬å‘ä¹‹åå¢åŠ çš„å“åº”å†…å®¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä½†æ˜¯ä¸å¸¸ç”¨çš„</p><h2 id="9-sendRedirect-å“åº”é‡å®šå‘">9. sendRedirect å“åº”é‡å®šå‘</h2><p>å“åº”é‡å®šå‘æ˜¯é€šè¿‡HttpServletResponseå¯¹è±¡sendRedirect(â€œè·¯å¾„â€)çš„æ–¹å¼ã€‚å®ç°æ˜¯â€”â€”æœåŠ¡å™¨é€šçŸ¥æµè§ˆå™¨,è®©æµè§ˆå™¨å»è‡ªä¸»è¯·æ±‚å…¶ä»–èµ„æºçš„ä¸€ç§æ–¹å¼</p><p><img src="JavaEE/20210804171205-20220507093631361.png" alt="image-20210804171130006"></p><h3 id="è¿ä½œæµç¨‹ï¼š">è¿ä½œæµç¨‹ï¼š</h3><ol><li>ç”¨æˆ·åœ¨æµè§ˆå™¨ç«¯è¾“å…¥ç‰¹å®šURLï¼Œè¯·æ±‚è®¿é—®æœåŠ¡å™¨ç«¯çš„æŸä¸ªServletã€‚</li><li>æœåŠ¡å™¨ç«¯çš„Servletè¿”å›ä¸€ä¸ªçŠ¶æ€ç ä¸º302çš„å“åº”ç»“æœï¼Œè¯¥å“åº”ç»“æœçš„å«ä¹‰ä¸ºï¼šè®©æµè§ˆå™¨ç«¯å†è¯·æ±‚è®¿é—®å¦ä¸€ä¸ªWebèµ„æºï¼Œåœ¨å“åº”ç»“æœä¸­æä¾›äº†å¦ä¸€ä¸ªWebèµ„æºçš„URLã€‚å¦ä¸€ä¸ªWebèµ„æºæœ‰å¯èƒ½åœ¨åŒä¸€ä¸ªWebæœåŠ¡å™¨ä¸Šï¼Œä¹Ÿæœ‰å¯èƒ½ä¸å†åŒä¸€ä¸ªWebæœåŠ¡å™¨ä¸Šã€‚</li><li>å½“æµè§ˆå™¨ç«¯æ¥æ”¶åˆ°è¿™ç§å“åº”ç»“æœåï¼Œå†ç«‹å³è‡ªåŠ¨è¯·æ±‚è®¿é—®å¦ä¸€ä¸ªWebèµ„æºã€‚</li><li>æµè§ˆå™¨ç«¯æ¥æ”¶åˆ°å¦ä¸€ä¸ªWebèµ„æºçš„å“åº”ç»“æœã€‚</li></ol><h3 id="æµ‹è¯•ä»£ç -4">æµ‹è¯•ä»£ç :</h3><p><strong>servlet3</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/servlet3.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet3</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"servlet3 service invoked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> money <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"money"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"money:"</span><span class="token operator">+</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å“åº”é‡å®šå‘</span>        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"servlet4.do?money="</span><span class="token operator">+</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//resp.sendRedirect("WEB-INF/bbb.html");</span>        <span class="token comment">//resp.sendRedirect("https://www.baidu.com");</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p><strong>servlet4</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/servlet4.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet4</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"servlet4 service invoked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> money <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"money"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"money:"</span><span class="token operator">+</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æ³¨æ„-2">æ³¨æ„</h3><ol><li>é‡å®šå‘æ˜¯æœåŠ¡å™¨ç»™æµè§ˆå™¨é‡æ–°æŒ‡å®šè¯·æ±‚æ–¹å‘ æ˜¯ä¸€ç§<strong>æµè§ˆå™¨è¡Œä¸º</strong> åœ°å€æ ä¼šå‘ç”Ÿå˜åŒ–</li><li>é‡å®šå‘æ—¶,è¯·æ±‚å¯¹è±¡å’Œå“åº”å¯¹è±¡éƒ½ä¼šå†æ¬¡äº§ç”Ÿ,è¯·æ±‚ä¸­çš„å‚æ•°æ˜¯ä¸ä¼šæºå¸¦</li><li>é‡å®šå‘ä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆé¡µé¢è·³è½¬</li><li>é‡å®šå‘ä¸èƒ½å¸®åŠ©æˆ‘ä»¬è®¿é—®WEB-INFä¸­çš„èµ„æº</li><li>é‡å®šå‘å¯ä»¥å®šå‘åˆ°å¤–éƒ¨èµ„æº</li></ol><h2 id="10-è·¯å¾„é—®é¢˜">10. è·¯å¾„é—®é¢˜</h2><h3 id="å‰ç«¯è·¯å¾„">å‰ç«¯è·¯å¾„</h3><p>é¡¹ç›®ç»“æ„</p><img src="JavaEE/20210804210749-20220507093631233.png" alt="image-20210804201746315" style="zoom:67%;" /><p>æµ‹è¯•ä»£ç </p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--    baseæ ‡ç­¾çš„ä½œç”¨æ˜¯åœ¨ç›¸å¯¹è·¯å¾„ä¹‹å‰è‡ªåŠ¨è¡¥å……base[href]ä¸­çš„å€¼    å¦‚æœbaseæ ‡ç­¾ä¸å†™,é‚£ä¹ˆé»˜è®¤å°±æ˜¯å½“å‰æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://127.0.0.1:8080/testServlet4_war_exploded/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--&lt;base href="http://127.0.0.1:8080/testServlet4_war_exploded/a/a2/">--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>this is page a1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--    ç›¸å¯¹(åŸºå‡†)è·¯å¾„:ä»¥å½“å‰æ–‡ä»¶æœ¬èº«çš„ä½ç½®å»å®šä½å…¶ä»–æ–‡ä»¶,ç›¸å¯¹è‡ªå·±çš„è·¯å¾„,ä»¥å½“å‰æ–‡ä»¶æ‰€åœ¨çš„ä½ç½®ä¸ºåŸºå‡†ä½ç½®    ç»å¯¹(åŸºå‡†)è·¯å¾„:ä»¥ä¸€ä¸ªå›ºå®šçš„ä½ç½®å»å®šä½å…¶ä»–æ–‡æ–‡ä»¶,ä»¥ä¸€ä¸ªå›ºå®šçš„è·¯å¾„ä½œä¸ºå®šä½æ–‡ä»¶çš„åŸºå‡†ä½ç½®,å’Œæ–‡ä»¶æœ¬èº«ä½ç½®æ— å…³    ç›¸å¯¹è·¯å¾„,ä¸ä»¥/å¼€å¤´,å°±æ˜¯ç›¸å¯¹è·¯å¾„  ..ä»£è¡¨å‘ä¸Šä¸€å±‚    ç»å¯¹è·¯å¾„,ä»¥/å¼€å¤´   åœ¨é¡µé¢ä¸Š /ä»£è¡¨ä»é¡¹ç›®çš„éƒ¨ç½²ç›®å½•å¼€å§‹æ‰¾  ä»webappsä¸­å¼€å§‹æ‰¾    é¡µé¢çš„ç»å¯¹è·¯å¾„è¦æœ‰é¡¹ç›®å,é™¤éæˆ‘ä»¬çš„é¡¹ç›®æ²¡æœ‰è®¾ç½®é¡¹ç›®å    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>a2.html<span class="token punctuation">"</span></span> <span class="token attr-name">TARGET</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_self<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç›¸å¯¹è·¯å¾„è·³è½¬è‡³A2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../../b/b2/b1.html<span class="token punctuation">"</span></span> <span class="token attr-name">TARGET</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_self<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç›¸å¯¹è·¯å¾„è·³è½¬è‡³b1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>a/a2/a2.html<span class="token punctuation">"</span></span> <span class="token attr-name">TARGET</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_self<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>baseç›¸å¯¹è·¯å¾„è·³è½¬è‡³A2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>b/b2/b1.html<span class="token punctuation">"</span></span> <span class="token attr-name">TARGET</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_self<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>baseç›¸å¯¹è·¯å¾„è·³è½¬è‡³b1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/testServlet4_war_exploded/a/a2/a2.html<span class="token punctuation">"</span></span> <span class="token attr-name">TARGET</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_self<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç»å¯¹è·¯å¾„è·³è½¬è‡³A2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/testServlet4_war_exploded/b/b2/b1.html<span class="token punctuation">"</span></span> <span class="token attr-name">TARGET</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_self<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç»å¯¹è·¯å¾„è·³è½¬è‡³b1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h4 id="æ€»ç»“">æ€»ç»“</h4><ol><li><p>ä»¥/å¼€å¤´çš„è·¯å¾„æ˜¯ç»å¯¹è·¯å¾„,ä¸ä»¥/å¼€å¤´æ˜¯ç›¸å¯¹è·¯å¾„</p></li><li><p>ç»å¯¹è·¯å¾„/åé¢è¦å†™å½“å‰æœåŠ¡çš„ä¸Šä¸‹æ–‡è·¯å¾„å</p></li><li><p>==â€¦/==ä»£è¡¨å‘ä¸Šä¸€å±‚çš„è·¯å¾„</p></li><li><p>==baseæ ‡ç­¾==å¯ä»¥ç®€åŒ–ç›¸å¯¹è·¯å¾„,å½“ä½¿ç”¨ç›¸å¯¹è·¯å¾„æ—¶,é»˜è®¤ä¼šåœ¨ç›¸å¯¹è·¯å¾„ä¹‹å‰è¡¥å…… baseä¸­çš„å†…å®¹ï¼›å¦‚æœæ²¡æœ‰å®šä¹‰base é»˜è®¤å°±æ˜¯å½“å‰æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„</p></li></ol><h2 id="11-ä¼šè¯ç®¡ç†">11. ä¼šè¯ç®¡ç†</h2><h3 id="è®¤è¯†Cookieå’ŒSession">è®¤è¯†Cookieå’ŒSession</h3><p>Cookieå¯¹è±¡ä¸HttpSessionå¯¹è±¡çš„ä½œç”¨æ˜¯ç»´æŠ¤å®¢æˆ·ç«¯æµè§ˆå™¨ä¸æœåŠ¡ç«¯çš„ä¼šè¯çŠ¶æ€çš„ä¸¤ä¸ªå¯¹è±¡ã€‚ç”±äºHTTPåè®®æ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„åè®®ï¼Œæ‰€ä»¥æœåŠ¡ç«¯å¹¶ä¸ä¼šè®°å½•å½“å‰å®¢æˆ·ç«¯æµè§ˆå™¨çš„è®¿é—®çŠ¶æ€ï¼Œä½†æ˜¯åœ¨æœ‰äº›æ—¶å€™æˆ‘ä»¬æ˜¯éœ€è¦æœåŠ¡ç«¯èƒ½å¤Ÿè®°å½•å®¢æˆ·ç«¯æµè§ˆå™¨çš„è®¿é—®çŠ¶æ€çš„ï¼Œå¦‚è·å–å½“å‰å®¢æˆ·ç«¯æµè§ˆå™¨çš„è®¿é—®æœåŠ¡ç«¯çš„æ¬¡æ•°æ—¶å°±éœ€è¦ä¼šè¯çŠ¶æ€çš„ç»´æŒã€‚åœ¨Servletä¸­æä¾›äº†Cookieå¯¹è±¡ä¸HttpSessionå¯¹è±¡ç”¨äºç»´æŠ¤å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„ä¼šè¯çŠ¶æ€çš„ç»´æŒã€‚äºŒè€…ä¸åŒçš„æ˜¯Cookieæ˜¯é€šè¿‡å®¢æˆ·ç«¯æµè§ˆå™¨å®ç°ä¼šè¯çš„ç»´æŒï¼Œè€ŒHttpSessionæ˜¯é€šè¿‡æœåŠ¡ç«¯æ¥å®ç°ä¼šè¯çŠ¶æ€çš„ç»´æŒã€‚</p><img src="JavaEE/20210805102003-20220507093631748.png" alt="image-20210805101816416" style="zoom: 50%;" /><img src="JavaEE/20210805102039-20220507093631952.png" alt="image-20210805102039111" style="zoom: 50%;" /><h3 id="Cookie">Cookie</h3><p>Cookieæ˜¯ä¸€ç§ä¿å­˜å°‘é‡ä¿¡æ¯è‡³æµè§ˆå™¨çš„ä¸€ç§æŠ€æœ¯,ç¬¬ä¸€è¯·æ±‚æ—¶,æœåŠ¡å™¨å¯ä»¥å“åº”ç»™æµè§ˆå™¨ä¸€äº›Cookieä¿¡æ¯,ç¬¬äºŒæ¬¡è¯·æ±‚,æµè§ˆå™¨ä¼šæºå¸¦ä¹‹å‰çš„cookieå‘é€ç»™æœåŠ¡å™¨,é€šè¿‡è¿™ç§æœºåˆ¶å¯ä»¥å®ç°åœ¨æµè§ˆå™¨ç«¯ä¿ç•™ä¸€äº›ç”¨æˆ·ä¿¡æ¯.ä¸ºæœåŠ¡ç«¯è·å–ç”¨æˆ·çŠ¶æ€è·å¾—ä¾æ®</p><h4 id="ç‰¹ç‚¹-3">ç‰¹ç‚¹</h4><ul><li><p>Cookieä½¿ç”¨å­—ç¬¦ä¸²å­˜å‚¨æ•°æ®</p></li><li><p>Cookieä½¿ç”¨Keyä¸Valueç»“æ„å­˜å‚¨æ•°æ®</p></li><li><p>å•ä¸ªCookieå­˜å‚¨æ•°æ®å¤§å°é™åˆ¶åœ¨4097ä¸ªå­—èŠ‚</p></li><li><p>Cookieå­˜å‚¨çš„æ•°æ®ä¸­ä¸æ”¯æŒä¸­æ–‡ï¼ŒServlet4.0ä¸­æ”¯æŒ</p></li><li><p>Cookieæ˜¯ä¸åŸŸåç»‘å®šæ‰€ä»¥ä¸æ”¯æŒè·¨ä¸€çº§åŸŸåè®¿é—®</p></li><li><p>Cookieå¯¹è±¡ä¿å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨å†…å­˜ä¸Šæˆ–ç³»ç»Ÿç£ç›˜ä¸­</p></li><li><p>Cookieåˆ†ä¸ºæŒä¹…åŒ–Cookie(ä¿å­˜åœ¨ç£ç›˜ä¸Š)ä¸çŠ¶æ€Cookie(ä¿å­˜åœ¨å†…å­˜ä¸Š)</p></li><li><p>æµè§ˆå™¨åœ¨ä¿å­˜åŒä¸€åŸŸåæ‰€è¿”å›Cookieçš„æ•°é‡æ˜¯æœ‰é™çš„ã€‚ä¸åŒæµè§ˆå™¨æ”¯æŒçš„æ•°é‡ä¸åŒï¼ŒChromeæµè§ˆå™¨ä¸º50ä¸ª</p></li><li><p>æµè§ˆå™¨æ¯æ¬¡è¯·æ±‚æ—¶éƒ½ä¼šæŠŠä¸å½“å‰è®¿é—®çš„åŸŸåç›¸å…³çš„Cookieåœ¨è¯·æ±‚ä¸­æäº¤åˆ°æœåŠ¡ç«¯ã€‚</p></li></ul><h4 id="åˆ›å»ºå¯¹è±¡å’Œå“åº”">åˆ›å»ºå¯¹è±¡å’Œå“åº”</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">,</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token comment">//é€šè¿‡newå…³é”®å­—åˆ›å»ºCookieå¯¹è±¡</span>response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token comment">//é€šè¿‡HttpServletResponseå¯¹è±¡å°†Cookieå†™å›ç»™å®¢æˆ·ç«¯æµè§ˆå™¨ã€‚</span></code></pre><h4 id="æ•°æ®çš„è·å–">æ•°æ®çš„è·å–</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//é€šè¿‡HttpServletRequestå¯¹è±¡è·å–Cookieï¼Œè¿”å›Cookieæ•°ç»„ã€‚</span><span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h4 id="CookieæŒä¹…åŒ–å’ŒçŠ¶æ€Cookie">CookieæŒä¹…åŒ–å’ŒçŠ¶æ€Cookie</h4><ul><li>==çŠ¶æ€Cookie==ï¼šæµè§ˆå™¨ä¼šç¼“å­˜Cookieå¯¹è±¡ã€‚æµè§ˆå™¨å…³é—­åCookieå¯¹è±¡é”€æ¯ã€‚</li><li>==æŒä¹…åŒ–Cookie==ï¼šæµè§ˆå™¨ä¼šå¯¹CookieåšæŒä¹…åŒ–å¤„ç†ï¼ŒåŸºäºæ–‡ä»¶å½¢å¼ä¿å­˜åœ¨ç³»ç»Ÿçš„æŒ‡å®šç›®å½•ä¸­ã€‚åœ¨Windows10ç³»ç»Ÿä¸­ä¸ºäº†å®‰å…¨é—®é¢˜ä¸ä¼šæ˜¾ç¤ºCookieä¸­çš„å†…å®¹ã€‚</li></ul><p>â€‹       å½“Cookieå¯¹è±¡åˆ›å»ºå<strong>é»˜è®¤ä¸ºçŠ¶æ€Cookie</strong>ã€‚å¯ä»¥ä½¿ç”¨Cookieå¯¹è±¡ä¸‹çš„==cookie.setMaxAge(60)==æ–¹æ³•è®¾ç½®å¤±æ•ˆæ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚ä¸€æ—¦è®¾ç½®äº†å¤±æ•ˆæ—¶é—´ï¼Œé‚£ä¹ˆè¯¥Cookieä¸ºæŒä¹…åŒ–Cookieï¼Œæµè§ˆå™¨ä¼šå°†Cookieå¯¹è±¡æŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ã€‚å½“å¤±æ•ˆæ—¶é—´åˆ°è¾¾åæ–‡ä»¶åˆ é™¤ã€‚</p><h4 id="æµ‹è¯•ä»£ç -5">æµ‹è¯•ä»£ç </h4><p><strong>é€šè¿‡å“åº”å¯¹è±¡ å‘æµè§ˆå™¨å“åº”cookie</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/servlet1.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet1</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// é€šè¿‡å“åº”å¯¹è±¡,å‘æµè§ˆå™¨å“åº”ä¸€äº›Cookie</span>        <span class="token class-name">Cookie</span> c1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token string">"10"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// çŠ¶æ€Cookie é‡å¯å³æ¸…é™¤</span>        <span class="token class-name">Cookie</span> c2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"gender"</span><span class="token punctuation">,</span> <span class="token string">"ç”·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æŒä¹…åŒ–Cookie è®©æµè§ˆå™¨ä¿ç•™1åˆ†é’Ÿ</span>        <span class="token comment">//c2.setMaxAge(60);// ç§’é’Ÿ    æŒä¹…åŒ–Cookie è®©æµè§ˆå™¨ä¿ç•™1åˆ†é’Ÿ</span>        resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>        resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p><strong>è·å–è¯·æ±‚ä¸­cookie</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/servlet2.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet2</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// è¯»å–è¯·æ±‚ä¸­çš„Cookie</span>        <span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//cookiesä¸ä¸ºnull</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> cookies<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie <span class="token operator">:</span> cookies<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"="</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="æ¡ˆä¾‹ï¼šé€šè¿‡Cookieåˆ¤æ–­ç”¨æˆ·æ˜¯å¦è®¿é—®è¿‡å½“å‰Servlet">æ¡ˆä¾‹ï¼šé€šè¿‡Cookieåˆ¤æ–­ç”¨æˆ·æ˜¯å¦è®¿é—®è¿‡å½“å‰Servlet</h4><p>éœ€æ±‚ï¼š</p><p>â€‹                                                                                                                                                                                      å½“å®¢æˆ·ç«¯æµè§ˆå™¨ç¬¬ä¸€æ¬¡è®¿é—®Servletæ—¶è¿”å›â€œæ‚¨å¥½ï¼Œæ¬¢è¿æ‚¨ç¬¬ä¸€æ¬¡è®¿é—®ï¼â€ï¼Œç¬¬äºŒæ¬¡è®¿é—®æ—¶è¿”å›â€œæ¬¢è¿æ‚¨å›æ¥ï¼â€</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/servlet3.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet3</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å¦‚æœæ˜¯ç¬¬ä¸€è®¿é—®å½“å‰Servlet.å‘æµè§ˆå™¨å“åº”ä¸€ä¸ªcookie ("servlet3","1")</span>        <span class="token comment">// å¦‚æœæ˜¯å¤šæ¬¡è®¿é—®,å°±å†æ¬¡æ•°ä¸Š+1</span>        <span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span>  flag <span class="token operator">=</span><span class="token boolean">false</span> <span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span>cookies<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie <span class="token operator">:</span> cookies<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">String</span> cookieName <span class="token operator">=</span> cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>cookieName<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"servlet3"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token comment">// åˆ›å»ºCookieæ¬¡æ•°+1</span>                    <span class="token class-name">Integer</span> value <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>                    <span class="token class-name">Cookie</span> c<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"servlet3"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ¬¢è¿æ‚¨ç¬¬"</span><span class="token operator">+</span>value<span class="token operator">+</span><span class="token string">"è®¿é—®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    flag<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ¬¢è¿æ‚¨ç¬¬ä¸€æ¬¡è®¿é—®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Cookie</span> c<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"servlet3"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="Session">Session</h3><h3 id="æ¡ˆä¾‹-åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•">æ¡ˆä¾‹:åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•</h3><h4 id="éœ€æ±‚">éœ€æ±‚:</h4><p>å®ç°ç™»å½•ä¸€æ¬¡å³å¯,åœ¨ä¸€æ¬¡ä¼šè¯å†…,å¯ä»¥åå¤å¤šæ¬¡è®¿é—®WEB-INF/ welcome.html,å¦‚æœæ²¡æœ‰ç™»å½•è¿‡,è·³è½¬åˆ°ç™»å½•é¡µ,ç™»å½•æˆåŠŸå,å¯ä»¥è®¿é—®</p><h4 id="é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„:</h4><img src="JavaEE/20210805142941-20220507093631639.png" alt="image-20210805142907533" style="zoom:67%;" /><h4 id="ç»„ä»¶ä»‹ç»ï¼š">ç»„ä»¶ä»‹ç»ï¼š</h4><h5 id="login-html">login.html</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>get<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loginServlet.do<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ç”¨æˆ·å:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>    å¯†ç :<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h5 id="main-html">main.html</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>   this is main page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h5 id="LoginServlet">LoginServlet</h5><p>ç”¨æ¥æ ¡éªŒç™»å½•çš„ï¼Œç™»é™†æˆåŠŸå°†ç”¨æˆ·ä¿¡æ¯å­˜æˆ·HttpSessionï¼Œå¦åˆ™è¿”å›åˆ°ç™»å½•é¡µã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/loginServlet.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// è·å–ç”¨æˆ·åå’Œå¯†ç </span>        <span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å¦‚æœç”¨æˆ·åå’Œå¯†ç ä¸º msb 1234</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"msb"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span>  <span class="token operator">&amp;&amp;</span> <span class="token string">"1234"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">// å°†ç”¨æˆ·ä¿¡æ¯æ”¾åœ¨HTTPSessionä¸­</span>            <span class="token class-name">User</span> user <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">"msb"</span><span class="token punctuation">,</span> <span class="token string">"1234"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// ç™»å½•æˆåŠŸ è·³è½¬è‡³ main.html</span>            resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/mainServlet.do"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token comment">// ç™»å½•å¤±è´¥ å›åˆ°login.html</span>            resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/login.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="MainServlet">MainServlet</h5><p>ç”¨æ¥å‘mian.htmlä¸­è·³è½¬çš„ï¼ŒåŒæ—¶éªŒè¯ç™»å½•çš„ï¼Œå¯ä»¥ç›´æ¥è·³è½¬ï¼Œå¦åˆ™å›åˆ°ç™»å½•é¡µã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/mainServlet.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//è·³è½¬è‡³main.html</span>        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> user<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">// åˆ¤æ–­å¦‚æœç™»å½•è¿‡ å…è®¸è·³è½¬  HTTPSessionä¸­å¦‚æœæœ‰ç™»é™†è¿‡çš„ä¿¡æ¯</span>            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/WEB-INF/main.html"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token comment">// å¦‚æœæ²¡æœ‰ç™»å½•è¿‡ å›åˆ°ç™»å½•å»ç™»å½•  HTTPSessionä¸­å¦‚æœæœ‰ç™»é™†è¿‡çš„ä¿¡æ¯</span>            resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"login.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="User">User</h5><p>å­˜å‚¨ç”¨æˆ·ä¿¡æ¯çš„å®ä½“ç±»</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> uid<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> realname<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> pasword<span class="token punctuation">;</span></code></pre><h1>JSP</h1><h2 id="æŒ‡ä»¤æ ‡ç­¾">æŒ‡ä»¤æ ‡ç­¾</h2><p>ä¸‰ç§æŒ‡ä»¤æ ‡ç­¾</p><table><thead><tr><th>æŒ‡ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>&lt;%@ page %&gt;</td><td>å®šä¹‰ç½‘é¡µä¾èµ–å±æ€§ï¼Œå¦‚è„šæœ¬è¯­è¨€ï¼Œerroré¡µé¢ã€ç¼“å­˜éœ€æ±‚ç­‰</td></tr><tr><td>&lt;%@ include %&gt;</td><td>åŒ…å«å…¶ä»–æ–‡ä»¶</td></tr><tr><td>&lt;%@ taglib%</td><td>å¼•å…¥æ ‡ç­¾åº“çš„å®šä¹‰</td></tr></tbody></table><h3 id="pageæ ‡ç­¾">pageæ ‡ç­¾</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span>å‘ŠçŸ¥æµè§ˆå™¨ä»¥ä»€ä¹ˆæ ¼å¼å’Œç¼–ç è§£æ å“åº”çš„æ•°æ®<span class="token operator">--</span><span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF-8"</span>  <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span>è®¾ç½®<span class="token constant">JSP</span>é¡µé¢è½¬æ¢çš„è¯­è¨€<span class="token operator">--</span><span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%</span>@ page language<span class="token operator">=</span><span class="token string">"java"</span><span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span>å¯¼åŒ…<span class="token operator">--</span><span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%</span>@ page <span class="token keyword">import</span><span class="token operator">=</span><span class="token string">"com.msb.entity.User"</span> <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span>åœ¨è½¬æ¢æˆjavaä»£ç æ—¶ä½¿ç”¨çš„ç¼–ç  ä¸€èˆ¬ä¸ç”¨è®¾ç½®<span class="token operator">--</span><span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%</span>@ page pageEncoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span>æŒ‡å®šé”™è¯¯é¡µ å½“é¡µé¢å‘ç”Ÿé”™è¯¯æ—¶ æŒ‡å®šè·³è½¬çš„é¡µé¢<span class="token operator">--</span><span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%</span>@ page errorPage<span class="token operator">=</span><span class="token string">"error500.JSP"</span> <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span>æŒ‡å®šå½“å‰é¡µä¸ºå¼‚å¸¸æç¤ºé¡µ å½“å‰é¡µé¢å¯ä»¥æ¥æ”¶å¼‚å¸¸å¯¹è±¡ <span class="token operator">--</span><span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token annotation punctuation">@page</span> isErrorPage<span class="token operator">=</span><span class="token string">"true"</span> <span class="token operator">%</span><span class="token operator">></span></code></pre><p>errorPageæ˜¯ä¸€ç§å¤„ç†é”™è¯¯æç¤ºä¹Ÿçš„åŠŸèƒ½é™¤äº†JSPæœ‰çš„é”™è¯¯æç¤ºé¡µåŠŸèƒ½</p><p>javaEEä¸­è‡ªå¸¦å…¶ä»–çš„é”™ä½æç¤ºé¡µå¤„ç†åŠŸèƒ½ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-code</span><span class="token punctuation">></span></span>500<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-code</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">></span></span>/error500.JSP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-code</span><span class="token punctuation">></span></span>404<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-code</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">></span></span>/error404.JSP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">></span></span></code></pre><p>å½“JSPä¸­å‘ç”Ÿäº†å¼‚å¸¸æ—¶,å¦‚æœJSPä¸­é…ç½®çš„é”™è¯¯é¡µå’Œweb.xml ä¸­é…ç½®çš„é”™è¯¯é¡µå†²çªäº†,JSP pageæŒ‡ä»¤çš„ errorPageä¼˜å…ˆçº§æ›´é«˜</p><img src="JavaEE/20210807110128-20220507093631490.png" alt="image-20210807110126899" style="zoom:67%;" /><h3 id="includeæ ‡ç­¾">includeæ ‡ç­¾</h3><p>JSPå¯ä»¥é€šè¿‡IncludeæŒ‡ä»¤æ¥åŒ…å«å…¶ä»–æ–‡ä»¶ã€‚è¢«åŒ…å«çš„æ–‡ä»¶å¯ä»¥æ˜¯JSPæ–‡ä»¶ã€HTMLæ–‡ä»¶æˆ–æ–‡æœ¬æ–‡ä»¶ã€‚åŒ…å«çš„æ–‡ä»¶å°±å¥½åƒæ˜¯è¯¥JSPæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œä¼šè¢«åŒæ—¶ç¼–è¯‘æ‰§è¡Œã€‚é™¤äº†includeæŒ‡ä»¤æ ‡ç­¾å¯ä»¥å®ç°å¼•å…¥ä»¥å¤–ï¼Œä½¿ç”¨jsp:includeä¹Ÿå¯ä»¥å®ç°å¼•å…¥</p><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%--é™æ€å¼•å…¥ä½¿ç”¨çš„æ˜¯ include æŒ‡ä»¤æ ‡ç­¾    è¢«å¼•å…¥çš„JSPé¡µé¢ä¸ä¼šç”Ÿæˆjavaä»£ç  è¢«å¼•å…¥çš„ç½‘é¡µå’Œå½“å‰é¡µç”Ÿæˆä»£ç åå½¢æˆäº†ä¸€ä¸ªjavaæ–‡ä»¶--%&gt;&lt;%@include file&#x3D;&quot;head.JSP&quot;%&gt;&lt;%--åŠ¨æ€å¼•å…¥ JSPæ ‡ç­¾ä¸­çš„ includeé€‰é¡¹    è¢«å¼•å…¥çš„JSPé¡µé¢ä¼šç”Ÿæˆç‹¬ç«‹çš„javaä»£ç      åœ¨ç”Ÿæˆçš„javaä»£ç ä¸­ ä½¿ç”¨JSPRuntimeLibrary.include(request, response, &quot;head.JSP&quot;, out, false);å¼•å…¥å…¶ä»–é¡µé¢    --%&gt;&lt;jsp:include page&#x3D;&quot;head.JSP&quot;&#x2F;&gt;</code></pre><p>æŸ¥çœ‹è½¬è¯‘ä»¥åçš„javaæºä»£ç æ–‡ä»¶ä¸­çš„åŒºåˆ«</p><p>é™æ€å¼•å…¥ï¼š@includeè¢«å¼•å…¥çš„ç½‘é¡µå’Œå½“å‰é¡µç”Ÿæˆä»£ç åå½¢æˆäº†ä¸€ä¸ªjavaæ–‡ä»¶</p><p>åŠ¨æ€å¼•å…¥ï¼šjsp:includeè¢«å¼•å…¥çš„JSPé¡µé¢ä¼šç”Ÿæˆç‹¬ç«‹çš„javaä»£ç </p><h3 id="taglibæŒ‡ä»¤æ ‡ç­¾">taglibæŒ‡ä»¤æ ‡ç­¾</h3><p>JSP APIå…è®¸ç”¨æˆ·è‡ªå®šä¹‰æ ‡ç­¾ï¼Œä¸€ä¸ªè‡ªå®šä¹‰æ ‡ç­¾åº“å°±æ˜¯è‡ªå®šä¹‰æ ‡ç­¾çš„é›†åˆã€‚TaglibæŒ‡ä»¤å¼•å…¥ä¸€ä¸ªè‡ªå®šä¹‰æ ‡ç­¾é›†åˆçš„å®šä¹‰ï¼ŒåŒ…æ‹¬åº“è·¯å¾„ã€è‡ªå®šä¹‰æ ‡ç­¾ã€‚</p><p>è¯­æ³•ï¼š</p><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ taglib   uri&#x3D;&quot;uri&quot; prefix&#x3D;&quot;prefixOfTag&quot; %&gt;</code></pre><h2 id="å†…ç½®å¯¹è±¡">å†…ç½®å¯¹è±¡</h2><h3 id="ä¹å¤§å¯¹è±¡">ä¹å¤§å¯¹è±¡</h3><p><strong>å››å¤§åŸŸå¯¹è±¡</strong></p><ul><li><p>pageContext  pageåŸŸ     å½“å‰é¡µé¢å†…å¯ç”¨</p></li><li><p>request       reqeuståŸŸ  å•æ¬¡è¯·æ±‚</p></li><li><p>session       sessionåŸŸ   å•æ¬¡ä¼šè¯</p></li><li><p>application   application åŸŸé¡¹ç›®è¿è¡Œ</p></li></ul><p><strong>å“åº”å¯¹è±¡</strong></p><ul><li>response</li></ul><p><strong>è¾“å‡ºæµå¯¹è±¡</strong></p><ul><li>out æ‰“å°æµ</li></ul><p><strong>å…¶ä»–ä¸‰ä¸ªå¯¹è±¡</strong></p><ul><li><p>servletConfig:ç”±äºJSPæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªServlet,æ‰€ä»¥å®¹å™¨ä¹Ÿä¼šç»™æˆ‘ä»¬å‡†å¤‡ä¸€ä¸ªServletConfig</p></li><li><p>page        å°±æ˜¯ä»–thiså¯¹è±¡ å½“å‰JSPå¯¹è±¡æœ¬èº«</p></li><li><p>exception   å¼‚å¸¸å¯¹è±¡,åœ¨é”™è¯¯æç¤ºé¡µä¸Šä½¿ç”¨,å½“isErrorpage=true æ‰å…·æœ‰è¯¥å¯¹è±¡</p></li></ul><h2 id="æ¡ˆä¾‹ä¸€ï¼šåœ¨æµè§ˆå™¨ä¸Šè®¿é—®Empè¡¨-åŠ¨æ€åœ°åˆ†ç­‰çº§">æ¡ˆä¾‹ä¸€ï¼šåœ¨æµè§ˆå™¨ä¸Šè®¿é—®Empè¡¨ åŠ¨æ€åœ°åˆ†ç­‰çº§</h2><p>EmpDaoImpl.java</p><p>å®ç°ç±»</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpDao</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> url<span class="token operator">=</span><span class="token string">"jdbc:mysql://127.0.0.1:3306/mydb?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token operator">=</span><span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token operator">=</span><span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> list <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> pstat<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ResultSet</span> resultSet<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            pstat <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">"select * from emp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            resultSet <span class="token operator">=</span> pstat<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token class-name">Integer</span> empno<span class="token operator">=</span>resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"empno"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Integer</span> deptno<span class="token operator">=</span>resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"deptno"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Integer</span> mgr<span class="token operator">=</span>resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"mgr"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> ename<span class="token operator">=</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"ename"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> job<span class="token operator">=</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"job"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Double</span> sal<span class="token operator">=</span>resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"sal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Double</span> comm<span class="token operator">=</span>resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"comm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Date</span> hiredate<span class="token operator">=</span>resultSet<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token string">"hiredate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Emp</span> emp <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span> empno<span class="token punctuation">,</span>  ename<span class="token punctuation">,</span>  job<span class="token punctuation">,</span>  mgr<span class="token punctuation">,</span>  hiredate<span class="token punctuation">,</span>  sal<span class="token punctuation">,</span>  comm<span class="token punctuation">,</span>  deptno<span class="token punctuation">)</span><span class="token punctuation">;</span>                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">!=</span>resultSet<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">!=</span>pstat<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    pstat<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">!=</span>connection<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>Emp.java</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpDao</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>EmpServlet</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/empServlet.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// daoå¯¹è±¡</span>    <span class="token class-name">EmpDao</span> empDao<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">EmpDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// è·å–æ•°æ®</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> empDao<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å°†æ•°æ®æ”¾å…¥è¯·æ±‚åŸŸ</span>        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"emps"</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è¯·æ±‚è½¬å‘ç»™JSP</span>        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"showEmp.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>showEmp.jsp</p><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page import&#x3D;&quot;java.util.List&quot; %&gt;&lt;%@ page import&#x3D;&quot;com.msb.pojo.Emp&quot; %&gt;&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt;    &lt;title&gt;Title&lt;&#x2F;title&gt;    &lt;style&gt;        table&#123;            border: 3px solid blue;            width: 80%;            margin: 0px auto;        &#125;        td,th&#123;            border: 2px solid green;        &#125;    &lt;&#x2F;style&gt;&lt;&#x2F;head&gt;&lt;body&gt;    &lt;table cellspacing&#x3D;&quot;0px&quot; cellpadding&#x3D;&quot;0px&quot;&gt;        &lt;tr&gt;            &lt;th&gt;ç¼–å·&lt;&#x2F;th&gt;            &lt;th&gt;å§“å&lt;&#x2F;th&gt;            &lt;th&gt;ä¸Šçº§ç¼–å·&lt;&#x2F;th&gt;            &lt;th&gt;èŒåŠ¡&lt;&#x2F;th&gt;            &lt;th&gt;å…¥èŒæ—¥æœŸ&lt;&#x2F;th&gt;            &lt;th&gt;è–ªèµ„&lt;&#x2F;th&gt;            &lt;th&gt;è¡¥åŠ©&lt;&#x2F;th&gt;            &lt;th&gt;éƒ¨é—¨å·&lt;&#x2F;th&gt;            &lt;th&gt;è–ªèµ„ç­‰çº§&lt;&#x2F;th&gt;        &lt;&#x2F;tr&gt;        &lt;%            List&lt;Emp&gt; emps &#x3D; (List&lt;Emp&gt;) request.getAttribute(&quot;emps&quot;);            for (Emp emp : emps) &#123;        %&gt;            &lt;tr&gt;                &lt;td&gt;&lt;%&#x3D;emp.getEmpno()%&gt;&lt;&#x2F;td&gt;                &lt;td&gt;&lt;%&#x3D;emp.getEname()%&gt;&lt;&#x2F;td&gt;                &lt;td&gt;&lt;%&#x3D;emp.getMgr()%&gt;&lt;&#x2F;td&gt;                &lt;td&gt;&lt;%&#x3D;emp.getJob()%&gt;&lt;&#x2F;td&gt;                &lt;td&gt;&lt;%&#x3D;emp.getHiredate()%&gt;&lt;&#x2F;td&gt;                &lt;td&gt;&lt;%&#x3D;emp.getSal()%&gt;&lt;&#x2F;td&gt;                &lt;td&gt;&lt;%&#x3D;emp.getComm()%&gt;&lt;&#x2F;td&gt;                &lt;td&gt;&lt;%&#x3D;emp.getDeptno()%&gt;&lt;&#x2F;td&gt;                &lt;td&gt;&lt;%--out.print(&quot;&lt;td&gt;&quot;)--%&gt;         &lt;%             Double sal &#x3D; emp.getSal();             if(sal&lt;&#x3D;500)&#123;                 out.print(&quot;A&quot;);             &#125;else if( sal &lt;&#x3D;1000)&#123;                 out.print(&quot;B&quot;);             &#125;else if( sal &lt;&#x3D;1500)&#123;                 out.print(&quot;C&quot;);             &#125;else if( sal &lt;&#x3D;2000)&#123;                 out.print(&quot;D&quot;);             &#125;else if( sal &lt;&#x3D;3000)&#123;                 out.print(&quot;E&quot;);             &#125;else if( sal &lt;&#x3D;4000)&#123;                 out.print(&quot;F&quot;);             &#125;else &#123;                 out.print(&quot;G&quot;);             &#125;         %&gt;                &lt;&#x2F;td&gt;            &lt;&#x2F;tr&gt;        &lt;%            &#125;        %&gt;    &lt;&#x2F;table&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;</code></pre><h2 id="ELè¡¨è¾¾å¼">ELè¡¨è¾¾å¼</h2><p>Expression Languaga</p><p>ELè¡¨è¾¾å¼ä¸­å®šä¹‰äº†ä¸€äº›å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«æ·ä»åŸŸå¯¹è±¡ä¸­å–å‡ºæ•°æ®çš„å†™æ³•,<strong>åŸºæœ¬è¯­æ³•ä¸º</strong></p><pre class="language-jsp" data-language="jsp"><code class="language-jsp">$&#123;åŸŸæ ‡å¿—.æ•°æ®å.å±æ€§å(å¯é€‰)&#125;</code></pre><p><strong>å››ä¸ªåŸŸæ ‡å¿—å…³é”®å­—åˆ†åˆ«ä¸º</strong></p><ul><li><p>requestScope         requeståŸŸ</p></li><li><p>sessionScope          sessionåŸŸ</p></li><li><p>applicationScope   applicationåŸŸ</p></li><li><p>pageScope             pageåŸŸ</p></li></ul><h3 id="ELè¡¨è¾¾å¼å¿«æ·å–å‡ºåŸŸå¯¹è±¡">ELè¡¨è¾¾å¼å¿«æ·å–å‡ºåŸŸå¯¹è±¡</h3><ul><li><p>requestScope         requeståŸŸ</p></li><li><p>sessionScope          sessionåŸŸ</p></li><li><p>applicationScope   applicationåŸŸ</p></li><li><p>pageScope             pageåŸŸ</p></li></ul><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page import&#x3D;&quot;com.msb.pojo.User&quot; %&gt;&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;&lt;html&gt;    &lt;head&gt;        &lt;title&gt;Title&lt;&#x2F;title&gt;    &lt;&#x2F;head&gt;    &lt;body&gt;        &lt;%--å‘pageContextåŸŸä¸­æ”¾æ•°æ®--%&gt;        &lt;%        pageContext.setAttribute(&quot;msg&quot;, &quot;pageContextMessage&quot;);        pageContext.setAttribute(&quot;userx&quot;, new User(1,&quot;å¤§é»„&quot;,&quot;abcdefg&quot;));        %&gt;        &lt;%--    ä»åŸŸä¸­å–å‡ºæ•°æ®    Elè¡¨è¾¾å¼åœ¨è·å–å¯¹è±¡å±æ€§å€¼å¾—æ—¶å€™,æ˜¯é€šè¿‡å¯¹è±¡çš„å±æ€§çš„getæ–¹æ³•è·å–çš„    ä¿è¯å¯¹è±¡çš„è¦è·å–çš„å±æ€§å¿…é¡»æœ‰å¯¹åº”getæ–¹æ³•æ‰å¯ä»¥    ELè¡¨è¾¾å¼åœ¨ä½¿ç”¨æ—¶æ˜¯ä¸éœ€è¦importå…¶ä»–ç±»çš„    Elå¦‚æœè·å–çš„æ˜¯NULLå€¼,æ˜¯ä¸å±•ç¤ºä»»ä½•ä¿¡æ¯çš„    --%&gt;        pageContextåŸŸä¸­çš„æ•°æ®:&lt;br&#x2F;&gt;        msg:$&#123;pageScope.msg&#125;&lt;br&#x2F;&gt;        username:$&#123;pageScope.userx.name&#125;&lt;br&#x2F;&gt;        &lt;hr&#x2F;&gt;        requeståŸŸä¸­çš„æ•°æ®:&lt;br&#x2F;&gt;        msg:$&#123;requestScope.msg&#125;&lt;br&#x2F;&gt;        username:$&#123;requestScope.user.name&#125;&lt;br&#x2F;&gt;        &lt;hr&#x2F;&gt;        sessionåŸŸä¸­çš„æ•°æ®:&lt;br&#x2F;&gt;        msg:$&#123;sessionScope.msg&#125;&lt;br&#x2F;&gt;        username:$&#123;sessionScope.users[1].name&#125;&lt;br&#x2F;&gt;        &lt;hr&#x2F;&gt;        applicationåŸŸä¸­çš„æ•°æ®:&lt;br&#x2F;&gt;        msg:$&#123;applicationScope.msg&#125;&lt;br&#x2F;&gt;        username:$&#123;applicationScope.userMap.a.name&#125;&lt;br&#x2F;&gt;        &lt;hr&#x2F;&gt;        &lt;%--ELè¡¨è¾¾å¼åœ¨å–å‡ºæ•°æ®çš„æ—¶å€™æ˜¯å¯ä»¥çœç•¥åŸŸæ ‡å¿—çš„    ELè¡¨è¾¾å¼ä¼šè‡ªåŠ¨ä¾æ¬¡åˆ°å››ä¸ªåŸŸä¸­å»æ‰¾æ•°æ®    --%&gt;        PageContext username:$&#123;userx.name&#125;&lt;br&#x2F;&gt;        Request username:$&#123;user.name&#125;&lt;br&#x2F;&gt;        Session username:$&#123;users[1].name&#125;&lt;br&#x2F;&gt;        Application username:$&#123;userMap.a.name&#125;&lt;br&#x2F;&gt;        &lt;hr&#x2F;&gt;        &lt;%--    $&#123;æ•°æ®çš„åå­—&#125;å¦‚æœçœç•¥åŸŸæ ‡å¿—,å–æ•°æ®çš„é¡ºåºå¦‚ä¸‹    pageContext    request    session    application    --%&gt;        $&#123;msg&#125;        &lt;hr&#x2F;&gt;        &lt;%--    ç§»é™¤åŸŸä¸­çš„æ•°æ®    --%&gt;        &lt;%        &#x2F;&#x2F;pageContext.removeAttribute(&quot;msg&quot;);&#x2F;&#x2F; pageContext.removeAttribute()æ–¹æ³•ä¼šç§»é™¤å››ä¸ªåŸŸä¸­çš„æ‰€æœ‰çš„åŒåçš„æ•°æ®        &#x2F;&#x2F;request.removeAttribute(&quot;msg&quot;);        %&gt;        pagecontextMsg:$&#123;pageScope.msg&#125;&lt;br&#x2F;&gt;        requestMsg:$&#123;requestScope.msg&#125;&lt;br&#x2F;&gt;        sessionMsg:$&#123;sessionScope.msg&#125;&lt;br&#x2F;&gt;        applicationMsg:$&#123;applicationScope.msg&#125;&lt;br&#x2F;&gt;        &lt;hr&#x2F;&gt;        &lt;%--    ELè¡¨è¾¾å¼è·å–è¯·æ±‚ä¸­çš„å‚æ•°    --%&gt;        username:$&#123;param.username&#125;&lt;br&#x2F;&gt;        hobby:$&#123;paramValues.hobby[0]&#125;        hobby:$&#123;paramValues.hobby[1]&#125;    &lt;&#x2F;body&gt;&lt;&#x2F;html&gt;</code></pre><h4 id="æ€»ç»“-2">æ€»ç»“</h4><ul><li><p>ELè¡¨è¾¾å¼å®šä¹‰åœ¨JSPé¡µé¢ä¸Š,åœ¨è½¬è¯‘ä¹‹åçš„javaæ–‡ä»¶ä¸­,ä¼šè¢«è½¬åŒ–æˆjavaä»£ç </p></li><li><p>ELè¡¨è¾¾å¼æ˜¯ä¸€ç§åå°æŠ€æœ¯,æœåŠ¡å™¨ä¸Šè¿è¡Œ,ä¸æ˜¯åœ¨æµè§ˆå™¨ä¸Šè¿è¡Œ,ä¸èƒ½ç”¨äºHTMLé¡µé¢</p></li><li><p>ELè¡¨è¾¾å¼åº•å±‚æ˜¯é€šè¿‡åå°„å®ç°çš„,åœ¨è·å–å¯¹è±¡å±æ€§å€¼æ—¶æ˜¯é€šè¿‡å¯¹è±¡çš„getæ–¹æ³•å®ç°çš„</p></li></ul><h3 id="ELè¡¨è¾¾å¼è¿ç®—ç¬¦">ELè¡¨è¾¾å¼è¿ç®—ç¬¦</h3><h4 id="è¿ç®—ç¬¦">è¿ç®—ç¬¦</h4><p><strong>ç®—æ•°è¿ç®—ç¬¦</strong>: + - * / %</p><p><strong>æ¯”è¾ƒè¿ç®—ç¬¦:</strong></p><p>==  eq equals</p><p>&gt;gt greater then</p><p>&lt;     lt   lower then</p><p>&gt;=  ge  greater then or equals</p><p>&lt;=  le   lower then or equals</p><p>!=   ne   not equals</p><p><strong>é€»è¾‘è¿ç®—ç¬¦</strong>: || or    &amp;&amp; and</p><p><strong>ä¸‰ç›®è¿ç®—ç¬¦</strong>: ${æ¡ä»¶ ?è¡¨è¾¾å¼1 : è¡¨è¾¾å¼2}</p><p><strong>åˆ¤ç©ºè¿ç®—ç¬¦</strong>: empty</p><h4 id="ä½¿ç”¨">ä½¿ç”¨</h4><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page import&#x3D;&quot;java.util.List&quot; %&gt;&lt;%@ page import&#x3D;&quot;java.util.ArrayList&quot; %&gt;&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt;    &lt;title&gt;Title&lt;&#x2F;title&gt;&lt;&#x2F;head&gt;&lt;body&gt;&lt;%--+ä¸¤ç«¯å¦‚æœæœ‰å­—ç¬¦ä¸²,ä¼šå°è¯•å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—ä¹‹åè¿›è¡ŒåŠ æ³•è¿ç®—&#x2F;å¦‚æœé™¤ä»¥0 ç»“æœä¸ºInfinity è€Œä¸æ˜¯å‡ºç°å¼‚å¸¸%å¦‚æœå’Œ0å–ä½™æ•°,é‚£ä¹ˆä¼šå‡ºç°å¼‚å¸¸--%&gt;    ç®—æ•°è¿ç®—ç¬¦ï¼š    &lt;hr&#x2F;&gt;    $&#123;10 + 10&#125;&lt;br&#x2F;&gt;    $&#123;&quot;10&quot; + 10&#125;&lt;br&#x2F;&gt;    $&#123;&quot;10&quot; + &quot;10&quot;&#125;&lt;br&#x2F;&gt;    &lt;%--$&#123;&quot;10a&quot; + 10&#125;&lt;br&#x2F;&gt;--%&gt;    $&#123;10&#x2F;0&#125;&lt;br&#x2F;&gt;    &lt;%-- $&#123;10%0&#125;&lt;br&#x2F;&gt;--%&gt;    å…³ç³»è¿ç®—ç¬¦&#x2F;æ¯”è¾ƒè¿ç®—ç¬¦    &lt;%--    æ¯”è¾ƒè¿ç®—ç¬¦æ¨èå†™æˆå­—æ¯å½¢å¼,ä¸æ¨èä½¿ç”¨ &#x3D;&#x3D; &gt;&#x3D;  &lt;&#x3D;    --%&gt;    &lt;hr&#x2F;&gt;    $&#123;10 &#x3D;&#x3D; 10&#125;&lt;br&#x2F;&gt;    $&#123;10 eq 10&#125;&lt;br&#x2F;&gt;    $&#123;10 gt 8&#125;&lt;br&#x2F;&gt;    é€»è¾‘è¿ç®—ç¬¦    &lt;hr&#x2F;&gt;    $&#123; true || false&#125;&lt;br&#x2F;&gt;    $&#123; true or false&#125;&lt;br&#x2F;&gt;    $&#123; true &amp;&amp; false&#125;&lt;br&#x2F;&gt;    $&#123; true and false&#125;&lt;br&#x2F;&gt;    æ¡ä»¶è¿ç®—ç¬¦&#x2F;ä¸‰ç›®è¿ç®—ç¬¦    &lt;hr&#x2F;&gt;    $&#123;(100-1)%3&#x3D;&#x3D;0?10+1:10-1&#125;&lt;br&#x2F;&gt;    åˆ¤æ–­ç©ºè¿ç®—ç¬¦    &lt;%--empty ä¸ºnull åˆ™ä¸ºtrue--%&gt;    &lt;%  &#x2F;&#x2F;å‘åŸŸä¸­æ”¾å…¥æ•°æ®        pageContext.setAttribute(&quot;a&quot;,null);        pageContext.setAttribute(&quot;b&quot;,&quot;&quot;);        int[] arr &#x3D;&#123;&#125;;        pageContext.setAttribute(&quot;arr&quot;,arr);        List list &#x3D;new ArrayList();        pageContext.setAttribute(&quot;list&quot;,list);    %&gt;    &lt;hr&#x2F;&gt;    $&#123;empty a&#125;&lt;br&#x2F;&gt;    $&#123;empty b&#125;&lt;br&#x2F;&gt;&lt;%--å­—ç¬¦ä¸²é•¿åº¦ä¸º0 åˆ™è®¤ä¸ºæ˜¯ç©º--%&gt;    $&#123;empty arr&#125;&lt;br&#x2F;&gt;&lt;%--æ•°ç»„é•¿åº¦ä¸º0 è®¤ä¸ºä¸æ˜¯ç©º--%&gt;    $&#123;empty list&#125;&lt;br&#x2F;&gt;&lt;%--é›†åˆé•¿åº¦ä¸º0 è®¤ä¸ºæ˜¯ç©º--%&gt;    $&#123;list.size() eq 0&#125;&lt;br&#x2F;&gt;&lt;%--é›†åˆé•¿åº¦ä¸º0 è®¤ä¸ºæ˜¯ç©º--%&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;</code></pre><h2 id="æ¡ˆä¾‹ä¸€ä¼˜åŒ–ï¼šä½¿ç”¨ELè¡¨è¾¾å¼ä¼˜åŒ–æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯çš„é¡µé¢å¤„ç†">æ¡ˆä¾‹ä¸€ä¼˜åŒ–ï¼šä½¿ç”¨ELè¡¨è¾¾å¼ä¼˜åŒ–æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯çš„é¡µé¢å¤„ç†</h2><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page import&#x3D;&quot;java.util.List&quot; %&gt;&lt;%@ page import&#x3D;&quot;com.msb.pojo.Emp&quot; %&gt;&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;&lt;html&gt;    &lt;head&gt;        &lt;title&gt;Title&lt;&#x2F;title&gt;        &lt;style&gt;            table&#123;                border: 3px solid blue;                width: 80%;                margin: 0px auto;            &#125;            td,th&#123;                border: 2px solid green;            &#125;        &lt;&#x2F;style&gt;    &lt;&#x2F;head&gt;    &lt;body&gt;        &lt;table cellspacing&#x3D;&quot;0px&quot; cellpadding&#x3D;&quot;0px&quot;&gt;            &lt;tr&gt;                &lt;th&gt;ç¼–å·&lt;&#x2F;th&gt;                &lt;th&gt;å§“å&lt;&#x2F;th&gt;                &lt;th&gt;ä¸Šçº§ç¼–å·&lt;&#x2F;th&gt;                &lt;th&gt;èŒåŠ¡&lt;&#x2F;th&gt;                &lt;th&gt;å…¥èŒæ—¥æœŸ&lt;&#x2F;th&gt;                &lt;th&gt;è–ªèµ„&lt;&#x2F;th&gt;                &lt;th&gt;è¡¥åŠ©&lt;&#x2F;th&gt;                &lt;th&gt;éƒ¨é—¨å·&lt;&#x2F;th&gt;                &lt;th&gt;è–ªèµ„ç­‰çº§&lt;&#x2F;th&gt;            &lt;&#x2F;tr&gt;            &lt;%            List&lt;Emp&gt; emps &#x3D; (List&lt;Emp&gt;) request.getAttribute(&quot;emps&quot;);            for (Emp emp : emps) &#123;                pageContext.setAttribute(&quot;emp&quot;, emp);&#x2F;&#x2F;å°†å‘˜å·¥å¯¹è±¡æ”¾å…¥PageContext åŸŸ                %&gt;            &lt;tr&gt;                &lt;td&gt;$&#123;emp.empno&#125;&lt;&#x2F;td&gt;                &lt;td&gt;$&#123;emp.ename&#125;&lt;&#x2F;td&gt;                &lt;td&gt;$&#123;emp.mgr&#125;&lt;&#x2F;td&gt;                &lt;td&gt;$&#123;emp.job&#125;&lt;&#x2F;td&gt;                &lt;td&gt;$&#123;emp.hiredate&#125;&lt;&#x2F;td&gt;                &lt;td&gt;$&#123;emp.sal&#125;&lt;&#x2F;td&gt;                &lt;td&gt;$&#123;emp.comm&#125;&lt;&#x2F;td&gt;                &lt;td&gt;$&#123;emp.deptno&#125;&lt;&#x2F;td&gt;                &lt;td&gt;                    $&#123;emp.sal le 500?&quot;A&quot;:&quot;&quot;&#125;                    $&#123;emp.sal gt 500 and emp.sal le 1000?&quot;B&quot;:&quot;&quot;&#125;                    $&#123;emp.sal gt 1000 and emp.sal le 1500?&quot;C&quot;:&quot;&quot;&#125;                    $&#123;emp.sal gt 1500 and emp.sal le 2000?&quot;D&quot;:&quot;&quot;&#125;                    $&#123;emp.sal gt 2000 and emp.sal le 3000?&quot;E&quot;:&quot;&quot;&#125;                    $&#123;emp.sal gt 3000 and emp.sal le 4000?&quot;F&quot;:&quot;&quot;&#125;                    $&#123;emp.sal gt 4000?&quot;G&quot;:&quot;&quot;&#125;                &lt;&#x2F;td&gt;            &lt;&#x2F;tr&gt;            &lt;%            &#125;            %&gt;        &lt;&#x2F;table&gt;    &lt;&#x2F;body&gt;&lt;&#x2F;html&gt;</code></pre><h2 id="JSTL">JSTL</h2><p>JSTLï¼ˆJava server pages standarded tag libraryï¼Œå³JSPæ ‡å‡†æ ‡ç­¾åº“ï¼‰æ˜¯ç”±JCPï¼ˆJava community Procesï¼‰æ‰€åˆ¶å®šçš„æ ‡å‡†è§„èŒƒï¼Œå®ƒä¸»è¦æä¾›ç»™Java Webå¼€å‘äººå‘˜ä¸€ä¸ªæ ‡å‡†é€šç”¨çš„æ ‡ç­¾åº“ï¼Œå¹¶ç”±Apacheçš„Jakartaå°ç»„æ¥ç»´æŠ¤ã€‚</p><p><strong>ä½¿ç”¨å‰æ</strong></p><ol><li><p>éœ€è¦å¯¼åŒ…</p></li><li><p>é¡µé¢ä¸­é€šè¿‡taglibæŒ‡ä»¤å¼•å…¥æ ‡ç­¾åº“</p><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@   taglib uri&#x3D;&quot;æ ‡ç­¾åº“çš„å®šä½&quot; prefix&#x3D;&quot;å‰ç¼€(ç®€ç§°)&quot; %&gt;</code></pre><p>uriå¯ä»¥åœ¨å¯¹åº”çš„tldæ–‡ä»¶ä¸­æ‰¾åˆ°</p></li></ol><h3 id="æ ¸å¿ƒæ ‡ç­¾åº“">æ ¸å¿ƒæ ‡ç­¾åº“</h3><p>å¯¼å…¥è¯­å¥ä¸º</p><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ taglib prefix&#x3D;&quot;c&quot; uri&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;jsp&#x2F;jstl&#x2F;core&quot;%&gt;</code></pre><h4 id="æ“ä½œå¯¹è±¡çš„æ ‡ç­¾c-set-out-remove">æ“ä½œå¯¹è±¡çš„æ ‡ç­¾c:set/out/remove</h4><ul><li>==&lt;c:set&gt;==         å‘åŸŸå¯¹è±¡ä¸­æ”¾å…¥æ•°æ®  setAttribute</li><li>==&lt;c:out&gt;==        ä»åŸŸå¯¹è±¡ä¸­å–å‡ºæ•°æ®  getAttribute</li><li>==&lt;c:remove&gt;== ä»åŸŸå¯¹è±¡ä¸­ç§»é™¤æ•°æ®   removeAttribute</li></ul><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%--    c:set        scope æŒ‡å®šæ”¾æ•°æ®çš„åŸŸ å¯é€‰å€¼ page request session application        var   æ•°æ®çš„åç§°        value æ•°æ®    --%&gt;    &lt;c:set scope&#x3D;&quot;page&quot; var&#x3D;&quot;msg&quot; value&#x3D;&quot;pageMessage&quot;&gt;&lt;&#x2F;c:set&gt;    &lt;c:set scope&#x3D;&quot;request&quot; var&#x3D;&quot;msg&quot; value&#x3D;&quot;requestMessage&quot;&gt;&lt;&#x2F;c:set&gt;    &lt;c:set scope&#x3D;&quot;session&quot; var&#x3D;&quot;msg&quot; value&#x3D;&quot;sessionMessage&quot;&gt;&lt;&#x2F;c:set&gt;    &lt;c:set scope&#x3D;&quot;application&quot; var&#x3D;&quot;msg&quot; value&#x3D;&quot;applicationMessage&quot;&gt;&lt;&#x2F;c:set&gt;    &lt;%--ç§»é™¤æŒ‡å®šåŸŸä¸­çš„å€¼--%&gt;   &lt;%-- &lt;c:remove var&#x3D;&quot;msg&quot; scope&#x3D;&quot;page&quot;&gt;&lt;&#x2F;c:remove&gt;    &lt;c:remove var&#x3D;&quot;msg&quot; scope&#x3D;&quot;request&quot;&gt;&lt;&#x2F;c:remove&gt;--%&gt;    &lt;c:remove var&#x3D;&quot;msg&quot; scope&#x3D;&quot;session&quot;&gt;&lt;&#x2F;c:remove&gt;    &lt;c:remove var&#x3D;&quot;msg&quot; scope&#x3D;&quot;application&quot;&gt;&lt;&#x2F;c:remove&gt;    &lt;%--é€šè¿‡ELè¡¨è¾¾å¼å–å‡ºåŸŸä¸­çš„å€¼--%&gt;    &lt;hr&#x2F;&gt;    $&#123;pageScope.msg&#125;&lt;br&#x2F;&gt;    $&#123;requestScope.msg&#125;&lt;br&#x2F;&gt;    $&#123;sessionScope.msg&#125;&lt;br&#x2F;&gt;    $&#123;applicationScope.msg &#125;&lt;br&#x2F;&gt;    &lt;hr&#x2F;&gt;    &lt;%--é€šè¿‡c:outæ ‡ç­¾è·å–åŸŸä¸­çš„å€¼--%&gt;    &lt;c:out value&#x3D;&quot;$&#123;pageScope.msg&#125;&quot; default&#x3D;&quot;page msg not found&quot;&#x2F;&gt;    &lt;c:out value&#x3D;&quot;$&#123;requestScope.msg&#125;&quot; default&#x3D;&quot;request msg not found&quot;&#x2F;&gt;    &lt;c:out value&#x3D;&quot;$&#123;sessionScope.msg&#125;&quot; default&#x3D;&quot;session msg not found&quot;&#x2F;&gt;    &lt;c:out value&#x3D;&quot;$&#123;applicationScope.msg&#125;&quot; default&#x3D;&quot;application msg not found&quot;&#x2F;&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;</code></pre><h4 id="å¤šæ¡ä»¶åˆ†æ”¯æ ‡ç­¾c-ifå’Œc-choose">å¤šæ¡ä»¶åˆ†æ”¯æ ‡ç­¾c:ifå’Œc:choose</h4><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%--    éšæœºç”Ÿæˆä¸€ä¸ªåˆ†æ•°  0-100    &gt;&#x3D;90 A    &gt;&#x3D;80 B    &gt;&#x3D;70 C    &gt;&#x3D;60 D    &lt;60  E    --%&gt;    &lt;%        int score &#x3D;new Random().nextInt(101);        pageContext.setAttribute(&quot;score&quot;, score);    %&gt;    &lt;%--    test  åˆ¤æ–­æ¡ä»¶    c:ifå¯ä»¥å°†testçš„ç»“æœæ”¾å…¥æŒ‡å®šçš„åŸŸä¸­    scope æŒ‡å®šå­˜æ”¾çš„åŸŸ    var   æ•°æ®å    --%&gt;    åˆ†æ•°:$&#123;score&#125;&lt;br&#x2F;&gt; ç­‰çº§:    &lt;c:if test&#x3D;&quot;$&#123;score ge 90&#125;&quot; scope&#x3D;&quot;page&quot; var&#x3D;&quot;f1&quot;&gt;A&lt;&#x2F;c:if&gt;    &lt;c:if test&#x3D;&quot;$&#123;score ge 80 and score lt 90&#125;&quot; scope&#x3D;&quot;page&quot; var&#x3D;&quot;f2&quot;&gt;B&lt;&#x2F;c:if&gt;    &lt;c:if test&#x3D;&quot;$&#123;score ge 70 and score lt 80&#125;&quot; scope&#x3D;&quot;page&quot; var&#x3D;&quot;f3&quot;&gt;C&lt;&#x2F;c:if&gt;    &lt;c:if test&#x3D;&quot;$&#123;score ge 60 and score lt 70&#125;&quot; scope&#x3D;&quot;page&quot; var&#x3D;&quot;f4&quot;&gt;D&lt;&#x2F;c:if&gt;    &lt;c:if test&#x3D;&quot;$&#123;score lt 60&#125;&quot; scope&#x3D;&quot;page&quot; var&#x3D;&quot;f5&quot;&gt;E&lt;&#x2F;c:if&gt;    &lt;hr&#x2F;&gt;    $&#123;f1&#125;    $&#123;f2&#125;    $&#123;f3&#125;    $&#123;f4&#125;    $&#123;f5&#125;    &lt;hr&#x2F;&gt;    &lt;%--è¾“å‡ºåˆ†æ•°æ˜¯å¦åŠæ ¼--%&gt;    &lt;c:if test&#x3D;&quot;$&#123;score ge 60&#125;&quot; scope&#x3D;&quot;page&quot; var&#x3D;&quot;flag&quot;&gt;åŠæ ¼&lt;&#x2F;c:if&gt;    &lt;c:if test&#x3D;&quot;$&#123;!pageScope.flag&#125;&quot;&gt;ä¸åŠæ ¼&lt;&#x2F;c:if&gt;    &lt;hr&#x2F;&gt;    &lt;c:choose&gt;        &lt;c:when test&#x3D;&quot;$&#123;score ge 90&#125;&quot;&gt;A&lt;&#x2F;c:when&gt;        &lt;c:when test&#x3D;&quot;$&#123;score ge 80&#125;&quot;&gt;B&lt;&#x2F;c:when&gt;        &lt;c:when test&#x3D;&quot;$&#123;score ge 70&#125;&quot;&gt;C&lt;&#x2F;c:when&gt;        &lt;c:when test&#x3D;&quot;$&#123;score ge 60&#125;&quot;&gt;D&lt;&#x2F;c:when&gt;        &lt;c:otherwise&gt;E&lt;&#x2F;c:otherwise&gt;    &lt;&#x2F;c:choose&gt;</code></pre><h4 id="è¿­ä»£æ ‡ç­¾c-foreach">è¿­ä»£æ ‡ç­¾c:foreach</h4><h5 id="æ‰“å°ä¹˜æ³•è¡¨">æ‰“å°ä¹˜æ³•è¡¨</h5><p>c:forEachä¸­çš„<strong>å±æ€§</strong></p><ul><li>==var==: è¿­ä»£å˜é‡, å­˜æ”¾åœ¨pageContextä½œç”¨åŸŸ</li><li>==begin==: è¿­ä»£èµ·å§‹å€¼</li><li>==end==: è¿­ä»£ç»“æŸå€¼</li><li>==step==: è¿­ä»£å˜é‡å˜åŒ–çš„æ­¥é•¿</li></ul><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%--    for ( int i &#x3D;1;i&lt;&#x3D;9 ;i+&#x3D;2)&#123;        pageContext.setAttribute(&quot;i&quot;,i)    &#125;c:foreach æ¯æ¬¡æ‰§æ—¶éƒ½ä¼šå‘pageåŸŸä¸­æ”¾å…¥ä¸€ä¸ªåä¸º i å€¼ä¸ºå½“å‰å€¼è¿™æ ·çš„ä¸€ä¸ªæ“ä½œ    --%&gt;&lt;c:forEach var&#x3D;&quot;i&quot; begin&#x3D;&quot;1&quot; end&#x3D;&quot;9&quot; step&#x3D;&quot;1&quot;&gt;    &lt;c:forEach var&#x3D;&quot;j&quot; begin&#x3D;&quot;1&quot; end&#x3D;&quot;$&#123;i&#125;&quot; step&#x3D;&quot;1&quot;&gt;        $&#123;j&#125; * $&#123;i&#125; &#x3D; $&#123;i*j&#125; &nbsp;    &lt;&#x2F;c:forEach&gt;    &lt;br&#x2F;&gt;&lt;&#x2F;c:forEach&gt;</code></pre><h5 id="éå†å¯¹è±¡æ•°ç»„">éå†å¯¹è±¡æ•°ç»„</h5><ul><li>==items==: è¦éå†çš„é›†åˆ, éœ€è¦ä½¿ç”¨ELè¡¨è¾¾å¼å–å€¼</li><li>==varStatus==: è¿­ä»£å˜é‡çš„çŠ¶æ€</li><li>==index:== ç´¢å¼•, ä»0å¼€å§‹</li><li>==count:== è®¡æ•°, ä»1å¼€å§‹</li><li>==first==: boolean, è¡¨ç¤ºæ˜¯å¦æ˜¯ç¬¬ä¸€ä¸ª</li><li>==last==: boolean, è¡¨ç¤ºæ˜¯å¦æ˜¯æœ€åä¸€ä¸ª</li><li>==current==: å¯¹è±¡, å½“å‰è¿­ä»£çš„å¯¹è±¡å€¼</li></ul><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%--&lt;%&#x2F;&#x2F;åŸæ¥çš„éå†       List&lt;Emp&gt; emps &#x3D; (List&lt;Emp&gt;) request.getAttribute(&quot;emps&quot;);       for (Emp emp : emps) &#123;           pageContext.setAttribute(&quot;emp&quot;, emp);&#x2F;&#x2F;å°†å‘˜å·¥å¯¹è±¡æ”¾å…¥PageContext åŸŸ       %&gt;       c:foreach       --%&gt;       &lt;c:forEach items&#x3D;&quot;$&#123;emps&#125;&quot; var&#x3D;&quot;emp&quot; varStatus&#x3D;&quot;empStatus&quot;&gt;</code></pre><h3 id="æ ¼å¼åŒ–æ ‡ç­¾åº“fmt">æ ¼å¼åŒ–æ ‡ç­¾åº“fmt</h3><h4 id="å¯¼å…¥æ ‡ç­¾">å¯¼å…¥æ ‡ç­¾</h4><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ taglib prefix&#x3D;&quot;fmt&quot; uri&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;jsp&#x2F;jstl&#x2F;fmt&quot;%&gt;</code></pre><h4 id="fmt-formatDate-æ—¥æœŸæ ¼å¼æ ‡ç­¾">&lt;fmt:formatDate&gt;æ—¥æœŸæ ¼å¼æ ‡ç­¾</h4><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;td&gt;    &lt;fmt:formatDate value&#x3D;&quot;$&#123;emp.hiredate&#125;&quot; pattern&#x3D;&quot;yyyyå¹´MMæœˆddæ—¥ HH:mm:ss&quot;&#x2F;&gt;&lt;&#x2F;td&gt;</code></pre><h4 id="æ•°å­—æ ¼å¼åŒ–æ ‡ç­¾">æ•°å­—æ ¼å¼åŒ–æ ‡ç­¾</h4><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;td&gt;    &lt;%--    0 ä»£è¡¨å¿…é¡»æœ‰ä¸€ä½æ•°å­—,å¦‚æœå¯¹åº”çš„ä½ç½®æ²¡æœ‰å€¼æ€ä¹ˆåŠ?è‡ªåŠ¨è¡¥å……0    # ä»£è¡¨æœ‰ä¸€ä½æ•°å­—,å¼€å¤´å’Œç»“å°¾çš„æ‰€æœ‰çš„0ä¸ä¿ç•™    --%&gt;    &yen;&lt;fmt:formatNumber value&#x3D;&quot;$&#123;emp.sal&#125;&quot; pattern&#x3D;&quot;###,##0.00&quot;&#x2F;&gt;&lt;&#x2F;td&gt;</code></pre><h2 id="showEmp-jsé¡µé¢æœ€ç»ˆä¼˜åŒ–">showEmp.jsé¡µé¢æœ€ç»ˆä¼˜åŒ–</h2><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;&lt;%@ taglib prefix&#x3D;&quot;c&quot; uri&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;jsp&#x2F;jstl&#x2F;core&quot; %&gt;&lt;%@taglib prefix&#x3D;&quot;fmt&quot; uri&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;jsp&#x2F;jstl&#x2F;fmt&quot; %&gt;&lt;html&gt;    &lt;head&gt;        &lt;title&gt;Title&lt;&#x2F;title&gt;        &lt;style&gt;            table&#123;                border: 3px solid blue;                width: 80%;                margin: 0px auto;            &#125;            td,th&#123;                border: 2px solid green;            &#125;        &lt;&#x2F;style&gt;    &lt;&#x2F;head&gt;    &lt;body&gt;        &lt;table cellspacing&#x3D;&quot;0px&quot; cellpadding&#x3D;&quot;0px&quot;&gt;            &lt;tr&gt;                &lt;th&gt;åºå·&lt;&#x2F;th&gt;                &lt;th&gt;ç´¢å¼•&lt;&#x2F;th&gt;                &lt;th&gt;isFirst&lt;&#x2F;th&gt;                &lt;th&gt;isLast&lt;&#x2F;th&gt;                &lt;th&gt;ç¼–å·&lt;&#x2F;th&gt;                &lt;th&gt;å§“å&lt;&#x2F;th&gt;                &lt;th&gt;å§“å&lt;&#x2F;th&gt;                &lt;th&gt;ä¸Šçº§ç¼–å·&lt;&#x2F;th&gt;                &lt;th&gt;èŒåŠ¡&lt;&#x2F;th&gt;                &lt;th&gt;å…¥èŒæ—¥æœŸ&lt;&#x2F;th&gt;                &lt;th&gt;è–ªèµ„&lt;&#x2F;th&gt;                &lt;th&gt;è¡¥åŠ©&lt;&#x2F;th&gt;                &lt;th&gt;éƒ¨é—¨å·&lt;&#x2F;th&gt;                &lt;th&gt;è–ªèµ„ç­‰çº§&lt;&#x2F;th&gt;            &lt;&#x2F;tr&gt;            &lt;%-- &lt;%    List&lt;Emp&gt; emps &#x3D; (List&lt;Emp&gt;) request.getAttribute(&quot;emps&quot;);            for (Emp emp : emps) &#123;                pageContext.setAttribute(&quot;emp&quot;,emp);&#x2F;&#x2F;å°†å‘˜å·¥å¯¹è±¡æ”¾å…¥PageContextåŸŸ                %&gt;            c:foreach            items è¦éå†çš„æ•°ç»„&#x2F;List  å¯ä»¥é€šè¿‡ELè¡¨è¾¾å¼å–å‡ºé›†åˆä¹‹åç»™æ”¹å±æ€§èµ‹å€¼            var   ä¸­é—´å˜é‡çš„åç§°            varStatus è®°å½•æ¯ä¸€ä¸ªå¯¹è±¡çŠ¶æ€çš„è®¾ç½®            count ä¸ªæ•°            index ç´¢å¼•            first å¦‚æœå½“å‰å…ƒç´ æ˜¯è¿­ä»£çš„ç¬¬ä¸€ä¸ªå…ƒç´  true å¦åˆ™ä¸ºfalse            last  å¦‚æœå½“å‰å…ƒç´ æ˜¯è¿­ä»£çš„æœ€åä¸€ä¸ªå…ƒç´  true å¦åˆ™ä¸ºfalse            current å½“å‰è¿­ä»£çš„å…ƒç´ æœ¬èº«            --%&gt;            &lt;c:forEach items&#x3D;&quot;$&#123;emps&#125;&quot; var&#x3D;&quot;emp&quot; varStatus&#x3D;&quot;empStatus&quot;&gt;                &lt;tr&gt;                    &lt;%--ä½¿ç”¨ELè¡¨è¾¾å¼æ¥å–å‡ºåŸŸå¯¹è±¡é‡Œçš„å¯¹è±¡å±æ€§å€¼--%&gt;                    &lt;%-- &lt;td&gt;&lt;%&#x3D;emp.getEmpno()%&gt;&lt;&#x2F;td&gt;            &lt;td&gt;&lt;%&#x3D;emp.getEname()%&gt;&lt;&#x2F;td&gt;            &lt;td&gt;&lt;%&#x3D;emp.getMgr()%&gt;&lt;&#x2F;td&gt;            &lt;td&gt;&lt;%&#x3D;emp.getJob()%&gt;&lt;&#x2F;td&gt;            &lt;td&gt;&lt;%&#x3D;emp.getHiredate()%&gt;&lt;&#x2F;td&gt;            &lt;td&gt;&lt;%&#x3D;emp.getSal()%&gt;&lt;&#x2F;td&gt;            &lt;td&gt;&lt;%&#x3D;emp.getComm()%&gt;&lt;&#x2F;td&gt;            &lt;td&gt;&lt;%&#x3D;emp.getDeptno()%&gt;&lt;&#x2F;td&gt;--%&gt;            &lt;td&gt;$&#123;empStatus.count&#125;&lt;&#x2F;td&gt;            &lt;td&gt;$&#123;empStatus.index&#125;&lt;&#x2F;td&gt;            &lt;td&gt;$&#123;empStatus.first&#125;&lt;&#x2F;td&gt;            &lt;td&gt;$&#123;empStatus.last&#125;&lt;&#x2F;td&gt;            &lt;td&gt;$&#123;emp.empno&#125;&lt;&#x2F;td&gt;            &lt;td&gt;$&#123;emp.ename&#125;&lt;&#x2F;td&gt;            &lt;td&gt;$&#123;empStatus.current.ename&#125;&lt;&#x2F;td&gt;            &lt;td&gt;$&#123;emp.mgr&#125;&lt;&#x2F;td&gt;            &lt;td&gt;$&#123;emp.job&#125;&lt;&#x2F;td&gt;            &lt;td&gt;                &lt;fmt:formatDate value&#x3D;&quot;$&#123;emp.hiredate&#125;&quot; pattern&#x3D;&quot;yyyyå¹´MMæœˆddæ—¥ HH:mm:ss&quot;&#x2F;&gt;            &lt;&#x2F;td&gt;            &lt;td&gt;                &lt;%--    0 ä»£è¡¨å¿…é¡»æœ‰ä¸€ä½æ•°å­—,å¦‚æœå¯¹åº”çš„ä½ç½®æ²¡æœ‰å€¼æ€ä¹ˆåŠ?è‡ªåŠ¨è¡¥å……0    # ä»£è¡¨æœ‰ä¸€ä½æ•°å­—,å¼€å¤´å’Œç»“å°¾çš„æ‰€æœ‰çš„0ä¸ä¿ç•™    --%&gt;                &yen;&lt;fmt:formatNumber value&#x3D;&quot;$&#123;emp.sal&#125;&quot; pattern&#x3D;&quot;###,##0.00&quot;&#x2F;&gt;            &lt;&#x2F;td&gt;            &lt;td&gt;$&#123;emp.comm&#125;&lt;&#x2F;td&gt;            &lt;td&gt;$&#123;emp.deptno&#125;&lt;&#x2F;td&gt;            &lt;td&gt;&lt;%--out.print(&quot;&lt;td&gt;&quot;)--%&gt;                &lt;%--&lt;%    Double sal &#x3D; emp.getSal();                if(sal&lt;&#x3D;500)&#123;                    out.print(&quot;A&quot;);                &#125;else if( sal &lt;&#x3D;1000)&#123;                    out.print(&quot;B&quot;);                &#125;else if( sal &lt;&#x3D;1500)&#123;                    out.print(&quot;C&quot;);                &#125;else if( sal &lt;&#x3D;2000)&#123;                    out.print(&quot;D&quot;);                &#125;else if( sal &lt;&#x3D;3000)&#123;                    out.print(&quot;E&quot;);                &#125;else if( sal &lt;&#x3D;4000)&#123;                    out.print(&quot;F&quot;);                &#125;else &#123;                    out.print(&quot;G&quot;);                &#125;                %&gt;--%&gt;                &lt;%--ä½¿ç”¨ELç®—æ•°è¡¨è¾¾å¼æ¥åˆ¤æ–­ç­‰çº§    $&#123;emp.sal le 500?&quot;A&quot;:&quot;&quot;&#125;                $&#123;emp.sal gt 500 and emp.sal le 1000?&quot;B&quot;:&quot;&quot;&#125;                $&#123;emp.sal gt 1000 and emp.sal le 1500?&quot;C&quot;:&quot;&quot;&#125;                $&#123;emp.sal gt 1500 and emp.sal le 2000?&quot;D&quot;:&quot;&quot;&#125;                $&#123;emp.sal gt 2000 and emp.sal le 3000?&quot;E&quot;:&quot;&quot;&#125;                $&#123;emp.sal gt 3000 and emp.sal le 4000?&quot;F&quot;:&quot;&quot;&#125;                $&#123;emp.sal gt 4000?&quot;G&quot;:&quot;&quot;&#125;--%&gt;                &lt;%--ä½¿ç”¨JSTLæ ‡ç­¾--%&gt;                &lt;c:choose&gt;                    &lt;c:when test&#x3D;&quot;$&#123;emp.sal le 500&#125;&quot;&gt;A&lt;&#x2F;c:when&gt;                    &lt;c:when test&#x3D;&quot;$&#123;emp.sal le 1000&#125;&quot;&gt;B&lt;&#x2F;c:when&gt;                    &lt;c:when test&#x3D;&quot;$&#123;emp.sal le 1500&#125;&quot;&gt;C&lt;&#x2F;c:when&gt;                    &lt;c:when test&#x3D;&quot;$&#123;emp.sal le 2000&#125;&quot;&gt;D&lt;&#x2F;c:when&gt;                    &lt;c:when test&#x3D;&quot;$&#123;emp.sal le 3000&#125;&quot;&gt;E&lt;&#x2F;c:when&gt;                    &lt;c:when test&#x3D;&quot;$&#123;emp.sal le 4000&#125;&quot;&gt;F&lt;&#x2F;c:when&gt;                    &lt;c:when test&#x3D;&quot;$&#123;emp.sal gt 4000&#125;&quot;&gt;G&lt;&#x2F;c:when&gt;                &lt;&#x2F;c:choose&gt;            &lt;&#x2F;td&gt;            &lt;&#x2F;tr&gt;        &lt;&#x2F;c:forEach&gt;    &lt;&#x2F;table&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;</code></pre><h1>Filter</h1><h2 id="æ¡ˆä¾‹ï¼šé€šè¿‡è¿‡æ»¤éªŒè¯ç™»å½•">æ¡ˆä¾‹ï¼šé€šè¿‡è¿‡æ»¤éªŒè¯ç™»å½•</h2><p>éœ€æ±‚ï¼šé€šè¿‡è¿‡æ»¤å™¨æ§åˆ¶ï¼Œåªæœ‰ç™»é™†ä¹‹åå¯ä»¥åå¤è¿›å…¥welcome.jspæ¬¢è¿é¡µï¼Œå¦‚æœæ²¡æœ‰ç™»å½•ï¼Œæç¤ºç”¨æˆ·è¿›å…¥ç™»å½•é¡µè¿›è¡Œç™»é™†æ“ä½œã€‚</p><img src="JavaEE/20210808090141-20220507093631591.png" alt="image-20210808090117141" style="zoom:50%;" /><h6 id="login-jsp">login.jsp</h6><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;&lt;html&gt;  &lt;head&gt;    &lt;title&gt;$Title%sSourceCode%lt;&#x2F;title&gt;  &lt;&#x2F;head&gt;  &lt;body&gt;  &lt;img src&#x3D;&quot;static&#x2F;img&#x2F;logo.png&quot;&gt;  please login ... ... &lt;br&#x2F;&gt;  &lt;form action&#x3D;&quot;loginController.do&quot; method&#x3D;&quot;post&quot;&gt;    ç”¨æˆ·å:&lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;user&quot;&gt; &lt;br&#x2F;&gt;    å¯†ç :&lt;input type&#x3D;&quot;password&quot; name&#x3D;&quot;pwd&quot;&gt;&lt;br&#x2F;&gt;    &lt;input type&#x3D;&quot;submit&quot; value&#x3D;&quot;æäº¤&quot;&gt;  &lt;&#x2F;form&gt;  &lt;&#x2F;body&gt;&lt;&#x2F;html&gt;</code></pre><h6 id="welcome-jsp">welcome.jsp</h6><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt;    &lt;title&gt;Title&lt;&#x2F;title&gt;&lt;&#x2F;head&gt;&lt;body&gt;&lt;img src&#x3D;&quot;static&#x2F;img&#x2F;logo.png&quot;&gt;æ¬¢è¿$&#123;user.username&#125;ç™»é™†!!!&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;</code></pre><h6 id="aaa-jsp">aaa.jsp</h6><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt;    &lt;title&gt;Title&lt;&#x2F;title&gt;&lt;&#x2F;head&gt;&lt;body&gt;this is page aaa&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;</code></pre><p>å‡†å¤‡Controllerä»£ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/loginController.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// è·å–ç”¨æˆ·åå’Œå¯†ç </span>        <span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pwd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é“¾æ¥æ•°æ®åº“æ ¡éªŒç™»å½•</span>        <span class="token comment">// ç™»å½•æˆåŠŸ,å°†ç”¨æˆ·ä¿¡æ¯æ”¾å…¥SessionåŸŸ</span>        <span class="token class-name">User</span> user <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>        req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·³è½¬åˆ°æ¬¢è¿é¡µ</span>        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"welcome.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å‡†å¤‡ç™»å½•æ§åˆ¶è¿‡æ»¤å™¨</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/*"</span><span class="token punctuation">)</span><span class="token comment">// ä»»ä½•èµ„æºéƒ½è¦è¿›è¡Œè¿‡æ»¤,</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Filter1_LoginFilter</span>  <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">HttpServletRequest</span> req<span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span>servletRequest<span class="token punctuation">;</span>        <span class="token class-name">HttpServletResponse</span> resp<span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span> servletResponse<span class="token punctuation">;</span>        <span class="token comment">//æ— è®ºæ˜¯å¦ç™»å½•è¿‡,éƒ½è¦æ”¾è¡Œçš„èµ„æº   ç™»å½•é¡µ  ç™»å½•æ ¡éªŒController å’Œä¸€äº›é™æ€èµ„æº</span>        <span class="token class-name">String</span> requestURI <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>requestURI<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>requestURI<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"login.jsp"</span><span class="token punctuation">)</span><span class="token operator">||</span> requestURI<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"loginController.do"</span><span class="token punctuation">)</span><span class="token operator">||</span> requestURI<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"/static/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">// ç›´æ¥æ”¾è¡Œ</span>            filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// åç»­ä»£ç ä¸å†æ‰§è¡Œ</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// éœ€è¦ç™»å½•ä¹‹åæ‰èƒ½è®¿é—®çš„èµ„æº,å¦‚æœæ²¡ç™»å½•,é‡å®šå‘åˆ°login.jspä¸Š,æç¤ºç”¨æˆ·è¿›è¡Œç™»å½•</span>        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> user <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> user<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// å¦‚æœç™»å½•è¿‡ æ”¾è¡Œ</span>            filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token comment">// æ²¡æœ‰ç™»å½•è¿‡,è·³è½¬è‡³ç™»å½•é¡µ</span>            resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"login.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h1>Listener</h1><h2 id="æ¡ˆä¾‹ï¼šè®°å½•è¯·æ±‚æ—¥å¿—">æ¡ˆä¾‹ï¼šè®°å½•è¯·æ±‚æ—¥å¿—</h2><h6 id="RequestLoginListener-java">RequestLoginListener.java</h6><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebListener</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestLogListener</span> <span class="token keyword">implements</span> <span class="token class-name">ServletRequestListener</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">SimpleDateFormat</span> simpleDateFormat<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">requestDestroyed</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestEvent</span> sre<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">requestInitialized</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestEvent</span> sre<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// è·å¾—è¯·æ±‚å‘å‡ºçš„IP</span>        <span class="token comment">// è·å¾—è¯·æ±‚çš„URL</span>        <span class="token comment">// è·å¾—è¯·æ±‚äº§ç”Ÿçš„æ—¶é—´</span>        <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span>sre<span class="token punctuation">.</span><span class="token function">getServletRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> remoteHost <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRemoteHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> requestURL <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> reqquestDate <span class="token operator">=</span> simpleDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å‡†å¤‡è¾“å‡ºæµ</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">PrintWriter</span> pw <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"d:/msb.txt"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pw<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>remoteHost<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>requestURL<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>reqquestDate <span class="token punctuation">)</span><span class="token punctuation">;</span>            pw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="æ¡ˆä¾‹ï¼šæ˜¾ç¤ºåœ¨çº¿äººæ•°">æ¡ˆä¾‹ï¼šæ˜¾ç¤ºåœ¨çº¿äººæ•°</h2><p><strong>éœ€æ±‚</strong>ï¼šå¼€å¯ä¸€æ¬¡ä¼šè¯session åœ¨çº¿äººæ•°åŠ ä¸€ é”€æ¯ä¼šè¯ä»¥ååœ¨çº¿äººæ•°å‡ä¸€</p><p>ä½¿ç”¨countæ¥è®¡æ•°ï¼Œç„¶å<strong>å­˜åœ¨applicationåŸŸä¸­</strong></p><h6 id="OnlineNumberListener">OnlineNumberListener:</h6><p>è·å–applicationåŸŸå¯¹è±¡ï¼Œå­˜å…¥æ•°æ®countï¼Œå¦‚æœä¸€æ¬¡sessionå¼€å¯ï¼Œ++countï¼›ä¸€æ¬¡sessionå…³é—­ï¼Œâ€“count</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebListener</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OnlineNumberListener</span> <span class="token keyword">implements</span> <span class="token class-name">HttpSessionListener</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionCreated</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionEvent</span> se<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//å‘applicationåŸŸä¸­å¢åŠ ä¸€ä¸ªæ•°å­—</span>        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> se<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ServletContext</span> application <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> count <span class="token operator">=</span> application<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"count"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> count<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//ç¬¬ä¸€æ¬¡æ”¾å…¥æ•°æ®</span>            application<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"count"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> count<span class="token punctuation">;</span>            application<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"count"</span><span class="token punctuation">,</span> <span class="token operator">++</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionDestroyed</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionEvent</span> se<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//å‘applicationåŸŸä¸­å‡å°‘ä¸€ä¸ªæ•°å­—</span>        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> se<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ServletContext</span> application <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> count <span class="token operator">=</span> application<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"count"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> count1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> count<span class="token punctuation">;</span>        application<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"count"</span><span class="token punctuation">,</span><span class="token operator">--</span>count1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="æ¡ˆä¾‹ï¼šé‡å¯å…ç™»å½•">æ¡ˆä¾‹ï¼šé‡å¯å…ç™»å½•</h2><h3 id="Sessionåºåˆ—åŒ–å’Œååºåˆ—åŒ–">Sessionåºåˆ—åŒ–å’Œååºåˆ—åŒ–</h3><p>1ã€åºåˆ—åŒ–ä¸ååºåˆ—</p><p>æŠŠå¯¹è±¡è½¬åŒ–ä¸ºå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ç§°ä¸ºåºåˆ—åŒ–ï¼ˆä¿å­˜åˆ°ç¡¬ç›˜ï¼ŒæŒä¹…åŒ–ï¼‰</p><p>æŠŠå­—èŠ‚åºåˆ—è½¬åŒ–ä¸ºå¯¹è±¡çš„è¿‡ç¨‹ç§°ä¸ºååºåˆ—åŒ–ï¼ˆå­˜æ”¾äºå†…å­˜ï¼‰</p><p>2ã€åºåˆ—åŒ–çš„ç”¨é€”</p><p>æŠŠå¯¹è±¡çš„å­—èŠ‚åºåˆ—æ°¸ä¹…ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šï¼Œé€šå¸¸æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚</p><p>æŠŠç½‘ç»œä¼ è¾“çš„å¯¹è±¡é€šè¿‡å­—èŠ‚åºåˆ—åŒ–ï¼Œæ–¹ä¾¿ä¼ è¾“æœ¬èŠ‚ä½œä¸š</p><p>3ã€å®ç°æ­¥éª¤</p><p>æƒ³å®ç°åºåˆ—åŒ–å’Œååºåˆ—åŒ–éœ€è¦æ‰‹åŠ¨é…ç½®</p><p><img src="JavaEE/20210808154352-20220507093631697.png" alt="image-20210808154350410"></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Context</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Manager</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.apache.catalina.session.PersistentManager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Store</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.apache.catalina.session.FileStore<span class="token punctuation">"</span></span> <span class="token attr-name">directory</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d:/session<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Manager</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Context</span><span class="token punctuation">></span></span></code></pre><p>==æ³¨æ„å®ä½“ç±»å¿…é¡»å®ç°serializable æ¥å£==</p><h3 id="å¼€å‘è¿‡ç¨‹">å¼€å‘è¿‡ç¨‹</h3><h4 id="1-å‡†å¤‡å®ä½“ç±»">1 å‡†å¤‡å®ä½“ç±»</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span>  <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> pwd<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="2-å¼€å‘ç™»å½•ä¿¡æ¯è¾“å…¥é¡µé¢">2 å¼€å‘ç™»å½•ä¿¡æ¯è¾“å…¥é¡µé¢</h4><pre class="language-jsp" data-language="jsp"><code class="language-jsp">&lt;form action&#x3D;&quot;loginController.do&quot; method&#x3D;&quot;post&quot;&gt;  ç”¨æˆ·å:&lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;user&quot;&gt; &lt;br&#x2F;&gt;  å¯†ç :&lt;input type&#x3D;&quot;password&quot; name&#x3D;&quot;pwd&quot;&gt;&lt;br&#x2F;&gt;  &lt;input type&#x3D;&quot;submit&quot; value&#x3D;&quot;æäº¤&quot;&gt;&lt;&#x2F;form&gt;</code></pre><h4 id="3å¼€å‘ç™»å½•ä¿¡æ¯éªŒè¯Servlet">3å¼€å‘ç™»å½•ä¿¡æ¯éªŒè¯Servlet</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/loginController.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> pwd <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pwd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// user</span>    <span class="token class-name">User</span> user <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span>pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// session</span>    <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="4-å¼€å‘æ ¡éªŒå½“å‰æ˜¯å¦å·²ç»ç™»å½•çš„Controller">4 å¼€å‘æ ¡éªŒå½“å‰æ˜¯å¦å·²ç»ç™»å½•çš„Controller</h4><p>loginCheckController.java</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/loginCheckController.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginCheckController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åˆ¤æ–­æ˜¯å¦ç™»å½•</span>    <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Object</span> user <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Object</span> listener <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"listener"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å¾—å¯¹åº”çš„ç›‘å¬å™¨</span>    <span class="token class-name">String</span> message <span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> user<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        message<span class="token operator">=</span><span class="token string">"æ‚¨å·²ç»ç™»å½•è¿‡"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        message<span class="token operator">=</span><span class="token string">"æ‚¨è¿˜æœªç™»å½•"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="5-æµ‹è¯•">5  æµ‹è¯•</h4><p>å…ˆç™»å½•,<a href="http://xn--loginCheckController-9x08aw463ah2xark6l.do">ç„¶åè¯·æ±‚loginCheckController.do</a> æ ¡éªŒæ˜¯å¦ç™»å½•è¿‡,ç„¶åé‡å¯é¡¹ç›®,<a href="http://xn--loginCheckController-oy96at320b9nugksh.do">å†èµ·è¯·æ±‚loginCheckController.do</a> æ ¡éªŒæ˜¯å¦ç™»å½•è¿‡,å‘ç°é‡å¯å,ä»ç„¶æ˜¯ç™»å½•è¿‡çš„</p><h4 id="6-ç›‘å¬é’åŒ–å’Œæ´»åŒ–">6 ç›‘å¬é’åŒ–å’Œæ´»åŒ–</h4><p><strong>MySessionActivationListener.java</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MySessionActivationListener</span> <span class="token keyword">implements</span> <span class="token class-name">HttpSessionActivationListener</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span> <span class="token punctuation">&#123;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionWillPassivate</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionEvent</span> se<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>se<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"å³å°†é’åŒ–"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionDidActivate</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionEvent</span> se<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>se<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"å·²ç»æ´»åŒ–"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p><strong>LoginControllerç™»å½•æ—¶ç»‘å®šç›‘å¬å™¨</strong></p><pre class="language-java" data-language="java"><code class="language-java"> <span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/loginController.do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> pwd <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pwd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// user</span>        <span class="token class-name">User</span> user <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span>pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// session</span>        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç»‘å®šç›‘å¬å™¨</span>        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"listener"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MySessionActivationListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>é‡å¯é¡¹ç›® é‡å¤æµ‹è¯•å³å¯</p><p><img src="JavaEE/20210808161851-20220507093632140.png" alt="image-20210808161834961"></p><p><img src="JavaEE/20210808161855-20220507093631903.png" alt="image-20210808161823274"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JQuery</title>
      <link href="/2021/06/18/JQuery/"/>
      <url>/2021/06/18/JQuery/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=08f1bff4-579b-fb80-dcd4-a370277b5780</cover>
      <date>Fri Jun 18 2021 09:56:56 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>å¼•å…¥</h1><h4 id="ä¸ºä»€ä¹ˆä½¿ç”¨jQueryï¼Ÿ">ä¸ºä»€ä¹ˆä½¿ç”¨jQueryï¼Ÿ</h4><p>ä½¿ç”¨åŸç”ŸJavaScriptç¼–ç å­˜åœ¨é—®é¢˜</p><p>1é€‰æ‹©å™¨åŠŸèƒ½å¼±</p><p>2 DOMæ“ä½œç¹çä¹‹æ</p><p>3æµè§ˆå™¨å…¼å®¹æ€§ä¸å¥½</p><p>4åŠ¨ç”»åŠŸèƒ½å¼±</p><span id="more"></span><h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3><p>1å¼ºå¤§çš„é€‰æ‹©å™¨</p><p>2å‡ºè‰²çš„DOMå°è£…</p><p>3å‡ºè‰²çš„æµè§ˆå™¨å…¼å®¹æ€§</p><p>4å¼ºå¤§çš„åŠ¨ç”»åŠŸèƒ½</p><p>5ä½“ç§¯å°ï¼Œå‹ç¼©ååªæœ‰100KBå·¦å³</p><p>6å¯é çš„äº‹ä»¶å¤„ç†æœºåˆ¶</p><p>7ä½¿ç”¨éšå¼è¿­ä»£ç®€åŒ–ç¼–ç¨‹</p><p>8ä¸°å¯Œçš„æ’ä»¶æ”¯æŒ</p><h3 id="å®šä¹‰">å®šä¹‰</h3><p>ç›®å‰æœ€æµè¡Œçš„JavaScriptå‡½æ•°åº“ä¹‹ä¸€ï¼Œå¯¹JavaScriptè¿›è¡Œäº†å°è£…ã€‚å¹¶ä¸æ˜¯ä¸€é—¨æ–°è¯­è¨€ã€‚å°†å¸¸ç”¨çš„ã€å¤æ‚çš„æ“ä½œè¿›è¡Œå‡½æ•°åŒ–å°è£…ï¼Œç›´æ¥è°ƒç”¨ï¼Œå¤§å¤§é™ä½äº†ä½¿ç”¨JavaScriptçš„éš¾åº¦ï¼Œæ”¹å˜äº†ä½¿ç”¨JavaScriptçš„ä¹ æƒ¯ã€‚jQueryèƒ½åšçš„JavaScriptä¹Ÿèƒ½åšï¼Œä½†ä½¿ç”¨jQueryèƒ½å¤§å¹…æé«˜å¼€å‘æ•ˆç‡,ç”±ç¾å›½äººJohn Resigåœ¨2006å¹´æ¨å‡ºï¼Œç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯v3.5.1ã€‚å®—æ—¨ï¼šWrite lessï¼Œdo moreï¼ˆå†™æ›´å°‘ä»£ç ï¼Œåšæ›´å¤šäº‹æƒ…ï¼‰ã€‚å®˜æ–¹ç½‘å€<a href="http://jquery.com/">http://jquery.com/</a></p><h3 id=""></h3><h3 id="-2">==$()==</h3><p>ä½œç”¨ä¸€ï¼šé¡µé¢åŠ è½½å‡½æ•°</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*jQuery(document).ready(function ()&#123;                                var domS1=document.getElementById("s1");                                console.log(domS1.innerText);                        &#125;)*/</span><span class="token comment">// jQuery  å¯ä»¥ç®€å†™ $</span><span class="token comment">/*$(document).ready(function ()&#123;                                var domS1=document.getElementById("s1");                                console.log(domS1.innerText);                        &#125;)*/</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> domS1<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"s1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>domS1<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"ç¬¬äºŒä¸ªé¡µé¢åŠ è½½å‡½æ•°"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"ç¬¬ä¸‰ä¸ªé¡µé¢åŠ è½½å‡½æ•°"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre><p>ä½œç”¨äºŒï¼šé€‰æ‹©å™¨æ ‡å¿—</p><p><strong>$(selector)</strong></p><h1>é€‰æ‹©å™¨</h1><h2 id="åŸºæœ¬é€‰æ‹©å™¨">åŸºæœ¬é€‰æ‹©å™¨</h2><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//æ ‡ç­¾é€‰æ‹©å™¨ $("a")   </span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"h3"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// IDé€‰æ‹©å™¨ $("#id")     $("p#id") </span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#h31"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"h3#h31"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç±»é€‰æ‹©å™¨ $(".class")    $("h2.class") </span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".red1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é€šé…é€‰æ‹©å™¨ $("*") </span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¹¶é›†é€‰æ‹©å™¨$("elem1,elem2,elem3") </span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#h31,span,div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åä»£é€‰æ‹©å™¨$(ul li)   </span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p span"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//  çˆ¶å­é€‰æ‹©å™¨ $(ul>li)   </span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p>span"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  åé¢ç¬¬ä¸€ä¸ªå…„å¼Ÿå…ƒç´  prev + next </span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"h3+p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  åé¢æ‰€æœ‰çš„å…„å¼Ÿå…ƒç´  prev ~ next </span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"h3~p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre><h2 id="å±æ€§é€‰æ‹©å™¨">å±æ€§é€‰æ‹©å™¨</h2><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//[attribute] </span>                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"a[href]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[attribute1][attribute2] </span>                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"a[href][title]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[attribute=value]   </span>                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"a[href='film-2.html']"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[attribute!=value]   </span>                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"a[href][href!='film-2.html']"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[attribute^=value]   </span>                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"a[href^='http']"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[attribute$=value   </span>                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"a[href$='htm']"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[attribute*=value]   </span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"a[href*='mashibing']"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="ä½ç½®é€‰æ‹©å™¨">ä½ç½®é€‰æ‹©å™¨</h2><pre class="language-javascript" data-language="javascript"><code class="language-javascript">  <span class="token comment">//ä½ç½®é’ˆå¯¹æ•´ä¸ªé¡µé¢ </span>                  <span class="token comment">//:first     :last   :odd   :even   </span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p:first"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p:last"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p:odd"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç´¢å¼•ä»0å¼€å§‹ å¥‡æ•°çš„ç´¢å¼• 1 3 5 ç¬¬å¶æ•°çš„å…ƒç´ </span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p:even"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//</span>                  <span class="token comment">//:eq(n)     :gt(n)   :lt(n) </span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p:eq(4)"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//equals </span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p:lt(4)"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//less   than  </span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p:gt(4)"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//greater   than </span><span class="token comment">//ä½ç½®é’ˆå¯¹ä¸Šçº§æ ‡ç­¾ </span>                  <span class="token comment">//:first-child    :last-child   :only-child </span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p:first-child"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p:last-child"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p:only-child"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">//:nth-child(n)   :nth-child(odd|even) :nth-child(xn+y)</span>                   <span class="token comment">// ç´¢å¼•ä»0å¼€å§‹ åªæœ‰æ­¤å¤„ä»1å¼€å§‹</span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p:nth-child(2)"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p:nth-child(odd)"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p:nth-child(even)"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p:nth-child(3n+1)"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"myClass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//n=0,1,2,3 </span></code></pre><h2 id="è¡¨å•é€‰æ‹©å™¨">è¡¨å•é€‰æ‹©å™¨</h2><ul><li><p>å…³äºè¡¨å•é¡¹çš„é€‰æ‹©å™¨</p><p>:text   :password  :radio  :checkbox  :hidden  :file  :submit</p><p>:input  åŒ¹é…æ‰€æœ‰ input, textarea, select å’Œ button å…ƒç´ </p></li><li><p>å…³äºè¡¨å•é¡¹çŠ¶æ€çš„é€‰æ‹©å™¨</p><p>:selected  :checked  :enabled  :disabled  :hidden :visible</p></li><li><p>æ³¨æ„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi mathvariant="normal">&quot;</mi><mi>i</mi><mi>n</mi><mi>p</mi><mi>u</mi><mi>t</mi><mi mathvariant="normal">&quot;</mi><mo stretchy="false">)</mo><mtext>å’Œ</mtext></mrow><annotation encoding="application/x-tex">(&quot;input&quot;)å’Œ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">&quot;</span><span class="mord mathnormal">in</span><span class="mord mathnormal">p</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mord">&quot;</span><span class="mclose">)</span><span class="mord cjk_fallback">å’Œ</span></span></span></span>(â€œ:inputâ€)çš„åŒºåˆ«</p><p>$(â€œinputâ€)ï¼šæ ‡ç­¾é€‰æ‹©å™¨ï¼ŒåªåŒ¹é…inputæ ‡ç­¾,</p><p>$(â€œ:inputâ€)ï¼š åŒ¹é…æ‰€æœ‰ input, textarea, select å’Œ button å…ƒç´ </p></li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//:text   :password    :radio  :checkbox  :hidden    :file  :submit </span>                    <span class="token keyword">var</span> arr <span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ ‡ç­¾åé€‰æ‹©å™¨</span>                                      <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"input[type=hidden]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"input:hidden"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">//:input  åŒ¹é…æ‰€æœ‰ input, textarea, select å’Œ button å…ƒç´  </span>                    <span class="token keyword">var</span> arr <span class="token operator">=</span>   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"input,select,textarea,button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">":input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//:selected    :checked  :enabled  :disabled   </span>                    <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">":disabled"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">":enabled"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">":input:not(:disabled)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">":checked"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">":selected"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">//:hidden :visible       </span>                    <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"input:hidden"</span><span class="token punctuation">)</span>                     <span class="token keyword">var</span>   arr <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">":input:visible"</span><span class="token punctuation">)</span>                  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                      console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token punctuation">&#125;</span></code></pre><h1>å®ŒæˆDOMç¼–ç¨‹</h1><h2 id="æ“ä½œå±æ€§">æ“ä½œå±æ€§</h2><p>åŸç”Ÿjs ä¸­çš„é€šè¿‡å…ƒç´ .å±æ€§åæˆ–è€…å…ƒç´ .setAttribute()æ–¹å¼æ“ä½œå…ƒç´ å±æ€§,jQueryç»™æˆ‘ä»¬å°è£…äº†attr() å’ŒremoveAttr(),æ›´åŠ ä¾¿æ·çš„æ“ä½œå±æ€§</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*          *attr()           *           * */</span><span class="token comment">//è·å¾—å±æ€§</span>             <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#f1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#f1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#f1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"size"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>             <span class="token punctuation">&#125;</span><span class="token comment">//ä¿®æ”¹å±æ€§</span>             <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                 <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#f1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">,</span><span class="token string">"green"</span><span class="token punctuation">)</span>                 <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#f1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"size"</span><span class="token punctuation">,</span><span class="token string">"5"</span><span class="token punctuation">)</span>             <span class="token punctuation">&#125;</span><span class="token comment">//åˆ é™¤å±æ€§</span>             <span class="token keyword">function</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                 <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#f1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">)</span>              <span class="token punctuation">&#125;</span><span class="token comment">//æ·»åŠ å±æ€§</span>             <span class="token keyword">function</span> <span class="token function">fun4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#f1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">,</span><span class="token string">"a"</span><span class="token punctuation">)</span>             <span class="token punctuation">&#125;</span></code></pre><h2 id="æ“ä½œæ ·å¼">æ“ä½œæ ·å¼</h2><p>åŸç”Ÿjs ä¸­çš„é€šè¿‡å…ƒç´ .style.æ ·å¼å=â€™æ ·å¼å€¼â€™çš„æ–¹å¼æ“ä½œå…ƒç´ æ ·å¼,jQueryç»™æˆ‘ä»¬å°è£…äº†css()æ–¹æ³•,ä¾¿äºæˆ‘ä»¬æ“ä½œæ ·å¼,å¤šæ•°æƒ…å†µæ ·å¼é€‰æ‹©å™¨ä½¿ç”¨ç±»é€‰æ‹©å™¨,æ‰€ä»¥jQueryé’ˆå¯¹äºè¿™ä¸€æƒ…å†µ,ç»™æˆ‘ä»¬å°è£…äº†==addClass==  ==removeClass== ==toggleClass== ä¸‰ä¸ªæ–¹æ³•</p><p>cssæ ·å¼</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">          <span class="token selector">.a</span><span class="token punctuation">&#123;</span>              <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>              <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>              <span class="token property">background-color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>            <span class="token selector">.b</span><span class="token punctuation">&#123;</span>              <span class="token property">border</span><span class="token punctuation">:</span> 10px solid green<span class="token punctuation">;</span>              <span class="token property">border-radius</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><p>jQueryå°è£…çš„==css()==æ–¹æ³•</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token comment">//ä¿®æ”¹æ ·å¼</span>    <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//è·å¾—d1çš„cssæ ·å¼</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"width"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"height"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"background-color"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ä¿®æ”¹d1çš„cssæ ·å¼</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"width"</span><span class="token punctuation">,</span><span class="token string">"200px"</span><span class="token punctuation">)</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"height"</span><span class="token punctuation">,</span><span class="token string">"300px"</span><span class="token punctuation">)</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"background-color"</span><span class="token punctuation">,</span><span class="token string">"yellow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/*              * CSS æ ·å¼åœ¨å®é™…çš„ç ”å‘ä¸­,å¾€å¾€é€šè¿‡ç±»é€‰æ‹©å™¨ä½œç”¨åˆ°å…ƒç´ ä¸Š              * jQueryå°±ä¸“é—¨çš„å°è£…äº†æ“ä½œclasså±æ€§å€¼çš„æ–¹æ³•              * */</span><span class="token comment">//æ·»åŠ classå€¼</span>    <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//åˆ é™¤classå€¼</span>    <span class="token keyword">function</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//åˆ‡æ¢classå€¼</span>    <span class="token keyword">function</span> <span class="token function">fun4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token comment">// åŸæ¥æœ‰b åˆ™åˆ é™¤,å¦‚æœæ²¡æœ‰,åˆ™å¢åŠ b</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h2 id="æ“ä½œæ–‡æœ¬">æ“ä½œæ–‡æœ¬</h2><p>åŸç”Ÿjs ä¸­çš„é€šè¿‡å…ƒç´ .innerTextå’ŒinnerHTMLå’Œ.valueå±æ€§æ“ä½œæ ‡ç­¾å†…éƒ¨æ–‡æœ¬å’Œå†…å®¹,jQueryç»™æˆ‘ä»¬å°è£…äº†==text(),html()å’Œval()==ä¸‰ä¸ªæ–¹æ³•</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token comment">//è·å¾—æ ‡ç­¾å†…å®¹</span>    <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">/*                           * innerText >>>> text();                           * innerHTML >>>> html();                           * value     >>>> val();                           *                            * */</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#i1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//ä¿®æ”¹æ ‡ç­¾å†…å®¹</span>    <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//$("#d1").text("&lt;h1>ç‰›æ°”å†²å¤©&lt;/h1>");</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">"&lt;h1>ç‰›æ°”å†²å¤©&lt;/h1>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#i1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//åˆ é™¤æ ‡ç­¾ä¸­çš„å†…å®¹</span>    <span class="token keyword">function</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//$("#d1").html("");</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ¸…ç©ºå†…å®¹</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#i1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h2 id="å¢åˆ å…ƒç´ ">å¢åˆ å…ƒç´ </h2><p>åŸç”Ÿjs ä¸­çš„å¯¹äºå…ƒç´ çš„åˆ›å»º,å¢åŠ å’Œåˆ é™¤ä»£ç æ¯”è¾ƒç¹ç,è€ŒjQueryä»å…ƒç´ çš„åˆ›å»ºåˆ°å…ƒç´ çš„å¢åŠ å’Œåˆ é™¤éƒ½ç»™æˆ‘ä»¬æä¾›äº†æ›´åŠ ä¾¿æ·çš„æ–¹æ³•</p><ul><li>åˆ›å»ºå…ƒç´ <ul><li>$(â€˜<span>text<span>â€™)</li></ul></li><li>è¿½åŠ å…ƒç´ <ul><li>append() appendTo() æ·»åŠ å†…éƒ¨æ ‡ç­¾</li><li>before() insertBefore() å‘å‰å¢åŠ æ ‡ç­¾</li><li>after() insertAfter()  å‘åå¢åŠ æ ‡ç­¾</li></ul></li><li>åˆ é™¤å…ƒç´ <ul><li>empty()  æ¸…ç©ºå­—æ ‡ç­¾</li><li>remove() ç§»é™¤å½“å‰æ ‡ç­¾</li></ul></li></ul><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token comment">//append() è°ƒç”¨çš„å¯¹è±¡æ˜¯æ·»åŠ çš„åŒºåŸŸ</span>    <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">// åˆ›å»ºå…ƒç´ </span>        <span class="token keyword">var</span> span1<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"&lt;span>&lt;/span>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®¾ç½®æ ·å¼</span>        span1<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">,</span><span class="token string">"green"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        span1<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"border"</span><span class="token punctuation">,</span><span class="token string">"1px solid blue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        span1<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"background-color"</span><span class="token punctuation">,</span><span class="token string">"lightgray"</span><span class="token punctuation">)</span>        <span class="token comment">// è®¾ç½®æ–‡å­—</span>        span1<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">"ä»Šå¤©å¤©æ°”å¾ˆå¥½"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#d1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>span1<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>        <span class="token comment">//appendTo() è°ƒç”¨çš„å¯¹è±¡æ˜¯è¦æ·»åŠ çš„å†…å®¹</span>    <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> h <span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"&lt;h3>æµ‹è¯•æ–‡å­—&lt;/h3>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">,</span><span class="token string">"red"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"border"</span><span class="token punctuation">,</span><span class="token string">"1px solid green"</span><span class="token punctuation">)</span>        h<span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#d1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>        <span class="token comment">//before()</span>    <span class="token keyword">function</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> span1<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;span style="color: red; border: 1px solid orangered;">æµ‹è¯•æ–‡å­—&lt;/span>'</span><span class="token punctuation">)</span>         <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>span1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">fun4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> span1<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;span style="color: red; border: 1px solid orangered;">æµ‹è¯•æ–‡å­—&lt;/span>'</span><span class="token punctuation">)</span>         span1<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token comment">//after()</span>    <span class="token keyword">function</span> <span class="token function">fun5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> span1<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;span style="color: red; border: 1px solid orangered;">æµ‹è¯•æ–‡å­—&lt;/span>'</span><span class="token punctuation">)</span>         <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>span1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">fun6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> span1<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;span style="color: red; border: 1px solid orangered;">æµ‹è¯•æ–‡å­—&lt;/span>'</span><span class="token punctuation">)</span>         span1<span class="token punctuation">.</span><span class="token function">insertAfter</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token comment">//empty()</span>    <span class="token keyword">function</span> <span class="token function">fun7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>        <span class="token comment">//remove()</span>    <span class="token keyword">function</span> <span class="token function">fun8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç§»é™¤å½“å‰å…ƒç´ æœ¬èº«</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h2 id="æ“ä½œäº‹ä»¶">æ“ä½œäº‹ä»¶</h2><p>æ— éå°±æ˜¯ç»‘å®šäº‹ä»¶,è§¦å‘äº‹ä»¶,è§£ç»‘å®šäº‹ä»¶.åŸç”Ÿjsä¸­çš„é€šè¿‡DOMç¼–ç¨‹å’Œåœ¨æ ‡ç­¾ä¸Šçš„äº‹ä»¶å±æ€§ç»‘å®šäº‹ä»¶,</p><p>jQueryä¸­,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨</p><p>äº‹ä»¶çš„ç»‘å®š:</p><ul><li>==bind()==</li><li>==live()==(1.8åŠä¹‹å‰å¯ç”¨)</li><li>==on()==(1.9ä¹‹åæ¨èä½¿ç”¨),==one()==</li></ul><p>äº‹ä»¶è§£ç»‘å®š:==unbind()==</p><p>äº‹ä»¶çš„è§¦å‘:è¡Œä¸ºè§¦å‘, jQueryæ–¹æ³•è§¦å‘</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token comment">//ç»™å…ƒç´ ç»‘å®šäº‹ä»¶</span>    <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//åŸç”ŸJS</span>        <span class="token comment">/*var div1=document.getElementById("d1")                div1.onmouseover=function ()&#123;                alert("æ‚¬åœ")                &#125;*/</span>        <span class="token comment">/* bind æ–¹æ³•ç»‘å®šäº‹ä»¶                * åœ¨jQueryä¸­,äº‹ä»¶çš„åç§°= åŸå§‹åç§°å»æ‰ on                * onclick       click                * onmouseover   mouseover                *                 * */</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'mouseover'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#d1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"background-color"</span><span class="token punctuation">,</span><span class="token string">'yellow'</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/*äº‹ä»¶åä½œä¸ºæ–¹æ³•*/</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mouseleave</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#d1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"background-color"</span><span class="token punctuation">,</span><span class="token string">'lightgreen'</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/*                 * one ç»‘å®šäº‹ä»¶ä¸€æ¬¡                  *                  * */</span>        <span class="token comment">/*$("#d1").one('mouseover',function()&#123;                $('#d1').css("background-color",'yellow')                &#125;);                 $("#d1").one('mouseleave',function()&#123;                $('#d1').css("background-color",'lightgreen')                &#125;);*/</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//è§£é™¤ç»‘å®š</span>    <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//$("#d1").unbind();  è§£é™¤ç»‘å®šçš„æ‰€æœ‰äº‹ä»¶</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span><span class="token string">"mouseover"</span><span class="token punctuation">)</span> <span class="token comment">// æ¥è§¦ç»‘å®šçš„æŒ‡å®šäº‹ä»¶</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//è§¦å‘äº‹ä»¶</span>    <span class="token keyword">function</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">// ç›¸å½“äºå‘ç”Ÿäº†è·å¾—ç„¦ç‚¹äº‹ä»¶</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#i1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">fun4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"è·å¾—ç„¦ç‚¹äº†"</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h2 id="jQueryå¯¹è±¡å’ŒDOMå¯¹è±¡çš„è½¬æ¢">jQueryå¯¹è±¡å’ŒDOMå¯¹è±¡çš„è½¬æ¢</h2><p>ä½¿ç”¨åŸç”ŸJSæ–¹å¼è·å¾—çš„é¡µé¢ç»“ç‚¹å¯¹è±¡æˆ‘ä»¬å¯ä»¥ç®€ç§°ä¸ºDOMå¯¹è±¡,ä½¿ç”¨jQueryæ ¸å¿ƒå‡½æ•°è·å¾—çš„å¯¹è±¡æˆ‘ä»¬å¯ä»¥ç®€ç§°ä¸ºjQueryå¯¹è±¡,è¿™ä¸¤ç§æ–¹å¼è·å¾—çš„å¯¹è±¡å³æ˜¯æ˜¯é¡µé¢ä¸ŠåŒä¸€ä¸ªå…ƒç´ ,é‚£ä¹ˆä¹Ÿæ˜¯ä¸ä¸€æ ·çš„,äºŒè€…ä¹‹é—´çš„APIæ˜¯ä¸é€šç”¨çš„.è€Œåœ¨æŸäº›æƒ…å†µä¸‹,æˆ‘ä»¬å¾€å¾€æ— æ³•é€‰æ‹©æ¥æ”¶çš„å¯¹è±¡,åªèƒ½è¢«åŠ¨ä½¿ç”¨,é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥è®©äºŒè€…å®ç°è½¬æ¢,ä»¥è¾¾åˆ°å¯ä»¥è°ƒç”¨APIå®ç°åŠŸèƒ½çš„ç›®çš„</p><p>ä½¿ç”¨åŸç”ŸJSDOMå¯¹è±¡è½¬æ¢æˆjQueryå¯¹è±¡æ–¹å¼æ˜¯==$(domå¯¹è±¡)==</p><p>jQueryå¯¹è±¡è½¬æ¢æˆDOMå¯¹è±¡çš„æ–¹å¼æ˜¯==jQueryå¯¹è±¡[0]/.get(0)==ï¼Œ</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//1 åŸç”ŸJSè·å–é¡µé¢å…ƒç´   åŸç”ŸDOMå¯¹è±¡</span>        <span class="token keyword">var</span> div1<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"d1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2 jQueryæ–¹å¼è·å–é¡µé¢å…ƒç´  jQueryå¯¹è±¡</span>        <span class="token keyword">var</span> div2<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/* * DOMå¯¹è±¡å’ŒjQueryå¯¹è±¡ä¹‹é—´çš„æ–¹æ³•å’Œå±æ€§æ˜¯ä¸é€šç”¨çš„ *   * */</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div1<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div2<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div1<span class="token punctuation">)</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div2<span class="token punctuation">)</span>        <span class="token comment">// DOMå¯¹è±¡å¦‚ä½•è°ƒç”¨jQueryå‡½æ•°  DOMå¯¹è±¡è½¬æ¢ä¸ºjQuery    $(DOM)</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span>div1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// jQueryå¯¹è±¡å¦‚ä½•è°ƒç”¨DOMå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•   jQueryè½¬æ¢ä¸ºDOMå¯¹è±¡  get(0)  [0]</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h2 id="è¿­ä»£éå†æ–¹å¼">è¿­ä»£éå†æ–¹å¼</h2><p>jQueryç»™æˆ‘ä»¬å°è£…äº†ä¸€ä¸ªå¿«æ·éå†å…ƒç´ çš„æ–¹æ³•,æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä½¿ç”¨ä¸€ä¸‹jQueryä¸­æ–°çš„éå†æ–¹å¼</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">/*          * jQueryå¯¹è±¡åå¾€å¾€ä»¥$å¼€å§‹, ä»¥ç¤ºå’ŒDOMå¯¹è±¡åŒºåˆ†          *           *           * */</span>        <span class="token keyword">var</span> $lis <span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$lis<span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>$lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$lis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">/*          * jQueryæä¾›äº†ä¸€ä¸ªeachæ–¹æ³•å¸®åŠ©æˆ‘ä»¬éå†å…ƒç´           * */</span>        $lis<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span>e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">/*          * eæ˜¯ä¸€ä¸ªåŸç”ŸDOMå¯¹è±¡,æ‰€ä»¥ç”¨çš„æ˜¯text()æ–¹æ³•æ¥æå–æ–‡æœ¬          * */</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token string">">"</span><span class="token operator">+</span><span class="token function">$</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        $<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>$lis<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span>e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">/*          * eæ˜¯ä¸€ä¸ªåŸç”ŸDOMå¯¹è±¡          * */</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token string">">"</span><span class="token operator">+</span><span class="token function">$</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h1>åŠ¨ç”»æ•ˆæœ</h1><h2 id="æ˜¾ç¤ºå’Œéšè—">æ˜¾ç¤ºå’Œéšè—</h2><ul><li>==show()== :å®ç°ç®€å•æ˜¾ç¤ºåŠ¨ç”»æ•ˆæœæ–¹æ³•</li><li>==hide()== :å®ç°ç®€å•éšè—åŠ¨ç”»æ•ˆæœæ–¹æ³•</li><li>==toggle()== :å®ç°åˆ‡æ¢ç®€å•æ˜¾ç¤ºå’Œéšè—åŠ¨ç”»æ•ˆæœæ–¹æ³•</li></ul><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token selector">#d1</span><span class="token punctuation">&#123;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>                <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/jquery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">/*$("#d1").show(2000,'swing',function()&#123;                                        alert("åŠ¨ç”»æ‰§è¡Œç»“æŸ")                                &#125;)*/</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hide<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>toggle<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span> </code></pre><h2 id="æ»‘åŠ¨åŠ¨ç”»æ•ˆæœ">æ»‘åŠ¨åŠ¨ç”»æ•ˆæœ</h2><ul><li>==slideDown()==:å®ç°å‘ä¸‹æ»‘åŠ¨æ•ˆæœ</li><li>==slideUp()==:å®ç°å‘ä¸Šæ»‘åŠ¨æ•ˆæœ</li><li>==slideToggle()==:å®ç°æ»‘åŠ¨åˆ‡æ¢åŠ¨ç”»æ•ˆæœ</li></ul><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slideDown</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slideUp</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slideToggle</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h2 id="æ·¡å…¥æ·¡å‡ºåŠ¨ç”»æ•ˆæœ">æ·¡å…¥æ·¡å‡ºåŠ¨ç”»æ•ˆæœ</h2><ul><li>==fadeln()==: å®ç°æ·¡å…¥åŠ¨ç”»æ•ˆæœ</li><li>==fadeOut()==:å®ç°æ·¡å‡ºåŠ¨ç”»æ•ˆæœ</li><li>==fadeToggle()==:å®ç°æ·¡å…¥æ·¡å‡ºåˆ‡æ¢æ•ˆæœ</li><li>==fadeTo()==ï¼šå®ç°æ·¡å…¥æŒ‡å®šé€æ˜åº¦æ•ˆæœæ–¹æ³•</li></ul><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token comment">//æ·¡å…¥åŠ¨ç”»</span>    <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//æ·¡å‡ºåŠ¨ç”»</span>    <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeOut</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//æ·¡å…¥æ·¡å‡ºåˆ‡æ¢</span>    <span class="token keyword">function</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeToggle</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//æ·¡å…¥æŒ‡å®šé€æ˜åº¦æ•ˆæœ</span>    <span class="token keyword">function</span> <span class="token function">fun4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeTo</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">,</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 0-1 </span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h2 id="å®ç°è‡ªå®šä¹‰åŠ¨ç”»æ•ˆæœ">å®ç°è‡ªå®šä¹‰åŠ¨ç”»æ•ˆæœ</h2><p>==$(â€œâ€).animate({åŠ¨ç”»å†…å®¹},æ‰§è¡Œæ—¶é—´,åŠ¨ç”»ç»“æŸåè¦æ‰§è¡Œçš„æ–¹æ³•)==</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//$("").animate(&#123;åŠ¨ç”»å†…å®¹&#125;,æ‰§è¡Œæ—¶é—´,åŠ¨ç”»ç»“æŸåè¦æ‰§è¡Œçš„æ–¹æ³•)</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#d1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            <span class="token literal-property property">width</span><span class="token operator">:</span><span class="token string">"100px"</span><span class="token punctuation">,</span>            <span class="token literal-property property">height</span><span class="token operator">:</span><span class="token string">"100px"</span><span class="token punctuation">,</span>            <span class="token literal-property property">opcity</span><span class="token operator">:</span><span class="token number">0.5</span><span class="token punctuation">,</span>            <span class="token literal-property property">borderRadius</span><span class="token operator">:</span><span class="token string">"50px"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"åŠ¨ç”»æ‰§è¡Œç»“æŸäº†"</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><img src="JQuery/20210731144759.gif" alt="1627712830125 00_00_00-00_00_30" style="zoom: 50%;" /><h1>è¡¨å•æ£€éªŒ</h1><h2 id="è¡¨å•éªŒè¯æ¡ˆä¾‹">è¡¨å•éªŒè¯æ¡ˆä¾‹</h2><h4 id="éªŒè¯è¦æ±‚">éªŒè¯è¦æ±‚</h4><p>ç”¨æˆ·åä¸èƒ½ä¸ºç©º</p><p>ç”¨æˆ·åé•¿åº¦å¤§äºç­‰äº6</p><p>ç”¨æˆ·åä¸­ä¸èƒ½æœ‰æ•°å­—</p><p>å¯†ç ä¸å°‘äº5ä½</p><p>ä¸¤æ¬¡å¯†ç å¿…é¡»ä¸€è‡´</p><p>é‚®ç®±æ ¼å¼æ­£ç¡® å¿…é¡»æœ‰@å’Œ.  ä¾‹å¦‚123456789@qq.com</p><h4 id="å®ç°æ•ˆæœ">å®ç°æ•ˆæœ</h4><p><img src="C:%5CUsers%5CDell%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210731144934316.png" alt="image-20210731144934316"></p><h3 id="ä»£ç ">ä»£ç </h3><p><a href="#form%E8%A1%A8%E5%8D%95%E5%BA%94%E7%94%A8%E6%AD%A3%E5%88%99">ä»£ç æ”¹è¿›</a></p><h3 id="æ€»ç»“">æ€»ç»“</h3><p>1.å¯¹äºè¡¨å•çš„æäº¤ï¼Œè¦ç»™formæ ‡ç­¾ç»‘å®šonSubmitäº‹ä»¶ï¼Œè€Œä¸æ˜¯ç»™submitæŒ‰é’®ç»‘å®šonClickäº‹ä»¶,onsubmitç»‘å®šçš„æ–¹æ³•æ—¶è¦æœ‰returnå…³é”®å­—,ç»‘å®šçš„æ–¹æ³•è¦è¿”å›true/false</p><p>1.å¯¹äºè¡¨å•çš„æäº¤ï¼Œè¦ç»™formæ ‡ç­¾ç»‘å®šonSubmitäº‹ä»¶ï¼Œè€Œä¸æ˜¯ç»™submitæŒ‰é’®ç»‘å®šonClickäº‹ä»¶,onsubmitç»‘å®šçš„æ–¹æ³•æ—¶è¦æœ‰returnå…³é”®å­—,ç»‘å®šçš„æ–¹æ³•è¦è¿”å›true/false</p><p>2.è¡¨å•é¡¹å†…å®¹ä¸ç®¡è¾“å…¥çš„æ˜¯å­—ç¬¦ä¸²ã€æ•°å­—ã€æ—¥æœŸï¼Œjsã€jQueryã€JSPæ¥æ”¶åéƒ½æ˜¯Stringç±»å‹</p><p>3.è¡¨å•çš„éªŒè¯å’ŒStringå¯¹è±¡æœ‰å¯†åˆ‡å…³ç³» length charAt(i) indexOf(â€œ@â€)</p><p>4.å¦‚æœè¡¨å•é¡¹å†…å®¹ä¸ºç©ºï¼Œjsæ”¶åˆ°çš„ä¸æ˜¯nullï¼Œè€Œæ˜¯ç©ºå­—ç¬¦ä¸²ã€‚åˆ¤æ–­æ¡ä»¶ä¸èƒ½å†™ username == nullï¼Œè€Œè¦å†™username==&quot;&quot;æˆ–username.length ==0</p><p>5.éªŒè¯å‡ºé”™è¦return falseï¼ŒéªŒè¯æ— é”™è¦return trueï¼Œå¹¶ä¸” onsubmit=&quot;return checkForm()</p><p>6.è¯¥ç¤ºä¾‹çš„ç¼ºç‚¹ä¸»è¦åœ¨äºå¯¹äºé‚®ç®±å¦‚æœé‡‡ç”¨ä¼ ç»Ÿæ–¹å¼è¿›è¡ŒéªŒè¯ï¼Œä»£ç ç¹çå¹¶ä¸”ä¸èƒ½ä¿è¯ä¸¥è°¨æ€§,è¿‡åº¦ä¾èµ–Stringçš„APIã€‚å¯¹äºé‚®ç®±ã€æ‰‹æœºå·ç ã€é‚®æ”¿ç¼–ç ç­‰éªŒè¯ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒéªŒè¯ï¼Œä¸¥è°¨è€Œä¸”ç®€å•ã€‚</p><h2 id="æ­£åˆ™è¡¨è¾¾å¼">æ­£åˆ™è¡¨è¾¾å¼</h2><h3 id="1-ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼">1. ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼</h3><p>Regular Expressionï¼Œåœ¨ä»£ç ä¸­å¸¸ç®€å†™ä¸ºregex,æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨å•ä¸ªå­—ç¬¦ä¸²æ¥æè¿°ã€åŒ¹é…ä¸€ç³»åˆ—ç¬¦åˆæŸä¸ªå¥æ³•è§„åˆ™çš„å­—ç¬¦ä¸²ã€‚åœ¨å¾ˆå¤šæ–‡æœ¬ç¼–è¾‘å™¨é‡Œï¼Œæ­£åˆ™è¡¨è¾¾å¼é€šå¸¸è¢«ç”¨æ¥æ£€ç´¢ã€æ›¿æ¢é‚£äº›ç¬¦åˆæŸä¸ªæ¨¡å¼çš„æ–‡æœ¬ã€‚æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¯¹å­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬æ™®é€šå­—ç¬¦ï¼ˆä¾‹å¦‚ï¼Œa åˆ° z ä¹‹é—´çš„å­—æ¯ï¼‰å’Œç‰¹æ®Šå­—ç¬¦ï¼ˆç§°ä¸ºâ€œå…ƒå­—ç¬¦â€ï¼‰ï¼‰æ“ä½œçš„ä¸€ç§é€»è¾‘å…¬å¼ï¼Œå°±æ˜¯ç”¨äº‹å…ˆå®šä¹‰å¥½çš„ä¸€äº›ç‰¹å®šå­—ç¬¦ã€åŠè¿™äº›ç‰¹å®šå­—ç¬¦çš„ç»„åˆï¼Œç»„æˆä¸€ä¸ªâ€œè§„åˆ™å­—ç¬¦ä¸²â€ï¼Œè¿™ä¸ªâ€œè§„åˆ™å­—ç¬¦ä¸²â€ç”¨æ¥è¡¨è¾¾å¯¹å­—ç¬¦ä¸²çš„ä¸€ç§è¿‡æ»¤é€»è¾‘ã€‚æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ç§æ–‡æœ¬æ¨¡å¼ï¼Œè¯¥æ¨¡å¼æè¿°åœ¨æœç´¢æ–‡æœ¬æ—¶è¦åŒ¹é…çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²ã€‚</p><h3 id="2-ä¸ºä»€ä¹ˆä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼">2. ä¸ºä»€ä¹ˆä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</h3><ul><li>æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥æ˜¯æ–‡æœ¬çš„æ ¡éªŒçš„ä»£ç æ›´åŠ ç®€æ´</li><li>æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥å®ç°æ›´åŠ ä¸¥è°¨ç»†è‡´çš„æ ¡éªŒ</li></ul><h3 id="3-æ­£åˆ™è¡¨è¾¾å¼ä¸¾ä¾‹">3. æ­£åˆ™è¡¨è¾¾å¼ä¸¾ä¾‹</h3><p>åŒ¹é…å›½å†…ç”µè¯å·ç ï¼š\d{3}-\d{8}|\d{4}-\d{7}</p><p>åŒ¹é…è…¾è®¯QQå·ï¼š[1-9][0-9]{4,}</p><p>åŒ¹é…ä¸­å›½é‚®æ”¿ç¼–ç ï¼š\d{6}</p><p>åŒ¹é…èº«ä»½è¯ï¼š\d{15}|\d{18}</p><p>åŒ¹é…ç”±æ•°å­—å’Œ26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸² ^[A-Za-z0-9]+$</p><p>åŒ¹é…Emailåœ°å€ï¼š\w+([-+.]\w+)<em>@\w+([-.]\w+)</em>.\w+([-.]\w+)*</p><p>åŒ¹é…ä¸­æ–‡å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š [\u4e00-\u9fa5] [a-zA-Z]</p><h3 id="4-JSåˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼">4. JSåˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼</h3><p>æ­£åˆ™è¡¨è¾¾å¼åœ¨JSä¸­åˆ›å»ºçš„è¯­æ³•ä¸º:</p><p>==var reg=/china/;==</p><p>==var reg=new RegExp(â€œchinaâ€);==</p><h3 id="5-é€šé…ç¬¦å·">5. é€šé…ç¬¦å·</h3><p><img src="JQuery/20210731151417.png" alt="image-20210731151417254"></p><h3 id="6-é‡å¤ç¬¦å·">6. é‡å¤ç¬¦å·</h3><img src="JQuery/20210731151725.png" alt="image-20210731151725582"  /><h3 id="ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å®ç°æ•°æ®éªŒè¯">ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å®ç°æ•°æ®éªŒè¯</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token comment">/* * æ­£åˆ™è¡¨è¾¾å¼ä¸ä¾èµ–jQuery * æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² åªä¸è¿‡è¯¥å­—ç¬¦ä¸²ç”¨äºè¡¨è¿°ä¸€ç§è§„åˆ™ *  * */</span>    <span class="token keyword">var</span> reg <span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\w?$</span><span class="token regex-delimiter">/</span></span>    <span class="token keyword">var</span> words <span class="token operator">=</span><span class="token string">"a"</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">var</span> regex1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d&#123;6&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>    <span class="token keyword">var</span> regex2 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^1[3456789]\d&#123;9&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>    <span class="token keyword">var</span> regex3 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\w&#123;6,&#125;@[0-9A-Za-z]&#123;2,&#125;(\.[a-zA-Z]&#123;2,3&#125;)&#123;1,2&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h3 id="formè¡¨å•åº”ç”¨æ­£åˆ™">formè¡¨å•åº”ç”¨æ­£åˆ™</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/jquery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">checkUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> reg1<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\D&#123;6,&#125;$</span><span class="token regex-delimiter">/</span></span>                <span class="token keyword">var</span> username <span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#user"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>reg1<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#usertip"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">"&lt;font color='red'>æ ¼å¼å¿…é¡»æ˜¯è‡³å°‘å…­ä½çš„éæ•°å­—&lt;/font>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token comment">// æç¤ºOK</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#usertip"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">"&lt;font color='green'>OK&lt;/font>"</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">checkPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> reg2<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\S&#123;5,&#125;$</span><span class="token regex-delimiter">/</span></span>                <span class="token keyword">var</span> pwd <span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#pwd"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>reg2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>pwd<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#pwdtip"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">"&lt;font color='red'>è‡³å°‘ä¸º5ä½éç©ºæ ¼&lt;/font>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#pwdtip"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">"&lt;font color='green'>OK&lt;/font>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">checkRepwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> p1<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#pwd"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> p2<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#repwd"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>length<span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token operator">||</span> p1 <span class="token operator">!=</span> p2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#repwdtip"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">"&lt;font color='red'>ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´&lt;/font>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#repwdtip"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">"&lt;font color='green'>OK&lt;/font>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">checkEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> em<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#email"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> regex3 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\w&#123;6,&#125;@[0-9A-Za-z]&#123;2,&#125;(\.[a-zA-Z]&#123;2,3&#125;)&#123;1,2&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>                 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>regex3<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>em<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#emailtip"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">"&lt;font color='red'>é‚®ç®±æ ¼å¼æœ‰è¯¯&lt;/font>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#emailtip"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">"&lt;font color='green'>OK&lt;/font>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">checkForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token function">checkUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">checkPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">checkRepwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">checkEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">cellspacing</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">cellpadding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.baidu.com<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>get<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onsubmit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token keyword">return</span> <span class="token function">checkForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>æ‚¨çš„å§“åï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onblur</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">checkUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">/></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>usertip<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> inline<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>è¾“å…¥å¯†ç ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pwd<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pwd<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onblur</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">checkPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">/></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pwdtip<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> inline<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>å†è¾“å…¥ä¸€éå¯†ç ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>repwd<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onblur</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">checkRepwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">/></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>repwdtip<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> inline<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>æ‚¨çš„Emailï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onblur</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">checkEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">/></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>emailtip<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ³¨å†Œ<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rb1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1>BootStrap</h1><h2 id="å®¹å™¨ç±»">å®¹å™¨ç±»</h2><p>==.container== ç±»ç”¨äºå›ºå®šå®½åº¦å¹¶æ”¯æŒå“åº”å¼å¸ƒå±€çš„å®¹å™¨ã€‚</p><p>==.container-fluid== ç±»ç”¨äº 100% å®½åº¦ï¼Œå æ®å…¨éƒ¨è§†å£ï¼ˆviewportï¼‰çš„å®¹å™¨ã€‚</p><p><strong>äºŒè€…åŒºåˆ«:</strong></p><p>å›ºå®šå®¹å™¨çš„å“åº”å¼å¸ƒå±€è§„åˆ™æ˜¯å½“çª—å£å¤§å°å˜åŒ–æ—¶,åœ¨æŒ‡å®šçš„å®½åº¦èŒƒå›´å†…ä½¿ç”¨å›ºå®šçš„å®½åº¦,</p><p>æµå®¹å™¨çš„å“åº”å¼å¸ƒå±€è§„åˆ™æ˜¯éšç€çª—å£å¤§å°çš„å˜åŒ–ä¸€åŒå˜åŒ–,æ¨ªå‘å…¨éƒ¨å æ»¡</p><p><strong>å›ºå®šå®¹å™¨çš„é˜ˆå€¼å¦‚ä¸‹å›¾:</strong></p><img src="JQuery/20210731153222.png" alt="image-20210731153222356" style="zoom:50%;" /><h2 id="æ …æ ¼ç³»ç»Ÿ">æ …æ ¼ç³»ç»Ÿ</h2><p>Bootstrap æä¾›äº†ä¸€å¥—å“åº”å¼ã€ç§»åŠ¨è®¾å¤‡ä¼˜å…ˆçš„æµå¼ç½‘æ ¼ç³»ç»Ÿï¼Œéšç€å±å¹•æˆ–è§†å£ï¼ˆviewportï¼‰å°ºå¯¸çš„å¢åŠ ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†ä¸ºæœ€å¤š 12 åˆ—ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦å®šä¹‰åˆ—æ•°.</p><h3 id="ç½‘æ ¼ç±»">ç½‘æ ¼ç±»</h3><p>Bootstrap 4 ç½‘æ ¼ç³»ç»Ÿæœ‰ä»¥ä¸‹ 5 ä¸ªç±»:</p><p>==.col-== é’ˆå¯¹æ‰€æœ‰è®¾å¤‡</p><p>==.col-sm-== å¹³æ¿ - å±å¹•å®½åº¦ç­‰äºæˆ–å¤§äº 576px</p><p>==.col-md-== æ¡Œé¢æ˜¾ç¤ºå™¨ - å±å¹•å®½åº¦ç­‰äºæˆ–å¤§äº 768px)</p><p>==.col-lg-== å¤§æ¡Œé¢æ˜¾ç¤ºå™¨ - å±å¹•å®½åº¦ç­‰äºæˆ–å¤§äº 992px)</p><p>==.col-xl-== è¶…å¤§æ¡Œé¢æ˜¾ç¤ºå™¨ - å±å¹•å®½åº¦ç­‰äºæˆ–å¤§äº 1200px)</p><h3 id="ç½‘æ ¼ç³»ç»Ÿè§„åˆ™">ç½‘æ ¼ç³»ç»Ÿè§„åˆ™</h3><p>1 ç½‘æ ¼æ¯ä¸€è¡Œéœ€è¦æ”¾åœ¨è®¾ç½®äº† .container (å›ºå®šå®½åº¦) æˆ– .container-fluid (å…¨å±å®½åº¦) ç±»çš„å®¹å™¨ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥è‡ªåŠ¨è®¾ç½®ä¸€äº›å¤–è¾¹è·ä¸å†…è¾¹è·ã€‚</p><p>2 ä½¿ç”¨è¡Œæ¥åˆ›å»ºæ°´å¹³çš„åˆ—ç»„class=rowã€‚</p><p>3 å†…å®¹éœ€è¦æ”¾ç½®åœ¨åˆ—ä¸­ï¼Œå¹¶ä¸”åªæœ‰åˆ—å¯ä»¥æ˜¯è¡Œçš„ç›´æ¥å­èŠ‚ç‚¹ã€‚</p><p>4 é¢„å®šä¹‰çš„ç±»å¦‚ .row å’Œ .col-sm-4 å¯ç”¨äºå¿«é€Ÿåˆ¶ä½œç½‘æ ¼å¸ƒå±€ã€‚</p><p>5 åˆ—é€šè¿‡å¡«å……åˆ›å»ºåˆ—å†…å®¹ä¹‹é—´çš„é—´éš™ã€‚ è¿™ä¸ªé—´éš™æ˜¯é€šè¿‡ .rows ç±»ä¸Šçš„è´Ÿè¾¹è·è®¾ç½®ç¬¬ä¸€è¡Œå’Œæœ€åä¸€åˆ—çš„åç§»ã€‚</p><p>6 ç½‘æ ¼åˆ—æ˜¯é€šè¿‡è·¨è¶ŠæŒ‡å®šçš„ 12 ä¸ªåˆ—æ¥åˆ›å»ºã€‚ ä¾‹å¦‚ï¼Œè®¾ç½®ä¸‰ä¸ªç›¸ç­‰çš„åˆ—ï¼Œéœ€è¦ä½¿ç”¨ä¸‰ä¸ª.col-sm-4 æ¥è®¾ç½®ã€‚</p><p>7  Bootstrap 3 å’Œ Bootstrap 4 æœ€å¤§çš„åŒºåˆ«åœ¨äº Bootstrap 4 ç°åœ¨ä½¿ç”¨ flexboxï¼ˆå¼¹æ€§ç›’å­ï¼‰ è€Œä¸æ˜¯æµ®åŠ¨ã€‚ Flexbox çš„ä¸€å¤§ä¼˜åŠ¿æ˜¯ï¼Œæ²¡æœ‰æŒ‡å®šå®½åº¦çš„ç½‘æ ¼åˆ—å°†è‡ªåŠ¨è®¾ç½®ä¸ºç­‰å®½ä¸ç­‰é«˜åˆ— ã€‚ å¦‚æœæ‚¨æƒ³äº†è§£æœ‰å…³Flexboxçš„æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥é˜…è¯»æˆ‘ä»¬çš„CSS Flexboxæ•™ç¨‹ã€‚</p><p><img src="JQuery/20210731153418.png" alt="image-20210731153418460"></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--ç§»åŠ¨ç«¯ä¼˜å…ˆçš„é…ç½®--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1, shrink-to-fit=no<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--bootstrapçš„æ ·å¼åº“--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css/bootstrap.min.css<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>        <span class="token comment">&lt;!--jQuery--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/jquery-3.5.1.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--popper--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/bootstrap.bundle.min.js<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--æ ¸å¿ƒjsæ–‡ä»¶--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/bootstrap.min.js<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-sm-2<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> lavender<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span>1px solid #117A8B<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                    One of three columns                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-sm-8<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> lavender<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span>1px solid #117A8B<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                    One of three columns                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-sm-2<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> lavender<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span>1px solid #117A8B<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                    One of three columns                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-sm-1<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> lavender<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span>1px solid #117A8B<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                    One of three columns                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-sm-4<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> lavender<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span>1px solid #117A8B<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                    One of three columns                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-sm-7<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> lavender<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span>1px solid #117A8B<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                    One of three columns                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="å¯¼èˆªæ æ¡ˆä¾‹">å¯¼èˆªæ æ¡ˆä¾‹</h2><p><img src="JQuery/20210731153456.png" alt="image-20210731153456278"></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--ç§»åŠ¨ç«¯ä¼˜å…ˆçš„é…ç½®--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1, shrink-to-fit=no<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--bootstrapçš„æ ·å¼åº“--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css/bootstrap.min.css<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>        <span class="token comment">&lt;!--jQuery--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/jquery-3.5.1.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--popper--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/bootstrap.bundle.min.js<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--æ ¸å¿ƒjsæ–‡ä»¶--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/bootstrap.min.js<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>æ¬¢è¿è¿›å…¥é©¬å£«å…µæ•™è‚²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- Nav pills --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav nav-pills<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tablist<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-link active<span class="token punctuation">"</span></span> <span class="token attr-name">data-toggle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pill<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#home<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸»é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-link<span class="token punctuation">"</span></span> <span class="token attr-name">data-toggle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pill<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#menu1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è®²å¸ˆä»‹ç»<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-link<span class="token punctuation">"</span></span> <span class="token attr-name">data-toggle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pill<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#menu2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¯¾ç¨‹ä»‹ç»<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-link<span class="token punctuation">"</span></span> <span class="token attr-name">data-toggle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pill<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#menu3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¼˜ç§€å­¦å‘˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- Tab panes --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container tab-pane active<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">border</span><span class="token punctuation">:</span> 10px solid red<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>æˆ‘ä»¬å…¬å¸<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu1<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container tab-pane fade<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">border</span><span class="token punctuation">:</span> 10px solid green<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>æˆ‘ä»¬çš„ä¼˜ç§€è®²å¸ˆ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu2<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container tab-pane fade<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">border</span><span class="token punctuation">:</span> 10px solid yellow<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>æˆ‘ä»¬çš„è¯¾ç¨‹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu3<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container tab-pane fade<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">border</span><span class="token punctuation">:</span> 10px solid blueviolet<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>ä¼˜ç§€å­¦å‘˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="è½®æ’­å›¾æ¡ˆä¾‹">è½®æ’­å›¾æ¡ˆä¾‹</h2><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--ç§»åŠ¨ç«¯ä¼˜å…ˆçš„é…ç½®--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1, shrink-to-fit=no<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--bootstrapçš„æ ·å¼åº“--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css/bootstrap.min.css<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>        <span class="token comment">&lt;!--jQuery--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/jquery-3.5.1.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--popper--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/bootstrap.bundle.min.js<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--æ ¸å¿ƒjsæ–‡ä»¶--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/bootstrap.min.js<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carouselExampleCaptions<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel slide<span class="token punctuation">"</span></span> <span class="token attr-name">data-ride</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel-indicators<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#carouselExampleCaptions<span class="token punctuation">"</span></span> <span class="token attr-name">data-slide-to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>active<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#carouselExampleCaptions<span class="token punctuation">"</span></span> <span class="token attr-name">data-slide-to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#carouselExampleCaptions<span class="token punctuation">"</span></span> <span class="token attr-name">data-slide-to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#carouselExampleCaptions<span class="token punctuation">"</span></span> <span class="token attr-name">data-slide-to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel-inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel-item active<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://static.runoob.com/images/mix/img_fjords_wide.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d-block w-100<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel-caption d-none d-md-block<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span><span class="token punctuation">></span></span>æ±Ÿæ²³<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Nulla vitae elit libero, a pharetra augue mollis interdum.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://static.runoob.com/images/mix/img_nature_wide.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d-block w-100<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel-caption d-none d-md-block<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span><span class="token punctuation">></span></span>å±±å·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Lorem ipsum dolor sit amet, consectetur adipiscing elit.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://static.runoob.com/images/mix/img_mountains_wide.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d-block w-100<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel-caption d-none d-md-block<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span><span class="token punctuation">></span></span>å…¬è·¯<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Praesent commodo cursus magna, vel scelerisque nisl consectetur.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.12306.cn/index/images/pic/banner0619.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d-block w-100<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel-caption d-none d-md-block<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span><span class="token punctuation">></span></span>ç«è½¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Praesent commodo cursus magna, vel scelerisque nisl consectetur.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel-control-prev<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#carouselExampleCaptions<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">data-slide</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prev<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel-control-prev-icon<span class="token punctuation">"</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sr-only<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Previous<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel-control-next<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#carouselExampleCaptions<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">data-slide</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>next<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>carousel-control-next-icon<span class="token punctuation">"</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sr-only<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Next<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JQuery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS</title>
      <link href="/2021/06/16/JS/"/>
      <url>/2021/06/16/JS/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=172591f6-c980-c625-c31b-00e87049868e</cover>
      <date>Wed Jun 16 2021 09:56:56 GMT+0800</date>
      
        <content type="html"><![CDATA[<h2 id="æ¦‚å¿µ">æ¦‚å¿µ</h2><p>JSæ˜¯è¿è¡Œåœ¨æµè§ˆå™¨ä¸Šçš„ä¸€ç§è„šæœ¬è¯­è¨€</p><span id="more"></span><h3 id="ç‰¹ç‚¹">ç‰¹ç‚¹</h3><h4 id="1-è„šæœ¬è¯­è¨€">1.è„šæœ¬è¯­è¨€</h4><p>è„šæœ¬è¯­è¨€æ˜¯ä¸€ç§ç®€å•çš„ç¨‹åºï¼Œè§„æ¨¡å°,ä¸éœ€è¦ç¼–è¯‘,è¿è¡Œå¿«,æ˜¯ç”±ä¸€äº›ASCIIå­—ç¬¦æ„æˆï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ç§æ–‡æœ¬ç¼–è¾‘å™¨ç¼–å†™ã€‚è„šæœ¬è¯­è¨€æ˜¯æŒ‡åœ¨webæµè§ˆå™¨å†…æœ‰è§£é‡Šå™¨è§£é‡Šæ‰§è¡Œçš„ç¼–ç¨‹è¯­è¨€ï¼Œæ¯æ¬¡è¿è¡Œç¨‹åºçš„æ—¶å€™ï¼Œè§£é‡Šå™¨ä¼šæŠŠç¨‹åºä»£ç ç¿»è¯‘æˆå¯æ‰§è¡Œçš„æ ¼å¼ã€‚ä¸€äº›ç¨‹åºè¯­è¨€ï¼ˆå¦‚Cã€C++ã€Javaç­‰ï¼‰éƒ½å¿…é¡»ç»è¿‡ç¼–è¯‘ï¼Œå°†æºä»£ç ç¼–è¯‘æˆäºŒè¿›åˆ¶çš„å¯æ‰§è¡Œæ–‡ä»¶ä¹‹åæ‰èƒ½è¿è¡Œï¼Œè€Œè„šæœ¬è¯­è¨€ä¸éœ€è¦äº‹å…ˆç¼–è¯‘ï¼Œåªè¦æœ‰ä¸€ä¸ªä¸å…¶ç›¸é€‚åº”çš„è§£é‡Šå™¨å°±å¯ä»¥æ‰§è¡Œã€‚</p><h4 id="2-åŸºäºå¯¹è±¡çš„è¯­è¨€">2.åŸºäºå¯¹è±¡çš„è¯­è¨€</h4><p>é¢å‘å¯¹è±¡æœ‰ä¸‰å¤§ç‰¹ç‚¹ï¼ˆå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ï¼‰ç¼ºä¸€ä¸å¯ã€‚é€šå¸¸&quot;åŸºäºå¯¹è±¡&quot;æ˜¯ä½¿ç”¨å¯¹è±¡ï¼Œä½†æ˜¯æ— æ³•åˆ©ç”¨ç°æœ‰çš„å¯¹è±¡æ¨¡æ¿äº§ç”Ÿæ–°çš„å¯¹è±¡ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´&quot;åŸºäºå¯¹è±¡&quot;æ²¡æœ‰ç»§æ‰¿çš„ç‰¹ç‚¹ã€‚æ²¡æœ‰äº†ç»§æ‰¿çš„æ¦‚å¿µä¹Ÿå°±æ— ä»è°ˆè®º&quot;å¤šæ€&quot;</p><h4 id="3-äº‹ä»¶é©±åŠ¨">3.äº‹ä»¶é©±åŠ¨</h4><p>åœ¨ç½‘é¡µä¸­æ‰§è¡Œäº†æŸç§æ“ä½œçš„åŠ¨ä½œï¼Œè¢«ç§°ä¸º&quot;äº‹ä»¶&quot;(Event)ï¼Œæ¯”å¦‚æŒ‰ä¸‹é¼ æ ‡ã€ç§»åŠ¨çª—å£ã€é€‰æ‹©èœå•ç­‰éƒ½å¯ä»¥è§†ä¸ºäº‹ä»¶ã€‚å½“äº‹ä»¶å‘ç”Ÿåï¼Œå¯èƒ½ä¼šå¼•èµ·ç›¸åº”çš„äº‹ä»¶å“åº”ã€‚</p><h4 id="4-ç®€å•æ€§">4.ç®€å•æ€§</h4><p>å˜é‡ç±»å‹æ˜¯é‡‡ç”¨å¼±ç±»å‹ï¼Œå¹¶æœªä½¿ç”¨ä¸¥æ ¼çš„æ•°æ®ç±»å‹ã€‚var a,b,c;  a=123;  b=â€œabcâ€; a=b;</p><h4 id="5-å®‰å…¨æ€§">5.å®‰å…¨æ€§</h4><p>JavaScriptä¸èƒ½è®¿é—®æœ¬åœ°çš„ç¡¬ç›˜ï¼Œä¸èƒ½å°†æ•°æ®å­˜å…¥åˆ°æœåŠ¡å™¨ä¸Šï¼Œä¸èƒ½å¯¹ç½‘ç»œæ–‡æ¡£è¿›è¡Œä¿®æ”¹å’Œåˆ é™¤ï¼Œåªèƒ½é€šè¿‡æµè§ˆå™¨å®ç°ä¿¡æ¯æµè§ˆæˆ–åŠ¨æ€äº¤äº’</p><h4 id="6-è·¨å¹³å°æ€§">6.è·¨å¹³å°æ€§</h4><p>JavaScriptä¾èµ–äºæµè§ˆå™¨æœ¬èº«ï¼Œä¸æ“ä½œå¹³å°æ— å…³ï¼Œ åªè¦è®¡ç®—æœºå®‰è£…äº†æ”¯æŒJavaScriptçš„æµè§ˆå™¨ï¼ˆè£…æœ‰JavaScriptè§£é‡Šå™¨ï¼‰ï¼ŒJavaScriptç¨‹åºå°±å¯ä»¥æ­£ç¡®æ‰§è¡Œã€‚</p><h4 id="ç¼ºç‚¹">ç¼ºç‚¹</h4><p>å„ç§æµè§ˆå™¨æ”¯æŒJavaScriptçš„ç¨‹åº¦æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ”¯æŒå’Œä¸å®Œå…¨æ”¯æŒJavaScriptçš„ æµè§ˆå™¨åœ¨æµè§ˆåŒä¸€ä¸ªå¸¦æœ‰JavaScriptè„šæœ¬çš„ç½‘é¡µæ—¶ï¼Œæ•ˆæœä¼šæœ‰ä¸€å®šçš„å·®è·ï¼Œæœ‰æ—¶ç”šè‡³ä¼šæ˜¾ç¤ºä¸å‡ºæ¥ã€‚</p><h3 id="JS-å’Œ-javaçš„åŒºåˆ«">JS å’Œ javaçš„åŒºåˆ«</h3><h4 id="åŒºåˆ«1ï¼šå…¬å¸ä¸åŒï¼Œå‰èº«ä¸åŒ">åŒºåˆ«1ï¼šå…¬å¸ä¸åŒï¼Œå‰èº«ä¸åŒ</h4><p>JavaScriptæ˜¯Netscapeå…¬å¸çš„äº§å“ï¼Œæ˜¯ä¸ºäº†æ‰©å±•Netscape NavigatoråŠŸèƒ½è€Œå¼€å‘çš„ä¸€ç§å¯ä»¥åµŒå…¥Webé¡µé¢ä¸­çš„åŸºäºå¯¹è±¡å’Œäº‹ä»¶é©±åŠ¨çš„è§£é‡Šæ€§è¯­è¨€ï¼Œå®ƒçš„å‰èº«æ˜¯Live Scriptï¼›Javaæ˜¯SUNå…¬å¸æ¨å‡ºçš„æ–°ä¸€ä»£é¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œç‰¹åˆ«é€‚åˆäºInternetåº”ç”¨ç¨‹åºå¼€å‘ï¼› Javaçš„å‰èº«æ˜¯Oakè¯­è¨€ã€‚</p><h4 id="åŒºåˆ«2ï¼šåŸºäºå¯¹è±¡å’Œé¢å‘å¯¹è±¡">åŒºåˆ«2ï¼šåŸºäºå¯¹è±¡å’Œé¢å‘å¯¹è±¡</h4><p>JavaScriptæ˜¯è„šæœ¬è¯­è¨€ï¼Œæ˜¯ä¸€ç§åŸºäºå¯¹è±¡çš„è¯­è¨€ã€‚æœ¬èº«æä¾›äº†éå¸¸ä¸°å¯Œçš„å†…éƒ¨å¯¹è±¡ä¾›è®¾è®¡äººå‘˜ä½¿ç”¨ï¼Œä½†ä¸æ”¯æŒç»§æ‰¿å’Œå¤šæ€ã€‚Javaæ˜¯é¢å‘å¯¹è±¡çš„ï¼Œæ˜¯ä¸€ç§çœŸæ­£çš„é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œæ”¯æŒå°è£…ã€ç»§æ‰¿å’Œå¤šæ€ã€‚</p><h4 id="åŒºåˆ«3ï¼šå˜é‡ç±»å‹å¼ºå¼±ä¸åŒ">åŒºåˆ«3ï¼šå˜é‡ç±»å‹å¼ºå¼±ä¸åŒ</h4><p>Javaé‡‡ç”¨å¼ºç±»å‹å˜é‡æ£€æŸ¥ï¼Œå³æ‰€æœ‰å˜é‡åœ¨ç¼–è¯‘ä¹‹å‰å¿…é¡»å£°æ˜ä¸ºæŸä¸€æŒ‡å®šç±»å‹ã€‚å¦‚: int  x=1234;JavaScriptä¸­æ˜¯å¼±ç±»å‹å˜é‡ã€‚ç»Ÿä¸€é‡‡ç”¨varå£°æ˜ï¼Œå¯èµ‹å„ç§æ•°æ®ç±»å‹å€¼ã€‚</p><h4 id="åŒºåˆ«4-è¿è¡Œçš„ä½ç½®ä¸åŒ">åŒºåˆ«4: è¿è¡Œçš„ä½ç½®ä¸åŒ</h4><p>Javaè¿è¡Œä¸æœåŠ¡å™¨ç«¯çš„,å¤§å‹ç¼–ç¨‹è¯­è¨€, JSè¿è¡Œäºå®¢æˆ·ç«¯(æµè§ˆå™¨)ä¸€ç§å°è§„æ¨¡è„šæœ¬è¯­è¨€</p><h4 id="HTMLå’ŒCSSå’ŒJSè¿™ä¹‹é—´çš„å…³ç³»">HTMLå’ŒCSSå’ŒJSè¿™ä¹‹é—´çš„å…³ç³»</h4><p>HTMLå’ŒCSSå’ŒJSéƒ½æ˜¯å‰ç«¯çš„ä¸»è¦æŠ€æœ¯,ä¸‰è€…å„æœ‰åˆ†å·¥.HTMLå¯ä»¥ç”¨äºåˆ¶ä½œç½‘é¡µçš„ä¸»ä½“ç»“æ„,CSSç”¨äºç»™ç½‘é¡µåšç¾åŒ–,JSç”¨äºåœ¨ç½‘é¡µä¸Šæ·»åŠ åŠ¨æ€æ•ˆæœ</p><h2 id="å¼•å…¥æ–¹å¼">å¼•å…¥æ–¹å¼</h2><h3 id="1-å†…åµŒå¼å¼•å…¥">1.å†…åµŒå¼å¼•å…¥</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--å†…åµŒå¼å¼•å…¥æ–¹å¼1åœ¨headæ ‡ç­¾ä¸­ï¼Œç”¨ä¸€å †scriptæ ‡ç­¾åµŒå…¥JS--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token comment">/*å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼ˆæ–¹æ³•ï¼‰*/</span>            <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">/*å¼¹çª—æç¤ºä¸€ç‚¹ä¿¡æ¯*/</span>                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç‚¹æˆ‘å‘€ <span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœ</p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20210719102431728.png" alt="image-20210719102431728" style="zoom: 33%;" /><h3 id="2-é“¾æ¥å¼å¼•å…¥">2.é“¾æ¥å¼å¼•å…¥</h3><p>å°†JSä»£ç æ”¾å…¥å¤–éƒ¨JSæ–‡ä»¶ä¸­,é€šè¿‡scriptæ ‡ç­¾å¼•å…¥ï¼Œæé«˜ä»£ç å¤ç”¨åº¦ï¼Œé™ä½äº†ä»£ç ç»´æŠ¤çš„éš¾åº¦<br>1 ä¸€ä¸ªé¡µé¢å¯ä»¥åŒæ—¶å¼•å…¥å¤šä¸ªä¸åŒçš„JSæ–‡ä»¶<br>2 scriptæ ‡ç­¾ä¸€ç‚¹ç”¨äºå¼•å…¥å¤–éƒ¨JSæ–‡ä»¶ï¼Œå°±ä¸èƒ½åœ¨ä¸­é—´å®šä¹‰å†…åµŒå¼ä»£ç <br>3 ä¸€ä¸ªé¡µé¢ä¸Šå¯ä»¥ç”¨å¤šä¸ªscriptæ ‡ç­¾ ä½ç½®ä¹Ÿä¸æ˜¯éå¾—æ”¾åˆ°headæ ‡ç­¾ä¸­</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--é“¾æ¥å¼ å¼•å…¥å¤–éƒ¨JSæ–‡ä»¶        --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/myjs.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç‚¹æˆ‘å‘€<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h3 id="3-URLç½‘ç»œè·¯å¾„">3.URLç½‘ç»œè·¯å¾„</h3><p>ç•¥</p><h2 id="æ•°æ®ç±»å‹å’Œè¿ç®—ç¬¦">æ•°æ®ç±»å‹å’Œè¿ç®—ç¬¦</h2><p>JSæ˜¯å¼±ç±»å‹çš„è„šæœ¬è¯­è¨€ï¼Œä¸æ˜æ˜¾ï¼Œæ‰€æœ‰çš„å˜é‡å¯¹è±¡æ•°æ®ç±»å‹çš„å£°æ˜éƒ½æ˜¯ç”¨var</p><h3 id="å˜é‡çš„å£°æ˜å’Œèµ‹å€¼">å˜é‡çš„å£°æ˜å’Œèµ‹å€¼</h3><p>å˜é‡å£°æ˜æ—¶ä¸ç”¨ç¡®å®šå…·ä½“çš„æ•°æ®ç±»å‹ï¼Œåœ¨å˜é‡èµ‹å€¼æ—¶ï¼Œç¡®å®šå˜é‡çš„å…·ä½“æ•°æ®ç±»å‹ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> i<span class="token punctuation">;</span>i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></code></pre><h3 id="1-æ•°æ®ç±»å‹">1. æ•°æ®ç±»å‹</h3><ol><li><p>æ•°å€¼å‹ï¼š</p><p>number<strong>æ•´æ•°å’Œæµ®ç‚¹æ•°</strong>ç»Ÿç§°ä¸ºæ•°å€¼ã€‚ä¾‹å¦‚85æˆ–3.1415926ç­‰ã€‚</p></li><li><p>å­—ç¬¦ä¸²å‹ï¼š</p><p>Stringç”±0ä¸ª,1ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ç»„æˆçš„åºåˆ—ã€‚åœ¨JavaScriptä¸­ï¼Œç”¨<strong>åŒå¼•å·æˆ–å•å¼•å·</strong>æ‹¬èµ·æ¥è¡¨ç¤ºï¼Œå¦‚&quot;æ‚¨å¥½&quot;ã€â€˜å­¦ä¹ JavaScriptâ€™ ç­‰ã€‚</p></li><li><p>é€»è¾‘ï¼ˆå¸ƒå°”ï¼‰å‹ï¼š</p><p>booleanç”¨<strong>trueæˆ–false</strong>æ¥è¡¨ç¤ºã€‚</p></li><li><p>ç©ºï¼ˆnullï¼‰å€¼ï¼š</p><p>è¡¨ç¤ºæ²¡æœ‰å€¼ï¼Œç”¨äºå®šä¹‰ç©ºçš„æˆ–ä¸å­˜åœ¨çš„å¼•ç”¨ã€‚è¦æ³¨æ„ï¼Œç©ºå€¼ä¸ç­‰åŒäºç©ºå­—ç¬¦ä¸²&quot;&quot;æˆ–0ã€‚</p></li><li><p>æœªå®šä¹‰ï¼ˆundefinedï¼‰å€¼ï¼š</p><p>å®ƒä¹Ÿæ˜¯ä¸€ä¸ªä¿ç•™å­—ã€‚è¡¨ç¤ºå˜é‡è™½ç„¶å·²ç»å£°æ˜ï¼Œä½†å´æ²¡æœ‰èµ‹å€¼ã€‚</p></li><li><p>é™¤äº†ä»¥ä¸Šäº”ç§åŸºæœ¬çš„æ•°æ®ç±»å‹ä¹‹å¤–ï¼ŒJavaScriptè¿˜æ”¯æŒå¤åˆæ•°æ®ç±»å‹Objectï¼Œå¤åˆæ•°æ®ç±»å‹åŒ…æ‹¬<strong>å¯¹è±¡å’Œæ•°ç»„</strong>ä¸¤ç§ã€‚</p></li></ol><p>JSä¸­çš„å˜é‡å¯ä»¥åå¤å£°æ˜ï¼Œåå£°æ˜çš„å˜é‡ä¼šè¦†ç›–åŸæ¥çš„å˜é‡</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></code></pre><p>typeof æŸ¥çœ‹å˜é‡ç±»å‹</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å½“ç»™ä¸€ä¸ªå˜é‡èµ‹å€¼ä¸ºnullæ—¶ï¼Œå˜é‡çš„ç±»å‹å°±æ˜¯object</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> i <span class="token punctuation">;</span><span class="token comment">/*é»˜è®¤ä¸ºnull*/</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token keyword">null</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/*Object*/</span></code></pre><p>JSæ ‡è¯†ç¬¦çš„å‘½åè§„åˆ™ä¸javaä¿æŒä¸€è‡´å³å¯ï¼Œä¸è¦ç”¨$ï¼Œé¿å…ä¸JQueryå†²çª</p><h3 id="2-è¿ç®—ç¬¦">2.è¿ç®—ç¬¦</h3><div align="center" style ="zoom:67%;">    <img src = "C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20210719162049253.png" /></div><h4 id="å’Œ">/ å’Œ %</h4><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/* * èƒ½é™¤å°½,åˆ™é»˜è®¤ç»“æœå°±æ˜¯ä¸€ä¸ªæ•´æ•°,ä¸èƒ½é™¤å°½,ç»“æœé»˜è®¤å°±æ˜¯æµ®ç‚¹æ•°* é™¤é›¶ä¸ä¼šå‡ºç°å¼‚å¸¸,è€Œæ˜¯å‡ºç° Infinity* å’Œ0å–ä½™æ•°,å‡ºç°NaN   not a number ä¸æ˜¯ä¸€ä¸ªæ•°å­—* */</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">%</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">%</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>JSå–ä½™æ•°è¿ç®—å¯¹äºæµ®ç‚¹æ•°ä»ç„¶æœ‰æ•ˆ,å¦‚æœå’Œ0å–ä½™æ•°,ç»“æœæ˜¯NaN(not a number)</p><h4 id="">+</h4><p>åŒæ—¶ä¹Ÿæ˜¯è¿æ¥è¿ç®—ç¬¦,çœ‹ä¸¤ç«¯çš„å˜é‡ç±»å‹,å¦‚æœéƒ½æ˜¯numberé‚£ä¹ˆå°±æ˜¯ç®—æ•°ä¸­çš„åŠ æ³• å¦‚æœæœ‰å­—ç¬¦ä¸²,é‚£ä¹ˆå°±æ˜¯è¿æ¥ç¬¦å·,å¦‚æœæ˜¯å¸ƒå°”ç±»å‹å’Œnumberç›¸åŠ ,é‚£ä¹ˆä¼šå°†trueè½¬åŒ–ä¸º1 å°†false è½¬åŒ–ä¸º0</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** +å·ä¸­ å¦‚æœä¸€æ®µæ˜¯å­—ç¬¦ä¸²,å°±å˜æˆäº†æ–‡å­—æ‹¼æ¥* æ•°å­—å’Œ booleanç±»å‹ç›¸åŠ   trueä¼šè½¬å˜æˆ1  falseä¼šè½¬å˜æˆ0  å†åšæ•°å­¦è¿ç®—* */</span>    <span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="ç­‰å€¼ç¬¦">== (ç­‰å€¼ç¬¦)</h4><p>å…ˆæ¯”è¾ƒç±»å‹,å¦‚æœç±»å‹ä¸€è‡´,å†æ¯”è¾ƒå†…å®¹,å¦‚æœç±»å‹ä¸ä¸€è‡´,ä¼šå¼ºåˆ¶è½¬æ¢ä¸ºnumberå†æ¯”è¾ƒå†…å®¹</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** == ç­‰å€¼ç¬¦* å…ˆæ¯”è¾ƒç±»å‹,å¦‚æœç±»å‹ä¸€è‡´,åˆ™æ¯”è¾ƒå€¼æ˜¯å¦ç›¸åŒ* å¦‚æœç±»å‹ä¸ä¸€è‡´,ä¼šå°†æ•°æ®å°è¯•è½¬æ¢number å†æ¯”è¾ƒå†…å®¹* */</span>    <span class="token keyword">var</span> a <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> b<span class="token operator">=</span><span class="token string">"1"</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> c<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> d<span class="token operator">=</span><span class="token string">"true"</span><span class="token punctuation">;</span>    <span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token operator">==</span>b<span class="token punctuation">)</span><span class="token comment">// t</span>    <span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token operator">==</span>c<span class="token punctuation">)</span><span class="token comment">// t</span>    <span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token operator">==</span>d<span class="token punctuation">)</span><span class="token comment">// f</span>    <span class="token function">alert</span><span class="token punctuation">(</span>b<span class="token operator">==</span>c<span class="token punctuation">)</span><span class="token comment">// t</span>    <span class="token function">alert</span><span class="token punctuation">(</span>b<span class="token operator">==</span>d<span class="token punctuation">)</span><span class="token comment">// f</span>    <span class="token function">alert</span><span class="token punctuation">(</span>c<span class="token operator">==</span>d<span class="token punctuation">)</span><span class="token comment">// f</span></code></pre><h4 id="ç­‰åŒç¬¦">===( ç­‰åŒç¬¦)</h4><p>æ•°æ®ç±»å‹ä¸åŒ ç›´æ¥è¿”å›falseå¦‚æœç±»å‹ç›¸åŒ æ‰ä¼šæ¯”è¾ƒå†…å®¹</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** === ç­‰åŒç¬¦* å¦‚æœæ•°æ®ç±»å‹ä¸åŒ,ç›´æ¥è¿”å›false  å¦‚æœç±»å‹ç›¸åŒ,æ‰ä¼šç»§ç»­æ¯”è¾ƒå†…å®¹* * */</span>    <span class="token keyword">var</span> a <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> b<span class="token operator">=</span><span class="token string">"1"</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> c<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> d<span class="token operator">=</span><span class="token string">"true"</span><span class="token punctuation">;</span>    <span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token operator">===</span>b<span class="token punctuation">)</span><span class="token comment">//f</span>    <span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token operator">===</span>c<span class="token punctuation">)</span><span class="token comment">//f</span>    <span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token operator">===</span>d<span class="token punctuation">)</span><span class="token comment">//f</span>    <span class="token function">alert</span><span class="token punctuation">(</span>b<span class="token operator">===</span>c<span class="token punctuation">)</span><span class="token comment">//f</span>    <span class="token function">alert</span><span class="token punctuation">(</span>b<span class="token operator">===</span>d<span class="token punctuation">)</span><span class="token comment">//f</span>    <span class="token function">alert</span><span class="token punctuation">(</span>c<span class="token operator">===</span>d<span class="token punctuation">)</span><span class="token comment">//f</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"asdf"</span><span class="token operator">===</span><span class="token string">"asdf"</span><span class="token punctuation">)</span><span class="token comment">//t</span></code></pre><h2 id="æµç¨‹æ§åˆ¶">æµç¨‹æ§åˆ¶</h2><h3 id="åˆ†æ”¯ç»“æ„">åˆ†æ”¯ç»“æ„</h3><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span><span class="token operator">&lt;</span>html<span class="token operator">></span>        <span class="token operator">&lt;</span>head<span class="token operator">></span>                <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>title<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>                <span class="token operator">&lt;</span>script<span class="token operator">></span>                        <span class="token comment">/*                         * å®šä¹‰å˜é‡è¡¨ç¤ºæœˆä»½                         * æ ¹æ®æœˆä»½è¾“å‡ºè¯¥æœˆçš„å­£èŠ‚å’Œåº”å­£æ´»åŠ¨                         * */</span>                        <span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>                        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span><span class="token number">12</span> <span class="token operator">||</span> i <span class="token operator">==</span><span class="token number">1</span> <span class="token operator">||</span> i<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"å¤§çº¦åœ¨å†¬å­£: å†¬å¤©åƒç«é”…"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"æ˜¥å¤©æ¥äº†: æ˜¥å¤©åƒé’èœ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token number">6</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"å¤å¤©åˆ°äº†: åƒçƒ§çƒ¤å–å•¤é…’"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token number">9</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"ç§‹å¤©åˆ°äº†: è´´ç§‹è†˜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"æœˆä»½æœ‰è¯¯"</span><span class="token punctuation">)</span>                        <span class="token punctuation">&#125;</span>                        <span class="token keyword">switch</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                                <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>                                <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>                                <span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>                                        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"æ˜¥çœ ä¸è§‰æ™“"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                        <span class="token keyword">break</span><span class="token punctuation">;</span>                                <span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span>                                <span class="token keyword">case</span> <span class="token number">7</span><span class="token operator">:</span>                                <span class="token keyword">case</span> <span class="token number">8</span><span class="token operator">:</span>                                        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"å¤å¤©èšŠå­å’¬"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                        <span class="token keyword">break</span><span class="token punctuation">;</span>                                <span class="token keyword">case</span> <span class="token number">9</span><span class="token operator">:</span>                                <span class="token keyword">case</span> <span class="token number">10</span><span class="token operator">:</span>                                <span class="token keyword">case</span> <span class="token number">11</span><span class="token operator">:</span>                                        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"ç§‹å¤©ä¸€èº«åŒ…"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                        <span class="token keyword">break</span><span class="token punctuation">;</span>                                <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>                                <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>                                <span class="token keyword">case</span> <span class="token number">12</span><span class="token operator">:</span>                                        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"å†¬å¤©èšŠå­æ­»ç¿˜ç¿˜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                        <span class="token keyword">break</span><span class="token punctuation">;</span>                                <span class="token keyword">default</span><span class="token operator">:</span>                                        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"æœˆä»½æœ‰è¯¯"</span><span class="token punctuation">)</span>                        <span class="token punctuation">&#125;</span>                <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>        <span class="token operator">&lt;</span>body<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><h3 id="å¾ªç¯ç»“æ„">å¾ªç¯ç»“æ„</h3><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>      <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>              <span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>              i<span class="token operator">++</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token comment">/*       * è€ƒè¯•,ç›´åˆ°åˆ†æ•°è¿‡çº¿ä¸ºæ­¢       * æ±‚1-10æ•´æ•°å’Œ 1+10*(10/2) */</span>      <span class="token keyword">var</span> sum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>      <span class="token keyword">var</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>      <span class="token keyword">do</span><span class="token punctuation">&#123;</span>              sum<span class="token operator">+=</span>j<span class="token punctuation">;</span>              j<span class="token operator">++</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token keyword">while</span><span class="token punctuation">(</span>j<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">alert</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span>      <span class="token keyword">var</span> sum2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> z<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>z<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>z<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>              sum2<span class="token operator">+=</span>z<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token function">alert</span><span class="token punctuation">(</span>sum2<span class="token punctuation">)</span></code></pre><p>ä¹ä¹ä¹˜æ³•è¡¨</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">9</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>          document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token string">"*"</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">"="</span><span class="token operator">+</span>i<span class="token operator">*</span>j<span class="token operator">+</span><span class="token string">"&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"</span><span class="token punctuation">)</span>      <span class="token punctuation">&#125;</span>      document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;br/>"</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span></code></pre><p>æ•ˆæœ</p><img src="JS/20210719173226.png" alt="image-20210719173226037" style="zoom:50%;" /><h2 id="å‡½æ•°">å‡½æ•°</h2><p>â€‹ç±»ä¼¼äºjavaä¸­çš„æ–¹æ³•,JSä¸­ä¹Ÿå¯ä»¥å®šä¹‰ä¸€äº›å‡½æ•°,javaä¸­çš„æ–¹æ³•ç­¾ååŒ…å«è®¿é—®ä¿®é¥°ç¬¦,è¿”å›å€¼ç±»å‹,æ–¹æ³•å,å‚æ•°åˆ—è¡¨,å¼‚å¸¸åˆ—è¡¨,ä½†æ˜¯JSä¸­å®šä¹‰å‡½æ•°çš„è¯­æ³•ç›¸å¯¹ç®€å•å¾ˆå¤š,ä¸»è¦ä»¥functionä½œä¸ºå‡½æ•°å…³é”®å­—,å…·å¤‡å‡½æ•°åå’Œå‚æ•°åˆ—è¡¨,ä½†æ˜¯æ²¡æœ‰è®¿é—®ä¿®é¥°ç¬¦ä¹Ÿæ²¡æœ‰è¿”å›å€¼ç±»å‹å…³é”®å­—å’Œå¼‚å¸¸åˆ—è¡¨ã€‚</p><h3 id="ä¸‰ç§è¯­æ³•">ä¸‰ç§è¯­æ³•</h3><ol><li><p>function å‡½æ•°å(å‚æ•°åˆ—è¡¨){jsä»£ç }</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>       <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre></li><li><p>var å‡½æ•°å=function(å‚æ•°åˆ—è¡¨){JSä»£ç }</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">fun2</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>       <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"ä½ å¾ˆå¥½"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre></li><li><p>var å‡½æ•°å=new Function(â€˜jsä»£ç â€™)</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> fun3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'alert("ä½ éå¸¸å¥½");'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ol><p>è°ƒç”¨æ–¹æ³•</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// è°ƒç”¨æ–¹æ³•</span><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="å‡½æ•°å‚æ•°å’Œè¿”å›å€¼">å‡½æ•°å‚æ•°å’Œè¿”å›å€¼</h3><p>1.ä¼ å…¥çš„å®å‚å¯ä»¥å’Œå½¢å‚ä¸ªæ•°ä¸åŒ</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"a:"</span><span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"b:"</span><span class="token operator">+</span>b<span class="token punctuation">)</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"c:"</span><span class="token operator">+</span>c<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"hello js"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å°‘ä¼ å‚æ•° OK</span><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å¤šä¼ å‚æ•° OK å¤šå‡ºæ¥çš„å‚æ•°ç›¸å½“äºæ²¡ä¼ </span><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"hello js"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><span class="token operator">&lt;</span>body<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><p>2.å‡½æ•°å¦‚æœæœ‰è¿”å›å€¼ï¼Œç›´æ¥returnå³å¯</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> c<span class="token operator">=</span>a<span class="token operator">*</span>b<span class="token punctuation">;</span>                <span class="token keyword">return</span> c<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> x <span class="token operator">=</span><span class="token function">fun2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span></code></pre><p>3.å¯ä»¥å°†æ–¹æ³•ä½œä¸ºå‚æ•°ä¼ è¿›å»</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// æ–¹æ³•æœ¬èº«ä½œä¸ºå‚æ•°(äº†è§£)</span><span class="token keyword">function</span> <span class="token function">funa</span><span class="token punctuation">(</span> <span class="token parameter">i <span class="token punctuation">,</span>j</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> i<span class="token operator">+</span>j<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">funb</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> sum <span class="token operator">=</span><span class="token function">funb</span><span class="token punctuation">(</span>funa<span class="token punctuation">)</span><span class="token function">alert</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span></code></pre><h2 id="æ•°ç»„">æ•°ç»„</h2><h3 id="1-åˆ›å»ºæ•°ç»„">1. åˆ›å»ºæ•°ç»„</h3><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*ç¬¬ä¸€ç§â€”â€”åˆ›å»ºç©ºæ•°ç»„*/</span><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/*ç¬¬äºŒç§â€”â€”åˆ›å»ºå®šé•¿æ•°ç»„*/</span><span class="token keyword">var</span> arr2<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>arr2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"x"</span><span class="token punctuation">;</span>arr2<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/*ç¬¬ä¸‰ç§â€”â€”åˆ›å»ºæ—¶ç›´æ¥æŒ‡å®šå…ƒç´ å€¼*/</span><span class="token keyword">var</span> arr3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20.3</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token comment">/*ç¬¬å››ç§â€”â€”ç›¸å½“äºç¬¬ä¸‰ç§è¯­æ³•çš„ç®€å†™*/</span><span class="token keyword">var</span> arr3<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'aaa'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20.3</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span></code></pre><h3 id="2-æ•°ç»„å…ƒç´ å’Œé•¿åº¦">2. æ•°ç»„å…ƒç´ å’Œé•¿åº¦</h3><ul><li>å¯ä»¥é€šè¿‡ä¿®æ”¹lengthå±æ€§æ¥æ”¹å˜æ•°ç»„é•¿åº¦</li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">]</span><span class="token punctuation">;</span>arr<span class="token punctuation">.</span>length<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span></code></pre><p><img src="JS/20210719202759.png" alt="image-20210719202759057"></p><ul><li>å¯ä»¥é€šè¿‡ç´¢å¼•æ”¹å˜æ•°ç»„é•¿åº¦</li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript">arr<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><img src="JS/20210719203014.png" alt="image-20210719203014658"></p><h3 id="3-æ•°ç»„éå†">3. æ•°ç»„éå†</h3><ul><li>æ™®é€šforå¾ªç¯</li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><ul><li>foreachå¾ªç¯éå†æ•°ç»„</li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** JS ä¸­foreachå†™æ³•ä¸º  for( var i in æ•°ç»„)* i ä¸æ˜¯å…ƒç´   æ˜¯ç´¢å¼•* */</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> arr<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><h3 id="4-æ•°ç»„å¸¸ç”¨æ–¹æ³•">4.æ•°ç»„å¸¸ç”¨æ–¹æ³•</h3><ul><li><p>æŸ¥è¯¢å…ƒç´ ç´¢å¼•</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">  </code></pre></li><li><p>concat()</p><p>åˆå¹¶ä¸¤ä¸ªæ•°ç»„</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">var</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">var</span> arr4 <span class="token operator">=</span> arr2<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr4<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><img src="JS/20210720090920.png" alt="image-20210720090919483" style="zoom:50%;" /><p>åˆå¹¶ä¸‰ä¸ªæ•°ç»„</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> arr5 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">var</span> arr6 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">var</span> arr7 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">var</span> arr8 <span class="token operator">=</span> arr5<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr6<span class="token punctuation">,</span>arr7<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr8<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><img src="JS/20210720091128.png" alt="image-20210720091128798" style="zoom:50%;" /></li><li><p>join():åˆå¹¶å­—ç¬¦ä¸²</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> fruits<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Banana'</span><span class="token punctuation">,</span><span class="token string">'Orange'</span><span class="token punctuation">,</span><span class="token string">'Apple'</span><span class="token punctuation">,</span><span class="token string">'Mango'</span><span class="token punctuation">]</span><span class="token keyword">var</span> fs <span class="token operator">=</span> fruits<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fs<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><img src="JS/20210720091607.png" alt="image-20210720091607132"></p></li><li><p>pop():ç§»é™¤æœ€åä¸€ä¸ªå…ƒç´ </p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> fruit <span class="token operator">=</span> fruits<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><img src="JS/20210720091849.png" alt="image-20210720091849872" style="zoom:50%;" /></li><li><p>push():æƒ³ç»“å°¾å¢åŠ å…ƒç´ </p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">fruits<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"Grape"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><img src="JS/20210720092116.png" alt="image-20210720092116089" style="zoom:50%;" /></li><li><p>reverse():åè½¬æ•°ç»„</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">fruits<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><img src="JS/20210720092352.png" alt="image-20210720092352074" style="zoom:50%;" /></li><li><p>shift():åˆ é™¤æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ </p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> ss <span class="token operator">=</span> fruits<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ss<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><img src="JS/20210720092610.png" alt="image-20210720092610092" style="zoom:50%;" /></li><li><p>unshift():å‘ç¬¬ä¸€ä¸ªä½ç½®æ·»åŠ å…ƒç´ </p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">fruits<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token string">"ç«é¾™æœ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><img src="JS/20210720092807.png" style="zoom:50%;" /></li><li><p>slice():æˆªå–å­æ•°ç»„</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> citrus <span class="token operator">=</span>fruits<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>citrus<span class="token punctuation">)</span></code></pre><img src="JS/20210720093003.png" alt="image-20210720093003811" style="zoom:50%;" /></li><li><p>splice()</p><p>åˆ é™¤æ•°ç»„ä¸­çš„æŸäº›å…ƒç´  ï¼ˆä¼ å…¥ç´¢å¼•å’Œåˆ é™¤å…ƒç´ çš„ä¸ªæ•°</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> num<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>num<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><img src="JS/20210720093244.png" alt="image-20210720093244580" style="zoom:50%;" /><p>å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸º0ï¼Œåˆ™å˜ä¸ºåœ¨æŒ‡å®šç´¢å¼•ä½ç½®å¢åŠ å…ƒç´ </p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">num<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><img src="JS/20210720094411.png" alt="image-20210720094411730" style="zoom:50%;" /></li><li><p>sort(): æ’åº</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//æŒ‰ç…§å­—æ¯å‡åºæ’åˆ—</span><span class="token keyword">var</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Banana"</span><span class="token punctuation">,</span> <span class="token string">"Orange"</span><span class="token punctuation">,</span> <span class="token string">"Apple"</span><span class="token punctuation">,</span> <span class="token string">"Mango"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>fruits<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><span class="token comment">//æ•°å­—çš„æ’åºï¼š</span><span class="token keyword">var</span> numbers<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//a-b å‡åº b-a é™åº</span>numbers<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> b<span class="token operator">-</span>a<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span></code></pre></li></ul><h2 id="JSå¯¹è±¡">JSå¯¹è±¡</h2><p>JavaS0cript ä¸­çš„æ‰€æœ‰äº‹ç‰©éƒ½æ˜¯å¯¹è±¡ï¼šå­—ç¬¦ä¸²ã€æ•°å€¼ã€æ•°ç»„ã€å‡½æ•°â€¦   æ­¤å¤–ï¼ŒJavaScript å…è®¸è‡ªå®šä¹‰å¯¹è±¡</p><p>JSåŸºäºå¯¹è±¡çš„è„šæœ¬è¯­è¨€ ,æœ‰ç±»å’Œå¯¹è±¡,ä½†æ˜¯æ²¡æœ‰å°è£…,ç»§æ‰¿,å¤šæ€,Java script ä¸­æœ‰ä¸€äº›æµè§ˆå™¨ç›´æ¥è¯†åˆ«å¹¶ä½¿ç”¨çš„å¯¹è±¡,å¸¸è§çš„å¯¹è±¡æœ‰Arrayï¼ˆå‰é¢çš„æ•°ç»„ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰,Stringå¯¹è±¡,Mathå¯¹è±¡,Numberå¯¹è±¡,Dateå¯¹è±¡ç­‰ç­‰.</p><h3 id="å¸¸ç”¨å¯¹è±¡">å¸¸ç”¨å¯¹è±¡</h3><h4 id="String">String</h4><h5 id="å±æ€§">å±æ€§</h5><table><thead><tr><th>å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td><a href="https://www.runoob.com/jsref/jsref-constructor-string.html">constructor</a></td><td>å¯¹åˆ›å»ºè¯¥å¯¹è±¡çš„å‡½æ•°çš„å¼•ç”¨</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-length-string.html">length</a></td><td>å­—ç¬¦ä¸²çš„é•¿åº¦</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-prototype-string.html">prototype</a></td><td>å…è®¸æ‚¨å‘å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•</td></tr></tbody></table><h5 id="æ–¹æ³•">æ–¹æ³•</h5><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><a href="https://www.runoob.com/jsref/jsref-charat.html">charAt()</a></td><td>è¿”å›åœ¨æŒ‡å®šä½ç½®çš„å­—ç¬¦ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-charcodeat.html">charCodeAt()</a></td><td>è¿”å›åœ¨æŒ‡å®šçš„ä½ç½®çš„å­—ç¬¦çš„ Unicode ç¼–ç ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-concat-string.html">concat()</a></td><td>è¿æ¥ä¸¤ä¸ªæˆ–æ›´å¤šå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›æ–°çš„å­—ç¬¦ä¸²ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-fromcharcode.html">fromCharCode()</a></td><td>å°† Unicode ç¼–ç è½¬ä¸ºå­—ç¬¦ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-indexof.html">indexOf()</a></td><td>è¿”å›æŸä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²å€¼åœ¨å­—ç¬¦ä¸²ä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-string-includes.html">includes()</a></td><td>æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šçš„å­å­—ç¬¦ä¸²ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-lastindexof.html">lastIndexOf()</a></td><td>ä»åå‘å‰æœç´¢å­—ç¬¦ä¸²ï¼Œå¹¶ä»èµ·å§‹ä½ç½®ï¼ˆ0ï¼‰å¼€å§‹è®¡ç®—è¿”å›å­—ç¬¦ä¸²æœ€åå‡ºç°çš„ä½ç½®ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-match.html">match()</a></td><td>æŸ¥æ‰¾æ‰¾åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-repeat.html"> repeat()</a></td><td>å¤åˆ¶å­—ç¬¦ä¸²æŒ‡å®šæ¬¡æ•°ï¼Œå¹¶å°†å®ƒä»¬è¿æ¥åœ¨ä¸€èµ·è¿”å›ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-replace.html">replace()</a></td><td>åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾åŒ¹é…çš„å­ä¸²ï¼Œå¹¶æ›¿æ¢ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸²ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-replaceall.html">replaceAll()</a></td><td>åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾åŒ¹é…çš„å­ä¸²ï¼Œå¹¶æ›¿æ¢ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ‰€æœ‰å­ä¸²ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-search.html">search()</a></td><td>æŸ¥æ‰¾ä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„å€¼ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-slice-string.html">slice()</a></td><td>æå–å­—ç¬¦ä¸²çš„ç‰‡æ–­ï¼Œå¹¶åœ¨æ–°çš„å­—ç¬¦ä¸²ä¸­è¿”å›è¢«æå–çš„éƒ¨åˆ†ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-split.html">split()</a></td><td>æŠŠå­—ç¬¦ä¸²åˆ†å‰²ä¸ºå­—ç¬¦ä¸²æ•°ç»„ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-startswith.html">startsWith()</a></td><td>æŸ¥çœ‹å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å­å­—ç¬¦ä¸²å¼€å¤´ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-substr.html">substr()</a></td><td>ä»èµ·å§‹ç´¢å¼•å·æå–å­—ç¬¦ä¸²ä¸­æŒ‡å®šæ•°ç›®çš„å­—ç¬¦ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-substring.html">substring()</a></td><td>æå–å­—ç¬¦ä¸²ä¸­ä¸¤ä¸ªæŒ‡å®šçš„ç´¢å¼•å·ä¹‹é—´çš„å­—ç¬¦ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-tolowercase.html">toLowerCase()</a></td><td>æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-touppercase.html">toUpperCase()</a></td><td>æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-trim.html">trim()</a></td><td>å»é™¤å­—ç¬¦ä¸²ä¸¤è¾¹çš„ç©ºç™½</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-tolocalelowercase.html"> toLocaleLowerCase()</a></td><td>æ ¹æ®æœ¬åœ°ä¸»æœºçš„è¯­è¨€ç¯å¢ƒæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-tolocaleuppercase.html"> toLocaleUpperCase()</a></td><td>æ ¹æ®æœ¬åœ°ä¸»æœºçš„è¯­è¨€ç¯å¢ƒæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-valueof-string.html">valueOf()</a></td><td>è¿”å›æŸä¸ªå­—ç¬¦ä¸²å¯¹è±¡çš„åŸå§‹å€¼ã€‚</td></tr><tr><td><a href="https://www.runoob.com/jsref/jsref-tostring.html"> toString()</a></td><td>è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</td></tr></tbody></table><ul><li><p>charAt()æ ¹æ®ç´¢å¼•è·å–å­—ç¬¦</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> str <span class="token operator">=</span><span class="token string">"hello js"</span><span class="token punctuation">;</span><span class="token keyword">var</span> c <span class="token operator">=</span>str<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><img src="JS/20210724163037.png" alt="image-20210724163032497"></p></li><li><p>concat()ï¼šæ‹¼æ¥å­—ç¬¦ä¸²</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">"hi"</span><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token string">"good"</span><span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token string">"China"</span><span class="token keyword">var</span> d <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span></code></pre><p><img src="JS/20210724163150.png" alt="image-20210724163146111"></p></li><li><p>repeat():é‡å¤</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token string">'absf'</span><span class="token keyword">var</span> f <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span></code></pre><p><img src="JS/20210724163235.png" alt="image-20210724163232328"></p></li><li><p>substr() substring():æˆªå–å­—ç¬¦ä¸²</p><ul><li>ä»må¼€å§‹æˆªå–nä¸ªå­—ç¬¦</li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token keyword">var</span> h <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span></code></pre><ul><li>ä»må¼€å§‹ä»nç»“æŸ:åŒ…å¤´ä¸åŒ…å°¾</li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> i <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></code></pre><img src="JS/20210724165033.png" alt="image-20210724164332270" style="zoom: 67%;" /></li><li><p>length å±æ€§ï¼šè·å–é•¿åº¦</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>length<span class="token punctuation">)</span></code></pre><img src="JS/20210724165806.png" style="zoom: 67%;" /></li><li><p>å¯ä»¥å°†å­—ç¬¦ä¸²å†…å®¹è§£ææˆJSä»£ç å¹¶è¿è¡Œ</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> testStr<span class="token operator">=</span><span class="token string">"var x=10"</span><span class="token function">eval</span><span class="token punctuation">(</span>testStr<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span></code></pre><img src="JS/20210724171327.png" alt="image-20210724171304740" style="zoom:67%;" /></li></ul><h4 id="Number">Number</h4><h5 id="å±æ€§-2">å±æ€§</h5><table><thead><tr><th style="text-align:center">å±æ€§</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-constructor-number.html">constructor</a></td><td style="text-align:center">è¿”å›å¯¹åˆ›å»ºæ­¤å¯¹è±¡çš„ Number å‡½æ•°çš„å¼•ç”¨ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-max-value.html">MAX_VALUE</a></td><td style="text-align:center">å¯è¡¨ç¤ºçš„æœ€å¤§çš„æ•°ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-min-value.html">MIN_VALUE</a></td><td style="text-align:center">å¯è¡¨ç¤ºçš„æœ€å°çš„æ•°ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-negative-infinity.html">NEGATIVE_INFINITY</a></td><td style="text-align:center">è´Ÿæ— ç©·å¤§ï¼Œæº¢å‡ºæ—¶è¿”å›è¯¥å€¼ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-number-nan.html">NaN</a></td><td style="text-align:center">éæ•°å­—å€¼ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-positive-infinity.html">POSITIVE_INFINITY</a></td><td style="text-align:center">æ­£æ— ç©·å¤§ï¼Œæº¢å‡ºæ—¶è¿”å›è¯¥å€¼ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-prototype-num.html">prototype</a></td><td style="text-align:center">å…è®¸æ‚¨å¯ä»¥å‘å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚</td></tr></tbody></table><pre class="language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">)</span><span class="token comment">//æœ€å¤§å€¼</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">)</span><span class="token comment">//æœ€å°å€¼</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">)</span><span class="token comment">//è´Ÿæ— ç©·</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MIN_SAFE_INTEGER</span><span class="token punctuation">)</span></code></pre><h5 id="æ–¹æ³•-2">æ–¹æ³•</h5><table><thead><tr><th style="text-align:center">æ–¹æ³•</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-isfinite-number.html"> isFinite </a></td><td style="text-align:center">æ£€æµ‹æŒ‡å®šå‚æ•°æ˜¯å¦ä¸ºæ— ç©·å¤§ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-toexponential.html">toExponential(x)</a></td><td style="text-align:center">æŠŠå¯¹è±¡çš„å€¼è½¬æ¢ä¸ºæŒ‡æ•°è®¡æ•°æ³•ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-tofixed.html">toFixed(x)</a></td><td style="text-align:center">æŠŠæ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç»“æœçš„å°æ•°ç‚¹åæœ‰æŒ‡å®šä½æ•°çš„æ•°å­—ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-toprecision.html">toPrecision(x)</a></td><td style="text-align:center">æŠŠæ•°å­—æ ¼å¼åŒ–ä¸ºæŒ‡å®šçš„é•¿åº¦ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-tostring-number.html">toString()</a></td><td style="text-align:center">æŠŠæ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä½¿ç”¨æŒ‡å®šçš„åŸºæ•°ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-valueof-number.html">valueOf()</a></td><td style="text-align:center">è¿”å›ä¸€ä¸ª Number å¯¹è±¡çš„åŸºæœ¬æ•°å­—å€¼ã€‚</td></tr></tbody></table><ul><li><p>parseFloat():å°†å­—ç¬¦ä¸²è½¬æ¢æˆæµ®ç‚¹æ•°</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">"10.123"</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><img src="C:\Users\Dell\AppData\Roaming\Typora\typora-user-images\image-20210724174135538.png" alt="image-20210724174135538" style="zoom:67%;" /></li><li><p>parseInt():å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•´å‹æ•°å­—</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">"30"</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>ç›¸å…³åˆ¤æ–­æ–¹æ³•ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">%</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token comment">// is not a number æ˜¯ä¸æ˜¯NAN</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isNAN</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//true</span><span class="token comment">//isFinite()ï¼šåˆ¤æ–­æ•°å­—æ˜¯ä¸æ˜¯æ— é™</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isFinite</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//false</span><span class="token comment">//isSafeInteger()ï¼šåˆ¤æ–­æ•°å­—æ˜¯ä¸æ˜¯ä¸€ä¸ªå®‰å…¨çš„èŒƒå›´çš„æ–¹æ³•</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isSafeInteger</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//false</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isSafeInteger</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//false</span></code></pre></li></ul><h4 id="Math">Math</h4><p>å…¶ä»–è¯¦æƒ… <a href="https://www.runoob.com/jsref/jsref-obj-math.html">https://www.runoob.com/jsref/jsref-obj-math.html</a></p><ul><li><p>å¸¸ç”¨æ–¹æ³•å’Œå±æ€§</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.64</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// å‘ä¸Šå–æ•´</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">3.01</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// å‘ä¸‹å–æ•´</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5.6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//æœ€å¤§å€¼</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5.6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//æœ€å°å€¼</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//éšæœºæ•°</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//å¼€å¹³æ–¹</span><span class="token comment">// å±æ€§PI</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span></code></pre></li><li><p>ç”Ÿæˆç»™å®šèŒƒå›´å†…çš„éšæœºæ•°</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> start <span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">var</span> end <span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">;</span><span class="token keyword">var</span> result <span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span>start<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></code></pre></li></ul><h4 id="Date">Date</h4><p>Dateå¯¹è±¡ç”¨äºå¤„ç†æ—¥æœŸå’Œæ—¶é—´</p><ul><li>åˆ›å»ºDateå¯¹è±¡çš„å››ç§æ–¹æ³•</li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>milliseconds<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>dateString<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> day<span class="token punctuation">,</span> hours<span class="token punctuation">,</span> minutes<span class="token punctuation">,</span> seconds<span class="token punctuation">,</span> milliseconds<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h5 id="å±æ€§-3">å±æ€§</h5><table><thead><tr><th style="text-align:center">å±æ€§</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-constructor-date.html">constructor</a></td><td style="text-align:center">è¿”å›å¯¹åˆ›å»ºæ­¤å¯¹è±¡çš„ Date å‡½æ•°çš„å¼•ç”¨ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-prototype-date.html">prototype</a></td><td style="text-align:center">ä½¿æ‚¨æœ‰èƒ½åŠ›å‘å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚</td></tr></tbody></table><h5 id="æ–¹æ³•-3">æ–¹æ³•</h5><table><thead><tr><th style="text-align:center">æ–¹æ³•</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getdate.html">getDate()</a></td><td style="text-align:center">ä» Date å¯¹è±¡è¿”å›ä¸€ä¸ªæœˆä¸­çš„æŸä¸€å¤© (1 ~ 31)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getday.html">getDay()</a></td><td style="text-align:center">ä» Date å¯¹è±¡è¿”å›ä¸€å‘¨ä¸­çš„æŸä¸€å¤© (0 ~ 6)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getfullyear.html">getFullYear()</a></td><td style="text-align:center">ä» Date å¯¹è±¡ä»¥å››ä½æ•°å­—è¿”å›å¹´ä»½ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-gethours.html">getHours()</a></td><td style="text-align:center">è¿”å› Date å¯¹è±¡çš„å°æ—¶ (0 ~ 23)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getmilliseconds.html">getMilliseconds()</a></td><td style="text-align:center">è¿”å› Date å¯¹è±¡çš„æ¯«ç§’(0 ~ 999)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getminutes.html">getMinutes()</a></td><td style="text-align:center">è¿”å› Date å¯¹è±¡çš„åˆ†é’Ÿ (0 ~ 59)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getmonth.html">getMonth()</a></td><td style="text-align:center">ä» Date å¯¹è±¡è¿”å›æœˆä»½ (0 ~ 11)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getseconds.html">getSeconds()</a></td><td style="text-align:center">è¿”å› Date å¯¹è±¡çš„ç§’æ•° (0 ~ 59)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-gettime.html">getTime()</a></td><td style="text-align:center">è¿”å› 1970 å¹´ 1 æœˆ 1 æ—¥è‡³ä»Šçš„æ¯«ç§’æ•°ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-gettimezoneoffset.html">getTimezoneOffset()</a></td><td style="text-align:center">è¿”å›æœ¬åœ°æ—¶é—´ä¸æ ¼æ—å¨æ²»æ ‡å‡†æ—¶é—´ (GMT) çš„åˆ†é’Ÿå·®ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getutcdate.html">getUTCDate()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶ä» Date å¯¹è±¡è¿”å›æœˆä¸­çš„ä¸€å¤© (1 ~ 31)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getutcday.html">getUTCDay()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶ä» Date å¯¹è±¡è¿”å›å‘¨ä¸­çš„ä¸€å¤© (0 ~ 6)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getutcfullyear.html">getUTCFullYear()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶ä» Date å¯¹è±¡è¿”å›å››ä½æ•°çš„å¹´ä»½ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getutchours.html">getUTCHours()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶è¿”å› Date å¯¹è±¡çš„å°æ—¶ (0 ~ 23)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getutcmilliseconds.html">getUTCMilliseconds()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶è¿”å› Date å¯¹è±¡çš„æ¯«ç§’(0 ~ 999)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getutcminutes.html">getUTCMinutes()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶è¿”å› Date å¯¹è±¡çš„åˆ†é’Ÿ (0 ~ 59)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getutcmonth.html">getUTCMonth()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶ä» Date å¯¹è±¡è¿”å›æœˆä»½ (0 ~ 11)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-getutcseconds.html">getUTCSeconds()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶è¿”å› Date å¯¹è±¡çš„ç§’é’Ÿ (0 ~ 59)ã€‚</td></tr><tr><td style="text-align:center">getYear()</td><td style="text-align:center">å·²åºŸå¼ƒã€‚ è¯·ä½¿ç”¨ getFullYear() æ–¹æ³•ä»£æ›¿ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-parse.html">parse()</a></td><td style="text-align:center">è¿”å›1970å¹´1æœˆ1æ—¥åˆå¤œåˆ°æŒ‡å®šæ—¥æœŸï¼ˆå­—ç¬¦ä¸²ï¼‰çš„æ¯«ç§’æ•°ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-setdate.html">setDate()</a></td><td style="text-align:center">è®¾ç½® Date å¯¹è±¡ä¸­æœˆçš„æŸä¸€å¤© (1 ~ 31)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-setfullyear.html">setFullYear()</a></td><td style="text-align:center">è®¾ç½® Date å¯¹è±¡ä¸­çš„å¹´ä»½ï¼ˆå››ä½æ•°å­—ï¼‰ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-sethours.html">setHours()</a></td><td style="text-align:center">è®¾ç½® Date å¯¹è±¡ä¸­çš„å°æ—¶ (0 ~ 23)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-setmilliseconds.html">setMilliseconds()</a></td><td style="text-align:center">è®¾ç½® Date å¯¹è±¡ä¸­çš„æ¯«ç§’ (0 ~ 999)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-setminutes.html">setMinutes()</a></td><td style="text-align:center">è®¾ç½® Date å¯¹è±¡ä¸­çš„åˆ†é’Ÿ (0 ~ 59)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-setmonth.html">setMonth()</a></td><td style="text-align:center">è®¾ç½® Date å¯¹è±¡ä¸­æœˆä»½ (0 ~ 11)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-setseconds.html">setSeconds()</a></td><td style="text-align:center">è®¾ç½® Date å¯¹è±¡ä¸­çš„ç§’é’Ÿ (0 ~ 59)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-settime.html">setTime()</a></td><td style="text-align:center">setTime() æ–¹æ³•ä»¥æ¯«ç§’è®¾ç½® Date å¯¹è±¡ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-setutcdate.html">setUTCDate()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶è®¾ç½® Date å¯¹è±¡ä¸­æœˆä»½çš„ä¸€å¤© (1 ~ 31)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-setutcfullyear.html">setUTCFullYear()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶è®¾ç½® Date å¯¹è±¡ä¸­çš„å¹´ä»½ï¼ˆå››ä½æ•°å­—ï¼‰ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-setutchours.html">setUTCHours()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶è®¾ç½® Date å¯¹è±¡ä¸­çš„å°æ—¶ (0 ~ 23)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-setutcmilliseconds.html">setUTCMilliseconds()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶è®¾ç½® Date å¯¹è±¡ä¸­çš„æ¯«ç§’ (0 ~ 999)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-setutcminutes.html">setUTCMinutes()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶è®¾ç½® Date å¯¹è±¡ä¸­çš„åˆ†é’Ÿ (0 ~ 59)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-setutcmonth.html">setUTCMonth()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶è®¾ç½® Date å¯¹è±¡ä¸­çš„æœˆä»½ (0 ~ 11)ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-setutcseconds.html">setUTCSeconds()</a></td><td style="text-align:center">setUTCSeconds() æ–¹æ³•ç”¨äºæ ¹æ®ä¸–ç•Œæ—¶ (UTC) è®¾ç½®æŒ‡å®šæ—¶é—´çš„ç§’å­—æ®µã€‚</td></tr><tr><td style="text-align:center">setYear()</td><td style="text-align:center">å·²åºŸå¼ƒã€‚è¯·ä½¿ç”¨ setFullYear() æ–¹æ³•ä»£æ›¿ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-todatestring.html">toDateString()</a></td><td style="text-align:center">æŠŠ Date å¯¹è±¡çš„æ—¥æœŸéƒ¨åˆ†è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</td></tr><tr><td style="text-align:center">toGMTString()</td><td style="text-align:center">å·²åºŸå¼ƒã€‚è¯·ä½¿ç”¨ toUTCString() æ–¹æ³•ä»£æ›¿ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-toisostring.html">toISOString()</a></td><td style="text-align:center">ä½¿ç”¨ ISO æ ‡å‡†è¿”å›å­—ç¬¦ä¸²çš„æ—¥æœŸæ ¼å¼ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-tojson.html">toJSON()</a></td><td style="text-align:center">ä»¥ JSON æ•°æ®æ ¼å¼è¿”å›æ—¥æœŸå­—ç¬¦ä¸²ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-tolocaledatestring.html">toLocaleDateString()</a></td><td style="text-align:center">æ ¹æ®æœ¬åœ°æ—¶é—´æ ¼å¼ï¼ŒæŠŠ Date å¯¹è±¡çš„æ—¥æœŸéƒ¨åˆ†è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-tolocaletimestring.html">toLocaleTimeString()</a></td><td style="text-align:center">æ ¹æ®æœ¬åœ°æ—¶é—´æ ¼å¼ï¼ŒæŠŠ Date å¯¹è±¡çš„æ—¶é—´éƒ¨åˆ†è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-tolocalestring.html">toLocaleString()</a></td><td style="text-align:center">æ ¹æ®æœ¬åœ°æ—¶é—´æ ¼å¼ï¼ŒæŠŠ Date å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-tostring-date.html">toString()</a></td><td style="text-align:center">æŠŠ Date å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-totimestring.html">toTimeString()</a></td><td style="text-align:center">æŠŠ Date å¯¹è±¡çš„æ—¶é—´éƒ¨åˆ†è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-toutcstring.html">toUTCString()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶ï¼ŒæŠŠ Date å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ å®ä¾‹ï¼š <code>var today = new Date(); var UTCstring = today.toUTCString();</code></td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-utc.html">UTC()</a></td><td style="text-align:center">æ ¹æ®ä¸–ç•Œæ—¶è¿”å› 1970 å¹´ 1 æœˆ 1 æ—¥ åˆ°æŒ‡å®šæ—¥æœŸçš„æ¯«ç§’æ•°ã€‚</td></tr><tr><td style="text-align:center"><a href="https://www.runoob.com/jsref/jsref-valueof-date.html">valueOf()</a></td><td style="text-align:center">è¿”å› Date å¯¹è±¡çš„åŸå§‹å€¼ã€‚</td></tr></tbody></table><pre class="language-javascript" data-language="javascript"><code class="language-javascript"></code></pre><ul><li><p>åˆ›å»ºDateå¯¹è±¡ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** åœ¨ç¨‹åºä¸­ è¥¿æ–¹çš„æœˆä»½ç¼–å·ä»0å¼€å§‹* 1 2 3 4 5 6 * 0 1 2 3 4 5* */</span><span class="token keyword">var</span> today <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">var</span> d1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">"October 13, 1975 11:13:00"</span><span class="token punctuation">)</span><span class="token keyword">var</span> d2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">79</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token keyword">var</span> d3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">79</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d1<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d2<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d3<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><img src="JS/20210725090203.png" alt="image-20210725090203847" style="zoom:67%;" /></li><li><p>è·å¾—Dateå¯¹è±¡å±æ€§</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> d4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">51</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d4<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d4<span class="token punctuation">.</span><span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//å’Œ1900çš„å¹´ä»½å·®</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d4<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//å®Œæ•´çš„å¹´ä»½</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d4<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d4<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d4<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d4<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d4<span class="token punctuation">.</span><span class="token function">getMilliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//æ¯«ç§’</span></code></pre><img src="JS/20210725091429.png" alt="image-20210725091404875" style="zoom:67%;" /></li><li><p>åˆ¤æ–­æ—¥æœŸå¤§å°</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> d5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">51</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">456</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d4<span class="token operator">&lt;</span>d5<span class="token punctuation">)</span></code></pre><img src="JS/20210725091516.png" alt="image-20210725091516565" style="zoom:67%;" /></li><li><p>è‡ªå®šä¹‰æ—¥æœŸæ ¼å¼</p><p>formatæ ¼å¼åŒ–æ–¹æ³•å¯ä»¥æ”¾åœ¨jsæ–‡ä»¶ä¸­ï¼Œä¸ç”¨é‡å¤å¤åˆ¶</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*dateå¯¹è±¡çš„æ ¼å¼åŒ–æ–¹æ³•*/</span><span class="token comment">/*ä¿®æ”¹DateåŸå‹,æ·»åŠ ä¸€ä¸ªformatæ ¼å¼åŒ–çš„æ–¹æ³•*/</span><span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">format</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fmt</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token string-property property">"M+"</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>                 <span class="token comment">//æœˆä»½</span>        <span class="token string-property property">"d+"</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token comment">//æ—¥</span>        <span class="token string-property property">"h+"</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                   <span class="token comment">//å°æ—¶</span>        <span class="token string-property property">"m+"</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                 <span class="token comment">//åˆ†</span>        <span class="token string-property property">"s+"</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                 <span class="token comment">//ç§’</span>        <span class="token string-property property">"q+"</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//å­£åº¦</span>        <span class="token string-property property">"S"</span>  <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMilliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>             <span class="token comment">//æ¯«ç§’</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(y+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        fmt<span class="token operator">=</span>fmt<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">-</span> RegExp<span class="token punctuation">.</span>$1<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> o<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"("</span><span class="token operator">+</span> k <span class="token operator">+</span><span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            fmt <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>                RegExp<span class="token punctuation">.</span>$1<span class="token punctuation">,</span> <span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$1<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>o<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">"00"</span><span class="token operator">+</span> o<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token operator">+</span> o<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>           <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> fmt<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> fmt<span class="token operator">=</span>d4<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd hh:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span></code></pre><img src="JS/20210725094240.png" alt="image-20210725094240035" style="zoom:67%;" /></li></ul><h3 id="è‡ªå®šä¹‰å¯¹è±¡">è‡ªå®šä¹‰å¯¹è±¡</h3><p>JSé™¤äº†ä¸€äº›å¸¸ç”¨æ–¹æ³•å’Œç±»ä»¥å¤–,å…è®¸æˆ‘ä»¬è‡ªå·±å®šä¹‰å¯¹è±¡,åœ¨JSä¸­è‡ªå®šä¹‰å¯¹è±¡æœ‰ä¸‰ç§å¯ç”¨çš„è¯­æ³•æ ¼å¼,åˆ†åˆ«ä¸º:</p><h4 id="1-è°ƒç”¨ç³»ç»Ÿçš„æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡">1. è°ƒç”¨ç³»ç»Ÿçš„æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡</h4><ul><li><p>å®ä¾‹åŒ–å¯¹è±¡</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*å®ä¾‹åŒ–å¯¹è±¡*/</span><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>ç»™å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*ç»™å¯¹è±¡æ·»åŠ å±æ€§*/</span>obj<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">"é™ˆæ…§çŠ"</span>obj<span class="token punctuation">.</span>sex<span class="token operator">=</span><span class="token string">"å¥³"</span>obj<span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span></code></pre></li><li><p>æŸ¥çœ‹å¯¹è±¡å±æ€§</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*ç»™å¯¹è±¡æ·»åŠ å±æ€§*/</span>obj<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">"é™ˆæ…§çŠ"</span>obj<span class="token punctuation">.</span>sex<span class="token operator">=</span><span class="token string">"å¥³"</span>obj<span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span></code></pre></li><li><p>è°ƒç”¨å¯¹è±¡æ–¹æ³•</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*ç»™å¯¹è±¡æ·»åŠ æ–¹æ³•*/</span>obj<span class="token punctuation">.</span><span class="token function-variable function">miss</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ex</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"ä¸€ç›´éƒ½æ”¾ä¸ä¸‹"</span><span class="token operator">+</span>ex<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre></li><li><p>æŸ¥çœ‹å±æ€§ï¼Œè°ƒç”¨æ–¹æ³•</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*æŸ¥çœ‹å¯¹è±¡å±æ€§*/</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>sex<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token comment">/*è°ƒç”¨æ–¹æ³•*/</span>obj<span class="token punctuation">.</span><span class="token function">miss</span><span class="token punctuation">(</span><span class="token string">"è°­é¢–"</span><span class="token punctuation">)</span></code></pre><p><img src="C:%5CUsers%5CDell%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210725102555551.png" alt="image-20210725102555551"></p></li></ul><h4 id="2-è‡ªå®šä¹‰æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡">2. è‡ªå®šä¹‰æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡</h4><ul><li><p>å‡†å¤‡ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼š</p><p>å¯ä»¥å£°æ˜å±æ€§è¿˜å¯ä»¥å£°æ˜æ–¹æ³•</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>sex</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>sex<span class="token operator">=</span>sex<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">miss</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ex</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"ä¸€ç›´éƒ½æ”¾ä¸ä¸‹"</span><span class="token operator">+</span>ex<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre></li><li><p>è°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡</p><pre class="language-none"><code class="language-none">var obj &#x3D; new Person(&quot;é™ˆæ…§çŠ&quot;,&quot;å¥³&quot;)</code></pre></li><li><p>æŸ¥çœ‹å¯¹è±¡å±æ€§è°ƒç”¨å¯¹è±¡æ–¹æ³•</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*æŸ¥çœ‹å¯¹è±¡å±æ€§*/</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>sex<span class="token punctuation">)</span><span class="token comment">/*è°ƒç”¨æ–¹æ³•*/</span>obj<span class="token punctuation">.</span><span class="token function">miss</span><span class="token punctuation">(</span><span class="token string">"è°­é¢–"</span><span class="token punctuation">)</span></code></pre><img src="JS/20210725103304.png" alt="image-20210725103304379" style="zoom:67%;" /></li></ul><h4 id="3-å­—é¢é‡çš„æ–¹å¼åˆ›å»ºå¯¹è±¡">3. å­—é¢é‡çš„æ–¹å¼åˆ›å»ºå¯¹è±¡</h4><ul><li><p>ä½¿ç”¨JSONæ–¹å¼</p><p>var å¯¹è±¡å={å±æ€§åï¼šå±æ€§å€¼ï¼Œå±æ€§åï¼šå±æ€§å€¼ï¼Œâ€¦ï¼Œæ–¹æ³•åï¼šæ–¹æ³•å£°æ˜ï¼šæ–¹æ³•åï¼šæ–¹æ³•å£°æ˜ï¼Œâ€¦â€¦}</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*ä½¿ç”¨JSONæ–¹å¼*/</span><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"é™ˆæ…§çŠ"</span><span class="token punctuation">,</span>    <span class="token literal-property property">sex</span><span class="token operator">:</span><span class="token string">"å¥³"</span><span class="token punctuation">,</span>    <span class="token function-variable function">miss</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ex</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"ä¸€ç›´éƒ½æ”¾ä¸ä¸‹"</span><span class="token operator">+</span>ex<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre></li><li><p>æŸ¥çœ‹å±æ€§ è°ƒç”¨æ–¹æ³•</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*æŸ¥çœ‹å‚æ•° è°ƒç”¨æ–¹æ³•*/</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>sex<span class="token punctuation">)</span>obj<span class="token punctuation">.</span><span class="token function">miss</span><span class="token punctuation">(</span><span class="token string">"è°­é¢–"</span><span class="token punctuation">)</span></code></pre><img src="JS/20210725104108.png" alt="image-20210725103839535" style="zoom:67%;" /></li></ul><h3 id="åŸå‹">åŸå‹</h3><h4 id="æ„é€ å™¨ä¸åŸå‹çš„å…³ç³»">æ„é€ å™¨ä¸åŸå‹çš„å…³ç³»</h4><p>å½“æˆ‘ä»¬ç”¨æ„é€ æ–¹æ³•åˆ›å»ºä¸€ä¸ªç±»æ—¶,åœ¨å†…å­˜ä¼šé¢„å…ˆè°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡,è¿™å¯¹è±¡æˆ‘ä»¬ç§°ä¹‹ä¸ºåŸå‹å¯¹è±¡,æ„é€ æ–¹æ³•å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªprototypeå±æ€§æŒ‡å‘è¯¥å¯¹è±¡,åŸå‹å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªconstructorå±æ€§æŒ‡å‘æ„é€ æ–¹æ³•.è·å¾—ä¸€ä¸ªç±»çš„åŸå‹å¯¹è±¡å¯ä»¥é€šè¿‡ç±»å.prototypeçš„æ–¹å¼è·å¾—.</p><img src="JS/20210725170256.png" alt="image-20210725170234031" style="zoom:67%;" /><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// å‡†å¤‡ä¸€ä¸ªæ„é€ æ–¹æ³• </span><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">pname<span class="token punctuation">,</span>page</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>pname<span class="token operator">=</span>pname<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>page<span class="token operator">=</span>page<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">eat</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>page<span class="token operator">+</span><span class="token string">"å²çš„"</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>pname<span class="token operator">+</span><span class="token string">"æ­£åœ¨åƒ"</span><span class="token operator">+</span>food<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span><span class="token comment">// Constructorå¯¹è±¡  æ„é€ æ–¹æ³•å¯¹è±¡</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span></code></pre><p>æ§åˆ¶å°æ‰“å°Personæ„é€ å™¨å’Œå…¶åŸå‹å¯¹è±¡</p><p><img src="JS/20210725161823.png" alt="image-20210725161823746"></p><h4 id="å½“å‰ç±»å¯¹è±¡ä¸åŸå‹çš„å…³ç³»">å½“å‰ç±»å¯¹è±¡ä¸åŸå‹çš„å…³ç³»</h4><p>å½“å‰ç±»çš„æ¯ä¸€ä¸ªå¯¹è±¡å†…éƒ¨æœ‰ä¸€ä¸ª _ proto _çš„ä¸€ä¸ªå±æ€§,æŒ‡å‘ä»–ä»¬çš„åŸå‹, å½“æˆ‘ä»¬ç”¨å¯¹è±¡è·å–å±æ€§å’Œè°ƒç”¨æ–¹æ³•æ—¶,å¦‚æœå½“å‰å¯¹è±¡ä¸­æ²¡æœ‰,é‚£ä¹ˆä¼šå»ä»–ä»¬æ‰€å¯¹åº”çš„åŸå‹å¯¹è±¡ä¸­å»æ‰¾.</p><img src="JS/20210725153638.png" alt="image-20210725153615736" style="zoom:50%;" /><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*ä¸ºPersonæ‰€æœ‰å¯¹è±¡å¢åŠ å±æ€§å’Œæ–¹æ³•*/</span><span class="token comment">//é€šè¿‡ç»™Personçš„åŸå‹å¢åŠ å±æ€§</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>ex<span class="token operator">=</span><span class="token string">"ty"</span><span class="token comment">//é€šè¿‡ç»™Personçš„åŸå‹å¢åŠ æ–¹æ³•</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">emotion</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">emo</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pname<span class="token operator">+</span>emo<span class="token operator">+</span><span class="token string">"æäº†"</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>ex<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"chs"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>p1<span class="token punctuation">.</span><span class="token function">emotion</span><span class="token punctuation">(</span><span class="token string">"è®¨åŒ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"é™ˆæ…§çŠ"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>p2<span class="token punctuation">.</span><span class="token function">emotion</span><span class="token punctuation">(</span><span class="token string">"æ¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="åŸå‹é“¾">åŸå‹é“¾</h4><p>ä¸€ä¸ªç±»çš„åŸå‹æ˜¯ä¸€ä¸ªObjectç±»çš„å¯¹è±¡,ä¹Ÿå°±æ˜¯è¯´,åŸå‹ä¹Ÿæœ‰ä¸€ä¸ª_proto_å±æ€§,æŒ‡å‘Objectçš„åŸå‹å¯¹è±¡,é‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ Person prototypeä¸­æ²¡æœ‰çš„å±æ€§å’Œæ–¹æ³•ä¼šç»§ç»­å‘Object  prototypeå»æ‰¾,ä¹Ÿå°±æ˜¯è¯´,æˆ‘ä»¬åœ¨ObjectåŸå‹ä¸­æ·»åŠ çš„å±æ€§å’Œæ–¹æ³•,æˆ‘ä»¬åœ¨person1å’Œperson2ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨.é‚£ä¹ˆè¿™ç§è¿ç»­çš„ _proto_å±æ€§æŒ‡å‘å°±å½¢æˆäº†åŸå‹é“¾</p><p><strong>ä¹Ÿå°±æ˜¯ç»™Objectçš„åŸå‹å¯¹è±¡æ·»åŠ çš„å±æ€§å’Œæ–¹æ³•ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½å¯ä»¥ç”¨</strong></p><img src="JS/20210725170443.png" alt="image-20210725170443721" style="zoom:67%;" /><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// å‡†å¤‡ä¸€ä¸ªæ„é€ æ–¹æ³• </span><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">pname<span class="token punctuation">,</span>page</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>pname<span class="token operator">=</span>pname<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>page<span class="token operator">=</span>page<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">eat</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>page<span class="token operator">+</span><span class="token string">"å²çš„"</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>pname<span class="token operator">+</span><span class="token string">"æ­£åœ¨åƒ"</span><span class="token operator">+</span>food<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// ç»™æ‰€æœ‰çš„å¯¹è±¡å¢åŠ å±æ€§å’Œæ–¹æ³•</span><span class="token comment">//ç»™æœ€ç»ˆåŸå‹å¢åŠ å±æ€§</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>gender<span class="token operator">=</span><span class="token string">"ç”·"</span><span class="token punctuation">;</span><span class="token comment">//ç»™Personçš„åŸå‹å¢åŠ ä¸€ä¸ªæ–¹æ³•</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sleep</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>page<span class="token operator">+</span><span class="token string">"å²çš„"</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>gender<span class="token operator">+</span><span class="token string">"å­©å„¿"</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>pname<span class="token operator">+</span><span class="token string">"æ­£åœ¨ç¡è§‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> p1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>p1<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token string">"è›‹æŒ"</span><span class="token punctuation">)</span>p1<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> p2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"æå››"</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>p2<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token string">"ç‰›è§’é¢åŒ…"</span><span class="token punctuation">)</span>p2<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="äº‹ä»¶">äº‹ä»¶</h2><h4 id="é¼ æ ‡äº‹ä»¶">é¼ æ ‡äº‹ä»¶</h4><table><thead><tr><th>å±æ€§</th><th>æè¿°</th><th>DOM</th></tr></thead><tbody><tr><td><a href="https://www.runoob.com/jsref/event-onclick.html">onclick</a></td><td>å½“ç”¨æˆ·ç‚¹å‡»æŸä¸ªå¯¹è±¡æ—¶è°ƒç”¨çš„äº‹ä»¶å¥æŸ„ã€‚</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-oncontextmenu.html">oncontextmenu</a></td><td>åœ¨ç”¨æˆ·ç‚¹å‡»é¼ æ ‡å³é”®æ‰“å¼€ä¸Šä¸‹æ–‡èœå•æ—¶è§¦å‘</td><td></td></tr><tr><td><a href="https://www.runoob.com/jsref/event-ondblclick.html">ondblclick</a></td><td>å½“ç”¨æˆ·åŒå‡»æŸä¸ªå¯¹è±¡æ—¶è°ƒç”¨çš„äº‹ä»¶å¥æŸ„ã€‚</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onmousedown.html">onmousedown</a></td><td>é¼ æ ‡æŒ‰é’®è¢«æŒ‰ä¸‹ã€‚</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onmouseenter.html">onmouseenter</a></td><td>å½“é¼ æ ‡æŒ‡é’ˆç§»åŠ¨åˆ°å…ƒç´ ä¸Šæ—¶è§¦å‘ã€‚</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onmouseleave.html">onmouseleave</a></td><td>å½“é¼ æ ‡æŒ‡é’ˆç§»å‡ºå…ƒç´ æ—¶è§¦å‘</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onmousemove.html">onmousemove</a></td><td>é¼ æ ‡è¢«ç§»åŠ¨ã€‚</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onmouseover.html">onmouseover</a></td><td>é¼ æ ‡ç§»åˆ°æŸå…ƒç´ ä¹‹ä¸Šã€‚</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onmouseout.html">onmouseout</a></td><td>é¼ æ ‡ä»æŸå…ƒç´ ç§»å¼€ã€‚</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onmouseup.html">onmouseup</a></td><td>é¼ æ ‡æŒ‰é”®è¢«æ¾å¼€ã€‚</td><td>2</td></tr></tbody></table><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token selector">.d1</span><span class="token punctuation">&#123;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> greenyellow<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"åŒå‡»666"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"é¼ æ ‡æŒ‰ä¸‹"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"é¼ æ ‡æŠ¬èµ·"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"é¼ æ ‡è¿›å…¥"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"é¼ æ ‡ç¦»å¼€"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"é¼ æ ‡ç§»åŠ¨"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d1<span class="token punctuation">"</span></span>              <span class="token special-attr"><span class="token attr-name">ondblclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span>              <span class="token special-attr"><span class="token attr-name">onmousedown</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span>              <span class="token special-attr"><span class="token attr-name">onmouseup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span>              <span class="token special-attr"><span class="token attr-name">onmouseenter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun4</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span>              <span class="token special-attr"><span class="token attr-name">onmouseleave</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun5</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span>              <span class="token special-attr"><span class="token attr-name">onmousemove</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun6</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><img src="JS/20210725200123.png" alt="image-20210725200123159" style="zoom:67%;" /><h4 id="æŒ‰é”®äº‹ä»¶">æŒ‰é”®äº‹ä»¶</h4><table><thead><tr><th>å±æ€§</th><th>æè¿°</th><th>DOM</th></tr></thead><tbody><tr><td><a href="https://www.runoob.com/jsref/event-onkeydown.html">onkeydown</a></td><td>æŸä¸ªé”®ç›˜æŒ‰é”®è¢«æŒ‰ä¸‹ã€‚</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onkeypress.html">onkeypress</a></td><td>æŸä¸ªé”®ç›˜æŒ‰é”®è¢«æŒ‰ä¸‹å¹¶æ¾å¼€ã€‚</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onkeyup.html">onkeyup</a></td><td>æŸä¸ªé”®ç›˜æŒ‰é”®è¢«æ¾å¼€ã€‚</td><td>2</td></tr></tbody></table><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"æŒ‰é’®æŒ‰ä¸‹"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"æŒ‰é’®æŠ¬èµ·"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"æŒ‰é’®æŒ‰ä¸‹å¹¶æŠ¬èµ·"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onkeydown</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token special-attr"><span class="token attr-name">onkeyup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">onkeypress</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fun3()<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><img src="JS/20210725201436.png" alt="image-20210725201436412" style="zoom: 50%;" /><h4 id="è¡¨å•äº‹ä»¶">è¡¨å•äº‹ä»¶</h4><table><thead><tr><th>å±æ€§</th><th>æè¿°</th><th>DOM</th></tr></thead><tbody><tr><td><a href="https://www.runoob.com/jsref/event-onblur.html">onblur</a></td><td>å…ƒç´ å¤±å»ç„¦ç‚¹æ—¶è§¦å‘</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onchange.html">onchange</a></td><td>è¯¥äº‹ä»¶åœ¨è¡¨å•å…ƒç´ çš„å†…å®¹æ”¹å˜æ—¶è§¦å‘( <input>, <keygen>, <select>, å’Œ <textarea>)</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onfocus.html">onfocus</a></td><td>å…ƒç´ è·å–ç„¦ç‚¹æ—¶è§¦å‘</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onfocusin.html">onfocusin</a></td><td>å…ƒç´ å³å°†è·å–ç„¦ç‚¹æ—¶è§¦å‘</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onfocusout.html">onfocusout</a></td><td>å…ƒç´ å³å°†å¤±å»ç„¦ç‚¹æ—¶è§¦å‘</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-oninput.html">oninput</a></td><td>å…ƒç´ è·å–ç”¨æˆ·è¾“å…¥æ—¶è§¦å‘</td><td>3</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onreset.html">onreset</a></td><td>è¡¨å•é‡ç½®æ—¶è§¦å‘</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onsearch.html">onsearch</a></td><td>ç”¨æˆ·å‘æœç´¢åŸŸè¾“å…¥æ–‡æœ¬æ—¶è§¦å‘ (  &lt;input=â€œsearchâ€&gt;)</td><td></td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onselect.html">onselect</a></td><td>ç”¨æˆ·é€‰å–æ–‡æœ¬æ—¶è§¦å‘ ( <input> å’Œ <textarea>)</td><td>2</td></tr><tr><td><a href="https://www.runoob.com/jsref/event-onsubmit.html">onsubmit</a></td><td>è¡¨å•æäº¤æ—¶è§¦å‘</td><td>2</td></tr></tbody></table><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"è·å¾—ç„¦ç‚¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"å¤±å»ç„¦ç‚¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æ­£åœ¨è¾“å…¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// åªè¦è¾“å…¥äº†,å°±ä¼šè§¦å‘</span>            <span class="token keyword">function</span> <span class="token function">fun4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"å†…å®¹æ”¹å˜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// å†…éƒ¨ä¿¡æ¯å‘ç”Ÿå˜åŒ–çš„åŒæ—¶,è¦å¤±å»ç„¦ç‚¹</span>            <span class="token keyword">function</span> <span class="token function">fun5</span><span class="token punctuation">(</span><span class="token parameter">sel</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"å†…å®¹å‘ç”Ÿæ”¹å˜äº†"</span><span class="token operator">+</span>sel<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"å‘ç”Ÿäº†æäº¤äº‹ä»¶"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// åšäº†ä¸€äº›è¿ç®—ä¹‹å åŠ¨æ€å†³å®šè¡¨å•èƒ½å¦æäº¤</span>                <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"å‘ç”Ÿäº†é‡ç½®äº‹ä»¶"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>get<span class="token punctuation">"</span></span>  <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.baidu.com<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onsubmit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token keyword">return</span> <span class="token function">fun6</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token special-attr"><span class="token attr-name">onreset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token keyword">return</span> <span class="token function">fun7</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span>  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span>  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onfocus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token special-attr"><span class="token attr-name">onblur</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">oninput</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fun3()<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onchange</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun4</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>city<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onchange</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun5</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">selected</span><span class="token punctuation">></span></span>-è¯·é€‰æ‹©åŸå¸‚-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åŒ—äº¬<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å¤©æ´¥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸Šæµ·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é‡åº†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æäº¤æ•°æ®<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reset<span class="token punctuation">"</span></span>  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é‡ç½®æ•°æ®<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h4 id="é¡µé¢åŠ è½½äº‹ä»¶">é¡µé¢åŠ è½½äº‹ä»¶</h4><p>==onloadæ ‡ç­¾==å¯ä»¥è®©é¡µé¢åŠ è½½å®Œäº†è‡ªåŠ¨æ‰§è¡Œç›¸åº”å‡½æ•°</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">testFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> in1<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"i1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> v1<span class="token operator">=</span>in1<span class="token punctuation">.</span>value<span class="token punctuation">;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">testFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æµ‹è¯•æ–‡å­—<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>i1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="BOMç¼–ç¨‹">BOMç¼–ç¨‹</h2><h3 id="BOMä¸DOMçš„æ¦‚å¿µå’Œè”ç³»">BOMä¸DOMçš„æ¦‚å¿µå’Œè”ç³»</h3><p><strong>Browser Object Model æµè§ˆå™¨å¯¹è±¡æ¨¡å‹</strong></p><ul><li><p>BOMæœ‰ä¸€ç³»åˆ—å¯¹è±¡ç»„æˆï¼Œæ˜¯è®¿é—®ã€æ§åˆ¶ã€ä¿®æ”¹æµè§ˆå™¨çš„å±æ€§çš„æ–¹æ³•</p></li><li><p>BOMæ²¡æœ‰ç»Ÿä¸€çš„æ ‡å‡†(æ¯ç§å®¢æˆ·ç«¯éƒ½å¯ä»¥è‡ªå®šæ ‡å‡†)ã€‚</p></li><li><p>BOMçš„é¡¶å±‚æ˜¯==windowå¯¹è±¡==</p></li></ul><p><strong>Document Object Model æ–‡æ¡£å¯¹è±¡æ¨¡å‹</strong></p><ul><li><p>DOMç”¨äºXHTMLã€XMLæ–‡æ¡£çš„åº”ç”¨ç¨‹åºæ¥å£(API)ã€‚</p></li><li><p>DOMæä¾›ä¸€ç§ç»“æ„åŒ–çš„æ–‡æ¡£æè¿°æ–¹å¼ï¼Œä»è€Œä½¿HTMLå†…å®¹ä½¿ç”¨ç»“æ„åŒ–çš„æ–¹å¼æ˜¾ç¤ºã€‚</p></li><li><p>DOMç”±ä¸€ç³»åˆ—å¯¹è±¡ç»„æˆï¼Œæ˜¯è®¿é—®ã€æ£€ç´¢ã€ä¿®æ”¹XHTMLæ–‡æ¡£å†…å®¹ä¸ç»“æ„çš„æ ‡å‡†æ–¹æ³•ã€‚</p></li><li><p>DOMæ ‡å‡†æ˜¯ç”±w3cåˆ¶å®šä¸ç»´æŠ¤ã€‚DOMæ˜¯è·¨å¹³å°ä¸è·¨è¯­è¨€çš„ã€‚</p></li><li><p>DOMçš„é¡¶å±‚æ˜¯==documentå¯¹è±¡==</p></li></ul><p>â€‹                                            &lt;ä¸‹å›¾çº¢è‰²æ¡†å†…æ˜¯DOMæ§åˆ¶ï¼Œç»¿è‰²æ¡†å†…æ˜¯BOMæ§åˆ¶&gt;</p><img src="JS/20210726103714.png" alt="image-20210726103713434" style="zoom:67%;" /><p><strong>è”ç³»</strong></p><img src="JS/20210726103848.png" alt="image-20210726103847508" style="zoom:67%;" /><p>ä¹Ÿå¯ä»¥è¯´DOMä¹Ÿæ˜¯å½’BOMç®¡çš„.</p><p><strong>BOM</strong>ç¼–ç¨‹å°±æ˜¯æŠŠæ•´ä¸ªæµè§ˆå™¨æŠ½è±¡æˆä¸€ä¸ªå¯¹è±¡(window),è¿™ä¸ªå¯¹è±¡ä¸­æœ‰å¾ˆå¤šçš„å±æ€§å’Œæ–¹æ³•,è®¿é—®è¿™äº›å±æ€§æˆ–è€…è°ƒç”¨è¿™äº›æ–¹æ³•å°±å¯ä»¥æ§åˆ¶æµè§ˆå™¨ä½œå‡ºâ€¦<strong>è¡Œä¸º</strong></p><p><strong>DOM</strong>ç¼–ç¨‹å°±æ˜¯æŠŠæµè§ˆå™¨å½“å‰é¡µé¢å¯¹åº”çš„æ–‡æ¡£æŠ½è±¡æˆä¸€ä¸ªå¯¹è±¡(document),è¿™ä¸ªå¯¹è±¡ä¸­æœ‰å¾ˆå¤šå…³äºæ“ä½œæ–‡æ¡£çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•,è®¿é—®è¿™äº›å±æ€§å’Œæ–¹æ³•çš„æ—¶å€™,æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»£ç åŠ¨æ€æ§åˆ¶<strong>é¡µé¢ä¸Šæ˜¾ç¤ºçš„å†…å®¹</strong></p><p><strong>BOM æ˜¯ä¸ºäº†æ“ä½œæµè§ˆå™¨å‡ºç°çš„ APIï¼Œwindow æ˜¯å…¶æ ¹å¯¹è±¡ã€‚</strong></p><p><strong>DOM æ˜¯ä¸ºäº†æ“ä½œæ–‡æ¡£å‡ºç°çš„ APIï¼Œdocument æ˜¯å…¶æ ¹å¯¹è±¡ã€‚</strong></p><h3 id="windowå¯¹è±¡åŠå¸¸ç”¨æ–¹æ³•">windowå¯¹è±¡åŠå¸¸ç”¨æ–¹æ³•</h3><h4 id="ä¸‰ç§å¼¹çª—æ–¹å¼">ä¸‰ç§å¼¹çª—æ–¹å¼</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">/*                                 * å¦‚æœæ˜¯ä½¿ç”¨windowå¯¹è±¡è°ƒç”¨çš„æ–¹æ³•å’Œè®¿é—®çš„å±æ€§ é‚£ä¹ˆwindowå¯¹è±¡éƒ½å¯ä»¥çœç•¥ä¸å†™                                 *                                  * */</span>                window<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½å‘€"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ™®é€šä¿¡æ¯æç¤ºæ¡†</span>                <span class="token keyword">var</span> con <span class="token operator">=</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">"ç¡®å®šè¦åˆ é™¤***å¥³å‹å—?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç¡®è®¤æ¡†</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> message <span class="token operator">=</span>window<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥3å·å¥³å‹çš„åå­—"</span><span class="token punctuation">,</span><span class="token string">"ä¾‹å¦‚:å°åˆš"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ä¿¡æ¯è¾“å…¥æ¡†</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æµ‹è¯•æŒ‰é’®<span class="token punctuation">"</span></span>  <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><img src="JS/20210726141452.png" alt="image-20210726141452790" style="zoom:67%;" /><img src="JS/20210726141503.png" alt="image-20210726141503747" style="zoom:67%;" /><img src="JS/20210726141526.png" alt="image-20210726141526426" style="zoom:67%;" /><h4 id="å®šæ—¶å™¨">å®šæ—¶å™¨</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token comment">/*æŒç»­æ‰“å°çš„æ§åˆ¶å™¨*/</span>            <span class="token comment">//å®šä¹‰ä¸€ä¸ªå­˜å‚¨å› ä¸ºæ¯æ¬¡ç‚¹å‡»è€Œç”Ÿæˆçš„intervalID</span>            <span class="token keyword">var</span> intervalIDS<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">/*å¾ªç¯æ‰§è¡Œçš„å®šæ—¶å™¨ä»»åŠ¡*/</span>            <span class="token keyword">function</span> <span class="token function">startInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">//å®šæ—¶å™¨setInterval()&#123;æ‰§è¡Œçš„åŠ¨ä½œï¼Œæ—¶é—´&#125;</span>                <span class="token keyword">var</span> intervalID <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">setInterval</span><span class="token punctuation">(</span>                    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                        <span class="token keyword">var</span> today<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">var</span> hours <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">var</span> minutes<span class="token operator">=</span>today<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">var</span> seconds<span class="token operator">=</span>today<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">var</span> str<span class="token operator">=</span> hours<span class="token operator">+</span><span class="token string">"ç‚¹"</span><span class="token operator">+</span>minutes<span class="token operator">+</span><span class="token string">"åˆ†"</span><span class="token operator">+</span>seconds<span class="token operator">+</span><span class="token string">"ç§’"</span><span class="token punctuation">;</span>                        <span class="token keyword">var</span> ta <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"timeArea"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        ta<span class="token punctuation">.</span>value<span class="token operator">=</span>str<span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                    <span class="token number">1000</span><span class="token comment">//1s</span>                <span class="token punctuation">)</span><span class="token punctuation">;</span>                intervalIDS<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>intervalID<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">/*è®¾ç½®å¾ªç¯åœæ­¢*/</span>            <span class="token keyword">function</span> <span class="token function">endInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">//åˆ é™¤å®šæ—¶å™¨ä»»åŠ¡</span>                <span class="token keyword">while</span><span class="token punctuation">(</span>intervalIDS<span class="token punctuation">.</span>length<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token comment">//åˆ é™¤æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ </span>                    window<span class="token punctuation">.</span><span class="token function">clearInterval</span><span class="token punctuation">(</span>intervalIDS<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>timeArea<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¼€å§‹è®¡æ—¶<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">startInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>åœæ­¢è®¡æ—¶<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">endInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><img src="JS/20210726152748.png" alt="image-20210726152747997" style="zoom:67%;" /><h4 id="openå’Œclose">openå’Œclose</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                window<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ‰“å¼€ç™¾åº¦<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å…³é—­é¡µé¢<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h4 id="windowå±æ€§">windowå±æ€§</h4><h5 id="location">location</h5><p>locationå¯¹è±¡,æ˜¯windowå¯¹è±¡çš„ä¸€ä¸ªå±æ€§,ä»£è¡¨æµè§ˆå™¨ä¸ŠURLåœ°å€æ ,ä½¿ç”¨locationå¯¹è±¡å¯ä»¥æ“ä½œåœ°å€æ </p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>host<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æœåŠ¡å™¨çš„IP+ç«¯å£å·</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>hostname<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// IP </span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç«¯å£å·</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åœ°å€æ ä¸­å…·ä½“çš„æ–‡å­—</span>                location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">"https://www.baidu.com"</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æµ‹è¯•location<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h5 id="history">history</h5><p>historyå¯¹è±¡æ˜¯windowå¯¹è±¡çš„ä¸€ä¸ªå±æ€§,ä»£è¡¨æµè§ˆå™¨è®¿é—®å†å²è®°å½•,é€šè¿‡historyçš„æ“ä½œæˆ‘ä»¬å¯ä»¥å®ç°ç¿»é˜…æµè§ˆå™¨å†å²ç½‘é¡µ</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                window<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ­£æ•´æ•° å‘å‰è·³è½¬ * é¡µ  è´Ÿæ•´æ•° å‘åè·³è½¬*é¡µ</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>a.html<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_self<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>pageA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å‘å‰<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å‘å<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>go<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h5 id="screenå’Œnavigator">screenå’Œnavigator</h5><p>screenä»£è¡¨å±å¹•,navigatorä»£è¡¨æµè§ˆå™¨è½¯ä»¶æœ¬èº«,é€šè¿‡è¿™ä¸¤ä¸ªå¯¹è±¡å¯ä»¥è·å¾—å±å¹•å’Œæµè§ˆå™¨è½¯ä»¶çš„ä¸€äº›ä¿¡æ¯</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width<span class="token punctuation">)</span>                console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height<span class="token punctuation">)</span>                console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span>                console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>appName<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="DOMç¼–ç¨‹">DOMç¼–ç¨‹</h2><h3 id="å¼•å…¥">å¼•å…¥</h3><p>DOMç¼–ç¨‹å°±æ˜¯ä½¿ç”¨<strong>documentå¯¹è±¡</strong>çš„APIå®Œæˆå¯¹ç½‘é¡µHTMLæ–‡æ¡£è¿›è¡ŒåŠ¨æ€ä¿®æ”¹,ä»¥å®ç°ç½‘é¡µæ•°æ®å’Œæ ·å¼åŠ¨æ€å˜åŒ–æ•ˆæœçš„ç¼–ç¨‹.</p><p><a href="#BOM%E4%B8%8EDOM%E7%9A%84%E6%A6%82%E5%BF%B5%E5%92%8C%E8%81%94%E7%B3%BB">å’ŒBOMçš„è”ç³»</a></p><h4 id="document">document</h4><p>documentå¯¹è±¡ä»£è¡¨æ•´ä¸ªhtmlæ–‡æ¡£ï¼Œå¯ç”¨æ¥è®¿é—®é¡µé¢ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œæ˜¯æœ€å¤æ‚çš„ä¸€ä¸ªdomå¯¹è±¡ï¼Œå¯ä»¥è¯´æ˜¯å­¦ä¹ å¥½domç¼–ç¨‹çš„å…³é”®æ‰€åœ¨ã€‚</p><h4 id="documentå¯¹è±¡">documentå¯¹è±¡</h4><p>documentå¯¹è±¡æ˜¯windowå¯¹è±¡çš„ä¸€ä¸ªæˆå‘˜å±æ€§ï¼Œé€šè¿‡window.documentæ¥è®¿é—®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨document,æ ¹æ®HTMLä»£ç ç»“æ„ç‰¹ç‚¹,documentå¯¹è±¡æœ¬èº«æ˜¯ä¸€ç§æ ‘å½¢ç»“æ„çš„æ–‡æ¡£å¯¹è±¡ã€‚</p><p><strong>å¦‚ä½•è·å–ï¼Ÿ</strong></p><p>documentå¯¹è±¡æ˜¯windowå¯¹è±¡çš„ä¸€ä¸ªæˆå‘˜å±æ€§ï¼Œé€šè¿‡<strong>window.document</strong>æ¥è®¿é—®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨document,æ ¹æ®HTMLä»£ç ç»“æ„ç‰¹ç‚¹,documentå¯¹è±¡æœ¬èº«æ˜¯ä¸€ç§æ ‘å½¢ç»“æ„çš„æ–‡æ¡£å¯¹è±¡ã€‚</p><h4 id="-2"></h4><p><img src="C:%5CUsers%5CDell%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210727201824114.png" alt="image-20210727201824114"></p><h4 id="ç»“ç‚¹å¯¹è±¡ï¼šNode">ç»“ç‚¹å¯¹è±¡ï¼šNode</h4><p>åœ¨ HTML DOM (Document Object Model) ä¸­, æ‰€æœ‰çš„éƒ½æ˜¯  <strong>èŠ‚ç‚¹</strong></p><p>å®ƒæœ‰ä¸‰ä¸ªå­ç±»</p><ul><li><p>å…ƒç´ èŠ‚ç‚¹ï¼šElement å¦‚ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é“¾æ¥åœ°å€<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æˆ‘çš„é“¾æ¥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre></li><li><p>å±æ€§èŠ‚ç‚¹ Attribute å¦‚ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup">href="é“¾æ¥åœ°å€"</code></pre></li><li><p>æ–‡æœ¬èŠ‚ç‚¹ Text å¦‚ï¼š</p><pre class="language-none"><code class="language-none">æˆ‘çš„é“¾æ¥</code></pre></li></ul><h4 id="documentçš„æ“ä½œ">documentçš„æ“ä½œ</h4><ol><li><p>æŸ¥è¯¢å…ƒç´ ï¼ˆè·å–å…ƒç´ ,è¿›è€Œæ“ä½œå…ƒç´ ,æˆ–è€…å…ƒç´ çš„å±æ€§,æ–‡æœ¬ï¼‰</p></li><li><p>æ“ä½œæ–‡æœ¬</p></li><li><p>æ“ä½œå±æ€§</p></li><li><p>æ“ä½œå…ƒç´ </p></li><li><p>æ“ä½œCSSæ ·å¼ï¼ˆä¸€ä¸ªç‰¹æ®Šçš„å±æ€§styleï¼‰</p></li></ol><h5 id="å®ä¾‹">å®ä¾‹</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>é¡µé¢åˆ†æ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        x        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d1<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">border</span><span class="token punctuation">:</span> 1px solid red<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>            1a            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            2b            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>thank you<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            3c            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>thank you very much<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            4d        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        y    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p><strong>æ ‘å½¢ç»“æ„å›¾</strong></p><p><img src="JS/20210727201506.png" alt="image-20210727201503749"></p><h3 id="è·å–èŠ‚ç‚¹">è·å–èŠ‚ç‚¹</h3><ul><li>idå€¼è·å–</li><li>classå±æ€§å€¼è·å–</li><li>æ ‡ç­¾åè·å–</li><li>nameå±æ€§å€¼è·å–</li></ul><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">// è·å¾—documentå¯¹è±¡</span>                <span class="token keyword">var</span> element1 <span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"d1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>element1<span class="token punctuation">)</span><span class="token punctuation">;</span>                element1<span class="token punctuation">.</span>innerText<span class="token operator">=</span><span class="token string">"è¿™æ˜¯æˆ‘çš„div"</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token parameter">className</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> elements <span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> elements <span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> elements<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementsByName</span><span class="token punctuation">(</span><span class="token string">"hobby"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>d1<span class="token punctuation">'</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>a<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¿™æ˜¯ç¬¬ä¸€ä¸ªdiv<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>d2<span class="token punctuation">'</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>a<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¿™æ˜¯ç¬¬äºŒä¸ªdiv<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>d3<span class="token punctuation">'</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>a<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¿™æ˜¯ç¬¬ä¸‰ä¸ªdiv<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>i1<span class="token punctuation">'</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>a<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>name1<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>d4<span class="token punctuation">'</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>b<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>name1<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>è¿™æ˜¯ç¬¬å››ä¸ªdiv<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>d5<span class="token punctuation">'</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>b<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¿™æ˜¯ç¬¬äº”ä¸ªdiv<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        çˆ±å¥½:        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hobby<span class="token punctuation">"</span></span>  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>ç¯®çƒ        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hobby<span class="token punctuation">"</span></span>  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>è¶³çƒ        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hobby<span class="token punctuation">"</span></span>  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>ç¾½æ¯›çƒ        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>idå€¼è·å–<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">'</span></span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classå±æ€§å€¼è·å–<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token value javascript language-javascript"><span class="token function">fun2</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span></span><span class="token punctuation">'</span></span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ ‡ç­¾åè·å–<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token value javascript language-javascript"><span class="token function">fun3</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">'</span></span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nameå±æ€§å€¼è·å–<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token value javascript language-javascript"><span class="token function">fun4</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">'</span></span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h3 id="ä¿®æ”¹æ“ä½œ">ä¿®æ”¹æ“ä½œ</h3><h4 id="ä¿®æ”¹èŠ‚ç‚¹å±æ€§">ä¿®æ”¹èŠ‚ç‚¹å±æ€§</h4><pre class="language-markup" data-language="markup"><code class="language-markup"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ä½ å¥½å‘€<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>in1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å˜<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span>  <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></code></pre><ul><li><p>è¯­æ³•ä¸€ï¼šè·å¾—  èŠ‚ç‚¹.å±æ€§å    ä¿®æ”¹  èŠ‚ç‚¹.å±æ€§å =å±æ€§å€¼</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// è¯­æ³•1     </span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ”¹å˜å±æ€§å€¼</span>node<span class="token punctuation">.</span>type<span class="token operator">=</span><span class="token string">"button"</span><span class="token punctuation">;</span>node<span class="token punctuation">.</span>value<span class="token operator">=</span><span class="token string">"ä½ å¥½æˆ‘ä¹Ÿå¥½"</span><span class="token punctuation">;</span></code></pre></li><li><p>è¯­æ³•äºŒï¼šgetAttribute   setAttribute</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// è¯­æ³•2  getAttribute   setAttribute</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>node<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>node<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">,</span><span class="token string">"å¤§å®¶å¥½"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul><h4 id="ä¿®æ”¹èŠ‚ç‚¹æ ·å¼">ä¿®æ”¹èŠ‚ç‚¹æ ·å¼</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token selector">#div1</span><span class="token punctuation">&#123;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>                <span class="token property">border</span><span class="token punctuation">:</span> 1px solid red<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">.a</span><span class="token punctuation">&#123;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> lightblue<span class="token punctuation">;</span>                <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>                <span class="token property">font-size</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>div1<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>            ä½ å¥½å‘€        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æµ‹è¯•<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><ul><li><p>èŠ‚ç‚¹.style.æ ·å¼å=æ ·å¼å€¼</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// èŠ‚ç‚¹.style.æ ·å¼å=æ ·å¼å€¼</span><span class="token keyword">var</span> element <span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"div1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width<span class="token operator">=</span><span class="token string">"200px"</span><span class="token punctuation">;</span>element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height<span class="token operator">=</span><span class="token string">"200px"</span><span class="token punctuation">;</span>element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border<span class="token operator">=</span><span class="token string">"10px solid green"</span><span class="token punctuation">;</span></code></pre></li><li><p>cssæ ·å¼åœ¨æ›´å¤šçš„æ—¶å€™æ˜¯ä»¥classé€‰æ‹©å™¨çš„å½¢å¼ä½œç”¨åˆ°å…ƒç´ ä¸Š<br>å¯ä»¥é€šè¿‡ä¿®æ”¹classå±æ€§,å½±å“divçš„æ ·å¼</p><pre class="language-markup" data-language="markup"><code class="language-markup"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><span class="token selector">.a</span><span class="token punctuation">&#123;</span>                 <span class="token property">background-color</span><span class="token punctuation">:</span> lightblue<span class="token punctuation">;</span>                 <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>                 <span class="token property">font-size</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>             <span class="token punctuation">&#125;</span> </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre> <pre class="language-javascript" data-language="javascript"><code class="language-javascript">element<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">,</span><span class="token string">"a"</span><span class="token punctuation">)</span></code></pre></li></ul><h4 id="ä¿®æ”¹æ ‡ç­¾æ–‡æœ¬">ä¿®æ”¹æ ‡ç­¾æ–‡æœ¬</h4><ul><li><p>innerHtml æ“ä½œåŒæ ‡ç­¾ä¸­é—´çš„HTML</p></li><li><p>innerText  æ“ä½œåŒæ ‡ç­¾ä¸­é—´çš„ Text</p></li><li><p>value      æ“ä½œè¡¨å•æ ‡ç­¾å€¼</p></li></ul><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token selector">div</span><span class="token punctuation">&#123;</span>                <span class="token property">border</span><span class="token punctuation">:</span> 1px solid red<span class="token punctuation">;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> element1<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"d1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">/*                                 * innerText  ä¸åŒ…å«HTMLç»“æ„                                 * innerHTML  åŒ…å«HTMLç»“æ„                                 * */</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"innerText>>>"</span><span class="token operator">+</span>element1<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"innerHTML>>>"</span><span class="token operator">+</span>element1<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> element2<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"i1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>element2<span class="token punctuation">.</span>value<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> element1<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"d1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//element1.innerText="&lt;h1>ä¸€åˆ»ä¹Ÿä¸èƒ½åˆ†å‰²&lt;/h1>"</span>                element1<span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">"&lt;h1>ä¸€åˆ»ä¹Ÿä¸èƒ½åˆ†å‰²&lt;/h1>"</span>                <span class="token keyword">var</span> element2<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"i1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                element2<span class="token punctuation">.</span>value<span class="token operator">=</span><span class="token string">"æ— è®ºæˆ‘èµ°åˆ°å“ªé‡Œ"</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>d1<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>            a            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>æ–‡å­—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            b        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æˆ‘å’Œæˆ‘çš„ç¥–å›½<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>i1<span class="token punctuation">'</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è·å–å†…å®¹<span class="token punctuation">"</span></span>  <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ä¿®æ”¹å†…å®¹<span class="token punctuation">"</span></span>  <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h4 id="å¢åŠ åˆ é™¤èŠ‚ç‚¹">å¢åŠ åˆ é™¤èŠ‚ç‚¹</h4><p>åˆ é™¤èŠ‚ç‚¹éœ€è¦çš„çŸ¥è¯†</p><p>è¡Œé—´è·å’Œåˆ›å»ºæ ‡ç­¾</p><p>åˆ›å»ºæ ‡ç­¾è¾“å…¥å†…ç­’ä»¥åè¿›è¡Œè¿›ä¸€æ­¥çš„åˆ›å»ºw</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token selector">#d1</span><span class="token punctuation">&#123;</span>                <span class="token property">border</span><span class="token punctuation">:</span> 1px solid red<span class="token punctuation">;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 80%<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> div1<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"d1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// é€šè¿‡JSåˆ›å»ºæ ‡ç­¾</span>                <span class="token keyword">var</span> in1<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                in1<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span><span class="token string">"text"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                in1<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">,</span><span class="token string">"è¯·è¾“å…¥å†…å®¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> in2<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                in2<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                in2<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">,</span><span class="token string">"123456789"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> in3<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                in3<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                in3<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">,</span><span class="token string">"åˆ é™¤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> br<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"br"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                in3<span class="token punctuation">.</span><span class="token function-variable function">onclick</span><span class="token operator">=</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    div1<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>in1<span class="token punctuation">)</span>                    div1<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>in2<span class="token punctuation">)</span>                    div1<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>in3<span class="token punctuation">)</span>                    div1<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>br<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span>                div1<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>in1<span class="token punctuation">)</span><span class="token punctuation">;</span>                div1<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>in2<span class="token punctuation">)</span><span class="token punctuation">;</span>                div1<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>in3<span class="token punctuation">)</span><span class="token punctuation">;</span>                div1<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>br<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¢åŠ <span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h3 id="æ¡ˆä¾‹">æ¡ˆä¾‹</h3><p>Do You Love Me??</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> outerDiv <span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"outerDiv"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// 1000</span>                <span class="token keyword">var</span> left <span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span>                <span class="token comment">// 500</span>                <span class="token keyword">var</span> top <span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">500</span><span class="token punctuation">)</span>                outerDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>marginTop<span class="token operator">=</span>top<span class="token operator">+</span><span class="token string">"px"</span><span class="token punctuation">;</span>                outerDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>marginLeft<span class="token operator">=</span>left<span class="token operator">+</span><span class="token string">"px"</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">function</span>  <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"love you too"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token selector">#outerDiv</span><span class="token punctuation">&#123;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>                <span class="token property">border</span><span class="token punctuation">:</span> 1px solid gold<span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span>                <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>                <span class="token property">margin-top</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>                <span class="token property">margin-left</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">#outerDiv input</span><span class="token punctuation">&#123;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>                <span class="token property">margin</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outerDiv<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>do you love me?<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ˜¯<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¦<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onmouseover</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS</title>
      <link href="/2021/06/15/CSS/"/>
      <url>/2021/06/15/CSS/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=85b0cbb0-f50b-8e36-98a5-de94cbfc9478</cover>
      <date>Tue Jun 15 2021 09:56:56 GMT+0800</date>
      
        <content type="html"><![CDATA[<p><strong>cascading style sheets</strong></p><h2 id="æ ·å¼">æ ·å¼</h2><p><strong>è¡Œå†…æ ·å¼ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰ã€å†…éƒ¨æ ·å¼ã€å¤–éƒ¨æ ·å¼(æœ€å¸¸ç”¨çš„)</strong></p><span id="more"></span><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--        ã€ä¹¦å†™æ–¹å¼2:å†…éƒ¨æ ·å¼ã€‘        --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token selector">h1</span><span class="token punctuation">&#123;</span>                <span class="token property">color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>                <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"å®‹ä½“"</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--        ã€ä¹¦å†™æ–¹å¼3:å¤–éƒ¨æ ·å¼ã€‘        --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css/æ ·å¼.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--        ã€ä¹¦å†™æ–¹å¼1ï¼šè¡Œå†…æ ·å¼ã€‘        --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> deeppink<span class="token punctuation">;</span><span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'å®‹ä½“'</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>This is a h1 title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><img src="CSS/20210715095520.png" alt="image-20210715095520870" style="zoom:50%;" /><h2 id="é€‰æ‹©å™¨">é€‰æ‹©å™¨</h2><h3 id="1-åŸºæœ¬é€‰æ‹©å™¨">1.åŸºæœ¬é€‰æ‹©å™¨</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token comment">/*            * [1]åŸºæœ¬é€‰æ‹©å™¨ï¼šå…ƒç´ é€‰æ‹©å™¨            */</span>            <span class="token selector">h1</span><span class="token punctuation">&#123;</span>                <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>                <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"æ¥·ä½“"</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">i</span><span class="token punctuation">&#123;</span>                <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>                <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"é»‘ä½“"</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">/*            * [2]åŸºæœ¬é€‰æ‹©å™¨ï¼šç±»é€‰æ‹©å™¨            */</span>            <span class="token selector">.mycls</span><span class="token punctuation">&#123;</span>                <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>                <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"å®‹ä½“"</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">/*            * [3]åŸºæœ¬é€‰æ‹©å™¨ï¼šå”¯ä¸€é€‰æ‹©å™¨            */</span>            <span class="token selector">#myid</span><span class="token punctuation">&#123;</span>                <span class="token property">color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>                <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"å¾®è½¯é›…é»‘"</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>æˆ‘æ˜¯<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">></span></span>ä¸€ä¸ª<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>æˆ‘æ˜¯ä¸€ä¸ªæ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mycls<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æˆ‘æ˜¯ä¸€ä¸ªæ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>æˆ‘æ˜¯ä¸€ä¸ªæ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mycls<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æˆ‘æ˜¯h2æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>æˆ‘æ˜¯h2æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myid<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æˆ‘æ˜¯h2æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœ</p><h3 id="2-å…³ç³»é€‰æ‹©å™¨">2.å…³ç³»é€‰æ‹©å™¨</h3><h4 id="divå’Œspanæ ‡ç­¾">divå’Œspanæ ‡ç­¾</h4><ul><li>divå±äºå—çº§å…ƒç´ â€“ã€‹æ¢è¡Œ</li><li>spanå±äºè¡Œå†…å…ƒç´ â€“ã€‹æ²¡æœ‰æ¢è¡Œæ•ˆæœï¼šé‡Œé¢çš„å†…å®¹å å¤šå¤§ï¼ŒspanåŒ…è£¹çš„åŒºåŸŸå°±å¤šå¤§</li></ul><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token comment">/*            æˆ‘ä»¬å¯ä»¥é€šä¿—çš„ç†è§£ï¼ŒæŠŠdivç†è§£ä¸ºä¸€ä¸ªâ€œå¡‘æ–™è¢‹â€            divå±äºå—çº§å…ƒç´ --ã€‹æ¢è¡Œ            spanå±äºè¡Œå†…å…ƒç´ --ã€‹æ²¡æœ‰æ¢è¡Œæ•ˆæœ            span:é‡Œé¢çš„å†…å®¹å å¤šå¤§ï¼ŒspanåŒ…è£¹çš„åŒºåŸŸå°±å¤šå¤§*/</span>            <span class="token selector">div</span><span class="token punctuation">&#123;</span>                <span class="token property">border</span><span class="token punctuation">:</span> 1px red solid<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">span</span><span class="token punctuation">&#123;</span>                <span class="token property">border</span><span class="token punctuation">:</span> 1px greenyellow solid<span class="token punctuation">;</span>             <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>é©¬å£«å…µé©¬å£«å…µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>é©¬å£«å…µé©¬å£«å…µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>é©¬å£«å…µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>é©¬å£«å…µé©¬å£«å…µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>é©¬å£«å…µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>é©¬å£«å…µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="CSS/20210715160452.png" alt="image-20210715160452173" style="zoom: 33%;" /><h4 id="é€‰æ‹©å™¨-2">é€‰æ‹©å™¨</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token comment">/*å…³ç³»é€‰æ‹©å™¨:            * åä»£é€‰æ‹©å™¨ï¼šåªè¦æ˜¯è¿™ä¸ªå…ƒç´ çš„åä»£ï¼Œæ ·å¼éƒ½ä¼šå‘ç”Ÿå˜åŒ–            * divä¸‹é¢çš„æ‰€æœ‰h1æ ‡ç­¾æ ·å¼éƒ½ä¼šæ”¹å˜            */</span>            <span class="token comment">/*div h1&#123;            color: red;            &#125;*/</span>            <span class="token comment">/*å…³ç³»é€‰æ‹©å™¨ï¼šå­ä»£é€‰æ‹©å™¨            åªæ”¹å˜å­æ ‡ç­¾çš„æ ·å¼*/</span>            <span class="token selector">div>h1</span><span class="token punctuation">&#123;</span>                <span class="token property">color</span><span class="token punctuation">:</span> royalblue<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">span>h1</span><span class="token punctuation">&#123;</span>                <span class="token property">color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>è¿™æ˜¯æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>è¿™æ˜¯æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>è¿™æ˜¯æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>è¿™æ˜¯æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>è¿™æ˜¯æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>è¿™æ˜¯æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>è¿™æ˜¯æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>è¿™æ˜¯æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>è¿™æ˜¯æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>è¿™æ˜¯æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="CSS/20210715160407.png" alt="image-20210715160407509" style="zoom: 33%;" /><h3 id="3-å±æ€§é€‰æ‹©å™¨">3.å±æ€§é€‰æ‹©å™¨</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token comment">/*å±æ€§é€‰æ‹©å™¨*/</span>            <span class="token selector">input[type="password"]</span><span class="token punctuation">&#123;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">input[type="text"][value="zhaoss1"]</span><span class="token punctuation">&#123;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">></span></span>            ç”¨æˆ·åï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zhaoss1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            ç”¨æˆ·å2ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zhaoss2<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            å¯†ç ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>123123<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç™»å½•<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h3 id="4-ä¼ªç±»é€‰æ‹©å™¨">4.ä¼ªç±»é€‰æ‹©å™¨</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token selector">.mycls:hover</span><span class="token punctuation">&#123;</span>                <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mycls<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æˆ‘æ˜¯æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>ä¸€èˆ¬ä¼ªç±»é€‰æ‹©å™¨éƒ½åº”ç”¨åœ¨è¶…é“¾æ¥ä¸Š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token comment">/*è®¾ç½®é™æ­¢çŠ¶æ€*/</span>            <span class="token selector">a:link</span><span class="token punctuation">&#123;</span>                <span class="token property">color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">/*è®¾ç½®é¼ æ ‡æ‚¬æµ®çŠ¶æ€*/</span>            <span class="token selector">a:hover</span><span class="token punctuation">&#123;</span>                <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">/*è®¾ç½®è§¦å‘çŠ¶æ€*/</span>            <span class="token selector">a:active</span><span class="token punctuation">&#123;</span>                <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">/*è®¾ç½®å®ŒæˆçŠ¶æ€*/</span>            <span class="token selector">a:visited</span><span class="token punctuation">&#123;</span>                <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index.html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¶…é“¾æ¥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h4 id="ä¾‹å­ï¼šç™¾åº¦å¯¼èˆªæ¡">ä¾‹å­ï¼šç™¾åº¦å¯¼èˆªæ¡</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token selector">ul</span><span class="token punctuation">&#123;</span>                <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token comment">/*å°†æ— åºåˆ—è¡¨å‰é¢çš„å›¾æ ‡å–æ¶ˆ*/</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">li</span><span class="token punctuation">&#123;</span>                <span class="token property">float</span><span class="token punctuation">:</span>left<span class="token punctuation">;</span><span class="token comment">/*å‘å·¦æµ®åŠ¨*/</span>                <span class="token property">margin-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><span class="token comment">/*è®¾ç½®é—´éš”20px*/</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">a</span><span class="token punctuation">&#123;</span>                <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token comment">/*å»æ‰ä¸‹åˆ’çº¿*/</span>                <span class="token property">font-size</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span><span class="token comment">/*å­—å·*/</span>                <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span><span class="token comment">/*å­—ä½“é¢œè‰²*/</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">a:hover</span><span class="token punctuation">&#123;</span>                <span class="token property">color</span><span class="token punctuation">:</span> #0000FF<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">div</span><span class="token punctuation">&#123;</span>                <span class="token comment">/*å®šä½ï¼š*/</span>                <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><span class="token comment">/*ç»å¯¹å®šä½*/</span>                <span class="token property">right</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aaaa<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ–°é—»<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aaaa<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hao123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aaaa<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åœ°å›¾<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aaaa<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è§†é¢‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="CSS/20210715174100.png" alt="image-20210715174100021" style="zoom:50%;" /><img src="CSS/20210715174209.png" alt="image-20210715174209462" style="zoom:50%;" /><h2 id="æµ®åŠ¨æ•ˆæœ">æµ®åŠ¨æ•ˆæœ</h2><h3 id="æ–‡å­—ç¯ç»•å›¾ç‰‡">æ–‡å­—ç¯ç»•å›¾ç‰‡</h3><p>â€‹æµ®åŠ¨è®¾è®¡çš„åˆè¡·ä¸ºäº†è§£å†³<strong>æ–‡å­—ç¯ç»•å›¾ç‰‡</strong>é—®é¢˜ï¼Œæµ®åŠ¨åä¸€å®šä¸ä¼šå°†æ–‡å­—æŒ¡ä½ï¼Œè¿™æ˜¯è®¾è®¡åˆè¡·ï¼Œä¸èƒ½è¿èƒŒçš„ã€‚</p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20210718100303705.png" alt="image-20210718100303705" style="zoom: 33%;" /><h3 id="åŸç†">åŸç†</h3><p>â€‹CSS çš„ Floatï¼ˆæµ®åŠ¨ï¼‰ä½¿å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼ŒæŒ‰ç…§æŒ‡å®šçš„æ–¹å‘ï¼ˆå·¦æˆ–å³å‘ç”Ÿç§»åŠ¨ï¼‰ï¼Œç›´åˆ°å®ƒçš„å¤–è¾¹ç¼˜ç¢°åˆ°åŒ…å«æ¡†æˆ–å¦ä¸€ä¸ªæµ®åŠ¨æ¡†çš„è¾¹æ¡†ä¸ºæ­¢ã€‚æ–‡æ¡£æµæ˜¯æ–‡æ¡£ä¸­å¯æ˜¾ç¤ºå¯¹è±¡åœ¨æ’åˆ—æ—¶æ‰€å ç”¨çš„ä½ç½®/ç©ºé—´ï¼Œè€Œè„±ç¦»æ–‡æ¡£æµå°±æ˜¯åœ¨é¡µé¢ä¸­ä¸å ä½ç½®äº†ã€‚</p><h3 id="è¯­æ³•">è¯­æ³•</h3><p><img src="CSS/20210718100331.png" alt="image-20210718100331232"></p><h3 id="å®ä¾‹å±•ç¤º">å®ä¾‹å±•ç¤º</h3><p>è®¾ç½®ä¸€ä¸ªå¤§çš„divï¼Œé‡Œé¢æ”¾ä¸‰ä¸ªå°çš„div</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--å¤–å±‚div--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span><span class="token property">background-color</span><span class="token punctuation">:</span> chartreuse<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span><span class="token property">background-color</span><span class="token punctuation">:</span> coral<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>22<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span><span class="token property">background-color</span><span class="token punctuation">:</span> yellow</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>33<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æ²¡æœ‰ä»»ä½•æµ®åŠ¨</p><img src="CSS/20210718102727.png" alt="image-20210718102727344" style="zoom: 33%;" /><p>ç»™ç»¿divè®¾ç½®æµ®åŠ¨</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span><span class="token property">background-color</span><span class="token punctuation">:</span> chartreuse<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><img src="CSS/20210718103223.png" alt="image-20210718103223765" style="zoom: 33%;" /><p>ç»™æ©˜è‰²å°å—è®¾ç½®æµ®åŠ¨</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span><span class="token property">background-color</span><span class="token punctuation">:</span> coral<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>22<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><img src="CSS/20210718103413.png" alt="image-20210718103413403" style="zoom: 33%;" /><p>ç»™é»„è‰²å°å—è®¾ç½®æµ®åŠ¨</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span><span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span><span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>33<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><img src="CSS/20210718103540.png" alt="image-20210718103540103" style="zoom: 50%;" /><p>å› ä¸ºæ‰€æœ‰çš„å°divéƒ½æµ®åˆ°ä¸Šé¢ï¼Œå¤§divé‡Œæ²¡æœ‰ä¸œè¥¿å¡«å……ï¼Œæ‰€ä»¥å°±æ¶ˆå¤±äº†ã€‚</p><p>è¿™æ ·å¦‚æœæœ‰å…¶ä»–çš„divå—ï¼Œå°±ä¼šå˜ä½ç½®</p><img src="CSS/20210718104648.png" alt="image-20210718104648829" style="zoom:50%;" /><h3 id="æ¶ˆé™¤æµ®åŠ¨å½±å“">æ¶ˆé™¤æµ®åŠ¨å½±å“</h3><ol><li><p>ç»™æµ®åŠ¨çš„çˆ¶èŠ‚ç‚¹åŠ å…¥ä¸€ä¸ªå±æ€§overflow:hidden</p><p><img src="CSS/20210718104836.png" alt="image-20210718104836651"></p><img src="CSS/20210718105023.png" alt="image-20210718105023259" style="zoom:33%;" /></li><li><p>ç»™çˆ¶èŠ‚ç‚¹åŠ ä¸€ä¸ªé«˜åº¦ï¼Œè®©ç²‰è‰²divâ€œæ’‘èµ·æ¥â€</p><p><img src="CSS/20210718105114.png" alt="image-20210718105114468"></p><img src="CSS/20210718105102.png" alt="image-20210718105101964" style="zoom: 33%;" /></li><li><p>è¢«å½±å“çš„å…ƒç´ ç´«è‰²divï¼šç»™å®ƒåŠ å…¥ä¸€ä¸ªå±æ€§clear:both;</p><p><img src="CSS/20210718105219.png" alt="image-20210718105219588"></p><img src="CSS/20210718105205.png" alt="image-20210718105205523" style="zoom:33%;" /></li></ol><h2 id="å®šä½">å®šä½</h2><h3 id="é™æ€å®šä½-static">é™æ€å®šä½(static)</h3><p>å°±æ˜¯é»˜è®¤çš„å®šä½</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--é™æ€å®šä½:é»˜è®¤æ•ˆæœ æ•ˆæœå°±æ˜¯å…ƒç´ å‡ºç°åœ¨æœ¬æ¥åº”è¯¥å‡ºç°çš„ä½ç½® ä¸€èˆ¬å°±çœç•¥ä¸å†™--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/1.jpg<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">position</span><span class="token punctuation">:</span> static<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h3 id="ç›¸å¯¹å®šä½-relative">ç›¸å¯¹å®šä½(relative)</h3><p>ç›¸å¯¹å…ƒç´ è‡ªèº«æ‰€åœ¨çš„åŸæ¥çš„ä½ç½®è¿›è¡Œå®šä½,å¯ä»¥è®¾ç½®left,color,bottom,topè¿™å››ä¸ªå±æ€§</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--ç›¸å¯¹å®šä½        ç›¸å¯¹å…ƒç´ è‡ªèº«æ‰€åœ¨çš„åŸæ¥çš„ä½ç½®è¿›è¡Œå®šä½        å¯ä»¥è®¾ç½®left,color,bottom,topè¿™å››ä¸ªå±æ€§        --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> <span class="token property">bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>z-indexå±æ€§ï¼š</p><p>è®¾ç½®å †å é¡ºåºï¼Œè®¾ç½®å…ƒç´ è°åœ¨ä¸Šè°åœ¨ä¸‹ã€‚æ³¨æ„ï¼šz-indexå±æ€§è¦è®¾ç½®åœ¨å®šä½çš„å…ƒç´ ä¸Š,</p><p>åº”ç”¨åœºåˆï¼š<br>ï¼ˆ1ï¼‰å…ƒç´ åœ¨å°èŒƒå›´ç§»åŠ¨çš„æ—¶å€™<br>ï¼ˆ2ï¼‰ç»“åˆç»å¯¹å®šä½ä½¿ç”¨</p><h3 id="ç»å¯¹å®šä½-absolute">ç»å¯¹å®šä½(absolute)</h3><ul><li>è®¾ç½®å­å—divä¸ºç»å¯¹å®šä½</li></ul><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token selector">#outer</span><span class="token punctuation">&#123;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>                <span class="token property">margin-left</span><span class="token punctuation">:</span>300px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">#div01</span><span class="token punctuation">&#123;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> cornflowerblue<span class="token punctuation">;</span>                <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><span class="token comment">/*è®¾ç½®ä¸€ä¸ªç»å¯¹å®šä½*/</span>                <span class="token property">left</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>                <span class="token property">top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">#div02</span><span class="token punctuation">&#123;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> coral<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>div01<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>111<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>div02<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>222<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœ</p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20210718163324246.png" alt="image-20210718163324246" style="zoom: 33%;" /><p>è“è‰²divç›¸å¯¹bodyäº§ç”Ÿçš„ä½ç§»ï¼Œç›¸å¯¹bodyè¿›è¡Œä½ç½®çš„æ”¹å˜ï¼Œç„¶åè“è‰²divå‘ç”Ÿä½ç§»ä»¥åï¼ŒåŸä½ç½®å¾—åˆ°äº†é‡Šæ”¾ã€‚æ©™è‰²divç§»åŠ¨ä¸Šå»äº†ï¼</p><ul><li>å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€è®©è“è‰²divåœ¨ç²‰è‰²divä¸­å‘ç”Ÿä½ç§»æ•ˆæœ<br>é…åˆå®šä½æ¥ä½¿ç”¨ï¼š</li></ul><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token selector">#outer</span><span class="token punctuation">&#123;</span>                <span class="token comment">/*çˆ¶å—è®¾ç½®ä¸€ä¸ªç›¸å¯¹å®šä½*/</span>                <span class="token property">width</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>                <span class="token property">margin-left</span><span class="token punctuation">:</span>300px<span class="token punctuation">;</span>                <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">#div01</span><span class="token punctuation">&#123;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> cornflowerblue<span class="token punctuation">;</span>                <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>                <span class="token property">left</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>                <span class="token property">top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">#div02</span><span class="token punctuation">&#123;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> coral<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>div01<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>111<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>div02<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>222<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœ</p><img src="CSS/20210718163447.png" alt="image-20210718163447139" style="zoom: 50%;" /><h4 id="æ€»ç»“ï¼š">æ€»ç»“ï¼š</h4><p>å½“ç»™ä¸€ä¸ªå…ƒç´ è®¾ç½®äº†ç»å¯¹å®šä½çš„æ—¶å€™ï¼Œå®ƒç›¸å¯¹è°å˜åŒ–å‘¢ï¼Ÿå®ƒä¼šå‘ä¸Šä¸€å±‚ä¸€å±‚çš„æ‰¾çˆ¶çº§èŠ‚ç‚¹æ˜¯å¦æœ‰å®šä½ï¼Œå¦‚æœç›´åˆ°æ‰¾åˆ°bodyäº†ä¹Ÿæ²¡æœ‰å®šä½ï¼Œé‚£ä¹ˆå°±ç›¸å¯¹bodyè¿›è¡Œå˜åŒ–ï¼Œå¦‚æœçˆ¶çº§èŠ‚ç‚¹æœ‰å®šä½ï¼ˆç»å¯¹å®šä½ï¼Œç›¸å¯¹å®šä½ï¼Œå›ºå®šå®šä½ï¼‰ï¼Œä½†æ˜¯ä¸€èˆ¬æˆ‘ä»¬ä¼šé…åˆä½¿ç”¨çˆ¶çº§ä¸ºç›¸å¯¹å®šä½ï¼Œå½“å‰å…ƒç´ ä¸ºç»å¯¹å®šä½ï¼Œè¿™æ ·è¿™ä¸ªå…ƒç´ å°±ä¼šç›¸å¯¹çˆ¶çº§ä½ç½®äº§ç”Ÿå˜åŒ–ã€‚æ— è®ºæ˜¯ä¸Šé¢çš„å“ªä¸€ç§ï¼Œéƒ½ä¼šé‡Šæ”¾åŸæ¥çš„ä½ç½®ï¼Œç„¶åå…¶ä»–å…ƒç´ ä¼šå ç”¨é‚£ä¸ªä½ç½®ã€‚</p><p>å¼€å‘ä¸­å»ºè®®ä½¿ç”¨ï¼šçˆ¶çº§èŠ‚ç‚¹relativeå®šä½ï¼Œå­çº§èŠ‚ç‚¹ä½¿ç”¨ç»å¯¹å®šä½ã€‚</p><h3 id="å›ºå®šå®šä½-fixed">å›ºå®šå®šä½(fixed)</h3><p>åº”ç”¨åœºåˆï¼šåœ¨é¡µé¢è¿‡é•¿çš„æ—¶å€™ï¼Œå°†æŸä¸ªå…ƒç´ <strong>å›ºå®š</strong>åœ¨æµè§ˆå™¨çš„æŸä¸ªä½ç½®ä¸Šï¼Œå½“<strong>æ‹‰åŠ¨æ»šåŠ¨æ¡çš„æ—¶å€™ï¼Œè¿™ä¸ªå…ƒç´ ä½ç½®ä¸åŠ¨ã€‚</strong></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token selector">#mydiv</span><span class="token punctuation">&#123;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> cadetblue<span class="token punctuation">;</span>                <span class="token comment">/*å›ºå®šå®šä½*/</span>                <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>                <span class="token property">right</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>                <span class="token property">top</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mydiv<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>ä½ å¥½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>        ...(çœç•¥å¾ˆå¤šè¡Œ)        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>ä½ å¥½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœ</p><img src="CSS/20210718163814.png" alt="image-20210718163814128" style="zoom:33%;" /><h2 id="ç›’å­æ¨¡å‹">ç›’å­æ¨¡å‹</h2><p>â€‹é¡µé¢ä¸Šä¹Ÿæœ‰å¾ˆå¤šå…ƒç´ ï¼Œå…ƒç´ ä¹‹é—´çš„å¸ƒå±€/è®¾è®¡ ä¾é  <strong>ç›’å­æ¨¡å‹</strong>ï¼š<br>â€‹æ‰€æœ‰HTMLå…ƒç´ å¯ä»¥çœ‹ä½œç›’å­ï¼Œåœ¨CSSä¸­ï¼Œ&quot;box model&quot;è¿™ä¸€æœ¯è¯­æ˜¯ç”¨æ¥è®¾è®¡å’Œå¸ƒå±€æ—¶ä½¿ç”¨ã€‚<br>â€‹CSSç›’æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç›’å­ï¼Œå°è£…å‘¨å›´çš„HTMLå…ƒç´ ï¼Œå®ƒåŒ…æ‹¬ï¼šè¾¹è·ï¼Œè¾¹æ¡†ï¼Œå¡«å……ï¼Œå’Œå®é™…å†…å®¹ã€‚<br>â€‹ç›’æ¨¡å‹å…è®¸æˆ‘ä»¬åœ¨å…¶å®ƒå…ƒç´ å’Œå‘¨å›´å…ƒç´ è¾¹æ¡†ä¹‹é—´çš„ç©ºé—´æ”¾ç½®å…ƒç´ ã€‚<br>â€‹ä¸‹é¢çš„å›¾ç‰‡è¯´æ˜äº†ç›’å­æ¨¡å‹(Box Model)ï¼š</p><img src="CSS/20210718190406.png" alt="image-20210718190406052" style="zoom:50%;" /><img src="CSS/20210718190434.png" alt="image-20210718190434286" style="zoom:50%;" /><p>æ„Ÿå—ç›’å­æ¨¡å‹</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--ä»£ç æ„Ÿå—ç›’å­çš„å…·ä½“å«ä¹‰--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token comment">/*å°†æ‰€æœ‰å…ƒç´ çš„æ ·å¼ï¼šå¤–è¾¹è·ï¼Œè¾¹æ¡†ï¼Œå†…è¾¹è·å…¨éƒ¨è®¾ç½®ä¸º0*/</span>            <span class="token comment">/*æ²¡æœ‰å•ç‹¬è®¾ç½®ç›’å­æ¨¡å‹æ ·å¼çš„å°±éµç…§æ€»çš„è®¾ç½®*/</span>            <span class="token selector">*</span><span class="token punctuation">&#123;</span>                <span class="token property">margin</span><span class="token punctuation">:</span>0px<span class="token punctuation">;</span>                <span class="token property">padding</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>                <span class="token property">border</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">#outer</span><span class="token punctuation">&#123;</span>                <span class="token comment">/*ä¿®æ”¹äº†å†…è¾¹è·paddingéœ€è¦æ›´æ”¹åŸæ¥çš„é•¿å’Œå®½ */</span>                <span class="token property">width</span><span class="token punctuation">:</span>450px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 450px<span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>                <span class="token property">margin-left</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>                <span class="token property">margin-top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>                <span class="token property">padding-left</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>                <span class="token property">padding-top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">#mydiv</span><span class="token punctuation">&#123;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> yellowgreen<span class="token punctuation">;</span>                <span class="token property">padding-left</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>                <span class="token property">padding-top</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mydiv<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>111<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p><strong>æ³¨æ„ä¿®æ”¹äº†å†…è¾¹è·ä»¥åéœ€è¦ä¿®æ”¹åŸæœ¬çš„é•¿å’Œå®½</strong></p><p>æ•ˆæœ</p><p><img src="https://gitee.com/TeaSea33/typora-picgo/raw/master/img/20210718194809.png" alt="image-20210718194809665" style="zoom:50%;" /><img src="CSS/20210718200438.png" alt="image-20210718200437875" style="zoom: 67%;" /></p><h1>H+Cç»ƒä¹ </h1><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token selector">#bigdiv</span><span class="token punctuation">&#123;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 65px<span class="token punctuation">;</span>                <span class="token property">border</span><span class="token punctuation">:</span> solid #D70000 <span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span>#FBEECF <span class="token punctuation">;</span>                <span class="token comment">/*è®¾ç½®divé‡Œä¸­æ–‡å­—çš„æ•ˆæœ*/</span>                <span class="token property">font-size</span><span class="token punctuation">:</span> 17px<span class="token punctuation">;</span>                <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"å¾®è½¯é›…é»‘"</span><span class="token punctuation">;</span>                <span class="token property">color</span><span class="token punctuation">:</span> #D70000<span class="token punctuation">;</span>                <span class="token comment">/*è®¾ç½®å›ºå®šå®šä½*/</span>                <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>                <span class="token property">right</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>                <span class="token property">top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>                <span class="token comment">/*èƒŒæ™¯å›¾å¤§å°çš„è®¾ç½®*/</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">#mydiv</span><span class="token punctuation">&#123;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>                <span class="token comment">/*å…ˆå†™èƒŒæ™¯å›¾ï¼Œå†å†™èƒŒæ™¯è‰²*/</span>                <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>img/å°å–‡å­.png<span class="token punctuation">)</span></span> no-repeat 8px 12px<span class="token punctuation">;</span>                <span class="token property">padding-top</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span><span class="token comment">/*ç›’å­æ¨¡å‹çš„é¡µå†…è¾¹è·*/</span>                <span class="token property">padding-right</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>                <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token comment">/*è®¾ç½®æ°´å¹³å±…ä¸­*/</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">#mydiv2</span><span class="token punctuation">&#123;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>                <span class="token comment">/*å…ˆå†™èƒŒæ™¯å›¾ï¼Œå†å†™èƒŒæ™¯è‰²*/</span>                <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>img/è”ç³»å®¢æœ.png<span class="token punctuation">)</span></span> no-repeat 3px 8px<span class="token punctuation">;</span>                <span class="token property">padding-top</span><span class="token punctuation">:</span> 70px<span class="token punctuation">;</span><span class="token comment">/*ç›’å­æ¨¡å‹çš„é¡µå†…è¾¹è·*/</span>                <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token comment">/*è®¾ç½®æ°´å¹³å±…ä¸­*/</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">#mydiv3</span><span class="token punctuation">&#123;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>                <span class="token comment">/*å…ˆå†™èƒŒæ™¯å›¾ï¼Œå†å†™èƒŒæ™¯è‰²*/</span>                <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>img/äºŒç»´ç .png<span class="token punctuation">)</span></span> no-repeat 3px 8px<span class="token punctuation">;</span>                <span class="token property">padding-top</span><span class="token punctuation">:</span> 70px<span class="token punctuation">;</span><span class="token comment">/*ç›’å­æ¨¡å‹çš„é¡µå†…è¾¹è·*/</span>                <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token comment">/*è®¾ç½®æ°´å¹³å±…ä¸­*/</span>            <span class="token punctuation">&#125;</span>            <span class="token selector">#mydiv4</span><span class="token punctuation">&#123;</span>                <span class="token comment">/*å…ˆå†™èƒŒæ™¯å›¾ï¼Œå†å†™èƒŒæ™¯è‰²*/</span>                <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>img/å‘µæŠ¤.png<span class="token punctuation">)</span></span> no-repeat 3px 8px<span class="token punctuation">;</span>                <span class="token property">padding-top</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span><span class="token comment">/*ç›’å­æ¨¡å‹çš„é¡µå†…è¾¹è·*/</span>                <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token comment">/*è®¾ç½®æ°´å¹³å±…ä¸­*/</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bigdiv<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mydiv<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                æœ€æ–°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>å‘å¸ƒ            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50px<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>black<span class="token punctuation">"</span></span>  <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mydiv2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                è”ç³»<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>å®¢æœ            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50px<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>black<span class="token punctuation">"</span></span>  <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mydiv3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                APP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>ä¸‹è½½            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50px<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>black<span class="token punctuation">"</span></span>  <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mydiv4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                æ—…æ¸¸<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>å‡ºè¡Œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>æ¸©é¦¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>æç¤º            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>...çœç•¥å¾ˆå¤šä¸ªhello        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="CSS/20210719085925.png" alt="image-20210719085617279" style="zoom: 33%;" />]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML</title>
      <link href="/2021/06/13/HTML/"/>
      <url>/2021/06/13/HTML/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=8b0a6b8b-43d1-22c4-317d-db0a13cf741b</cover>
      <date>Sun Jun 13 2021 09:54:00 GMT+0800</date>
      
        <content type="html"><![CDATA[<p>è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€</p><h2 id="head-æ ‡ç­¾">head æ ‡ç­¾</h2><p>headæ ‡ç­¾ç”¨äºå®šä¹‰æ–‡æ¡£çš„å¤´éƒ¨ï¼Œå®ƒæ˜¯æ‰€æœ‰å¤´éƒ¨å…ƒç´ çš„å®¹å™¨ã€‚<head> ä¸­çš„å…ƒç´ å¯ä»¥å¼•ç”¨è„šæœ¬ã€æŒ‡ç¤ºæµè§ˆå™¨åœ¨å“ªé‡Œæ‰¾åˆ°æ ·å¼è¡¨ã€‚æ–‡æ¡£çš„å¤´éƒ¨æè¿°äº†æ–‡æ¡£çš„å„ç§å±æ€§å’Œä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–‡æ¡£çš„æ ‡é¢˜ã€åœ¨ Web ä¸­çš„ä½ç½®ä»¥åŠå’Œå…¶ä»–æ–‡æ¡£çš„å…³ç³»ç­‰ã€‚ç»å¤§å¤šæ•°æ–‡æ¡£å¤´éƒ¨åŒ…å«çš„æ•°æ®éƒ½ä¸ä¼šçœŸæ­£ä½œä¸ºå†…å®¹æ˜¾ç¤ºç»™è¯»è€…ã€‚</p><span id="more"></span><p>ä¸‹é¢è¿™äº›æ ‡ç­¾å¯ç”¨åœ¨ head éƒ¨åˆ†ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>ã€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span><span class="token punctuation">></span></span>ã€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span><span class="token punctuation">></span></span>ã€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span>ã€ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span>ã€ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span><span class="token punctuation">></span></span>ã€‚</code></pre><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--é¡µé¢æ³¨é‡Šå¯ä»¥æ”¾å…¥&lt;title>ã€&lt;meta>ã€&lt;style>ã€&lt;script>ã€&lt;base>--></span><span class="token comment">&lt;!--é¡µé¢æ ‡é¢˜--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>ç™¾åº¦ä¸€ä¸‹ï¼Œä½ å°±çŸ¥é“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--è®¾ç½®é¡µé¢çš„ç¼–ç ï¼Œé˜²æ­¢ä¹±ç ç°è±¡åˆ©ç”¨metaæ ‡ç­¾charset="UTF-8"--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment">&lt;!--é¡µé¢åˆ·æ–°æ•ˆæœ--></span><span class="token comment">&lt;!--&lt;meta http-equiv="refresh" content="3;http://www.baidu.com"  />--></span><span class="token comment">&lt;!--é¡µé¢ä½œè€…--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>author<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>chs;1374347231@qq.com<span class="token punctuation">"</span></span>  <span class="token punctuation">/></span></span><span class="token comment">&lt;!--é¡µé¢æè¿°--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>description<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é™ˆæ…§çŠç®€ä»‹<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token comment">&lt;!--link æ ‡ç­¾å¼•å…¥å¤–éƒ¨èµ„æº--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>shortcut icon<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.baidu.com/favicon.ico<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/x-icon<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--bodyæ ‡ç­¾ä¸­ï¼šæ”¾å…¥é¡µé¢å±•ç¤ºçš„å†…å®¹--></span>hello è¿™é‡Œæ˜¯ç¬¬ä¸€ä¸ªhtmlï¼ï¼ï¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--é¡µé¢æ³¨é‡Šå¯ä»¥æ”¾å…¥&lt;title>ã€&lt;meta>ã€&lt;style>ã€&lt;script>ã€&lt;base>--></span><span class="token comment">&lt;!--é¡µé¢æ ‡é¢˜--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>ç™¾åº¦ä¸€ä¸‹ï¼Œä½ å°±çŸ¥é“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--è®¾ç½®é¡µé¢çš„ç¼–ç ï¼Œé˜²æ­¢ä¹±ç ç°è±¡åˆ©ç”¨metaæ ‡ç­¾charset="UTF-8"--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment">&lt;!--é¡µé¢åˆ·æ–°æ•ˆæœ--></span><span class="token comment">&lt;!--&lt;meta http-equiv="refresh" content="3;http://www.baidu.com"  />--></span><span class="token comment">&lt;!--é¡µé¢ä½œè€…--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>author<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>chs;1374347231@qq.com<span class="token punctuation">"</span></span>  <span class="token punctuation">/></span></span><span class="token comment">&lt;!--é¡µé¢æè¿°--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>description<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é™ˆæ…§çŠç®€ä»‹<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token comment">&lt;!--link æ ‡ç­¾å¼•å…¥å¤–éƒ¨èµ„æº--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>shortcut icon<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.baidu.com/favicon.ico<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/x-icon<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--bodyæ ‡ç­¾ä¸­ï¼šæ”¾å…¥é¡µé¢å±•ç¤ºçš„å†…å®¹--></span>hello è¿™é‡Œæ˜¯ç¬¬ä¸€ä¸ªhtmlï¼ï¼ï¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>è¿è¡Œæ•ˆæœï¼š</p><img src="HTML/20210713192135.png" alt="image-20210713192135511" style="zoom:50%;" /><h2 id="body-æ ‡ç­¾">body æ ‡ç­¾</h2><p>body å…ƒç´ æ˜¯å®šä¹‰æ–‡æ¡£çš„ä¸»ä½“ã€‚body å…ƒç´ åŒ…å«æ–‡æ¡£çš„æ‰€æœ‰å†…å®¹ï¼ˆæ¯”å¦‚æ–‡æœ¬ã€è¶…é“¾æ¥ã€å›¾åƒã€è¡¨æ ¼å’Œåˆ—è¡¨ç­‰ç­‰ã€‚ï¼‰bodyæ˜¯ç”¨åœ¨ç½‘é¡µä¸­çš„ä¸€ç§HTMLæ ‡ç­¾ï¼Œæ ‡ç­¾æ˜¯ç”¨åœ¨ç½‘é¡µä¸­çš„ä¸€ç§HTMLæ ‡ç­¾ï¼Œè¡¨ç¤ºç½‘é¡µçš„ä¸»ä½“éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·å¯ä»¥çœ‹åˆ°çš„å†…å®¹ï¼Œå¯ä»¥åŒ…å«æ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰å„ç§å†…å®¹ã€‚</p><h3 id="æ–‡æœ¬æ ‡ç­¾">æ–‡æœ¬æ ‡ç­¾</h3><div align="center" alt="image-20210713192339192" style="zoom: 50%;">    <img src="https://gitee.com/TeaSea33/typora-picgo/raw/master/img/20210713192339.png" alt="image-20210713192339192"> </div><p>å®ä½“åç§°</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--h1-h6å­—å·é€æ¸å˜å°ï¼Œæ¯ä¸ªæ ‡é¢˜ç‹¬å ä¸€è¡Œï¼Œè‡ªå¸¦æ¢è¡Œæ•ˆæœh7ä¹‹åå±äºæ— æ•ˆæ ‡ç­¾ï¼Œä½†æ˜¯æµè§ˆå™¨ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯ä»¥æ™®é€šæ–‡æœ¬çš„å½¢å¼å±•ç°--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>åª’ä½“ï¼šä¸ºäººçˆ¶æ¯ï¼Œè¦ä¸è¦â€œæŒè¯ä¸Šå²—â€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>åª’ä½“ï¼šä¸ºäººçˆ¶æ¯ï¼Œè¦ä¸è¦â€œæŒè¯ä¸Šå²— â€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>åª’ä½“ï¼šä¸ºäººçˆ¶æ¯ï¼Œè¦ä¸è¦â€œæŒè¯ä¸Šå²—â€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--æ¨ªçº¿æ ‡ç­¾widthï¼šè®¾ç½®å®½åº¦300px å›ºå®šå®½åº¦30% é¡µé¢å®½åº¦çš„ç™¾åˆ†æ¯”ï¼Œ ä¼šéšç€é¡µé¢å®½åº¦çš„å˜åŒ–è€Œå˜åŒ–align: è®¾ç½®ä½ç½® left,center,right é»˜è®¤ä¸å†™çš„è¯å°±æ˜¯centerå±…ä¸­æ•ˆæœ--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>300px<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30%<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token comment">&lt;!--æ®µè½æ ‡ç­¾æ®µè½æ•ˆæœï¼šæ®µè½ä¸­æ–‡å­—è‡ªåŠ¨æ¢è¡Œï¼Œæ®µè½å’Œæ®µè½ä¹‹é—´æœ‰ç©ºè¡Œ--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span>26æ—¥ï¼Œâ€œå»ºè®®çˆ¶æ¯æŒåˆæ ¼<span class="token entity named-entity" title="&lt;">&amp;lt;</span>çˆ¶æ¯è¯<span class="token entity named-entity" title="&gt;">&amp;gt;</span>ä¸Šå²—<span class="token entity named-entity" title="&copy;">&amp;copy;</span>â€å†²ä¸Šå¾®åšçƒ­æœï¼Œè¿…é€Ÿå¼•å‘çƒ­è®®ã€‚åœ¨æ­£åœ¨å¬å¼€çš„å…¨å›½ä¸¤ä¼šä¸Šï¼Œå…¨å›½æ”¿åå§”å‘˜è®¸æ´ªç²å»ºè®®åœ¨ç¤¾åŒºä¸¾åŠå®¶é•¿è¯¾å ‚ï¼Œå»ºç«‹â€œå®¶é•¿æ•™è‚²æŒ‡å¯¼å·¥ä½œå®¤â€ã€‚é’ˆå¯¹å‡†å¤‡å…¥å°å­¦çš„å®¶é•¿å¼€å±•ç›¸å…³è¯¾ç¨‹æ•™è‚²ï¼Œé¢å‘â€œåˆæ ¼çˆ¶æ¯â€ä¸Šå²—è¯éšå­¦ç”Ÿæ¡£æ¡ˆå…¥å­¦ã€‚5æœˆ26æ—¥ï¼Œâ€œå»ºè®®çˆ¶æ¯æŒåˆæ ¼çˆ¶æ¯è¯ä¸Šå²—â€å†²ä¸Šå¾®åšçƒ­æœï¼Œè¿…é€Ÿå¼•å‘çƒ­è®®ã€‚åœ¨æ­£åœ¨å¬å¼€çš„å…¨å›½ä¸¤ä¼šä¸Šï¼Œå…¨å›½æ”¿åå§”å‘˜è®¸æ´ªç²å»ºè®®åœ¨ç¤¾åŒºä¸¾åŠå®¶é•¿è¯¾å ‚ï¼Œå»ºç«‹â€œå®¶é•¿æ•™è‚²æŒ‡å¯¼å·¥ä½œå®¤â€ã€‚é’ˆå¯¹å‡†å¤‡å…¥å°å­¦çš„å®¶é•¿å¼€å±•ç›¸å…³è¯¾ç¨‹æ•™è‚²ï¼Œé¢å‘â€œåˆæ ¼çˆ¶æ¯â€ä¸Šå²—è¯éšå­¦ç”Ÿæ¡£æ¡ˆå…¥å­¦ã€‚5æœˆ26æ—¥ï¼Œâ€œå»ºè®®çˆ¶æ¯æŒåˆæ ¼çˆ¶æ¯è¯ä¸Šå²—â€å†²ä¸Šå¾®åšçƒ­æœï¼Œè¿…é€Ÿå¼•å‘çƒ­è®®ã€‚åœ¨æ­£åœ¨å¬å¼€çš„å…¨å›½ä¸¤ä¼šä¸Šï¼Œå…¨å›½æ”¿åå§”å‘˜è®¸æ´ªç²å»ºè®®åœ¨ç¤¾åŒºä¸¾åŠå®¶é•¿è¯¾å ‚ï¼Œå»ºç«‹â€œå®¶é•¿æ•™è‚²æŒ‡å¯¼å·¥ä½œå®¤â€ã€‚é’ˆå¯¹å‡†å¤‡å…¥å°å­¦çš„å®¶é•¿å¼€å±•ç›¸å…³è¯¾ç¨‹æ•™è‚²ï¼Œé¢å‘â€œåˆæ ¼çˆ¶æ¯â€ä¸Šå²—è¯éšå­¦ç”Ÿæ¡£æ¡ˆå…¥å­¦ã€‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token entity named-entity" title="&emsp;">&amp;emsp;</span>26æ—¥ï¼Œâ€œå»ºè®®çˆ¶æ¯æŒåˆæ ¼<span class="token entity named-entity" title="&lt;">&amp;lt;</span>çˆ¶æ¯è¯<span class="token entity named-entity" title="&gt;">&amp;gt;</span>ä¸Šå²—<span class="token entity named-entity" title="&copy;">&amp;copy;</span>â€å†²ä¸Šå¾®åšçƒ­æœï¼Œè¿…é€Ÿå¼•å‘çƒ­è®®ã€‚åœ¨æ­£åœ¨å¬å¼€çš„å…¨å›½ä¸¤ä¼šä¸Šï¼Œå…¨å›½æ”¿åå§”å‘˜è®¸æ´ªç²å»ºè®®åœ¨ç¤¾åŒºä¸¾åŠå®¶é•¿è¯¾å ‚ï¼Œå»ºç«‹â€œå®¶é•¿æ•™è‚²æŒ‡å¯¼å·¥ä½œå®¤â€ã€‚é’ˆå¯¹å‡†å¤‡å…¥å°å­¦çš„å®¶é•¿å¼€å±•ç›¸å…³è¯¾ç¨‹æ•™è‚²ï¼Œé¢å‘â€œåˆæ ¼çˆ¶æ¯â€ä¸Šå²—è¯éšå­¦ç”Ÿæ¡£æ¡ˆå…¥å­¦ã€‚5æœˆ26æ—¥ï¼Œâ€œå»ºè®®çˆ¶æ¯æŒåˆæ ¼çˆ¶æ¯è¯ä¸Šå²—â€å†²ä¸Šå¾®åšçƒ­æœï¼Œè¿…é€Ÿå¼•å‘çƒ­è®®ã€‚åœ¨æ­£åœ¨å¬å¼€çš„å…¨å›½ä¸¤ä¼šä¸Šï¼Œå…¨å›½æ”¿åå§”å‘˜è®¸æ´ªç²å»ºè®®åœ¨ç¤¾åŒºä¸¾åŠå®¶é•¿è¯¾å ‚ï¼Œå»ºç«‹â€œå®¶é•¿æ•™è‚²æŒ‡å¯¼å·¥ä½œå®¤â€ã€‚é’ˆå¯¹å‡†å¤‡å…¥å°å­¦çš„å®¶é•¿å¼€å±•ç›¸å…³è¯¾ç¨‹æ•™è‚²ï¼Œé¢å‘â€œåˆæ ¼çˆ¶æ¯â€ä¸Šå²—è¯éšå­¦ç”Ÿæ¡£æ¡ˆå…¥å­¦ã€‚5æœˆ26æ—¥ï¼Œâ€œå»ºè®®çˆ¶æ¯æŒåˆæ ¼çˆ¶æ¯è¯ä¸Šå²—â€å†²ä¸Šå¾®åšçƒ­æœï¼Œè¿…é€Ÿå¼•å‘çƒ­è®®ã€‚åœ¨æ­£åœ¨å¬å¼€çš„å…¨å›½ä¸¤ä¼šä¸Šï¼Œå…¨å›½æ”¿åå§”å‘˜è®¸æ´ªç²å»ºè®®åœ¨ç¤¾åŒºä¸¾åŠå®¶é•¿è¯¾å ‚ï¼Œå»ºç«‹â€œå®¶é•¿æ•™è‚²æŒ‡å¯¼å·¥ä½œå®¤â€ã€‚é’ˆå¯¹å‡†å¤‡å…¥å°å­¦çš„å®¶é•¿å¼€å±•ç›¸å…³è¯¾ç¨‹æ•™è‚²ï¼Œé¢å‘â€œåˆæ ¼çˆ¶æ¯â€ä¸Šå²—è¯éšå­¦ç”Ÿæ¡£æ¡ˆå…¥å­¦ã€‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>26æ—¥ï¼Œâ€œå»ºè®®çˆ¶æ¯æŒåˆæ ¼<span class="token entity named-entity" title="&lt;">&amp;lt;</span>çˆ¶æ¯è¯<span class="token entity named-entity" title="&gt;">&amp;gt;</span>ä¸Šå²—<span class="token entity named-entity" title="&copy;">&amp;copy;</span>â€å†²ä¸Šå¾®åšçƒ­æœï¼Œè¿…é€Ÿå¼•å‘çƒ­è®®ã€‚åœ¨æ­£åœ¨å¬å¼€çš„å…¨å›½ä¸¤ä¼šä¸Šï¼Œå…¨å›½æ”¿åå§”å‘˜è®¸æ´ªç²å»ºè®®åœ¨ç¤¾åŒºä¸¾åŠå®¶é•¿è¯¾å ‚ï¼Œå»ºç«‹â€œå®¶é•¿æ•™è‚²æŒ‡å¯¼å·¥ä½œå®¤â€ã€‚é’ˆå¯¹å‡†å¤‡å…¥å°å­¦çš„å®¶é•¿å¼€å±•ç›¸å…³è¯¾ç¨‹æ•™è‚²ï¼Œé¢å‘â€œåˆæ ¼çˆ¶æ¯â€ä¸Šå²—è¯éšå­¦ç”Ÿæ¡£æ¡ˆå…¥å­¦ã€‚5æœˆ26æ—¥ï¼Œâ€œå»ºè®®çˆ¶æ¯æŒåˆæ ¼çˆ¶æ¯è¯ä¸Šå²—â€å†²ä¸Šå¾®åšçƒ­æœï¼Œè¿…é€Ÿå¼•å‘çƒ­è®®ã€‚åœ¨æ­£åœ¨å¬å¼€çš„å…¨å›½ä¸¤ä¼šä¸Šï¼Œå…¨å›½æ”¿åå§”å‘˜è®¸æ´ªç²å»ºè®®åœ¨ç¤¾åŒºä¸¾åŠå®¶é•¿è¯¾å ‚ï¼Œå»ºç«‹â€œå®¶é•¿æ•™è‚²æŒ‡å¯¼å·¥ä½œå®¤â€ã€‚é’ˆå¯¹å‡†å¤‡å…¥å°å­¦çš„å®¶é•¿å¼€å±•ç›¸å…³è¯¾ç¨‹æ•™è‚²ï¼Œé¢å‘â€œåˆæ ¼çˆ¶æ¯â€ä¸Šå²—è¯éšå­¦ç”Ÿæ¡£æ¡ˆå…¥å­¦ã€‚5æœˆ26æ—¥ï¼Œâ€œå»ºè®®çˆ¶æ¯æŒåˆæ ¼çˆ¶æ¯è¯ä¸Šå²—â€å†²ä¸Šå¾®åšçƒ­æœï¼Œè¿…é€Ÿå¼•å‘çƒ­è®®ã€‚åœ¨æ­£åœ¨å¬å¼€çš„å…¨å›½ä¸¤ä¼šä¸Šï¼Œå…¨å›½æ”¿åå§”å‘˜è®¸æ´ªç²å»ºè®®åœ¨ç¤¾åŒºä¸¾åŠå®¶é•¿è¯¾å ‚ï¼Œå»ºç«‹â€œå®¶é•¿æ•™è‚²æŒ‡å¯¼å·¥ä½œå®¤â€ã€‚é’ˆå¯¹å‡†å¤‡å…¥å°å­¦çš„å®¶é•¿å¼€å±•ç›¸å…³è¯¾ç¨‹æ•™è‚²ï¼Œé¢å‘â€œåˆæ ¼çˆ¶æ¯â€ä¸Šå²—è¯éšå­¦ç”Ÿæ¡£æ¡ˆå…¥å­¦ã€‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--åŠ ç²—å€¾æ–œä¸‹åˆ’çº¿--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span>åŠ ç²—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">></span></span>å€¾æ–œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u</span><span class="token punctuation">></span></span>ä¸‹åˆ’çº¿<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span>åŠ ç²—å€¾æ–œä¸‹åˆ’çº¿<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--ä¸€ç®­ç©¿å¿ƒ--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>del</span><span class="token punctuation">></span></span>è°­é¢–<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>del</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--é¢„ç¼–è¯‘æ ‡ç­¾ï¼šåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºåŸæ ·æ•ˆæœ--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">></span></span>    public static void main(string[] args)&#123;    stopThinkingAboutHer();    &#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--æ¢è¡Œ--></span>            <span class="token comment">&lt;!--å­—ä½“æ ‡ç­¾--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aqua<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>7<span class="token punctuation">"</span></span> <span class="token attr-name">face</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é»‘ä½“<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>è¿è¡Œæ•ˆæœï¼š</p><img src="HTML/image-20220512231440829.png" alt="image-20220512231440829" style="zoom:50%;" /><h3 id="å¤šåª’ä½“æ ‡ç­¾">å¤šåª’ä½“æ ‡ç­¾</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!--å›¾ç‰‡                        src:å¼•å…¥å›¾ç‰‡çš„ä½ç½®                                å¼•å…¥æœ¬åœ°èµ„æº                                å¼•å…¥ç½‘ç»œèµ„æº                        width:è®¾ç½®å®½åº¦                        height:è®¾ç½®é«˜åº¦                        æ³¨æ„:ä¸€èˆ¬é«˜åº¦å’Œå®½åº¦åªè®¾ç½®ä¸€ä¸ªå³å¯ï¼Œå¦ä¸€ä¸ªä¼šæŒ‰ç…§æ¯”ä¾‹è‡ªåŠ¨é€‚åº”                        title:é¼ æ ‡æ‚¬æµ®åœ¨å›¾ç‰‡ä¸Šçš„æ—¶å€™çš„æç¤ºè¯­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ˆæ²¡æœ‰è®¾ç½®altå±æ€§ï¼‰ å›¾ç‰‡å¦‚æœåŠ è½½å¤±è´¥é‚£ä¹ˆæç¤ºè¯­ä¹Ÿæ˜¯titleçš„å†…å®¹                        alt:å›¾ç‰‡åŠ è½½å¤±è´¥çš„æç¤ºè¯­                --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/ss6.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>300px<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è¿™æ˜¯ä¸€ä¸ªç¾å¥³å°å§å§<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å›¾ç‰‡åŠ è½½å¤±è´¥<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1833909874,761626004&amp;fm=26&amp;gp=0.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>                <span class="token comment">&lt;!--éŸ³é¢‘--></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>embed</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>music/æˆ‘è¦ä½ .mp3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>embed</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>                <span class="token comment">&lt;!--è§†é¢‘--></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>embed</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video/å‘¨æ°ä¼¦ - è¯´å¥½çš„å¹¸ç¦å‘¢.mp4<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500px<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>embed</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>embed</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>//player.video.iqiyi.com/38913f9ed7358c0933e82a03d9b26ec1/0/0/v_19rv8qeokk.swf-albumId=9194699400-tvId=9194699400-isPurchase=0-cnId=undefined<span class="token punctuation">"</span></span> <span class="token attr-name">allowFullScreen</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">quality</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>high<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>480<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>350<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>middle<span class="token punctuation">"</span></span> <span class="token attr-name">allowScriptAccess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>always<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>application/x-shockwave-flash<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>embed</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h3 id="è¶…é“¾æ¥æ ‡ç­¾">è¶…é“¾æ¥æ ‡ç­¾</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!--è¶…é“¾æ¥æ ‡ç­¾ï¼šä½œç”¨ï¼šå®ç°é¡µé¢çš„è·³è½¬åŠŸèƒ½                        href:æ§åˆ¶è·³è½¬çš„ç›®æ ‡ä½ç½®                        target:_self åœ¨è‡ªèº«é¡µé¢æ‰“å¼€ ï¼ˆé»˜è®¤æ•ˆæœä¹Ÿæ˜¯åœ¨è‡ªèº«é¡µé¢æ‰“å¼€ï¼‰    _blank åœ¨ç©ºç™½é¡µé¢æ‰“å¼€                --></span>                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ–‡æœ¬æ ‡ç­¾.html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¿™æ˜¯ä¸€ä¸ªè¶…é“¾æ¥01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--è·³è½¬åˆ°æœ¬åœ°èµ„æº--></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¿™æ˜¯ä¸€ä¸ªè¶…é“¾æ¥02<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!--è·³è½¬åˆ°è‡ªèº«é¡µé¢--></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>abc<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¿™æ˜¯ä¸€ä¸ªè¶…é“¾æ¥03<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--è·³è½¬çš„ç›®æ ‡æ‰¾ä¸åˆ°ï¼Œæç¤ºæ‰¾ä¸åˆ°èµ„æº--></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.baidu.com<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_self<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¿™æ˜¯ä¸€ä¸ªè¶…é“¾æ¥04<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--è·³è½¬åˆ°ç½‘ç»œèµ„æº--></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.baidu.com<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¿™æ˜¯ä¸€ä¸ªè¶…é“¾æ¥05<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--è·³è½¬åˆ°ç½‘ç»œèµ„æº--></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.baidu.com<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/ss.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h3 id="åˆ—è¡¨æ ‡ç­¾">åˆ—è¡¨æ ‡ç­¾</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!--æ— åºåˆ—è¡¨:                        type:å¯ä»¥è®¾ç½®åˆ—è¡¨å‰å›¾æ ‡çš„æ ·å¼   type="square"                        å¦‚æœæƒ³è¦æ›´æ¢å›¾æ ‡æ ·å¼ï¼Œéœ€è¦å€ŸåŠ©cssæŠ€æœ¯ï¼š style="list-style:url(img/act.jpg) ;"                --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>èµ·åºŠä»¥åéœ€è¦åšçš„äº‹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>square<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>ççœ¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>ç©¿è¡£æœ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>ä¸Šå•æ‰€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>åƒæ—©é¥­<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>æ´—æ¼±<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>å‡ºé—¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!--æœ‰åºåˆ—è¡¨:                        type:å¯ä»¥è®¾ç½®åˆ—è¡¨çš„æ ‡å·ï¼š1,a,A,i,I                        start:è®¾ç½®èµ·å§‹æ ‡å·                --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>å­¦ä¹ javaçš„é¡ºåº<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>A<span class="token punctuation">"</span></span> <span class="token attr-name">start</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>JAVASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>ORACLE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>MYSQL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>HTML<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>CSS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>JS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h3 id="è¡¨æ ¼æ ‡ç­¾">è¡¨æ ¼æ ‡ç­¾</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!--è¡¨æ ¼ï¼š4è¡Œ4åˆ—                        table:è¡¨æ ¼                        tr:è¡Œ                        td:å•å…ƒæ ¼                        th:ç‰¹æ®Šå•å…ƒæ ¼ï¼šè¡¨å¤´æ•ˆæœï¼šåŠ ç²—ï¼Œå±…ä¸­                        é»˜è®¤æƒ…å†µä¸‹è¡¨æ ¼æ˜¯æ²¡æœ‰è¾¹æ¡†çš„ï¼Œé€šè¿‡å±æ€§æ¥å¢åŠ è¡¨æ¡†ï¼š                        border:è®¾ç½®è¾¹æ¡†å¤§å°                        cellspacingï¼šè®¾ç½®å•å…ƒæ ¼å’Œè¾¹æ¡†ä¹‹é—´çš„ç©ºéš™                        align="center"  è®¾ç½®å±…ä¸­                        background è®¾ç½®èƒŒæ™¯å›¾ç‰‡ background="img/ss.jpg"                        bgcolor :è®¾ç½®èƒŒæ™¯é¢œè‰²                        rowspan:è¡Œåˆå¹¶                        colspanï¼šåˆ—åˆå¹¶                --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1px<span class="token punctuation">"</span></span> <span class="token attr-name">cellspacing</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0px<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400px<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>300px<span class="token punctuation">"</span></span> <span class="token attr-name">bgcolor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>darkseagreen<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">bgcolor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bisque<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>å­¦å·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>å§“å<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>å¹´çºª<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>æˆç»©<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>ä¸½ä¸½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>19<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">rowspan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>90.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>2006<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>3007<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>å°æ˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>ç»“æœï¼š</p><img src="HTML/20210713191848.png" alt="image-20210713191835355" style="zoom: 67%;" /><h2 id="æ¡†æ¶">æ¡†æ¶</h2><h3 id="å†…åµŒæ¡†æ¶">å†…åµŒæ¡†æ¶</h3><p>å†…åµŒæ¡†æ¶æ˜¯ç”¨äºåœ¨ç½‘é¡µä¸­åµŒå…¥ä¸€ä¸ªç½‘é¡µå¹¶è®©å®ƒåœ¨ç½‘é¡µä¸­æ˜¾ç¤º.<br>æ·»åŠ å†…åµŒæ¡†æ¶çš„è¯­æ³•:</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span> URL <span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!--URL --- æŒ‡å®šç‹¬ç«‹ç½‘é¡µçš„è·¯å¾„--></span></code></pre><h4 id="å®ä¾‹ä¸€ï¼šå±•ç¤ºå•†å“">å®ä¾‹ä¸€ï¼šå±•ç¤ºå•†å“</h4><ul><li><p>é¦–é¡µ</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>é¦–é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>éŸ³ä¹å¯¼èˆª.html<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>700px<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30%<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å±•ç¤ºé¡µé¢.html<span class="token punctuation">"</span></span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iframe_my<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>700px<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>67%<span class="token punctuation">"</span></span>  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/è‚†æ— å¿Œæƒ®.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></li><li><p>ç›®å½•é¡µ</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>éŸ³ä¹å¯¼èˆª<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/è‚†æ— å¿Œæƒ®.png<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iframe_my<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è‚†æ— å¿Œæƒ® ---è–›ä¹‹è°¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/æ¢¦ä¼´.png<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iframe_my<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ¢¦ä¼´ ---ææ‚¦å›<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/stay.png<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iframe_my<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>stay ---The kid LAROL/Justin Bieber<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/Blue&amp;Grey.png<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iframe_my<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Blue&amp;Grey ---BTS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></li><li><p>å±•ç¤ºé¡µ</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        è¿™æ˜¯å±•ç¤ºåˆ—è¡¨    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="HTML/20210713203134.png" alt="image-20210713203134473" style="zoom: 33%;" /></li></ul><h4 id="å®ä¾‹äºŒï¼šé‚®ç®±">å®ä¾‹äºŒï¼šé‚®ç®±</h4><h5 id="ç™»å½•é¦–é¡µ">ç™»å½•é¦–é¡µ</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cornflowerblue<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>3<span class="token punctuation">"</span></span> <span class="token attr-name">face</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é»‘ä½“<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç”¨æˆ·å<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>å¯†<span class="token entity named-entity" title="&emsp;">&amp;emsp;</span>ç <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é‚®ç®±é¦–é¡µ.html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="HTML/20210713211204.png" alt="image-20210713211204526" style="zoom:50%;" /><h5 id="é‚®ç®±é¡µ">é‚®ç®±é¡µ</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--é‚®ç®±ä¸Šä¾§çš„é¡µé¢--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é‚®ç®±ä¸Šä¾§.html<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100px<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>middle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--é‚®ç®±å·¦ä¾§é¡µé¢--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é‚®ç®±å·¦ä¾§.html<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500px<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--é‚®ç®±å³ä¾§é¡µé¢--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é‚®ç®±å³ä¾§.html<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>if1<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>78%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500px<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>ä¸Šä¾§</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blueviolet<span class="token punctuation">"</span></span> <span class="token attr-name">face</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é»‘ä½“<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>                æ¬¢è¿æ¥åˆ°TeaSea33çš„é‚®ç®±ï¼ï¼ï¼            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>å·¦ä¾§</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cornflowerblue<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token attr-name">face</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é»‘ä½“<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/å†™ä¿¡.png<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>if1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        å†™ä¿¡                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/æ”¶ä¿¡ç®±.png<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>if1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        æ”¶ä¿¡ç®±                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/åƒåœ¾ç®±.png<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>if1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        åƒåœ¾ç®±                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>å³ä¾§</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        å±•ç¤ºé¡µé¢    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœ</p><img src="HTML/20210713211612.png" alt="image-20210713211612138" style="zoom: 25%;" /><h3 id="æ¡†æ¶é›†åˆ">æ¡†æ¶é›†åˆ</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--æ¡†æ¶é›†åˆï¼šå’Œbodyæ˜¯å¹¶åˆ—çš„æ¦‚å¿µï¼Œä¸è¦å°†æ¡†æ¶é›†åˆæ”¾å…¥bodyä¸­--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>frameset</span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20%,*,30%<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>frame</span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>frameset</span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30%,40%,*<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>frame</span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>frame</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index.html<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>frame</span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>frameset</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>frameset</span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50%,*<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>frame</span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>frame</span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>frameset</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>frameset</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>å°†ä¸Šé¢çš„é¡µé¢æ”¹ä¸º</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>frameset</span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20%,*<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>frame</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é‚®ç®±ä¸Šä¾§.html<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100px<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>middle<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>frameset</span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30%,*<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>frame</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é‚®ç®±å·¦ä¾§.html<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500px<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>frame</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é‚®ç®±å³ä¾§.html<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>if1<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>78%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500px<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>frameset</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>frameset</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="Formè¡¨å•">Formè¡¨å•</h2><p>â€‹è¡¨å•åœ¨ Web ç½‘é¡µä¸­ç”¨æ¥ç»™è®¿é—®è€…å¡«å†™ä¿¡æ¯ï¼Œä»è€Œèƒ½é‡‡é›†å®¢æˆ·ç«¯ä¿¡æ¯ï¼Œä½¿ç½‘é¡µå…·æœ‰äº¤äº’çš„åŠŸèƒ½ã€‚ä¸€èˆ¬æ˜¯å°†è¡¨å•è®¾è®¡åœ¨ä¸€ä¸ªHtml æ–‡æ¡£ä¸­ï¼Œå½“ç”¨æˆ·å¡«å†™å®Œä¿¡æ¯ååš**æäº¤(submit)**æ“ä½œï¼Œäºæ˜¯è¡¨å•çš„å†…å®¹å°±ä»å®¢æˆ·ç«¯çš„æµè§ˆå™¨ä¼ é€åˆ°æœåŠ¡å™¨ä¸Šï¼Œç»è¿‡æœåŠ¡å™¨ä¸Šç¨‹åºå¤„ç†åï¼Œå†å°†ç”¨æˆ·æ‰€éœ€ä¿¡æ¯ä¼ é€å›å®¢æˆ·ç«¯çš„æµè§ˆå™¨ä¸Šï¼Œè¿™æ ·ç½‘é¡µå°±å…·æœ‰äº†äº¤äº’æ€§ã€‚è¿™é‡Œæˆ‘ä»¬åªè®²æ€æ ·ä½¿ç”¨Html æ ‡å¿—æ¥è®¾è®¡è¡¨å•ã€‚<br>â€‹æ‰€æœ‰çš„ç”¨æˆ·è¾“å…¥å†…å®¹çš„åœ°æ–¹éƒ½ç”¨è¡¨å•æ¥å†™ï¼Œå¦‚ç™»å½•æ³¨å†Œã€æœç´¢æ¡†ã€‚<br>â€‹ä¸€ä¸ªè¡¨å•ä¸€èˆ¬åº”è¯¥åŒ…å«ç”¨æˆ·å¡«å†™ä¿¡æ¯çš„è¾“å…¥æ¡†,æäº¤æŒ‰é’®ç­‰ï¼Œè¿™äº›è¾“å…¥æ¡†,æŒ‰é’®å«åšæ§ä»¶,è¡¨å•å¾ˆåƒå®¹å™¨,å®ƒèƒ½å¤Ÿå®¹çº³å„ç§å„æ ·çš„æ§ä»¶ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">actionï¼"url"</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>get|post</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myform<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>-nameï¼šè¡¨å•æäº¤æ—¶çš„åç§°-actionï¼šæäº¤åˆ°çš„åœ°å€-methodï¼šæäº¤æ–¹å¼ï¼Œæœ‰getå’Œpostä¸¤ç§ï¼Œé»˜è®¤ä¸ºget</code></pre><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--å®šä¹‰formè¡¨å•ã€1ã€‘actionå±æ€§åœ°å€æ ä¿¡æ¯ï¼šhttp://127.0.0.1:8020/Formè¡¨å•/aaa?username=admin&amp;pwd=chcsiuï¼Ÿä¹‹å‰æ˜¯æäº¤çš„èµ„æºçš„ç›®çš„åœ°å€http:ä¿¡æ¯äº¤äº’éµç…§httpåè®®127.0.0.1:ä»£è¡¨æœ¬æœºçš„IPåœ°å€8020:ç«¯å£å·---HBuilderå†…ç½®æœåŠ¡å™¨çš„ç«¯å£å·Formè¡¨å•:æŒ‡çš„æ˜¯ä½ é¡¹ç›®çš„åå­—PS:æµè§ˆå™¨çš„åœ°å€æ ä¸æ”¯æŒä¸­æ–‡ï¼Œéƒ½ä¼šè½¬ä¸ºç¼–ç ä¼ é€ï¼Œå¦‚æœåœ¨åœ°å€æ çœ‹åˆ°ä¸­æ–‡ï¼Œåªæ˜¯å½“å‰æµè§ˆå™¨ç»™çš„ä¸€ä¸ªå‹å¥½å±•ç¤ºï¼Ÿä¹‹åæ˜¯æäº¤çš„å…·ä½“æ•°æ®username=admin&amp;pwd=chcsiuæˆ‘ä»¬å†™çš„æ–‡æœ¬æ¡†å’Œå¯†ç æ¡†éƒ½è¦åŠ å…¥ä¸€ä¸ªå±æ€§ï¼šnameç„¶ånameå±æ€§å’Œå…·ä½“å½•å…¥çš„ä¿¡æ¯ä¼šæ‹¼æˆä¸€ä¸ªé”®å€¼å¯¹çš„å½¢å¼å¤šä¸ªé”®å€¼å¯¹ä¹‹é—´ï¼Œç”¨&amp;ç¬¦å·è¿›è¡Œæ‹¼æ¥PS:åªæœ‰formè¡¨å•ä¸­çš„å†…å®¹æ‰ä¼šè¢«æ”¶é›†å¹¶æäº¤ã€2ã€‘ methodå±æ€§ ï¼ˆé»˜è®¤æƒ…å†µä¸‹å€¼ä¸ºgetï¼‰get æäº¤çš„æ•°æ®å¯è§ ä¸å®‰å…¨ æäº¤æ•°æ®é•¿åº¦æœ‰é™åˆ¶ æ•ˆç‡é«˜post æäº¤çš„æ•°æ®ä¸å¯è§ å®‰å…¨ æäº¤çš„æ•°æ® æ•ˆç‡ä½--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aaa<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç”¨æˆ·å ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>å¯†ç ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pwd<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><span class="token comment">&lt;!--æäº¤æŒ‰é’®--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>ç”¨æˆ·å2ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="HTML/20210714093952.png" alt="image-20210714093951886" style="zoom:33%;" /> <h4 id="å®ä¾‹ï¼šæ¨¡ä»¿ç™¾åº¦æœç´¢">å®ä¾‹ï¼šæ¨¡ä»¿ç™¾åº¦æœç´¢</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>ç™¾åº¦ä¸€ä¸‹ä½ å°±çŸ¥é“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span> <span class="token attr-name">sizes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>any<span class="token punctuation">"</span></span> <span class="token attr-name">mask</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>//www.baidu.com/img/baidu_85beaf5496f291521eb75ba38eacbd87.svg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--ç™¾åº¦çš„è¿æ¥https://www.baidu.com/s(æ‰¾åˆ°action)?...&amp;wd=java&amp;... (æ‰¾åˆ°æ–‡æœ¬æ¡†å)--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.baidu.com/s<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>get<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!--æ–‡æœ¬æ¡†--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wd<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token comment">&lt;!--æäº¤æŒ‰é’®--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç™¾åº¦ä¸€ä¸‹<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h3 id="è¡¨å•å…ƒç´ ">è¡¨å•å…ƒç´ </h3><h4 id="1-æ–‡æœ¬æ¡†">1. æ–‡æœ¬æ¡†</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--æ–‡æœ¬æ¡†inputæ ‡ç­¾ä½¿ç”¨å¾ˆå¹¿æ³›ï¼Œé€šè¿‡typeå±æ€§çš„ä¸åŒæ€§ï¼Œæ¥è¡¨ç°ä¸é€šè¿‡çš„å½¢æ€ï¼Œè¡¨å•å…ƒç´ å¿…é¡»æœ‰ä¸€ä¸ªå±æ€§ï¼šnameæœ‰äº†nameæ‰å¯ä»¥æäº¤ä¹¦æ•°æ®ï¼Œæ‰å¯ä»¥é‡‡é›†æ•°æ®ï¼Œç„¶åæäº¤çš„æ—¶å€™ä»¥é”®å€¼å¯¹çš„å½¢å¼æ‹¼åˆ°ä¸€èµ·ã€‚value:å°±æ˜¯æ–‡æœ¬æ¡†ä¸­çš„å…·ä½“å†…å®¹;é”®å€¼å¯¹ï¼šname=valueçš„å½¢å¼placeholder--é»˜è®¤æç¤ºè¯­readonly--åªè¯»ï¼šæ— æ³•æ›´æ”¹å†™æ³•ï¼šreadonly="true"ï¼›readonlyï¼›readonly="readonly"disabled--ç¦ç”¨ï¼šä¸èƒ½æäº¤--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uname<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è¯·è¾“å…¥èº«ä»½è¯ä¿¡æ¯<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uname<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>123<span class="token punctuation">"</span></span> <span class="token attr-name">readonly</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uname<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>123<span class="token punctuation">"</span></span> <span class="token attr-name">readonly</span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="HTML/20210714194452.png" style="zoom: 50%;" /><h4 id="2-å¯†ç æ¡†">2. å¯†ç æ¡†</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--å¯†ç æ¡†--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pwd<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="HTML/20210714194418.png" alt="image-20210714194418873" style="zoom:50%;" /><h4 id="3-æŒ‰é’®">3. æŒ‰é’®</h4><h5 id="æ™®é€šæŒ‰é’®">æ™®é€šæŒ‰é’®</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--æ™®é€šæŒ‰é’®ï¼šæ²¡æœ‰ä»€ä¹ˆæ•ˆæœå°±æ˜¯å¯ä»¥ç‚¹å‡»ï¼Œjså¯ä»¥åŠ å…¥äº‹ä»¶--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ™®é€š<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="HTML/20210714195057.png" alt="image-20210714195057422" style="zoom:50%;" /><h5 id="å•é€‰æŒ‰é’®">å•é€‰æŒ‰é’®</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--å•é€‰æŒ‰é’®æ³¨æ„ï¼šä¸€ç»„å½“é€‰æŒ‰é’®ï¼Œå¿…é¡»é€šè¿‡nameå±æ€§æ¥æ§åˆ¶ï¼Œè®©å®ƒä»¬åœ¨ä¸€ä¸ªåˆ†ç»„ä¸­ï¼Œç„¶ååœ¨ä¸€ä¸ªåˆ†ç»„é‡Œåªèƒ½é€‰æ‹©ä¸€ä¸ªæ­£å¸¸çŠ¶æ€ä¸‹ï¼Œæäº¤æ•°æ®ä¸º:gender=on,åå°ä¸èƒ½åŒºåˆ†ä½ æäº¤çš„æ•°æ®--></span>æ€§åˆ«ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">checked</span><span class="token punctuation">/></span></span>ç”·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>å¥³<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="HTML/20210714194743.png" alt="image-20210714194743474" style="zoom:50%;" /><h5 id="å¤šé€‰æŒ‰é’®">å¤šé€‰æŒ‰é’®</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--å¤šé€‰æŒ‰é’®å¿…é¡»é€šè¿‡nameå±æ€§æ¥æ§åˆ¶ï¼Œè®©å®ƒä»¬åœ¨ä¸€ä¸ªåˆ†ç»„ä¸­ï¼Œç„¶ååœ¨ä¸€ä¸ªåˆ†ç»„é‡Œå¯ä»¥é€‰æ‹©å¤šä¸ªä¸åŒçš„é€‰é¡¹çš„valueå€¼è¦æ§åˆ¶ä¸ºä¸åŒï¼Œè¿™æ ·åå°æ¥æ”¶å°±å¯ä»¥åŒºåˆ†äº†å¤šä¸ªé€‰é¡¹æäº¤çš„æ—¶å€™ï¼Œé”®å€¼å¯¹ç”¨&amp;ç¬¦å·è¿›è¡Œæ‹¼æ¥ï¼šä¾‹å¦‚ä¸‹ï¼šfavlan=1&amp;favlan=3--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>favlan<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>favlan<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>python<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>favlan<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>php<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>favlan<span class="token punctuation">"</span></span><span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>c#</code></pre><p>æ•ˆæœï¼š</p><img src="HTML/20210714202438.png" alt="image-20210714202438190" style="zoom:50%;" /><h5 id="å›¾ç‰‡æŒ‰é’®">å›¾ç‰‡æŒ‰é’®</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--ç‰¹æ®ŠæŒ‰é’®ï¼šå›¾ç‰‡æŒ‰é’® ç‚¹å‡»æ˜¯å¯ä»¥æäº¤çš„--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/1.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100px<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><h5 id="é‡ç½®æŒ‰é’®">é‡ç½®æŒ‰é’®</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--ç‰¹æ®ŠæŒ‰é’®ï¼šé‡ç½®æŒ‰é’®ï¼šå°†é¡µé¢æ¢å¤åˆ°åˆå§‹çŠ¶æ€--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reset<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><h5 id="æäº¤æŒ‰é’®">æäº¤æŒ‰é’®</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--ç‰¹æ®ŠæŒ‰é’®ï¼šæäº¤æŒ‰é’®ï¼šå…·å¤‡æäº¤åŠŸèƒ½--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><h4 id="4-ä¸‹æ‹‰åˆ—è¡¨">4.ä¸‹æ‹‰åˆ—è¡¨</h4><p>select</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--ä¸‹æ‹‰åˆ—è¡¨selected é»˜è®¤é€‰ä¸­multiple å¤šé€‰--></span>ä½ å–œæ¬¢çš„åŸå¸‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>city<span class="token punctuation">"</span></span> <span class="token attr-name">multiple</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multiple<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>---è¯·é€‰æ‹©---<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æˆéƒ½å¸‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token attr-name">selected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selected<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åŒ—äº¬å¸‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é‡åº†å¸‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å¹¿å·å¸‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="HTML/20210714211104.png" alt="image-20210714211104496" style="zoom:50%;" /><h4 id="5-å¤šè¡Œæ–‡æœ¬æ¡†">5.å¤šè¡Œæ–‡æœ¬æ¡†</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--å¤šè¡Œæ–‡æœ¬æ¡†åˆ©ç”¨cssæ ·å¼æ¥æ§åˆ¶å¤§å°ä¸å¯å˜ï¼šstyle="resize: none;"--></span>è‡ªæˆ‘ä»‹ç»ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">resize</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¯·åœ¨è¿™é‡Œå¡«å†™ä¿¡æ¯ã€‚ã€‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="HTML/20210714195641.png" alt="image-20210714195641589" style="zoom: 50%;" /><h4 id="6-æ–‡ä»¶">6.æ–‡ä»¶</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--æ–‡ä»¶--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ–‡ä»¶<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="HTML/20210714211148.png" alt="image-20210714211148820" style="zoom: 33%;" /><img src="HTML/20210714211226.png" alt="image-20210714211226032" style="zoom: 67%;" /><h4 id="7-éšè—åŸŸ">7.éšè—åŸŸ</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--éšè—åŸŸ--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hidden <span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uname<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>12324<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><p>æ•ˆæœï¼š</p><img src="HTML/20210714202249.png" alt="image-20210714202249659" style="zoom:50%;" /><h4 id="8-labelæ ‡ç­¾">8.labelæ ‡ç­¾</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--labelæ ‡ç­¾ä¸€èˆ¬ä¼šåœ¨æƒ³è¦è·å¾—ç„¦ç‚¹çš„æ ‡ç­¾ä¸ŠåŠ å…¥ä¸€ä¸ªidå±æ€§ï¼Œç„¶ålabelä¸­çš„forå±æ€§è·Ÿidé…åˆä½¿ç”¨ã€‚ç‚¹å‡»ç”¨æˆ·å å…‰æ ‡å°±ä¼šåˆ°ç”¨æˆ·åå¯¹åº”çš„æ–‡æœ¬æ¡†é‡Œé¢--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uname<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç”¨æˆ·åï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uername<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uname<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            </code></pre><h3 id="HTML5æ–°å¢">HTML5æ–°å¢</h3><h4 id="å¢åŠ æ ¡éªŒ">å¢åŠ æ ¡éªŒ</h4><pre class="language-markup" data-language="markup"><code class="language-markup">html5çš„ç±»å‹å¯ä»¥å¢åŠ æ ¡éªŒ<span class="token comment">&lt;!--email--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token comment">&lt;!--url--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token comment">&lt;!--color--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>color<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token comment">&lt;!--number:min:æœ€å°å€¼max:æœ€å¤§å€¼step:æ­¥é•¿value:é»˜è®¤å€¼ï¼šä¸€å®šåœ¨æ­¥é•¿çš„èŒƒå›´ä¸­ï¼Œå¦åˆ™ä¸èƒ½æäº¤--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span> <span class="token attr-name">min</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token attr-name">step</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token comment">&lt;!--range--></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>range<span class="token punctuation">"</span></span> <span class="token attr-name">min</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>range<span class="token punctuation">"</span></span> <span class="token attr-name">step</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>10<span class="token comment">&lt;!--date--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token comment">&lt;!--month--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>month<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token comment">&lt;!--week--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>week<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><h4 id="æ–°å¢å±æ€§">æ–°å¢å±æ€§</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--HTML5æ–°å¢å±æ€§ï¼šmultipleï¼šå¤šé€‰placehoder:é»˜è®¤æç¤ºautofocus:è‡ªåŠ¨è·å–ç„¦ç‚¹required:å¿…å¡«é¡¹--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">multiple</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multiple<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>11111<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">autofocus:</span>"autofocus"</span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token comment">&lt;!--æäº¤æŒ‰é’®--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC</title>
      <link href="/2021/06/07/JDBC/"/>
      <url>/2021/06/07/JDBC/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=4fba7310-98fa-f94b-f0b4-eb499697e4aa</cover>
      <date>Mon Jun 07 2021 09:47:10 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>å¼•å…¥</h1><h2 id="1-æ¦‚å¿µ">1. æ¦‚å¿µ</h2><p><strong>JDBC</strong>ï¼ˆJava DataBase Connectivity,  Javaæ•°æ®åº“è¿æ¥) ,æ˜¯ä¸€ç§ç”¨äºæ‰§è¡ŒSQLè¯­å¥çš„Java APIï¼Œä¸ºå¤šç§å…³ç³»æ•°æ®åº“æä¾›ç»Ÿä¸€è®¿é—®,å®ƒç”±ä¸€ç»„ç”¨Javaè¯­è¨€ç¼–å†™çš„ç±»å’Œæ¥å£ç»„æˆ</p><span id="more"></span><h2 id="2-ä¾èµ–">2. ä¾èµ–</h2><h3 id="å¯¼å…¥ä¾èµ–">å¯¼å…¥ä¾èµ–</h3><p>srcä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å‘½ålibï¼Œç„¶åæŠŠä¾èµ–åŒ…å¤åˆ¶åˆ°é‡Œé¢ï¼Œå³é”®create library</p><img src="JDBC/20210704112134.png" alt="image-20210704112134768" style="zoom:50%;" /><h3 id="ç§»é™¤ä¾èµ–">ç§»é™¤ä¾èµ–</h3><p>setting â€”â€”&gt;project structure</p><img src="JDBC/20210704112049.png" alt="image-20210704112049391" style="zoom: 33%;" /><h2 id="3-å®ä¾‹">3. å®ä¾‹</h2><h4 id="1ï¼šåŠ è½½ä¸€ä¸ªDriveré©±åŠ¨">1ï¼šåŠ è½½ä¸€ä¸ªDriveré©±åŠ¨</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//1.åŠ è½½é©±åŠ¨ Driver</span><span class="token class-name">Driver</span> driver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="2ï¼šåˆ›å»ºæ•°æ®åº“è¿æ¥ï¼ˆConnectionï¼‰">2ï¼šåˆ›å»ºæ•°æ®åº“è¿æ¥ï¼ˆConnectionï¼‰</h4><ul><li><p>url</p><p>æ ¼å¼â€”â€”åè®®**://<strong>ip</strong>:<strong>ç«¯å£/èµ„æºè·¯å¾„</strong>?<strong>å‚æ•°å</strong>=<strong>å‚æ•°å€¼</strong>&amp;<strong>å‚æ•°å=å‚æ•°å€¼</strong>&amp;â€¦**</p><ul><li>åè®®         jdbc:mysql</li><li>IP          127.0.0.1/localhost</li><li>ç«¯å£å·       3306<ul><li>æ•°æ®åº“åå­—   mydb</li><li>å‚æ•°  useSSL(æ˜¯å¦ä½¿ç”¨SSL)ã€useUnicode(æ˜¯å¦ä½¿ç”¨unicod)ã€characterEncoding(ä½¿ç”¨unicodeç±»å‹)ã€serverTimezone(æ—¶åŒº)</li></ul></li></ul></li><li><p>user</p></li><li><p>password</p></li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//3.è·å¾—é“¾æ¥</span><span class="token comment">/** ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šurlï¼Œuserï¼Œpassword* */</span><span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://127.0.0.1:3306/mytestdb?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/ShangHai"</span><span class="token punctuation">;</span><span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span><span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span><span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>user<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="3ï¼šåˆ›å»ºSQLå‘½ä»¤å‘é€å™¨Statement">3ï¼šåˆ›å»ºSQLå‘½ä»¤å‘é€å™¨Statement</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//4.è·å¾—è¯­å¥å¯¹è±¡statement</span><span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="4ï¼šé€šè¿‡Statementå‘é€SQLå‘½ä»¤å¹¶å¾—åˆ°ç»“æœ">4ï¼šé€šè¿‡Statementå‘é€SQLå‘½ä»¤å¹¶å¾—åˆ°ç»“æœ</h4><p><strong>statement.executeUpdate</strong> åœ¨sqlæ“ä½œinsertã€deleteã€updateæ—¶ä½¿ç”¨</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//5.æ‰§è¡ŒSQLè¯­å¥ï¼Œè¿”å›ç»“æœ</span><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into dept values(50,'æ•™å­¦éƒ¨','BeiJing')"</span><span class="token punctuation">;</span><span class="token keyword">int</span> row <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//insert delete update</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½±å“è¡Œæ•°ä¸º"</span><span class="token operator">+</span> row<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="5ï¼šå…³é—­æ•°æ®åº“èµ„æºResultSet-Statement-Connection">5ï¼šå…³é—­æ•°æ®åº“èµ„æºResultSet  Statement  Connection</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//6.é‡Šæ”¾èµ„æº</span>statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç»“æœ</p><img src="JDBC/20210704123012.png" alt="image-20210704123012385" style="zoom:50%;" /><h2 id="4-å¸¸è§çš„å¼‚å¸¸åˆ†æ">4. å¸¸è§çš„å¼‚å¸¸åˆ†æ</h2><p>MySQL8ä¸­æ•°æ®åº“è¿æ¥çš„å››ä¸ªå‚æ•°æœ‰ä¸¤ä¸ªå‘ç”Ÿäº†å˜åŒ–</p><p>String driver = â€œcom.mysql.cj.jdbc.Driverâ€;</p><p>String url = â€œjdbc:mysql://127.0.0.1:3306/mydb?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=Asia/Shanghaiâ€;</p><p>æˆ–è€…String url = â€œâ€¦serverTimezone=GMT%2B8â€;</p><ul><li><strong>é”™è¯¯1ï¼šException in thread â€œmainâ€ java.lang.ClassNotFoundException: com.mysql.jdbc2.Driver</strong></li></ul><p>åŸå› ï¼šæ²¡æœ‰æ·»åŠ jaråŒ…æˆ–è€…com.mysql.jdbc2.Driverè·¯å¾„é”™è¯¯</p><ul><li><strong>é”™è¯¯2ï¼šException in thread â€œmainâ€ java.sql.SQLException:No suitable driver found for jbdc:mysql://127.0.0.1:3306/stumgr</strong></li></ul><p>åŸå› ï¼šurlé”™è¯¯</p><ul><li><strong>é”™è¯¯3ï¼šException in thread â€œmainâ€ java.sql.SQLException:</strong></li></ul><p>Access denied for user â€˜rootâ€™@â€˜localhostâ€™ (using password: YES)</p><p>åŸå› ï¼šç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯</p><ul><li><strong>é”™è¯¯4ï¼šException in thread â€œmainâ€ com.mysql.jdbc.exceptions</strong></li><li><img src="JDBC/20210705111903.png" alt="image-20210704153100091"></li></ul><p>.jdbc4.MySQLIntegrityConstraintViolationException:Duplicate entry â€˜90â€™ for key â€˜PRIMARYâ€™</p><p>åŸå› ï¼šä¸»é”®å†²çª</p><ul><li><p><strong>é”™è¯¯5ï¼šPublic Key Retrieval is not allowed</strong></p><p>å¦‚æœç”¨æˆ·ä½¿ç”¨ sha256_password è®¤è¯ï¼Œå¯†ç åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¿…é¡»ä½¿ç”¨ TLS åè®®ä¿æŠ¤ï¼Œä½†æ˜¯å¦‚æœ RSA å…¬é’¥ä¸å¯ç”¨ï¼Œå¯ä»¥ä½¿ç”¨æœåŠ¡å™¨æä¾›çš„å…¬é’¥ï¼›å¯ä»¥åœ¨è¿æ¥ä¸­é€šè¿‡ ServerRSAPublicKeyFile æŒ‡å®šæœåŠ¡å™¨çš„ RSA å…¬é’¥ï¼Œæˆ–è€…AllowPublicKeyRetrieval=Trueå‚æ•°ä»¥å…è®¸å®¢æˆ·ç«¯ä»æœåŠ¡å™¨è·å–å…¬é’¥ï¼›ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ AllowPublicKeyRetrieval=Trueå¯èƒ½ä¼šå¯¼è‡´æ¶æ„çš„ä»£ç†é€šè¿‡ä¸­é—´äººæ”»å‡»(MITM)è·å–åˆ°æ˜æ–‡å¯†ç ï¼Œæ‰€ä»¥é»˜è®¤æ˜¯å…³é—­çš„ï¼Œå¿…é¡»æ˜¾å¼å¼€å¯<br>åœ¨jdbcè¿æ¥æ·»åŠ ä¸Šå‚æ•°<strong>allowPublicKeyRetrieval=true</strong>å³å¯ï¼Œæ³¨æ„å‚æ•°é—´ç”¨&amp;</p></li></ul><p>åŠ å‚æ•°allowPublicKeyRetrieval=true</p><h1>1. é©±åŠ¨çš„åŠ è½½</h1><ul><li><p>åœ¨æŸ¥çœ‹Driverçš„æºä»£ç æ—¶æˆ‘ä»¬å‘ç°,è¯¥ç±»å†…éƒ¨æœ‰ä¸€ä¸ªé™æ€ä»£ç å—,åœ¨ä»£ç å—ä¸­å°±æ˜¯åœ¨å®ä¾‹åŒ–ä¸€ä¸ªé©±åŠ¨å¹¶åœ¨é©±åŠ¨ä¸­å¿ƒæ³¨å†Œ.é™æ€ä»£ç å—ä¼šåœ¨ç±»è¿›å…¥å†…å­˜æ—¶æ‰§è¡Œ,ä¹Ÿå°±æ˜¯è¯´,æˆ‘ä»¬åªè¦è®©è¯¥ç±»å­—èŠ‚ç è¿›å…¥å†…å­˜,å°±ä¼šè‡ªåŠ¨å®Œæˆæ³¨å†Œ,ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»new</p><img src="JDBC/20210704145529.png" alt="image-20210704145529583" style="zoom:50%;" /><img src="JDBC/20210704145550.png" alt="image-20210704145550511" style="zoom: 50%;" /></li><li><p>å¯ä»¥é€šè¿‡åå°„æ¥åŠ è½½é©±åŠ¨</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//å¯ä»¥é€šè¿‡åå°„æ¥åŠ è½½é©±åŠ¨</span><span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å› ä¸ºDriverç±»é‡Œé¢çš„é™æ€ä»£ç å—å·²ç»æ³¨å†Œäº†é©±åŠ¨ï¼Œå°±<strong>ä¸ç”¨å†å•ç‹¬æ³¨å†Œé©±åŠ¨äº†</strong></p></li><li><p>æŸ¥çœ‹jaråŒ…å‘ç°,jaråŒ…ä¸­å·²ç»é»˜è®¤é…ç½®äº†é©±åŠ¨ç±»çš„åŠ è½½ï¼Œå…¶å®ä¸éœ€è¦æ‰‹åŠ¨åŠ è½½ï¼Œç¨‹åºè¿è¡Œçš„æ—¶å€™ä¹Ÿä¼šè‡ªåŠ¨åŠ è½½jaråŒ…é‡Œçš„ç±»</p><img src="JDBC/20210704150456.png" alt="image-20210704150456396" style="zoom:67%;" /></li></ul><h1>2. æ·»åŠ å¼‚å¸¸å¤„ç†</h1><img src="JDBC/20210704153100.png" alt="image-20210704153100091" style="zoom:67%;" /><p>å°†éœ€è¦catchçš„å¼‚å¸¸éƒ¨åˆ† ç”¨å¿«æ·é”®<strong>ctrl+alt+T</strong>é€‰æ‹©</p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20210705110755222.png" alt="image-20210705110755222" style="zoom:50%;" /><p>æŠŠæœ€åå¤„ç†æ”¾åœ¨finallyé‡Œé¢ï¼Œåˆ†åˆ«åŠ ä¸Štry catch</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestJDBC2</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> driver<span class="token operator">=</span><span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">;</span><span class="token comment">//</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://127.0.0.1:3306/mytestdb?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true"</span><span class="token punctuation">;</span><span class="token comment">//</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> user<span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>user<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>            statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into dept values(50,'æ•™å­¦éƒ¨','BeiJing')"</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> row <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½±å“è¡Œæ•°ä¸º"</span><span class="token operator">+</span> row<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> statement<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">//statementå¦‚æœåˆ›å»ºå¤±è´¥å°±ä¸éœ€è¦å…³äº†</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// åŒä¸Š</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h1>3. JDBCå®ŒæˆCURD</h1><h3 id="åˆ é™¤å’Œä¿®æ”¹æ“ä½œ">åˆ é™¤å’Œä¿®æ”¹æ“ä½œ</h3><p>å’Œä¸Šé¢å®ä¾‹ä¸€æ ·ï¼Œåªéœ€è¦æ”¹sqlè¯­å¥</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"delete from emp where deptno = 20 "</span><span class="token punctuation">;</span></code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update dept set dname = 'æ€»éƒ¨',loc='BeiJing' where deptno = 30 "</span><span class="token punctuation">;</span></code></pre><h3 id="æŸ¥è¯¢æ“ä½œ">æŸ¥è¯¢æ“ä½œ</h3><ul><li>ä½¿ç”¨çš„æ–¹æ³•æ˜¯executeQuery()ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªç»“æœé›†å³è¡¨æ ¼è¢«æŠ½è±¡æˆçš„å¯¹è±¡ <strong>resultSet</strong></li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from emp"</span><span class="token punctuation">;</span><span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre><ul><li><p>å¾ªç¯è·å¾—æ¯ä¸€åˆ—çš„æ•°æ®ï¼š</p><p><strong>resultset.next()</strong>ï¼šè¿”å›å½“å‰æ¸¸æ ‡æ‰€æŒ‡çš„è¡Œæ•°æ®æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºä¸ä¸ºç©ºï¼Œè¿”å›trueï¼Œæ¸¸æ ‡å‘ä¸‹ç§»åŠ¨ï¼›ä¸ºç©ºåˆ™è¿”å›falseï¼Œæ¸¸æ ‡ä¸ç§»åŠ¨</p></li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//åˆ¤æ–­æ¸¸æ ‡æ˜¯å¦ä¸ºç©º</span>    <span class="token keyword">int</span> empno <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"empno"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> ename <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"ename"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> job <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"job"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token constant">MGR</span> <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"MGR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Date</span> date <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token string">"hiredate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> sal <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"SAL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> comm <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"comm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> deptno <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"deptno"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>empno<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>ename<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>job<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span><span class="token constant">MGR</span><span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>date<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>sal<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>comm<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>deptno<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ps: è·å¾—çš„dateå¯¹è±¡ä¸æ˜¯utilåŒ…çš„ï¼Œè€Œæ˜¯sqlåŒ…çš„å¯¹è±¡</p><ul><li><p>å…³é—­resultSetï¼š</p><p>è™½ç„¶ Statement å…³é—­ã€é‡æ–°æ‰§è¡Œæˆ–ç”¨äºä»å¤šç»“æœåºåˆ—ä¸­è·å–ä¸‹ä¸€ä¸ªç»“æœæ—¶ï¼ŒResultSetå°†è¢«è‡ªåŠ¨å…³é—­ï¼Œä½†æ˜¯ä¸€ä¸ªå¥½çš„ç¼–ç¨‹ä¹ æƒ¯å¾ˆé‡è¦å˜›ï¼Œè¯¥å…³çš„è¿˜æ˜¯è¦å…³ã€‚</p></li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> resultSet<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>              <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                  resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                  e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">&#125;</span>          <span class="token punctuation">&#125;</span></code></pre><h4 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>chs<span class="token punctuation">.</span>test01</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token static">forName</span></span><span class="token punctuation">;</span><span class="token comment">/** * @author: ChanHuiShan * @date: 2021-07-05 - 07 - 05 - 16:28 * @description: com.chs.test01 * @version: 1.0 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestJDBC4</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> driver <span class="token operator">=</span> <span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span>  <span class="token keyword">static</span> <span class="token class-name">String</span> url <span class="token operator">=</span><span class="token string">"jdbc:mysql://127.0.0.1:3306/mytestdb?"</span> <span class="token operator">+</span>            <span class="token string">"useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;"</span> <span class="token operator">+</span>            <span class="token string">"serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">testQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//1.åŠ è½½é©±åŠ¨</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//2.å»ºç«‹è¿æ¥</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>user<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//3.é€šè¿‡è¿æ¥æ­å»ºstatement</span>            statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//4.æ“ä½œsql</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from emp"</span><span class="token punctuation">;</span>            resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">int</span> empno <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"empno"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> ename <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"ename"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> job <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"job"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> <span class="token constant">MGR</span> <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"MGR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Date</span> date <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token string">"hiredate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">double</span> sal <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"SAL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">double</span> comm <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"comm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> deptno <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"deptno"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>empno<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>ename<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>job<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span><span class="token constant">MGR</span><span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>date<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>sal<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>comm<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>deptno<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">finally</span><span class="token punctuation">&#123;</span>            <span class="token comment">//å…³é—­resultSet</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> resultSet<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> statement<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç»“æœï¼š</p><img src="JDBC/20210705182201.png" alt="image-20210705182200681" style="zoom:50%;" /><h3 id="åˆ›å»ºå®ä½“ç±»å°è£…ç»“æœé›†">åˆ›å»ºå®ä½“ç±»å°è£…ç»“æœé›†</h3><p>â€‹è¯¥å®ä½“ç±»æ˜¯å’Œæ•°æ®è¡¨æ ¼åç§°å’Œå­—æ®µæ˜¯ä¸€ä¸€å¯¹åº”çš„ç±»ï¼Œè¯¥ç±»ä¸»è¦ç”¨å¤„æ˜¯å­˜å‚¨é‡æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®ï¼Œé™¤æ­¤ä¹‹å¤–è¯¥ç±»æ— å…¶ä»–åŠŸèƒ½ã€‚</p><h4 id="Emp-java">Emp.java</h4><p>è¦æ±‚ï¼š</p><ul><li>ç±»åå’Œè¡¨åä¿æŒä¸€è‡´</li><li>å±æ€§ä¸ªæ•°å’Œè¡¨çš„åˆ—æ•°ä¿æŒä¸€è‡´</li><li>å±æ€§çš„æ•°æ®ç±»å‹å’Œåˆ—çš„æ•°æ®ç±»å‹ä¿æŒä¸€è‡´</li><li>å±æ€§åå’Œè¡¨æ ¼åˆ—åä¿æŒä¸€è‡´</li><li>æ‰€æœ‰çš„å±æ€§éƒ½æ˜¯ç§æœ‰çš„ ï¼ˆå‡ºäºå®‰å…¨è€ƒè™‘ï¼‰</li><li>å®ä½“ç±»çš„å±æ€§æ¨èå†™æˆåŒ…è£…ç±» ï¼ˆä¾‹å¦‚intç±»å‹ä¸èƒ½èµ‹å€¼ä¸ºnullï¼‰</li><li>æ—¥æœŸç±»å‹å»ºè®®ä½¿ç”¨java.util.Date(å› ä¸ºæ˜¯çˆ¶ç±»,æ¯”è¾ƒæ–¹ä¾¿ä½¿ç”¨å¤šæ€ï¼‰</li><li>æ‰€æœ‰çš„å±æ€§éƒ½è¦æœ‰getå’Œsetæ–¹æ³•</li><li>å¿…é¡»å…·å¤‡ç©ºå‚æ„é€ å™¨</li><li>å®ä½“ç±»éœ€è¦å®ç°åºåˆ—åŒ–æ¥å£ï¼ˆmybatis åˆ†å¸ƒå¼ï¼‰</li><li>å®ä½“ç±»ä¸­å…¶ä»–æ„é€ æ–¹æ³•å¯é€‰</li><li>æ·»åŠ toStringæ–¹æ³•</li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>chs<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>scenario<span class="token punctuation">.</span>effect<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>prism<span class="token punctuation">.</span></span><span class="token class-name">PrRenderInfo</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span><span class="token comment">//æ˜¯java.sql.Dateçš„çˆ¶ç±»</span><span class="token comment">/** * @author: ChanHuiShan * @date: 2021-07-05 - 07 - 05 - 19:07 * @description: com.chs.entity * @version: 1.0 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Emp</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">&#123;</span><span class="token comment">//å®ç°åºåˆ—åŒ–æ¥å£</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> empno<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> ename<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> job<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> mgr<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Date</span> hiredate<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Double</span> sal<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Double</span> comm<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> deptno<span class="token punctuation">;</span>    <span class="token comment">//å¯ä»¥æœ‰å…¶ä»–æ„é€ æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> empno<span class="token punctuation">,</span> <span class="token class-name">String</span> ename<span class="token punctuation">,</span> <span class="token class-name">String</span> job<span class="token punctuation">,</span> <span class="token class-name">Integer</span> mgr<span class="token punctuation">,</span> <span class="token class-name">Date</span> hiredate<span class="token punctuation">,</span> <span class="token class-name">Double</span> sal<span class="token punctuation">,</span> <span class="token class-name">Double</span> comm<span class="token punctuation">,</span> <span class="token class-name">Integer</span> deptno<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>empno <span class="token operator">=</span> empno<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>ename <span class="token operator">=</span> ename<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>mgr <span class="token operator">=</span> mgr<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>hiredate <span class="token operator">=</span> hiredate<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>sal <span class="token operator">=</span> sal<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>comm <span class="token operator">=</span> comm<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>deptno <span class="token operator">=</span> deptno<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//å¿…é¡»æœ‰ç©ºå‚æ„é€ å™¨</span>    <span class="token keyword">public</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//setå’Œgetæ–¹æ³•çœç•¥</span>    <span class="token comment">//toStingçœç•¥</span><span class="token punctuation">&#125;</span></code></pre><h4 id="TestJDBC-java">TestJDBC.java</h4><p>ä¿®æ”¹â€”è¿”å›çš„æ˜¯Empçš„Listé›†åˆå¯¹è±¡ï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> <span class="token function">testQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></code></pre><p>mainï¼ˆï¼‰æ–¹æ³•é‡Œé¢éå†è¾“å‡ºï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//è·å¾—æ–¹æ³•é‡Œè¿”å›çš„é›†åˆ</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> emps <span class="token operator">=</span> <span class="token function">testQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//éå†é›†åˆ</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token operator">:</span>emps<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="å®Œæ•´ä»£ç -2">å®Œæ•´ä»£ç </h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * @author: ChanHuiShan * @date: 2021-07-05 - 07 - 05 - 16:28 * @description: com.chs.test01 * @version: 1.0 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestJDBC4</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> driver <span class="token operator">=</span> <span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span>  <span class="token keyword">static</span> <span class="token class-name">String</span> url <span class="token operator">=</span><span class="token string">"jdbc:mysql://127.0.0.1:3306/mytestdb?"</span> <span class="token operator">+</span>            <span class="token string">"useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;"</span> <span class="token operator">+</span>            <span class="token string">"serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//è·å¾—æ–¹æ³•é‡Œè¿”å›çš„é›†åˆ</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> emps <span class="token operator">=</span> <span class="token function">testQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//éå†é›†åˆ</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token operator">:</span>emps<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> <span class="token function">testQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">//empå¯¹è±¡çš„é›†åˆåˆå§‹åŒ–</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>user<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>            statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from emp"</span><span class="token punctuation">;</span>            resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">int</span> empno <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"empno"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> ename <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"ename"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> job <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"job"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> <span class="token constant">MGR</span> <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"MGR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Date</span> date <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token string">"hiredate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">double</span> sal <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"SAL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">double</span> comm <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"comm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> deptno <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"deptno"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span>empno<span class="token punctuation">,</span> ename<span class="token punctuation">,</span> job<span class="token punctuation">,</span> <span class="token constant">MGR</span><span class="token punctuation">,</span> date<span class="token punctuation">,</span> sal<span class="token punctuation">,</span> comm<span class="token punctuation">,</span> deptno<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ„é€ æ¯ä¸€è¡Œæ•°æ®å¯¹è±¡</span>                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å°†æ¯ä¸€è¡Œéƒ½æ”¾å…¥é›†åˆä¸­</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">finally</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> resultSet<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> statement<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span><span class="token comment">//è¿”å›é›†åˆ</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h1>4. é¢„ç¼–è¯‘PreparedStatement</h1><h2 id="ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥æ¥é¢„é˜²SQLæ³¨å…¥æ”»å‡»">ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥æ¥é¢„é˜²SQLæ³¨å…¥æ”»å‡»</h2><p>â€‹SQLæ³¨å…¥æ”»å‡»æŒ‡çš„æ˜¯é€šè¿‡æ„å»º<strong>ç‰¹æ®Šçš„è¾“å…¥</strong>ä½œä¸º<strong>å‚æ•°</strong>ä¼ å…¥<strong>Webåº”ç”¨ç¨‹åº</strong>ï¼Œè€Œè¿™äº›è¾“å…¥å¤§éƒ½æ˜¯SQLè¯­æ³•é‡Œçš„ä¸€äº›ç»„åˆï¼Œé€šè¿‡æ‰§è¡ŒSQLè¯­å¥è¿›è€Œæ‰§è¡Œæ”»å‡»è€…æ‰€è¦çš„æ“ä½œï¼Œå…¶ä¸»è¦åŸå› æ˜¯ç¨‹åºæ²¡æœ‰ç»†è‡´åœ°è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„æ•°æ®ï¼Œè‡´ä½¿éæ³•æ•°æ®ä¾µå…¥ç³»ç»Ÿã€‚</p><h4 id="æ¨¡æ‹Ÿç™»å½•">æ¨¡æ‹Ÿç™»å½•</h4><p>åœ¨å‰å°è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œåå°åˆ¤æ–­ä¿¡æ¯æ˜¯å¦æ­£ç¡®ï¼Œå¹¶ç»™å‡ºå‰å°åé¦ˆä¿¡æ¯ï¼Œå‰å°è¾“å‡ºåé¦ˆä¿¡æ¯ã€‚</p><p>å…·ä½“å®ç°æ­¥éª¤ï¼š</p><ul><li><p>åˆ›å»ºæ•°æ®åº“è¡¨</p><img src="JDBC/20210706143739.png" style="zoom:50%;" /></li><li><p>åˆ›å»ºå®ä½“ç±»</p><img src="JDBC/20210706143810.png" alt="image-20210706143810882" style="zoom:50%;" /></li><li><p>æµ‹è¯•ç±»ï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * @author: ChanHuiShan * @date: 2021-07-06 - 07 - 06 - 14:13 * @description: com.chs.test02 * @version: 1.0 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestInjection</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> driver <span class="token operator">=</span> <span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span>  <span class="token keyword">static</span> <span class="token class-name">String</span> url <span class="token operator">=</span><span class="token string">"jdbc:mysql://127.0.0.1:3306/mytestdb?"</span> <span class="token operator">+</span>            <span class="token string">"useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;"</span> <span class="token operator">+</span>            <span class="token string">"serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Scanner</span> sc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥ç”¨æˆ·åï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> username <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥å¯†ç ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> pwd <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Account</span> account <span class="token operator">=</span> <span class="token function">getAccount</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">!=</span>account<span class="token operator">?</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•æˆåŠŸ"</span><span class="token operator">+</span><span class="token string">"ç”¨æˆ·ä¿¡æ¯"</span><span class="token operator">+</span>account<span class="token punctuation">)</span><span class="token operator">:</span><span class="token string">"ç™»å½•å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Account</span> <span class="token function">getAccount</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token class-name">String</span> pwd<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">Account</span> account <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//1.åŠ è½½é©±åŠ¨</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//2.å»ºç«‹è¿æ¥</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>user<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//3.é€šè¿‡è¿æ¥æ­å»ºstatement</span>            statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//4.æ“ä½œsql</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from account where username = '"</span><span class="token operator">+</span>username<span class="token operator">+</span><span class="token string">"'and password = '"</span><span class="token operator">+</span>pwd<span class="token operator">+</span><span class="token string">"'"</span><span class="token punctuation">;</span>            resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">int</span> aid <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"aid"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> usernamea <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> pwda <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Double</span> balance <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"balance"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                account <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Account</span><span class="token punctuation">(</span>aid<span class="token punctuation">,</span>usernamea<span class="token punctuation">,</span>pwda<span class="token punctuation">,</span>balance<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">finally</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> resultSet<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> statement<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> account<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç»“æœï¼š</p><img src="JDBC/20210706152659.png" alt="image-20210706152659400" style="zoom:50%;" /></li></ul><h4 id="æ³¨å…¥æ”»å‡»">æ³¨å…¥æ”»å‡»</h4><p>æ„å»ºç‰¹æ®Šçš„è¾“å…¥:</p><p>ä¾‹å¦‚è¾“å…¥å¯†ç </p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">asdf&#39;or&#39;a&#39;&#x3D;&#39;a</code></pre><p>æ•´ä¸ªsqlè¯­å¥å°±ä¼šå˜ä¸º</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select * from account where username &#x3D; &#39;asdf&#39; and password &#x3D; &#39;asdf&#39;or&#39;a&#39;&#x3D;&#39;a&#39;;</code></pre><p>å¯¼è‡´å«ä¹‰æ”¹å˜ã€‚</p><h4 id="é€šè¿‡é¢„ç¼–è¯‘è¯­å¥æ¥é¢„é˜²">é€šè¿‡é¢„ç¼–è¯‘è¯­å¥æ¥é¢„é˜²</h4><ul><li>ä½¿ç”¨PreparedStatementè¯­å¥å¯¹è±¡é˜²æ­¢æ³¨å…¥æ”»å‡»<ul><li>PreparedStatement å¯ä»¥ä½¿ç”¨ <strong>?</strong> ä½œä¸ºå‚æ•°çš„å ä½ç¬¦,å³ä½¿æ˜¯å­—ç¬¦ä¸²å’Œæ—¥æœŸç±»å‹,ä¹Ÿä¸ä½¿ç”¨å•ç‹¬å†æ·»åŠ  <strong>â€™ â€™</strong></li><li>connection.createStatement();è·å¾—çš„æ˜¯æ™®é€šè¯­å¥å¯¹è±¡ Statement<br>ction.prepareStatement(sql);å¯ä»¥è·å¾—ä¸€ä¸ªé¢„ç¼–è¯‘è¯­å¥å¯¹è±¡PreparedStatement</li><li>å¦‚æœSQLè¯­å¥ä¸­æœ‰?ä½œä¸ºå‚æ•°å ä½ç¬¦å·,é‚£ä¹ˆè¦åœ¨æ‰§è¡ŒCURDä¹‹å‰å…ˆè®¾ç½®å‚æ•°<br>***(é—®å·çš„ç¼–å·,æ•°æ®) æ–¹æ³•è®¾ç½®å‚æ•°</li></ul></li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> sql<span class="token operator">=</span><span class="token string">"select * from account where username = ? and password = ?"</span><span class="token punctuation">;</span>preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿™é‡Œå·²ç»ä¼ å…¥SQLè¯­å¥</span><span class="token comment">//è®¾ç½®å‚æ•°</span>preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>username <span class="token punctuation">)</span><span class="token punctuation">;</span>preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>pwd <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ‰§è¡ŒCURD</span>resultSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è¿™é‡Œä¸éœ€è¦å†ä¼ å…¥SQLè¯­å¥ï¼Œä¼ äº†ä¼šæŠ¥é”™ï¼Œäº²èº«ç»å†man</span></code></pre><p>æ•ˆæœï¼š</p><img src="JDBC/20210707200554.png" alt="image-20210707200553352" style="zoom:50%;" /><p>åŸç†ï¼š</p><p>è¯´ç™½äº†å°±æ˜¯æŠŠå€¼å½“ä¸­çš„æ‰€æœ‰å•å¼•å·ç»™<strong>è½¬ä¹‰</strong>äº†!è¿™å°±è¾¾åˆ°äº†é˜²æ­¢sqlæ³¨å…¥çš„ç›®çš„ï¼Œè¯´ç™½äº†mysqlé©±åŠ¨çš„PreparedStatementå®ç°ç±»çš„<strong>setString()</strong>;æ–¹æ³•å†…éƒ¨åšäº†å•å¼•å·çš„è½¬ä¹‰ï¼Œè€ŒStatementä¸èƒ½é˜²æ­¢sqlæ³¨å…¥ï¼Œå°±æ˜¯å› ä¸ºå®ƒæ²¡æœ‰æŠŠå•å¼•å·åšè½¬ä¹‰ï¼Œè€Œæ˜¯ç®€å•ç²—æš´çš„ç›´æ¥æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥è¾¾ä¸åˆ°é˜²æ­¢sqlæ³¨å…¥çš„ç›®çš„ã€‚</p><h2 id="é¢„ç¼–è¯‘çš„åŸç†">é¢„ç¼–è¯‘çš„åŸç†</h2><h3 id="é¢„ç¼–è¯‘çš„å¼€å¯">é¢„ç¼–è¯‘çš„å¼€å¯</h3><p>å€¼å¾—æ³¨æ„çš„æ˜¯,æˆ‘ä»¬çš„Connector/J 5.0.5åŠä¹‹åuseServerPrepStmtsé»˜è®¤false,å°±æ˜¯é»˜è®¤æ²¡æœ‰å¼€å¯é¢„ç¼–è¯‘,ä¹‹å‰é»˜è®¤ä¸ºtrue, cachePrepStmts ä¸€ç›´é»˜è®¤ä¸ºfalse,éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è®¾ç½®æ‰å¯ä»¥å¯ç”¨é¢„ç¼–è¯‘,åœ¨å¼€å¯é¢„ç¼–è¯‘çš„åŒæ—¶è¦åŒæ—¶å¼€å¯é¢„ç¼–è¯‘ç¼“å­˜æ‰èƒ½å¸¦æ¥äº›è®¸çš„æ€§èƒ½æå‡.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token string">"jdbc:mysql://localhost:3306/mydb?*****&amp;useServerPrepStmts=true&amp;cachePrepStmts=true"</span><span class="token punctuation">;</span> </code></pre><h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3><ul><li><p>å®‰å…¨æ€§é«˜,å¯ä»¥é¿å…SQLæ³¨å…¥</p></li><li><p>ç®€å•ä¸ç¹ç,ä¸ç”¨è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥</p></li><li><p>æ€§èƒ½é«˜ï¼Œç”¨åœ¨æ‰§è¡Œå¤šä¸ªç›¸åŒæ•°æ®åº“DMLæ“ä½œæ—¶,å¯ä»¥å‡å°‘sqlè¯­å¥çš„ç¼–è¯‘æ¬¡æ•°</p></li></ul><h2 id="é¢„ç¼–è¯‘å®ç°CURD">é¢„ç¼–è¯‘å®ç°CURD</h2><h4 id="TestPreparedStatement-java">TestPreparedStatement.java</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * @author: ChanHuiShan * @date: 2021-07-06 - 07 - 06 - 19:31 * @description: com.chs.test03 * @version: 1.0 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestPreparedStatement</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> driver <span class="token operator">=</span> <span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://127.0.0.1:3306/mytestdb?"</span> <span class="token operator">+</span>            <span class="token string">"useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;"</span> <span class="token operator">+</span>            <span class="token string">"serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å‘empè¡¨ä¸­å¢åŠ ä¸€æ¡æ•°æ®</span>        <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ ¹æ®å·¥å·ä¿®æ”¹å‘˜å·¥è¡¨ä¸­çš„æ•°æ®</span>        <span class="token function">testDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ ¹æ®å·¥å·åˆ é™¤å‘˜å·¥è¡¨ä¸­çš„æ•°æ®</span>        <span class="token function">testQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æŸ¥è¯¢åå­—ä¸­åŒ…å«Açš„å‘˜å·¥ä¿¡æ¯</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//å‘empè¡¨ä¸­å¢åŠ ä¸€æ¡æ•°æ®</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into emp values(DEFAULT,?,?,?,?,?,?,?)"</span><span class="token punctuation">;</span>            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿™ä¸ªæ—¶å€™å°±è¦ä¼ å…¥è¯­å¥å¯¹è±¡</span>            <span class="token comment">//è®¾ç½®å‚æ•°</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Mark"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"MANAGER"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7839</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3000.12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ‰§è¡ŒCURD</span>            <span class="token keyword">int</span> rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½±å“è¡Œæ•°"</span> <span class="token operator">+</span> rows<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>         <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">finally</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//æ ¹æ®å·¥å·ä¿®æ”¹å‘˜å·¥è¡¨ä¸­çš„æ•°æ®</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update emp set ename =?,job= ? where empno = ?"</span><span class="token punctuation">;</span>            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿™ä¸ªæ—¶å€™å°±è¦ä¼ å…¥è¯­å¥å¯¹è±¡</span>            <span class="token comment">//è®¾ç½®å‚æ•°</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"John"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"ANALYST"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7777</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ‰§è¡ŒCURD</span>            <span class="token keyword">int</span> rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½±å“è¡Œæ•°"</span> <span class="token operator">+</span> rows<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">finally</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token comment">//è¿™éƒ¨åˆ†éƒ½çœç•¥ï¼ŒåŒä¸‹</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//æ ¹æ®å·¥å·åˆ é™¤å‘˜å·¥è¡¨ä¸­çš„æ•°æ®</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"delete from emp where empno = ?"</span><span class="token punctuation">;</span>            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿™ä¸ªæ—¶å€™å°±è¦ä¼ å…¥è¯­å¥å¯¹è±¡</span>            <span class="token comment">//è®¾ç½®å‚æ•°</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7777</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ‰§è¡ŒCURD</span>            <span class="token keyword">int</span> rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½±å“è¡Œæ•°"</span> <span class="token operator">+</span> rows<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">finally</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//æŸ¥è¯¢åå­—ä¸­åŒ…å«Açš„å‘˜å·¥ä¿¡æ¯</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from emp where ename like ?"</span><span class="token punctuation">;</span>            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"%A%"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            resultSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">int</span> empno <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"empno"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> ename <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"ename"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> job <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"job"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> <span class="token constant">MGR</span> <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"MGR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Date</span> date <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token string">"hiredate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">double</span> sal <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"SAL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">double</span> comm <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"comm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> deptno <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"deptno"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span>empno<span class="token punctuation">,</span> ename<span class="token punctuation">,</span> job<span class="token punctuation">,</span> <span class="token constant">MGR</span><span class="token punctuation">,</span> date<span class="token punctuation">,</span> sal<span class="token punctuation">,</span> comm<span class="token punctuation">,</span> deptno<span class="token punctuation">)</span><span class="token punctuation">;</span>                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> e<span class="token operator">:</span>list<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h1>5. æ‰¹å¤„ç†</h1><h2 id="æ¦‚å¿µ">æ¦‚å¿µ</h2><p>â€‹å½“æˆ‘ä»¬æœ‰å¤šæ¡sqlè¯­å¥éœ€è¦å‘é€åˆ°æ•°æ®åº“æ‰§è¡Œçš„æ—¶å€™ï¼Œæœ‰ä¸¤ç§å‘é€æ–¹å¼ï¼Œä¸€ç§æ˜¯æ‰§è¡Œä¸€æ¡å‘é€ä¸€æ¡sqlè¯­å¥ç»™æ•°æ®åº“,å¦ä¸€ä¸ªç§æ˜¯å‘é€ä¸€ä¸ªsqlé›†åˆç»™æ•°æ®åº“ï¼Œä¹Ÿå°±æ˜¯å‘é€ä¸€ä¸ªæ‰¹sqlåˆ°æ•°æ®åº“ã€‚æ™®é€šçš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ï¼šæ¯å¤„ç†ä¸€æ¡æ•°æ®ï¼Œå°±è®¿é—®ä¸€æ¬¡æ•°æ®åº“ï¼›è€Œæ‰¹å¤„ç†æ˜¯ï¼šç´¯ç§¯åˆ°ä¸€å®šæ•°é‡ï¼Œå†ä¸€æ¬¡æ€§æäº¤åˆ°æ•°æ®åº“ï¼Œå‡å°‘äº†ä¸æ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œæ‰€ä»¥æ•ˆç‡ä¼šå¤§å¤§æé«˜,å¾ˆæ˜¾ç„¶ä¸¤è€…çš„æ•°æ®åº“æ‰§è¡Œæ•ˆç‡æ˜¯ä¸åŒçš„ï¼Œæˆ‘ä»¬å‘é€æ‰¹å¤„ç†sqlçš„æ—¶å€™æ•°æ®åº“æ‰§è¡Œæ•ˆç‡è¦é«˜</p><h2 id="Statementå’ŒpreparedStatementçš„æ‰¹å¤„ç†åŒºåˆ«">Statementå’ŒpreparedStatementçš„æ‰¹å¤„ç†åŒºåˆ«</h2><ul><li>statementè¯­å¥å¯¹è±¡å®ç°æ‰¹å¤„ç†æœ‰å¦‚ä¸‹é—®é¢˜<ul><li>ç¼ºç‚¹ï¼šé‡‡ç”¨ç¡¬ç¼–ç æ•ˆç‡ä½ï¼Œå®‰å…¨æ€§è¾ƒå·®ã€‚</li><li>åŸç†ï¼šç¡¬ç¼–ç ï¼Œæ¯æ¬¡æ‰§è¡Œæ—¶ç›¸ä¼¼SQLéƒ½ä¼šè¿›è¡Œç¼–è¯‘</li></ul></li><li>PreparedStatement+æ‰¹å¤„ç†<ul><li>ä¼˜ç‚¹ï¼šè¯­å¥åªç¼–è¯‘ä¸€æ¬¡ï¼Œå‡å°‘ç¼–è¯‘æ¬¡æ•°ã€‚æé«˜äº†å®‰å…¨æ€§ï¼ˆé˜»æ­¢äº†SQLæ³¨å…¥ï¼‰</li><li>åŸç†ï¼šç›¸ä¼¼SQLåªç¼–è¯‘ä¸€æ¬¡ï¼Œå‡å°‘ç¼–è¯‘æ¬¡æ•°</li></ul></li></ul><h2 id="æ‰¹å¤„ç†å¼€å¯">æ‰¹å¤„ç†å¼€å¯</h2><pre class="language-java" data-language="java"><code class="language-java"><span class="token string">"&amp;rewriteBatchedStatements=true"</span></code></pre><h2 id="å®ä¾‹">å®ä¾‹</h2><p>å‘éƒ¨é—¨è¡¨ä¸­å¢åŠ å¤šæ¡æ•°æ®</p><p>åˆ©ç”¨å¾ªç¯æ·»åŠ ï¼Œå¹¶æ¯1000ä¸ºä¸€æ‰¹ï¼Œæ”¾å…¥ä¹‹åæ¸…é™¤</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into dept values(default ,?,?)"</span><span class="token punctuation">;</span>preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10036</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"location"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//æ”¾è¿›ä¸€æ‰¹é‡Œ</span>    preparedStatement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">%</span><span class="token number">1000</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//æ¯1000ä¸ºä¸€æ‰¹ï¼Œæ”¾å…¥åæ¸…é™¤</span>        preparedStatement<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        preparedStatement<span class="token punctuation">.</span><span class="token function">clearBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//æ²¡æœ‰æ•´é™¤å®Œçš„éƒ¨åˆ†</span>preparedStatement<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>preparedStatement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1>6.JDBCæ§åˆ¶äº‹åŠ¡</h1><p>ä¸»è¦æ˜¯åœ¨å­¦ä¹ å¦‚ä½•è®©å¤šä¸ªæ•°æ®åº“æ“ä½œæˆä¸ºä¸€ä¸ªæ•´ä½“ï¼Œå®ç°è¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨éƒ½ä¸æ‰§è¡Œ</p><p>åœ¨JDBCä¸­ï¼Œäº‹åŠ¡æ“ä½œæ˜¯è‡ªåŠ¨æäº¤ï¼Œä¸€æ¡å¯¹æ•°æ®åº“çš„DMLä»£è¡¨ä¸€é¡¹äº‹åŠ¡æ“ä½œ</p><p>è½¬è´¦çš„æ“ä½œï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * @author: ChanHuiShan * @date: 2021-07-08 - 07 - 08 - 16:02 * @description: com.chs.test05 * @version: 1.0 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestTransaction</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> driver <span class="token operator">=</span> <span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://127.0.0.1:3306/mytestdb?"</span> <span class="token operator">+</span>            <span class="token string">"useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;"</span> <span class="token operator">+</span>    <span class="token string">"serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true&amp;useServerPrepStmts=true&amp;cachePrepStmts=true&amp;rewriteBatchedStatements=true"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">testTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œå‘éƒ¨é—¨è¡¨å¢åŠ å¤šæ¡æ•°æ®</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update account set balance = balance-? where aid =?"</span><span class="token punctuation">;</span>            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//è½¬å‡º</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ‰§è¡Œ</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//è½¬å…¥</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ‰§è¡Œ</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> preparedStatement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸ºäº†ä¿è¯å¤šä¸ªsqlè¯­å¥ä¸€èµ·æ‰§è¡Œï¼Œä½¿ç”¨äº‹åŠ¡ã€‚</p><p>åœ¨JDBCä¸­ï¼Œäº‹åŠ¡æ“ä½œæ˜¯<strong>è‡ªåŠ¨æäº¤</strong>ã€‚ä¸€æ¡å¯¹æ•°æ®åº“çš„DML(insertã€updateã€delete)ä»£è¡¨ä¸€é¡¹äº‹åŠ¡æ“ä½œ,æ“ä½œæˆåŠŸåï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è°ƒç”¨commit()æäº¤ï¼Œå¦åˆ™è‡ªåŠ¨è°ƒç”¨rollback()å›æ»šã€‚</p><h3 id="è®¾ç½®äº‹åŠ¡æ‰‹åŠ¨æäº¤">è®¾ç½®äº‹åŠ¡æ‰‹åŠ¨æäº¤</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//è®¾ç½®äº‹åŠ¡æ‰‹åŠ¨æäº¤</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update account set balance = balance-? where aid =?"</span><span class="token punctuation">;</span>            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//è½¬å‡º</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//å‡ºç°å¼‚å¸¸</span>            <span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>            <span class="token comment">//è½¬å…¥</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//å›æ»šæ“ä½œ</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">!=</span>connection<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//æäº¤æ“ä½œ</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">!=</span>connection<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> preparedStatement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span></code></pre><h3 id="è®¾ç½®å›æ»šç‚¹">è®¾ç½®å›æ»šç‚¹</h3><p>ä½œç”¨æ˜¯ä¿è¯å›æ»šç‚¹ä¹‹å‰çš„æ•°æ®æ›´æ”¹ç”Ÿæ•ˆï¼Œå›æ»šç‚¹ä»¥åçš„æ•°æ®æ›´æ”¹æ“ä½œå°±ä¼šæ— æ•ˆã€‚</p><p>å¹¶ä¸”å›æ»šç‚¹çš„æ“ä½œå€¼å¯ä»¥è¿›è¡Œæ›´æ”¹å’Œè®¾ç½®ã€‚</p><ul><li>åœ¨å¢åŠ æ•°æ®æ“ä½œé‡Œé¢ï¼Œæ¯ä¸€åƒè®¾ç½®ä¸€ä¸ªå›æ»šç‚¹ï¼š</li></ul><pre class="language-java" data-language="java"><code class="language-java">connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®æ‰‹åŠ¨æäº¤</span><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into dept values(default ,?,?)"</span><span class="token punctuation">;</span>preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10036</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"location"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    preparedStatement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">%</span><span class="token number">1000</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        preparedStatement<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        preparedStatement<span class="token punctuation">.</span><span class="token function">clearBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ¯ä¸€åƒæ¡è®¾ç½®å›æ»šç‚¹</span>        <span class="token class-name">Savepoint</span> savepoint <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">setSavepoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        savepoints<span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span>savepoint<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//æœŸé—´å‡ºç°å¼‚å¸¸</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">==</span><span class="token number">10001</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> x <span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>preparedStatement<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>preparedStatement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ul><li>å‡ºç°å¼‚å¸¸æ˜¯10000ä»¥åï¼Œåœ¨æœ€åä¸€ä¸ªå›æ»šç‚¹å›æ»šï¼Œå‰©ä¸‹36åˆ™ä¸ä¿ç•™</li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//è·å¾—å›æ»šç‚¹é›†åˆæœ€åä¸€ä¸ªç‚¹</span>            <span class="token class-name">Savepoint</span> sp <span class="token operator">=</span> savepoints<span class="token punctuation">.</span><span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> sp<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span>sp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//å›æ»š</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> </code></pre><ul><li>è®¾ç½®ç‰¹å®šçš„å›æ»šç‚¹</li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//è·å¾—ç‰¹å®šçš„å›æ»šç‚¹</span><span class="token class-name">Savepoint</span> sp <span class="token operator">=</span> savepoints<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1>7. DAOæ¨¡å¼</h1><p>é¡¹ç›®ç»“æ„</p><ul><li><p><strong>å®ä½“ç±»</strong>ï¼šå’Œæ•°æ®åº“è¡¨æ ¼ä¸€ä¸€å¯¹åº”çš„ç±»,å•ç‹¬æ”¾å…¥ä¸€ä¸ªåŒ…ä¸­,åŒ…åå¾€å¾€æ˜¯ pojo/entity/bean,è¦æ“ä½œçš„æ¯ä¸ªè¡¨æ ¼éƒ½åº”è¯¥æœ‰å¯¹åº”çš„å®ä½“ç±»</p><ul><li><p>emp &gt; class Emp</p><p>dept &gt; class Dept</p><p>account &gt; class Account</p></li></ul></li><li><p><strong>DAOå±‚</strong>ï¼šå®šä¹‰äº†å¯¹æ•°æ®è¦æ‰§è¡Œé‚£äº›æ“ä½œçš„æ¥å£å’Œå®ç°ç±»,åŒ…åå¾€å¾€æ˜¯ dao/mapper,è¦æ“ä½œçš„æ¯ä¸ªè¡¨æ ¼éƒ½åº”è¯¥æœ‰å¯¹åº”çš„æ¥å£å’Œå®ç°ç±»</p><ul><li><p>emp &gt; interface EmpDao &gt;EmpDaoImpl</p><p>dept &gt; interface DeptDao&gt; DeptDaoImpl</p></li></ul></li><li><p>Mybatis/Spring-JDBCTemplate ä¸­,å¯¹DAOå±‚ä»£ç è¿›è¡Œäº†å°è£…,ä»£ç ç¼–å†™æ–¹å¼ä¼šæœ‰å…¶ä»–å˜åŒ–</p></li></ul><p>é¡¹ç›®æˆªå›¾</p><img src="JDBC/20210709153202.png" alt="image-20210709153201647" style="zoom: 50%;" /><h2 id="æ¥å£ç±»ï¼ˆDAOå±‚ï¼‰">æ¥å£ç±»ï¼ˆDAOå±‚ï¼‰</h2><h3 id="Emp-java-2">Emp.java</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * @author: ChanHuiShan * @date: 2021-07-09 - 07 - 09 - 15:26 * @description: com.chs.dao * @version: 1.0 */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpDao</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * å‘æ•°æ®åº“Empè¡¨ä¸­å¢åŠ ä¸€æ¡æ•°æ®çš„æ–¹æ³•     * @param emp è¦å¢åŠ çš„æ•°æ®å°è£…æˆçš„Empç±»çš„å¯¹è±¡     * @return å¢åŠ æˆåŠŸè¿”å›å¤§äº0çš„æ•´æ•°ï¼Œå¢åŠ å¤±è´¥è¿”å›0     */</span>    <span class="token keyword">int</span> <span class="token function">addEmp</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * æ ¹æ®å‘˜å·¥ç¼–å·æ¥åˆ é™¤å‘˜å·¥ä¿¡æ¯çš„æ–¹æ³•     * @param empno è¦åˆ é™¤çš„å‘˜å·¥çš„ç¼–å·     * @return åˆ é™¤æˆåŠŸè¿”å›å¤§äº0çš„æ•´æ•°ï¼Œåˆ é™¤å¤±è´¥è¿”å›0     */</span>    <span class="token keyword">int</span> <span class="token function">deleteByEmpno</span><span class="token punctuation">(</span><span class="token keyword">int</span> empno<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„ä¿¡æ¯     * @return æ‰€æœ‰å‘˜å·¥çš„ä¿¡æ¯é›†åˆ     */</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * æ ¹æ®å·¥å·ä¿®æ”¹å‘˜å·¥ä¿¡æ¯     * @param emp ä¼ å…¥ä¿®æ”¹çš„ä¿¡æ¯     * @return ä¿®æ”¹æˆåŠŸè¿”å›å¤§äº0çš„æ•´æ•°ï¼Œåˆ é™¤å¤±è´¥è¿”å›0     */</span>    <span class="token keyword">int</span> <span class="token function">updateEmp</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="Dept-java">Dept.java</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * @author: ChanHuiShan * @date: 2021-07-09 - 07 - 09 - 15:26 * @description: com.chs.dao * @version: 1.0 */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptDao</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨ä¿¡æ¯     * @return æ‰€æœ‰éƒ¨é—¨ä¿¡æ¯çš„é›†åˆ     */</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * æ·»åŠ éƒ¨é—¨ä¿¡æ¯     * @param dept éœ€è¦æ·»åŠ çš„éƒ¨é—¨ä¿¡æ¯     * @return å¢åŠ æˆåŠŸè¿”å›å¤§äº0çš„æ•´æ•°ï¼Œå¢åŠ å¤±è´¥è¿”å›0     */</span>    <span class="token keyword">int</span> <span class="token function">addDept</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="å®ç°ç±»ï¼ˆæœªè¢«æŠ½å–çš„ï¼‰">å®ç°ç±»ï¼ˆæœªè¢«æŠ½å–çš„ï¼‰</h2><h3 id="EmpDaoImpl-java">EmpDaoImpl.java</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * @author: ChanHuiShan * @date: 2021-07-09 - 07 - 09 - 15:28 * @description: com.chs.dao.impl * @version: 1.0 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpDao</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> driver <span class="token operator">=</span> <span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://127.0.0.1:3306/mytestdb?"</span> <span class="token operator">+</span>            <span class="token string">"useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;"</span> <span class="token operator">+</span>            <span class="token string">"serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">addEmp</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//å‘empè¡¨ä¸­å¢åŠ ä¸€æ¡æ•°æ®</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> rows<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into emp values(DEFAULT,?,?,?,?,?,?,?)"</span><span class="token punctuation">;</span>            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿™ä¸ªæ—¶å€™å°±è¦ä¼ å…¥è¯­å¥å¯¹è±¡</span>            <span class="token comment">//è®¾ç½®å‚æ•°</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getEname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getMgr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getHiredate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getSal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getComm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getDeptno</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ‰§è¡ŒCURD</span>            rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span><span class="token comment">//é‡Šæ”¾èµ„æº</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> preparedStatement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> rows<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">deleteByEmpno</span><span class="token punctuation">(</span><span class="token keyword">int</span> empno<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//æ ¹æ®å·¥å·åˆ é™¤å‘˜å·¥è¡¨ä¸­çš„æ•°æ®</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> rows<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"delete from emp where empno = ?"</span><span class="token punctuation">;</span>            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿™ä¸ªæ—¶å€™å°±è¦ä¼ å…¥è¯­å¥å¯¹è±¡</span>            <span class="token comment">//è®¾ç½®å‚æ•°</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> empno<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ‰§è¡ŒCURD</span>            rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//è®¾ç½®å‚æ•°ç„¶åä»Šæ¬¡é‚£</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span><span class="token comment">//é‡Šæ”¾èµ„æº</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> preparedStatement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> rows<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//æŸ¥è¯¢åå­—ä¸­åŒ…å«Açš„å‘˜å·¥ä¿¡æ¯</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from emp "</span><span class="token punctuation">;</span>            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            resultSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">int</span> empno <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"empno"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> ename <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"ename"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> job <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"job"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> <span class="token constant">MGR</span> <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"MGR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Date</span> date <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token string">"hiredate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">double</span> sal <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"SAL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">double</span> comm <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"comm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> deptno <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"deptno"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span>empno<span class="token punctuation">,</span> ename<span class="token punctuation">,</span> job<span class="token punctuation">,</span> <span class="token constant">MGR</span><span class="token punctuation">,</span> date<span class="token punctuation">,</span> sal<span class="token punctuation">,</span> comm<span class="token punctuation">,</span> deptno<span class="token punctuation">)</span><span class="token punctuation">;</span>                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> resultSet<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> preparedStatement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">updateEmp</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//å‘empè¡¨ä¸­å¢åŠ ä¸€æ¡æ•°æ®</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> rows<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update emp set ename = ?,job = ?,mgr = ?,hiredate=?,sal=?,comm=? ,deptno = ? where empno = ?"</span><span class="token punctuation">;</span>            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿™ä¸ªæ—¶å€™å°±è¦ä¼ å…¥è¯­å¥å¯¹è±¡</span>            <span class="token comment">//è®¾ç½®å‚æ•°</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getEname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getMgr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getHiredate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getSal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getComm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getDeptno</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token function">getEmpno</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ‰§è¡ŒCURD</span>            rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span><span class="token comment">//é‡Šæ”¾èµ„æº</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> preparedStatement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> rows<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™äº›æ“ä½œéƒ½å¾ˆå¤šç›¸ä¼¼çš„åœ°æ–¹ï¼Œå¯ä»¥è¢«æŠ½å–æˆä¸ºä¸€ä¸ªæ€»çš„ç±»ï¼Œæ‰€ä»¥å¯ä»¥å•Šçœ‹å¾…</p><h3 id="DeptDaoImpl-java">DeptDaoImpl.java</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * @author: ChanHuiShan * @date: 2021-07-09 - 07 - 09 - 15:29 * @description: com.chs.dao.impl * @version: 1.0 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptDao</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> driver <span class="token operator">=</span> <span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://127.0.0.1:3306/mytestdb?"</span> <span class="token operator">+</span>            <span class="token string">"useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;"</span> <span class="token operator">+</span>            <span class="token string">"serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//æŸ¥è¯¢åå­—ä¸­åŒ…å«Açš„å‘˜å·¥ä¿¡æ¯</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from dept "</span><span class="token punctuation">;</span>            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            resultSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">int</span> deptno <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"deptno"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> dname <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"dname"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> loc <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"loc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Dept</span> dept <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dept</span><span class="token punctuation">(</span>deptno<span class="token punctuation">,</span>dname<span class="token punctuation">,</span>loc<span class="token punctuation">)</span><span class="token punctuation">;</span>                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> resultSet<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> preparedStatement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">addDept</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//å‘empè¡¨ä¸­å¢åŠ ä¸€æ¡æ•°æ®</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> rows<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into dept values(?,?,?)"</span><span class="token punctuation">;</span>            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿™ä¸ªæ—¶å€™å°±è¦ä¼ å…¥è¯­å¥å¯¹è±¡</span>            <span class="token comment">//è®¾ç½®å‚æ•°</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>dept<span class="token punctuation">.</span><span class="token function">getDeptno</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>dept<span class="token punctuation">.</span><span class="token function">getDname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>dept<span class="token punctuation">.</span><span class="token function">getLoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ‰§è¡ŒCURD</span>            rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span><span class="token comment">//é‡Šæ”¾èµ„æº</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> preparedStatement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> rows<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="å‘˜å·¥ç®¡ç†ç³»ç»Ÿ">å‘˜å·¥ç®¡ç†ç³»ç»Ÿ</h2><h3 id="EmpManageSystem-java">EmpManageSystem.java</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * @author: ChanHuiShan * @date: 2021-07-09 - 07 - 09 - 20:11 * @description: com.chs.view * @version: 1.0 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpManageSystem</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Scanner</span> sc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">EmpDao</span> empDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmpDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DeptDao</span> deptDao<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeptDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">SimpleDateFormat</span> simpleDateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//æ§åˆ¶å°å¾ªç¯æ‰“å°</span>            <span class="token function">showMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯·ç”¨æˆ·å½•å…¥é€‰é¡¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> i <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>                    <span class="token function">case1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>                    <span class="token function">case2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>                    <span class="token function">case3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>                    <span class="token function">case4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>                    <span class="token function">case5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span>                    <span class="token function">case6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">default</span><span class="token operator">:</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥1-7çš„æ•°å­—ï¼ï¼ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">showMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"1.æŸ¥çœ‹æ‰€æœ‰å‘˜å·¥çš„ä¿¡æ¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"2.æŸ¥çœ‹æ‰€æœ‰éƒ¨é—¨ä¿¡æ¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"3.æ ¹æ®å·¥å·åˆ é™¤å‘˜å·¥ä¿¡æ¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"4.æ ¹æ®å·¥å·ä¿®æ”¹å‘˜å·¥ä¿¡æ¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"5.å¢åŠ å‘˜å·¥ä¿¡æ¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"6.å¢åŠ éƒ¨é—¨ä¿¡æ¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">case1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//æŸ¥çœ‹æ‰€æœ‰å‘˜å·¥çš„ä¿¡æ¯</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> empDao<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/*for (Emp e: list)&#123;            System.out.println(e);        &#125;*/</span>        list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">case2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//æŸ¥çœ‹æ‰€æœ‰éƒ¨é—¨çš„ä¿¡æ¯</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> deptDao<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">case3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//æ ¹æ®å·¥å·æ¥åˆ é™¤å‘˜å·¥ä¿¡æ¯</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥è¦åˆ é™¤å‘˜å·¥çš„å·¥å·ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> i1 <span class="token operator">=</span> empDao<span class="token punctuation">.</span><span class="token function">deleteByEmpno</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i1<span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span>        <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤å¤±è´¥ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">case4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//æ ¹æ®å‘˜å·¥å·¥å·ä¿®æ”¹å‘˜å·¥ä¿¡æ¯</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„ç¼–å·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> empno <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„å§“å"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> ename <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„å·¥ä½œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> job <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„ä¸Šçº§ç¼–å·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> mgr <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„è˜ç”¨æ—¥æœŸï¼ˆæ ¼å¼ä¸ºyyyy-mm-ddï¼‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Date</span> hiredate <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">//æŠŠå‚æ•°ä»tryä»£ç å—é‡Œæ‹¿å‡ºæ¥åˆå§‹åŒ–ï¼Œå› ä¸ºåˆ›å»ºå¯¹è±¡çš„æ—¶å€™ä¼šè®¿é—®ä¸åˆ°è¿™ä¸ªå€¼</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            hiredate <span class="token operator">=</span> simpleDateFormat<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>sc<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯·æŒ‰ç…§æ ¼å¼è¾“å…¥!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„è–ªèµ„"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">double</span> sal <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„å¥–é‡‘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">double</span> comm <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„éƒ¨é—¨ç¼–å·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> deptno <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span>empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>job<span class="token punctuation">,</span>mgr<span class="token punctuation">,</span>hiredate<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>comm<span class="token punctuation">,</span>deptno<span class="token punctuation">)</span><span class="token punctuation">;</span>        empDao<span class="token punctuation">.</span><span class="token function">updateEmp</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">case5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//æ·»åŠ å‘˜å·¥ä¿¡æ¯</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„å§“å"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> ename <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„å·¥ä½œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> job <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„ä¸Šçº§ç¼–å·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> mgr <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„è˜ç”¨æ—¥æœŸï¼ˆæ ¼å¼ä¸ºyyyy-mm-ddï¼‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Date</span> hiredate <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">//æŠŠå‚æ•°ä»tryä»£ç å—é‡Œæ‹¿å‡ºæ¥åˆå§‹åŒ–ï¼Œå› ä¸ºåˆ›å»ºå¯¹è±¡çš„æ—¶å€™ä¼šè®¿é—®ä¸åˆ°è¿™ä¸ªå€¼</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            hiredate <span class="token operator">=</span> simpleDateFormat<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>sc<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯·æŒ‰ç…§æ ¼å¼è¾“å…¥!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„è–ªèµ„"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">double</span> sal <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„å¥–é‡‘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">double</span> comm <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥å‘˜å·¥çš„éƒ¨é—¨ç¼–å·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> deptno <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>ename<span class="token punctuation">,</span>job<span class="token punctuation">,</span>mgr<span class="token punctuation">,</span>hiredate<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>comm<span class="token punctuation">,</span>deptno<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> empDao<span class="token punctuation">.</span><span class="token function">addEmp</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ·»åŠ æˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ·»åŠ å¤±è´¥ï¼ï¼ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">case6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//æ·»åŠ éƒ¨é—¨ä¿¡æ¯</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥éƒ¨é—¨å·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> deptno <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥éƒ¨é—¨åç§°"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> dname <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"*è¯·è¾“å…¥éƒ¨é—¨åœ°å€"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> loc <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Dept</span> dept <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dept</span><span class="token punctuation">(</span>deptno<span class="token punctuation">,</span> dname<span class="token punctuation">,</span> loc<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> deptDao<span class="token punctuation">.</span><span class="token function">addDept</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ·»åŠ æˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ·»åŠ å¤±è´¥ï¼ï¼ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="BaseDaoæŠ½å–">BaseDaoæŠ½å–</h2><p>ç”±ä¸Šé¢å®ç°ç±»çš„ä»£ç å¯ä»¥çœ‹åˆ°å¢åˆ æ”¹æŸ¥æ–¹æ³•çš„ä»£ç éƒ½å¾ˆç›¸ä¼¼ï¼Œå…¶å®å¯ä»¥æŠŠç›¸ä¼¼çš„éƒ¨åˆ†æŠ½å–å‡ºæ¥ç§°ä¸ºä¸€ä¸ªBaseDaoçš„ç±»</p><h3 id="å¢åˆ æ”¹çš„æŠ½å–â€“baseUpdate">å¢åˆ æ”¹çš„æŠ½å–â€“baseUpdate</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/**     * å¢åˆ æ”¹æ–¹æ³•çš„æŠ½å–     * @param sql ä¼ å…¥çš„sqlè¯­å¥å¯¹è±¡     * @param args ä¼ å…¥çš„å¯å˜å‚æ•°     * @return ä¿®æ”¹æˆåŠŸè¿”å›å¤§äº0çš„æ•°ï¼Œè¿”å›å¤±è´¥è¿”å›0     */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">baseUpdate</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span><span class="token class-name">Object</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> rows<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>        connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>        preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿™ä¸ªæ—¶å€™å°±è¦ä¼ å…¥è¯­å¥å¯¹è±¡</span>        <span class="token comment">//è®¾ç½®å‚æ•°</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//æ‰§è¡ŒCURD</span>        rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span><span class="token comment">//é‡Šæ”¾èµ„æº</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> preparedStatement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> rows<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æŸ¥è¯¢çš„æŠ½å–â€“baseQuery">æŸ¥è¯¢çš„æŠ½å–â€“baseQuery</h3><p>é€šè¿‡<strong>åå°„</strong>è·å–ä¼ å…¥å­—èŠ‚ç çš„å¯¹è±¡å±æ€§</p><p>å…³äº<strong>åå°„æ˜¯å¦ç ´åå°è£…ç±»</strong>ï¼ˆé¢è¯•ï¼‰ï¼š<a href="https://www.cnblogs.com/wk-missQ1/p/13304329.html">https://www.cnblogs.com/wk-missQ1/p/13304329.html</a></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/**     * æŸ¥è¯¢æ“ä½œçš„æŠ½å–     * @param clazz ä¼ å…¥å­—èŠ‚ç ä»¥ä¾¿é€šè¿‡åå°„è·å¾—å¯¹è±¡çš„å±æ€§ï¼Œ     *              å› ä¸ºä¸çŸ¥é“å…·ä½“ä¼šä¼ å…¥ä»€ä¹ˆå¯¹è±¡é‡Œé¢æ˜¯ä»€ä¹ˆå±æ€§ã€‚     * @param sql ä¼ å…¥çš„sqlè¯­å¥å¯¹è±¡     * @param args ä¸€äº›å¯å˜çš„å‚æ•°     * @return è¿”å›ä¸€ä¸ªæŸ¥è¯¢ç»“æœé›†åˆ     */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span> <span class="token function">baseQuery</span><span class="token punctuation">(</span><span class="token class-name">Class</span> clazz<span class="token punctuation">,</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span><span class="token class-name">Object</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>        connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>        preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è®¾ç½®å‚æ•° -- è¿™é‡Œè¦æ³¨æ„å‘€</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//æ‰§è¡ŒCURD</span>        resultSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//é€šè¿‡å­—èŠ‚ç è·å–å¯¹è±¡çš„å±æ€§</span>        <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è·å–è®¿é—®å°è£…ç±»å±æ€§çš„æƒé™--è®¾ç½®ä¸ºtrueå¯ä»¥è®¿é—®</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡</span>            <span class="token class-name">Object</span> obj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é»˜è®¤é€šè¿‡åå°„è°ƒç”¨å¯¹è±¡çš„ç©ºå‚æ„é€ æ–¹æ³•</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">String</span> name <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å…ˆå°†å±æ€§åå­—è·å¾—</span>                <span class="token class-name">Object</span> data <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é€šè¿‡å±æ€§åä»ç»“æœé›†ä¸­è·å¾—</span>                field<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å°†æ•°æ®æ”¾å…¥å¯¹è±¡ä¸­</span>            <span class="token punctuation">&#125;</span>            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å°†å¯¹è±¡åŠ å…¥åˆ°é“¾è¡¨é›†åˆé‡Œ</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IllegalAccessException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InstantiationException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> resultSet<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> preparedStatement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> list<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//è®¾ç½®å‚æ•°</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//æ‰§è¡ŒCURD</span>resultSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é€šè¿‡å­—èŠ‚ç è·å–å¯¹è±¡çš„å±æ€§</span><span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–è®¿é—®å°è£…ç±»å±æ€§çš„æƒé™--è®¾ç½®ä¸ºtrueå¯ä»¥è®¿é—®</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡</span>    <span class="token class-name">Object</span> obj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é»˜è®¤é€šè¿‡åå°„è°ƒç”¨å¯¹è±¡çš„ç©ºå‚æ„é€ æ–¹æ³•</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> name <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å…ˆå°†å±æ€§åå­—è·å¾—</span>        <span class="token class-name">Object</span> data <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é€šè¿‡å±æ€§åä»ç»“æœé›†ä¸­è·å¾—</span>        field<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å°†æ•°æ®æ”¾å…¥å¯¹è±¡ä¸­</span>    <span class="token punctuation">&#125;</span>    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å°†å¯¹è±¡æ”¾å…¥listè¡¨ä¸­</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™æ ·ä¸€æ¥ï¼Œä¸¤ä¸ªå®ç°ç±»ä¸­é—´çš„å¢åˆ æ”¹æ“ä½œå°±å¯ä»¥è¢«ç®€åŒ–</p><h3 id="å®ç°ç±»ç®€åŒ–ç»“æœ">å®ç°ç±»ç®€åŒ–ç»“æœ</h3><h4 id="DeptDaoImpl-java-2">DeptDaoImpl.java</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptDaoImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDao</span> <span class="token keyword">implements</span> <span class="token class-name">DeptDao</span> <span class="token punctuation">&#123;</span><span class="token comment">//æ³¨æ„ç»§æ‰¿BaseDao</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from dept "</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token function">baseQuery</span><span class="token punctuation">(</span><span class="token class-name">Dept</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">addDept</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into dept values(?,?,?)"</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token function">baseUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>dept<span class="token punctuation">.</span><span class="token function">getDeptno</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>dept<span class="token punctuation">.</span><span class="token function">getDname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    dept<span class="token punctuation">.</span><span class="token function">getLoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="EmpDaoImpl-java-2">EmpDaoImpl.java</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpDaoImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDao</span> <span class="token keyword">implements</span> <span class="token class-name">EmpDao</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">addEmp</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into emp values(DEFAULT,?,?,?,?,?,?,?)"</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token function">baseUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token function">getEname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token function">getJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token function">getMgr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    emp<span class="token punctuation">.</span><span class="token function">getHiredate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token function">getSal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token function">getComm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token function">getDeptno</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">deleteByEmpno</span><span class="token punctuation">(</span><span class="token keyword">int</span> empno<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"delete from emp where empno = ?"</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token function">baseUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>empno<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from emp "</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token function">baseQuery</span><span class="token punctuation">(</span><span class="token class-name">Emp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">updateEmp</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update emp set ename = ?,job = ?,mgr = ?,hiredate=?,sal=?,comm=? ,deptno = ? where empno = ?"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">baseUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token function">getEname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token function">getJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token function">getMgr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                emp<span class="token punctuation">.</span><span class="token function">getHiredate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token function">getSal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token function">getComm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token function">getDeptno</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token function">getEmpno</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="é”™è¯¯æ€»ç»“ï¼š">é”™è¯¯æ€»ç»“ï¼š</h4><p><strong>java.lang.IllegalArgumentException</strong>ï¼šä¼ å…¥å‚æ•°ä¼ é”™äº†</p><img src="JDBC/20210711103201.png" alt="image-20210711103159768" style="zoom:50%;" /><pre class="language-java" data-language="java"><code class="language-java">field<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å°†æ•°æ®æ”¾å…¥å¯¹è±¡ä¸­,ä¸è¦ä¼ åäº†</span></code></pre><h2 id="è¿æ¥æ± ">è¿æ¥æ± </h2><ul><li><p>ä¼ ç»Ÿçš„è¿æ¥ï¼š</p><p>â€‹é¦–å…ˆè°ƒç”¨Class.forName()æ–¹æ³•åŠ è½½æ•°æ®åº“é©±åŠ¨ï¼Œç„¶åè°ƒç”¨DriverManager.getConnection()æ–¹æ³•å»ºç«‹è¿æ¥.</p><ul><li><p>ç¼ºç‚¹ï¼š</p><p>â€‹Connectionå¯¹è±¡åœ¨æ¯æ¬¡æ‰§è¡ŒDMLå’ŒDQLçš„è¿‡ç¨‹ä¸­éƒ½è¦åˆ›å»ºä¸€æ¬¡,DMLå’ŒDQLæ‰§è¡Œå®Œæ¯•å,connectionå¯¹è±¡éƒ½ä¼šè¢«é”€æ¯. connectionå¯¹è±¡æ˜¯å¯ä»¥åå¤ä½¿ç”¨çš„,æ²¡æœ‰å¿…è¦æ¯æ¬¡éƒ½åˆ›å»ºæ–°çš„.è¯¥å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯éƒ½æ˜¯æ¯”è¾ƒæ¶ˆè€—ç³»ç»Ÿèµ„æºçš„,å¦‚ä½•å®ç°connectionå¯¹è±¡çš„åå¤ä½¿ç”¨å‘¢?ä½¿ç”¨è¿æ¥æ± æŠ€æœ¯å®ç°.</p></li></ul></li><li><p>ä½¿ç”¨è¿æ¥æ± ï¼š</p><ul><li><p>é¢„å…ˆå‡†å¤‡ä¸€äº›é“¾æ¥å¯¹è±¡,æ”¾å…¥è¿æ¥æ± ä¸­,å½“å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œæ—¶,å¯ä»¥é¿å…çŸ­æ—¶é—´å†…ä¸€æ¬¡æ€§å¤§é‡åˆ›å»ºé“¾æ¥å¯¹è±¡,å‡å°‘è®¡ç®—æœºå•ä½æ—¶é—´å†…çš„è¿ç®—å‹åŠ›,æé«˜ç¨‹åºçš„å“åº”é€Ÿåº¦</p></li><li><p>å®ç°é“¾æ¥å¯¹è±¡çš„åå¤ä½¿ç”¨,å¯ä»¥å¤§å¤§å‡å°‘é“¾æ¥å¯¹è±¡çš„åˆ›å»ºæ¬¡æ•°,å‡å°‘èµ„æºçš„æ¶ˆè€—</p></li></ul></li></ul><p>MyConnectionPool.java</p><ul><li><p>åˆ›å»ºä¸€ä¸ªè¿æ¥å¯¹è±¡</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//å‡†å¤‡ä¸€ä¸ªæ± å­è£…è¿æ¥å¯¹è±¡</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Connection</span><span class="token punctuation">></span></span> pool<span class="token punctuation">;</span></code></pre></li><li><p>é™æ€ä»£ç å—</p><ul><li>åŠ è½½é©±åŠ¨</li><li>åˆå§‹åŒ–pool</li><li>åˆ›å»º5ä¸ªé“¾æ¥å¯¹è±¡</li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//ä½¿ç”¨é™æ€ä»£ç å—åŠ è½½é©±åŠ¨ï¼Œåˆ›å»ºè¿æ¥</span><span class="token keyword">static</span><span class="token punctuation">&#123;</span>    <span class="token comment">//åŠ è½½é©±åŠ¨</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//åˆå§‹åŒ–pool</span>    pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//åˆ›å»ºäº”ä¸ªé“¾æ¥å¯¹è±¡</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> initSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token function">initConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            pool<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆå§‹åŒ–è¿æ¥ï¼š"</span><span class="token operator">+</span>connection<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"æ”¾å…¥è¿æ¥æ± "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre></li><li><p>ç§æœ‰çš„åˆå§‹åŒ–ä¸€ä¸ªé“¾æ¥å¯¹è±¡çš„æ–¹æ³•</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/**     * ç§æœ‰çš„åˆå§‹åŒ–ä¸€ä¸ªé“¾æ¥å¯¹è±¡çš„æ–¹æ³•     * @return åˆå§‹åŒ–çš„è¿æ¥å¯¹è±¡     */</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">initConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>user<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre></li><li><p>å…¬æœ‰çš„å‘å¤–ç•Œæä¾›é“¾æ¥å¯¹è±¡</p><ul><li>å¦‚æœæ± å­é‡Œæœ‰å¯¹è±¡<ul><li>removeï¼ˆï¼‰</li></ul></li><li>å¦‚æœæ± å­æ²¡äº†ï¼šåˆ›å»ºæ–°çš„å¯¹è±¡</li><li>æœ€åè¿”å›å¯¹è±¡</li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/**     * å…¬æœ‰çš„å‘å¤–ç•Œæä¾›é“¾æ¥å¯¹è±¡çš„æ–¹æ³•     * @return     */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pool<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//å¦‚æœè¿æ¥æ± é‡Œé¢æœ‰å…ƒç´ </span>        connection <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç§»å‡ºé›†åˆä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¿æ¥æ± ä¸­è¿˜æœ‰é“¾æ¥ï¼Œè·å¾—é“¾æ¥ï¼š"</span><span class="token operator">+</span>connection<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        connection <span class="token operator">=</span> <span class="token function">initConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¿æ¥æ± ä¸ºç©ºï¼Œåˆ›å»ºæ–°é“¾æ¥ï¼š"</span><span class="token operator">+</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> connection<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre></li><li><p>å…¬æœ‰çš„å‘é“¾æ¥å¯¹è±¡å½’è¿˜é“¾æ¥å¯¹è±¡çš„æ–¹æ³•</p><ul><li>è‹¥é“¾æ¥æ²¡æœ‰è¢«å…³é—­<ul><li>è°ƒæ•´äº‹åŠ¡çŠ¶æ€ï¼Œè®¾ç½®ä¸ºæ‰‹åŠ¨æäº¤</li><li>å®¹é‡å°äºæœ€å¤§å®¹é‡<ul><li>æ± å­æœ€ååŠ ä¸Šconnection</li></ul></li><li>å®¹é‡è¾¾åˆ°æœ€å¤§å®¹é‡<ul><li>å…³é—­è¿æ¥ï¼Œæ‰“å°æ± å­æ»¡äº†ï¼Œå…³é—­è¿æ¥</li></ul></li></ul></li><li>è‹¥å·²ç»è¢«å…³é—­ï¼Œæ‰“å°ï¼šæ— éœ€å…³é—­ï¼Œä¸ç”¨å½’è¿˜</li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/**     * å…¬æœ‰çš„å‘é“¾æ¥å¯¹è±¡å½’è¿˜é“¾æ¥å¯¹è±¡çš„æ–¹æ³•     * @param connection     */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">returnConnection</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> connection<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> connection<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>connection<span class="token punctuation">.</span><span class="token function">isClosed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>pool<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span> maxSize<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è°ƒæ•´äº‹åŠ¡çŠ¶æ€</span>                    pool<span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å½’è¿˜é“¾æ¥å¯¹è±¡ç»™æ± å­</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¿æ¥æ± æœªæ»¡ï¼Œå½’è¿˜é“¾æ¥å¯¹è±¡ï¼š"</span><span class="token operator">+</span>connection<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¿æ¥æ± å·²æ»¡ï¼Œå…³é—­è¿æ¥æ± "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¿æ¥å·²ç»å…³é—­æ— éœ€å½’è¿˜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿æ¥è¢«å…³äº†ä¸‹æ¬¡æ˜¯æ²¡æ³•ç”¨çš„</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¼ å…¥çš„è¿æ¥ä¸ºnullï¼Œæ— éœ€å½’è¿˜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul><h3 id="æµ‹è¯•">æµ‹è¯•</h3><ol><li><p>åˆ›å»ºå¤šä¸ªè¿æ¥ï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Connection</span> connection1 <span class="token operator">=</span> <span class="token class-name">MyConnectionPool</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token class-name">Connection</span> connection11 <span class="token operator">=</span> <span class="token class-name">MyConnectionPool</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç»“æœï¼šå‰é¢å°äºinitSizeçš„éƒ¨åˆ†ä¸ªä»è¿æ¥æ± é‡Œå–ï¼Œåé¢è¶…è¿‡çš„éƒ¨åˆ†ç›´æ¥åˆå§‹åŒ–ã€‚</p><img src="JDBC/20210711185528.png" style="zoom:50%;" /></li><li><p>å½’è¿˜è¿æ¥</p><ol><li><p>ä¼ å…¥nullå€¼</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">MyConnectionPool</span><span class="token punctuation">.</span><span class="token function">returnConnection</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç»“æœï¼š</p><img src="JDBC/20210711190848.png" alt="image-20210711190848341" style="zoom:50%;" /></li><li><p>ä¼ å…¥å·²å…³é—­çš„è¿æ¥</p><pre class="language-java" data-language="java"><code class="language-java">connection1<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">MyConnectionPool</span><span class="token punctuation">.</span><span class="token function">returnConnection</span><span class="token punctuation">(</span>connection1<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç»“æœï¼š</p><img src="JDBC/20210711190953.png" alt="image-20210711190953769" style="zoom: 67%;" /></li><li><p>ä¼ å…¥è¶…è¿‡maxSizeçš„è¿æ¥</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">MyConnectionPool</span><span class="token punctuation">.</span><span class="token function">returnConnection</span><span class="token punctuation">(</span>connection11<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//maxSize=10---11>10</span></code></pre><img src="JDBC/20210711191448.png" alt="image-20210711191448052" style="zoom:50%;" /></li></ol></li></ol><h3 id="BaseDaoæ”¹è¿›">BaseDaoæ”¹è¿›</h3><ul><li><p>åŸæ¥çš„å‚æ•°å¯ä»¥åˆ é™¤</p><img src="JDBC/20210711192110.png" alt="image-20210711192110111" style="zoom: 50%;" /></li><li><p>åŠ è½½é©±åŠ¨å’Œè¿æ¥éƒ¨åˆ†æ”¹è¿›</p><img src="JDBC/20210711192336.png" alt="image-20210711192335963" style="zoom: 67%;" /></li><li><p>è¿æ¥æœ€åå½’è¿˜</p><img src="JDBC/20210711192550.png" alt="image-20210711192550600" style="zoom:50%;" /></li></ul><h4 id="BaseDao-java">BaseDao.java</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseDao</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//åŸæ¥çš„å‚æ•°å…¨éƒ¨åˆ é™¤</span>    <span class="token comment">/**     * å¢åˆ æ”¹æ–¹æ³•çš„æŠ½å–     * @param sql ä¼ å…¥çš„sqlè¯­å¥å¯¹è±¡     * @param args ä¼ å…¥çš„å¯å˜å‚æ•°     * @return ä¿®æ”¹æˆåŠŸè¿”å›å¤§äº0çš„æ•°ï¼Œè¿”å›å¤±è´¥è¿”å›0     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">baseUpdate</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span><span class="token class-name">Object</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> rows<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            connection <span class="token operator">=</span> <span class="token class-name">MyConnectionPool</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä»è¿æ¥æ± é‡Œè·å¾—è¿æ¥</span>            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿™ä¸ªæ—¶å€™å°±è¦ä¼ å…¥è¯­å¥å¯¹è±¡</span>            <span class="token comment">//è®¾ç½®å‚æ•°</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">//æ‰§è¡ŒCURD</span>            rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span><span class="token comment">//é‡Šæ”¾èµ„æº</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> preparedStatement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token class-name">MyConnectionPool</span><span class="token punctuation">.</span><span class="token function">returnConnection</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å½’è¿˜åˆ°è¿æ¥æ± é‡Œ</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> rows<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æŸ¥è¯¢æ“ä½œçš„æŠ½å–     * @param clazz ä¼ å…¥å­—èŠ‚ç ä»¥ä¾¿é€šè¿‡åå°„è·å¾—å¯¹è±¡çš„å±æ€§ï¼Œ     *              å› ä¸ºä¸çŸ¥é“å…·ä½“ä¼šä¼ å…¥ä»€ä¹ˆå¯¹è±¡é‡Œé¢æ˜¯ä»€ä¹ˆå±æ€§ã€‚     * @param sql ä¼ å…¥çš„sqlè¯­å¥å¯¹è±¡     * @param args ä¸€äº›å¯å˜çš„å‚æ•°     * @return è¿”å›ä¸€ä¸ªæŸ¥è¯¢ç»“æœé›†åˆ     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span> <span class="token function">baseQuery</span><span class="token punctuation">(</span><span class="token class-name">Class</span> clazz<span class="token punctuation">,</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span><span class="token class-name">Object</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            connection <span class="token operator">=</span> <span class="token class-name">MyConnectionPool</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//è®¾ç½®å‚æ•°</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">//æ‰§è¡ŒCURD</span>            resultSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//é€šè¿‡å­—èŠ‚ç è·å–å¯¹è±¡çš„å±æ€§</span>            <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//è·å–è®¿é—®å°è£…ç±»å±æ€§çš„æƒé™--è®¾ç½®ä¸ºtrueå¯ä»¥è®¿é—®</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>               field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">//é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡</span>                <span class="token class-name">Object</span> obj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é»˜è®¤é€šè¿‡åå°„è°ƒç”¨å¯¹è±¡çš„ç©ºå‚æ„é€ æ–¹æ³•</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">String</span> name <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å…ˆå°†å±æ€§åå­—è·å¾—</span>                    <span class="token class-name">Object</span> data <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é€šè¿‡å±æ€§åä»ç»“æœé›†ä¸­è·å¾—</span>                    field<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å°†æ•°æ®æ”¾å…¥å¯¹è±¡ä¸­</span>                <span class="token punctuation">&#125;</span>                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å°†å¯¹è±¡åŠ å…¥åˆ°é“¾è¡¨é›†åˆé‡Œ</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> resultSet<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> preparedStatement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token class-name">MyConnectionPool</span><span class="token punctuation">.</span><span class="token function">returnConnection</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="é…ç½®æ–‡ä»¶ä¼˜åŒ–è¿æ¥æ± ">é…ç½®æ–‡ä»¶ä¼˜åŒ–è¿æ¥æ± </h2><img src="JDBC/20210711193622.png" alt="image-20210711193622546" style="zoom: 50%;" /><p>æ³¨æ„æ ¼å¼ï¼šç©ºæ ¼ä¸èƒ½éšä¾¿åŠ </p><img src="JDBC/20210711193523.png" alt="image-20210711193523624" style="zoom:50%;" /><h3 id="PropertiesUtilå·¥å…·ç±»">PropertiesUtilå·¥å…·ç±»</h3><ul><li>åˆ›å»ºå·¥å…·ç±»<ul><li>å®šä¹‰æ„é€ æ–¹æ³•<ul><li>ä¼ è¿›é…ç½®æ–‡ä»¶çš„è·¯å¾„</li><li>é€šè¿‡å­—èŠ‚ç è·å–æ–‡ä»¶è·¯å¾„</li><li>åŠ è½½IOæµ</li></ul></li><li>å®šä¹‰ä¸€ä¸ªè·å¾—å‚æ•°çš„æ–¹æ³•</li></ul></li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PropertiesUtil</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Properties</span> properties<span class="token punctuation">;</span><span class="token comment">//å®šä¹‰é…ç½®æ–‡ä»¶å‚æ•°</span>    <span class="token comment">/**     * å®šä¹‰é…ç½®æ–‡ä»¶æ„é€ å™¨     * @param path ä¼ å…¥é…ç½®æ–‡ä»¶è·¯å¾„     */</span>    <span class="token keyword">public</span> <span class="token class-name">PropertiesUtil</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//é€šè¿‡å­—èŠ‚ç è·å–IOæµ</span>        <span class="token class-name">InputStream</span> resourceAsStream <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//åŠ è½½IOæµ</span>            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>resourceAsStream<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * è¿”å›é…ç½®æ–‡ä»¶å‚æ•°å€¼çš„æ–¹æ³•     * @param key å‚æ•°å     * @return å‚æ•°çš„å­—ç¬¦ä¸²     */</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getProperties</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="è¿æ¥æ± ä¼˜åŒ–">è¿æ¥æ± ä¼˜åŒ–</h3><ul><li><p>åˆ é™¤å‚æ•°å€¼</p><img src="JDBC/20210712101026.png" alt="image-20210712101026751" style="zoom:50%;" /></li><li><p>åœ¨é™æ€ä»£ç å—é‡Œé…ç½®å‚æ•°</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//åˆ›å»ºé…ç½®æ–‡ä»¶å¯¹è±¡</span><span class="token class-name">PropertiesUtil</span> propertiesUtil <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PropertiesUtil</span><span class="token punctuation">(</span><span class="token string">"/jdbc.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>driver <span class="token operator">=</span> propertiesUtil<span class="token punctuation">.</span><span class="token function">getProperties</span><span class="token punctuation">(</span><span class="token string">"driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>url <span class="token operator">=</span> propertiesUtil<span class="token punctuation">.</span><span class="token function">getProperties</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>user <span class="token operator">=</span> propertiesUtil<span class="token punctuation">.</span><span class="token function">getProperties</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>password <span class="token operator">=</span> propertiesUtil<span class="token punctuation">.</span><span class="token function">getProperties</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>initSize <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>propertiesUtil<span class="token punctuation">.</span><span class="token function">getProperties</span><span class="token punctuation">(</span><span class="token string">"initSize"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>maxSize <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>propertiesUtil<span class="token punctuation">.</span><span class="token function">getProperties</span><span class="token punctuation">(</span><span class="token string">"maxSize"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul><h3 id="é”™è¯¯æ€»ç»“">é”™è¯¯æ€»ç»“</h3><p>è¿æ¥æ± çš„å®šä¹‰å¥½åƒå‡ºç°äº†æŸç§é—®é¢˜</p><p>Exception in thread â€œmainâ€ java.lang.NoClassDefFoundError: Could not initialize class com.chs.dao.MyConnectionPool</p><p>å‘ç°æ˜¯æ„é€ å™¨ä¸­æ²¡æœ‰ç”¨åˆ°æœ¬èº«çš„å‚æ•°ï¼Œè€Œæ˜¯é‡æ–°å®šä¹‰äº†ä¸€ä¸ªå‚æ•°ï¼š</p><img src="JDBC/20210712110521.png" alt="image-20210712110521532" style="zoom: 67%;" /><h1>8. log4jæ—¥å¿—</h1><ol><li><p>ä»€ä¹ˆæ˜¯æ—¥å¿—log</p><p>â€‹å¼‚å¸¸ä¿¡æ¯  ç™»å½•æˆåŠŸå¤±è´¥çš„ä¿¡æ¯  å…¶ä»–é‡è¦æ“ä½œçš„ä¿¡æ¯ï¼Œæ—¥å¿—å¯ä»¥è®°å½•ç¨‹åºçš„è¿è¡ŒçŠ¶æ€,è¿è¡Œä¿¡æ¯,ç”¨æˆ·çš„ä¸€äº›å¸¸ç”¨æ“ä½œ.æ—¥å¿—å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ†æç¨‹åºçš„è¿è¡ŒçŠ¶æ€,å¸®æˆ‘ä»¬åˆ†æç”¨æˆ·çš„æ“ä½œä¹ æƒ¯,è¿›è€Œå¯¹ç¨‹åºè¿›è¡Œæ”¹</p></li><li><p>å¦‚ä½•è®°å½•æ—¥å¿—</p><ul><li><p>æ–¹å¼1ï¼šSystem.out.println(â€¦)    e.printStackTrace();</p><p>ç¼ºç‚¹ï¼šä¸æ˜¯ä¿å­˜åˆ°æ–‡ä»¶ï¼Œä¸èƒ½é•¿ä¹…å­˜å‚¨</p></li><li><p>æ–¹å¼2ï¼šIOæµ å°†System.out.println(â€¦)  e.printStackTrace();å†™å…¥æ–‡ä»¶</p><p>ç¼ºç‚¹ï¼šæ“ä½œç¹ç,IOæµæ“ä½œå®¹æ˜“é˜»å¡çº¿ç¨‹,æ—¥å¿—æ²¡æœ‰ç­‰çº§,æ—¥å¿—çš„æ ¼å¼ä¸èƒ½å¾ˆå¥½çš„å®šåˆ¶,è¦æƒ³å®è¡Œç¼–ç¨‹å¤æ‚</p></li><li><p>æ–¹å¼3ï¼šä½¿ç”¨ç°æˆçš„æ—¥å¿—æ¡†æ¶ï¼Œæ¯”å¦‚log4j</p><p>ä¼˜ç‚¹ï¼š1é•¿ä¹…ä¿å­˜ 2æœ‰ç­‰çº§3æ ¼å¼å¯ä»¥å¾ˆå¥½çš„å®šåˆ¶ 4ä»£ç ç¼–å†™ç®€å•</p></li></ul></li><li><p>log4jæ—¥å¿—çš„çº§åˆ«</p><pre><code>FATALï¼š  æŒ‡å‡ºç°éå¸¸ä¸¥é‡çš„é”™è¯¯äº‹ä»¶ï¼Œè¿™äº›é”™è¯¯å¯èƒ½å¯¼è‡´åº”ç”¨ç¨‹åºå¼‚å¸¸ä¸­æ­¢ERRORï¼š æŒ‡è™½æœ‰é”™è¯¯ï¼Œä½†ä»å…è®¸åº”ç”¨ç¨‹åºç»§ç»­è¿è¡ŒWARNï¼š  æŒ‡è¿è¡Œç¯å¢ƒæ½œè—ç€å±å®³INFOï¼š    æŒ‡æŠ¥å‘Šä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯åœ¨ç²—ç²’åº¦çº§åˆ«ä¸Šçªå‡ºæ˜¾ç¤ºåº”ç”¨ç¨‹åºçš„è¿›ç¨‹DEBUGï¼š æŒ‡ç»†ç²’åº¦ä¿¡æ¯äº‹ä»¶ï¼Œå¯¹äºåº”ç”¨ç¨‹åºçš„è°ƒè¯•æ˜¯æœ€æœ‰ç”¨çš„</code></pre></li><li><p>ä½¿ç”¨log4jè®°å½•æ—¥å¿—</p><ul><li><p>åŠ å…¥jaråŒ…   <strong>log4j-1.2.8.jar</strong></p><img src="JDBC/20210712120555.png" alt="image-20210712120555879" style="zoom:50%;" /></li><li><p>åŠ å…¥å±æ€§æ–‡ä»¶ src ä¸‹ <strong>log4j.properties</strong></p><img src="JDBC/20210712120643.png" alt="image-20210712120643129" style="zoom:50%;" /><pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">log4j.rootLogger</span><span class="token punctuation">=</span><span class="token value attr-value">error,logfile</span><span class="token comment">## æ–¹å¼ä¸€ï¼šæ‰“å°åˆ°æ§åˆ¶å°</span><span class="token key attr-name">log4j.appender.stdout</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.log4j.ConsoleAppender</span><span class="token key attr-name">log4j.appender.stdout.Target</span><span class="token punctuation">=</span><span class="token value attr-value">System.err</span><span class="token key attr-name">log4j.appender.stdout.layout</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.log4j.SimpleLayout</span><span class="token comment">## æ–¹å¼äºŒï¼šæ‰“å°åˆ°logfileæ–‡ä»¶</span><span class="token key attr-name">log4j.appender.logfile</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.log4j.FileAppender</span><span class="token key attr-name">log4j.appender.logfile.File</span><span class="token punctuation">=</span><span class="token value attr-value">d:/msb.log</span><span class="token key attr-name">log4j.appender.logfile.layout</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.log4j.PatternLayout</span><span class="token key attr-name">log4j.appender.logfile.layout.ConversionPattern</span><span class="token punctuation">=</span><span class="token value attr-value">%d&#123;yyyy-MM-dd   HH:mm:ss&#125; %l %F %p %m%n</span></code></pre><img src="JDBC/20210712124734.png" alt="image-20210712124734548" style="zoom: 67%;" /><img src="JDBC/20210712125136.png" alt="image-20210712125136115" style="zoom:50%;" /></li><li><p>é€šè¿‡å±æ€§æ–‡ä»¶ç†è§£log4jçš„ä¸»è¦API</p><p>Appender æ—¥å¿—ç›®çš„åœ° :ConsoleAppender  FileAppender</p><p>Layout æ—¥å¿—æ ¼å¼åŒ–å™¨ ï¼šSimpleLayout  PatternLayout</p></li></ul></li></ol><h3 id="ä»¥è¿æ¥æ± ä¸ºä¾‹ï¼š">ä»¥è¿æ¥æ± ä¸ºä¾‹ï¼š</h3><ul><li><p>æ·»åŠ æ—¥å¿—å¯¹è±¡</p><img src="JDBC/20210712122737.png" alt="image-20210712122736926" style="zoom:50%;" /></li><li><p>åˆå§‹åŒ–æ—¥å¿—</p><img src="JDBC/20210712123200.png" alt="image-20210712123159994" style="zoom:50%;" /></li><li><p>å°†soutè¯­å¥å’Œé”™è¯¯æ‰“å°æ”¹ä¸ºæ—¥å¿—è¾“å‡ºï¼š</p><ul><li>é”™è¯¯å¤§å¤šä½¿ç”¨fatalçº§åˆ«</li></ul><img src="JDBC/20210712124134.png" alt="image-20210712124134859" style="zoom:50%;" /><ul><li>soutæç¤ºè¯­å¥ä¸€èˆ¬ä½¿ç”¨infoçº§åˆ«</li></ul><img src="JDBC/20210712124306.png" alt="image-20210712124306011" style="zoom:50%;" /><p>è¿è¡Œç»“æœï¼š</p><img src="JDBC/20210712124525.png" alt="image-20210712124525739" style="zoom:67%;" /></li></ul><h3 id="è¡¥å……">è¡¥å……</h3><pre class="language-none"><code class="language-none">%pï¼šè¾“å‡ºæ—¥å¿—ä¿¡æ¯çš„ä¼˜å…ˆçº§ï¼Œå³DEBUGï¼ŒINFOï¼ŒWARNï¼ŒERRORï¼ŒFATALã€‚%dï¼šè¾“å‡ºæ—¥å¿—æ—¶é—´ç‚¹çš„æ—¥æœŸæˆ–æ—¶é—´ï¼Œé»˜è®¤æ ¼å¼ä¸ºISO8601ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶åæŒ‡å®šæ ¼å¼ï¼Œå¦‚ï¼š%d&#123;yyyy&#x2F;MM&#x2F;dd HH:mm:ss,SSS&#125;ã€‚%rï¼šè¾“å‡ºè‡ªåº”ç”¨ç¨‹åºå¯åŠ¨åˆ°è¾“å‡ºè¯¥logä¿¡æ¯è€—è´¹çš„æ¯«ç§’æ•°ã€‚%tï¼šè¾“å‡ºäº§ç”Ÿè¯¥æ—¥å¿—äº‹ä»¶çš„çº¿ç¨‹åã€‚%lï¼šè¾“å‡ºæ—¥å¿—äº‹ä»¶çš„å‘ç”Ÿä½ç½®ï¼Œç›¸å½“äº%c.%M(%F:%L)çš„ç»„åˆï¼ŒåŒ…æ‹¬ç±»å…¨åã€æ–¹æ³•ã€æ–‡ä»¶åä»¥åŠåœ¨ä»£ç ä¸­çš„è¡Œæ•°ã€‚ä¾‹å¦‚test.TestLog4j.main(TestLog4j.java:10)ã€‚%cï¼šè¾“å‡ºæ—¥å¿—ä¿¡æ¯æ‰€å±çš„ç±»ç›®ï¼Œé€šå¸¸å°±æ˜¯æ‰€åœ¨ç±»çš„å…¨åã€‚%Mï¼šè¾“å‡ºäº§ç”Ÿæ—¥å¿—ä¿¡æ¯çš„æ–¹æ³•åã€‚%Fï¼šè¾“å‡ºæ—¥å¿—æ¶ˆæ¯äº§ç”Ÿæ—¶æ‰€åœ¨çš„æ–‡ä»¶åç§°ã€‚%L:ï¼šè¾“å‡ºä»£ç ä¸­çš„è¡Œå·ã€‚%m:ï¼šè¾“å‡ºä»£ç ä¸­æŒ‡å®šçš„å…·ä½“æ—¥å¿—ä¿¡æ¯ã€‚%nï¼šè¾“å‡ºä¸€ä¸ªå›è½¦æ¢è¡Œç¬¦ï¼ŒWindowså¹³å°ä¸º&quot;rn&quot;ï¼ŒUnixå¹³å°ä¸º&quot;n&quot;ã€‚%xï¼šè¾“å‡ºå’Œå½“å‰çº¿ç¨‹ç›¸å…³è”çš„NDC(åµŒå¥—è¯Šæ–­ç¯å¢ƒ)ï¼Œå°¤å…¶ç”¨åˆ°åƒjava servletsè¿™æ ·çš„å¤šå®¢æˆ·å¤šçº¿ç¨‹çš„åº”ç”¨ä¸­ã€‚%%ï¼šè¾“å‡ºä¸€ä¸ª&quot;%&quot;å­—ç¬¦ã€‚</code></pre><h1>9. ä¸‰å¤§èŒƒå¼</h1><h2 id="ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰"><strong>ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰</strong></h2><p><strong>è¦æ±‚æ•°æ®åº“è¡¨çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸå­æ•°æ®é¡¹ã€‚</strong></p><p>ä¸¾ä¾‹è¯´æ˜ï¼š</p><img src="JDBC/20210712153337.png" alt="img" style="zoom:67%;" /><p>åœ¨ä¸Šé¢çš„è¡¨ä¸­ï¼Œâ€œå®¶åº­ä¿¡æ¯â€å’Œâ€œå­¦æ ¡ä¿¡æ¯â€åˆ—å‡ä¸æ»¡è¶³åŸå­æ€§çš„è¦æ±‚ï¼Œæ•…ä¸æ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼Œè°ƒæ•´å¦‚ä¸‹ï¼š</p><img src="JDBC/20210712153335.png" alt="img" style="zoom:67%;" /><p>å¯è§ï¼Œè°ƒæ•´åçš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯å†åˆ†çš„ï¼Œå› æ­¤æ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ï¼›</p><h2 id="ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰"><strong>ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰</strong></h2><p><strong>åœ¨1NFçš„åŸºç¡€ä¸Šï¼Œéç å±æ€§å¿…é¡»å®Œå…¨ä¾èµ–äºå€™é€‰ç ï¼ˆåœ¨1NFåŸºç¡€ä¸Šæ¶ˆé™¤éä¸»å±æ€§å¯¹ä¸»ç çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼‰</strong></p><p><strong>ç¬¬äºŒèŒƒå¼éœ€è¦ç¡®ä¿æ•°æ®åº“è¡¨ä¸­çš„æ¯ä¸€åˆ—éƒ½å’Œä¸»é”®ç›¸å…³ï¼Œè€Œä¸èƒ½åªä¸ä¸»é”®çš„æŸä¸€éƒ¨åˆ†ç›¸å…³ï¼ˆä¸»è¦é’ˆå¯¹è”åˆä¸»é”®è€Œè¨€ï¼‰ã€‚</strong></p><p>ä¸¾ä¾‹è¯´æ˜ï¼š</p><img src="JDBC/20210712153333.png" alt="img" style="zoom:67%;" /><p>åœ¨ä¸Šå›¾æ‰€ç¤ºçš„æƒ…å†µä¸­ï¼ŒåŒä¸€ä¸ªè®¢å•ä¸­å¯èƒ½åŒ…å«ä¸åŒçš„äº§å“ï¼Œå› æ­¤ä¸»é”®å¿…é¡»æ˜¯â€œè®¢å•å·â€å’Œâ€œäº§å“å·â€è”åˆç»„æˆï¼Œ</p><p>ä½†å¯ä»¥å‘ç°ï¼Œäº§å“æ•°é‡ã€äº§å“æŠ˜æ‰£ã€äº§å“ä»·æ ¼ä¸â€œè®¢å•å·â€å’Œâ€œäº§å“å·â€éƒ½ç›¸å…³ï¼Œä½†æ˜¯è®¢å•é‡‘é¢å’Œè®¢å•æ—¶é—´ä»…ä¸â€œè®¢å•å·â€ç›¸å…³ï¼Œä¸â€œäº§å“å·â€æ— å…³ï¼Œ</p><p>è¿™æ ·å°±ä¸æ»¡è¶³ç¬¬äºŒèŒƒå¼çš„è¦æ±‚ï¼Œè°ƒæ•´å¦‚ä¸‹ï¼Œéœ€åˆ†æˆä¸¤ä¸ªè¡¨ï¼š</p><p><img src="JDBC/20210712153328.png" alt="img" style="zoom:67%;" /> <img src="JDBC/20210712153331.png" alt="img" style="zoom:67%;" /></p><h2 id="ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰"><strong>ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰</strong></h2><p><strong>åœ¨2NFåŸºç¡€ä¸Šï¼Œä»»ä½•éä¸»<a href="https://baike.baidu.com/item/%E5%B1%9E%E6%80%A7">å±æ€§</a>ä¸ä¾èµ–äºå…¶å®ƒéä¸»å±æ€§ï¼ˆåœ¨2NFåŸºç¡€ä¸Šæ¶ˆé™¤ä¼ é€’ä¾èµ–ï¼‰</strong></p><p><strong>ç¬¬ä¸‰èŒƒå¼éœ€è¦ç¡®ä¿æ•°æ®è¡¨ä¸­çš„æ¯ä¸€åˆ—æ•°æ®éƒ½å’Œä¸»é”®ç›´æ¥ç›¸å…³ï¼Œè€Œä¸èƒ½é—´æ¥ç›¸å…³ã€‚</strong></p><p>ä¸¾ä¾‹è¯´æ˜ï¼š</p><img src="JDBC/20210712153325.png" alt="img" style="zoom:67%;" /><p>ä¸Šè¡¨ä¸­ï¼Œæ‰€æœ‰å±æ€§éƒ½å®Œå…¨ä¾èµ–äºå­¦å·ï¼Œæ‰€ä»¥æ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼Œä½†æ˜¯â€œç­ä¸»ä»»æ€§åˆ«â€å’Œâ€œç­ä¸»ä»»å¹´é¾„â€ç›´æ¥ä¾èµ–çš„æ˜¯â€œç­ä¸»ä»»å§“åâ€ï¼Œ</p><p>è€Œä¸æ˜¯ä¸»é”®â€œå­¦å·â€ï¼Œæ‰€ä»¥éœ€åšå¦‚ä¸‹è°ƒæ•´ï¼š</p><p><img src="JDBC/20210712153312.png" alt="img" style="zoom:67%;" /> <img src="JDBC/20210712153317.png" alt="img" style="zoom:67%;" /></p><p>è¿™æ ·ä»¥æ¥ï¼Œå°±æ»¡è¶³äº†ç¬¬ä¸‰èŒƒå¼çš„è¦æ±‚ã€‚</p><p>ps:å¦‚æœæŠŠä¸Šè¡¨ä¸­çš„ç­ä¸»ä»»å§“åæ”¹æˆç­ä¸»ä»»æ•™å·¥å·å¯èƒ½æ›´ç¡®åˆ‡ï¼Œæ›´ç¬¦åˆå®é™…æƒ…å†µï¼Œä¸è¿‡åªè¦èƒ½ç†è§£å°±è¡Œã€‚</p><h2 id="æ€»ç»“">æ€»ç»“</h2><ul><li><p>ä¼˜ç‚¹ï¼šç»“æ„åˆç†ã€å†—ä½™è¾ƒå°ã€å°½é‡é¿å…æ’å…¥åˆ é™¤ä¿®æ”¹å¼‚å¸¸</p></li><li><p>ç¼ºç‚¹ï¼šæ€§èƒ½é™ä½ã€å¤šè¡¨æŸ¥è¯¢æ¯”å•è¡¨æŸ¥è¯¢é€Ÿåº¦æ…¢ã€‚</p></li><li><p>èŒƒå¼æ˜¯æŒ‡å¯¼æ•°æ®è®¾è®¡çš„è§„èŒƒåŒ–ç†è®ºï¼Œå¯ä»¥ä¿è¯æ•°æ®åº“è®¾è®¡è´¨é‡</p><ul><li>ç¬¬ä¸€èŒƒå¼ï¼šå­—æ®µä¸èƒ½å†åˆ†</li><li>ç¬¬äºŒèŒƒå¼ï¼šä¸å­˜åœ¨å±€éƒ¨ä¾èµ–</li><li>ç¬¬ä¸‰èŒƒå¼ï¼šä¸å«ä¼ é€’ä¾èµ–ï¼ˆé—´æ¥ä¾èµ–ï¼‰</li></ul></li><li><p>åœ¨å®é™…è®¾è®¡ä¸­ï¼Œè¦æ•´ä½“éµå¾ªèŒƒå¼ç†è®ºï¼Œä½†æŸäº›ç‰¹å®šçš„æƒ…å†µä¸‹ä¸èƒ½æ­»æ¿éµå¾ªï¼Œè¿™æ ·ä¼šé™ä½æ•°æ®åº“çš„æ•ˆç‡ï¼Œä¸€èˆ¬å•è¡¨æŸ¥è¯¢æ•ˆç‡ä¼šæ¯”å¤šè¡¨æŸ¥è¯¢é«˜ï¼Œç‰¹å®šè¡¨çš„çš„è®¾è®¡å¯ä»¥è¿åç¬¬ä¸‰èŒƒå¼ï¼Œå¢åŠ å†—ä½™æé«˜æ€§èƒ½</p><ul><li>ä¾‹å¦‚ï¼šç»å¸¸è´­ç‰©è½¦æ¡ç›®çš„ä¸­é™¤äº†æ¡ç›®ç¼–å·ï¼Œå•†å“ç¼–å·ï¼Œå•†å“æ•°é‡å¤–ï¼Œå¯ä»¥å¢åŠ ç»å¸¸ä½¿ç”¨çš„å•†å“åç§°ï¼Œå•†å“ä»·æ ¼ç­‰</li><li><img src="JDBC/20210712154207.png" alt="image-20210712154207006" style="zoom:50%;" /></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DataBase </tag>
            
            <tag> JDBC </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL</title>
      <link href="/2021/05/07/MySQL/"/>
      <url>/2021/05/07/MySQL/</url>
      <cover>https://img.soniachen.com/IMG_5493.jpg?_r_=f49e416c-aa05-161f-ab8f-a228cd71fa6c</cover>
      <date>Fri May 07 2021 09:21:10 GMT+0800</date>
      
        <content type="html"><![CDATA[<h1>å¼•å…¥</h1><h2 id="1-æ•°æ®åº“åŸºæœ¬æ¦‚å¿µ">1.æ•°æ®åº“åŸºæœ¬æ¦‚å¿µ</h2><h3 id="1-1-æ•°æ®">1.1 æ•°æ®</h3><p>æ‰€è°“æ•°æ®ï¼ˆDataï¼‰æ˜¯æŒ‡å¯¹å®¢è§‚äº‹ç‰©è¿›è¡Œæè¿°å¹¶å¯ä»¥é‰´åˆ«çš„ç¬¦å·ï¼Œè¿™äº›ç¬¦å·æ˜¯å¯è¯†åˆ«çš„ã€æŠ½è±¡çš„ã€‚å®ƒä¸ä»…ä»…æŒ‡ç‹­ä¹‰ä¸Šçš„æ•°å­—ï¼Œè€Œæ˜¯æœ‰å¤šç§è¡¨ç°å½¢å¼ï¼šå­—æ¯ã€æ–‡å­—ã€æ–‡æœ¬ã€å›¾å½¢ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ã€‚ç°åœ¨è®¡ç®—æœºå­˜å‚¨å’Œå¤„ç†çš„æ•°æ®èŒƒå›´ååˆ†å¹¿æ³›ï¼Œè€Œæè¿°è¿™äº›æ•°æ®çš„ç¬¦å·ä¹Ÿå˜å¾—è¶Šæ¥è¶Šå¤æ‚äº†ã€‚</p><h3 id="1-2-æ•°æ®åº“">1.2 æ•°æ®åº“</h3><p>æ•°æ®åº“ï¼ˆDatabaseï¼ŒDBï¼‰æŒ‡çš„æ˜¯ä»¥ä¸€å®šæ ¼å¼å­˜æ”¾ã€èƒ½å¤Ÿå®ç°å¤šä¸ªç”¨æˆ·å…±äº«ã€ä¸åº”ç”¨ç¨‹åºå½¼æ­¤ç‹¬ç«‹çš„æ•°æ®é›†åˆã€‚</p><span id="more"></span><h3 id="1-3-æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ">1.3 æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</h3><p>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDatabase Management Systemï¼ŒDBMSï¼‰æ˜¯ç”¨æ¥å®šä¹‰å’Œç®¡ç†æ•°æ®çš„è½¯ä»¶ã€‚å¦‚ä½•ç§‘å­¦çš„ç»„ç»‡å’Œå­˜å‚¨æ•°æ®ï¼Œå¦‚ä½•é«˜æ•ˆçš„è·å–å’Œç»´æŠ¤æ•°æ®ï¼Œå¦‚ä½•ä¿è¯æ•°æ®çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ï¼Œè¿™äº›éƒ½éœ€è¦é æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå®Œæˆã€‚ç›®å‰ï¼Œæ¯”è¾ƒæµè¡Œçš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæœ‰ï¼šOracleã€MySQLã€SQL Serverã€DB2ç­‰ã€‚</p><h3 id="1-4æ•°æ®åº“åº”ç”¨ç¨‹åº">1.4æ•°æ®åº“åº”ç”¨ç¨‹åº</h3><p>æ•°æ®åº“åº”ç”¨ç¨‹åºï¼ˆDatabase Application Systemï¼ŒDBASï¼‰æ˜¯åœ¨æ•°æ®åº“ç®¡ç†ç³»ç»ŸåŸºç¡€ä¸Šï¼Œä½¿ç”¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„è¯­æ³•ï¼Œå¼€å‘çš„ç›´æ¥é¢å¯¹æœ€ç»ˆç”¨æˆ·çš„åº”ç”¨ç¨‹åºï¼Œå¦‚å­¦ç”Ÿç®¡ç†ç³»ç»Ÿã€äººäº‹ç®¡ç†ç³»ç»Ÿã€å›¾ä¹¦ç®¡ç†ç³»ç»Ÿç­‰ã€‚</p><h3 id="1-5-æ•°æ®åº“ç®¡ç†å‘˜">1.5 æ•°æ®åº“ç®¡ç†å‘˜</h3><p>æ•°æ®åº“ç®¡ç†å‘˜ï¼ˆDatabase Administratorï¼ŒDBAï¼‰æ˜¯æŒ‡å¯¹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿè¿›è¡Œæ“ä½œçš„äººå‘˜ï¼Œå…¶ä¸»è¦è´Ÿè´£æ•°æ®åº“çš„è¿è¥å’Œç»´æŠ¤ã€‚</p><h3 id="1-6-æœ€ç»ˆç”¨æˆ·">1.6 æœ€ç»ˆç”¨æˆ·</h3><p>æœ€ç»ˆç”¨æˆ·ï¼ˆUserï¼‰æŒ‡çš„æ˜¯æ•°æ®åº“åº”ç”¨ç¨‹åºçš„ä½¿ç”¨è€…ã€‚ç”¨æˆ·é¢å‘çš„æ˜¯æ•°æ®åº“åº”ç”¨ç¨‹åºï¼ˆé€šè¿‡åº”ç”¨ç¨‹åºæ“ä½œæ•°æ®ï¼‰ï¼Œå¹¶ä¸ä¼šç›´æ¥ä¸æ•°æ®åº“æ‰“äº¤é“ã€‚</p><h3 id="1-7-æ•°æ®åº“ç³»ç»Ÿ">1.7 æ•°æ®åº“ç³»ç»Ÿ</h3><p>æ•°æ®åº“ç³»ç»Ÿï¼ˆDatabase Systemï¼ŒDBSï¼‰ä¸€èˆ¬æ˜¯ç”±æ•°æ®åº“ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€æ•°æ®åº“åº”ç”¨ç¨‹åºã€æ•°æ®åº“ç®¡ç†å‘˜å’Œæœ€ç»ˆç”¨æˆ·æ„æˆã€‚å…¶ä¸­DBMSæ˜¯æ•°æ®åº“ç³»ç»Ÿçš„åŸºç¡€å’Œæ ¸å¿ƒ</p><h2 id="2-æ•°æ®åº“è¡¨åˆ—ç±»å‹">2. æ•°æ®åº“è¡¨åˆ—ç±»å‹</h2><h3 id="2-1-æ•´æ•°ç±»å‹">2.1 æ•´æ•°ç±»å‹</h3><img src="MySQL/20210630201735.png" alt="image-20210630201735014" style="zoom:67%;" /><ol><li><p>MySQLæ”¯æŒé€‰æ‹©åœ¨è¯¥ç±»å‹å…³é”®å­—åé¢çš„æ‹¬å·å†…æŒ‡å®šæ•´æ•°å€¼çš„<strong>æ˜¾ç¤ºå®½åº¦</strong>(ä¾‹å¦‚ï¼ŒINT(4))ã€‚æ˜¾ç¤ºå®½åº¦å¹¶ä¸é™åˆ¶å¯ä»¥åœ¨åˆ—å†…ä¿å­˜çš„å€¼çš„èŒƒå›´ï¼Œä¹Ÿä¸é™åˆ¶è¶…è¿‡åˆ—çš„æŒ‡å®šå®½åº¦çš„å€¼çš„æ˜¾ç¤º</p></li><li><p>ä¸»é”®è‡ªå¢ï¼šä¸ä½¿ç”¨åºåˆ—ï¼Œé€šè¿‡<strong>auto_increment</strong>ï¼Œè¦æ±‚æ˜¯<strong>æ•´æ•°ç±»å‹</strong></p></li><li><p>æ”¯æŒé€‰æ‹©åœ¨è¯¥ç±»å‹å…³é”®å­—åé¢çš„æ‹¬å·å†…æŒ‡å®šæ•´æ•°å€¼çš„æ˜¾ç¤ºå®½åº¦</p></li></ol><img src="MySQL/20210630201859.png" alt="image-20210630201859642" style="zoom:67%;" /><h1>è¡¨çš„å®Œæ•´æ€§çº¦æŸ</h1><h2 id="1-éå¤–é”®çº¦æŸ">1. éå¤–é”®çº¦æŸ</h2><table><thead><tr><th><strong>çº¦æŸæ¡ä»¶</strong></th><th><strong>çº¦æŸæè¿°</strong></th></tr></thead><tbody><tr><td>PRIMARY KEY</td><td>ä¸»é”®çº¦æŸï¼Œçº¦æŸå­—æ®µçš„å€¼å¯å”¯ä¸€åœ°æ ‡è¯†å¯¹åº”çš„è®°å½•</td></tr><tr><td>NOT NULL</td><td>éç©ºçº¦æŸï¼Œçº¦æŸå­—æ®µçš„å€¼ä¸èƒ½ä¸ºç©º</td></tr><tr><td>UNIQUE</td><td>å”¯ä¸€çº¦æŸï¼Œçº¦æŸå­—æ®µçš„å€¼æ˜¯å”¯ä¸€çš„</td></tr><tr><td>CHECK</td><td>æ£€æŸ¥çº¦æŸï¼Œé™åˆ¶æŸä¸ªå­—æ®µçš„å–å€¼èŒƒå›´</td></tr><tr><td>DEFAULT</td><td>é»˜è®¤å€¼çº¦æŸï¼Œçº¦æŸå­—æ®µçš„é»˜è®¤å€¼</td></tr><tr><td>AUTO_INCREMENT</td><td>è‡ªåŠ¨å¢åŠ çº¦æŸï¼Œçº¦æŸå­—æ®µçš„å€¼è‡ªåŠ¨é€’å¢</td></tr><tr><td>FOREIGN KEY</td><td>å¤–é”®çº¦æŸï¼Œçº¦æŸè¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»</td></tr></tbody></table><h5 id="å®ä¾‹ä¸€ï¼šå»ºç«‹ä¸€å¼ ç”¨æ¥å­˜å‚¨å­¦ç”Ÿä¿¡æ¯çš„è¡¨"><strong>å®ä¾‹ä¸€</strong>ï¼šå»ºç«‹ä¸€å¼ ç”¨æ¥å­˜å‚¨å­¦ç”Ÿä¿¡æ¯çš„è¡¨</h5><pre class="language-mysql" data-language="mysql"><code class="language-mysql">&#x2F;*å»ºç«‹ä¸€å¼ ç”¨æ¥å­˜å‚¨å­¦ç”Ÿä¿¡æ¯çš„è¡¨å­—æ®µåŒ…å«å­¦å·ã€å§“åã€æ€§åˆ«ï¼Œå¹´é¾„ã€å…¥å­¦æ—¥æœŸã€ç­çº§ï¼Œemailç­‰ä¿¡æ¯çº¦æŸï¼šå»ºç«‹ä¸€å¼ ç”¨æ¥å­˜å‚¨å­¦ç”Ÿä¿¡æ¯çš„è¡¨å­—æ®µåŒ…å«å­¦å·ã€å§“åã€æ€§åˆ«ï¼Œå¹´é¾„ã€å…¥å­¦æ—¥æœŸã€ç­çº§ï¼Œemailç­‰ä¿¡æ¯ã€1ã€‘å­¦å·æ˜¯ä¸»é”® &#x3D; ä¸èƒ½ä¸ºç©º +  å”¯ä¸€ ï¼Œä¸»é”®çš„ä½œç”¨ï¼šå¯ä»¥é€šè¿‡ä¸»é”®æŸ¥åˆ°å”¯ä¸€çš„ä¸€æ¡è®°å½•ã€2ã€‘å¦‚æœä¸»é”®æ˜¯æ•´æ•°ç±»å‹ï¼Œé‚£ä¹ˆéœ€è¦è‡ªå¢ã€3ã€‘å§“åä¸èƒ½ä¸ºç©ºã€4ã€‘Emailå”¯ä¸€ã€5ã€‘æ€§åˆ«é»˜è®¤å€¼æ˜¯ç”·ã€6ã€‘æ€§åˆ«åªèƒ½æ˜¯ç”·å¥³ã€7ã€‘å¹´é¾„åªèƒ½åœ¨18-50ä¹‹é—´*&#x2F;-- åˆ›å»ºæ•°æ®åº“è¡¨ï¼šcreate table t_student(        sno int(6) primary key auto_increment, -- ä¸»é”®è‡ªå¢        sname varchar(5) not null,         sex char(1) default &#39;ç”·&#39; check(sex&#x3D;&#39;ç”·&#39; || sex&#x3D;&#39;å¥³&#39;),        age int(3) check(age&gt;&#x3D;18 and age&lt;&#x3D;50),        enterdate date,        classname varchar(10),        email varchar(15) unique -- å”¯ä¸€);-- æŸ¥çœ‹æ•°æ®ï¼šselect * from t_student;</code></pre><img src="MySQL/20210701085258.png" alt="image-20210701085258650" style="zoom:67%;" /><ul><li><p>æ·»åŠ æ•°æ®ï¼š</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- æ·»åŠ æ•°æ®ï¼š--  1048 - Column &#39;sname&#39; cannot be null ä¸èƒ½ä¸ºnull-- 3819 - Check constraint &#39;t_student_chk_1&#39; is violated. è¿åæ£€æŸ¥çº¦æŸinsert into t_student values (1,&#39;å¼ ä¸‰&#39;,&#39;ç”·&#39;,21,&#39;2023-9-1&#39;,&#39;java01ç­&#39;,&#39;zs@126.com&#39;);-- 1062 - Duplicate entry &#39;1&#39; for key &#39;t_student.PRIMARY&#39; ä¸»é”®é‡å¤-- &gt; 1062 - Duplicate entry &#39;ls@126.com&#39; for key &#39;t_student.email&#39; è¿åå”¯ä¸€çº¦æŸinsert into t_student values (2,&#39;æå››&#39;,&#39;ç”·&#39;,21,&#39;2023-9-1&#39;,&#39;java01ç­&#39;,&#39;ls@126.com&#39;);insert into t_student values (3,&#39;éœ²éœ²&#39;,&#39;ç”·&#39;,21,&#39;2023-9-1&#39;,&#39;java01ç­&#39;,&#39;ls@126.com&#39;);-- å¦‚æœä¸»é”®æ²¡æœ‰è®¾å®šå€¼ï¼Œæˆ–è€…ç”¨null.defaultéƒ½å¯ä»¥å®Œæˆä¸»é”®è‡ªå¢çš„æ•ˆæœinsert into t_student (sname,enterdate) values (&#39;è²è²&#39;,&#39;2029-4-5&#39;);insert into t_student values (null,&#39;å°æ˜&#39;,&#39;ç”·&#39;,21,&#39;2023-9-1&#39;,&#39;java01ç­&#39;,&#39;xm@126.com&#39;);insert into t_student values (default,&#39;å°åˆš&#39;,&#39;ç”·&#39;,21,&#39;2023-9-1&#39;,&#39;java01ç­&#39;,&#39;xg@126.com&#39;);-- å¦‚æœsqlæŠ¥é”™ï¼Œå¯èƒ½ä¸»é”®å°±æµªè´¹äº†ï¼Œåç»­æ’å…¥çš„ä¸»é”®æ˜¯ä¸è¿å·çš„ï¼Œæˆ‘ä»¬ä¸»é”®ä¹Ÿä¸è¦æ±‚è¿å·çš„insert into t_student values (null,&#39;å°æ˜&#39;,&#39;ç”·&#39;,21,&#39;2023-9-1&#39;,&#39;java01ç­&#39;,&#39;oo@126.com&#39;);</code></pre><p><strong>å¸¸è§é”™è¯¯ï¼š</strong></p><p>â€“ã€‹ 1048 - Column â€˜snameâ€™ cannot be null <strong>ä¸èƒ½ä¸ºnull</strong></p><p>â€“ã€‹ 819 - Check constraint â€˜t_student_chk_1â€™ is violated. <strong>è¿åæ£€æŸ¥çº¦æŸ</strong></p><p>â€“ ã€‹1062 - Duplicateï¼ˆé‡å¤çš„ï¼‰ entry â€˜1â€™ for key â€˜t_student.PRIMARYâ€™ <strong>ä¸»é”®é‡å¤</strong></p><p>â€“ ã€‹1062 - Duplicate entry â€˜ls@126.comâ€™ for key â€˜t_student.emailâ€™ <strong>è¿åå”¯ä¸€çº¦æŸ</strong></p><ul><li>ä½¿ç”¨è‡ªå¢çš„æ—¶å€™ç”¨<strong>nullå’Œdefault</strong>éƒ½æ˜¯å¯ä»¥</li><li>å¦‚æœsqlæŠ¥é”™ï¼Œå¯èƒ½<strong>ä¸»é”®</strong>å°±æµªè´¹äº†ï¼Œåç»­æ’å…¥çš„ä¸»é”®æ˜¯ä¸è¿å·çš„ï¼Œä¸»é”®ä¹Ÿä¸è¦æ±‚è¿å·çš„</li></ul></li></ul><h4 id="åˆ—çº§çº¦æŸå’Œè¡¨çº§çº¦æŸ">- åˆ—çº§çº¦æŸå’Œè¡¨çº§çº¦æŸ</h4><p>(1)   <strong>è¡¨çº§çº¦æŸ</strong>ï¼šå¯ä»¥çº¦æŸè¡¨ä¸­ä»»æ„ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µã€‚ä¸åˆ—å®šä¹‰ç›¸äº’ç‹¬ç«‹ï¼Œä¸åŒ…å«åœ¨åˆ—å®šä¹‰ä¸­ï¼›ä¸å®šä¹‰ç”¨â€˜ï¼Œâ€™åˆ†éš”ï¼›å¿…é¡»æŒ‡å‡ºè¦çº¦æŸçš„åˆ—çš„åç§°ï¼›</p><p>(2)   <strong>åˆ—çº§çº¦æŸ</strong>ï¼šåŒ…å«åœ¨åˆ—å®šä¹‰ä¸­ï¼Œç›´æ¥è·Ÿåœ¨è¯¥åˆ—çš„å…¶å®ƒå®šä¹‰ä¹‹å ï¼Œç”¨ç©ºæ ¼åˆ†éš”ï¼›ä¸å¿…æŒ‡å®šåˆ—åï¼›</p><h5 id="å®ä¾‹äºŒ">å®ä¾‹äºŒ</h5><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- åˆ é™¤è¡¨ï¼šdrop table t_student;-- åˆ›å»ºæ•°æ®åº“è¡¨ï¼šcreate table t_student(        sno int(6) auto_increment,         sname varchar(5) not null,         sex char(1) default &#39;ç”·&#39;,        age int(3),        enterdate date,        classname varchar(10),        email varchar(15),    -- è¡¨çº§çº¦æŸï¼š        constraint pk_stu primary key (sno),  -- pk_stu ä¸»é”®çº¦æŸçš„åå­—        constraint ck_stu_sex check (sex &#x3D; &#39;ç”·&#39; || sex &#x3D; &#39;å¥³&#39;),        constraint ck_stu_age check (age &gt;&#x3D; 18 and age &lt;&#x3D; 50),        constraint uq_stu_email unique (email));-- æ·»åŠ æ•°æ®ï¼šinsert into t_student values (1,&#39;å¼ ä¸‰&#39;,&#39;ç”·&#39;,21,&#39;2023-9-1&#39;,&#39;java01ç­&#39;,&#39;zs@126.com&#39;);-- &gt; 3819 - Check constraint &#39;ck_stu_sex&#39; is violated.-- &gt; 3819 - Check constraint &#39;ck_stu_age&#39; is violated.-- &gt; 1062 - Duplicate entry &#39;zs@126.com&#39; for key &#39;t_student.uq_stu_email&#39;insert into t_student values (3,&#39;æå››&#39;,&#39;ç”·&#39;,21,&#39;2023-9-1&#39;,&#39;java01ç­&#39;,&#39;zs@126.com&#39;);-- æŸ¥çœ‹æ•°æ®ï¼šselect * from t_student;</code></pre><h4 id="åˆ›å»ºè¡¨ä¹‹åæ·»åŠ çº¦æŸ">- åˆ›å»ºè¡¨ä¹‹åæ·»åŠ çº¦æŸ</h4><h5 id="å®ä¾‹ä¸‰">å®ä¾‹ä¸‰</h5><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- åˆ é™¤è¡¨ï¼šdrop table t_student;-- åˆ›å»ºæ•°æ®åº“è¡¨ï¼šcreate table t_student(        sno int(6),         sname varchar(5) not null,         sex char(1) default &#39;ç”·&#39;,        age int(3),        enterdate date,        classname varchar(10),        email varchar(15));-- &gt; 1075 - Incorrect table definition; there can be only one auto column and it must be defined as a key-- é”™è¯¯çš„è§£å†³åŠæ³•ï¼šå°±æ˜¯auto_incrementå»æ‰-- åœ¨åˆ›å»ºè¡¨ä»¥åæ·»åŠ çº¦æŸï¼šalter table t_student add constraint pk_stu primary key (sno) ; -- ä¸»é”®çº¦æŸalter table t_student modify sno int(6) auto_increment; -- ä¿®æ”¹è‡ªå¢æ¡ä»¶alter table t_student add constraint ck_stu_sex check (sex &#x3D; &#39;ç”·&#39; || sex &#x3D; &#39;å¥³&#39;);alter table t_student add constraint ck_stu_age check (age &gt;&#x3D; 18 and age &lt;&#x3D; 50);alter table t_student add constraint uq_stu_email unique (email);-- æŸ¥çœ‹è¡¨ç»“æ„ï¼šdesc t_student;</code></pre><p>éªŒè¯çº¦æŸæ·»åŠ æˆåŠŸï¼š</p><img src="MySQL/20210701105406.png" alt="image-20210701105405972" style="zoom:67%;" /><h2 id="2-å¤–é”®çº¦æŸ">2. å¤–é”®çº¦æŸ</h2><ul><li>å¤–é”®çº¦æŸï¼ˆFOREIGN KEYï¼Œç¼©å†™FKï¼‰æ˜¯ç”¨æ¥å®ç°æ•°æ®åº“è¡¨çš„å‚ç…§å®Œæ•´æ€§çš„ã€‚<strong>å¤–é”®çº¦æŸå¯ä»¥ä½¿ä¸¤å¼ è¡¨ç´§å¯†çš„ç»“åˆèµ·æ¥ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹ä¿®æ”¹æˆ–è€…åˆ é™¤çš„çº§è”æ“ä½œæ—¶ï¼Œä¼šä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚</strong></li><li>å¤–é”®æ˜¯æŒ‡è¡¨ä¸­æŸä¸ªå­—æ®µçš„å€¼ä¾èµ–äºå¦ä¸€å¼ è¡¨ä¸­æŸä¸ªå­—æ®µçš„å€¼ï¼Œè€Œè¢«ä¾èµ–çš„å­—æ®µå¿…é¡»å…·æœ‰ä¸»é”®çº¦æŸæˆ–è€…å”¯ä¸€çº¦æŸã€‚è¢«ä¾èµ–çš„è¡¨æˆ‘ä»¬é€šå¸¸ç§°ä¹‹ä¸ºçˆ¶è¡¨æˆ–è€…ä¸»è¡¨ï¼Œè®¾ç½®å¤–é”®çº¦æŸçš„è¡¨ç§°ä¸ºå­è¡¨æˆ–è€…ä»è¡¨ã€‚</li><li>åªæœ‰<strong>è¡¨çº§çº¦æŸ</strong>æ²¡æœ‰åˆ—çº§çº¦æŸ</li></ul><h5 id="å®ä¾‹å››">å®ä¾‹å››</h5><p>ä¸»è¡¨ï¼ˆçˆ¶è¡¨ï¼‰ï¼šç­çº§è¡¨  -  ç­çº§ç¼–å· - ä¸»é”®</p><p>ä»è¡¨ï¼ˆå­è¡¨ï¼‰ï¼šå­¦ç”Ÿè¡¨ - ç­çº§ç¼–å· - å¤–é”®</p><ol><li><p>åˆ›å»ºçˆ¶è¡¨â€”ç­çº§è¡¨ï¼š</p></li><li><ul><li><p>cno(ä¸»é”®ã€è‡ªå¢)ï¼›cnameï¼ˆä¸ä¸ºç©ºï¼‰ï¼›roomï¼›</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å…ˆåˆ é™¤è¡¨ï¼Œå…ˆåˆ é™¤ä»è¡¨å†åˆ é™¤çˆ¶è¡¨drop table t_student;drop table t_class;-- å…ˆåˆ›å»ºçˆ¶è¡¨ï¼šç­çº§è¡¨ï¼šcreate table t_class(        cno int(4) primary key auto_increment,        cname varchar(10) not null,        room char(4))</code></pre></li></ul></li><li><p>åˆ›å»ºä»è¡¨â€”å­¦ç”Ÿè¡¨ï¼š</p><ul><li><p>sno(ä¸»é”®ã€è‡ªå¢)ï¼›snameï¼ˆä¸ä¸ºç©ºï¼‰ï¼›classnoï¼ˆå–å€¼å‚è€ƒt_classè¡¨ä¸­çš„cnoå­—æ®µï¼Œä¸è¦æ±‚å­—æ®µåå­—å®Œå…¨é‡å¤ï¼Œä½†æ˜¯ç±»å‹é•¿åº¦å®šä¹‰ å°½é‡è¦æ±‚ç›¸åŒã€‚);</p></li><li><p><strong>æ·»åŠ å¤–é”®çº¦æŸ</strong>ï¼š</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- æ·»åŠ å­¦ç”Ÿè¡¨ï¼Œæ·»åŠ å¤–é”®çº¦æŸï¼šcreate table t_student(        sno int(6) primary key auto_increment,         sname varchar(5) not null,         classno int(4),-- å–å€¼å‚è€ƒt_classè¡¨ä¸­çš„cnoå­—æ®µï¼Œä¸è¦æ±‚å­—æ®µåå­—å®Œå…¨é‡å¤ï¼Œä½†æ˜¯ç±»å‹é•¿åº¦å®šä¹‰ å°½é‡è¦æ±‚ç›¸åŒã€‚    -- å¤–é”®çº¦æŸï¼š        constraint fk_stu_classno foreign key (classno) references t_class (cno)    );</code></pre></li></ul><ul><li><p><strong>åˆ é™¤å¤–é”®çº¦æŸ</strong></p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- åˆ é™¤å¤–é”®çº¦æŸalter table EMPdrop foreign key FK_DEPTNO</code></pre></li></ul></li><li><p>æ·»åŠ æ•°æ®ï¼š</p></li><li><p>å¯ä»¥ä¸€æ¬¡æ€§æ·»åŠ å¤šæ¡è®°å½•ï¼š</p> <pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å¯ä»¥ä¸€æ¬¡æ€§æ·»åŠ å¤šæ¡è®°å½•ï¼šinsert into t_class values (null,&#39;java001&#39;,&#39;r803&#39;),(null,&#39;java002&#39;,&#39;r416&#39;),(null,&#39;å¤§æ•°æ®001&#39;,&#39;r103&#39;);insert into t_student values (null,&#39;å¼ ä¸‰&#39;,1),(null,&#39;æå››&#39;,1),(null,&#39;ç‹äº”&#39;,2),(null,&#39;æœ±å…­&#39;,3);</code></pre></li><li><p>æŸ¥è¯¢ç­çº§è¡¨ï¼š</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- æŸ¥çœ‹ç­çº§è¡¨å’Œå­¦ç”Ÿè¡¨ï¼šselect * from t_class;select * from t_student;</code></pre></li><li><p><strong>æ·»åŠ å¤–é”®çš„æ•ˆæœ</strong>ï¼š</p><ul><li>åˆ é™¤ç­çº§ä¼šå‡ºé”™</li></ul><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å°è¯•åˆ é™¤ç­çº§delete from t_class where cno &#x3D; 1;</code></pre><img src="MySQL/20210701111051.png" alt="image-20210701111051536" style="zoom:67%;" /></li></ol><h4 id="å¤–é”®ç­–ç•¥ï¼š"><strong>å¤–é”®ç­–ç•¥ï¼š</strong></h4><p>ç›´æ¥åˆ é™¤ç­çº§ä¼šé”™è¯¯ï¼Œæœ‰æ—¶å€™å¿…é¡»åˆ ï¼Œå¯ä»¥åŠ å…¥å¤–é”®ç­–ç•¥</p><h6 id="ç­–ç•¥ä¸€ï¼šno-action-ä¸å…è®¸æ“ä½œ">ç­–ç•¥ä¸€ï¼šno action ä¸å…è®¸æ“ä½œ</h6><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- ç­–ç•¥1ï¼šno action ä¸å…è®¸æ“ä½œ-- é€šè¿‡æ“ä½œsqlæ¥å®Œæˆï¼š-- å…ˆæŠŠç­çº§2çš„å­¦ç”Ÿå¯¹åº”çš„ç­çº§ æ”¹ä¸ºnull update t_student set classno &#x3D; null where classno &#x3D; 2;-- ç„¶åå†åˆ é™¤ç­çº§2   delete from t_class where cno &#x3D; 2;</code></pre><p>ç»“æœï¼š</p><img src="MySQL/20210701112307.png" alt="image-20210701112307207" style="zoom:67%;" /><img src="MySQL/20210701112344.png" alt="image-20210701112344539" style="zoom: 50%;" /><h6 id="ç­–ç•¥äºŒï¼šä½¿ç”¨cascadeçº§è”æ“ä½œ">ç­–ç•¥äºŒï¼šä½¿ç”¨cascadeçº§è”æ“ä½œ</h6><p>æ“ä½œä¸»è¡¨çš„æ—¶å€™å½±å“ä»è¡¨çš„å¤–é”®</p><ul><li><p>å…ˆåˆ é™¤å¤–é”®çº¦æŸ</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- ç­–ç•¥2ï¼šcascade çº§è”æ“ä½œï¼šæ“ä½œä¸»è¡¨çš„æ—¶å€™å½±å“ä»è¡¨çš„å¤–é”®ä¿¡æ¯ï¼šalter table t_student drop foreign key fk_stu_classno;</code></pre></li><li><p>é‡æ–°æ·»åŠ å¤–é”®çº¦æŸï¼ˆå¢åŠ ä¸€ä¸ªçº§è”æ“ä½œï¼‰</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- é‡æ–°æ·»åŠ å¤–é”®çº¦æŸï¼šalter table t_student add constraint fk_stu_classno foreign key (classno) references t_class (cno) on update cascade on delete cascade;</code></pre></li><li><p>è¯•ç€æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼š</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- è¯•è¯•æ›´æ–°ï¼šupdate t_class set cno &#x3D; 5 where cno &#x3D; 3;-- è¯•è¯•åˆ é™¤ï¼šdelete from t_class where cno &#x3D; 5;</code></pre><p>ç»“æœ</p><img src="MySQL/20210701113031.png" alt="image-20210701113031631" style="zoom:50%;" /></li></ul><h6 id="ç­–ç•¥ä¸‰ï¼šset-null-ç½®ç©ºæ“ä½œ">ç­–ç•¥ä¸‰ï¼šset null     ç½®ç©ºæ“ä½œ</h6><ul><li><p>å…ˆåˆ é™¤ä¹‹å‰çš„å¤–é”®çº¦æŸ</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å…ˆåˆ é™¤ä¹‹å‰çš„å¤–é”®çº¦æŸï¼šalter table t_student drop foreign key fk_stu_classno;</code></pre></li><li><p>é‡æ–°æ·»åŠ å¤–é”®çº¦æŸ</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- é‡æ–°æ·»åŠ å¤–é”®çº¦æŸï¼šalter table t_student add constraint fk_stu_classno foreign key (classno) references t_class (cno) on update set null on delete set null;</code></pre></li><li><p>è¯•ç€æ›´æ–°æ“ä½œ</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- æ›´æ–°update t_class set cno &#x3D; 5 whwere con &#x3D; 1;</code></pre><p>ç»“æœï¼š</p><img src="MySQL/20210701142452.png" alt="image-20210701142451962" style="zoom:67%;" /><img src="MySQL/20210701142510.png" alt="image-20210701142510409" style="zoom: 50%;" /></li></ul><p>æ³¨ï¼šç­–ç•¥2 çº§è”æ“ä½œ  å’Œ  ç­–ç•¥2 çš„  åˆ é™¤æ“ä½œ  å¯ä»¥æ··ç€ä½¿ç”¨</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">alter table t_student add constraint fk_stu_classno foreign key (classno) references t_class (cno) on update cascade on delete set null ;</code></pre><p>åº”ç”¨åœºåˆï¼š</p><p>â€“ ï¼ˆ1ï¼‰æœ‹å‹åœˆåˆ é™¤ï¼Œç‚¹èµã€‚ç•™è¨€éƒ½åˆ é™¤  â€“  çº§è”æ“ä½œ<br>â€“ ï¼ˆ2ï¼‰è§£æ•£ç­çº§ï¼Œå¯¹åº”çš„å­¦ç”Ÿ ç½®ä¸ºç­çº§ä¸ºnullå°±å¯ä»¥äº†ï¼Œ-- set null</p><h1>DQLæŸ¥è¯¢æ“ä½œ*</h1><h2 id="1-å¸¸è§è¡¨çš„å‡†å¤‡">1. å¸¸è§è¡¨çš„å‡†å¤‡</h2><h3 id="éƒ¨é—¨è¡¨-dept">éƒ¨é—¨è¡¨(dept)</h3><pre class="language-mysql" data-language="mysql"><code class="language-mysql">create table DEPT(    DEPTNO int(2) not null,    DNAME  VARCHAR(14),    LOC    VARCHAR(13)  );  alter table DEPT   add constraint PK_DEPT primary key (DEPTNO); </code></pre><h3 id="å‘˜å·¥è¡¨ï¼ˆemp">å‘˜å·¥è¡¨ï¼ˆemp)</h3><pre class="language-mysql" data-language="mysql"><code class="language-mysql">create table EMP  (    EMPNO    int(4) primary key,    ENAME    VARCHAR(10),    JOB      VARCHAR(9),    MGR      int(4),    HIREDATE DATE,    SAL      double(7,2),    COMM     double(7,2),    DEPTNO   int(2)  );  alter table EMP    add constraint FK_DEPTNO foreign key (DEPTNO)    references DEPT (DEPTNO);  </code></pre><h3 id="è–ªèµ„ç™»è®°è¡¨-salgrade">è–ªèµ„ç™»è®°è¡¨(salgrade)</h3><pre class="language-mysql" data-language="mysql"><code class="language-mysql">create table SALGRADE  (    GRADE int primary key,    LOSAL double(7,2),    HISAL double(7,2)  );  </code></pre><h3 id="å¥–é‡‘è¡¨-bonus">å¥–é‡‘è¡¨(bonus)</h3><pre class="language-mysql" data-language="mysql"><code class="language-mysql">create table BONUS  (    ENAME VARCHAR(10),    JOB   VARCHAR(9),    SAL   double(7,2),    COMM  double(7,2)  );  </code></pre><h3 id="æ“ä½œ">æ“ä½œ</h3><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- DEPTinsert into DEPT (DEPTNO, DNAME, LOC)  values (10, &#39;ACCOUNTING&#39;, &#39;NEW YORK&#39;);  insert into DEPT (DEPTNO, DNAME, LOC)  values (20, &#39;RESEARCH&#39;, &#39;DALLAS&#39;);  insert into DEPT (DEPTNO, DNAME, LOC)  values (30, &#39;SALES&#39;, &#39;CHICAGO&#39;);  insert into DEPT (DEPTNO, DNAME, LOC)  values (40, &#39;OPERATIONS&#39;, &#39;BOSTON&#39;);  -- EMPinsert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  values (7369, &#39;SMITH&#39;, &#39;CLERK&#39;, 7902, &#39;1980-12-17&#39;, 800, null, 20);  insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  values (7499, &#39;ALLEN&#39;, &#39;SALESMAN&#39;, 7698, &#39;1981-02-20&#39;, 1600, 300, 30);  insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  values (7521, &#39;WARD&#39;, &#39;SALESMAN&#39;, 7698, &#39;1981-02-22&#39;, 1250, 500, 30);  insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  values (7566, &#39;JONES&#39;, &#39;MANAGER&#39;, 7839, &#39;1981-04-02&#39;, 2975, null, 20);  insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  values (7654, &#39;MARTIN&#39;, &#39;SALESMAN&#39;, 7698, &#39;1981-09-28&#39;, 1250, 1400, 30);  insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  values (7698, &#39;BLAKE&#39;, &#39;MANAGER&#39;, 7839, &#39;1981-05-01&#39;, 2850, null, 30);  insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  values (7782, &#39;CLARK&#39;, &#39;MANAGER&#39;, 7839, &#39;1981-06-09&#39;, 2450, null, 10);  insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  values (7788, &#39;SCOTT&#39;, &#39;ANALYST&#39;, 7566, &#39;1987-04-19&#39;, 3000, null, 20);  insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  values (7839, &#39;KING&#39;, &#39;PRESIDENT&#39;, null, &#39;1981-11-17&#39;, 5000, null, 10);  insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  values (7844, &#39;TURNER&#39;, &#39;SALESMAN&#39;, 7698, &#39;1981-09-08&#39;, 1500, 0, 30);  insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  values (7876, &#39;ADAMS&#39;, &#39;CLERK&#39;, 7788, &#39;1987-05-23&#39;, 1100, null, 20);  insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  values (7900, &#39;JAMES&#39;, &#39;CLERK&#39;, 7698, &#39;1981-12-03&#39;, 950, null, 30);  insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  values (7902, &#39;FORD&#39;, &#39;ANALYST&#39;, 7566, &#39;1981-12-03&#39;, 3000, null, 20);  insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  values (7934, &#39;MILLER&#39;, &#39;CLERK&#39;, 7782, &#39;1982-01-23&#39;, 1300, null, 10);  -- SALGRADEinsert into SALGRADE (GRADE, LOSAL, HISAL)  values (1, 700, 1200);  insert into SALGRADE (GRADE, LOSAL, HISAL)  values (2, 1201, 1400);  insert into SALGRADE (GRADE, LOSAL, HISAL)  values (3, 1401, 2000);  insert into SALGRADE (GRADE, LOSAL, HISAL)  values (4, 2001, 3000);  insert into SALGRADE (GRADE, LOSAL, HISAL)  values (5, 3001, 9999);  -- æŸ¥çœ‹è¡¨ï¼šselect * from dept; -- éƒ¨é—¨è¡¨ï¼šdept:department éƒ¨åˆ† ï¼Œloc - location ä½ç½®select * from emp;-- å‘˜å·¥è¡¨ï¼šemp:employee å‘˜å·¥   ,mgr :managerä¸Šçº§é¢†å¯¼ç¼–å·ï¼Œhiredate å…¥èŒæ—¥æœŸ  firedate è§£é›‡æ—¥æœŸ ï¼Œcommonï¼šè¡¥åŠ©-- deptno å¤–é”® å‚è€ƒ  dept - deptnoå­—æ®µ-- mgr å¤–é”®  å‚è€ƒ  è‡ªèº«è¡¨emp - empno  äº§ç”Ÿäº†è‡ªå…³è”select * from salgrade;-- losal - lowsal-- hisal - highsalselect * from bonus;</code></pre><h3 id="ç»“æœ-è¡¨æ ¼å½¢å¼">ç»“æœ(è¡¨æ ¼å½¢å¼)</h3><img src="MySQL/20210701143713.png" alt="image-20210701143713377" style="zoom:67%;" /><img src="MySQL/20210701143726.png" alt="image-20210701143726512" style="zoom:67%;" /><img src="MySQL/20210701143737.png" alt="image-20210701143737874" style="zoom:67%;" /><img src="MySQL/20210701143749.png" alt="image-20210701143749663" style="zoom:67%;" /><h2 id="2-å•è¡¨æŸ¥è¯¢">2.  å•è¡¨æŸ¥è¯¢</h2><h3 id="2-1-ç®€å•çš„SQLæŸ¥è¯¢">2.1 ç®€å•çš„SQLæŸ¥è¯¢</h3><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å¯¹empè¡¨æŸ¥è¯¢ï¼šselect * from emp; -- *ä»£è¡¨æ‰€æœ‰æ•°æ®-- æ˜¾ç¤ºéƒ¨åˆ†åˆ—ï¼šselect empno,ename,sal from emp;-- æ˜¾ç¤ºéƒ¨åˆ†è¡Œï¼šwhereå­å¥select * from emp where sal &gt; 2000;-- æ˜¾ç¤ºéƒ¨åˆ†åˆ—ï¼Œéƒ¨åˆ†è¡Œï¼šselect empno,ename,job,mgr from emp where sal &gt; 2000;-- èµ·åˆ«åï¼šselect empno å‘˜å·¥ç¼–å·,ename å§“å,sal å·¥èµ„ from emp; -- as çœç•¥ï¼Œ&#39;&#39;æˆ–è€…&quot;&quot;çœç•¥äº†-- as alias åˆ«åselect empno as å‘˜å·¥ç¼–å·,ename as å§“å,sal as å·¥èµ„ from emp;select empno as &#39;å‘˜å·¥ç¼–å·&#39;,ename as &quot;å§“å&quot;,sal as å·¥èµ„ from emp;-- &gt; 1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;ç¼–å·,ename as &quot;å§“ å&quot;,sal as å·¥èµ„ from emp&#39; at line 1-- é”™è¯¯åŸå› ï¼šåœ¨åˆ«åä¸­æœ‰ç‰¹æ®Šç¬¦å·çš„æ—¶å€™ï¼Œ&#39;&#39;æˆ–è€…&quot;&quot;ä¸å¯ä»¥çœç•¥ä¸å†™select empno as å‘˜å·¥ ç¼–å·,ename as &quot;å§“ å&quot;,sal as å·¥èµ„ from emp;-- ç®—æœ¯è¿ç®—ç¬¦ï¼šselect empno,ename,sal,sal+1000 as &#39;æ¶¨è–ªå&#39;,deptno from emp where sal &lt; 2500;select empno,ename,sal,comm,sal+comm from emp;  -- ï¼Ÿï¼Ÿï¼Ÿåé¢å†è¯´-- å»é‡æ“ä½œï¼šselect job from emp;select distinct job from emp;select job,deptno from emp;select distinct job,deptno from emp; -- å¯¹åé¢çš„æ‰€æœ‰åˆ—ç»„åˆ å»é‡ ï¼Œè€Œä¸æ˜¯å•ç‹¬çš„æŸä¸€åˆ—å»é‡-- æ’åºï¼šselect * from emp order by sal; -- é»˜è®¤æƒ…å†µä¸‹æ˜¯æŒ‰ç…§å‡åºæ’åˆ—çš„select * from emp order by sal asc; -- asc å‡åºï¼Œå¯ä»¥é»˜è®¤ä¸å†™select * from emp order by sal desc; -- desc é™åºselect * from emp order by sal asc ,deptno desc; -- åœ¨å·¥èµ„å‡åºçš„æƒ…å†µä¸‹ï¼ŒdeptnoæŒ‰ç…§é™åºæ’åˆ—</code></pre><h3 id="2-2-whereå­å¥">2.2 whereå­å¥</h3><p>å°†è¿‡æ»¤æ¡ä»¶æ”¾åœ¨whereå­å¥çš„åé¢ï¼Œå¯ä»¥ç­›é€‰/è¿‡æ»¤å‡ºæˆ‘ä»¬æƒ³è¦çš„ç¬¦åˆæ¡ä»¶çš„æ•°æ®</p><ul><li><p>åŠ å…³ç³»è¿ç®—ç¬¦</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- where å­å¥ + å…³ç³»è¿ç®—ç¬¦select * from emp where deptno &#x3D; 10;select * from emp where deptno &gt; 10;select * from emp where deptno &gt;&#x3D; 10;select * from emp where deptno &lt; 10;select * from emp where deptno &lt;&#x3D; 10;select * from emp where deptno &lt;&gt; 10;select * from emp where deptno !&#x3D; 10;select * from emp where job &#x3D; &#39;CLERK&#39;; select * from emp where job &#x3D; &#39;clerk&#39;; -- é»˜è®¤æƒ…å†µä¸‹ä¸åŒºåˆ†å¤§å°å†™ select * from emp where binary job &#x3D; &#39;clerk&#39;; -- binaryåŒºåˆ†å¤§å°å†™select * from emp where hiredate &lt; &#39;1981-12-25&#39;;</code></pre></li><li><p>åŠ é€»è¾‘è¿ç®—ç¬¦</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- where å­å¥ + é€»è¾‘è¿ç®—ç¬¦ï¼šand select * from emp where sal &gt; 1500 and sal &lt; 3000;  -- (1500,3000)select * from emp where sal &gt; 1500 &amp;&amp; sal &lt; 3000; select * from emp where sal &gt; 1500 and sal &lt; 3000 order by sal;select * from emp where sal between 1500 and 3000; -- [1500,3000]-- where å­å¥ + é€»è¾‘è¿ç®—ç¬¦ï¼šorselect * from emp where deptno &#x3D; 10 or deptno &#x3D; 20;select * from emp where deptno &#x3D; 10 || deptno &#x3D; 20;select * from emp where deptno in (10,20);select * from emp where job in (&#39;MANAGER&#39;,&#39;CLERK&#39;,&#39;ANALYST&#39;);</code></pre></li><li><p>åŠ æ¨¡ç³ŠæŸ¥è¯¢</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- whereå­å¥ + æ¨¡ç³ŠæŸ¥è¯¢ï¼š-- æŸ¥è¯¢åå­—ä¸­å¸¦Açš„å‘˜å·¥  -- %ä»£è¡¨ä»»æ„å¤šä¸ªå­—ç¬¦ 0,1,2ï¼Œ.....select * from emp where ename like &#39;%A%&#39; ;-- -ä»»æ„ä¸€ä¸ªå­—ç¬¦select * from emp where ename like &#39;__A%&#39; ;</code></pre></li><li><p>å…³äºnullçš„åˆ¤æ–­</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å…³äºnullçš„åˆ¤æ–­ï¼šselect * from emp where comm is null;select * from emp where comm is not null;</code></pre></li><li><p>å°æ‹¬å·çš„ä½¿ç”¨ï¼šå› ä¸ºä¸åŒè¿ç®—ç¬¦çš„ä¼˜å…ˆçº§åˆ«ä¸åŒï¼ŒåŠ æ‹¬å·ä¸ºäº†å¯è¯»æ€§</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å°æ‹¬å·çš„ä½¿ç”¨  ï¼šå› ä¸ºä¸åŒçš„è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§åˆ«ä¸åŒï¼ŒåŠ æ‹¬å·ä¸ºäº†å¯è¯»æ€§select * from emp where job &#x3D; &#39;SALESMAN&#39; or job &#x3D; &#39;CLERK&#39; and sal &gt;&#x3D;1500; -- å…ˆandå†or  and &gt; orselect * from emp where job &#x3D; &#39;SALESMAN&#39; or (job &#x3D; &#39;CLERK&#39; and sal &gt;&#x3D;1500); select * from emp where (job &#x3D; &#39;SALESMAN&#39; or job &#x3D; &#39;CLERK&#39;) and sal &gt;&#x3D;1500;</code></pre></li></ul><h3 id="2-3-å‡½æ•°">2.3 å‡½æ•°</h3><p><em><strong>é™¤äº†å¤šè¡Œå‡½æ•°ï¼ˆmax,min,count,sum,avgï¼‰ï¼Œéƒ½æ˜¯å•è¡Œå‡½æ•°</strong></em></p><h4 id="å•è¡Œå‡½æ•°">- å•è¡Œå‡½æ•°</h4><h5 id="1-å­—ç¬¦ä¸²å‡½æ•°">1. å­—ç¬¦ä¸²å‡½æ•°</h5><table><thead><tr><th><strong>å‡½æ•°</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td>CONCAT(str1, str2, Â·Â·Â·, strn)</td><td>å°†str1ã€str2Â·Â·Â·strnæ‹¼æ¥æˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²</td></tr><tr><td>INSERT(str, index, n,  newstr)</td><td>å°†å­—ç¬¦ä¸²strä»ç¬¬indexä½ç½®å¼€å§‹çš„nä¸ªå­—ç¬¦æ›¿æ¢æˆå­—ç¬¦ä¸²newstr</td></tr><tr><td>LENGTH(str)</td><td>è·å–å­—ç¬¦ä¸²strçš„é•¿åº¦</td></tr><tr><td>LOWER(str)</td><td>å°†å­—ç¬¦ä¸²strä¸­çš„æ¯ä¸ªå­—ç¬¦è½¬æ¢ä¸ºå°å†™</td></tr><tr><td>UPPER(str)</td><td>å°†å­—ç¬¦ä¸²strä¸­çš„æ¯ä¸ªå­—ç¬¦è½¬æ¢ä¸ºå¤§å†™</td></tr><tr><td>LEFT(str, n)</td><td>è·å–å­—ç¬¦ä¸²stræœ€å·¦è¾¹çš„nä¸ªå­—ç¬¦</td></tr><tr><td>RIGHT(str, n)</td><td>è·å–å­—ç¬¦ä¸²stræœ€å³è¾¹çš„nä¸ªå­—ç¬¦</td></tr><tr><td>LPAD(str, n, pad)</td><td>ä½¿ç”¨å­—ç¬¦ä¸²padåœ¨strçš„æœ€å·¦è¾¹è¿›è¡Œå¡«å……ï¼Œç›´åˆ°é•¿åº¦ä¸ºnä¸ªå­—ç¬¦ä¸ºæ­¢</td></tr><tr><td>RPAD(str, n, pad)</td><td>ä½¿ç”¨å­—ç¬¦ä¸²padåœ¨strçš„æœ€å³è¾¹è¿›è¡Œå¡«å……ï¼Œç›´åˆ°é•¿åº¦ä¸ºnä¸ªå­—ç¬¦ä¸ºæ­¢</td></tr><tr><td>LTRIM(str)</td><td>å»é™¤å­—ç¬¦ä¸²strå·¦ä¾§çš„ç©ºæ ¼</td></tr><tr><td>RTRIM(str)</td><td>å»é™¤å­—ç¬¦ä¸²strå³ä¾§çš„ç©ºæ ¼</td></tr><tr><td>TRIM(str)</td><td>å»é™¤å­—ç¬¦ä¸²strå·¦å³ä¸¤ä¾§çš„ç©ºæ ¼</td></tr><tr><td>REPLACE(str,oldstr,newstr)</td><td>ç”¨å­—ç¬¦ä¸²newstræ›¿æ¢å­—ç¬¦ä¸²strä¸­æ‰€æœ‰çš„å­å­—ç¬¦ä¸²oldstr</td></tr><tr><td>REVERSE(str)</td><td>å°†å­—ç¬¦ä¸²strä¸­çš„å­—ç¬¦é€†åº</td></tr><tr><td>STRCMP(str1,  str2)</td><td>æ¯”è¾ƒå­—ç¬¦ä¸²str1å’Œstr2çš„å¤§å°</td></tr><tr><td>SUBSTRING(str,index,n)</td><td>è·å–ä»å­—ç¬¦ä¸²strçš„indexä½ç½®å¼€å§‹çš„nä¸ªå­—ç¬¦</td></tr></tbody></table><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- 1.å­—ç¬¦ä¸²å‡½æ•°select ename,length(ename),substring(ename,2,3) from emp;-- substringå­—ç¬¦ä¸²æˆªå–ï¼Œ2:ä»å­—ç¬¦ä¸‹æ ‡ä¸º2å¼€å§‹ï¼Œ3ï¼šæˆªå–é•¿åº¦3    ï¼ˆä¸‹æ ‡ä»1å¼€å§‹ï¼‰</code></pre><p>æ˜¾ç¤ºç»“æœï¼š</p><img src="MySQL/20210630210116.png" alt="image-20210630210115889" style="zoom:50%;" /><h5 id="2-æ•°å€¼å‡½æ•°">2. æ•°å€¼å‡½æ•°</h5><table><thead><tr><th style="text-align:left"><strong>å‡½æ•°</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td style="text-align:left">ABS(num)</td><td>è¿”å›numçš„ç»å¯¹å€¼</td></tr><tr><td style="text-align:left">CEIL(num)</td><td>è¿”å›å¤§äºnumçš„æœ€å°æ•´æ•°ï¼ˆå‘ä¸Šå–æ•´ï¼‰</td></tr><tr><td style="text-align:left">FLOOR(num)</td><td>è¿”å›å°äºnumçš„æœ€å¤§æ•´æ•°ï¼ˆå‘ä¸‹å–æ•´ï¼‰</td></tr><tr><td style="text-align:left">MOD(num1, num2)</td><td>è¿”å›num1/num2çš„ä½™æ•°ï¼ˆå–æ¨¡ï¼‰</td></tr><tr><td style="text-align:left">PI()</td><td>è¿”å›åœ†å‘¨ç‡çš„å€¼</td></tr><tr><td style="text-align:left">POW(num,n)/POWER(num,  n)</td><td>è¿”å›numçš„næ¬¡æ–¹</td></tr><tr><td style="text-align:left">RAND(num)</td><td>è¿”å›0~1ä¹‹é—´çš„éšæœºæ•°</td></tr><tr><td style="text-align:left">ROUND(num, n)</td><td>è¿”å›xå››èˆäº”å…¥åçš„å€¼ï¼Œè¯¥å€¼ä¿ç•™åˆ°å°æ•°ç‚¹ånä½</td></tr><tr><td style="text-align:left">TRUNCATE(num, n)</td><td>è¿”å›numè¢«èˆå»è‡³å°æ•°ç‚¹ånä½çš„å€¼</td></tr></tbody></table><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- 2.æ•°å€¼å‡½æ•°select abs(-5),ceil(5.3),floor(5.9),round(3.14) from dual; -- dualå®é™…å°±æ˜¯ä¸€ä¸ªä¼ªè¡¨select abs(-5) ç»å¯¹å€¼,ceil(5.3) å‘ä¸Šå–æ•´,floor(5.9) å‘ä¸‹å–æ•´,round(3.14) å››èˆäº”å…¥;  -- å¦‚æœæ²¡æœ‰whereæ¡ä»¶çš„è¯ï¼Œfrom dualå¯ä»¥çœç•¥ä¸å†™select ceil(sal) from emp;select 10&#x2F;3,10%3,mod(10,3) ;</code></pre><p>æ˜¾ç¤ºç»“æœï¼š</p><img src="MySQL/20210630210456.png" alt="image-20210630210456370" style="zoom:50%;" /><h5 id="3-æ—¥æœŸä¸æ—¶é—´å‡½æ•°">3. æ—¥æœŸä¸æ—¶é—´å‡½æ•°</h5><table><thead><tr><th><strong>å‡½æ•°</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td>CURDATE()</td><td>è¿”å›å½“å‰æ—¥æœŸ</td></tr><tr><td>CURTIME()</td><td>è¿”å›å½“å‰æ—¶é—´</td></tr><tr><td>NOW()</td><td>è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td></tr><tr><td>SYSDATE()</td><td>è¿”å›è¯¥å‡½æ•°æ‰§è¡Œæ—¶çš„æ—¥æœŸå’Œæ—¶é—´</td></tr><tr><td>DAYOFYEAR(date)</td><td>è¿”å›æ—¥æœŸdateä¸ºä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©</td></tr><tr><td>WEEK(date)/WEEKOFYEAR(date)</td><td>è¿”å›æ—¥æœŸdateä¸ºä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨</td></tr><tr><td>DATE_FORMAT(date,  format)</td><td>è¿”å›æŒ‰å­—ç¬¦ä¸²formatæ ¼å¼åŒ–åçš„æ—¥æœŸdate</td></tr><tr><td>DATE_ADD(date,  INTERVAL expr unit)    /ADDDATE(date,  INTERVAL expr unit)</td><td>è¿”å›dateåŠ ä¸Šä¸€ä¸ªæ—¶é—´é—´éš”åçš„æ–°æ—¶é—´å€¼</td></tr><tr><td>DATE_SUB(date,  INTERVAL expr unit)    /SUBDATE(date,  INTERVAL expr unit)</td><td>è¿”å›dateå‡å»ä¸€ä¸ªæ—¶é—´é—´éš”åçš„æ–°æ—¶é—´å€¼</td></tr><tr><td>DATEDIFF(date1,  date2)</td><td>è¿”å›èµ·å§‹æ—¥æœŸdate1ä¸ç»“æŸæ—¥æœŸdate2ä¹‹é—´çš„é—´éš”å¤©æ•°</td></tr></tbody></table><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- 3.æ—¥æœŸä¸æ—¶é—´å‡½æ•° select * from emp;select curdate(),curtime() ; -- curdate()å¹´æœˆæ—¥ curtime()æ—¶åˆ†ç§’select now(),sysdate(),sleep(3),now(),sysdate() from dual; -- now(),sysdate() å¹´æœˆæ—¥æ—¶åˆ†ç§’insert into emp values (9999,&#39;lili&#39;,&#39;SALASMAN&#39;,7698,now(),1000,null,30);-- now()å¯ä»¥è¡¨ç¤ºå¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼Œä½†æ˜¯æ’å…¥æ•°æ®çš„æ—¶å€™è¿˜æ˜¯è¦å‚ç…§è¡¨çš„ç»“æ„çš„desc emp;</code></pre><img src="MySQL/20210630223758.png" alt="image-20210630223758495" style="zoom:50%;" /><img src="MySQL/20210630223819.png" alt="image-20210630223819827" style="zoom:50%;" /><img src="MySQL/20210630223829.png" alt="image-20210630223829883" style="zoom:50%;" /><h5 id="4-æµç¨‹å‡½æ•°">4. æµç¨‹å‡½æ•°</h5><img src="MySQL/20210630224323.png" alt="image-20210630224323874" style="zoom:67%;" /><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- 4.æµç¨‹å‡½æ•°-- ifç›¸å…³select empno,ename,sal,if(sal&gt;&#x3D;2500,&#39;é«˜è–ª&#39;,&#39;åº•è–ª&#39;) as &#39;è–ªèµ„ç­‰çº§&#39; from emp; -- if-else åŒåˆ†æ”¯ç»“æ„select empno,ename,sal,comm,sal+ifnull(comm,0) from emp; -- å¦‚æœcommæ˜¯nullï¼Œé‚£ä¹ˆå–å€¼ä¸º0 -- å•åˆ†æ”¯select nullif(1,1),nullif(1,2) from dual; --  å¦‚æœvalue1ç­‰äºvalue2ï¼Œåˆ™è¿”å›nullï¼Œå¦åˆ™è¿”å›value1  -- caseç›¸å…³ï¼š-- caseç­‰å€¼åˆ¤æ–­select empno,ename,job,case job  when &#39;CLERK&#39; then &#39;åº—å‘˜&#39; when &#39;SALESMAN&#39;  then &#39;é”€å”®&#39; when &#39;MANAGER&#39; then &#39;ç»ç†&#39; else &#39;å…¶ä»–&#39;end &#39;å²—ä½&#39;,sal from emp;-- caseåŒºé—´åˆ¤æ–­:select empno,ename,sal,case  when sal&lt;&#x3D;1000 then &#39;A&#39; when sal&lt;&#x3D;2000 then &#39;B&#39; when sal&lt;&#x3D;3000 then &#39;C&#39; else &#39;D&#39;end &#39;å·¥èµ„ç­‰çº§&#39;,deptno from emp;from emp;</code></pre><h5 id="5-JSONå‡½æ•°">5. JSONå‡½æ•°</h5><img src="MySQL/20210630224430.png" alt="image-20210630224430595" style="zoom:67%;" /><h5 id="6-å…¶ä»–å‡½æ•°">6. å…¶ä»–å‡½æ•°</h5><img src="MySQL/20210630224453.png" alt="image-20210630224453894" style="zoom:67%;" /><pre class="language-mysql" data-language="mysql"><code class="language-mysql"> -- 6.å…¶ä»–å‡½æ•°select database(),user(),version() from dual;</code></pre><h4 id="å¤šè¡Œå‡½æ•°">- å¤šè¡Œå‡½æ•°</h4><p>å¯¹ä¸€ç»„æ•°æ®è¿›è¡Œè¿ç®—ï¼Œé’ˆå¯¹ä¸€ç»„æ•°æ®ï¼ˆå¤šè¡Œè®°å½•ï¼‰åªè¿”å›ä¸€ä¸ªç»“æœï¼Œä¹Ÿç§°<strong>åˆ†ç»„å‡½æ•°</strong></p><img src="MySQL/20210630224611.png" alt="image-20210630224611608" style="zoom: 67%;" /><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å¤šè¡Œå‡½æ•°ï¼šselect max(sal),min(sal),count(sal),sum(sal),sum(sal)&#x2F;count(sal),avg(sal) from emp;select * from emp;-- å¤šè¡Œå‡½æ•°è‡ªåŠ¨å¿½ç•¥nullå€¼select max(comm),min(comm),count(comm),sum(comm),sum(comm)&#x2F;count(comm),avg(comm) from emp;-- max(),min(),count()é’ˆå¯¹æ‰€æœ‰ç±»å‹   sum(),avg() åªé’ˆå¯¹æ•°å€¼å‹ç±»å‹æœ‰æ•ˆselect max(ename),min(ename),count(ename),sum(ename),avg(ename) from emp;-- count --è®¡æ•°   -- ç»Ÿè®¡è¡¨çš„è®°å½•æ•°ï¼šæ–¹å¼1ï¼šselect * from emp;select count(ename) from emp;select count(*) from emp;-- ç»Ÿè®¡è¡¨çš„è®°å½•æ•°ï¼šæ–¹å¼2select 1 from dual;select 1 from emp;select count(1) from emp;</code></pre><h3 id="2-4-åˆ†ç»„ä¸ç­›é€‰">2.4 åˆ†ç»„ä¸ç­›é€‰</h3><h4 id="group-by-åˆ†ç»„">group by åˆ†ç»„</h4><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select * from emp;-- ç»Ÿè®¡å„ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„ select deptno,avg(sal) from emp; -- å­—æ®µå’Œå¤šè¡Œå‡½æ•°ä¸å¯ä»¥åŒæ—¶ä½¿ç”¨select deptno,avg(sal) from emp group by deptno; -- å­—æ®µå’Œå¤šè¡Œå‡½æ•°ä¸å¯ä»¥åŒæ—¶ä½¿ç”¨,é™¤éè¿™ä¸ªå­—æ®µå±äºåˆ†ç»„select deptno,avg(sal) from emp group by deptno order by deptno desc;-- ç»Ÿè®¡å„ä¸ªå²—ä½çš„å¹³å‡å·¥èµ„ ç»Ÿè®¡å„ä¸ªå²—ä½çš„select job,avg(sal) from emp group by job;select job,lower(job),avg(sal) from emp group by job;</code></pre><h4 id="having-åˆ†ç»„åç­›é€‰">having åˆ†ç»„åç­›é€‰</h4><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- ç»Ÿè®¡å„ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„ ,åªæ˜¾ç¤ºå¹³å‡å·¥èµ„2000ä»¥ä¸Šçš„  - åˆ†ç»„ä»¥åè¿›è¡ŒäºŒæ¬¡ç­›é€‰ havingselect deptno,avg(sal) from emp group by deptno having avg(sal) &gt; 2000;select deptno,avg(sal) å¹³å‡å·¥èµ„ from emp group by deptno having å¹³å‡å·¥èµ„ &gt; 2000;select deptno,avg(sal) å¹³å‡å·¥èµ„ from emp group by deptno having å¹³å‡å·¥èµ„ &gt; 2000 order by deptno desc;</code></pre><p>whereåœ¨åˆ†ç»„å‰è¿›è¡Œè¿‡æ»¤çš„ï¼Œhavingåœ¨åˆ†ç»„åè¿›è¡Œåæ»¤ã€‚</p><p>å¯¹æ¯”å®ä¾‹ï¼š</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å¯¹æ¯”å®ä¾‹ï¼šç»Ÿè®¡å„ä¸ªå²—ä½çš„å¹³å‡å·¥èµ„,é™¤äº†MANAGER-- æ–¹æ³•1ï¼šselect job,avg(sal) from emp where job !&#x3D; &#39;MANAGER&#39; group by job;-- æ–¹æ³•2ï¼šselect job,avg(sal) from emp group by job having job !&#x3D; &#39;MANAGER&#39; ;-- whereåœ¨åˆ†ç»„å‰è¿›è¡Œè¿‡æ»¤çš„ï¼Œhavingåœ¨åˆ†ç»„åè¿›è¡Œåæ»¤ã€‚</code></pre><h3 id="æ€»ç»“">æ€»ç»“</h3><h4 id="1-selectè¯­å¥æ€»ç»“">[1] selectè¯­å¥æ€»ç»“</h4><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select column, group_function(column) from table [where condition] [group by  group_by_expression] [having group_condition] [order by column]; </code></pre><p>æ³¨æ„ï¼šé¡ºåºå›ºå®šï¼Œä¸å¯ä»¥æ”¹å˜é¡ºåº</p><h4 id="2-selectè¯­å¥çš„æ‰§è¡Œé¡ºåº">[2] selectè¯­å¥çš„æ‰§è¡Œé¡ºåº</h4><p>from â€” where â€” group  by â€”  select â€” having â€” order  by</p><h4 id="3-å•è¡¨æŸ¥è¯¢ç»ƒä¹ ">[3] å•è¡¨æŸ¥è¯¢ç»ƒä¹ </h4><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å•è¡¨æŸ¥è¯¢ç»ƒä¹ ï¼š-- åˆ—å‡ºå·¥èµ„æœ€å°å€¼å°äº2000çš„èŒä½select job,min(sal)from empgroup by jobhaving min(sal) &lt; 2000;-- åˆ—å‡ºå¹³å‡å·¥èµ„å¤§äº1200å…ƒçš„éƒ¨é—¨å’Œå·¥ä½œæ­é…ç»„åˆselect deptno,job,avg(sal)from empgroup by deptno,jobhaving avg(sal) &gt; 1200order by avg(sal);-- ç»Ÿè®¡[äººæ•°å°äº4çš„]éƒ¨é—¨çš„å¹³å‡å·¥èµ„ã€‚ select deptno,count(ename),avg(sal) -- è¿™é‡Œå¯ç”¨ count(1)from empgroup by deptnohaving count(ename) &lt; 4;-- ç»Ÿè®¡å„éƒ¨é—¨çš„æœ€é«˜å·¥èµ„ï¼Œæ’é™¤æœ€é«˜å·¥èµ„å°äº3000çš„éƒ¨é—¨ã€‚select deptno,max(sal)from empgroup by deptnohaving max(sal) &gt;&#x3D; 3000;</code></pre><h2 id="3-å¤šè¡¨æŸ¥è¯¢">3.  å¤šè¡¨æŸ¥è¯¢</h2><h3 id="3-1-äº¤å‰è¿æ¥-cross-join">3.1  äº¤å‰è¿æ¥ cross join</h3><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select *from empcross join dept;</code></pre><h3 id="3-2-è‡ªç„¶è¿æ¥-natural">3.2  è‡ªç„¶è¿æ¥ natural</h3><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select * from empnatural join dept;</code></pre><p>ä¼˜ç‚¹ï¼šè‡ªåŠ¨åŒ¹é…æ‰€æœ‰çš„åŒååˆ— ï¼ŒåŒååˆ—åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œç®€å•</p><p>ç¼ºç‚¹ï¼šæŸ¥è¯¢å­—æ®µçš„æ—¶å€™ï¼Œæ²¡æœ‰æŒ‡å®šå­—æ®µå¯¹åº”çš„æ•°æ®åº“è¡¨ï¼Œæ•ˆç‡ä½</p><p><strong>è§£å†³â€”â€”æŒ‡å®šè¡¨å</strong></p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select emp.empno,emp.enaem,emp.sal,dept.dname,dept.loc,dept.deptnofrom empnatural join dept;</code></pre><p>ç¼ºç‚¹ï¼šè¡¨åå¤ªé•¿</p><p><strong>è§£å†³â€”â€”èµ·è¡¨å</strong></p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select e.empno,e.ename,e.sal,d.dname,d.loc,d.deptnofrom emp enatural join dept d;</code></pre><p>ç¼ºç‚¹ï¼šä¼šè‡ªåŠ¨åŒ¹é…æ‰€æœ‰è¡¨ä¸­åŒåçš„å­—æ®µã€‚æœ‰æ—¶å€™æˆ‘ä»¬åªéœ€è¦éƒ¨åˆ†ç›¸åŒçš„å­—æ®µ</p><h3 id="3-3-å†…è¿æ¥-inner-join">3.3 å†…è¿æ¥ inner join</h3><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select * from emp einner join dept d using(deptno); -- åŒåå­—æ®µæ‰æœ‰æ•ˆ</code></pre><p>ç¼ºç‚¹ï¼šè¿æ¥çš„è¡¨å­—æ®µä¸åŒæ—¶usingæ— æ³•ä½¿ç”¨ã€‚</p><p>è§£å†³â€”â€”<strong>ä½¿ç”¨onå­å¥</strong></p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select *from emp einner join dept d -- ä½¿ç”¨onçš„æ—¶å€™innerå¯ä»¥çœç•¥on e.deptno &#x3D; d.deptno;</code></pre><h3 id="3-4-å¤–è¿æ¥-outer-join">3.4 å¤–è¿æ¥  outer  join</h3><ul><li>å†…è¿æ¥åªæ˜¾ç¤ºåŒ¹é…çš„æ•°æ®ï¼Œä¾‹å¦‚ä¸€ä¸ªéƒ¨é—¨æ²¡æœ‰å‘˜å·¥å°±ä¸ä¼šæ˜¾ç¤º</li><li><strong>å¤–è¿æ¥å¯ä»¥æ˜¾ç¤ºä¸åŒ¹é…çš„æ•°æ®</strong></li><li>outeréƒ½å¯ä»¥çœç•¥çš„</li></ul><h5 id="å·¦å¤–è¿æ¥">å·¦å¤–è¿æ¥</h5><p>å·¦è¾¹çš„é‚£ä¸ªè¡¨çš„ä¿¡æ¯ï¼Œå³ä½¿ä¸åŒ¹é…ä¹Ÿå¯ä»¥æŸ¥çœ‹å‡ºç»“æœ</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select * from empleft outer join dept don e.deptno &#x3D; d.deptno</code></pre><p>ç»“æœ</p><img src="MySQL/20210701170246.png" alt="image-20210701170246009" style="zoom:67%;" /><h5 id="å³å¤–è¿æ¥">å³å¤–è¿æ¥</h5><p>å³è¾¹çš„é‚£ä¸ªè¡¨çš„ä¿¡æ¯ï¼Œå³ä½¿ä¸åŒ¹é…ä¹Ÿå¯ä»¥æŸ¥çœ‹å‡ºç»“æœ</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select *from emp eright outer join dept don e.deptno &#x3D; d.deptno;</code></pre><p>ç»“æœ</p><img src="MySQL/20210701163643.png" alt="image-20210701163643122" style="zoom:67%;" /><h5 id="å…¨å¤–è¿æ¥">å…¨å¤–è¿æ¥</h5><p>è¿™ä¸ªè¯­æ³•åœ¨mysqlé‡Œé¢ä¸æ”¯æŒï¼Œoracleæ‰æ”¯æŒ</p><p>ä¸ºäº†ä»£æ›¿ å¯ä»¥å–å·¦å¤–è¿æ¥å’Œå³å¤–è¿æ¥çš„å¹¶é›†</p><h6 id="å¹¶é›†-union">å¹¶é›† union</h6><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select * from empleft outer join dept don e.deptno &#x3D; d.deptnounion -- å¹¶é›†ï¼Œä¸å»é‡ï¼Œæ•ˆç‡ä½select *from emp eright outer join dept don e.deptno &#x3D; d.deptno;</code></pre><p>ç»“æœ</p><img src="MySQL/20210701170831.png" alt="image-20210701170831388" style="zoom:67%;" /><h6 id="union-all">union all</h6><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select * from empleft outer join dept don e.deptno &#x3D; d.deptnounion  all -- ä¸å»é‡çš„å¹¶é›†ï¼Œ æ•ˆç‡é«˜select *from emp eright outer join dept don e.deptno &#x3D; d.deptno;</code></pre><p>ç»“æœ</p><img src="MySQL/20210701171121.png" alt="image-20210701171121236" style="zoom:67%;" /><h3 id="3-5-ä¸‰è¡¨æŸ¥è¯¢">3.5 ä¸‰è¡¨æŸ¥è¯¢</h3><p>æ¡ˆä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥çš„ç¼–å·ã€å§“åã€è–ªæ°´ã€éƒ¨é—¨ç¼–å·ã€éƒ¨é—¨åç§°ã€è–ªæ°´ç­‰çº§</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select * from emp;select * from dept;select * from salgradeï¼›select *from emp eright outer join dept don e.deptno &#x3D; d.deptno;-- å¯ä»¥çœ‹åšå°±æ˜¯ä¸Šé¢çš„ç»“æœæ˜¯ä¸€å¼ è¡¨ï¼Œç„¶åå†å’Œç¬¬ä¸‰å¼ è¡¨è¿›è¡Œè¿æ¥inner join salgrade son e.sal between salgrade</code></pre><p>ç»“æœ</p><img src="MySQL/20210701184545.png" alt="image-20210701184545238" style="zoom:67%;" /><h3 id="3-6-è‡ªè¿æ¥æŸ¥è¯¢">3.6 è‡ªè¿æ¥æŸ¥è¯¢</h3><p>ç›¸å½“äºæŠŠæœ¬èº«è¡¨å¤åˆ¶ä¸€ä»½ï¼Œæœ¬è´¨ä¸å‰é¢çš„è¿æ¥æ²¡æœ‰åŒºåˆ«</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- æŸ¥è¯¢å‘˜å·¥çš„ç¼–å·ã€å§“åã€ä¸Šçº§ç¼–å·,ä¸Šçº§çš„å§“åselect * from emp;select e1.empno å‘˜å·¥ç¼–å·,e1.ename å‘˜å·¥å§“å,e1.mgr é¢†å¯¼ç¼–å·,e2.ename å‘˜å·¥é¢†å¯¼å§“åfrom emp e1inner join emp e2on e1.mgr &#x3D; e2.empno;-- å·¦å¤–è¿æ¥ï¼šselect e1.empno å‘˜å·¥ç¼–å·,e1.ename å‘˜å·¥å§“å,e1.mgr é¢†å¯¼ç¼–å·,e2.ename å‘˜å·¥é¢†å¯¼å§“åfrom emp e1left outer join emp e2on e1.mgr &#x3D; e2.empno;</code></pre><p>ç»“æœ</p><img src="MySQL/20210702094750.png" alt="image-20210702094750390" style="zoom:67%;" /><h3 id="è¡¥å……ï¼š92è¯­æ³•çš„å¤šè¡¨æŸ¥è¯¢">è¡¥å……ï¼š92è¯­æ³•çš„å¤šè¡¨æŸ¥è¯¢</h3><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- æŸ¥è¯¢å‘˜å·¥çš„ç¼–å·ï¼Œå‘˜å·¥å§“åï¼Œè–ªæ°´ï¼Œå‘˜å·¥éƒ¨é—¨ç¼–å·ï¼Œéƒ¨é—¨åç§°ï¼šselect e.empno,e.ename,e.sal,e.deptno,d.dnamefrom emp e,dept d-- ç›¸å½“äº99è¯­æ³•ä¸­çš„cross join ,å‡ºç°ç¬›å¡å°”ç§¯ï¼Œæ²¡æœ‰æ„ä¹‰select e.empno,e.ename,e.sal,e.deptno,d.dnamefrom emp e,dept dwhere e.deptno &#x3D; d.deptno;-- ç›¸å½“äº99è¯­æ³•ä¸­çš„natural join -- æŸ¥è¯¢å‘˜å·¥çš„ç¼–å·ï¼Œå‘˜å·¥å§“åï¼Œè–ªæ°´ï¼Œå‘˜å·¥éƒ¨é—¨ç¼–å·ï¼Œéƒ¨é—¨åç§°ï¼ŒæŸ¥è¯¢å‡ºå·¥èµ„å¤§äº2000çš„å‘˜å·¥select e.empno,e.ename,e.sal,e.deptno,d.dnamefrom emp e,dept dwhere e.deptno &#x3D; d.deptno and e.sal &gt; 2000;-- æŸ¥è¯¢å‘˜å·¥çš„åå­—ï¼Œå²—ä½ï¼Œä¸Šçº§ç¼–å·ï¼Œä¸Šçº§åç§°ï¼ˆè‡ªè¿æ¥ï¼‰ï¼šselect e1.ename,e1.job,e1.mgr ,e2.ename from emp e1,emp e2where e1.mgr &#x3D; e2.empno;-- æŸ¥è¯¢å‘˜å·¥çš„ç¼–å·ã€å§“åã€è–ªæ°´ã€éƒ¨é—¨ç¼–å·ã€éƒ¨é—¨åç§°ã€è–ªæ°´ç­‰çº§select e.empno,e.ename,e.sal,e.deptno,d.dname,s.grade from emp e,dept d,salgrade swhere e.deptno &#x3D; d.deptno and e.sal &gt;&#x3D; s.losal and e.sal &lt;&#x3D; s.hisal;-- æ€»ç»“ï¼š-- 1.92è¯­æ³•éº»çƒ¦ -- 2.92è¯­æ³•ä¸­ è¡¨çš„è¿æ¥æ¡ä»¶ å’Œ  ç­›é€‰æ¡ä»¶  æ˜¯æ”¾åœ¨ä¸€èµ·çš„æ²¡æœ‰åˆ†å¼€-- 3.99è¯­æ³•ä¸­æä¾›äº†æ›´å¤šçš„æŸ¥è¯¢è¿æ¥ç±»å‹ï¼šcross,natural,inner,outer </code></pre><h2 id="4-ä¸ç›¸å…³å­æŸ¥è¯¢">4. ä¸ç›¸å…³å­æŸ¥è¯¢</h2><h3 id="å¼•å…¥">å¼•å…¥</h3><p>è¦æŸ¥è¯¢æ‰€æœ‰æ¯”â€œCLARKâ€å·¥èµ„é«˜çš„å‘˜å·¥çš„ä¿¡æ¯</p><p>éœ€è¦ä¸¤ä¸ªå‘½ä»¤è€Œä¸”ç¬¬äºŒä¸ªå‘½ä»¤ä¾æ‰˜äºç¬¬ä¸€ä¸ªå‘½ä»¤ï¼Œä¼šç›¸äº’å½±å“</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å‘½ä»¤ä¸€ï¼šæŸ¥è¯¢clarkçš„å·¥èµ„select sal from emp where ename &#x3D; clark; -- 2450-- å‘½ä»¤äºŒï¼šæŸ¥è¯¢æ‰€æœ‰æ¯”å…¶å·¥èµ„é«˜çš„å‘˜å·¥ä¿¡æ¯select * from emp where sal &gt; 2450;</code></pre><p>å­æŸ¥è¯¢å¯ä»¥é€šè¿‡ä¸€ä¸ªå‘½ä»¤è§£å†³é—®é¢˜ !</p><h3 id="4-1-å•è¡Œå­æŸ¥è¯¢">4.1  å•è¡Œå­æŸ¥è¯¢</h3><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å°†ä¸Šé¢ä¸¤ä¸ªå‘½ä»¤åˆå¹¶-- æŸ¥è¯¢å·¥èµ„é«˜äºå¹³å‡å·¥èµ„çš„é›‡å‘˜çš„åå­—å’Œå·¥èµ„select ename,salfrom empwhere sal &gt; (select sal from emp where sal &gt; avg(sal)); -- æŸ¥è¯¢å’ŒCLARKåŒä¸€éƒ¨é—¨ä¸”æ¯”ä»–å·¥èµ„ä½çš„é›‡å‘˜çš„åå­—å’Œå·¥èµ„select ename,salfrom empwhere deptno &#x3D; (select deptno from emp where ename&#x3D;&#39;CLARK&#39;)   and   sal &lt; (select sal from emp where ename&#x3D;&#39;CLARK&#39; );-- æŸ¥è¯¢èŒåŠ¡å’ŒSCOTTç›¸åŒï¼Œæ¯”SCOTTé›‡ä½£æ—¶é—´æ—©çš„é›‡å‘˜ä¿¡æ¯select * from empwhere job &#x3D; (select job from emp where ename&#x3D;&#39;SCOTT&#39;)  and  hiredate &lt; (select hiredate from emp where ename&#x3D;&#39;SCOTT&#39;);  </code></pre><h3 id="4-2-å¤šè¡Œå­æŸ¥è¯¢">4.2  å¤šè¡Œå­æŸ¥è¯¢</h3><p>å­æŸ¥è¯¢æŸ¥å‡ºæ¥çš„è®°å½•ä¸ºå¤šæ¡ï¼š</p><h5 id="å®ä¾‹ä¸€">å®ä¾‹ä¸€</h5><ul><li>æŸ¥è¯¢éƒ¨é—¨20ä¸­èŒåŠ¡åŒéƒ¨é—¨10çš„é›‡å‘˜ä¸€æ ·çš„é›‡å‘˜ä¿¡æ¯ã€‚</li></ul><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- æŸ¥è¯¢é›‡å‘˜ä¿¡æ¯select * from emp;-- æŸ¥è¯¢éƒ¨é—¨20ä¸­çš„é›‡å‘˜ä¿¡æ¯select * from emp where deptno &#x3D; 20;-- CLERK,MANAGER,ANALYST-- éƒ¨é—¨10çš„é›‡å‘˜çš„èŒåŠ¡ï¼šselect job from emp where deptno &#x3D; 10; -- MANAGER,PRESIDENT,CLERK</code></pre><p>å¦‚æœä½¿ç”¨å•è¡Œå­æŸ¥è¯¢ï¼Œå°±ä¼šæŠ¥é”™  -&gt;Subquery returns more than 1 row</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select * from emp where deptno &#x3D; 20 and job in (select job from emp where deptno &#x3D; 10)-- &gt; Subquery returns more than 1 row</code></pre><p>å¤šè¡Œå­æŸ¥è¯¢å¯ä»¥è§£å†³</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select * from emp where deptno &#x3D; 20 and job &#x3D; any(select job from emp where deptno &#x3D; 10) -- any</code></pre><h5 id="å®ä¾‹äºŒ-2">å®ä¾‹äºŒ</h5><ul><li><p>æŸ¥è¯¢å·¥èµ„æ¯”æ‰€æœ‰çš„â€œSALESMANâ€éƒ½é«˜çš„é›‡å‘˜çš„ç¼–å·ã€åå­—å’Œå·¥èµ„</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- æŸ¥è¯¢é›‡å‘˜çš„ç¼–å·ã€åå­—å’Œå·¥èµ„select empno,ename,sal from emp-- â€œSALESMANâ€çš„å·¥èµ„ï¼šselect sal from emp where job &#x3D; &#39;SALESMAN&#39;-- æŸ¥è¯¢å·¥èµ„æ¯”æ‰€æœ‰çš„â€œSALESMANâ€éƒ½é«˜çš„é›‡å‘˜çš„ç¼–å·ã€åå­—å’Œå·¥èµ„ã€‚-- å¤šè¡Œå­æŸ¥è¯¢ï¼šselect empno,ename,sal from emp where sal &gt; all(select sal from emp where job &#x3D; &#39;SALESMAN&#39;);</code></pre><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å•è¡Œå­æŸ¥è¯¢ï¼šselect empno,ename,sal from emp where sal &gt; (select max(sal) from emp where job &#x3D; &#39;SALESMAN&#39;);</code></pre></li></ul><h5 id="å®ä¾‹ä¸‰-2">å®ä¾‹ä¸‰</h5><ul><li>æŸ¥è¯¢å·¥èµ„ä½äºä»»æ„ä¸€ä¸ªâ€œCLERKâ€çš„å·¥èµ„çš„é›‡å‘˜ä¿¡æ¯ã€‚</li></ul><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- æŸ¥è¯¢é›‡å‘˜ä¿¡æ¯select * from emp;-- æŸ¥è¯¢å·¥èµ„ä½äºä»»æ„ä¸€ä¸ªâ€œCLERKâ€çš„å·¥èµ„çš„é›‡å‘˜ä¿¡æ¯select * from empwhere sal &lt; any(select sal from emp where job &#x3D; &#39;CLERK&#39;)and job !&#x3D; &#39;CLERK&#39;</code></pre><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å•è¡Œå­æŸ¥è¯¢ï¼šselect * from empwhere sal &lt; (select max(sal) from emp where job &#x3D; &#39;CLERK&#39;)and job !&#x3D; &#39;CLERK&#39;</code></pre><h2 id="5-ç›¸å…³å­æŸ¥è¯¢">5. ç›¸å…³å­æŸ¥è¯¢</h2><h3 id="å¼•å…¥-2">å¼•å…¥</h3><ul><li><p>ä¸ç›¸å…³çš„å­æŸ¥è¯¢å¼•å…¥ï¼š<br>ä¸ç›¸å…³çš„å­æŸ¥è¯¢ï¼šå­æŸ¥è¯¢å¯ä»¥ç‹¬ç«‹è¿è¡Œï¼Œå…ˆè¿è¡Œå­æŸ¥è¯¢ï¼Œå†è¿è¡Œå¤–æŸ¥è¯¢ã€‚<br>ç›¸å…³å­æŸ¥è¯¢ï¼šå­æŸ¥è¯¢ä¸å¯ä»¥ç‹¬ç«‹è¿è¡Œï¼Œå¹¶ä¸”å…ˆè¿è¡Œå¤–æŸ¥è¯¢ï¼Œå†è¿è¡Œå­æŸ¥è¯¢</p></li><li><p>ä¸ç›¸å…³çš„å­æŸ¥è¯¢ä¼˜ç¼ºç‚¹ï¼š<br>å¥½å¤„ï¼šç®€å•   åŠŸèƒ½å¼ºå¤§ï¼ˆä¸€äº›ä½¿ç”¨ä¸ç›¸å…³å­æŸ¥è¯¢ä¸èƒ½å®ç°æˆ–è€…å®ç°ç¹ççš„å­æŸ¥è¯¢ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å…³å­æŸ¥è¯¢å®ç°ï¼‰<br>ç¼ºç‚¹ï¼šç¨éš¾ç†è§£</p></li></ul><h3 id="å®ä¾‹">å®ä¾‹</h3><ol><li><p>æŸ¥è¯¢å„ä¸ªéƒ¨é—¨æœ€é«˜å·¥èµ„çš„å‘˜å·¥</p><ul><li>ä¸ç›¸å…³å­æŸ¥è¯¢</li></ul><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select * from emp where deptno &#x3D; 10 and sal &#x3D; (select max(sal) from emp where deptnp &#x3D; 10)unionselect * from emp where deptno &#x3D; 20 and sal &#x3D; (select max(sal) from emp where deptno &#x3D; 20)unionselect * from emp where deptno &#x3D; 30 and sal &#x3D; (select max(sal) from emp where deptno &#x3D; 30);</code></pre><p>å¤ªå¤æ‚äº†:unamused:</p><ul><li>ç›¸å…³å­æŸ¥è¯¢</li></ul><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select * from emp e where sal &#x3D; (select max(sal) from emp where deptno &#x3D; e.deptno)</code></pre><p>ç®€å•å¤šå•¦:happy:</p></li><li><p>æŸ¥è¯¢å·¥é«˜äºæ‰€åœ¨å²—ä½çš„å¹³å‡å·¥èµ„çš„é‚£äº›å‘˜å·¥</p><ul><li>ä¸ç›¸å…³å­æŸ¥è¯¢</li></ul><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select * from emp where job &#x3D; &#39;&#39; and sal &gt;&#x3D; (select avg(sal) from emp where job &#x3D; &#39;&#39;)union ....</code></pre><ul><li>ç›¸å…³å­æŸ¥è¯¢</li></ul><pre class="language-mysql" data-language="mysql"><code class="language-mysql">select * from emp e where sal &gt;&#x3D; (select avg(sal) from emp where job &#x3D; e.job);</code></pre></li></ol><h1>æ•°æ®åº“å¯¹è±¡</h1><h2 id="1-äº‹åŠ¡">1. äº‹åŠ¡</h2><p>**äº‹åŠ¡ï¼ˆTransactionï¼‰**æ˜¯ç”¨æ¥ç»´æŠ¤æ•°æ®åº“å®Œæ•´æ€§çš„ï¼Œå®ƒèƒ½å¤Ÿä¿è¯ä¸€ç³»åˆ—çš„MySQLæ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨ä¸æ‰§è¡Œã€‚</p><p>eg1.<br>è½¬è´¦æ“ä½œï¼šAè´¦æˆ·è¦è½¬è´¦ç»™Bè´¦æˆ·ï¼Œé‚£ä¹ˆAè´¦æˆ·ä¸Šå‡å°‘çš„é’±æ•°å’ŒBè´¦æˆ·ä¸Šå¢åŠ çš„é’±æ•°å¿…é¡»ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯è¯´Aè´¦æˆ·çš„è½¬å‡ºæ“ä½œå’ŒBè´¦æˆ·çš„è½¬å…¥æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨ä¸æ‰§è¡Œï¼›å¦‚æœå…¶ä¸­ä¸€ä¸ªæ“ä½œå‡ºç°å¼‚å¸¸è€Œæ²¡æœ‰æ‰§è¡Œçš„è¯ï¼Œå°±ä¼šå¯¼è‡´è´¦æˆ·Aå’Œè´¦æˆ·Bçš„è½¬å…¥è½¬å‡ºé‡‘é¢ä¸ä¸€è‡´çš„æƒ…å†µï¼Œä¸ºè€Œäº‹å®ä¸Šè¿™ç§æƒ…å†µæ˜¯ä¸å…è®¸å‘ç”Ÿçš„ï¼Œæ‰€ä»¥ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œéœ€è¦ä½¿ç”¨äº‹åŠ¡å¤„ç†ã€‚<br>eg2.<br>åœ¨æ·˜å®è´­ç‰©ä¸‹è®¢å•çš„æ—¶å€™ï¼Œå•†å®¶åº“å­˜è¦å‡å°‘ï¼Œè®¢å•å¢åŠ è®°å½•ï¼Œä»˜æ¬¾æˆ‘çš„è´¦å·å°‘100å…ƒâ€¦æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨ä¸æ‰§è¡Œ</p><h4 id="æ¦‚å¿µ">æ¦‚å¿µ</h4><p>äº‹åŠ¡ï¼ˆTransactionï¼‰æŒ‡çš„æ˜¯ä¸€ä¸ªæ“ä½œåºåˆ—ï¼Œè¯¥æ“ä½œåºåˆ—ä¸­çš„å¤šä¸ªæ“ä½œè¦ä¹ˆéƒ½åšï¼Œè¦ä¹ˆéƒ½ä¸åšï¼Œæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œæ˜¯æ•°æ®åº“ç¯å¢ƒä¸­çš„é€»è¾‘å·¥ä½œå•ä½ï¼Œç”±DBMSï¼ˆæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼‰ä¸­çš„äº‹åŠ¡ç®¡ç†å­ç³»ç»Ÿè´Ÿè´£äº‹åŠ¡çš„å¤„ç†ã€‚<br>ç›®å‰å¸¸ç”¨çš„å­˜å‚¨å¼•æ“æœ‰InnoDBï¼ˆMySQL5.5ä»¥åé»˜è®¤çš„å­˜å‚¨å¼•æ“ï¼‰å’ŒMyISAMï¼ˆMySQL5.5ä¹‹å‰é»˜è®¤çš„å­˜å‚¨å¼•æ“ï¼‰ï¼Œå…¶ä¸­InnoDBæ”¯æŒäº‹åŠ¡å¤„ç†æœºåˆ¶ï¼Œè€ŒMyISAMä¸æ”¯æŒã€‚</p><h4 id="ç‰¹æ€§">ç‰¹æ€§</h4><img src="MySQL/20210703110321.png" alt="image-20210703110320474" style="zoom: 50%;" /><p>äº‹åŠ¡å¤„ç†å¯ä»¥ç¡®ä¿é™¤éäº‹åŠ¡æ€§åºåˆ—å†…çš„æ‰€æœ‰æ“ä½œéƒ½æˆåŠŸå®Œæˆï¼Œå¦åˆ™ä¸ä¼šæ°¸ä¹…æ›´æ–°é¢å‘æ•°æ®çš„èµ„æºã€‚é€šè¿‡å°†ä¸€ç»„ç›¸å…³æ“ä½œç»„åˆä¸ºä¸€ä¸ªè¦ä¹ˆå…¨éƒ¨æˆåŠŸè¦ä¹ˆå…¨éƒ¨å¤±è´¥çš„åºåˆ—ï¼Œå¯ä»¥ç®€åŒ–é”™è¯¯æ¢å¤å¹¶ä½¿åº”ç”¨ç¨‹åºæ›´åŠ å¯é ã€‚<br>ä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ“ä½œåºåˆ—éƒ½å¯ä»¥ç§°ä¸ºäº‹åŠ¡ï¼Œè¿™æ˜¯å› ä¸ºä¸€ä¸ªæ“ä½œåºåˆ—è¦æˆä¸ºäº‹åŠ¡ï¼Œå¿…é¡»æ»¡è¶³äº‹åŠ¡çš„åŸå­æ€§ï¼ˆAtomicityï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼‰å’ŒæŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚è¿™å››ä¸ªç‰¹æ€§ç®€ç§°ä¸º<strong>ACIDç‰¹æ€§ã€‚</strong></p><ol><li><strong>åŸå­æ€§</strong><br>åŸå­æ˜¯è‡ªç„¶ç•Œæœ€å°çš„é¢—ç²’ï¼Œå…·æœ‰ä¸å¯å†åˆ†çš„ç‰¹æ€§ã€‚äº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œå¯ä»¥çœ‹åšä¸€ä¸ªåŸå­ï¼Œäº‹åŠ¡æ˜¯åº”ç”¨ä¸­ä¸å¯å†åˆ†çš„æœ€å°çš„é€»è¾‘æ‰§è¡Œä½“ã€‚<br>ä½¿ç”¨äº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹çš„æ“ä½œåºåˆ—ï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨ä¸æ‰§è¡Œã€‚é€šå¸¸ï¼ŒæŸä¸ªäº‹åŠ¡ä¸­çš„æ“ä½œéƒ½å…·æœ‰å…±åŒçš„ç›®æ ‡ï¼Œå¹¶ä¸”æ˜¯ç›¸äº’ä¾èµ–çš„ã€‚å¦‚æœæ•°æ®åº“ç³»ç»Ÿåªæ‰§è¡Œè¿™äº›æ“ä½œä¸­çš„ä¸€éƒ¨åˆ†ï¼Œåˆ™å¯èƒ½ä¼šç ´åäº‹åŠ¡çš„æ€»ä½“ç›®æ ‡ï¼Œè€ŒåŸå­æ€§æ¶ˆé™¤äº†ç³»ç»Ÿåªå¤„ç†éƒ¨åˆ†æ“ä½œçš„å¯èƒ½æ€§ã€‚</li><li><strong>ä¸€è‡´æ€§</strong><br>ä¸€è‡´æ€§æ˜¯æŒ‡äº‹åŠ¡æ‰§è¡Œçš„ç»“æœå¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ï¼Œå˜åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚å½“æ•°æ®åº“ä¸­åªåŒ…å«äº‹åŠ¡æˆåŠŸæäº¤çš„ç»“æœæ—¶ï¼Œæ•°æ®åº“å¤„äºä¸€è‡´æ€§çŠ¶æ€ã€‚ä¸€è‡´æ€§æ˜¯é€šè¿‡åŸå­æ€§æ¥ä¿è¯çš„ã€‚<br>ä¾‹å¦‚ï¼šåœ¨è½¬è´¦æ—¶ï¼Œåªæœ‰ä¿è¯è½¬å‡ºå’Œè½¬å…¥çš„é‡‘é¢ä¸€è‡´æ‰èƒ½æ„æˆäº‹åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´äº‹åŠ¡å‘ç”Ÿå‰å’Œå‘ç”Ÿåï¼Œæ•°æ®çš„æ€»é¢ä¾ç„¶åŒ¹é…ã€‚</li><li><strong>éš”ç¦»æ€§</strong><br>éš”ç¦»æ€§æ˜¯æŒ‡å„ä¸ªäº‹åŠ¡çš„æ‰§è¡Œäº’ä¸å¹²æ‰°ï¼Œä»»æ„ä¸€ä¸ªäº‹åŠ¡çš„å†…éƒ¨æ“ä½œå¯¹å…¶ä»–å¹¶å‘çš„äº‹åŠ¡ï¼Œéƒ½æ˜¯éš”ç¦»çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šå¹¶å‘æ‰§è¡Œçš„äº‹åŠ¡ä¹‹é—´æ—¢ä¸èƒ½çœ‹åˆ°å¯¹æ–¹çš„ä¸­é—´çŠ¶æ€ï¼Œä¹Ÿä¸èƒ½ç›¸äº’å½±å“ã€‚<br>ä¾‹å¦‚ï¼šåœ¨è½¬è´¦æ—¶ï¼Œåªæœ‰å½“Aè´¦æˆ·ä¸­çš„è½¬å‡ºå’ŒBè´¦æˆ·ä¸­è½¬å…¥æ“ä½œéƒ½æ‰§è¡ŒæˆåŠŸåæ‰èƒ½çœ‹åˆ°Aè´¦æˆ·ä¸­çš„é‡‘é¢å‡å°‘ä»¥åŠBè´¦æˆ·ä¸­çš„é‡‘é¢å¢å¤šã€‚å¹¶ä¸”å…¶ä»–çš„äº‹åŠ¡å¯¹äºè½¬è´¦æ“ä½œçš„äº‹åŠ¡æ˜¯ä¸èƒ½äº§ç”Ÿä»»ä½•å½±å“çš„ã€‚</li><li><strong>æŒä¹…æ€§</strong><br>æŒä¹…æ€§æŒ‡äº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå¯¹æ•°æ®æ‰€åšçš„ä»»ä½•æ”¹å˜ï¼Œéƒ½è¦è®°å½•åˆ°æ°¸ä¹…å­˜å‚¨å™¨ä¸­ï¼Œé€šå¸¸æ˜¯ä¿å­˜è¿›ç‰©ç†æ•°æ®åº“ï¼Œå³ä½¿æ•°æ®åº“å‡ºç°æ•…éšœï¼Œæäº¤çš„æ•°æ®ä¹Ÿåº”è¯¥èƒ½å¤Ÿæ¢å¤ã€‚ä½†å¦‚æœæ˜¯ç”±äºå¤–éƒ¨åŸå› å¯¼è‡´çš„æ•°æ®åº“æ•…éšœï¼Œå¦‚ç¡¬ç›˜è¢«æŸåï¼Œé‚£ä¹ˆä¹‹å‰æäº¤çš„æ•°æ®åˆ™æœ‰å¯èƒ½ä¼šä¸¢å¤±ã€‚</li></ol><h5 id="å®ä¾‹ï¼šä½¿ç”¨äº‹åŠ¡ä¿è¯è½¬è´¦å®‰å…¨">å®ä¾‹ï¼šä½¿ç”¨äº‹åŠ¡ä¿è¯è½¬è´¦å®‰å…¨</h5><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- åˆ›å»ºè´¦æˆ·è¡¨ï¼šid\uname\balancecreate table account(        id int primary key auto_increment,        uname varchar(10) not null,        balance double);-- æŸ¥çœ‹è´¦æˆ·è¡¨ï¼šselect * from account;-- åœ¨è¡¨ä¸­æ’å…¥æ•°æ®ï¼šinsert into account values (null,&#39;ä¸½ä¸½&#39;,2000),(null,&#39;å°åˆš&#39;,2000);-- ä¸½ä¸½ç»™å°åˆš è½¬200å…ƒï¼šupdate account set balance &#x3D; balance - 200 where id &#x3D; 1;update account set balance &#x3D; balance + 200 where id &#x3D; 2;-- é»˜è®¤ä¸€ä¸ªDMLè¯­å¥æ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼Œæ‰€ä»¥ä¸Šé¢çš„æ“ä½œæ‰§è¡Œäº†2ä¸ªäº‹åŠ¡ã€‚update account set balance &#x3D; balance - 200 where id &#x3D; 1;update account set balance &#x3D; balance2 + 200 where id &#x3D; 2;</code></pre><p><strong>å¿…é¡»è®©ä¸Šé¢çš„ä¸¤ä¸ªæ“ä½œæ§åˆ¶åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­</strong></p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- æ‰‹åŠ¨å¼€å¯äº‹åŠ¡ï¼šstart transaction;-- æ“ä½œï¼šupdate account set balance &#x3D; balance - 200 where id &#x3D; 1;update account set balance &#x3D; balance + 200 where id &#x3D; 2;-- æ‰‹åŠ¨å›æ»šï¼šåˆšæ‰æ‰§è¡Œçš„æ“ä½œå…¨éƒ¨å–æ¶ˆï¼šrollback;-- æ‰‹åŠ¨æäº¤ï¼šcommit;</code></pre><p>åœ¨<strong>å›æ»šå’Œæäº¤</strong>ä¹‹å‰ï¼Œæ•°æ®åº“ä¸­çš„æ•°æ®éƒ½æ˜¯æ“ä½œçš„ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œè€Œä¸æ˜¯æ•°æ®åº“çš„çœŸå®æ•°æ®</p><h3 id="äº‹åŠ¡å¹¶å‘é—®é¢˜">äº‹åŠ¡å¹¶å‘é—®é¢˜</h3><h5 id="è„è¯»ï¼ˆDirty-readï¼‰">è„è¯»ï¼ˆDirty readï¼‰</h5><p>å½“ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨è®¿é—®æ•°æ®å¹¶ä¸”å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œè€Œè¿™ç§ä¿®æ”¹è¿˜æ²¡æœ‰æäº¤åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™æ—¶å¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®äº†è¿™ä¸ªæ•°æ®ï¼Œç„¶åä½¿ç”¨äº†è¿™ä¸ªæ•°æ®ã€‚å› ä¸ºè¿™ä¸ªæ•°æ®æ˜¯è¿˜æ²¡æœ‰æäº¤çš„æ•°æ®ï¼Œé‚£ä¹ˆå¦å¤–ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°çš„è¿™ä¸ªæ•°æ®æ˜¯â€œè„æ•°æ®â€ï¼Œä¾æ®â€œè„æ•°æ®â€æ‰€åšçš„æ“ä½œå¯èƒ½æ˜¯ä¸æ­£ç¡®çš„ã€‚</p><img src="MySQL/20210703111005.png" alt="image-20210703111005503" style="zoom:67%;" /><h5 id="ä¸å¯é‡å¤è¯»-ï¼ˆUnrepeatablereadï¼‰">ä¸å¯é‡å¤è¯» ï¼ˆUnrepeatablereadï¼‰</h5><p>æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»åŒä¸€æ•°æ®ã€‚åœ¨è¿™ä¸ªäº‹åŠ¡è¿˜æ²¡æœ‰ç»“æŸæ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®è¯¥æ•°æ®ã€‚é‚£ä¹ˆï¼Œåœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸­çš„ä¸¤æ¬¡è¯»æ•°æ®ä¹‹é—´ï¼Œç”±äºç¬¬äºŒä¸ªäº‹åŠ¡çš„ä¿®æ”¹å¯¼è‡´ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸¤æ¬¡è¯»å–çš„æ•°æ®å¯èƒ½ä¸å¤ªä¸€æ ·ã€‚è¿™å°±å‘ç”Ÿäº†åœ¨ä¸€ä¸ªäº‹åŠ¡å†…ä¸¤æ¬¡è¯»åˆ°çš„æ•°æ®æ˜¯ä¸ä¸€æ ·çš„æƒ…å†µï¼Œå› æ­¤ç§°ä¸ºä¸å¯é‡å¤è¯»ã€‚</p><img src="MySQL/20210703111018.png" alt="image-20210703111018492" style="zoom:67%;" /><h5 id="å¹»è¯»-ï¼ˆPhantom-readï¼‰">å¹»è¯» ï¼ˆPhantom readï¼‰</h5><p>å¹»è¯»ä¸ä¸å¯é‡å¤è¯»ç±»ä¼¼ã€‚å®ƒå‘ç”Ÿåœ¨ä¸€ä¸ªäº‹åŠ¡ï¼ˆT1ï¼‰è¯»å–äº†å‡ è¡Œæ•°æ®ï¼Œæ¥ç€å¦ä¸€ä¸ªå¹¶å‘äº‹åŠ¡ï¼ˆT2ï¼‰æ’å…¥äº†ä¸€äº›æ•°æ®æ—¶ã€‚åœ¨éšåçš„æŸ¥è¯¢ä¸­ï¼Œç¬¬ä¸€ä¸ªäº‹åŠ¡ï¼ˆT1ï¼‰å°±ä¼šå‘ç°å¤šäº†ä¸€äº›åŸæœ¬ä¸å­˜åœ¨çš„è®°å½•ï¼Œå°±å¥½åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ï¼Œæ‰€ä»¥ç§°ä¸ºå¹»è¯»ã€‚</p> <img src="MySQL/20210703111036.png" alt="image-20210703111036154" style="zoom:67%;" /><p><strong>ä¸å¯é‡å¤åº¦å’Œå¹»è¯»åŒºåˆ«ï¼š</strong></p><p>ä¸å¯é‡å¤è¯»çš„é‡ç‚¹æ˜¯ä¿®æ”¹ï¼Œå¹»è¯»çš„é‡ç‚¹åœ¨äºæ–°å¢æˆ–è€…åˆ é™¤ã€‚è§£å†³ä¸å¯é‡å¤è¯»çš„é—®é¢˜åªéœ€é”ä½æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œè§£å†³å¹»è¯»éœ€è¦é”è¡¨ ã€‚</p><p>ä¾‹1ï¼ˆåŒæ ·çš„æ¡ä»¶, ä½ è¯»å–è¿‡çš„æ•°æ®, å†æ¬¡è¯»å–å‡ºæ¥å‘ç°å€¼ä¸ä¸€æ ·äº† ï¼‰ï¼šäº‹åŠ¡1ä¸­çš„Aå…ˆç”Ÿè¯»å–è‡ªå·±çš„å·¥èµ„ä¸º 1000çš„æ“ä½œè¿˜æ²¡å®Œæˆï¼Œäº‹åŠ¡2ä¸­çš„Bå…ˆç”Ÿå°±ä¿®æ”¹äº†Açš„å·¥èµ„ä¸º2000ï¼Œå¯¼ è‡´Aå†è¯»è‡ªå·±çš„å·¥èµ„æ—¶å·¥èµ„å˜ä¸º 2000ï¼›è¿™å°±æ˜¯ä¸å¯é‡å¤è¯»ã€‚</p><p>ä¾‹2ï¼ˆåŒæ ·çš„æ¡ä»¶, ç¬¬1æ¬¡å’Œç¬¬2æ¬¡è¯»å‡ºæ¥çš„è®°å½•æ•°ä¸ä¸€æ · ï¼‰ï¼šå‡æŸå·¥èµ„å•è¡¨ä¸­å·¥èµ„å¤§äº3000çš„æœ‰4äººï¼Œäº‹åŠ¡1è¯»å–äº†æ‰€æœ‰å·¥èµ„å¤§äº3000çš„äººï¼Œå…±æŸ¥åˆ°4æ¡è®°å½•ï¼Œè¿™æ—¶äº‹åŠ¡2 åˆæ’å…¥äº†ä¸€æ¡å·¥èµ„å¤§äº3000çš„è®°å½•ï¼Œäº‹åŠ¡1å†æ¬¡è¯»å–æ—¶æŸ¥åˆ°çš„è®°å½•å°±å˜ä¸ºäº†5æ¡ï¼Œè¿™æ ·å°±å¯¼è‡´äº†å¹»è¯»</p><h3 id="äº‹åŠ¡éš”ç¦»çº§åˆ«">äº‹åŠ¡éš”ç¦»çº§åˆ«</h3><p>â€‹äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ç”¨äºå†³å®šå¦‚ä½•æ§åˆ¶å¹¶å‘ç”¨æˆ·è¯»å†™æ•°æ®çš„æ“ä½œã€‚æ•°æ®åº“æ˜¯å…è®¸å¤šç”¨æˆ·å¹¶å‘è®¿é—®çš„ï¼Œå¦‚æœå¤šä¸ªç”¨æˆ·åŒæ—¶å¼€å¯äº‹åŠ¡å¹¶å¯¹åŒä¸€æ•°æ®è¿›è¡Œè¯»å†™æ“ä½œçš„è¯ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»é—®é¢˜ï¼Œæ‰€ä»¥MySQLä¸­æä¾›äº†å››ç§éš”ç¦»çº§åˆ«æ¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚</p><p>â€‹ä»ä½åˆ°é«˜ä¾æ¬¡ä¸º<strong>READ UNCOMMITTEDã€READ COMMITTEDã€REPEATABLE READä»¥åŠSERIALIZABLE</strong>ï¼Œéš”ç¦»çº§åˆ«è¶Šä½ï¼Œè¶Šèƒ½æ”¯æŒé«˜å¹¶å‘çš„æ•°æ®åº“æ“ä½œã€‚</p><img src="MySQL/20210703142738.png" alt="image-20210703142738514" style="zoom:67%;" />                        <pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- æŸ¥çœ‹é»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«  MySQLé»˜è®¤çš„æ˜¯repeatable read  select @@transaction_isolation;  -- è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«   ï¼ˆè®¾ç½®å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«ï¼‰set session transaction isolation level read uncommitted;  set session transaction isolation level read committed;  set session transaction isolation level repeatable read;  -- é»˜è®¤çš„set session transaction isolation level serializable;  start transaction ;select * from account where id &#x3D; 1;</code></pre><h5 id="å®ä¾‹-2">å®ä¾‹</h5><p>ï¼ˆå¿…é¡»æ˜¯ä¸¤ä¸ªäº‹åŠ¡éƒ½å¼€å§‹ä»¥åæ‰§è¡Œçš„æ“ä½œæ‰ä¼šå½±å“ï¼‰</p><ul><li><p>åœ¨read uncommittedçš„æƒ…å†µä¸‹ï¼Œå¼€å§‹ä¸¤ä¸ªäº‹åŠ¡ï¼š</p><ul><li>äº‹åŠ¡ä¸€</li></ul><img src="MySQL/20210703152258.png" alt="image-20210703145526739" style="zoom:67%;" /><ul><li>äº‹åŠ¡äºŒ</li></ul><p><img src="MySQL/20210703152314.png" alt="image-20210703145443742"></p></li><li><p>äº‹åŠ¡ä¸€æŸ¥è¯¢æ“ä½œï¼š</p><img src="MySQL/20210703152514.png" alt="image-20210703152514123" style="zoom:67%;" /></li><li><p>äº‹åŠ¡äºŒæ›´æ–°æ“ä½œï¼Œä¸”æ²¡æäº¤</p><img src="MySQL/20210703152552.png" alt="image-20210703152552191" style="zoom:67%;" /></li><li><p>äº‹åŠ¡ä¸€å†æ¬¡æŸ¥è¯¢ï¼š</p><img src="MySQL/20210703152939.png" alt="image-20210703152939898" style="zoom:67%;" /><p>è¯»åˆ°äº†åœ¨è„æ•°æ®</p></li><li><p>å¦‚æœè®¾ç½®ä¸º</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">set session transaction isolation level read committed;</code></pre><p>äº‹åŠ¡äºŒå°±ä¸ä¼šè¯»åˆ°è„æ•°æ®ã€‚</p></li></ul><h2 id="2-è§†å›¾">2. è§†å›¾</h2><h4 id="æ¦‚å¿µ-2">æ¦‚å¿µ</h4><p>è§†å›¾ï¼ˆviewï¼‰æ˜¯ä¸€ä¸ªä»å•å¼ æˆ–å¤šå¼ åŸºç¡€æ•°æ®è¡¨æˆ–å…¶ä»–è§†å›¾ä¸­æ„å»ºå‡ºæ¥çš„è™šæ‹Ÿè¡¨ã€‚åŒåŸºç¡€è¡¨ä¸€æ ·ï¼Œè§†å›¾ä¸­ä¹ŸåŒ…å«äº†ä¸€ç³»åˆ—å¸¦æœ‰åç§°çš„åˆ—å’Œè¡Œæ•°æ®ï¼Œä½†æ˜¯æ•°æ®åº“ä¸­åªæ˜¯å­˜æ”¾è§†å›¾çš„å®šä¹‰ï¼Œä¹Ÿå°±æ˜¯åŠ¨æ€æ£€ç´¢æ•°æ®çš„æŸ¥è¯¢è¯­å¥ï¼Œè€Œå¹¶ä¸å­˜æ”¾è§†å›¾ä¸­çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®ä¾æ—§å­˜æ”¾äºæ„å»ºè§†å›¾çš„åŸºç¡€è¡¨ä¸­ï¼Œåªæœ‰å½“ç”¨æˆ·ä½¿ç”¨è§†å›¾æ˜¯æ‰å»æ•°æ®åº“è¯·æ±‚ç›¸å¯¹åº”çš„æ•°æ®ï¼Œå³è§†å›¾ä¸­çš„æ•°æ®æ˜¯åœ¨å¼•ç”¨è§†å›¾æ—¶åŠ¨æ€ç”Ÿæˆçš„ã€‚å› æ­¤è§†å›¾ä¸­çš„æ•°æ®å‘ç”Ÿäº†å˜åŒ–ï¼Œè§†å›¾ä¸­ç›¸åº”çš„æ•°æ®ä¹Ÿä¼šè·Ÿç€æ”¹å˜ã€‚</p><p>PSï¼šè§†å›¾æœ¬è´¨ä¸Šå°±æ˜¯ï¼šä¸€ä¸ªæŸ¥è¯¢è¯­å¥ï¼Œæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„è¡¨ï¼Œä¸å­˜åœ¨çš„è¡¨ï¼Œä½ æŸ¥çœ‹è§†å›¾ï¼Œå…¶å®å°±æ˜¯æŸ¥çœ‹è§†å›¾å¯¹åº”çš„sqlè¯­å¥ã€‚</p><h4 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h4><p>ç®€åŒ–ç”¨æˆ·æ“ä½œï¼šè§†å›¾å¯ä»¥ä½¿ç”¨æˆ·å°†æ³¨æ„åŠ›é›†ä¸­åœ¨æ‰€å…³å¿ƒåœ°æ•°æ®ä¸Šï¼Œè€Œä¸éœ€è¦å…³å¿ƒæ•°æ®è¡¨çš„ç»“æ„ã€ä¸å…¶ä»–è¡¨çš„å…³è”æ¡ä»¶ä»¥åŠæŸ¥è¯¢æ¡ä»¶ç­‰ã€‚</p><p>å¯¹æœºå¯†æ•°æ®æä¾›å®‰å…¨ä¿æŠ¤ï¼šæœ‰äº†è§†å›¾ï¼Œå°±å¯ä»¥åœ¨è®¾è®¡æ•°æ®åº“åº”ç”¨ç³»ç»Ÿæ—¶ï¼Œå¯¹ä¸åŒçš„ç”¨æˆ·å®šä¹‰ä¸åŒçš„è§†å›¾ï¼Œé¿å…æœºå¯†æ•°æ®ï¼ˆå¦‚ï¼Œæ•æ„Ÿå­—æ®µâ€œsalaryâ€ï¼‰å‡ºç°åœ¨ä¸åº”è¯¥çœ‹åˆ°è¿™äº›æ•°æ®çš„ç”¨æˆ·è§†å›¾ä¸Šã€‚è¿™æ ·è§†å›¾å°±è‡ªåŠ¨æä¾›äº†å¯¹æœºå¯†æ•°æ®çš„å®‰å…¨ä¿æŠ¤åŠŸèƒ½</p><h4 id="å®ä¾‹ä¸€ï¼šå•è¡¨è§†å›¾">å®ä¾‹ä¸€ï¼šå•è¡¨è§†å›¾</h4><ul><li><p>åˆ›å»º/æ›¿æ¢å•è¡¨è§†å›¾ï¼š</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- åˆ›å»º&#x2F;æ›¿æ¢å•è¡¨è§†å›¾ï¼šcreate or replace view myview01asselect empno,ename,job,deptno from empwhere deptno &#x3D; 20</code></pre></li><li><p>æŸ¥çœ‹è§†å›¾ï¼š</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- æŸ¥çœ‹è§†å›¾ï¼šselect * from myview01;</code></pre></li><li><p>å‘è§†å›¾ä¸­æ’å…¥æ»¡è¶³æ¡ä»¶çš„æ•°æ®</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- åœ¨è§†å›¾ä¸­æ’å…¥æ•°æ®ï¼šinsert into myview01 (empno,ename,job,deptno) values (9999,&#39;lili&#39;,&#39;CLERK&#39;,20);</code></pre><p>æŸ¥çœ‹è§†å›¾ï¼š</p><img src="MySQL/20210703161609.png" alt="image-20210703161609044" style="zoom:67%;" /></li><li><p>å‘è§†å›¾ä¸­æ’å…¥ä¸æ»¡è¶³æ¡ä»¶çš„æ•°æ®</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">insert into myview01 (empno,ename,job,deptno) values (8888,&#39;nana&#39;,&#39;CLERK&#39;,30);</code></pre><p>æŸ¥çœ‹åŸæ¥çš„è¡¨ï¼Œå‘ç°æˆåŠŸæ’è¿›å»äº†</p><img src="MySQL/20210703161731.png" alt="image-20210703161731377" style="zoom:67%;" /></li><li><p>è§£å†³ä¸Šé¢é—®é¢˜ï¼š</p><p>éœ€è¦åŠ ä¸Š<strong>check option</strong></p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- åˆ›å»º&#x2F;æ›¿æ¢å•è¡¨è§†å›¾ï¼šcreate or replace view myview01asselect empno,ename,job,deptno from empwhere deptno &#x3D; 20with check option;</code></pre><p>è¿™æ ·ä¸æ»¡è¶³æ¡ä»¶çš„æ•°æ®å°±ä¸ä¼šè½»æ˜“è¢«åŠ è¿›å»ï¼š</p><img src="MySQL/20210703162005.png" alt="image-20210703162005163" style="zoom:67%;" /></li></ul><h4 id="å®ä¾‹äºŒï¼šå¤šè¡¨è§†å›¾">å®ä¾‹äºŒï¼šå¤šè¡¨è§†å›¾</h4><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- åˆ›å»º&#x2F;æ›¿æ¢å¤šè¡¨è§†å›¾ï¼šcreate or replace view myview02as select e.empno,e.ename,e.sal,d.deptno,d.dnamefrom emp ejoin dept don e.deptno &#x3D; d.deptnowhere sal &gt; 2000 ;select * from myview02;</code></pre><h4 id="å®ä¾‹ä¸‰ï¼šç»Ÿè®¡è§†å›¾">å®ä¾‹ä¸‰ï¼šç»Ÿè®¡è§†å›¾</h4><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- åˆ›å»ºç»Ÿè®¡è§†å›¾ï¼šcreate or replace view myview03asselect e.deptno,d.dname,avg(sal),min(sal),count(1)from emp ejoin dept dusing(deptno)group by e.deptno ;select * from myview03;</code></pre><h4 id="å®ä¾‹å››ï¼šåŸºäºè§†å›¾çš„è§†å›¾">å®ä¾‹å››ï¼šåŸºäºè§†å›¾çš„è§†å›¾</h4><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- åˆ›å»ºåŸºäºè§†å›¾çš„è§†å›¾ï¼šcreate or replace view myview04asselect * from myview03 where deptno &#x3D; 20;select * from myview04;</code></pre><h2 id="3-å­˜å‚¨è¿‡ç¨‹">3. å­˜å‚¨è¿‡ç¨‹</h2><h4 id="æ¦‚å¿µ-3">æ¦‚å¿µ</h4><ul><li><p>é€šè¿‡å‰é¢ç« èŠ‚çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“SQLæ˜¯ä¸€ç§éå¸¸ä¾¿åˆ©çš„è¯­è¨€ã€‚ä»æ•°æ®åº“æŠ½å–æ•°æ®ï¼Œæˆ–è€…å¯¹ç‰¹å®šçš„æ•°æ®é›†ä¸­æ›´æ–°æ—¶ï¼Œéƒ½èƒ½é€šè¿‡ç®€æ´ç›´è§‚çš„ä»£ç å®ç°ã€‚</p></li><li><p>ä½†æ˜¯è¿™ä¸ªæ‰€è°“çš„â€œç®€æ´â€ä¹Ÿæ˜¯æœ‰é™åˆ¶ï¼ŒSQLåŸºæœ¬æ˜¯ä¸€ä¸ªå‘½ä»¤å®ç°ä¸€ä¸ªå¤„ç†ï¼Œæ˜¯æ‰€è°“çš„éç¨‹åºè¯­è¨€ã€‚</p></li><li><p>åœ¨ä¸èƒ½ç¼–å†™æµç¨‹çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„å¤„ç†åªèƒ½é€šè¿‡ä¸€ä¸ªä¸ªå‘½ä»¤æ¥å®ç°ã€‚å½“ç„¶ï¼Œé€šè¿‡ä½¿ç”¨è¿æ¥åŠå­æŸ¥è¯¢ï¼Œå³ä½¿ä½¿ç”¨SQLçš„å•ä¸€å‘½ä»¤ä¹Ÿèƒ½å®ç°ä¸€äº›é«˜çº§çš„å¤„ç†ï¼Œä½†æ˜¯ï¼Œå…¶å±€é™æ€§æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨SQLä¸­å°±å¾ˆéš¾å®ç°é’ˆå¯¹ä¸åŒæ¡ä»¶è¿›è¡Œä¸åŒçš„å¤„ç†ä»¥åŠå¾ªç¯ç­‰åŠŸèƒ½ã€‚</p></li><li><p>è¿™ä¸ªæ—¶å€™å°±å‡ºç°äº†å­˜å‚¨è¿‡ç¨‹è¿™ä¸ªæ¦‚å¿µï¼Œç®€å•åœ°è¯´ï¼Œå­˜å‚¨è¿‡ç¨‹å°±æ˜¯æ•°æ®åº“ä¸­ä¿å­˜(Stored)çš„ä¸€ç³»åˆ—SQLå‘½ä»¤ï¼ˆProcedureï¼‰çš„é›†åˆã€‚ä¹Ÿå¯ä»¥å°†å…¶çœ‹ä½œç›¸äº’ä¹‹é—´æœ‰å…³ç³»çš„SQLå‘½ä»¤ç»„ç»‡åœ¨ä¸€èµ·å½¢æˆçš„ä¸€ä¸ªå°ç¨‹åºã€‚</p></li></ul><h4 id="ä¼˜ç‚¹-2">ä¼˜ç‚¹</h4><ul><li>æé«˜æ‰§è¡Œæ€§èƒ½ã€‚å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œæ•ˆç‡ä¹‹æ‰€é«˜ï¼Œåœ¨äºæ™®é€šçš„SQLè¯­å¥ï¼Œæ¯æ¬¡éƒ½ä¼šå¯¹è¯­æ³•åˆ†æï¼Œç¼–è¯‘ï¼Œæ‰§è¡Œï¼Œè€Œå­˜å‚¨è¿‡ç¨‹åªæ˜¯åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œè¯­æ³•åˆ†æï¼Œç¼–è¯‘ï¼Œæ‰§è¡Œï¼Œä»¥åéƒ½æ˜¯å¯¹ç»“æœè¿›è¡Œè°ƒç”¨ã€‚</li><li>å¯å‡è½»ç½‘ç»œè´Ÿæ‹…ã€‚ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œå¤æ‚çš„æ•°æ®åº“æ“ä½œä¹Ÿå¯ä»¥åœ¨æ•°æ®åº“æœåŠ¡å™¨ä¸­å®Œæˆã€‚åªéœ€è¦ä»å®¢æˆ·ç«¯(æˆ–åº”ç”¨ç¨‹åº)ä¼ é€’ç»™æ•°æ®åº“å¿…è¦çš„å‚æ•°å°±è¡Œï¼Œæ¯”èµ·éœ€è¦å¤šæ¬¡ä¼ é€’SQLå‘½ä»¤æœ¬èº«ï¼Œè¿™å¤§å¤§å‡è½»äº†ç½‘ç»œè´Ÿæ‹…ã€‚</li><li>å¯å°†æ•°æ®åº“çš„å¤„ç†é»‘åŒ£å­åŒ–ã€‚åº”ç”¨ç¨‹åºä¸­å®Œå…¨ä¸ç”¨è€ƒè™‘å­˜å‚¨è¿‡ç¨‹çš„å†…éƒ¨è¯¦ç»†å¤„ç†ï¼Œåªéœ€è¦çŸ¥é“è°ƒç”¨å“ªä¸ªå­˜å‚¨è¿‡ç¨‹å°±å¯ä»¥äº†</li></ul><h4 id="å®ä¾‹-3">å®ä¾‹</h4><ul><li><p>å®šä¹‰ä¸€ä¸ªæ²¡æœ‰è¿”å›å€¼çš„å­˜å‚¨è¿‡ç¨‹</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å®šä¹‰ä¸€ä¸ªæ²¡æœ‰è¿”å›å€¼ å­˜å‚¨è¿‡ç¨‹-- å®ç°ï¼šæ¨¡ç³ŠæŸ¥è¯¢æ“ä½œï¼šselect * from emp where ename like &#39;%A%&#39;;create procedure mypro01(name varchar(10))begin        if name is null or name &#x3D; &quot;&quot; then                select * from emp; -- ä¼ å…¥nullï¼Œå°±æŸ¥çœ‹å…¨è¡¨        else    select * from emp where ename like concat(&#39;%&#39;,name,&#39;%&#39;);         end if;end;-- åˆ é™¤å­˜å‚¨è¿‡ç¨‹ï¼šdrop procedure mypro01;-- è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼šcall mypro01(null);call mypro01(&#39;R&#39;);</code></pre><p>ç»“æœï¼š</p><img src="MySQL/20210703171452.png" alt="image-20210703171452630" style="zoom: 50%;" /></li><li><p>å®šä¹‰ä¸€ä¸ªæœ‰è¿”å›å€¼çš„å­˜å‚¨è¿‡ç¨‹</p><pre class="language-mysql" data-language="mysql"><code class="language-mysql">-- å®šä¹‰ä¸€ä¸ªæœ‰è¿”å›å€¼çš„å­˜å‚¨è¿‡ç¨‹-- in å‚æ•°å‰é¢çš„inå¯ä»¥ä¸å†™-- out -- found_rows() æ˜¯mysqlå®šä¹‰çš„ä¸€ä¸ªå‡½æ•°ï¼Œä½œç”¨è¿”å›æŸ¥è¯¢ç»“æœçš„æ¡æ•°-- into create procedure mypro02 (in name varchar(10),out num int(4))begin if name is null or name &#x3D; &quot;&quot; thenselect * from emp;else select * from emp where name like concat(&#39;%&#39;,name,&#39;%&#39;);end if;select found_rows() into num;end;-- è°ƒç”¨å­˜å‚¨è¿‡ç¨‹call mypro02(null,@num);select @num;call mypro02(&#39;A&#39;,@aaa); -- ä¼ å…¥çš„å‚æ•°åä¸ä¸€å®šè¦ä¸€æ ·select @aaa;</code></pre><p>ç»“æœï¼š</p><img src="MySQL/20210703191518.png" alt="image-20210703191518417" style="zoom:67%;" /></li></ul>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> DataBase </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>