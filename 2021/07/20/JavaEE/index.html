<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>JavaEE | Sonia33's Blog</title><meta name="keywords" content="Java,web"><meta name="author" content="Sonia33"><meta name="copyright" content="Sonia33"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="JavaEE"><meta name="application-name" content="JavaEE"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="JavaEE"><meta property="og:url" content="https://soniachen.com/2021/07/20/JavaEE/index.html"><meta property="og:site_name" content="Sonia33's Blog"><meta property="og:description" content="引入 ​   Tomcat HTTP协议 协议：Protocol 定义 HTTP协议是**Hyper Text Transfer Protocol（超文本传输协议）**的缩写, HTTP是万维网（WWW:World Wide Web）的数据通信的基础。 HTTP是一个简单的请求-响应协议，它通常运行"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta property="article:author" content="Sonia33"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta name="description" content="引入 ​   Tomcat HTTP协议 协议：Protocol 定义 HTTP协议是**Hyper Text Transfer Protocol（超文本传输协议）**的缩写, HTTP是万维网（WWW:World Wide Web）的数据通信的基础。 HTTP是一个简单的请求-响应协议，它通常运行"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://soniachen.com/2021/07/20/JavaEE/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Sonia33","link":"链接: ","source":"来源: Sonia33's Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Sonia33's Blog',
  title: 'JavaEE',
  postAI: '',
  pageFillDescription: '引入, Tomcat, HTTP协议, 定义, 特点, Servlet, 1.   引入, 介绍, 特点, 应用程序中的位置, 静态资源和动态资源的区分, Servlet在程序中的地位, ==servlet三大域对象==, 案例1：初步认识, 案例2：登录页, 需求：, 具体步骤：, 2. HttpServletRequest, 请求行, 请求头, 请求体, http支持的请求方式, ==get和post的区别==, 具体操作：获得客户端请求信息, 1.获取请求行信息, 2.获取请求头信息, 3.获取请求数据, 案例3HTTP请求, 前端代码, 开发form表单注意事项, Servlet代码, 3. HttpServletResponse, 响应行, 响应头, 响应实体, ContentType响应设置, MIME, 测试代码, 乱码问题, 1 控制台乱码, 2 post请求乱码, 3 get请求乱码, 4 响应乱码, 4. servlet生命周期, 四个阶段, 5. ServletContext和ServletConfig, ServletContext(application), 定义, 作用, 操作, 测试代码：, 生命周期, ServletConfig, 定义, 操作, 测试代码, 6. URL的匹配规则, 精确匹配, 扩展名匹配, 路径匹配, 任意匹配, 匹配所有, 优先顺序, 案例分析, URL映射方式, 方式一, 方式二, 7. 注解开发, 相关属性, 8. forward 请求转发, forward处理流程, forword处理特点, 注意, 测试代码, include（了解）, 9. sendRedirect 响应重定向, 运作流程：, 测试代码, 注意, 10. 路径问题, 前端路径, 总结, 11. 会话管理, 认识Cookie和Session, Cookie, 特点, 创建对象和响应, 数据的获取, Cookie持久化和状态Cookie, 测试代码, 案例：通过Cookie判断用户是否访问过当前Servlet, Session, 案例判断用户是否登录, 需求, 项目结构, 组件介绍：, login.html, main.html, LoginServlet, MainServlet, User, JSP, 指令标签, page标签, include标签, taglib指令标签, 内置对象, 九大对象, 案例一：在浏览器上访问Emp表 动态地分等级, EL表达式, EL表达式快捷取出域对象, 总结, EL表达式运算符, 运算符, 使用, 案例一优化：使用EL表达式优化查询员工信息的页面处理, JSTL, 核心标签库, 操作对象的标签cset/out/remove, 多条件分支标签cif和cchoose, 迭代标签cforeach, 打印乘法表, 遍历对象数组, 格式化标签库fmt, 导入标签, ltfmtformatDategt日期格式标签, 数字格式化标签, showEmp.js页面最终优化, Filter, 案例：通过过滤验证登录, login.jsp, welcome.jsp, aaa.jsp, Listener, 案例：记录请求日志, RequestLoginListener.java, 案例：显示在线人数, OnlineNumberListener, 案例：重启免登录, Session序列化和反序列化, 开发过程, 1 准备实体类, 2 开发登录信息输入页面, 3开发登录信息验证Servlet, 4 开发校验当前是否已经登录的Controller, 5  测试, 6 监听钝化和活化引入协议协议定义协议是超文本传输协议的缩写是万维网的数据通信的基础是一个简单的请求响应协议它通常运行在之上它指定了客户端可能发送给服务器什么样的消息以及得到什么样的响应是一个基于通信协议来传递数据文件图片文件查询结果等特点支持客户服务器模式协议支持客户端服务端模式需要使用浏览器作为客户端来访问服务端简单快速客户向服务器请求服务时只需传送请求方法和路径请求方法常用的有等每种方法规定了客户与服务器联系的类型不同由于协议简单使得服务器的程序规模小因而通信速度很快灵活允许传输任意类型的数据对象正在传输的类型由是包中用来表示内容类型的标识加以标记无连接每次请求一次释放一次连接所以无连接表示每次连接只能处理一个请求优点就是节省传输时间实现简单我们有时称这种无连接为短连接对应的就有了长链接长连接专门解决效率问题当建立好了一个连接之后可以多次请求但是缺点就是容易造成占用资源不释放的问题当协议头部中字段表示支持长链接单向性服务端永远是被动的等待客户端的请求无状态协议是无状态协议无状态是指协议对于事务处理没有记忆能力缺少状态意味着如果后续处理需要前面的信息则它必须重传这样可能导致每次连接传送的数据量增大另一方面在服务器不需要先前信息时它的应答就较快为了解决协议无状态于是两种用于保持连接状态的技术就应运而生了一个是而另一个则是协议发展和版本协议在年发布第一个版本版本号为随后联盟于年成立协议被纳入到组织中进行维护和管理最早在年在网页中使用内容简单所以浏览器的每次请求都需要与服务器建立一个连接服务器处理完成后立即断开连接无连接服务器不跟踪每个客户端也不记录过去的请求无状态请求只能由客户端发起单向性到年广泛在各大浏览器网络请求中使用中默认使用在中已经默认使用长连接避免了连接建立和释放的开销但服务器必须按照客户端请求的先后顺序依次回送相应的结果以保证客户端能够区分出每次请求的响应内容通过字段来判断当前请求的数据是否已经全部接收不允许同时存在两个并行的响应中最重要的一个特点是支持长连接即一次连接可以多次请求支持持久连接的默认模式使用带流水线的持久连接在一个连接上可以传送多个请求和响应减少了建立和关闭连接的消耗和延迟一个包含有许多图像的网页文件的多个请求和应答可以在一个连接中传输但每个单独的网页文件的请求和应答仍然需要使用各自的连接还允许客户端不用等待上一次请求结果返回就可以发出下一次请求但服务器端必须按照接收到客户端请求的先后顺序依次回送响应结果以保证客户端能够区分出每次请求的响应内容这样也显著地减少了整个下载过程所需要的时间长连接在中客户端向某个域名的服务器请求页面的过程中只会创建一条连接即使这页面可能包含上百个资源单一的连接应该是的主要优势单一的连接能减少握手带来的时延中用一条单一的长连接避免了创建多个连接带来的网络开销提高了吞吐量多路复用中所有加强性能的核心是二进制传输在中我们是通过文本的方式传输数据在中引入了新的编码机制所有传输的数据都会被分割并采用二进制格式编码多路复用连接共享不同的可以使用同一个连接传输最后根据每个上的号组合成正常的请求中有两个概念非常重要帧和流帧是最小的数据单位每个帧会标识出该帧属于哪个流流是多个帧组成的数据流所谓多路复用即在一个连接中存在多个流即可以同时发送多个请求对端可以通过帧中的表示知道该帧属于哪个请求在客户端这些帧乱序发送到对端后再根据每个帧首部的流标识符重新组装通过该技术可以避免旧版本的队头阻塞问题极大提高传输性能首部压缩由于中带有大量的信息并且得重复传输使用来减少需要传输的大小服务端推送在中服务端可以在客户端某个请求后主动推送其他资源可以想象一下某些资源客户端是一定会请求的这时就可以采取服务端的技术提前给客户端推送必要的资源就可以相对减少一点延迟时间在浏览器兼容的情况下也可以使用更安全使用了的拓展做为协议升级除此之外对的安全性做了近一步加强通过黑名单机制禁用了几百种不再安全的加密算法引入介绍是的简称称为服务端小程序是平台下的技术标准基于语言编写的服务端程序容器或应用服务器实现了标准所以需运行在容器或应用服务器中主要功能在于能在服务器中执行并生成数据特点使用单进程多线程方式运行应用程序中的位置静态资源和动态资源的区分静态资源每次访问都不需要运算直接就可以返回的资源如多媒体文件等等每次访问获得地资源都是一样的动态资源每次访问都需要运算代码生成的资源如每次访问获得的结果可能都是不一样的作为一种动态资源技术是后面学习框架的基础在程序中的地位是可以接受请求并作出相应的一种技术是语言编写的一种动态资源是前后端衔接的一种技术不是所有的类都可以接收请求和作出相应可以在模式中作为层控制层主要技术用于和浏览器完成数据交互控制交互逻辑三大域对象三大域对象的应用是一个全局的储存信息的空间服务器开始就存在服务器关闭才释放一个用户可有多个一个用户一个而所有用户共用一个所以为了节省空间提高效率中要放必须的重要的所有用户需要共享的线程又是安全的一些信息案例初步认识创建一个项目并在项目中开发一个自己的继承类在类中重写方法在方法中定义具体的功能代码动态生成数据随机生成一个整数对浏览器做出响应该打印流指向了浏览器在中配置的映射路径向声明一个这只是别名给匹配一个请求的映射路径打开浏览器请求资源案例登录页需求准备一个登陆页可以输入要用户名和密码输入完毕向提交用户名和密码接收到用户名和密码之后校验是否正确如果正确响应如果不正确响应具体步骤项目结构开发登录页用户名密码登录开发后台获取请求中的数据判断数据作出响应配置运行测试一个可以分为三个部分请求行请求头请求体请求行请求方式请求的协议及版本请求头请求体方式提交的请求数据通过地址栏提交没有请求体方式提交请求数据单独放到请求体中请求时所携带的数据方式支持的请求方式和的区别面试在浏览器回退时是无害的而会再次提交请求产生的地址可以被而不可以请求会被浏览器主动而不会除非手动设置请求只能进行编码而支持多种编码方式请求参数会被完整保留在浏览器历史记录里而中的参数不会被保留请求在中传送的参数是有长度限制的而则没有对参数的数据类型只接受字符而即可是字符也可是字节比更不安全因为参数直接暴露在上所以不能用来传递敏感信息参数通过传递放在中具体操作获得客户端请求信息对象代表客户端浏览器的请求当客户端浏览器通过协议访问服务器时请求中的所有信息都会被所解析并封装在这个对象中通过这个对象提供的方法可以获得客户端请求的所有信息获取请求行信息返回客户端浏览器发出请求时的完整返回请求行中指定资源部分返回发出请求的客户机的地址返回服务器的地址返回服务器处理协议的连接器所监听的端口获取请求头信息根据请求头中的获取对应的获取请求头中所有的该方法返回枚举类型测试代码返回客户端浏览器发出请求时的完整返回请求行中指定资源部分返回发出请求的客户机的地址返回服务器的地址返回服务器处理协议的连接器所监听的端口主机名客户端当前项目部署名协议名请求方式根据请求头名或者请求头对应的值获得全部的请求头名获取请求数据根据获取指定根据获取指定获取复选框组件中的值多个值获取复选框组件中的值返回一个获取所有提交数据的获取请求中所有数据的该方法返回一个枚举类型使用结构获取提交数据获取请求中所有的数据并存放到一个结构中该方法返回一个其中为类型为类型设置请求编码请求的数据包基于字节在网络上传输接收到请求的数据包后会将数据包中的字节转换为字符在中使用的是的单字节编码完成字节与字符的转换所以数据中含有中文就会出现乱码可以通过方法来对提交的数据根据指定的编码方式重新做编码处理案例请求需求获得前端客户端表单中请求的数据信息前端代码开发表单注意事项不是表单内部不是所有的标签信息都会提交一些输入信息提交的标签必须具备属性属性的作用是让后台区分数据便于在前端区分数据提交的标签一般都要具备属性属性确定我们要提交的具体的数据区别方式数据是通过携带提交的数据只能是文本提交的数据量不大方式提交的数据相对不安全将数据单独打包放到请求体中提交的数据可以是文本可以是各种文件提交的数据量理论上没有上限方式提交数据相对安全只读也是会提交数据的隐藏也是会提交数据不可用显示但是不提交代码用户名密码性别男女爱好蓝球足球羽毛球乒乓球个人简介文本域双标签页面上显示的文字是双标签中的文本不是属性文本域提交的数据不是属性值是双标签中的文本籍贯没有定义属性那么就提交中间的文字不推荐京津冀提交数据效果代码获取参数如果前端发过来的数据由数据名但是没有值返回的是一个空字符串获取的参数在提交的数据中名都没有返回的是想要获得多个同名的参数返回的是一个数组如果不知道参数的名字获取所有的参数名运行结果响应部分可以分为三部分响应行响应头响应体响应行响应状态码列表响应头响应内容的类型响应实体即服务器响应回来的内容对象代表服务器的响应封装了响应客户端浏览器的流对象以及向客户端浏览器响应的响应头响应数据响应状态码等信息响应设置该方法可通过设置响应类型全称是即多用途互联网邮件扩展类型这是协议中用来定义文档性质及格式的标准对传输内容类型进行了全面定义服务器通过告知响应内容类型而浏览器则通过类型来确定如何处理文档类型表常见的媒体格式类型如下格式纯文本格式格式图片格式图片格式图片格式以开头的媒体格式类型格式数据格式聚合格式数据格式格式文档格式二进制流数据如常见的文件下载中默认的表单数据被编码为格式发送到服务器表单默认的提交数据的格式另外一种常见的媒体格式是上传文件之时使用的需要在表单中进行文件上传时就需要使用该格式常见的字节型响应图片类型为或格式图片类型为格式设置响应编码设置服务端为浏览器产生响应的响应编码服务端会根据此编码将响应内容的字符转换为字节同时客户端浏览器会根据此编码方式显示响应内容在响应中添加附加信息文件下载在实现文件下载时我们需要修改响应头添加附加信息文件名该附加信息表示作为对下载文件的一个标识字段不会在浏览器中显示而是直接做下载处理文件名表示指定下载文件的文件名解决文件名中文乱码问题测试代码设置响应码设置响应头自定义头高速浏览器响应的数据是什么浏览器根据此头决定数据如何应用设置类型文件下载专门用于设置响应头乱码问题控制台乱码设置中下中所有的编码为即可请求乱码通过设置请求编码请求乱码需要手动进行编码解码或者设置中的中的编码已经解决了该问题响应乱码通过设置响应编码以编码处理数据设置响应头以便浏览器知道以何种编码解析数据生命周期四个阶段的生命周期是由容器管理的分别经历四个阶段阶段次数时机创建次第一次请求初始化次实例化之后执行服务多次每次请求销毁次停止服务当客户端浏览器第一次请求时容器会实例化这个然后调用一次方法并在新的线程中执行方法处理请求方法执行完毕后容器不会销毁这个而是做缓存处理当客户端浏览器再次请求这个时容器会从缓存中直接找到这个对象并再一次在新的线程中执行方法当容器在销毁之前对调用一次方法在中我们一般不要轻易使用成员变量可能会造成线程安全问题如果要使用的话应该尽量避免对成员变量产生修改如果要产生修改我们应该注意线程安全问题如果我们自己添加线程安全编码处理会严重影响效率综上所述原则能不用成员变量就不用代码成员变量构造一个对象的方法初始化执行服务销毁配置多次请求并查看控制台输出即可印证上述结论值得注意的是如果需要在服务启动时就实例化并初始化我们可以在的配置中添加配置启动顺序配置的数字为启动顺序应避免冲突且应处理请求的过程当浏览器基于方式请求我们创建时我们自定义的中的方法会被执行方法能够被执行并处理请求的原因是容器在启动时会解析工程中目录中的文件在该文件中我们配置了与的绑定容器通过对请求的解析可以获取请求资源的然后找到与该绑定的并做实例化处理注意只实例化一次如果在缓存中能够找到这个就不会再做次实例化处理在实例化时会使用接口类型作为引用类型的定义并调用一次方法由于中重写了该方法所以最终执行的是中方法中的方法是一个空的方法体然后在新的线程中调用方法由于在中重写了方法所以最终执行的是中的方法在方法中通过获取到请求方式进行判断如果是方式请求就执行方法如果是请求就执行方法如果是基于方式提交的并且在我们自定义的中又重写了中的方法那么最终会根据的多态特性转而执行我们自定义的中的方法老程序员喜欢重写和方法然后挑一个方法里面直接调用另一个方法因为两个方法很相似但是又可以直接重写可以同时处理和和定义官方叫上下文服务器会为每一个应用创建一个对象这个对象全局唯一而且应用中的所有都共享这个对象所以叫全局应用程序共享对象作用相对路径转绝对路径获取容器的附加信息读取配置信息全局容器操作获取项目的部署名相对路径转绝对路径文件上传下载时需要注意该方法可以将一个相对路径转换为绝对路径在文件上传与下载时需要用到该方法做路径的转换获取容器的附加信息返回容器的名称和版本号返回容器所支持的主版本号返回容器所支持的副版本号获取文件中的信息读取文件中标签中的配置信息读取文件中所有标签中的值全局容器向全局容器中存放数据从全局容器中获取数据根据删除全局容器中的测试代码配置通过获取对象通过继承的方法获取对象比较两种获取方法获取的对象获取部署名将一个相对路径转换为项目的绝对路径获取容器的附加信息获取容器的名称和版本号主版本号副版本号读取文件信息获取配置的全局初始信息配置信息名称未知情况下获取全局初始信息向对象中增加数据域对象张三李四王武也可以获得初始信息对象测试结果生命周期当容器启动是会创建对象并一直缓存该对象知道容器关闭后该对象生命周期结束对象的生命周期非常长所以在使用全局容器时不建议存放业务数据定义对象对应文件中的节点当初始化一个时会将该的配置信息封装到一个对象中操作我们通过对象读取节点中的配置信息读取文件中标签中标签中的配置信息读取文件中当前标签中所有标签中的值测试代码配置三星联想京东方的匹配规则精确匹配精确匹配是指中配置的值必须与完全精确匹配匹配不匹配扩展名匹配在允许使用统配符作为匹配规则表示匹配任意字符在扩展名匹配中只要扩展名相同都会被匹配和路径无关注意在使用扩展名匹配时在中不能使用否则容器启动就会抛出异常匹配匹配不匹配路径匹配根据请求路径进行匹配在请求中只要包含该路径都匹配表示任意路径以及子路径匹配匹配不匹配任意匹配匹配匹配所有但不包括页面匹配匹配匹配不匹配不匹配匹配所有匹配匹配匹配优先顺序当一个与多个的匹配规则可以匹配时则按照精确路径最长路径扩展名这样的优先级匹配到对应的案例分析映射到映射到映射到映射到当请求为和都匹配引擎将调用当请求为时和都匹配引擎将调用当请求为时和都匹配引擎将调用当请求为时和都匹配引擎将调用当请求为时和都匹配引擎将调用映射方式在文件中支持将多个映射到一个中但是相同的不能同时映射到两个中方式一方式二注解开发基于注解式开发在以及之后的版本中支持注解式开发对于的配置不在依赖于配置文件而是使用将一个继承于的类定义为组件相关属性请求转发处理流程清空存放响应正文数据的缓冲区如果目标资源为或就调用它们的方法把该方法产生的响应结果发送到客户端如果目标资源文件系统中的静态就读取文档中的数据把它发送到客户端请求转发是一种服务器的行为是对浏览器屏蔽浏览器的地址栏不会发生变化请求的参数是可以从源组件传递到目标组件的请求对象和响应对象没有重新创建而是传递给了目标组件请求转发可以帮助我们完成页面的跳转请求转发可以转发至里请求转发只能转发给当前项目的内部资源不能转发至外部资源常用处理特点由于方法先清空用于存放响应正文的缓冲区因此源生成的响应结果不会被发送到客户端只有目标资源生成的响应结果才会被发送到客户端如果源在进行请求转发之前已经提交了响应结方法那么方法抛出为了避免该异常不应该在源中提交响应结果注意在转发模式下请求应该完全交给目标资源去处理我们在源组件中不要作出任何的响应处理在方法调用之后也不要在使用和对象做其他操作了测试代码请求转发至设置响应类型和编码模式下增加响应内容在转发之前增加的响应内容请求转发给另一个组件获得一个请求转发器由请求转发器作出转发动作托管给目标资源多一些让目标资源完成部分工作继续增加响应信息模式在转发之后增加的响应内容接收参数作出响应在模式下支付宝到账元了解在转发模式下设置响应可以在转发之前也可以在转发之后在转发之前增加的响应内容设置响应类型和编码模式下增加响应内容在转发之前增加的响应内容获得一个请求转发器让目标资源完成部分工作在转发之后增加的响应内容继续增加响应信息模式在转发之后增加的响应内容但是不常用的响应重定向响应重定向是通过对象路径的方式实现是服务器通知浏览器让浏览器去自主请求其他资源的一种方式运作流程用户在浏览器端输入特定请求访问服务器端的某个服务器端的返回一个状态码为的响应结果该响应结果的含义为让浏览器端再请求访问另一个资源在响应结果中提供了另一个资源的另一个资源有可能在同一个服务器上也有可能不再同一个服务器上当浏览器端接收到这种响应结果后再立即自动请求访问另一个资源浏览器端接收到另一个资源的响应结果测试代码响应重定向注意重定向是服务器给浏览器重新指定请求方向是一种浏览器行为地址栏会发生变化重定向时请求对象和响应对象都会再次产生请求中的参数是不会携带重定向也可以帮助我们完成页面跳转重定向不能帮助我们访问中的资源重定向可以定向到外部资源路径问题前端路径项目结构测试代码标签的作用是在相对路径之前自动补充中的值如果标签不写那么默认就是当前文件所在的路径相对基准路径以当前文件本身的位置去定位其他文件相对自己的路径以当前文件所在的位置为基准位置绝对基准路径以一个固定的位置去定位其他文文件以一个固定的路径作为定位文件的基准位置和文件本身位置无关相对路径不以开头就是相对路径代表向上一层绝对路径以开头在页面上代表从项目的部署目录开始找从中开始找页面的绝对路径要有项目名除非我们的项目没有设置项目名相对路径跳转至相对路径跳转至相对路径跳转至相对路径跳转至绝对路径跳转至绝对路径跳转至总结以开头的路径是绝对路径不以开头是相对路径绝对路径后面要写当前服务的上下文路径名代表向上一层的路径标签可以简化相对路径当使用相对路径时默认会在相对路径之前补充中的内容如果没有定义默认就是当前文件所在的路径会话管理认识和对象与对象的作用是维护客户端浏览器与服务端的会话状态的两个对象由于协议是一个无状态的协议所以服务端并不会记录当前客户端浏览器的访问状态但是在有些时候我们是需要服务端能够记录客户端浏览器的访问状态的如获取当前客户端浏览器的访问服务端的次数时就需要会话状态的维持在中提供了对象与对象用于维护客户端与服务端的会话状态的维持二者不同的是是通过客户端浏览器实现会话的维持而是通过服务端来实现会话状态的维持是一种保存少量信息至浏览器的一种技术第一请求时服务器可以响应给浏览器一些信息第二次请求浏览器会携带之前的发送给服务器通过这种机制可以实现在浏览器端保留一些用户信息为服务端获取用户状态获得依据特点使用字符串存储数据使用与结构存储数据单个存储数据大小限制在个字节存储的数据中不支持中文中支持是与域名绑定所以不支持跨一级域名访问对象保存在客户端浏览器内存上或系统磁盘中分为持久化保存在磁盘上与状态保存在内存上浏览器在保存同一域名所返回的数量是有限的不同浏览器支持的数量不同浏览器为个浏览器每次请求时都会把与当前访问的域名相关的在请求中提交到服务端创建对象和响应通过关键字创建对象通过对象将写回给客户端浏览器数据的获取通过对象获取返回数组持久化和状态状态浏览器会缓存对象浏览器关闭后对象销毁持久化浏览器会对做持久化处理基于文件形式保存在系统的指定目录中在系统中为了安全问题不会显示中的内容当对象创建后默认为状态可以使用对象下的方法设置失效时间单位为秒一旦设置了失效时间那么该为持久化浏览器会将对象持久化到磁盘中当失效时间到达后文件删除测试代码通过响应对象向浏览器响应通过响应对象向浏览器响应一些状态重启即清除男持久化让浏览器保留分钟秒钟持久化让浏览器保留分钟获取请求中读取请求中的不为案例通过判断用户是否访问过当前需求当客户端浏览器第一次访问时返回您好欢迎您第一次访问第二次访问时返回欢迎您回来如果是第一访问当前向浏览器响应一个如果是多次访问就再次数上创建次数欢迎您第访问欢迎您第一次访问案例判断用户是否登录需求实现登录一次即可在一次会话内可以反复多次访问如果没有登录过跳转到登录页登录成功后可以访问项目结构组件介绍用户名密码用来校验登录的登陆成功将用户信息存户否则返回到登录页获取用户名和密码如果用户名和密码为将用户信息放在中登录成功跳转至登录失败回到用来向中跳转的同时验证登录的可以直接跳转否则回到登录页跳转至判断如果登录过允许跳转中如果有登陆过的信息如果没有登录过回到登录去登录中如果有登陆过的信息存储用户信息的实体类指令标签三种指令标签指令描述定义网页依赖属性如脚本语言页面缓存需求等包含其他文件引入标签库的定义标签告知浏览器以什么格式和编码解析响应的数据设置页面转换的语言导包在转换成代码时使用的编码一般不用设置指定错误页当页面发生错误时指定跳转的页面指定当前页为异常提示页当前页面可以接收异常对象是一种处理错误提示也的功能除了有的错误提示页功能中自带其他的错位提示页处理功能具体配置如下当中发生了异常时如果中配置的错误页和中配置的错误页冲突了指令的优先级更高标签可以通过指令来包含其他文件被包含的文件可以是文件文件或文本文件包含的文件就好像是该文件的一部分会被同时编译执行除了指令标签可以实现引入以外使用也可以实现引入静态引入使用的是指令标签被引入的页面不会生成代码被引入的网页和当前页生成代码后形成了一个文件动态引入标签中的选项被引入的页面会生成独立的代码在生成的代码中使用引入其他页面查看转译以后的源代码文件中的区别静态引入被引入的网页和当前页生成代码后形成了一个文件动态引入被引入的页面会生成独立的代码指令标签允许用户自定义标签一个自定义标签库就是自定义标签的集合指令引入一个自定义标签集合的定义包括库路径自定义标签语法内置对象九大对象四大域对象域当前页面内可用域单次请求域单次会话域项目运行响应对象输出流对象打印流其他三个对象由于本身也是一个所以容器也会给我们准备一个就是他对象当前对象本身异常对象在错误提示页上使用当才具有该对象案例一在浏览器上访问表动态地分等级实现类对象获取数据将数据放入请求域请求转发给编号姓名上级编号职务入职日期薪资补助部门号薪资等级表达式表达式中定义了一些可以帮助我们快捷从域对象中取出数据的写法基本语法为域标志数据名属性名可选四个域标志关键字分别为域域域域表达式快捷取出域对象域域域域向域中放数据大黄从域中取出数据表达式在获取对象属性值得时候是通过对象的属性的方法获取的保证对象的要获取的属性必须有对应方法才可以表达式在使用时是不需要其他类的如果获取的是值是不展示任何信息的域中的数据域中的数据域中的数据域中的数据表达式在取出数据的时候是可以省略域标志的表达式会自动依次到四个域中去找数据数据的名字如果省略域标志取数据的顺序如下移除域中的数据方法会移除四个域中的所有的同名的数据表达式获取请求中的参数总结表达式定义在页面上在转译之后的文件中会被转化成代码表达式是一种后台技术服务器上运行不是在浏览器上运行不能用于页面表达式底层是通过反射实现的在获取对象属性值时是通过对象的方法实现的表达式运算符运算符算数运算符比较运算符逻辑运算符三目运算符条件表达式表达式判空运算符使用两端如果有字符串会尝试将字符串转换成数字之后进行加法运算如果除以结果为而不是出现异常如果和取余数那么会出现异常算数运算符关系运算符比较运算符比较运算符推荐写成字母形式不推荐使用逻辑运算符条件运算符三目运算符判断空运算符为则为向域中放入数据字符串长度为则认为是空数组长度为认为不是空集合长度为认为是空集合长度为认为是空案例一优化使用表达式优化查询员工信息的页面处理编号姓名上级编号职务入职日期薪资补助部门号薪资等级将员工对象放入域即标准标签库是由所制定的标准规范它主要提供给开发人员一个标准通用的标签库并由的小组来维护使用前提需要导包页面中通过指令引入标签库标签库的定位前缀简称可以在对应的文件中找到核心标签库导入语句为操作对象的标签向域对象中放入数据从域对象中取出数据从域对象中移除数据指定放数据的域可选值数据的名称数据移除指定域中的值通过表达式取出域中的值通过标签获取域中的值多条件分支标签和随机生成一个分数判断条件可以将的结果放入指定的域中指定存放的域数据名分数等级输出分数是否及格及格不及格迭代标签打印乘法表中的属性迭代变量存放在作用域迭代起始值迭代结束值迭代变量变化的步长每次执时都会向域中放入一个名为值为当前值这样的一个操作遍历对象数组要遍历的集合需要使用表达式取值迭代变量的状态索引从开始计数从开始表示是否是第一个表示是否是最后一个对象当前迭代的对象值原来的遍历将员工对象放入域格式化标签库导入标签日期格式标签年月日数字格式化标签代表必须有一位数字如果对应的位置没有值怎么办自动补充代表有一位数字开头和结尾的所有的不保留页面最终优化序号索引编号姓名姓名上级编号职务入职日期薪资补助部门号薪资等级将员工对象放入域要遍历的数组可以通过表达式取出集合之后给改属性赋值中间变量的名称记录每一个对象状态的设置个数索引如果当前元素是迭代的第一个元素否则为如果当前元素是迭代的最后一个元素否则为当前迭代的元素本身使用表达式来取出域对象里的对象属性值年月日代表必须有一位数字如果对应的位置没有值怎么办自动补充代表有一位数字开头和结尾的所有的不保留使用算数表达式来判断等级使用标签案例通过过滤验证登录需求通过过滤器控制只有登陆之后可以反复进入欢迎页如果没有登录提示用户进入登录页进行登陆操作用户名密码提交欢迎登陆准备代码获取用户名和密码链接数据库校验登录登录成功将用户信息放入域跳转到欢迎页准备登录控制过滤器任何资源都要进行过滤无论是否登录过都要放行的资源登录页登录校验和一些静态资源直接放行后续代码不再执行需要登录之后才能访问的资源如果没登录重定向到上提示用户进行登录如果登录过放行没有登录过跳转至登录页案例记录请求日志获得请求发出的获得请求的获得请求产生的时间准备输出流案例显示在线人数需求开启一次会话在线人数加一销毁会话以后在线人数减一使用来计数然后存在域中获取域对象存入数据如果一次开启一次关闭向域中增加一个数字第一次放入数据向域中减少一个数字案例重启免登录序列化和反序列化序列化与反序列把对象转化为字节序列的过程称为序列化保存到硬盘持久化把字节序列转化为对象的过程称为反序列化存放于内存序列化的用途把对象的字节序列永久保存到硬盘上通常放到一个文件中把网络传输的对象通过字节序列化方便传输本节作业实现步骤想实现序列化和反序列化需要手动配置注意实体类必须实现接口开发过程准备实体类开发登录信息输入页面用户名密码提交开发登录信息验证开发校验当前是否已经登录的判断是否登录获得对应的监听器您已经登录过您还未登录测试先登录然后请求校验是否登录过然后重启项目再起请求校验是否登录过发现重启后仍然是登录过的监听钝化和活化即将钝化已经活化登录时绑定监听器绑定监听器重启项目重复测试即可',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-05-18 09:21:44',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Sonia33's Blog</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/BlockChain/" style="font-size: 1.05rem;">BlockChain<sup>1</sup></a><a href="/tags/CSS/" style="font-size: 1.05rem;">CSS<sup>1</sup></a><a href="/tags/DataBase/" style="font-size: 1.05rem;">DataBase<sup>2</sup></a><a href="/tags/FastDFS/" style="font-size: 1.05rem;">FastDFS<sup>1</sup></a><a href="/tags/Git/" style="font-size: 1.05rem;">Git<sup>1</sup></a><a href="/tags/HTML/" style="font-size: 1.05rem;">HTML<sup>1</sup></a><a href="/tags/IO/" style="font-size: 1.05rem;">IO<sup>1</sup></a><a href="/tags/JDBC/" style="font-size: 1.05rem;">JDBC<sup>1</sup></a><a href="/tags/JQuery/" style="font-size: 1.05rem;">JQuery<sup>1</sup></a><a href="/tags/Java/" style="font-size: 1.05rem;">Java<sup>3</sup></a><a href="/tags/JavaScript/" style="font-size: 1.05rem;">JavaScript<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>1</sup></a><a href="/tags/MySQL/" style="font-size: 1.05rem;">MySQL<sup>2</sup></a><a href="/tags/NoSQL/" style="font-size: 1.05rem;">NoSQL<sup>1</sup></a><a href="/tags/RabbitMQ/" style="font-size: 1.05rem;">RabbitMQ<sup>1</sup></a><a href="/tags/Redis/" style="font-size: 1.05rem;">Redis<sup>1</sup></a><a href="/tags/Zookeeper/" style="font-size: 1.05rem;">Zookeeper<sup>1</sup></a><a href="/tags/hexo/" style="font-size: 1.05rem;">hexo<sup>1</sup></a><a href="/tags/java/" style="font-size: 1.05rem;">java<sup>1</sup></a><a href="/tags/macOS/" style="font-size: 1.05rem;">macOS<sup>2</sup></a><a href="/tags/web/" style="font-size: 1.05rem;">web<sup>1</sup></a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 1.05rem;">分布式<sup>1</sup></a><a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 1.05rem;">后端<sup>1</sup></a><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 1.05rem;">多线程<sup>1</sup></a><a href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" style="font-size: 1.05rem;">并发编程<sup>1</sup></a><a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 1.05rem;">测试<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 1.05rem;">网络<sup>1</sup></a><a href="/tags/%E8%B8%A9%E9%9B%B7/" style="font-size: 1.05rem;">踩雷<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">六月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">九月 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">六月 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/JavaEE/" itemprop="url">JavaEE</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Java/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Java</span></a><a class="article-meta__tags" href="/tags/web/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>web</span></a></span></div></div><h1 class="post-title" itemprop="name headline">JavaEE</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2021-07-20T01:35:44.000Z" title="发表于 2021-07-20 09:35:44">2021-07-20</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2022-05-18T01:21:44.747Z" title="更新于 2022-05-18 09:21:44">2022-05-18</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为长沙"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>长沙</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://soniachen.com/2021/07/20/JavaEE/"><header><a class="post-meta-categories" href="/categories/JavaEE/" itemprop="url">JavaEE</a><a href="/tags/Java/" tabindex="-1" itemprop="url">Java</a><a href="/tags/web/" tabindex="-1" itemprop="url">web</a><h1 id="CrawlerTitle" itemprop="name headline">JavaEE</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Sonia33</span><time itemprop="dateCreated datePublished" datetime="2021-07-20T01:35:44.000Z" title="发表于 2021-07-20 09:35:44">2021-07-20</time><time itemprop="dateCreated datePublished" datetime="2022-05-18T01:21:44.747Z" title="更新于 2022-05-18 09:21:44">2022-05-18</time></header><h1>引入</h1>
<p>​</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210731155304-20220507093630276.png" alt="image-20210731155304853" style="zoom:67%;" />
<span id="more"></span>
<h1>Tomcat</h1>
<h2 id="HTTP协议">HTTP协议</h2>
<p>协议：Protocol</p>
<h3 id="定义">定义</h3>
<p>HTTP协议是**Hyper Text Transfer Protocol（超文本传输协议）**的缩写, HTTP是万维网（WWW:World Wide Web）的数据通信的基础。</p>
<p>HTTP是一个简单的请求-响应协议，它通常运行在TCP之上。它指定了客户端可能发送给服务器什么样的消息以及得到什么样的响应。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210802110328-20220507093630140.png" alt="image-20210802110327666" style="zoom:67%;" />
<p>HTTP是一个基于<strong>TCP/IP</strong>通信协议来传递数据（HTML 文件, 图片文件, 查询结果等）。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210802110337-20220507093630336.png" alt="image-20210802110337133" style="zoom:67%;" />
<h3 id="特点">特点</h3>
<p>1支持客户/服务器模式</p>
<p>HTTP协议支持客户端服务端模式，需要使用浏览器作为客户端来访问服务端。</p>
<p>2简单快速</p>
<p>客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、POST等。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。</p>
<p>3灵活</p>
<p>HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type（Content-Type是HTTP包中用来表示内容类型的标识）加以标记。</p>
<p>4无连接</p>
<p>每次请求一次，释放一次连接。所以无连接表示每次连接只能处理一个请求。优点就是节省传输时间，实现简单。我们有时称这种无连接为短连接。对应的就有了长链接，长连接专门解决效率问题。当建立好了一个连接之后，可以多次请求。但是缺点就是容易造成占用资源不释放的问题。当HTTP协议头部中字段Connection：keep-alive表示支持长链接。</p>
<p>5单向性</p>
<p>服务端永远是被动的等待客户端的请求。</p>
<p>6无状态</p>
<p>HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。为了解决HTTP协议无状态，于是，两种用于保持HTTP连接状态的技术就应运而生了，一个是Cookie，而另一个则是Session。</p>
<p>HTTP协议发展和版本</p>
<p>http协议在1991年发布第一个版本版本号为0.9。随后WWW联盟（WWW Consortium-W3C）于1994年成立，http协议被纳入到W3C组织中进行维护和管理。</p>
<p>http1.0</p>
<p>最早在1996年在网页中使用，内容简单，所以浏览器的每次请求都需要与服务器建立一个TCP连接，服务器处理完成后立即断开TCP连接（无连接），服务器不跟踪每个客户端也不记录过去的请求（无状态）,请求只能由客户端发起（单向性）。</p>
<p>http1.1</p>
<p>到1999年广泛在各大浏览器网络请求中使用，HTTP/1.0中默认使用Connection: close。在HTTP/1.1中已经默认使用Connection: keep-alive（长连接），避免了连接建立和释放的开销，但服务器必须按照客户端请求的先后顺序依次回送相应的结果，以保证客户端能够区分出每次请求的响应内容。通过Content-Length字段来判断当前请求的数据是否已经全部接收。不允许同时存在两个并行的响应。</p>
<p>1.1中最重要的一个特点是支持“长连接”，即“一次连接可以多次请求”。</p>
<p>HTTP 1.1支持持久连接（HTTP/1.1的默认模式使用带流水线的持久连接），在一个TCP连接上可以传送多个HTTP请求和响应，减少了建立和关闭连接的消耗和延迟。一个包含有许多图像的网页文件的多个请求和应答可以在一个连接中传输，但每个单独的网页文件的请求和应答仍然需要使用各自的连接。HTTP 1.1还允许客户端不用等待上一次请求结果返回，就可以发出下一次请求，但服务器端必须按照接收到客户端请求的先后顺序依次回送响应结果，以保证客户端能够区分出每次请求的响应内容，这样也显著地减少了整个下载过程所需要的时间。</p>
<p>http2.0</p>
<p>长连接</p>
<p>在HTTP/2中，客户端向某个域名的服务器请求页面的过程中，只会创建一条TCP连接，即使这页面可能包含上百个资源。  单一的连接应该是HTTP2的主要优势，单一的连接能减少TCP握手带来的时延。HTTP2中用一条单一的长连接，避免了创建多个TCP连接带来的网络开销，提高了吞吐量。</p>
<p>多路复用 (Multiplexing)</p>
<p>HTTP2.0中所有加强性能的核心是二进制传输，在HTTP1.x中，我们是通过文本的方式传输数据。在HTTP2.0中引入了新的编码机制，所有传输的数据都会被分割，并采用二进制格式编码。</p>
<p>多路复用，连接共享。不同的request可以使用同一个连接传输（最后根据每个request上的id号组合成正常的请求）。</p>
<p>HTTP2.0中，有两个概念非常重要：帧（frame）和流（stream）。<br>
帧是最小的数据单位，每个帧会标识出该帧属于哪个流，流是多个帧组成的数据流。<br>
所谓多路复用，即在一个TCP连接中存在多个流，即可以同时发送多个请求，对端可以通过帧中的表示知道该帧属于哪个请求。在客户端，这些帧乱序发送，到对端后再根据每个帧首部的流标识符重新组装。通过该技术，可以避免HTTP旧版本的队头阻塞问题，极大提高传输性能。</p>
<p>首部压缩（Header Compression）</p>
<p>由于1.1中header带有大量的信息，并且得重复传输，2.0使用encoder来减少需要传输的hearder大小。</p>
<p>服务端推送（Server Push）</p>
<p>在HTTP2.0中，服务端可以在客户端某个请求后，主动推送其他资源。<br>
可以想象一下，某些资源客户端是一定会请求的，这时就可以采取服务端push的技术，提前给客户端推送必要的资源，就可以相对减少一点延迟时间。在浏览器兼容的情况下也可以使用prefetch。</p>
<p>更安全</p>
<p>HTTP2.0使用了tls的拓展ALPN做为协议升级，除此之外，HTTP2.0对tls的安全性做了近一步加强，通过黑名单机制禁用了几百种不再安全的加密算法。</p>
<h1>Servlet</h1>
<h2 id="1-引入">1.   引入</h2>
<h3 id="介绍">介绍</h3>
<p>Servlet是Server Applet的简称，称为服务端小程序，是JavaEE平台下的技术标准，基于Java语言编写的服务端程序。Web容器或应用服务器实现了Servlet标准所以Servlet需运行在Web容器或应用服务器中。Servlet主要功能在于能在服务器中执行并生成数据。</p>
<h3 id="特点-2">特点</h3>
<p>使用单进程多线程方式运行</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210802204053-20220507093630091.png" alt="image-20210802204049056" style="zoom:80%;" />
<h3 id="应用程序中的位置">应用程序中的位置</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210802204157-20220507093630043.png" alt="image-20210802204157808"></p>
<h3 id="静态资源和动态资源的区分">静态资源和动态资源的区分</h3>
<ul>
<li>静态资源：每次访问都不需要运算，直接就可以返回的资源，如HTML CSS JS 多媒体文件等等 每次访问获得地资源都是一样的</li>
<li>动态资源：每次访问都需要运算代码生成的资源如 Servlet JSP 每次访问获得的结果可能都是不一样的</li>
</ul>
<p>Servlet 作为一种动态资源技术 是后面学习框架的基础</p>
<h3 id="Servlet在程序中的地位">Servlet在程序中的地位</h3>
<p>Servlet是可以接受Http请求并作出相应的一种技术,是JAVA语言编写的一种动态资源<br>
Servlet是前后端衔接的一种技术,不是所有的JAVA类都可以接收请求和作出相应,Servlet可以</p>
<p>在MVC模式中,Servlet作为Controller层(控制层)主要技术,用于和浏览器完成数据交互,控制交互逻辑</p>
<h3 id="servlet三大域对象">==servlet三大域对象==</h3>
<p><strong>Servlet三大域对象的应用 request、session、application（ServletContext）</strong></p>
<p><strong>ServletContext是一个全局的储存信息的空间，服务器开始就存在，服务器关闭才释放。</strong></p>
<p><strong>request，一个用户可有多个；session，一个用户一个；而servletContext，所有用户共用一个。所以，为了节省空间，提高效率，ServletContext中，要放必须的、重要的、所有用户需要共享的线程又是安全的一些信息。</strong></p>
<h2 id="案例1：初步认识">案例1：初步认识</h2>
<ul>
<li>
<p>创建一个JAVAWEB项目，并在项目中开发一个自己的Servlet，继承HttpServlet类</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210802205500-20220507093630287.png" alt="image-20210802205500530" style="zoom:50%;" />
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210802205532-20220507093629703.png" alt="image-20210802205532234"></p>
</li>
<li>
<p>在MyServlet类中重写service方法</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210802205558-20220507093630506.png" alt="image-20210802205558243"></p>
</li>
<li>
<p>在service方法中定义具体的功能代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//动态生成数据</span></span><br><span class="line">    <span class="comment">//随机生成一个整数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>().nextInt();</span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> (num%<span class="number">2</span>==<span class="number">0</span>)?<span class="string">&quot;happy birthday&quot;</span>:<span class="string">&quot;happy new year&quot;</span>;</span><br><span class="line">    <span class="comment">//对浏览器做出响应</span></span><br><span class="line">    <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> resp.getWriter();<span class="comment">//该打印流指向了浏览器</span></span><br><span class="line">    writer.write(message);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在web.xml中配置Servlet的映射路径</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--向Tomcat声明一个Servlet--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>myFirstServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span><span class="comment">&lt;!--这只是别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.chs.servlet.Myservlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--给Servlet匹配一个请求的映射路径--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>myFirstServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/mySerlvet.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>打开浏览器请求Servlet资源</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210802205836-20220507093630044.png" alt="image-20210802205836668"></p>
</li>
</ul>
<h2 id="案例2：登录页">案例2：登录页</h2>
<h3 id="需求：">需求：</h3>
<p>准备一个登陆页，可以输入要用户名和密码</p>
<p>输入完毕向Servlet提交用户名和密码</p>
<p>Servlet接收到用户名和密码之后校验是否正确</p>
<p>如果正确响应success</p>
<p>如果不正确响应Failed</p>
<h3 id="具体步骤：">具体步骤：</h3>
<ul>
<li>
<p>项目结构：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210802210210-20220507093630228.png" alt="image-20210802210210084" style="zoom:67%;" />
</li>
<li>
<p>开发登录页：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span> <span class="attr">action</span>=<span class="string">&quot;loginServlet.do&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">&quot;margin: 0px auto&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300px&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;0px&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0px&quot;</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> &gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>开发后台Servlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;login servlet invoked&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取请求中的数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        <span class="comment">// 判断数据</span></span><br><span class="line">        String message=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(username.equals(<span class="string">&quot;mashibing&quot;</span>)&amp;&amp; pwd.equals(<span class="string">&quot;123456&quot;</span>))&#123;</span><br><span class="line">            message=<span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            message=<span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 作出响应</span></span><br><span class="line">        resp.getWriter().write(message);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>配置Servlet</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>loginServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.mashibing.servlet.LoginServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>loginServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/loginServlet.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>login.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>运行测试</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210802210437-20220507093630239.png" alt="image-20210802210437528"></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210802210446-20220507093630225.png" alt="image-20210802210446147" style="zoom:67%;" />
<h2 id="2-HttpServletRequest">2. HttpServletRequest</h2>
<p>一个http可以分为三个部分：<strong>请求行 请求头 请求体</strong></p>
<h3 id="请求行">请求行</h3>
<ul>
<li>请求方式：GET</li>
<li>请求的URL： <a target="_blank" rel="noopener" href="http://192.168.56.220:8080/logOnDemo/logon.html">http://192.168.56.220:8080/logOnDemo/logon.html</a></li>
<li>协议及版本： HTTP/1.1</li>
</ul>
<h3 id="请求头">请求头</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210802210812-20220507093630614.png" alt="image-20210802210812138"></p>
<h3 id="请求体">请求体</h3>
<p>get方式提交的请求数据通过地址栏提交 ,没有请求体<br>
post方式提交请求数据单独放到请求体中,请求时所携带的数据 (post方式)</p>
<h3 id="http支持的请求方式">http支持的请求方式</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210802211209-20220507093630776.png" alt="image-20210802211209830"></p>
<h4 id="get和post的区别">==get和post的区别==</h4>
<p>==(面试）==</p>
<ul>
<li>
<p>GET在浏览器回退时是无害的，而POST会再次提交请求。</p>
</li>
<li>
<p>GET产生的URL地址可以被Bookmark，而POST不可以。</p>
</li>
<li>
<p>GET请求会被浏览器主动cache，而POST不会，除非手动设置。</p>
</li>
<li>
<p>GET请求只能进行url编码，而POST支持多种编码方式。</p>
</li>
<li>
<p>GET请求参数会被完整保留在浏览器历史记录里，而POST中的参数不会被保留。</p>
</li>
<li>
<p>GET请求在URL中传送的参数是有长度限制的，而POST则没有。对参数的数据类型GET只接受ASCII字符，而POST即可是字符也可是字节。</p>
</li>
<li>
<p>GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息。</p>
</li>
<li>
<p>GET参数通过URL传递，POST放在Request body中。</p>
</li>
</ul>
<h3 id="具体操作：获得客户端请求信息">具体操作：获得客户端请求信息</h3>
<p>HttpServletRequest对象代表客户端浏览器的请求，当客户端浏览器通过HTTP协议访问服务器时，HTTP请求中的所有信息都会被Tomcat所解析并封装在这个对象中，通过这个对象提供的方法，可以获得客户端请求的所有信息。</p>
<h4 id="1-获取请求行信息">1.获取请求行信息</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">req.getRequestURL():<span class="comment">//返回客户端浏览器发出请求时的完整URL。</span></span><br><span class="line"></span><br><span class="line">req.getRequestURI():<span class="comment">//返回请求行中指定资源部分。</span></span><br><span class="line"></span><br><span class="line">req.getRemoteAddr():<span class="comment">//返回发出请求的客户机的IP地址。</span></span><br><span class="line"></span><br><span class="line">req.getLocalAddr():<span class="comment">//返回WEB服务器的IP地址。</span></span><br><span class="line"></span><br><span class="line">req.getLocalPort():<span class="comment">//返回WEB服务器处理Http协议的连接器所监听的端口。</span></span><br></pre></td></tr></table></figure>
<h4 id="2-获取请求头信息">2.获取请求头信息</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">req.getHeader(<span class="string">&quot;headerKey&quot;</span>):<span class="comment">//根据请求头中的key获取对应的value。</span></span><br><span class="line"><span class="type">String</span> <span class="variable">headerValue</span> <span class="operator">=</span> req.getHeader(<span class="string">&quot;headerKey&quot;</span>);</span><br><span class="line">req.getHeaderNames():<span class="comment">//获取请求头中所有的key，该方法返回枚举类型。</span></span><br><span class="line">Enumeration&lt;String&gt; headerNames = req.getHeaderNames();</span><br></pre></td></tr></table></figure>
<p>测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(req.getRequestURL());<span class="comment">//返回客户端浏览器发出请求时的完整URL。</span></span><br><span class="line">        System.out.println(req.getRequestURI());<span class="comment">//返回请求行中指定资源部分。</span></span><br><span class="line">        System.out.println(req.getRemoteAddr());<span class="comment">//返回发出请求的客户机的IP地址。</span></span><br><span class="line">        System.out.println(req.getLocalAddr());<span class="comment">//返回WEB服务器的IP地址。</span></span><br><span class="line">        System.out.println(req.getLocalPort());<span class="comment">//返回WEB服务器处理Http协议的连接器所监听的端口。</span></span><br><span class="line">        System.out.println(<span class="string">&quot;主机名: &quot;</span> + req.getLocalName());</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端PORT: &quot;</span> + req.getRemotePort());</span><br><span class="line">        System.out.println(<span class="string">&quot;当前项目部署名: &quot;</span> + req.getContextPath());</span><br><span class="line">        System.out.println(<span class="string">&quot;协议名:&quot;</span>+req.getScheme());</span><br><span class="line">        System.out.println(<span class="string">&quot;请求方式:&quot;</span>+req.getMethod());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据请求头名或者请求头对应的值</span></span><br><span class="line">        System.out.println(req.getHeader(<span class="string">&quot;Accept&quot;</span>));</span><br><span class="line">        <span class="comment">// 获得全部的请求头名</span></span><br><span class="line">        Enumeration&lt;String&gt; headerNames = req.getHeaderNames();</span><br><span class="line">        <span class="keyword">while</span> (headerNames.hasMoreElements())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">headername</span> <span class="operator">=</span> headerNames.nextElement();</span><br><span class="line">            System.out.println(headername+<span class="string">&quot;:&quot;</span>+req.getHeader(headername));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-获取请求数据">3.获取请求数据</h4>
<ul>
<li>
<p>根据key获取指定value:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.getParameter(<span class="string">&quot;key&quot;</span>):<span class="comment">//根据key获取指定value。</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>获java取复选框(checkbox组件)中的值（多个值）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.getParameterValues(<span class="string">&quot;checkboxkey&quot;</span>):<span class="comment">//获取复选框(checkbox组件)中的值，返回一个String[]。</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>获取所有提交数据的key</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.getParameterNames():<span class="comment">//获取请求中所有数据的key，该方法返回一个枚举类型。</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>使用Map结构获取提交数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.getParameterMap():<span class="comment">//获取请求中所有的数据并存放到一个Map结构中，该方法返回一个Map，其中key为String类型value为String[]类型。</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>设置请求编码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>请求的数据包基于字节在网络上传输，Tomcat接收到请求的数据包后会将数据包中的字节转换为字符。在Tomcat中使用的是ISO-8859-1的单字节编码完成字节与字符的转换，所以数据中含有中文就会出现乱码，可以通过req.setCharacterEncoding(“utf-8”)方法来对提交的数据根据指定的编码方式重新做编码处理。</p>
</li>
</ul>
<h2 id="案例3-HTTP请求">案例3:HTTP请求</h2>
<p><strong>需求 ：获得前端客户端表单中请求的数据信息</strong></p>
<h3 id="前端代码">前端代码</h3>
<h4 id="开发form表单注意事项">开发form表单注意事项</h4>
<ol>
<li>
<p>form 不是from</p>
</li>
<li>
<p>form表单内部不是所有的标签信息都会提交 一些输入信息  input select textarea … …</p>
</li>
<li>
<p>提交的标签必须具备<strong>name属性</strong>  name属性的作用是让后台区分数据  id便于在前端区分数据</p>
</li>
<li>
<p>提交的标签一般都要具备<strong>value属性</strong>  value属性确定我们要提交的具体的数据</p>
</li>
<li>
<p>==get post==<a href="#get%E5%92%8Cpost%E7%9A%84%E5%8C%BA%E5%88%AB">区别</a><br>
get方式数据是通过URL携带<br>
提交的数据只能是文本<br>
提交的数据量不大<br>
get方式提交的数据相对不安全</p>
<p>post 将数据单独打包放到请求体中<br>
提交的数据可以是文本可以是各种文件<br>
提交的数据量理论上没有上限<br>
post方式提交数据相对安全</p>
</li>
</ol>
<p>==readonly只读== 也是会提交数据的<br>
==hidden==  隐藏 也是会提交数据<br>
==disabled== 不可用 显示但是不提交</p>
<p><strong>代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=<span class="string">&quot;get&quot;</span> action=<span class="string">&quot;myServlet&quot;</span>&gt;</span><br><span class="line">    &lt;table style=<span class="string">&quot;margin: 0px auto&quot;</span> width=<span class="string">&quot;300px&quot;</span> cellpadding=<span class="string">&quot;0px&quot;</span> cellspacing=<span class="string">&quot;0px&quot;</span> border=<span class="string">&quot;1px&quot;</span>&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;用户名&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> id=<span class="string">&quot;in1&quot;</span> value=<span class="string">&quot;12345&quot;</span> disabled &gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;密码&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;pwd&quot;</span>&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;性别&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;gender&quot;</span> value=<span class="string">&quot;1&quot;</span> checked&gt;男</span><br><span class="line">                &lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;gender&quot;</span> value=<span class="string">&quot;0&quot;</span>&gt;女</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;爱好&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobby&quot;</span> value=<span class="string">&quot;1&quot;</span>&gt;蓝球</span><br><span class="line">                &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobby&quot;</span> value=<span class="string">&quot;2&quot;</span>&gt;足球</span><br><span class="line">                &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobby&quot;</span> value=<span class="string">&quot;3&quot;</span>&gt;羽毛球</span><br><span class="line">                &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobby&quot;</span> value=<span class="string">&quot;4&quot;</span>&gt;乒乓球</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;个人简介&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;!--文本域 双标签 页面上显示的文字是双标签中的文本 不是value属性</span><br><span class="line"></span><br><span class="line">                    文本域提交的数据不是value属性值,是双标签中的文本</span><br><span class="line">                --&gt;</span><br><span class="line">                &lt;textarea name=<span class="string">&quot;introduce&quot;</span> &gt;b&lt;/textarea&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;籍贯&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;!--</span><br><span class="line">                select</span><br><span class="line">                option没有定义value属性 那么就提交option中间的文字(不推荐)</span><br><span class="line"></span><br><span class="line">                --&gt;</span><br><span class="line">                &lt;select name=<span class="string">&quot;provience&quot;</span>&gt;</span><br><span class="line">                    &lt;option value=<span class="string">&quot;1&quot;</span>&gt;a京&lt;/option&gt;</span><br><span class="line">                    &lt;option value=<span class="string">&quot;2&quot;</span>&gt;b津&lt;/option&gt;</span><br><span class="line">                    &lt;option value=<span class="string">&quot;3&quot;</span>&gt;c冀&lt;/option&gt;</span><br><span class="line">                &lt;/select&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">            &lt;td colspan=<span class="string">&quot;2&quot;</span>&gt;</span><br><span class="line">                &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交数据&quot;</span>&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<p><strong>效果：</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210803102738-20220507093630489.png" alt="image-20210803102513541" style="zoom: 50%;" />
<h3 id="Servlet代码">Servlet代码</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// req获取参数</span></span><br><span class="line">        <span class="comment">// 如果 前端发过来的数据由数据名但是没有值, getParameter返回的是一个空字符串  &quot;&quot;</span></span><br><span class="line">        <span class="comment">// 获取的参数在提交的数据中名都没有,getParameter返回的是null</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;username:&quot;</span>+username);</span><br><span class="line">        System.out.println(<span class="string">&quot;password:&quot;</span>+req.getParameter(<span class="string">&quot;pwd&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;gender:&quot;</span>+req.getParameter(<span class="string">&quot;gender&quot;</span>));</span><br><span class="line">        <span class="comment">// hobby=1&amp;hobby=2&amp;hobby=3 想要获得多个同名的参数 getParameterValues 返回的是一个Sting数组</span></span><br><span class="line">        String[] hobbies = req.getParameterValues(<span class="string">&quot;hobby&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;hobbies:&quot;</span>+ Arrays.toString(hobbies));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// textarea</span></span><br><span class="line">        System.out.println(<span class="string">&quot;introduce:&quot;</span>+req.getParameter(<span class="string">&quot;introduce&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// select</span></span><br><span class="line">        System.out.println(<span class="string">&quot;provience:&quot;</span>+req.getParameter(<span class="string">&quot;provience&quot;</span>));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;___________________________&quot;</span>);</span><br><span class="line">        <span class="comment">// 如果不知道参数的名字?</span></span><br><span class="line">        <span class="comment">// 获取所有的参数名</span></span><br><span class="line">        Enumeration&lt;String&gt; pNames = req.getParameterNames();</span><br><span class="line">        <span class="keyword">while</span>(pNames.hasMoreElements())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">pname</span> <span class="operator">=</span> pNames.nextElement();</span><br><span class="line">            String[] pValues = req.getParameterValues(pname);</span><br><span class="line">            System.out.println(pname+<span class="string">&quot;:&quot;</span>+Arrays.toString(pValues));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;________________________________&quot;</span>);</span><br><span class="line">        Map&lt;String, String[]&gt; pmap = req.getParameterMap();</span><br><span class="line">        Set&lt;Map.Entry&lt;String, String[]&gt;&gt; entries = pmap.entrySet();</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, String[]&gt; entry : entries) &#123;</span><br><span class="line">            System.out.println(entry.getKey()+<span class="string">&quot;:&quot;</span>+Arrays.toString(entry.getValue()));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210803102814-20220507093630541.png" alt="image-20210803102714186" style="zoom:50%;" />
<h2 id="3-HttpServletResponse">3. HttpServletResponse</h2>
<p>http响应部分可以分为三部分：<strong>响应行，响应头，响应体</strong></p>
<h3 id="响应行">响应行</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210803161928-20220507093630572.png" alt="image-20210803161927018"></p>
<p>响应状态码列表</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210803161950-20220507093630931.png" alt="image-20210803161950030"></p>
<h3 id="响应头">响应头</h3>
<p>Content-Type：响应内容的类型(MIME)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210803162052-20220507093630775.png" alt="image-20210803162052600"></p>
<h3 id="响应实体">响应实体</h3>
<p>即<strong>服务器响应回来的内容</strong></p>
<p>​		HttpServletResponse对象代表服务器的响应，封装了响应客户端浏览器的<strong>流对象</strong>，以及向客户端浏览器响应的<strong>响应头、响应数据、响应状态码等信息</strong>。</p>
<h4 id="ContentType-响应设置">ContentType:响应设置</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resp.setContentType(<span class="string">&quot;MIME&quot;</span>):<span class="comment">//该方法可通过MIME-Type设置响应类型。</span></span><br></pre></td></tr></table></figure>
<h6 id="MIME"><strong>MIME</strong></h6>
<p>全称是<strong>Multipurpose Internet Mail Extensions</strong>，即多用途互联网邮件扩展类型。<br>
这是HTTP协议中用来定义文档性质及格式的标准。对HTTP传输内容类型进行了全面定义。<br>
服务器通过MIME告知响应内容类型，而浏览器则通过MIME类型来确定如何处理文档。</p>
<p><strong>HTTP content-type 类型表：</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/http/http-content-type.html">https://www.runoob.com/http/http-content-type.html</a></p>
<p><strong>常见的媒体格式类型如下：</strong></p>
<ul>
<li>text/html ： HTML格式</li>
<li>text/plain ：纯文本格式</li>
<li>text/xml ： XML格式</li>
<li>image/gif ：gif图片格式</li>
<li>image/jpeg ：jpg图片格式</li>
<li>image/png：png图片格式</li>
</ul>
<p>以application开头的媒体格式类型：</p>
<ul>
<li>application/xhtml+xml ：XHTML格式</li>
<li>application/xml： XML数据格式</li>
<li>application/atom+xml ：Atom XML聚合格式</li>
<li>application/json： JSON数据格式</li>
<li>application/pdf：pdf格式</li>
<li>application/msword ： Word文档格式</li>
<li>application/octet-stream ： 二进制流数据（如常见的文件下载）</li>
<li>application/x-www-form-urlencoded ： <form encType="">中默认的encType，form表单数据被编码为key/value格式发送到服务器（表单默认的提交数据的格式）</li>
</ul>
<p>另外一种常见的媒体格式是上传文件之时使用的：</p>
<ul>
<li>multipart/form-data ： 需要在表单中进行文件上传时，就需要使用该格式</li>
</ul>
<p><strong>常见的字节型响应：</strong></p>
<ul>
<li>
<p>image/jpeg：图片类型为jpeg或jpg格式。</p>
</li>
<li>
<p>image/gif: 图片类型为gif格式。</p>
</li>
</ul>
<p><strong>设置响应编码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>设置服务端为浏览器产生响应的响应编码，服务端会根据此编码将响应内容的字符转换为字节。同时客户端浏览器会根据此编码方式显示响应内容。</p>
<p><strong>在响应中添加附加信息（文件下载）</strong></p>
<p>在实现文件下载时，我们需要修改响应头，添加附加信息。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>,   <span class="string">&quot;attachment; filename=&quot;</span>+文件名);</span><br></pre></td></tr></table></figure>
<p>==Content-Disposition:attachment==</p>
<p>该附加信息表示作为对下载文件的一个标识字段。不会在浏览器中显示而是直接做下载处理。</p>
<p>filename=文件名,表示指定下载文件的文件名。</p>
<p>解决文件名中文乱码问题:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resp.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;attachment;filename=&quot;</span>+<span class="keyword">new</span> <span class="title class_">String</span> (file.getName().getBytes(<span class="string">&quot;gbk&quot;</span>),<span class="string">&quot;iso-8859-1&quot;</span>));</span><br></pre></td></tr></table></figure>
<h3 id="测试代码">测试代码</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyServlet2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 设置响应码</span></span><br><span class="line">        <span class="comment">//resp.setStatus(500);</span></span><br><span class="line">        <span class="comment">//resp.setStatus(405, &quot;request method not supported&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置响应头</span></span><br><span class="line">        <span class="comment">//resp.setHeader(&quot;Date&quot;,&quot;2022-11-11&quot;);</span></span><br><span class="line">        <span class="comment">// 自定义头</span></span><br><span class="line">        <span class="comment">// resp.setHeader(&quot;aaa&quot;, &quot;bbb&quot;);</span></span><br><span class="line">        <span class="comment">// 高速浏览器响应的数据是什么? 浏览器根据此头决定 数据如何应用</span></span><br><span class="line">        <span class="comment">// 设置MIME类型 json  xml 文件下载  ... ...</span></span><br><span class="line">        <span class="comment">// resp.setHeader(&quot;content-type&quot;, &quot;text/css&quot;);</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html&quot;</span>);<span class="comment">// 专门用于设置Content-Type 响应头</span></span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;&lt;h1&gt;this is tag h1&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="乱码问题">乱码问题</h2>
<h3 id="1-控制台乱码">1 控制台乱码</h3>
<p>设置Tomcat中 conf下logging.properties中所有的UTF-8编码为GBK即可</p>
<h3 id="2-post请求乱码">2 post请求乱码</h3>
<p>通过HttpServletRequest设置请求编码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="3-get请求乱码">3 get请求乱码</h3>
<p>需要手动进行编码解码,或者设置tomcat中的server.xml中的URI编码.tomcat9已经解决了该问题</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span>   <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> <span class="attr">URIEncoding</span>=<span class="string">&quot;utf-8&quot;</span>  /&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-响应乱码">4 响应乱码</h3>
<p>通过HttpServletResponse设置响应编码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以UTF-8编码处理数据</span></span><br><span class="line">resp.setContentType(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"><span class="comment">//设置响应头,以便浏览器知道以何种编码解析数据</span></span><br><span class="line">resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="4-servlet生命周期">4. servlet生命周期</h2>
<h3 id="四个阶段">四个阶段</h3>
<p>Servlet的生命周期是由容器管理的，分别经历四个阶段：</p>
<table>
<thead>
<tr>
<th>阶段</th>
<th>次数</th>
<th>时机</th>
</tr>
</thead>
<tbody>
<tr>
<td>创建 new</td>
<td>1次</td>
<td>第一次请求</td>
</tr>
<tr>
<td>初始化 init()</td>
<td>1次</td>
<td>实例化之后</td>
</tr>
<tr>
<td>执行服务 service()</td>
<td>多次</td>
<td>每次请求</td>
</tr>
<tr>
<td>销毁 destroy()</td>
<td>1次</td>
<td>停止服务</td>
</tr>
</tbody>
</table>
<p>当客户端浏览器第一次请求Servlet时，容器会实例化这个Servlet，然后调用一次init方法，并在新的线程中执行service方法处理请求。service方法执行完毕后容器不会销毁这个Servlet而是做缓存处理，当客户端浏览器再次请求这个Servlet时，容器会从缓存中直接找到这个Servlet对象，并再一次在新的线程中执行Service方法。当容器在销毁Servlet之前对调用一次destory方法。</p>
<p><strong>在Servlet中我们一般不要轻易使用成员变量!!! 可能会造成线程安全问题</strong></p>
<p><strong>如果要使用的话,应该尽量避免对成员变量产生修改</strong></p>
<p><strong>如果要产生修改我们应该注意线程安全问题</strong></p>
<p><strong>如果我们自己添加线程安全编码处理,会严重影响效率</strong></p>
<p><strong>综上所述:原则,能不用成员变量就不用!!!</strong></p>
<p>servlet代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyServlet4</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="comment">// 成员变量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyServlet4</span><span class="params">()</span>   &#123;<span class="comment">// 构造一个Servlet对象的方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;MyServlet4 Constructor invoked&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;<span class="comment">// 初始化</span></span><br><span class="line">        System.out.println(<span class="string">&quot;MyServlet4 init invoked&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 执行服务</span></span><br><span class="line">        System.out.println(<span class="string">&quot;MyServlet4 service invoked&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;<span class="comment">// 销毁</span></span><br><span class="line">        System.out.println(<span class="string">&quot;MyServlet4 destory invoked&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>myServlet4<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.mashibing.servlet.MyServlet4<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>6<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>myServlet4<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/myServlet4.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>​		多次请求servlet并查看控制台输出即可印证上述结论,值得注意的是,如果需要Servlet在服务启动时就实例化并初始化,我们可以在servlet的配置中添加load-on-startup配置启动顺序,配置的数字为启动顺序,应避免冲突且应**&gt;6**</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210803205411-20220507093631302.png" alt="image-20210803205409578"></p>
<p><strong>Servlet处理请求的过程</strong></p>
<p>​		当浏览器基于get方式请求我们创建Servlet时，我们自定义的Servlet中的doGet方法会被执行。doGet方法能够被执行并处理get请求的原因是，容器在启动时会解析web工程中WEB-INF目录中的web.xml文件，在该文件中我们配置了Servlet与URI的绑定，容器通过对请求的解析可以获取请求资源的URI，然后找到与该URI绑定的Servlet并做实例化处理(注意：只实例化一次，如果在缓存中能够找到这个Servlet就不会再做次实例化处理)。在实例化时会使用Servlet接口类型作为引用类型的定义，并调用一次init方法，由于HttpServlet中重写了该方法所以最终执行的是HttpServlet中init方法(HttpServlet中的Init方法是一个空的方法体)，然后在新的线程中调用service方法。由于在HttpServlet中重写了Service方法所以最终执行的是HttpServlet中的service方法。在service方法中通过request.getMethod()获取到请求方式进行判断如果是Get方式请求就执行doGet方法，如果是POST请求就执行doPost方法。如果是基于GET方式提交的，并且在我们自定义的Servlet中又重写了HttpServlet中的doGet方法，那么最终会根据Java的多态特性转而执行我们自定义的Servlet中的doGet方法。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210803205435-20220507093630830.png" alt="image-20210803205435158"></p>
<ul>
<li>老程序员喜欢重写doGet()和doPost()方法 然后挑一个方法里面直接调用另一个方法，因为两个方法很相似。</li>
<li>但是又可以直接重写service，可以同时处理get和post</li>
</ul>
<h2 id="5-ServletContext和ServletConfig">5. ServletContext和ServletConfig</h2>
<h3 id="ServletContext-application">ServletContext(application)</h3>
<h4 id="定义-2">定义</h4>
<p>ServletContext官方叫Servlet上下文。服务器会为每一个Web应用创建一个ServletContext对象。这个对象全局唯一，而且Web应用中的所有Servlet都共享这个对象。所以叫全局应用程序共享对象</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210804094215-20220507093631574.png" alt="image-20210804094215771" style="zoom:67%;" />
<h4 id="作用">作用</h4>
<ul>
<li>相对路径转绝对路径</li>
<li>获取容器的附加信息</li>
<li>读取配置信息</li>
<li>全局容器</li>
</ul>
<h4 id="操作">操作</h4>
<ul>
<li>
<p>获取项目的部署名<br>
==context.getContextPath()==</p>
</li>
<li>
<p>相对路径转绝对路径(文件上传下载时需要注意)</p>
<p>==context.getRealPath(“path”)==</p>
<p>该方法可以将一个相对路径转换为绝对路径，在文件上传与下载时需要用到该方法做路径的转换。</p>
</li>
<li>
<p>获取容器的附加信息</p>
<p>==servletContext.getServerInfo()==</p>
</li>
<li>
<p>返回Servlet容器的名称和版本号</p>
<ul>
<li>
<p>返回Servlet容器所支持Servlet的主版本号</p>
<p>==servletContext.getMajorVersion()==</p>
</li>
<li>
<p>返回Servlet容器所支持Servlet的副版本号</p>
<p>==servletContext.getMinorVersion()==</p>
</li>
</ul>
</li>
<li>
<p>获取web.xml文件中的信息</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>key<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>value<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>读取web.xml文件中<context-param>标签中的配置信息</p>
<p>==servletContext.getInitParameter(“key”)==</p>
</li>
<li>
<p>读取web.xml文件中所有param-name标签中的值。</p>
<p>==servletContext.getInitParameterNames()==</p>
</li>
</ul>
</li>
<li>
<p>全局容器</p>
<ul>
<li>
<p>向全局容器中存放数据。</p>
<p>==servletContext.setAttribute(“key”,ObjectValue)==</p>
</li>
<li>
<p>从全局容器中获取数据。</p>
<p>==servletContext.getAttribute(“key”)==</p>
</li>
<li>
<p>根据key删除全局容器中的value。</p>
<p>==servletContext.removeAttribute(“key”)==</p>
</li>
</ul>
</li>
</ul>
<h5 id="测试代码：">测试代码：</h5>
<p><strong>xml配置</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>username<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>mashibing<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>password<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.msb.testServlet.Servlet1<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servlet1.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>servlet</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1 通过req获取Servlet对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext1</span> <span class="operator">=</span> req.getServletContext();</span><br><span class="line">        <span class="comment">//通过继承的方法获取Servlet对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext2</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        <span class="comment">//比较两种获取方法获取的对象</span></span><br><span class="line">        System.out.println(servletContext1==servletContext2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2 获取部署名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> servletContext1.getContextPath();</span><br><span class="line">        System.out.println(<span class="string">&quot;contextPath&quot;</span>+contextPath);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3 将一个相对路径转换为项目的绝对路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileUpload</span> <span class="operator">=</span> servletContext1.getRealPath(<span class="string">&quot;fileUpload&quot;</span>);</span><br><span class="line">        System.out.println(fileUpload);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4 获取容器的附加信息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">serverInfo</span> <span class="operator">=</span> servletContext1.getServerInfo();</span><br><span class="line">        System.out.println(serverInfo);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5 获取Servlet容器的名称和版本号</span></span><br><span class="line">        <span class="comment">//主版本号</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">majorVersion</span> <span class="operator">=</span> servletContext1.getMajorVersion();</span><br><span class="line">        <span class="comment">//副版本号</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">minorVersion</span> <span class="operator">=</span> servletContext1.getMinorVersion();</span><br><span class="line">        System.out.println(<span class="string">&quot;majorVersion&quot;</span>+majorVersion);</span><br><span class="line">        System.out.println(<span class="string">&quot;minorVersion&quot;</span>+minorVersion);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6 读取web.xml文件信息</span></span><br><span class="line">        <span class="comment">//获取配置的全局初始信息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> servletContext1.getInitParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> servletContext1.getInitParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;username&quot;</span>+username);</span><br><span class="line">        System.out.println(<span class="string">&quot;password&quot;</span>+password);</span><br><span class="line">        <span class="comment">//配置信息名称未知情况下 获取全局初始信息</span></span><br><span class="line">        Enumeration&lt;String&gt; pNames = servletContext1.getInitParameterNames();</span><br><span class="line">        <span class="keyword">while</span> (pNames.hasMoreElements())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">e</span> <span class="operator">=</span> pNames.nextElement();</span><br><span class="line">            System.out.println(e+<span class="string">&quot;:&quot;</span>+ servletContext1.getInitParameter(e));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//7 向ServletContext对象中增加数据域对象</span></span><br><span class="line">        List&lt;String&gt; data = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Collections.addAll(data,<span class="string">&quot;张三&quot;</span>,<span class="string">&quot;李四&quot;</span>,<span class="string">&quot;王武&quot;</span>);</span><br><span class="line">        servletContext1.setAttribute(<span class="string">&quot;list&quot;</span>,data);</span><br><span class="line">        servletContext1.setAttribute(<span class="string">&quot;gender&quot;</span>,<span class="string">&quot;boy&quot;</span>);</span><br><span class="line">        <span class="comment">//getAttribute也可以获得初始信息对象</span></span><br><span class="line">        List&lt;String&gt; list = (List&lt;String&gt;) servletContext1.getAttribute(<span class="string">&quot;list&quot;</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        <span class="type">String</span> <span class="variable">gender</span> <span class="operator">=</span> (String) servletContext1.getAttribute(<span class="string">&quot;gender&quot;</span>);</span><br><span class="line">        System.out.println(gender);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>测试结果</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210804112525-20220507093631140.png" alt="image-20210804112522391"></p>
<h4 id="生命周期">生命周期</h4>
<p>​		当容器启动是会创建ServletContext对象并一直缓存该对象，知道容器关闭后该对象生命周期结束。ServletContext对象的生命周期非常长，所以在使用全局容器时不建议存放业务数据</p>
<h3 id="ServletConfig">ServletConfig</h3>
<h4 id="定义-3">定义</h4>
<p>ServletConfig对象对应web.xml文件中的<servlet>节点。当Tomcat初始化一个Servlet时，会将该Servlet的配置信息，封装到一个ServletConfig对象中。</p>
<h4 id="操作-2">操作</h4>
<p>我们通过Config对象读取servlet节点中的配置信息</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servletName<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servletClass<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>key<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>value<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>读取web.xml文件中<servlet>标签中<init-param>标签中的配置信息。</p>
<p>==servletConfig.getInitParameter(“key”);==</p>
</li>
<li>
<p>读取web.xml文件中当前<servlet>标签中所有<init-param>标签中的值。</p>
<p>==servletConfig.getInitParameterNames();==</p>
</li>
</ul>
<h5 id="测试代码-2">测试代码</h5>
<p><strong>xml配置</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet3<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.msb.testServlet.Servlet3<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>brand<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>ASUS<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>screen<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>三星<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet4<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.msb.testServlet.Servlet4<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>pinpai<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>联想<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>pingmu<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>京东方<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet3<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servlet3.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet4<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servlet4.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>servlet</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletConfig();</span><br><span class="line">        System.out.println(servletConfig.getInitParameter(<span class="string">&quot;brand&quot;</span>));</span><br><span class="line">        System.out.println(servletConfig.getInitParameter(<span class="string">&quot;screen&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet4</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletConfig();</span><br><span class="line">        System.out.println(servletConfig.getInitParameter(<span class="string">&quot;pinpai&quot;</span>));</span><br><span class="line">        System.out.println(servletConfig.getInitParameter(<span class="string">&quot;pingmu&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="6-URL的匹配规则">6. URL的匹配规则</h2>
<h3 id="精确匹配">精确匹配</h3>
<p>精确匹配是指<url-pattern>中配置的值必须与url完全精确匹配。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demoServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/demo.do">http://localhost:8888/demo/demo.do</a> 匹配</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/suibian/demo.do">http://localhost:8888/demo/suibian/demo.do</a> 不匹配</p>
<h3 id="扩展名匹配">扩展名匹配</h3>
<p>在<url-pattern>允许使用统配符“<em>”作为匹配规则，“</em>”表示匹配任意字符。在扩展名匹配中只要扩展名相同都会被匹配和路径无关。注意，在使用扩展名匹配时在<url-pattern>中不能使用“/”，否则容器启动就会抛出异常。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demoServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/abc.do">http://localhost:8888/demo/abc.do</a> 匹配</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/suibian/haha.do">http://localhost:8888/demo/suibian/haha.do</a> 匹配</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/abc">http://localhost:8888/demo/abc</a> 不匹配</p>
<h3 id="路径匹配">路径匹配</h3>
<p>根据请求路径进行匹配，在请求中只要包含该路径都匹配，“*”表示任意路径以及子路径</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demoServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/suibian/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/suibian/haha.do">http://localhost:8888/demo/suibian/haha.do</a> 匹配</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/suibian/hehe/haha.do">http://localhost:8888/demo/suibian/hehe/haha.do</a> 匹配</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/hehe/heihei.do">http://localhost:8888/demo/hehe/heihei.do</a> 不匹配</p>
<h3 id="任意匹配">任意匹配</h3>
<p>匹配“/ 匹配所有但不包括JSP页面</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/suibian.do%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/suibian.do匹配</a></p>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/addUser.html%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/addUser.html匹配</a></p>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/css/view.css%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/css/view.css匹配</a></p>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/addUser.jsp%E4%B8%8D%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/addUser.jsp不匹配</a></p>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/user/addUser.jsp%E4%B8%8D%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/user/addUser.jsp不匹配</a></p>
<h3 id="匹配所有">匹配所有</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/suibian.do%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/suibian.do匹配</a></p>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/addUser.html%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/addUser.html匹配</a></p>
<p><a target="_blank" rel="noopener" href="http://localhost:8888/demo/suibian/suibian.do%E5%8C%B9%E9%85%8D">http://localhost:8888/demo/suibian/suibian.do匹配</a></p>
<h3 id="优先顺序">优先顺序</h3>
<p>当一个url与多个Servlet的匹配规则可以匹配时，则按照 “ 精确路径 &gt; 最长路径 &gt;扩展名”这样的优先级匹配到对应的Servlet。</p>
<h4 id="案例分析">案例分析</h4>
<p>Servlet1映射到 /abc/*</p>
<p>Servlet2映射到 /*</p>
<p>Servlet3映射到 /abc</p>
<p>Servlet4映射到 *.do</p>
<p>当请求URL为“/abc/a.html”，“/abc/<em>”和“/</em>”都匹配，Servlet引擎将调用Servlet1。</p>
<p>当请求URL为“/abc”时，“/abc/*”和“/abc”都匹配，Servlet引擎将调用Servlet3。</p>
<p>当请求URL为“/abc/a.do”时，“/abc/<em>”和“</em>.do”都匹配，Servlet引擎将调用Servlet1。</p>
<p>当请求URL为“/a.do”时，“/<em>”和“</em>.do”都匹配，Servlet引擎将调用Servlet2。</p>
<p>当请求URL为“/xxx/yyy/a.do”时，“/<em>”和“</em>.do”都匹配，Servlet引擎将调用Servlet2。</p>
<h3 id="URL映射方式">URL映射方式</h3>
<p>在web.xml文件中支持将多个URL映射到一个Servlet中，但是相同的URL不能同时映射到两个Servlet中。</p>
<h4 id="方式一">方式一</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demoServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/suibian/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="方式二">方式二</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demoServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/suibian/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demoServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="7-注解开发">7. 注解开发</h2>
<p><strong>基于注解式开发Servlet</strong></p>
<p>​	在Servlet3.0以及之后的版本中支持注解式开发Servlet。对于Servlet的配置不在依赖于web.xml配置文件而是使用@WebServlet将一个继承于javax.servlet.http.HttpServlet的类定义为Servlet组件。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> WebServlet &#123;</span><br><span class="line">    String <span class="title function_">name</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String[] value() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    String[] urlPatterns() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">loadOnStartup</span><span class="params">()</span> <span class="keyword">default</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    WebInitParam[] initParams() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">asyncSupported</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">smallIcon</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">largeIcon</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">description</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">displayName</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="相关属性">相关属性</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210804163548-20220507093631188.png" alt="image-20210804163546326"></p>
<h2 id="8-forward-请求转发">8. forward 请求转发</h2>
<h3 id="forward处理流程">forward处理流程</h3>
<ol>
<li>清空Response存放响应正文数据的缓冲区</li>
<li>如果目标资源为Servlet或JSP，就调用它们的service()方法，把该方法产生的响应结果发送到客户端；如果目标资源文件系统中的静态HTML，就读取文档中的数据把它发送到客户端。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210804165930-20220507093631487.png" alt="image-20210804165930737"></p>
<ul>
<li>请求转发是一种<strong>服务器的行为</strong>,是对浏览器屏蔽</li>
<li>浏览器的地址栏不会发生变化</li>
<li>请求的参数是可以从源组件传递到目标组件的</li>
<li>请求对象和响应对象没有重新创建,而是传递给了目标组件</li>
<li>请求转发可以帮助我们完成页面的跳转</li>
<li>请求转发可以转发至WEB-INF里</li>
<li>请求转发只能转发给当前项目的内部资源,不能转发至外部资源</li>
<li>常用forward</li>
</ul>
<h3 id="forword处理特点">forword处理特点</h3>
<ol>
<li>由于forword()方法先清空用于存放响应正文的缓冲区，因此源Servlet生成的响应结果不会被发送到客户端，只有目标资源生成的响应结果才会被发送到客户端。</li>
<li>如果源Servlet在进行请求转发之前，已经提交了响应结（flushBuffer(),close()方法），那么forward()方法抛出IllegalStateException。为了避免该异常，不应该在源Servlet中提交响应结果。</li>
</ol>
<h4 id="注意">注意</h4>
<ol>
<li>
<p>在forward转发模式下,请求应该完全交给目标资源去处理,我们在源组件中,不要作出任何的响应处理</p>
</li>
<li>
<p>在forward方法调用之后,也不要在使用req和resp对象做其他操作了</p>
</li>
</ol>
<h3 id="测试代码-3">测试代码</h3>
<p>servlet1 请求转发至 servlet2</p>
<p><strong>servlet1</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servlet1.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;servlet1 service invoked&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">money</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;money&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;money:&quot;</span>+money);</span><br><span class="line">        <span class="comment">// 设置响应类型和编码(include模式下)</span></span><br><span class="line">        <span class="comment">/*  resp.setCharacterEncoding(&quot;UTF-8&quot;);</span></span><br><span class="line"><span class="comment">        resp.setContentType(&quot;text/html;charset=UTF-8&quot;);*/</span></span><br><span class="line">        <span class="comment">// 增加响应内容</span></span><br><span class="line">        <span class="comment">//resp.getWriter().println(&quot;servlet1在转发之前增加的响应内容&quot;);</span></span><br><span class="line">        <span class="comment">// 请求转发给另一个组件</span></span><br><span class="line">        <span class="comment">// 获得一个请求转发器</span></span><br><span class="line">        <span class="comment">//RequestDispatcher requestDispatcher = req.getRequestDispatcher(&quot;servlet2.do&quot;);</span></span><br><span class="line">        <span class="comment">//RequestDispatcher requestDispatcher = req.getRequestDispatcher(&quot;aaa.html&quot;);</span></span><br><span class="line">        <span class="comment">//RequestDispatcher requestDispatcher = req.getRequestDispatcher(&quot;index.jsp&quot;);</span></span><br><span class="line">        <span class="comment">//RequestDispatcher requestDispatcher = req.getRequestDispatcher(&quot;WEB-INF/bbb.html&quot;);</span></span><br><span class="line">        <span class="type">RequestDispatcher</span> <span class="variable">requestDispatcher</span> <span class="operator">=</span> req.getRequestDispatcher(<span class="string">&quot;https://www.baidu.com&quot;</span>);</span><br><span class="line">        <span class="comment">// 由请求转发器作出转发动作</span></span><br><span class="line">        requestDispatcher.forward(req,resp);<span class="comment">// 托管给目标资源(forward多一些)</span></span><br><span class="line">        <span class="comment">//requestDispatcher.include(req,resp);  // 让目标资源完成部分工作</span></span><br><span class="line">        <span class="comment">// 继续增加响应信息 (include模式)</span></span><br><span class="line">        <span class="comment">//resp.getWriter().println(&quot;servlet1在转发之后增加的响应内容&quot;);</span></span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>Servlet2</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servlet2.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;servlet2 service invoked&quot;</span>);</span><br><span class="line">        <span class="comment">// 接收参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">money</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;money&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;money:&quot;</span>+money);</span><br><span class="line">        <span class="comment">// 作出响应 (在forWord模式下)</span></span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        writer.println(<span class="string">&quot;支付宝到账:&quot;</span>+money+<span class="string">&quot;元&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="include（了解）">include（了解）</h3>
<p>在include转发模式下,设置响应可以在转发之前,也可以在转发之后</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*servlet1在转发之前增加的响应内容*/</span></span><br><span class="line"><span class="comment">// 设置响应类型和编码(include模式下)</span></span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 增加响应内容</span></span><br><span class="line">        resp.getWriter().println(<span class="string">&quot;servlet1在转发之前增加的响应内容&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得一个请求转发器</span></span><br><span class="line">        <span class="type">RequestDispatcher</span> <span class="variable">requestDispatcher</span> <span class="operator">=</span> req.getRequestDispatcher(<span class="string">&quot;servlet2.do&quot;</span>);</span><br><span class="line"><span class="comment">// 让目标资源完成部分工作</span></span><br><span class="line">		requestDispatcher.include(req,resp);  </span><br><span class="line"></span><br><span class="line"><span class="comment">/*servlet1在转发之后增加的响应内容*/</span></span><br><span class="line"><span class="comment">// 继续增加响应信息 (include模式)</span></span><br><span class="line">		resp.getWriter().println(<span class="string">&quot;servlet1在转发之后增加的响应内容&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>但是不常用的</p>
<h2 id="9-sendRedirect-响应重定向">9. sendRedirect 响应重定向</h2>
<p>响应重定向是通过HttpServletResponse对象sendRedirect(“路径”)的方式。实现是——服务器通知浏览器,让浏览器去自主请求其他资源的一种方式</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210804171205-20220507093631361.png" alt="image-20210804171130006"></p>
<h3 id="运作流程：">运作流程：</h3>
<ol>
<li>用户在浏览器端输入特定URL，请求访问服务器端的某个Servlet。</li>
<li>服务器端的Servlet返回一个状态码为302的响应结果，该响应结果的含义为：让浏览器端再请求访问另一个Web资源，在响应结果中提供了另一个Web资源的URL。另一个Web资源有可能在同一个Web服务器上，也有可能不再同一个Web服务器上。</li>
<li>当浏览器端接收到这种响应结果后，再立即自动请求访问另一个Web资源。</li>
<li>浏览器端接收到另一个Web资源的响应结果。</li>
</ol>
<h3 id="测试代码-4">测试代码:</h3>
<p><strong>servlet3</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servlet3.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;servlet3 service invoked&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">money</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;money&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;money:&quot;</span>+money);</span><br><span class="line">        <span class="comment">// 响应重定向</span></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;servlet4.do?money=&quot;</span>+money);</span><br><span class="line">        <span class="comment">//resp.sendRedirect(&quot;WEB-INF/bbb.html&quot;);</span></span><br><span class="line">        <span class="comment">//resp.sendRedirect(&quot;https://www.baidu.com&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>servlet4</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servlet4.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet4</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;servlet4 service invoked&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">money</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;money&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;money:&quot;</span>+money);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="注意-2">注意</h3>
<ol>
<li>重定向是服务器给浏览器重新指定请求方向 是一种<strong>浏览器行为</strong> 地址栏会发生变化</li>
<li>重定向时,请求对象和响应对象都会再次产生,请求中的参数是不会携带</li>
<li>重定向也可以帮助我们完成页面跳转</li>
<li>重定向不能帮助我们访问WEB-INF中的资源</li>
<li>重定向可以定向到外部资源</li>
</ol>
<h2 id="10-路径问题">10. 路径问题</h2>
<h3 id="前端路径">前端路径</h3>
<p>项目结构</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210804210749-20220507093631233.png" alt="image-20210804201746315" style="zoom:67%;" />
<p>测试代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    base标签的作用是在相对路径之前自动补充base[href]中的值</span></span><br><span class="line"><span class="comment">    如果base标签不写,那么默认就是当前文件所在的路径</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base</span> <span class="attr">href</span>=<span class="string">&quot;http://127.0.0.1:8080/testServlet4_war_exploded/&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;base href=&quot;http://127.0.0.1:8080/testServlet4_war_exploded/a/a2/&quot;&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">this is page a1</span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    相对(基准)路径:以当前文件本身的位置去定位其他文件,相对自己的路径,以当前文件所在的位置为基准位置</span></span><br><span class="line"><span class="comment">    绝对(基准)路径:以一个固定的位置去定位其他文文件,以一个固定的路径作为定位文件的基准位置,和文件本身位置无关</span></span><br><span class="line"><span class="comment">    相对路径,不以/开头,就是相对路径  ..代表向上一层</span></span><br><span class="line"><span class="comment">    绝对路径,以/开头   在页面上 /代表从项目的部署目录开始找  从webapps中开始找</span></span><br><span class="line"><span class="comment">    页面的绝对路径要有项目名,除非我们的项目没有设置项目名</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;a2.html&quot;</span> <span class="attr">TARGET</span>=<span class="string">&quot;_self&quot;</span>&gt;</span>相对路径跳转至A2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;../../b/b2/b1.html&quot;</span> <span class="attr">TARGET</span>=<span class="string">&quot;_self&quot;</span>&gt;</span>相对路径跳转至b1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;a/a2/a2.html&quot;</span> <span class="attr">TARGET</span>=<span class="string">&quot;_self&quot;</span>&gt;</span>base相对路径跳转至A2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;b/b2/b1.html&quot;</span> <span class="attr">TARGET</span>=<span class="string">&quot;_self&quot;</span>&gt;</span>base相对路径跳转至b1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/testServlet4_war_exploded/a/a2/a2.html&quot;</span> <span class="attr">TARGET</span>=<span class="string">&quot;_self&quot;</span>&gt;</span>绝对路径跳转至A2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/testServlet4_war_exploded/b/b2/b1.html&quot;</span> <span class="attr">TARGET</span>=<span class="string">&quot;_self&quot;</span>&gt;</span>绝对路径跳转至b1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="总结">总结</h4>
<ol>
<li>
<p>以/开头的路径是绝对路径,不以/开头是相对路径</p>
</li>
<li>
<p>绝对路径/后面要写当前服务的上下文路径名</p>
</li>
<li>
<p>==…/==代表向上一层的路径</p>
</li>
<li>
<p>==base标签==可以简化相对路径,当使用相对路径时,默认会在相对路径之前补充 base中的内容；如果没有定义base 默认就是当前文件所在的路径</p>
</li>
</ol>
<h2 id="11-会话管理">11. 会话管理</h2>
<h3 id="认识Cookie和Session">认识Cookie和Session</h3>
<p>Cookie对象与HttpSession对象的作用是维护客户端浏览器与服务端的会话状态的两个对象。由于HTTP协议是一个无状态的协议，所以服务端并不会记录当前客户端浏览器的访问状态，但是在有些时候我们是需要服务端能够记录客户端浏览器的访问状态的，如获取当前客户端浏览器的访问服务端的次数时就需要会话状态的维持。在Servlet中提供了Cookie对象与HttpSession对象用于维护客户端与服务端的会话状态的维持。二者不同的是Cookie是通过客户端浏览器实现会话的维持，而HttpSession是通过服务端来实现会话状态的维持。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210805102003-20220507093631748.png" alt="image-20210805101816416" style="zoom: 50%;" />
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210805102039-20220507093631952.png" alt="image-20210805102039111" style="zoom: 50%;" />
<h3 id="Cookie">Cookie</h3>
<p>Cookie是一种保存少量信息至浏览器的一种技术,第一请求时,服务器可以响应给浏览器一些Cookie信息,第二次请求,浏览器会携带之前的cookie发送给服务器,通过这种机制可以实现在浏览器端保留一些用户信息.为服务端获取用户状态获得依据</p>
<h4 id="特点-3">特点</h4>
<ul>
<li>
<p>Cookie使用字符串存储数据</p>
</li>
<li>
<p>Cookie使用Key与Value结构存储数据</p>
</li>
<li>
<p>单个Cookie存储数据大小限制在4097个字节</p>
</li>
<li>
<p>Cookie存储的数据中不支持中文，Servlet4.0中支持</p>
</li>
<li>
<p>Cookie是与域名绑定所以不支持跨一级域名访问</p>
</li>
<li>
<p>Cookie对象保存在客户端浏览器内存上或系统磁盘中</p>
</li>
<li>
<p>Cookie分为持久化Cookie(保存在磁盘上)与状态Cookie(保存在内存上)</p>
</li>
<li>
<p>浏览器在保存同一域名所返回Cookie的数量是有限的。不同浏览器支持的数量不同，Chrome浏览器为50个</p>
</li>
<li>
<p>浏览器每次请求时都会把与当前访问的域名相关的Cookie在请求中提交到服务端。</p>
</li>
</ul>
<h4 id="创建对象和响应">创建对象和响应</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;value&quot;</span>)</span><br><span class="line"><span class="comment">//通过new关键字创建Cookie对象</span></span><br><span class="line">response.addCookie(cookie)</span><br><span class="line"><span class="comment">//通过HttpServletResponse对象将Cookie写回给客户端浏览器。</span></span><br></pre></td></tr></table></figure>
<h4 id="数据的获取">数据的获取</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过HttpServletRequest对象获取Cookie，返回Cookie数组。</span></span><br><span class="line">Cookie[] cookies = request.getCookies()</span><br></pre></td></tr></table></figure>
<h4 id="Cookie持久化和状态Cookie">Cookie持久化和状态Cookie</h4>
<ul>
<li>==状态Cookie==：浏览器会缓存Cookie对象。浏览器关闭后Cookie对象销毁。</li>
<li>==持久化Cookie==：浏览器会对Cookie做持久化处理，基于文件形式保存在系统的指定目录中。在Windows10系统中为了安全问题不会显示Cookie中的内容。</li>
</ul>
<p>​       当Cookie对象创建后<strong>默认为状态Cookie</strong>。可以使用Cookie对象下的==cookie.setMaxAge(60)==方法设置失效时间，单位为秒。一旦设置了失效时间，那么该Cookie为持久化Cookie，浏览器会将Cookie对象持久化到磁盘中。当失效时间到达后文件删除。</p>
<h4 id="测试代码-5">测试代码</h4>
<p><strong>通过响应对象 向浏览器响应cookie</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servlet1.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 通过响应对象,向浏览器响应一些Cookie</span></span><br><span class="line">        Cookie c1=<span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;age&quot;</span>,<span class="string">&quot;10&quot;</span>);<span class="comment">// 状态Cookie 重启即清除</span></span><br><span class="line">        Cookie c2=<span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;gender&quot;</span>, <span class="string">&quot;男&quot;</span>);<span class="comment">//持久化Cookie 让浏览器保留1分钟</span></span><br><span class="line">        <span class="comment">//c2.setMaxAge(60);// 秒钟    持久化Cookie 让浏览器保留1分钟</span></span><br><span class="line">        resp.addCookie(c1);</span><br><span class="line">        resp.addCookie(c2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>获取请求中cookie</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servlet2.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 读取请求中的Cookie</span></span><br><span class="line">        Cookie[] cookies = req.getCookies();</span><br><span class="line">        <span class="comment">//cookies不为null</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">null</span> != cookies)&#123;</span><br><span class="line">            <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">                System.out.println(cookie.getName()+<span class="string">&quot;=&quot;</span>+cookie.getValue());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="案例：通过Cookie判断用户是否访问过当前Servlet">案例：通过Cookie判断用户是否访问过当前Servlet</h4>
<p>需求：</p>
<p>​                                                                                                                                                                                      当客户端浏览器第一次访问Servlet时返回“您好，欢迎您第一次访问！”，第二次访问时返回“欢迎您回来！”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servlet3.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 如果是第一访问当前Servlet.向浏览器响应一个cookie (&quot;servlet3&quot;,&quot;1&quot;)</span></span><br><span class="line">        <span class="comment">// 如果是多次访问,就再次数上+1</span></span><br><span class="line">        Cookie[] cookies = req.getCookies();</span><br><span class="line">        <span class="type">boolean</span>  <span class="variable">flag</span> <span class="operator">=</span><span class="literal">false</span> ;</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">null</span> !=cookies)&#123;</span><br><span class="line">            <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">cookieName</span> <span class="operator">=</span> cookie.getName();</span><br><span class="line">                <span class="keyword">if</span>(cookieName.equals(<span class="string">&quot;servlet3&quot;</span>))&#123;</span><br><span class="line">                    <span class="comment">// 创建Cookie次数+1</span></span><br><span class="line">                    <span class="type">Integer</span> <span class="variable">value</span> <span class="operator">=</span> Integer.parseInt(cookie.getValue())+<span class="number">1</span>;</span><br><span class="line">                    Cookie c=<span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;servlet3&quot;</span>, String.valueOf(value));</span><br><span class="line">                    resp.addCookie(c);</span><br><span class="line">                    System.out.println(<span class="string">&quot;欢迎您第&quot;</span>+value+<span class="string">&quot;访问&quot;</span>);</span><br><span class="line">                    flag=<span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!flag)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;欢迎您第一次访问&quot;</span>);</span><br><span class="line">            Cookie c=<span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;servlet3&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">            resp.addCookie(c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Session">Session</h3>
<h3 id="案例-判断用户是否登录">案例:判断用户是否登录</h3>
<h4 id="需求">需求:</h4>
<p>实现登录一次即可,在一次会话内,可以反复多次访问WEB-INF/ welcome.html,如果没有登录过,跳转到登录页,登录成功后,可以访问</p>
<h4 id="项目结构">项目结构:</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210805142941-20220507093631639.png" alt="image-20210805142907533" style="zoom:67%;" />
<h4 id="组件介绍：">组件介绍：</h4>
<h5 id="login-html">login.html</h5>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span> <span class="attr">action</span>=<span class="string">&quot;loginServlet.do&quot;</span>&gt;</span></span><br><span class="line">    用户名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> &gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> &gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="main-html">main.html</h5>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   this is main page</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="LoginServlet">LoginServlet</h5>
<p>用来校验登录的，登陆成功将用户信息存户HttpSession，否则返回到登录页。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/loginServlet.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 获取用户名和密码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="comment">// 如果用户名和密码为 msb 1234</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;msb&quot;</span>.equals(username)  &amp;&amp; <span class="string">&quot;1234&quot;</span>.equals(password))&#123;</span><br><span class="line">            <span class="comment">// 将用户信息放在HTTPSession中</span></span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">User</span>(<span class="literal">null</span>, <span class="literal">null</span>, <span class="string">&quot;msb&quot;</span>, <span class="string">&quot;1234&quot;</span>);</span><br><span class="line">            <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">            session.setAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">            <span class="comment">// 登录成功 跳转至 main.html</span></span><br><span class="line">            resp.sendRedirect(req.getContextPath()+<span class="string">&quot;/mainServlet.do&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 登录失败 回到login.html</span></span><br><span class="line">            resp.sendRedirect(req.getContextPath()+<span class="string">&quot;/login.html&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="MainServlet">MainServlet</h5>
<p>用来向mian.html中跳转的，同时验证登录的，可以直接跳转，否则回到登录页。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/mainServlet.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//跳转至main.html</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User)session.getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">null</span> != user)&#123;</span><br><span class="line">            <span class="comment">// 判断如果登录过 允许跳转  HTTPSession中如果有登陆过的信息</span></span><br><span class="line">            req.getRequestDispatcher(<span class="string">&quot;/WEB-INF/main.html&quot;</span>).forward(req,resp);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 如果没有登录过 回到登录去登录  HTTPSession中如果有登陆过的信息</span></span><br><span class="line">            resp.sendRedirect(<span class="string">&quot;login.html&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="User">User</h5>
<p>存储用户信息的实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    <span class="keyword">private</span> String realname;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String pasword;</span><br></pre></td></tr></table></figure>
<h1>JSP</h1>
<h2 id="指令标签">指令标签</h2>
<p>三种指令标签</p>
<table>
<thead>
<tr>
<th>指令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;%@ page %&gt;</td>
<td>定义网页依赖属性，如脚本语言，error页面、缓存需求等</td>
</tr>
<tr>
<td>&lt;%@ include %&gt;</td>
<td>包含其他文件</td>
</tr>
<tr>
<td>&lt;%@ taglib%</td>
<td>引入标签库的定义</td>
</tr>
</tbody>
</table>
<h3 id="page标签">page标签</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--告知浏览器以什么格式和编码解析 响应的数据--%&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span>  %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%--设置JSP页面转换的语言--%&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%@ page language=<span class="string">&quot;java&quot;</span>%&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%--导包--%&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;com.msb.entity.User&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%--在转换成java代码时使用的编码 一般不用设置--%&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%@ page pageEncoding=<span class="string">&quot;UTF-8&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%--指定错误页 当页面发生错误时 指定跳转的页面--%&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%@ page errorPage=<span class="string">&quot;error500.JSP&quot;</span> %&gt;</span><br><span class="line">    &lt;%--指定当前页为异常提示页 当前页面可以接收异常对象 --%&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%<span class="meta">@page</span> isErrorPage=<span class="string">&quot;true&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>errorPage是一种处理错误提示也的功能除了JSP有的错误提示页功能</p>
<p>javaEE中自带其他的错位提示页处理功能，具体配置如下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>500<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/error500.JSP<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>404<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/error404.JSP<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>当JSP中发生了异常时,如果JSP中配置的错误页和web.xml 中配置的错误页冲突了,JSP page指令的 errorPage优先级更高</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210807110128-20220507093631490.png" alt="image-20210807110126899" style="zoom:67%;" />
<h3 id="include标签">include标签</h3>
<p>JSP可以通过Include指令来包含其他文件。被包含的文件可以是JSP文件、HTML文件或文本文件。包含的文件就好像是该JSP文件的一部分，会被同时编译执行。除了include指令标签可以实现引入以外，使用jsp:include也可以实现引入</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--静态引入使用的是 include 指令标签</span><br><span class="line"></span><br><span class="line">    被引入的JSP页面不会生成java代码 被引入的网页和当前页生成代码后形成了一个java文件--%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">&quot;head.JSP&quot;</span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--动态引入 JSP标签中的 include选项</span><br><span class="line"></span><br><span class="line">    被引入的JSP页面会生成独立的java代码 </span><br><span class="line"></span><br><span class="line">    在生成的java代码中 使用JSPRuntimeLibrary.include(request, response, <span class="string">&quot;head.JSP&quot;</span>, out, <span class="literal">false</span>);引入其他页面</span><br><span class="line"></span><br><span class="line">    --%&gt;</span><br><span class="line"></span><br><span class="line">&lt;jsp:include page=<span class="string">&quot;head.JSP&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>查看转译以后的java源代码文件中的区别</p>
<p>静态引入：@include被引入的网页和当前页生成代码后形成了一个java文件</p>
<p>动态引入：jsp:include被引入的JSP页面会生成独立的java代码</p>
<h3 id="taglib指令标签">taglib指令标签</h3>
<p>JSP API允许用户自定义标签，一个自定义标签库就是自定义标签的集合。Taglib指令引入一个自定义标签集合的定义，包括库路径、自定义标签。</p>
<p>语法：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib   uri=<span class="string">&quot;uri&quot;</span> prefix=<span class="string">&quot;prefixOfTag&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<h2 id="内置对象">内置对象</h2>
<h3 id="九大对象">九大对象</h3>
<p><strong>四大域对象</strong></p>
<ul>
<li>
<p>pageContext  page域     当前页面内可用</p>
</li>
<li>
<p>request       reqeust域  单次请求</p>
</li>
<li>
<p>session       session域   单次会话</p>
</li>
<li>
<p>application   application 域项目运行</p>
</li>
</ul>
<p><strong>响应对象</strong></p>
<ul>
<li>response</li>
</ul>
<p><strong>输出流对象</strong></p>
<ul>
<li>out 打印流</li>
</ul>
<p><strong>其他三个对象</strong></p>
<ul>
<li>
<p>servletConfig:由于JSP本身也是一个Servlet,所以容器也会给我们准备一个ServletConfig</p>
</li>
<li>
<p>page        就是他this对象 当前JSP对象本身</p>
</li>
<li>
<p>exception   异常对象,在错误提示页上使用,当isErrorpage=true 才具有该对象</p>
</li>
</ul>
<h2 id="案例一：在浏览器上访问Emp表-动态地分等级">案例一：在浏览器上访问Emp表 动态地分等级</h2>
<p>EmpDaoImpl.java</p>
<p>实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">EmpDao</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String url=<span class="string">&quot;jdbc:mysql://127.0.0.1:3306/mydb?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String username=<span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String password=<span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;Emp&gt; list =<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span><span class="literal">null</span>;</span><br><span class="line">        PreparedStatement pstat=<span class="literal">null</span>;</span><br><span class="line">        ResultSet resultSet=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            connection = DriverManager.getConnection(url, username, password);</span><br><span class="line">            pstat = connection.prepareStatement(<span class="string">&quot;select * from emp&quot;</span>);</span><br><span class="line">            resultSet = pstat.executeQuery();</span><br><span class="line">            <span class="keyword">while</span>(resultSet.next())&#123;</span><br><span class="line">                Integer empno=resultSet.getInt(<span class="string">&quot;empno&quot;</span>);</span><br><span class="line">                Integer deptno=resultSet.getInt(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">                Integer mgr=resultSet.getInt(<span class="string">&quot;mgr&quot;</span>);</span><br><span class="line">                String ename=resultSet.getString(<span class="string">&quot;ename&quot;</span>);</span><br><span class="line">                String job=resultSet.getString(<span class="string">&quot;job&quot;</span>);</span><br><span class="line">                Double sal=resultSet.getDouble(<span class="string">&quot;sal&quot;</span>);</span><br><span class="line">                Double comm=resultSet.getDouble(<span class="string">&quot;comm&quot;</span>);</span><br><span class="line">                Date hiredate=resultSet.getDate(<span class="string">&quot;hiredate&quot;</span>);</span><br><span class="line">                <span class="type">Emp</span> <span class="variable">emp</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Emp</span>( empno,  ename,  job,  mgr,  hiredate,  sal,  comm,  deptno);</span><br><span class="line">                list.add(emp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="literal">null</span>!=resultSet)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    resultSet.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(<span class="literal">null</span>!=pstat)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    pstat.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(<span class="literal">null</span>!=connection)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    connection.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Emp.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmpDao</span> &#123;</span><br><span class="line">    List&lt;Emp&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>EmpServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/empServlet.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="comment">// dao对象</span></span><br><span class="line">    EmpDao empDao=<span class="keyword">new</span> <span class="title class_">EmpDaoImpl</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 获取数据</span></span><br><span class="line">        List&lt;Emp&gt; list = empDao.findAll();</span><br><span class="line">        <span class="comment">// 将数据放入请求域</span></span><br><span class="line">        req.setAttribute(<span class="string">&quot;emps&quot;</span>, list);</span><br><span class="line">        <span class="comment">// 请求转发给JSP</span></span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;showEmp.jsp&quot;</span>).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>showEmp.jsp</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.List&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;com.msb.pojo.Emp&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        table&#123;</span><br><span class="line">            border: 3px solid blue;</span><br><span class="line">            width: <span class="number">80</span>%;</span><br><span class="line">            margin: 0px auto;</span><br><span class="line">        &#125;</span><br><span class="line">        td,th&#123;</span><br><span class="line">            border: 2px solid green;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;table cellspacing=<span class="string">&quot;0px&quot;</span> cellpadding=<span class="string">&quot;0px&quot;</span>&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;编号&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;姓名&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;上级编号&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;职务&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;入职日期&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;薪资&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;补助&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;部门号&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;薪资等级&lt;/th&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;%</span><br><span class="line">            List&lt;Emp&gt; emps = (List&lt;Emp&gt;) request.getAttribute(<span class="string">&quot;emps&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (Emp emp : emps) &#123;</span><br><span class="line">        %&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=emp.getEmpno()%&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=emp.getEname()%&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=emp.getMgr()%&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=emp.getJob()%&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=emp.getHiredate()%&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=emp.getSal()%&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=emp.getComm()%&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%=emp.getDeptno()%&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;%--out.print(<span class="string">&quot;&lt;td&gt;&quot;</span>)--%&gt;</span><br><span class="line">         &lt;%</span><br><span class="line">             <span class="type">Double</span> <span class="variable">sal</span> <span class="operator">=</span> emp.getSal();</span><br><span class="line">             <span class="keyword">if</span>(sal&lt;=<span class="number">500</span>)&#123;</span><br><span class="line">                 out.print(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>( sal &lt;=<span class="number">1000</span>)&#123;</span><br><span class="line">                 out.print(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>( sal &lt;=<span class="number">1500</span>)&#123;</span><br><span class="line">                 out.print(<span class="string">&quot;C&quot;</span>);</span><br><span class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>( sal &lt;=<span class="number">2000</span>)&#123;</span><br><span class="line">                 out.print(<span class="string">&quot;D&quot;</span>);</span><br><span class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>( sal &lt;=<span class="number">3000</span>)&#123;</span><br><span class="line">                 out.print(<span class="string">&quot;E&quot;</span>);</span><br><span class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>( sal &lt;=<span class="number">4000</span>)&#123;</span><br><span class="line">                 out.print(<span class="string">&quot;F&quot;</span>);</span><br><span class="line">             &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                 out.print(<span class="string">&quot;G&quot;</span>);</span><br><span class="line">             &#125;</span><br><span class="line">         %&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;%</span><br><span class="line">            &#125;</span><br><span class="line">        %&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="EL表达式">EL表达式</h2>
<p>Expression Languaga</p>
<p>EL表达式中定义了一些可以帮助我们快捷从域对象中取出数据的写法,<strong>基本语法为</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;域标志.数据名.属性名(可选)&#125;</span><br></pre></td></tr></table></figure>
<p><strong>四个域标志关键字分别为</strong></p>
<ul>
<li>
<p>requestScope         request域</p>
</li>
<li>
<p>sessionScope          session域</p>
</li>
<li>
<p>applicationScope   application域</p>
</li>
<li>
<p>pageScope             page域</p>
</li>
</ul>
<h3 id="EL表达式快捷取出域对象">EL表达式快捷取出域对象</h3>
<ul>
<li>
<p>requestScope         request域</p>
</li>
<li>
<p>sessionScope          session域</p>
</li>
<li>
<p>applicationScope   application域</p>
</li>
<li>
<p>pageScope             page域</p>
</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;com.msb.pojo.User&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;%--向pageContext域中放数据--%&gt;</span><br><span class="line">        &lt;%</span><br><span class="line">        pageContext.setAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;pageContextMessage&quot;</span>);</span><br><span class="line">        pageContext.setAttribute(<span class="string">&quot;userx&quot;</span>, <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>,<span class="string">&quot;大黄&quot;</span>,<span class="string">&quot;abcdefg&quot;</span>));</span><br><span class="line">        %&gt;</span><br><span class="line">        &lt;%--</span><br><span class="line">    从域中取出数据</span><br><span class="line">    El表达式在获取对象属性值得时候,是通过对象的属性的get方法获取的</span><br><span class="line">    保证对象的要获取的属性必须有对应get方法才可以</span><br><span class="line">    EL表达式在使用时是不需要<span class="keyword">import</span>其他类的</span><br><span class="line">    El如果获取的是NULL值,是不展示任何信息的</span><br><span class="line">    --%&gt;</span><br><span class="line">        pageContext域中的数据:&lt;br/&gt;</span><br><span class="line">        msg:$&#123;pageScope.msg&#125;&lt;br/&gt;</span><br><span class="line">        username:$&#123;pageScope.userx.name&#125;&lt;br/&gt;</span><br><span class="line">        &lt;hr/&gt;</span><br><span class="line">        request域中的数据:&lt;br/&gt;</span><br><span class="line">        msg:$&#123;requestScope.msg&#125;&lt;br/&gt;</span><br><span class="line">        username:$&#123;requestScope.user.name&#125;&lt;br/&gt;</span><br><span class="line">        &lt;hr/&gt;</span><br><span class="line">        session域中的数据:&lt;br/&gt;</span><br><span class="line">        msg:$&#123;sessionScope.msg&#125;&lt;br/&gt;</span><br><span class="line">        username:$&#123;sessionScope.users[<span class="number">1</span>].name&#125;&lt;br/&gt;</span><br><span class="line">        &lt;hr/&gt;</span><br><span class="line">        application域中的数据:&lt;br/&gt;</span><br><span class="line">        msg:$&#123;applicationScope.msg&#125;&lt;br/&gt;</span><br><span class="line">        username:$&#123;applicationScope.userMap.a.name&#125;&lt;br/&gt;</span><br><span class="line">        &lt;hr/&gt;</span><br><span class="line">        &lt;%--EL表达式在取出数据的时候是可以省略域标志的</span><br><span class="line">    EL表达式会自动依次到四个域中去找数据</span><br><span class="line">    --%&gt;</span><br><span class="line">        PageContext username:$&#123;userx.name&#125;&lt;br/&gt;</span><br><span class="line">        Request username:$&#123;user.name&#125;&lt;br/&gt;</span><br><span class="line">        Session username:$&#123;users[<span class="number">1</span>].name&#125;&lt;br/&gt;</span><br><span class="line">        Application username:$&#123;userMap.a.name&#125;&lt;br/&gt;</span><br><span class="line">        &lt;hr/&gt;</span><br><span class="line">        &lt;%--</span><br><span class="line">    $&#123;数据的名字&#125;如果省略域标志,取数据的顺序如下</span><br><span class="line">    pageContext</span><br><span class="line">    request</span><br><span class="line">    session</span><br><span class="line">    application</span><br><span class="line">    --%&gt;</span><br><span class="line">        $&#123;msg&#125;</span><br><span class="line">        &lt;hr/&gt;</span><br><span class="line">        &lt;%--</span><br><span class="line">    移除域中的数据</span><br><span class="line">    --%&gt;</span><br><span class="line">        &lt;%</span><br><span class="line">        <span class="comment">//pageContext.removeAttribute(&quot;msg&quot;);// pageContext.removeAttribute()方法会移除四个域中的所有的同名的数据</span></span><br><span class="line">        <span class="comment">//request.removeAttribute(&quot;msg&quot;);</span></span><br><span class="line">        %&gt;</span><br><span class="line">        pagecontextMsg:$&#123;pageScope.msg&#125;&lt;br/&gt;</span><br><span class="line">        requestMsg:$&#123;requestScope.msg&#125;&lt;br/&gt;</span><br><span class="line">        sessionMsg:$&#123;sessionScope.msg&#125;&lt;br/&gt;</span><br><span class="line">        applicationMsg:$&#123;applicationScope.msg&#125;&lt;br/&gt;</span><br><span class="line">        &lt;hr/&gt;</span><br><span class="line">        &lt;%--</span><br><span class="line">    EL表达式获取请求中的参数</span><br><span class="line">    --%&gt;</span><br><span class="line">        username:$&#123;param.username&#125;&lt;br/&gt;</span><br><span class="line">        hobby:$&#123;paramValues.hobby[<span class="number">0</span>]&#125;</span><br><span class="line">        hobby:$&#123;paramValues.hobby[<span class="number">1</span>]&#125;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="总结-2">总结</h4>
<ul>
<li>
<p>EL表达式定义在JSP页面上,在转译之后的java文件中,会被转化成java代码</p>
</li>
<li>
<p>EL表达式是一种后台技术,服务器上运行,不是在浏览器上运行,不能用于HTML页面</p>
</li>
<li>
<p>EL表达式底层是通过反射实现的,在获取对象属性值时是通过对象的get方法实现的</p>
</li>
</ul>
<h3 id="EL表达式运算符">EL表达式运算符</h3>
<h4 id="运算符">运算符</h4>
<p><strong>算数运算符</strong>: + - * / %</p>
<p><strong>比较运算符:</strong></p>
<p>==  eq equals</p>
<p>&gt;gt greater then</p>
<p>&lt;     lt   lower then</p>
<p>&gt;=  ge  greater then or equals</p>
<p>&lt;=  le   lower then or equals</p>
<p>!=   ne   not equals</p>
<p><strong>逻辑运算符</strong>: || or    &amp;&amp; and</p>
<p><strong>三目运算符</strong>: ${条件 ?表达式1 : 表达式2}</p>
<p><strong>判空运算符</strong>: empty</p>
<h4 id="使用">使用</h4>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.List&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.ArrayList&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">+两端如果有字符串,会尝试将字符串转换成数字之后进行加法运算</span><br><span class="line">/如果除以<span class="number">0</span> 结果为Infinity 而不是出现异常</span><br><span class="line">%如果和<span class="number">0</span>取余数,那么会出现异常</span><br><span class="line">--%&gt;</span><br><span class="line">    算数运算符：</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    $&#123;<span class="number">10</span> + <span class="number">10</span>&#125;&lt;br/&gt;</span><br><span class="line">    $&#123;<span class="string">&quot;10&quot;</span> + <span class="number">10</span>&#125;&lt;br/&gt;</span><br><span class="line">    $&#123;<span class="string">&quot;10&quot;</span> + <span class="string">&quot;10&quot;</span>&#125;&lt;br/&gt;</span><br><span class="line">    &lt;%--$&#123;<span class="string">&quot;10a&quot;</span> + <span class="number">10</span>&#125;&lt;br/&gt;--%&gt;</span><br><span class="line">    $&#123;<span class="number">10</span>/<span class="number">0</span>&#125;&lt;br/&gt;</span><br><span class="line">    &lt;%-- $&#123;<span class="number">10</span>%<span class="number">0</span>&#125;&lt;br/&gt;--%&gt;</span><br><span class="line">    关系运算符/比较运算符</span><br><span class="line">    &lt;%--</span><br><span class="line">    比较运算符推荐写成字母形式,不推荐使用 == &gt;=  &lt;=</span><br><span class="line">    --%&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    $&#123;<span class="number">10</span> == <span class="number">10</span>&#125;&lt;br/&gt;</span><br><span class="line">    $&#123;<span class="number">10</span> eq <span class="number">10</span>&#125;&lt;br/&gt;</span><br><span class="line">    $&#123;<span class="number">10</span> gt <span class="number">8</span>&#125;&lt;br/&gt;</span><br><span class="line">    逻辑运算符</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    $&#123; <span class="literal">true</span> || <span class="literal">false</span>&#125;&lt;br/&gt;</span><br><span class="line">    $&#123; <span class="literal">true</span> or <span class="literal">false</span>&#125;&lt;br/&gt;</span><br><span class="line">    $&#123; <span class="literal">true</span> &amp;&amp; <span class="literal">false</span>&#125;&lt;br/&gt;</span><br><span class="line">    $&#123; <span class="literal">true</span> and <span class="literal">false</span>&#125;&lt;br/&gt;</span><br><span class="line">    条件运算符/三目运算符</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    $&#123;(<span class="number">100</span>-<span class="number">1</span>)%<span class="number">3</span>==<span class="number">0</span>?<span class="number">10</span>+<span class="number">1</span>:<span class="number">10</span>-<span class="number">1</span>&#125;&lt;br/&gt;</span><br><span class="line">    判断空运算符</span><br><span class="line">    &lt;%--empty 为<span class="literal">null</span> 则为<span class="literal">true</span>--%&gt;</span><br><span class="line">    &lt;%  <span class="comment">//向域中放入数据</span></span><br><span class="line">        pageContext.setAttribute(<span class="string">&quot;a&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">        pageContext.setAttribute(<span class="string">&quot;b&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="type">int</span>[] arr =&#123;&#125;;</span><br><span class="line">        pageContext.setAttribute(<span class="string">&quot;arr&quot;</span>,arr);</span><br><span class="line">        <span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        pageContext.setAttribute(<span class="string">&quot;list&quot;</span>,list);</span><br><span class="line">    %&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    $&#123;empty a&#125;&lt;br/&gt;</span><br><span class="line">    $&#123;empty b&#125;&lt;br/&gt;&lt;%--字符串长度为<span class="number">0</span> 则认为是空--%&gt;</span><br><span class="line">    $&#123;empty arr&#125;&lt;br/&gt;&lt;%--数组长度为<span class="number">0</span> 认为不是空--%&gt;</span><br><span class="line">    $&#123;empty list&#125;&lt;br/&gt;&lt;%--集合长度为<span class="number">0</span> 认为是空--%&gt;</span><br><span class="line">    $&#123;list.size() eq <span class="number">0</span>&#125;&lt;br/&gt;&lt;%--集合长度为<span class="number">0</span> 认为是空--%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="案例一优化：使用EL表达式优化查询员工信息的页面处理">案例一优化：使用EL表达式优化查询员工信息的页面处理</h2>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.List&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;com.msb.pojo.Emp&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">        &lt;style&gt;</span><br><span class="line">            table&#123;</span><br><span class="line">                border: 3px solid blue;</span><br><span class="line">                width: <span class="number">80</span>%;</span><br><span class="line">                margin: 0px auto;</span><br><span class="line">            &#125;</span><br><span class="line">            td,th&#123;</span><br><span class="line">                border: 2px solid green;</span><br><span class="line">            &#125;</span><br><span class="line">        &lt;/style&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;table cellspacing=<span class="string">&quot;0px&quot;</span> cellpadding=<span class="string">&quot;0px&quot;</span>&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;编号&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;姓名&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;上级编号&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;职务&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;入职日期&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;薪资&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;补助&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;部门号&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;薪资等级&lt;/th&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;%</span><br><span class="line">            List&lt;Emp&gt; emps = (List&lt;Emp&gt;) request.getAttribute(<span class="string">&quot;emps&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (Emp emp : emps) &#123;</span><br><span class="line">                pageContext.setAttribute(<span class="string">&quot;emp&quot;</span>, emp);<span class="comment">//将员工对象放入PageContext 域</span></span><br><span class="line">                %&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;$&#123;emp.empno&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;$&#123;emp.ename&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;$&#123;emp.mgr&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;$&#123;emp.job&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;$&#123;emp.hiredate&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;$&#123;emp.sal&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;$&#123;emp.comm&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;$&#123;emp.deptno&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    $&#123;emp.sal le <span class="number">500</span>?<span class="string">&quot;A&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">                    $&#123;emp.sal gt <span class="number">500</span> and emp.sal le <span class="number">1000</span>?<span class="string">&quot;B&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">                    $&#123;emp.sal gt <span class="number">1000</span> and emp.sal le <span class="number">1500</span>?<span class="string">&quot;C&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">                    $&#123;emp.sal gt <span class="number">1500</span> and emp.sal le <span class="number">2000</span>?<span class="string">&quot;D&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">                    $&#123;emp.sal gt <span class="number">2000</span> and emp.sal le <span class="number">3000</span>?<span class="string">&quot;E&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">                    $&#123;emp.sal gt <span class="number">3000</span> and emp.sal le <span class="number">4000</span>?<span class="string">&quot;F&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">                    $&#123;emp.sal gt <span class="number">4000</span>?<span class="string">&quot;G&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;%</span><br><span class="line">            &#125;</span><br><span class="line">            %&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="JSTL">JSTL</h2>
<p>JSTL（Java server pages standarded tag library，即JSP标准标签库）是由JCP（Java community Proces）所制定的标准规范，它主要提供给Java Web开发人员一个标准通用的标签库，并由Apache的Jakarta小组来维护。</p>
<p><strong>使用前提</strong></p>
<ol>
<li>
<p>需要导包</p>
</li>
<li>
<p>页面中通过taglib指令引入标签库</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@   taglib uri=<span class="string">&quot;标签库的定位&quot;</span> prefix=<span class="string">&quot;前缀(简称)&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>uri可以在对应的tld文件中找到</p>
</li>
</ol>
<h3 id="核心标签库">核心标签库</h3>
<p>导入语句为</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span>%&gt;</span><br></pre></td></tr></table></figure>
<h4 id="操作对象的标签c-set-out-remove">操作对象的标签c:set/out/remove</h4>
<ul>
<li>==&lt;c:set&gt;==         向域对象中放入数据  setAttribute</li>
<li>==&lt;c:out&gt;==        从域对象中取出数据  getAttribute</li>
<li>==&lt;c:remove&gt;== 从域对象中移除数据   removeAttribute</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">    c:set</span><br><span class="line">        scope 指定放数据的域 可选值 page request session application</span><br><span class="line">        <span class="keyword">var</span>   数据的名称</span><br><span class="line">        value 数据</span><br><span class="line">    --%&gt;</span><br><span class="line">    &lt;c:set scope=<span class="string">&quot;page&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;msg&quot;</span> value=<span class="string">&quot;pageMessage&quot;</span>&gt;&lt;/c:set&gt;</span><br><span class="line">    &lt;c:set scope=<span class="string">&quot;request&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;msg&quot;</span> value=<span class="string">&quot;requestMessage&quot;</span>&gt;&lt;/c:set&gt;</span><br><span class="line">    &lt;c:set scope=<span class="string">&quot;session&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;msg&quot;</span> value=<span class="string">&quot;sessionMessage&quot;</span>&gt;&lt;/c:set&gt;</span><br><span class="line">    &lt;c:set scope=<span class="string">&quot;application&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;msg&quot;</span> value=<span class="string">&quot;applicationMessage&quot;</span>&gt;&lt;/c:set&gt;</span><br><span class="line">    &lt;%--移除指定域中的值--%&gt;</span><br><span class="line">   &lt;%-- &lt;c:remove <span class="keyword">var</span>=<span class="string">&quot;msg&quot;</span> scope=<span class="string">&quot;page&quot;</span>&gt;&lt;/c:remove&gt;</span><br><span class="line">    &lt;c:remove <span class="keyword">var</span>=<span class="string">&quot;msg&quot;</span> scope=<span class="string">&quot;request&quot;</span>&gt;&lt;/c:remove&gt;--%&gt;</span><br><span class="line">    &lt;c:remove <span class="keyword">var</span>=<span class="string">&quot;msg&quot;</span> scope=<span class="string">&quot;session&quot;</span>&gt;&lt;/c:remove&gt;</span><br><span class="line">    &lt;c:remove <span class="keyword">var</span>=<span class="string">&quot;msg&quot;</span> scope=<span class="string">&quot;application&quot;</span>&gt;&lt;/c:remove&gt;</span><br><span class="line">    &lt;%--通过EL表达式取出域中的值--%&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    $&#123;pageScope.msg&#125;&lt;br/&gt;</span><br><span class="line">    $&#123;requestScope.msg&#125;&lt;br/&gt;</span><br><span class="line">    $&#123;sessionScope.msg&#125;&lt;br/&gt;</span><br><span class="line">    $&#123;applicationScope.msg &#125;&lt;br/&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;%--通过c:out标签获取域中的值--%&gt;</span><br><span class="line">    &lt;c:out value=<span class="string">&quot;$&#123;pageScope.msg&#125;&quot;</span> <span class="keyword">default</span>=<span class="string">&quot;page msg not found&quot;</span>/&gt;</span><br><span class="line">    &lt;c:out value=<span class="string">&quot;$&#123;requestScope.msg&#125;&quot;</span> <span class="keyword">default</span>=<span class="string">&quot;request msg not found&quot;</span>/&gt;</span><br><span class="line">    &lt;c:out value=<span class="string">&quot;$&#123;sessionScope.msg&#125;&quot;</span> <span class="keyword">default</span>=<span class="string">&quot;session msg not found&quot;</span>/&gt;</span><br><span class="line">    &lt;c:out value=<span class="string">&quot;$&#123;applicationScope.msg&#125;&quot;</span> <span class="keyword">default</span>=<span class="string">&quot;application msg not found&quot;</span>/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="多条件分支标签c-if和c-choose">多条件分支标签c:if和c:choose</h4>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">    随机生成一个分数  <span class="number">0</span>-<span class="number">100</span></span><br><span class="line">    &gt;=<span class="number">90</span> A</span><br><span class="line">    &gt;=<span class="number">80</span> B</span><br><span class="line">    &gt;=<span class="number">70</span> C</span><br><span class="line">    &gt;=<span class="number">60</span> D</span><br><span class="line">    &lt;<span class="number">60</span>  E</span><br><span class="line">    --%&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        <span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">101</span>);</span><br><span class="line">        pageContext.setAttribute(<span class="string">&quot;score&quot;</span>, score);</span><br><span class="line">    %&gt;</span><br><span class="line">    &lt;%--</span><br><span class="line">    test  判断条件</span><br><span class="line">    c:<span class="keyword">if</span>可以将test的结果放入指定的域中</span><br><span class="line">    scope 指定存放的域</span><br><span class="line">    <span class="keyword">var</span>   数据名</span><br><span class="line">    --%&gt;</span><br><span class="line">    分数:$&#123;score&#125;&lt;br/&gt; 等级:</span><br><span class="line">    &lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;score ge 90&#125;&quot;</span> scope=<span class="string">&quot;page&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;f1&quot;</span>&gt;A&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">    &lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;score ge 80 and score lt 90&#125;&quot;</span> scope=<span class="string">&quot;page&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;f2&quot;</span>&gt;B&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">    &lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;score ge 70 and score lt 80&#125;&quot;</span> scope=<span class="string">&quot;page&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;f3&quot;</span>&gt;C&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">    &lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;score ge 60 and score lt 70&#125;&quot;</span> scope=<span class="string">&quot;page&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;f4&quot;</span>&gt;D&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">    &lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;score lt 60&#125;&quot;</span> scope=<span class="string">&quot;page&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;f5&quot;</span>&gt;E&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    $&#123;f1&#125;</span><br><span class="line">    $&#123;f2&#125;</span><br><span class="line">    $&#123;f3&#125;</span><br><span class="line">    $&#123;f4&#125;</span><br><span class="line">    $&#123;f5&#125;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;%--输出分数是否及格--%&gt;</span><br><span class="line">    &lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;score ge 60&#125;&quot;</span> scope=<span class="string">&quot;page&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;flag&quot;</span>&gt;及格&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">    &lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;!pageScope.flag&#125;&quot;</span>&gt;不及格&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;c:choose&gt;</span><br><span class="line">        &lt;c:<span class="keyword">when</span> test=<span class="string">&quot;$&#123;score ge 90&#125;&quot;</span>&gt;A&lt;/c:<span class="keyword">when</span>&gt;</span><br><span class="line">        &lt;c:<span class="keyword">when</span> test=<span class="string">&quot;$&#123;score ge 80&#125;&quot;</span>&gt;B&lt;/c:<span class="keyword">when</span>&gt;</span><br><span class="line">        &lt;c:<span class="keyword">when</span> test=<span class="string">&quot;$&#123;score ge 70&#125;&quot;</span>&gt;C&lt;/c:<span class="keyword">when</span>&gt;</span><br><span class="line">        &lt;c:<span class="keyword">when</span> test=<span class="string">&quot;$&#123;score ge 60&#125;&quot;</span>&gt;D&lt;/c:<span class="keyword">when</span>&gt;</span><br><span class="line">        &lt;c:otherwise&gt;E&lt;/c:otherwise&gt;</span><br><span class="line">    &lt;/c:choose&gt;</span><br></pre></td></tr></table></figure>
<h4 id="迭代标签c-foreach">迭代标签c:foreach</h4>
<h5 id="打印乘法表">打印乘法表</h5>
<p>c:forEach中的<strong>属性</strong></p>
<ul>
<li>==var==: 迭代变量, 存放在pageContext作用域</li>
<li>==begin==: 迭代起始值</li>
<li>==end==: 迭代结束值</li>
<li>==step==: 迭代变量变化的步长</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">    <span class="keyword">for</span> ( <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">1</span>;i&lt;=<span class="number">9</span> ;i+=<span class="number">2</span>)&#123;</span><br><span class="line">        pageContext.setAttribute(<span class="string">&quot;i&quot;</span>,i)</span><br><span class="line">    &#125;</span><br><span class="line">c:foreach 每次执时都会向page域中放入一个名为 i 值为当前值这样的一个操作</span><br><span class="line">    --%&gt;</span><br><span class="line">&lt;c:forEach <span class="keyword">var</span>=<span class="string">&quot;i&quot;</span> begin=<span class="string">&quot;1&quot;</span> end=<span class="string">&quot;9&quot;</span> step=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">    &lt;c:forEach <span class="keyword">var</span>=<span class="string">&quot;j&quot;</span> begin=<span class="string">&quot;1&quot;</span> end=<span class="string">&quot;$&#123;i&#125;&quot;</span> step=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">        $&#123;j&#125; * $&#123;i&#125; = $&#123;i*j&#125; &amp;nbsp;</span><br><span class="line">    &lt;/c:forEach&gt;</span><br><span class="line">    &lt;br/&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>
<h5 id="遍历对象数组">遍历对象数组</h5>
<ul>
<li>==items==: 要遍历的集合, 需要使用EL表达式取值</li>
<li>==varStatus==: 迭代变量的状态</li>
<li>==index:== 索引, 从0开始</li>
<li>==count:== 计数, 从1开始</li>
<li>==first==: boolean, 表示是否是第一个</li>
<li>==last==: boolean, 表示是否是最后一个</li>
<li>==current==: 对象, 当前迭代的对象值</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--&lt;%<span class="comment">//原来的遍历</span></span><br><span class="line">       List&lt;Emp&gt; emps = (List&lt;Emp&gt;) request.getAttribute(<span class="string">&quot;emps&quot;</span>);</span><br><span class="line">       <span class="keyword">for</span> (Emp emp : emps) &#123;</span><br><span class="line">           pageContext.setAttribute(<span class="string">&quot;emp&quot;</span>, emp);<span class="comment">//将员工对象放入PageContext 域</span></span><br><span class="line">       %&gt;</span><br><span class="line">       c:foreach</span><br><span class="line">       --%&gt;</span><br><span class="line">       &lt;c:forEach items=<span class="string">&quot;$&#123;emps&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;emp&quot;</span> varStatus=<span class="string">&quot;empStatus&quot;</span>&gt;</span><br></pre></td></tr></table></figure>
<h3 id="格式化标签库fmt">格式化标签库fmt</h3>
<h4 id="导入标签">导入标签</h4>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;fmt&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span>%&gt;</span><br></pre></td></tr></table></figure>
<h4 id="fmt-formatDate-日期格式标签">&lt;fmt:formatDate&gt;日期格式标签</h4>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;td&gt;</span><br><span class="line">    &lt;fmt:formatDate value=<span class="string">&quot;$&#123;emp.hiredate&#125;&quot;</span> pattern=<span class="string">&quot;yyyy年MM月dd日 HH:mm:ss&quot;</span>/&gt;</span><br><span class="line">&lt;/td&gt;</span><br></pre></td></tr></table></figure>
<h4 id="数字格式化标签">数字格式化标签</h4>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;td&gt;</span><br><span class="line">    &lt;%--</span><br><span class="line">    <span class="number">0</span> 代表必须有一位数字,如果对应的位置没有值怎么办?自动补充<span class="number">0</span></span><br><span class="line">    # 代表有一位数字,开头和结尾的所有的<span class="number">0</span>不保留</span><br><span class="line">    --%&gt;</span><br><span class="line">    &amp;yen;&lt;fmt:formatNumber value=<span class="string">&quot;$&#123;emp.sal&#125;&quot;</span> pattern=<span class="string">&quot;###,##0.00&quot;</span>/&gt;</span><br><span class="line">&lt;/td&gt;</span><br></pre></td></tr></table></figure>
<h2 id="showEmp-js页面最终优化">showEmp.js页面最终优化</h2>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;%<span class="meta">@taglib</span> prefix=<span class="string">&quot;fmt&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">        &lt;style&gt;</span><br><span class="line">            table&#123;</span><br><span class="line">                border: 3px solid blue;</span><br><span class="line">                width: <span class="number">80</span>%;</span><br><span class="line">                margin: 0px auto;</span><br><span class="line">            &#125;</span><br><span class="line">            td,th&#123;</span><br><span class="line">                border: 2px solid green;</span><br><span class="line">            &#125;</span><br><span class="line">        &lt;/style&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;table cellspacing=<span class="string">&quot;0px&quot;</span> cellpadding=<span class="string">&quot;0px&quot;</span>&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;序号&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;索引&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;isFirst&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;isLast&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;编号&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;姓名&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;姓名&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;上级编号&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;职务&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;入职日期&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;薪资&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;补助&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;部门号&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;薪资等级&lt;/th&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;%-- &lt;%</span><br><span class="line">    List&lt;Emp&gt; emps = (List&lt;Emp&gt;) request.getAttribute(<span class="string">&quot;emps&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (Emp emp : emps) &#123;</span><br><span class="line">                pageContext.setAttribute(<span class="string">&quot;emp&quot;</span>,emp);<span class="comment">//将员工对象放入PageContext域</span></span><br><span class="line">                %&gt;</span><br><span class="line">            c:foreach</span><br><span class="line">            items 要遍历的数组/List  可以通过EL表达式取出集合之后给改属性赋值</span><br><span class="line">            <span class="keyword">var</span>   中间变量的名称</span><br><span class="line">            varStatus 记录每一个对象状态的设置</span><br><span class="line">            count 个数</span><br><span class="line">            index 索引</span><br><span class="line">            first 如果当前元素是迭代的第一个元素 <span class="literal">true</span> 否则为<span class="literal">false</span></span><br><span class="line">            last  如果当前元素是迭代的最后一个元素 <span class="literal">true</span> 否则为<span class="literal">false</span></span><br><span class="line">            current 当前迭代的元素本身</span><br><span class="line">            --%&gt;</span><br><span class="line">            &lt;c:forEach items=<span class="string">&quot;$&#123;emps&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;emp&quot;</span> varStatus=<span class="string">&quot;empStatus&quot;</span>&gt;</span><br><span class="line">                &lt;tr&gt;</span><br><span class="line">                    &lt;%--使用EL表达式来取出域对象里的对象属性值--%&gt;</span><br><span class="line">                    &lt;%-- &lt;td&gt;&lt;%=emp.getEmpno()%&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;%=emp.getEname()%&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;%=emp.getMgr()%&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;%=emp.getJob()%&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;%=emp.getHiredate()%&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;%=emp.getSal()%&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;%=emp.getComm()%&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;%=emp.getDeptno()%&gt;&lt;/td&gt;--%&gt;</span><br><span class="line">            &lt;td&gt;$&#123;empStatus.count&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;empStatus.index&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;empStatus.first&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;empStatus.last&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;emp.empno&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;emp.ename&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;empStatus.current.ename&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;emp.mgr&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;emp.job&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;fmt:formatDate value=<span class="string">&quot;$&#123;emp.hiredate&#125;&quot;</span> pattern=<span class="string">&quot;yyyy年MM月dd日 HH:mm:ss&quot;</span>/&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;%--</span><br><span class="line">    <span class="number">0</span> 代表必须有一位数字,如果对应的位置没有值怎么办?自动补充<span class="number">0</span></span><br><span class="line">    # 代表有一位数字,开头和结尾的所有的<span class="number">0</span>不保留</span><br><span class="line">    --%&gt;</span><br><span class="line"></span><br><span class="line">                &amp;yen;&lt;fmt:formatNumber value=<span class="string">&quot;$&#123;emp.sal&#125;&quot;</span> pattern=<span class="string">&quot;###,##0.00&quot;</span>/&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;emp.comm&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;emp.deptno&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;%--out.print(<span class="string">&quot;&lt;td&gt;&quot;</span>)--%&gt;</span><br><span class="line">                &lt;%--&lt;%</span><br><span class="line">    	<span class="type">Double</span> <span class="variable">sal</span> <span class="operator">=</span> emp.getSal();</span><br><span class="line">                <span class="keyword">if</span>(sal&lt;=<span class="number">500</span>)&#123;</span><br><span class="line">                    out.print(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>( sal &lt;=<span class="number">1000</span>)&#123;</span><br><span class="line">                    out.print(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>( sal &lt;=<span class="number">1500</span>)&#123;</span><br><span class="line">                    out.print(<span class="string">&quot;C&quot;</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>( sal &lt;=<span class="number">2000</span>)&#123;</span><br><span class="line">                    out.print(<span class="string">&quot;D&quot;</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>( sal &lt;=<span class="number">3000</span>)&#123;</span><br><span class="line">                    out.print(<span class="string">&quot;E&quot;</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>( sal &lt;=<span class="number">4000</span>)&#123;</span><br><span class="line">                    out.print(<span class="string">&quot;F&quot;</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    out.print(<span class="string">&quot;G&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                %&gt;--%&gt;</span><br><span class="line">                &lt;%--使用EL算数表达式来判断等级</span><br><span class="line">    $&#123;emp.sal le <span class="number">500</span>?<span class="string">&quot;A&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">                $&#123;emp.sal gt <span class="number">500</span> and emp.sal le <span class="number">1000</span>?<span class="string">&quot;B&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">                $&#123;emp.sal gt <span class="number">1000</span> and emp.sal le <span class="number">1500</span>?<span class="string">&quot;C&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">                $&#123;emp.sal gt <span class="number">1500</span> and emp.sal le <span class="number">2000</span>?<span class="string">&quot;D&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">                $&#123;emp.sal gt <span class="number">2000</span> and emp.sal le <span class="number">3000</span>?<span class="string">&quot;E&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">                $&#123;emp.sal gt <span class="number">3000</span> and emp.sal le <span class="number">4000</span>?<span class="string">&quot;F&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line">                $&#123;emp.sal gt <span class="number">4000</span>?<span class="string">&quot;G&quot;</span>:<span class="string">&quot;&quot;</span>&#125;--%&gt;</span><br><span class="line"></span><br><span class="line">                &lt;%--使用JSTL标签--%&gt;</span><br><span class="line">                &lt;c:choose&gt;</span><br><span class="line">                    &lt;c:<span class="keyword">when</span> test=<span class="string">&quot;$&#123;emp.sal le 500&#125;&quot;</span>&gt;A&lt;/c:<span class="keyword">when</span>&gt;</span><br><span class="line">                    &lt;c:<span class="keyword">when</span> test=<span class="string">&quot;$&#123;emp.sal le 1000&#125;&quot;</span>&gt;B&lt;/c:<span class="keyword">when</span>&gt;</span><br><span class="line">                    &lt;c:<span class="keyword">when</span> test=<span class="string">&quot;$&#123;emp.sal le 1500&#125;&quot;</span>&gt;C&lt;/c:<span class="keyword">when</span>&gt;</span><br><span class="line">                    &lt;c:<span class="keyword">when</span> test=<span class="string">&quot;$&#123;emp.sal le 2000&#125;&quot;</span>&gt;D&lt;/c:<span class="keyword">when</span>&gt;</span><br><span class="line">                    &lt;c:<span class="keyword">when</span> test=<span class="string">&quot;$&#123;emp.sal le 3000&#125;&quot;</span>&gt;E&lt;/c:<span class="keyword">when</span>&gt;</span><br><span class="line">                    &lt;c:<span class="keyword">when</span> test=<span class="string">&quot;$&#123;emp.sal le 4000&#125;&quot;</span>&gt;F&lt;/c:<span class="keyword">when</span>&gt;</span><br><span class="line">                    &lt;c:<span class="keyword">when</span> test=<span class="string">&quot;$&#123;emp.sal gt 4000&#125;&quot;</span>&gt;G&lt;/c:<span class="keyword">when</span>&gt;</span><br><span class="line">                &lt;/c:choose&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/c:forEach&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1>Filter</h1>
<h2 id="案例：通过过滤验证登录">案例：通过过滤验证登录</h2>
<p>需求：通过过滤器控制，只有登陆之后可以反复进入welcome.jsp欢迎页，如果没有登录，提示用户进入登录页进行登陆操作。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210808090141-20220507093631591.png" alt="image-20210808090117141" style="zoom:50%;" />
<h6 id="login-jsp">login.jsp</h6>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;$Title%sSourceCode%lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;img src=<span class="string">&quot;static/img/logo.png&quot;</span>&gt;</span><br><span class="line">  please login ... ... &lt;br/&gt;</span><br><span class="line">  &lt;form action=<span class="string">&quot;loginController.do&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    用户名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;user&quot;</span>&gt; &lt;br/&gt;</span><br><span class="line">    密码:&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;pwd&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h6 id="welcome-jsp">welcome.jsp</h6>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;img src=<span class="string">&quot;static/img/logo.png&quot;</span>&gt;</span><br><span class="line">欢迎$&#123;user.username&#125;登陆!!!</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h6 id="aaa-jsp">aaa.jsp</h6>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"><span class="built_in">this</span> is page aaa</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>准备Controller代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/loginController.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 获取用户名和密码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        System.out.println(username);</span><br><span class="line">        System.out.println(password);</span><br><span class="line">        <span class="comment">// 链接数据库校验登录</span></span><br><span class="line">        <span class="comment">// 登录成功,将用户信息放入Session域</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">User</span>(username,password);</span><br><span class="line">        req.getSession().setAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">        <span class="comment">// 跳转到欢迎页</span></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;welcome.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>准备登录控制过滤器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter(urlPatterns = &quot;/*&quot;)</span><span class="comment">// 任何资源都要进行过滤,</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Filter1_LoginFilter</span>  <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        HttpServletRequest req=(HttpServletRequest)servletRequest;</span><br><span class="line">        HttpServletResponse resp=(HttpServletResponse) servletResponse;</span><br><span class="line">        <span class="comment">//无论是否登录过,都要放行的资源   登录页  登录校验Controller 和一些静态资源</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">requestURI</span> <span class="operator">=</span> req.getRequestURI();</span><br><span class="line">        System.out.println(requestURI);</span><br><span class="line">        <span class="keyword">if</span>(requestURI.contains(<span class="string">&quot;login.jsp&quot;</span>)|| requestURI.contains(<span class="string">&quot;loginController.do&quot;</span>)|| requestURI.contains(<span class="string">&quot;/static/&quot;</span>))&#123;</span><br><span class="line">            <span class="comment">// 直接放行</span></span><br><span class="line">            filterChain.doFilter(req,resp);</span><br><span class="line">            <span class="comment">// 后续代码不再执行</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 需要登录之后才能访问的资源,如果没登录,重定向到login.jsp上,提示用户进行登录</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">user</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">null</span> != user)&#123;<span class="comment">// 如果登录过 放行</span></span><br><span class="line">            filterChain.doFilter(req,resp);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;<span class="comment">// 没有登录过,跳转至登录页</span></span><br><span class="line">            resp.sendRedirect(<span class="string">&quot;login.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1>Listener</h1>
<h2 id="案例：记录请求日志">案例：记录请求日志</h2>
<h6 id="RequestLoginListener-java">RequestLoginListener.java</h6>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestLogListener</span> <span class="keyword">implements</span> <span class="title class_">ServletRequestListener</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> SimpleDateFormat simpleDateFormat=<span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">requestDestroyed</span><span class="params">(ServletRequestEvent sre)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">requestInitialized</span><span class="params">(ServletRequestEvent sre)</span> &#123;</span><br><span class="line">        <span class="comment">// 获得请求发出的IP</span></span><br><span class="line">        <span class="comment">// 获得请求的URL</span></span><br><span class="line">        <span class="comment">// 获得请求产生的时间</span></span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest)sre.getServletRequest();</span><br><span class="line">        <span class="type">String</span> <span class="variable">remoteHost</span> <span class="operator">=</span> request.getRemoteHost();</span><br><span class="line">        <span class="type">String</span> <span class="variable">requestURL</span> <span class="operator">=</span> request.getRequestURL().toString();</span><br><span class="line">        <span class="type">String</span> <span class="variable">reqquestDate</span> <span class="operator">=</span> simpleDateFormat.format(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        <span class="comment">// 准备输出流</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:/msb.txt&quot;</span>),<span class="literal">true</span>));</span><br><span class="line">            pw.println(remoteHost+<span class="string">&quot; &quot;</span>+requestURL+<span class="string">&quot; &quot;</span>+reqquestDate );</span><br><span class="line">            pw.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="案例：显示在线人数">案例：显示在线人数</h2>
<p><strong>需求</strong>：开启一次会话session 在线人数加一 销毁会话以后在线人数减一</p>
<p>使用count来计数，然后<strong>存在application域中</strong></p>
<h6 id="OnlineNumberListener">OnlineNumberListener:</h6>
<p>获取application域对象，存入数据count，如果一次session开启，++count；一次session关闭，–count</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OnlineNumberListener</span> <span class="keyword">implements</span> <span class="title class_">HttpSessionListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionCreated</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">        <span class="comment">//向application域中增加一个数字</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> se.getSession();</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">count</span> <span class="operator">=</span> application.getAttribute(<span class="string">&quot;count&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == count) &#123;</span><br><span class="line">            <span class="comment">//第一次放入数据</span></span><br><span class="line">            application.setAttribute(<span class="string">&quot;count&quot;</span>,<span class="number">1</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> (<span class="type">int</span>) count;</span><br><span class="line">            application.setAttribute(<span class="string">&quot;count&quot;</span>, ++c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionDestroyed</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">        <span class="comment">//向application域中减少一个数字</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> se.getSession();</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">count</span> <span class="operator">=</span> application.getAttribute(<span class="string">&quot;count&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">count1</span> <span class="operator">=</span> (<span class="type">int</span>) count;</span><br><span class="line">        application.setAttribute(<span class="string">&quot;count&quot;</span>,--count1);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="案例：重启免登录">案例：重启免登录</h2>
<h3 id="Session序列化和反序列化">Session序列化和反序列化</h3>
<p>1、序列化与反序列</p>
<p>把对象转化为字节序列的过程称为序列化（保存到硬盘，持久化）</p>
<p>把字节序列转化为对象的过程称为反序列化（存放于内存）</p>
<p>2、序列化的用途</p>
<p>把对象的字节序列永久保存到硬盘上，通常放到一个文件中。</p>
<p>把网络传输的对象通过字节序列化，方便传输本节作业</p>
<p>3、实现步骤</p>
<p>想实现序列化和反序列化需要手动配置</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210808154352-20220507093631697.png" alt="image-20210808154350410"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Context</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Manager</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.session.PersistentManager&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Store</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.session.FileStore&quot;</span> <span class="attr">directory</span>=<span class="string">&quot;d:/session&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Manager</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">Context</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>==注意实体类必须实现serializable 接口==</p>
<h3 id="开发过程">开发过程</h3>
<h4 id="1-准备实体类">1 准备实体类</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span>  <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-开发登录信息输入页面">2 开发登录信息输入页面</h4>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;loginController.do&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">  用户名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;user&quot;</span>&gt; &lt;br/&gt;</span><br><span class="line">  密码:&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;pwd&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">  &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<h4 id="3开发登录信息验证Servlet">3开发登录信息验证Servlet</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/loginController.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">    <span class="comment">// user</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">User</span>(username,pwd);</span><br><span class="line">    <span class="comment">// session</span></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">    session.setAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-开发校验当前是否已经登录的Controller">4 开发校验当前是否已经登录的Controller</h4>
<p>loginCheckController.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/loginCheckController.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginCheckController</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">// 判断是否登录</span></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">    <span class="type">Object</span> <span class="variable">user</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">    <span class="type">Object</span> <span class="variable">listener</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;listener&quot;</span>);<span class="comment">// 获得对应的监听器</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span><span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="literal">null</span> != user)&#123;</span><br><span class="line">        message=<span class="string">&quot;您已经登录过&quot;</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        message=<span class="string">&quot;您还未登录&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    resp.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">    resp.getWriter().println(message);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="5-测试">5  测试</h4>
<p>先登录,<a target="_blank" rel="noopener" href="http://xn--loginCheckController-9x08aw463ah2xark6l.do">然后请求loginCheckController.do</a> 校验是否登录过,然后重启项目,<a target="_blank" rel="noopener" href="http://xn--loginCheckController-oy96at320b9nugksh.do">再起请求loginCheckController.do</a> 校验是否登录过,发现重启后,仍然是登录过的</p>
<h4 id="6-监听钝化和活化">6 监听钝化和活化</h4>
<p><strong>MySessionActivationListener.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySessionActivationListener</span> <span class="keyword">implements</span> <span class="title class_">HttpSessionActivationListener</span>, Serializable &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionWillPassivate</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">    System.out.println(se.getSession().hashCode()+<span class="string">&quot;即将钝化&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionDidActivate</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">    System.out.println(se.getSession().hashCode()+<span class="string">&quot;已经活化&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>LoginController登录时绑定监听器</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@WebServlet(&quot;/loginController.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        <span class="comment">// user</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">User</span>(username,pwd);</span><br><span class="line">        <span class="comment">// session</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">        <span class="comment">// 绑定监听器</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;listener&quot;</span>, <span class="keyword">new</span> <span class="title class_">MySessionActivationListener</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>重启项目 重复测试即可</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210808161851-20220507093632140.png" alt="image-20210808161834961"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="JavaEE/20210808161855-20220507093631903.png" alt="image-20210808161823274"></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Sonia33</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://soniachen.com/2021/07/20/JavaEE/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://soniachen.com/2021/07/20/JavaEE/')">JavaEE</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://soniachen.com/2021/07/20/JavaEE/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=JavaEE&amp;url=https://soniachen.com/2021/07/20/JavaEE/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://soniachen.com" target="_blank">Sonia33's Blog</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Java/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Java<span class="tagsPageCount">3</span></a><a class="post-meta__box__tags" href="/tags/web/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>web<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/06/18/JQuery/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JQuery</div></div></a></div><div class="next-post pull-right"><a href="/2021/07/21/Linux%E5%AD%A6%E4%B9%A0/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux学习</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2021/06/07/JDBC/" title="JDBC"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-06-07</div><div class="title">JDBC</div></div></a></div><div><a href="/2022/02/23/%E7%AE%97%E6%B3%95%E9%AB%98%E9%A2%91%E9%A2%98%E6%80%BB%E7%BB%93/" title="算法高频题总结"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-02-23</div><div class="title">算法高频题总结</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">引入</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">Tomcat</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.1.</span> <span class="toc-text">HTTP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">2.1.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">2.1.2.</span> <span class="toc-text">特点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%BC%95%E5%85%A5"><span class="toc-number">3.1.</span> <span class="toc-text">1.   引入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.1.1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9-2"><span class="toc-number">3.1.2.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-number">3.1.3.</span> <span class="toc-text">应用程序中的位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%92%8C%E5%8A%A8%E6%80%81%E8%B5%84%E6%BA%90%E7%9A%84%E5%8C%BA%E5%88%86"><span class="toc-number">3.1.4.</span> <span class="toc-text">静态资源和动态资源的区分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet%E5%9C%A8%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E5%9C%B0%E4%BD%8D"><span class="toc-number">3.1.5.</span> <span class="toc-text">Servlet在程序中的地位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#servlet%E4%B8%89%E5%A4%A7%E5%9F%9F%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.1.6.</span> <span class="toc-text">&#x3D;&#x3D;servlet三大域对象&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86"><span class="toc-number">3.2.</span> <span class="toc-text">案例1：初步认识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B2%EF%BC%9A%E7%99%BB%E5%BD%95%E9%A1%B5"><span class="toc-number">3.3.</span> <span class="toc-text">案例2：登录页</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%EF%BC%9A"><span class="toc-number">3.3.1.</span> <span class="toc-text">需求：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-number">3.3.2.</span> <span class="toc-text">具体步骤：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-HttpServletRequest"><span class="toc-number">3.4.</span> <span class="toc-text">2. HttpServletRequest</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E8%A1%8C"><span class="toc-number">3.4.1.</span> <span class="toc-text">请求行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number">3.4.2.</span> <span class="toc-text">请求头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E4%BD%93"><span class="toc-number">3.4.3.</span> <span class="toc-text">请求体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http%E6%94%AF%E6%8C%81%E7%9A%84%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F"><span class="toc-number">3.4.4.</span> <span class="toc-text">http支持的请求方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#get%E5%92%8Cpost%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.4.4.1.</span> <span class="toc-text">&#x3D;&#x3D;get和post的区别&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E6%93%8D%E4%BD%9C%EF%BC%9A%E8%8E%B7%E5%BE%97%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%B7%E6%B1%82%E4%BF%A1%E6%81%AF"><span class="toc-number">3.4.5.</span> <span class="toc-text">具体操作：获得客户端请求信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E8%A1%8C%E4%BF%A1%E6%81%AF"><span class="toc-number">3.4.5.1.</span> <span class="toc-text">1.获取请求行信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%BF%A1%E6%81%AF"><span class="toc-number">3.4.5.2.</span> <span class="toc-text">2.获取请求头信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE"><span class="toc-number">3.4.5.3.</span> <span class="toc-text">3.获取请求数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B3-HTTP%E8%AF%B7%E6%B1%82"><span class="toc-number">3.5.</span> <span class="toc-text">案例3:HTTP请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81"><span class="toc-number">3.5.1.</span> <span class="toc-text">前端代码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91form%E8%A1%A8%E5%8D%95%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.5.1.1.</span> <span class="toc-text">开发form表单注意事项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet%E4%BB%A3%E7%A0%81"><span class="toc-number">3.5.2.</span> <span class="toc-text">Servlet代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-HttpServletResponse"><span class="toc-number">3.6.</span> <span class="toc-text">3. HttpServletResponse</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E8%A1%8C"><span class="toc-number">3.6.1.</span> <span class="toc-text">响应行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%A4%B4"><span class="toc-number">3.6.2.</span> <span class="toc-text">响应头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%AE%9E%E4%BD%93"><span class="toc-number">3.6.3.</span> <span class="toc-text">响应实体</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ContentType-%E5%93%8D%E5%BA%94%E8%AE%BE%E7%BD%AE"><span class="toc-number">3.6.3.1.</span> <span class="toc-text">ContentType:响应设置</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#MIME"><span class="toc-number">3.6.3.1.0.1.</span> <span class="toc-text">MIME</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="toc-number">3.6.4.</span> <span class="toc-text">测试代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-number">3.7.</span> <span class="toc-text">乱码问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B9%B1%E7%A0%81"><span class="toc-number">3.7.1.</span> <span class="toc-text">1 控制台乱码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-post%E8%AF%B7%E6%B1%82%E4%B9%B1%E7%A0%81"><span class="toc-number">3.7.2.</span> <span class="toc-text">2 post请求乱码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-get%E8%AF%B7%E6%B1%82%E4%B9%B1%E7%A0%81"><span class="toc-number">3.7.3.</span> <span class="toc-text">3 get请求乱码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%93%8D%E5%BA%94%E4%B9%B1%E7%A0%81"><span class="toc-number">3.7.4.</span> <span class="toc-text">4 响应乱码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-servlet%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">3.8.</span> <span class="toc-text">4. servlet生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E4%B8%AA%E9%98%B6%E6%AE%B5"><span class="toc-number">3.8.1.</span> <span class="toc-text">四个阶段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-ServletContext%E5%92%8CServletConfig"><span class="toc-number">3.9.</span> <span class="toc-text">5. ServletContext和ServletConfig</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ServletContext-application"><span class="toc-number">3.9.1.</span> <span class="toc-text">ServletContext(application)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-2"><span class="toc-number">3.9.1.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8"><span class="toc-number">3.9.1.2.</span> <span class="toc-text">作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C"><span class="toc-number">3.9.1.3.</span> <span class="toc-text">操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="toc-number">3.9.1.3.1.</span> <span class="toc-text">测试代码：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">3.9.1.4.</span> <span class="toc-text">生命周期</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ServletConfig"><span class="toc-number">3.9.2.</span> <span class="toc-text">ServletConfig</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-3"><span class="toc-number">3.9.2.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C-2"><span class="toc-number">3.9.2.2.</span> <span class="toc-text">操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81-2"><span class="toc-number">3.9.2.2.1.</span> <span class="toc-text">测试代码</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-URL%E7%9A%84%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99"><span class="toc-number">3.10.</span> <span class="toc-text">6. URL的匹配规则</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B2%BE%E7%A1%AE%E5%8C%B9%E9%85%8D"><span class="toc-number">3.10.1.</span> <span class="toc-text">精确匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E5%90%8D%E5%8C%B9%E9%85%8D"><span class="toc-number">3.10.2.</span> <span class="toc-text">扩展名匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E5%8C%B9%E9%85%8D"><span class="toc-number">3.10.3.</span> <span class="toc-text">路径匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%BB%E6%84%8F%E5%8C%B9%E9%85%8D"><span class="toc-number">3.10.4.</span> <span class="toc-text">任意匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D%E6%89%80%E6%9C%89"><span class="toc-number">3.10.5.</span> <span class="toc-text">匹配所有</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%85%88%E9%A1%BA%E5%BA%8F"><span class="toc-number">3.10.6.</span> <span class="toc-text">优先顺序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90"><span class="toc-number">3.10.6.1.</span> <span class="toc-text">案例分析</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URL%E6%98%A0%E5%B0%84%E6%96%B9%E5%BC%8F"><span class="toc-number">3.10.7.</span> <span class="toc-text">URL映射方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80"><span class="toc-number">3.10.7.1.</span> <span class="toc-text">方式一</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C"><span class="toc-number">3.10.7.2.</span> <span class="toc-text">方式二</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-number">3.11.</span> <span class="toc-text">7. 注解开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%B1%9E%E6%80%A7"><span class="toc-number">3.11.1.</span> <span class="toc-text">相关属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-forward-%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="toc-number">3.12.</span> <span class="toc-text">8. forward 请求转发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#forward%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B"><span class="toc-number">3.12.1.</span> <span class="toc-text">forward处理流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#forword%E5%A4%84%E7%90%86%E7%89%B9%E7%82%B9"><span class="toc-number">3.12.2.</span> <span class="toc-text">forword处理特点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-number">3.12.2.1.</span> <span class="toc-text">注意</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81-3"><span class="toc-number">3.12.3.</span> <span class="toc-text">测试代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#include%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">3.12.4.</span> <span class="toc-text">include（了解）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-sendRedirect-%E5%93%8D%E5%BA%94%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">3.13.</span> <span class="toc-text">9. sendRedirect 响应重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E4%BD%9C%E6%B5%81%E7%A8%8B%EF%BC%9A"><span class="toc-number">3.13.1.</span> <span class="toc-text">运作流程：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81-4"><span class="toc-number">3.13.2.</span> <span class="toc-text">测试代码:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F-2"><span class="toc-number">3.13.3.</span> <span class="toc-text">注意</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-number">3.14.</span> <span class="toc-text">10. 路径问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E8%B7%AF%E5%BE%84"><span class="toc-number">3.14.1.</span> <span class="toc-text">前端路径</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">3.14.1.1.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86"><span class="toc-number">3.15.</span> <span class="toc-text">11. 会话管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86Cookie%E5%92%8CSession"><span class="toc-number">3.15.1.</span> <span class="toc-text">认识Cookie和Session</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie"><span class="toc-number">3.15.2.</span> <span class="toc-text">Cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E7%82%B9-3"><span class="toc-number">3.15.2.1.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E5%92%8C%E5%93%8D%E5%BA%94"><span class="toc-number">3.15.2.2.</span> <span class="toc-text">创建对象和响应</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%9A%84%E8%8E%B7%E5%8F%96"><span class="toc-number">3.15.2.3.</span> <span class="toc-text">数据的获取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cookie%E6%8C%81%E4%B9%85%E5%8C%96%E5%92%8C%E7%8A%B6%E6%80%81Cookie"><span class="toc-number">3.15.2.4.</span> <span class="toc-text">Cookie持久化和状态Cookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81-5"><span class="toc-number">3.15.2.5.</span> <span class="toc-text">测试代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E9%80%9A%E8%BF%87Cookie%E5%88%A4%E6%96%AD%E7%94%A8%E6%88%B7%E6%98%AF%E5%90%A6%E8%AE%BF%E9%97%AE%E8%BF%87%E5%BD%93%E5%89%8DServlet"><span class="toc-number">3.15.2.6.</span> <span class="toc-text">案例：通过Cookie判断用户是否访问过当前Servlet</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Session"><span class="toc-number">3.15.3.</span> <span class="toc-text">Session</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-%E5%88%A4%E6%96%AD%E7%94%A8%E6%88%B7%E6%98%AF%E5%90%A6%E7%99%BB%E5%BD%95"><span class="toc-number">3.15.4.</span> <span class="toc-text">案例:判断用户是否登录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E6%B1%82"><span class="toc-number">3.15.4.1.</span> <span class="toc-text">需求:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">3.15.4.2.</span> <span class="toc-text">项目结构:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D%EF%BC%9A"><span class="toc-number">3.15.4.3.</span> <span class="toc-text">组件介绍：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#login-html"><span class="toc-number">3.15.4.3.1.</span> <span class="toc-text">login.html</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#main-html"><span class="toc-number">3.15.4.3.2.</span> <span class="toc-text">main.html</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#LoginServlet"><span class="toc-number">3.15.4.3.3.</span> <span class="toc-text">LoginServlet</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MainServlet"><span class="toc-number">3.15.4.3.4.</span> <span class="toc-text">MainServlet</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#User"><span class="toc-number">3.15.4.3.5.</span> <span class="toc-text">User</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">JSP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E6%A0%87%E7%AD%BE"><span class="toc-number">4.1.</span> <span class="toc-text">指令标签</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#page%E6%A0%87%E7%AD%BE"><span class="toc-number">4.1.1.</span> <span class="toc-text">page标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#include%E6%A0%87%E7%AD%BE"><span class="toc-number">4.1.2.</span> <span class="toc-text">include标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#taglib%E6%8C%87%E4%BB%A4%E6%A0%87%E7%AD%BE"><span class="toc-number">4.1.3.</span> <span class="toc-text">taglib指令标签</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.2.</span> <span class="toc-text">内置对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%9D%E5%A4%A7%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.2.1.</span> <span class="toc-text">九大对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E4%B8%80%EF%BC%9A%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8A%E8%AE%BF%E9%97%AEEmp%E8%A1%A8-%E5%8A%A8%E6%80%81%E5%9C%B0%E5%88%86%E7%AD%89%E7%BA%A7"><span class="toc-number">4.3.</span> <span class="toc-text">案例一：在浏览器上访问Emp表 动态地分等级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EL%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">4.4.</span> <span class="toc-text">EL表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#EL%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%BF%AB%E6%8D%B7%E5%8F%96%E5%87%BA%E5%9F%9F%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.4.1.</span> <span class="toc-text">EL表达式快捷取出域对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-number">4.4.1.1.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EL%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">4.4.2.</span> <span class="toc-text">EL表达式运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">4.4.2.1.</span> <span class="toc-text">运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">4.4.2.2.</span> <span class="toc-text">使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E4%B8%80%E4%BC%98%E5%8C%96%EF%BC%9A%E4%BD%BF%E7%94%A8EL%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%BC%98%E5%8C%96%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF%E7%9A%84%E9%A1%B5%E9%9D%A2%E5%A4%84%E7%90%86"><span class="toc-number">4.5.</span> <span class="toc-text">案例一优化：使用EL表达式优化查询员工信息的页面处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSTL"><span class="toc-number">4.6.</span> <span class="toc-text">JSTL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%A0%87%E7%AD%BE%E5%BA%93"><span class="toc-number">4.6.1.</span> <span class="toc-text">核心标签库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%A0%87%E7%AD%BEc-set-out-remove"><span class="toc-number">4.6.1.1.</span> <span class="toc-text">操作对象的标签c:set&#x2F;out&#x2F;remove</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E6%9D%A1%E4%BB%B6%E5%88%86%E6%94%AF%E6%A0%87%E7%AD%BEc-if%E5%92%8Cc-choose"><span class="toc-number">4.6.1.2.</span> <span class="toc-text">多条件分支标签c:if和c:choose</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E6%A0%87%E7%AD%BEc-foreach"><span class="toc-number">4.6.1.3.</span> <span class="toc-text">迭代标签c:foreach</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E4%B9%98%E6%B3%95%E8%A1%A8"><span class="toc-number">4.6.1.3.1.</span> <span class="toc-text">打印乘法表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84"><span class="toc-number">4.6.1.3.2.</span> <span class="toc-text">遍历对象数组</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%A0%87%E7%AD%BE%E5%BA%93fmt"><span class="toc-number">4.6.2.</span> <span class="toc-text">格式化标签库fmt</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E6%A0%87%E7%AD%BE"><span class="toc-number">4.6.2.1.</span> <span class="toc-text">导入标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fmt-formatDate-%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E6%A0%87%E7%AD%BE"><span class="toc-number">4.6.2.2.</span> <span class="toc-text">&lt;fmt:formatDate&gt;日期格式标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%A0%87%E7%AD%BE"><span class="toc-number">4.6.2.3.</span> <span class="toc-text">数字格式化标签</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#showEmp-js%E9%A1%B5%E9%9D%A2%E6%9C%80%E7%BB%88%E4%BC%98%E5%8C%96"><span class="toc-number">4.7.</span> <span class="toc-text">showEmp.js页面最终优化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">5.</span> <span class="toc-text">Filter</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E9%80%9A%E8%BF%87%E8%BF%87%E6%BB%A4%E9%AA%8C%E8%AF%81%E7%99%BB%E5%BD%95"><span class="toc-number">5.1.</span> <span class="toc-text">案例：通过过滤验证登录</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#login-jsp"><span class="toc-number">5.1.0.0.0.1.</span> <span class="toc-text">login.jsp</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#welcome-jsp"><span class="toc-number">5.1.0.0.0.2.</span> <span class="toc-text">welcome.jsp</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#aaa-jsp"><span class="toc-number">5.1.0.0.0.3.</span> <span class="toc-text">aaa.jsp</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">6.</span> <span class="toc-text">Listener</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%AE%B0%E5%BD%95%E8%AF%B7%E6%B1%82%E6%97%A5%E5%BF%97"><span class="toc-number">6.1.</span> <span class="toc-text">案例：记录请求日志</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#RequestLoginListener-java"><span class="toc-number">6.1.0.0.0.1.</span> <span class="toc-text">RequestLoginListener.java</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%98%BE%E7%A4%BA%E5%9C%A8%E7%BA%BF%E4%BA%BA%E6%95%B0"><span class="toc-number">6.2.</span> <span class="toc-text">案例：显示在线人数</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#OnlineNumberListener"><span class="toc-number">6.2.0.0.0.1.</span> <span class="toc-text">OnlineNumberListener:</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E9%87%8D%E5%90%AF%E5%85%8D%E7%99%BB%E5%BD%95"><span class="toc-number">6.3.</span> <span class="toc-text">案例：重启免登录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Session%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">6.3.1.</span> <span class="toc-text">Session序列化和反序列化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B"><span class="toc-number">6.3.2.</span> <span class="toc-text">开发过程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-number">6.3.2.1.</span> <span class="toc-text">1 准备实体类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%BC%80%E5%8F%91%E7%99%BB%E5%BD%95%E4%BF%A1%E6%81%AF%E8%BE%93%E5%85%A5%E9%A1%B5%E9%9D%A2"><span class="toc-number">6.3.2.2.</span> <span class="toc-text">2 开发登录信息输入页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E5%BC%80%E5%8F%91%E7%99%BB%E5%BD%95%E4%BF%A1%E6%81%AF%E9%AA%8C%E8%AF%81Servlet"><span class="toc-number">6.3.2.3.</span> <span class="toc-text">3开发登录信息验证Servlet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%BC%80%E5%8F%91%E6%A0%A1%E9%AA%8C%E5%BD%93%E5%89%8D%E6%98%AF%E5%90%A6%E5%B7%B2%E7%BB%8F%E7%99%BB%E5%BD%95%E7%9A%84Controller"><span class="toc-number">6.3.2.4.</span> <span class="toc-text">4 开发校验当前是否已经登录的Controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%B5%8B%E8%AF%95"><span class="toc-number">6.3.2.5.</span> <span class="toc-text">5  测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E7%9B%91%E5%90%AC%E9%92%9D%E5%8C%96%E5%92%8C%E6%B4%BB%E5%8C%96"><span class="toc-number">6.3.2.6.</span> <span class="toc-text">6 监听钝化和活化</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/17/WEB3%20Day1%20%E2%80%94%E2%80%94%20BlockChain%20Basic%201/" title="WEB3 Day1 —— BlockChain Basic 1">WEB3 Day1 —— BlockChain Basic 1</a><time datetime="2025-06-17T06:26:18.000Z" title="发表于 2025-06-17 14:26:18">2025-06-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/05/16/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AC%94%E8%AE%B0/" title="分布式笔记">分布式笔记</a><time datetime="2022-05-16T02:25:28.000Z" title="发表于 2022-05-16 10:25:28">2022-05-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/05/10/mysql8%E9%A1%B9%E7%9B%AE%E8%BF%9E%E6%8E%A5%E5%87%BA%E9%94%99-%E7%AB%AF%E5%8F%A3%E4%B8%BA0/" title="mysql8项目连接出错&amp;端口为0">mysql8项目连接出错&amp;端口为0</a><time datetime="2022-05-10T06:23:51.000Z" title="发表于 2022-05-10 14:23:51">2022-05-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/05/09/%E5%9B%9B%E6%9C%88%E9%9D%A2%E7%BB%8F/" title="四月面经">四月面经</a><time datetime="2022-05-09T02:01:20.000Z" title="发表于 2022-05-09 10:01:20">2022-05-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/05/06/Hexo-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A22/" title="Hexo + GitHub搭建个人博客">Hexo + GitHub搭建个人博客</a><time datetime="2022-05-06T02:24:55.000Z" title="发表于 2022-05-06 10:24:55">2022-05-06</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="Sonia33" target="_blank">Sonia33</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">28</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">14</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/BlockChain/" style="font-size: 0.88rem;">BlockChain<sup>1</sup></a><a href="/tags/CSS/" style="font-size: 0.88rem;">CSS<sup>1</sup></a><a href="/tags/DataBase/" style="font-size: 0.88rem;">DataBase<sup>2</sup></a><a href="/tags/FastDFS/" style="font-size: 0.88rem;">FastDFS<sup>1</sup></a><a href="/tags/Git/" style="font-size: 0.88rem;">Git<sup>1</sup></a><a href="/tags/HTML/" style="font-size: 0.88rem;">HTML<sup>1</sup></a><a href="/tags/IO/" style="font-size: 0.88rem;">IO<sup>1</sup></a><a href="/tags/JDBC/" style="font-size: 0.88rem;">JDBC<sup>1</sup></a><a href="/tags/JQuery/" style="font-size: 0.88rem;">JQuery<sup>1</sup></a><a href="/tags/Java/" style="font-size: 0.88rem;">Java<sup>3</sup></a><a href="/tags/JavaScript/" style="font-size: 0.88rem;">JavaScript<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>1</sup></a><a href="/tags/MySQL/" style="font-size: 0.88rem;">MySQL<sup>2</sup></a><a href="/tags/NoSQL/" style="font-size: 0.88rem;">NoSQL<sup>1</sup></a><a href="/tags/RabbitMQ/" style="font-size: 0.88rem;">RabbitMQ<sup>1</sup></a><a href="/tags/Redis/" style="font-size: 0.88rem;">Redis<sup>1</sup></a><a href="/tags/Zookeeper/" style="font-size: 0.88rem;">Zookeeper<sup>1</sup></a><a href="/tags/hexo/" style="font-size: 0.88rem;">hexo<sup>1</sup></a><a href="/tags/java/" style="font-size: 0.88rem;">java<sup>1</sup></a><a href="/tags/macOS/" style="font-size: 0.88rem;">macOS<sup>2</sup></a><a href="/tags/web/" style="font-size: 0.88rem;">web<sup>1</sup></a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 0.88rem;">分布式<sup>1</sup></a><a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 0.88rem;">后端<sup>1</sup></a><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 0.88rem;">多线程<sup>1</sup></a><a href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" style="font-size: 0.88rem;">并发编程<sup>1</sup></a><a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 0.88rem;">测试<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 0.88rem;">网络<sup>1</sup></a><a href="/tags/%E8%B8%A9%E9%9B%B7/" style="font-size: 0.88rem;">踩雷<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Sonia33 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>